(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{G5Pm:function(n,t,e){"use strict";e.r(t),e.d(t,"MingaFileUploadOverlayRoutingModule",(function(){return v}));var i=e("8Y7J"),o=e("iInd"),l=e("mrSG"),a=e("s7LF"),r=e("LvDl"),c=e("5km/"),p=e("B3cG"),s=e("JF7H"),d=e("SVse"),g=e("GFah"),f=e("iELJ"),O=e("k/kw"),C=e("UWMR"),P=e("WH00"),M=e("SYVq"),_=e("2dIi");const u=["form"];let m=(()=>{class n{constructor(n,t,e,i,o,l,a,r){this.auth=n,this._location=t,this.rootService=e,this.dialog=i,this.mingaManager=o,this.fileUploadManager=l,this.snackBar=a,this.contentEvents=r,this.FileUploadStatus=p.e,this.uploadItems=[],this.pendingFiles=[],this.enableUploading=!1}ngAfterViewInit(){this.initPendingFiles(),this.onOverlayNextDisabled(!0)}onStatusChange(n){this.onOverlayNextDisabled(!n)}onFilesChange(n){this.uploadItems=n}initPendingFiles(){return Object(l.a)(this,void 0,void 0,(function*(){const n=this.fileUploadManager.getPendingFiles("mingaFiles");n&&n.length?(this.pendingFiles=r.clone(n),this.fileUploadManager.clearPendingFiles("mingaFiles")):(this.snackBar.open("No files available to upload, select files and try again"),yield this.onOverlayClose())}))}onOverlayClose(){return Object(l.a)(this,void 0,void 0,(function*(){return this._location.back(),!0}))}hasOverlayNext(){return{text:"Upload",icon:"upload-o"}}onOverlayNext(){return Object(l.a)(this,void 0,void 0,(function*(){this.onOverlayNextDisabled(!0),this.enableUploading=!0}))}get overlayPrevious(){return{icon:"close",text:"Cancel"}}getUploadItemKey(n){return n.file?n.file.name:n.link}onFilesUploaded(n){n&&n.length&&this.submit(n)}onCancel(n){this.onOverlayClose()}hasOverlayPrevious(){return this.overlayPrevious}onOverlayPrevious(){return Object(l.a)(this,void 0,void 0,(function*(){yield this.onOverlayClose()}))}registerOnOverlayNextDisabled(n){this.onOverlayNextDisabled=n}registerOnOverlayPreviousDisabled(n){this.onOverlayPreviousDisabled=n}submit(n){this.rootService.addLoadingPromise(this._submit(n))}_submit(n){return Object(l.a)(this,void 0,void 0,(function*(){const t=yield this.mingaManager.addFiles(n).catch(n=>{console.error("minga file upload error: ",n),this.snackBar.open("an error occurred while saving files."),this.onOverlayNextDisabled(!1)});if(t)return this.dialog.open(c.k,{data:{text:(this.uploadItems.length>1?"Files":"File")+" Successfully Uploaded"}}),this.contentEvents.emitFileUpdateEvent({mingaFileUpdate:!0,files:t}),new Promise((n,t)=>{setTimeout(()=>{this.onOverlayClose(),n(null)},1500)})}))}}return n.\u0275fac=function(t){return new(t||n)(i["\u0275\u0275directiveInject"](s.a),i["\u0275\u0275directiveInject"](d.k),i["\u0275\u0275directiveInject"](g.a),i["\u0275\u0275directiveInject"](f.b),i["\u0275\u0275directiveInject"](O.a),i["\u0275\u0275directiveInject"](p.d),i["\u0275\u0275directiveInject"](C.b),i["\u0275\u0275directiveInject"](P.a))},n.\u0275cmp=i["\u0275\u0275defineComponent"]({type:n,selectors:[["mg-minga-file-upload-overlay"]],viewQuery:function(n,t){if(1&n&&i["\u0275\u0275viewQuery"](u,3,a.v),2&n){let n;i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.form=n.first)}},decls:2,vars:3,consts:[[3,"component"],[3,"initialFiles","uploadFileAssets","valid","pendingFiles","filesUploaded","cancel"]],template:function(n,t){1&n&&(i["\u0275\u0275element"](0,"mg-legacy-overlay-nav",0),i["\u0275\u0275elementStart"](1,"mg-bulk-file-upload",1),i["\u0275\u0275listener"]("valid",(function(n){return t.onStatusChange(n)}))("pendingFiles",(function(n){return t.onFilesChange(n)}))("filesUploaded",(function(n){return t.onFilesUploaded(n)}))("cancel",(function(n){return t.onCancel(n)})),i["\u0275\u0275elementEnd"]()),2&n&&(i["\u0275\u0275property"]("component",t),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("initialFiles",t.pendingFiles)("uploadFileAssets",t.enableUploading))},directives:[M.a,_.a],styles:["[_nghost-%COMP%]{display:block}.disabled[_ngcontent-%COMP%]{pointer-events:none;cursor:not-allowed}.disabled.delete-icon-wrapper[_ngcontent-%COMP%], .disabled.input-action[_ngcontent-%COMP%]{opacity:.6}.title-input[_ngcontent-%COMP%]{border-top:none;border-bottom:1px solid #ccc}.input-wrapper.link-input[_ngcontent-%COMP%]{padding:16px 20px calc(16px - .5em)}.input-wrapper.link-input[_ngcontent-%COMP%]   .input-action[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:.4em}.file-input-wrap[_ngcontent-%COMP%]{font-size:10px;position:relative;border-bottom:1px solid #ccc}.file-input-wrap[_ngcontent-%COMP%]   mg-file-input[_ngcontent-%COMP%]{font-size:inherit}.file-input-wrap[_ngcontent-%COMP%]   mg-file-input[_ngcontent-%COMP%]     .drop-area{transition:opacity .3s cubic-bezier(.55,0,.55,.2);opacity:1}.file-input-wrap[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%], .file-input-wrap[_ngcontent-%COMP%]   mg-file-input[_ngcontent-%COMP%]     .drop-area .user-content h2.text{color:#737373;font-size:1.4em;font-weight:400;text-align:center}.file-input-wrap[_ngcontent-%COMP%]   .uploading-loading-container[_ngcontent-%COMP%]{position:absolute;z-index:1;top:0;left:0;right:0;padding:18px 16px 16px}@media (orientation:landscape){.file-input-wrap[_ngcontent-%COMP%]   .uploading-loading-container[_ngcontent-%COMP%]{padding-top:1.25vh}}@media (orientation:portrait){.file-input-wrap[_ngcontent-%COMP%]   .uploading-loading-container[_ngcontent-%COMP%]{padding-top:1.25vw}}@media (orientation:landscape) and (max-height:320px){.file-input-wrap[_ngcontent-%COMP%]   .uploading-loading-container[_ngcontent-%COMP%]{padding-top:4px}}@media (orientation:portrait) and (max-width:320px){.file-input-wrap[_ngcontent-%COMP%]   .uploading-loading-container[_ngcontent-%COMP%]{padding-top:4px}}@media (min-width:1440px){.file-input-wrap[_ngcontent-%COMP%]   .uploading-loading-container[_ngcontent-%COMP%]{padding-top:18px}}.file-input-wrap.loading[_ngcontent-%COMP%]   mg-file-input[_ngcontent-%COMP%]     .drop-area{transition:opacity .3s cubic-bezier(.55,0,.55,.2);opacity:0}.file-input-wrap.loading[_ngcontent-%COMP%]   mg-file-input[_ngcontent-%COMP%]     .drop-area .user-content h2.text{opacity:0}.input-action[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}.input-action[_ngcontent-%COMP%]:hover{cursor:pointer;color:#93f}.input-action[_ngcontent-%COMP%]:last-child{padding-right:0}.input-action-icon[_ngcontent-%COMP%]{position:relative;width:2em;height:1em;display:inline-block}.input-action-icon[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{position:absolute;left:0;bottom:-.2em;width:12px;height:12px}.input-action-icon[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]     mat-icon svg{vertical-align:top}.files-list[_ngcontent-%COMP%]{padding:0}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{border-bottom:1px solid #ccc;display:flex;justify-content:flex-start;align-items:stretch;padding:0 20px}@media (orientation:landscape){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{padding-left:1.5625vh}}@media (orientation:portrait){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{padding-left:1.5625vw}}@media (orientation:landscape) and (max-height:320px){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{padding-left:5px}}@media (orientation:portrait) and (max-width:320px){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{padding-left:5px}}@media (min-width:1280px){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{padding-left:20px}}@media (orientation:landscape){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{padding-right:1.5625vh}}@media (orientation:portrait){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{padding-right:1.5625vw}}@media (orientation:landscape) and (max-height:320px){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{padding-right:5px}}@media (orientation:portrait) and (max-width:320px){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{padding-right:5px}}@media (min-width:1280px){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{padding-right:20px}}.files-list[_ngcontent-%COMP%]   .file-row.disabled[_ngcontent-%COMP%]{pointer-events:none;cursor:not-allowed}@media (min-width:600px){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]:last-child{border-bottom:none}}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .file-upload-wrapper[_ngcontent-%COMP%], .files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-wrapper.file-name[_ngcontent-%COMP%]{padding:20px 0}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .file-upload-wrapper[_ngcontent-%COMP%]{margin-right:10px;height:50px;width:50px;position:relative;flex:0 0 auto}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .file-upload-wrapper[_ngcontent-%COMP%]   mg-file-upload[_ngcontent-%COMP%]{position:absolute;bottom:20px;left:0;font-size:60%;display:none;border-radius:6px;overflow:hidden;height:50px;width:50px}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .file-upload-wrapper[_ngcontent-%COMP%]   mg-file-upload.nonImage[_ngcontent-%COMP%]{opacity:.9}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .file-upload-wrapper[_ngcontent-%COMP%]   mg-file-upload.show[_ngcontent-%COMP%]{display:block}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .file-upload-wrapper[_ngcontent-%COMP%]   mg-file-extension-box[_ngcontent-%COMP%]{width:100%}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .file-upload-wrapper[_ngcontent-%COMP%]   mg-file-extension-box.hide[_ngcontent-%COMP%]{display:none}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-actions[_ngcontent-%COMP%]:not(.input-action){margin-top:20px}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-action[_ngcontent-%COMP%]{padding:20px 10px 6px}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-action[_ngcontent-%COMP%]:hover{cursor:pointer;color:#93f}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-action[_ngcontent-%COMP%]:last-child{padding-right:0}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-wrapper.file-name[_ngcontent-%COMP%]{flex-basis:85%;color:#737373;align-items:center;display:flex;flex-direction:column;align-items:flex-start;justify-content:space-around;max-width:197px;padding-top:10px}@media (min-width:375px) and (orientation:landscape){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-wrapper.file-name[_ngcontent-%COMP%]{max-width:70.6666666667vh}}@media (min-width:375px) and (orientation:portrait){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-wrapper.file-name[_ngcontent-%COMP%]{max-width:70.6666666667vw}}@media (min-width:375px) and (orientation:landscape) and (max-height:375px){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-wrapper.file-name[_ngcontent-%COMP%]{max-width:265px}}@media (min-width:375px) and (orientation:portrait) and (max-width:375px){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-wrapper.file-name[_ngcontent-%COMP%]{max-width:265px}}@media (min-width:375px) and (min-width:847.641509434){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-wrapper.file-name[_ngcontent-%COMP%]{max-width:599}}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-wrapper.file-name[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin-bottom:-.7em}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-wrapper.file-name[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:100%}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-wrapper.file-name[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{margin-bottom:.1em}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-wrapper.file-name[_ngcontent-%COMP%]   .file-rename[_ngcontent-%COMP%]{margin-bottom:.2em}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-wrapper.file-name[_ngcontent-%COMP%]   .file-rename[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .file-rename[_ngcontent-%COMP%]{color:#93f;font-size:70%}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .delete-icon-wrapper[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:20px 0 20px 20px;flex-basis:5%;flex:1 0 auto;justify-content:flex-end}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .delete-icon-wrapper[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{height:18px;width:18px;color:#737373}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .delete-icon-wrapper[_ngcontent-%COMP%]:hover{cursor:pointer}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .delete-icon-wrapper[_ngcontent-%COMP%]:hover   mg-icon[_ngcontent-%COMP%]{color:#de1717}"]}),n})();var h=e("/yIH"),w=e("CL15");let x=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=i["\u0275\u0275defineNgModule"]({type:n}),n.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[h.a,w.a,d.c]]}),n})(),v=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=i["\u0275\u0275defineNgModule"]({type:n}),n.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[x,o.k.forChild([{path:"",component:m}])]]}),n})()}}]);
//# sourceMappingURL=minga-app-src-app-components-Overlay-MingaFileUploadOverlay-MingaFileUploadOverlayRouting-module-es2015.js.map
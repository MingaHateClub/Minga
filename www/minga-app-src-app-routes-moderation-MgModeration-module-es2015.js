(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{"+50/":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AdminModerationManager=void 0,n("8Y7J");const o=n("qCKp"),i=n("+6wJ"),r=n("jNTl"),a=n("8Y7J");class c{constructor(t){this._ngZone=t}streamDetailedModerationResults(t,e,n,a,c){let l,s,g,d,m;if("function"==typeof e?(g=e,d=n,m=a):"function"==typeof n?(s=e,g=n,d=a,m=c):s=e,g)d||(d=t=>console.error(t)),m||(m=(t,e,n)=>{});else{let t=new o.Subject;l=t.asObservable(),g=e=>{t.next(e)},d=e=>{t.error(e)},m=(e,n,o)=>{t.complete()}}let p=i.grpc.invoke(r.AdminModerationManager.StreamDetailedModerationResults,{request:t,host:window.DEFAULT_ANGULAR_GRPC_HOST||"https://"+location.hostname,metadata:s,onMessage:t=>this._ngZone.run(()=>{g(t)}),onEnd:(t,e,n)=>this._ngZone.run(()=>{if(t==i.grpc.Code.OK)m(t,e,n);else{let n=new Error(t+" "+(e||""));n.code=t,d(n)}})});return l.close=()=>(console.warn("[Angular Grpc] .close() is deprecated use .cancel() instead"),p.close()),l.cancel=()=>p.close(),l}streamDetailedModerationResultsControl(t,e,n){let o,a,c;"function"==typeof e?a=e:(c=e,a=n),a||(o=new Promise((t,e)=>{a=(n,o)=>{n?e(n):t(o)}}));let l=null,s=i.grpc.invoke(r.AdminModerationManager.StreamDetailedModerationResultsControl,{request:t,host:window.DEFAULT_ANGULAR_GRPC_HOST||"https://"+location.hostname,metadata:c,onHeaders:t=>l=t,onMessage:t=>this._ngZone.run(()=>{a(null,t,l||new i.grpc.Metadata)}),onEnd:(t,e,n)=>this._ngZone.run(()=>{if(t!=i.grpc.Code.OK){let n=new Error(e);n.code=t,a(n)}})});return o.cancel=()=>s.close(),o}}e.AdminModerationManager=c,c.\u0275fac=function(t){return new(t||c)(a.\u0275\u0275inject(a.NgZone))},c.\u0275prov=a.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac,providedIn:"root"})},"ES/t":function(t,e,n){"use strict";n.r(e),n.d(e,"MgModerationModule",(function(){return pe}));var o=n("8Y7J"),i=n("iInd"),r=n("TSSN"),a=n("mrSG"),c=n("Cnb3"),l=n("LvDl");class s{constructor(t,e,n,o,i,r,a,c,l){this.router=t,this.reportService=e,this.contentEvents=n,this.snackBar=o,this.route=i,this.permissions=r,this.contentState=a,this.streamManager=c,this.media=l,this.contentFilter=null,this.globalContent=!1,this.primaryStatFilters=[],this.showStats=!1,this.stats={},this.defaultNoResultText="content",this._baseUrl="",this.onOpenContent=t=>this._onOpenContent(t),this.onOpenImages=t=>this._onOpenImages(t),this._mediaSubscription=this.media.asObservable().subscribe(t=>{this.mqAlias=t[0].mqAlias})}get showLongFormatDateComment(){return"xs"!=this.mqAlias}unsubscribeSubscriptions(){this._mediaSubscription.unsubscribe()}get noResultsText(){let t=this.defaultNoResultText,e=[];for(let n of this.primaryStatFilters)if(n.filterActive&&n.filterLinks.length){for(let t=0;t<n.filterLinks.length;t++)e.push(n.filterLinks[t].text);break}if(e.length>0)if(1==e.length)t=e[0];else{const n=e.slice(0,e.length-1);t=n.join(", "),n.length>0&&(t+=" or "+e[e.length-1])}return`There is currently no ${t} in your minga.`}initSetup(){return Object(a.a)(this,void 0,void 0,(function*(){this.route.data.subscribe(t=>Object(a.a)(this,void 0,void 0,(function*(){const e=t.baseUrl,n=!!t.globalContent;e||console.error("MingaReportFeed requires route data 'baseUrl'"),"globalContent"in t||console.error("MingaReportFeed requires route data 'globalContent'"),this._baseUrl=e||"";const o=this.permissions.hasPermission(c.MingaPermission.SUPERADMIN);n&&o&&(this.globalContent=!0),(()=>{this.initTabs(!0)})()})))}))}initGlobalContent(){this.globalContent=!0}getTabStatText(t,e=!1){if(!l.isEmpty(this.stats)&&!this.globalContent)return this.stats[t]?e?this.stats[t].toFixed(1)+"%":this.stats[t].toFixed(0):"--"}_openByContextHash(t){t?this.router.navigate(["",{outlets:{o:["view",t]}}]):this.snackBar.open("unable to open this content")}_onOpenContent(t){const e=t.detail;e.galleryPhotoUuid?this.reportService.openGalleryPhotoModerationLightbox(e):this._openByContextHash(e.actionContextHash||e.parentContextHash||e.contentContextHash)}_onOpenImages(t){const e=t.detail.content;this.contentState&&this.contentState.setStateValue(e.contentContextHash,"imageFocusIndex",t.detail.imageIndex),this._openByContextHash(e.contentContextHash)}toggleFilter(t){const e=!t.filterActive;this.clearActivePrimaryFilter(),t.filterActive=e,t.routerLink||this.updateContentFilter(t.searchFilter),e?this.router.navigate(t.routerLink?t.routerLink:[this._baseUrl]):(t.filterActive=!0,this.streamManager.restartStreamIfAvailable(this.feedName))}resetToFirstFilter(){this.clearActivePrimaryFilter(),this.updateContentFilter(this.primaryStatFilters[0].searchFilter),this.router.navigate([this._baseUrl]),this.primaryStatFilters[0].filterActive=!0}clearActivePrimaryFilter(){this.primaryStatFilters.forEach(t=>{"filterActive"in t&&(t.filterActive=!1)})}itemClick(t){this._openByContextHash(t.model.item.data.contentContextHash)}}var g=n("Eh7J"),d=n("WH00"),m=n("UWMR"),p=n("Vwx4"),f=n("F7jZ"),h=n("jNxq"),C=n("/q54"),b=n("+50/"),u=n("Fudl"),M=n("VDRc"),O=n("ura0"),_=n("SVse"),P=n("2nPA"),x=n("HQAS"),k=n("0cKA"),v=n("jaBy"),y=n("HHVM"),w=n("cB5b"),S=n.n(w),I=n("x1c8");function E(t,e){1&t&&o["\u0275\u0275element"](0,"mge-icon",15)}function F(t,e){1&t&&o["\u0275\u0275element"](0,"mge-icon",16)}function R(t,e){1&t&&o["\u0275\u0275element"](0,"mge-icon",17)}function z(t,e){if(1&t&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"div",18),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()),2&t){const t=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",t.getMingaName(t.content.mingaName,t.content.mingaHash,t.showMinga)," ")}}function D(t,e){1&t&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275text"](1," & Resolve "),o["\u0275\u0275elementContainerEnd"]())}function T(t,e){if(1&t&&(o["\u0275\u0275elementStart"](0,"span",33),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](t.key)}}function L(t,e){if(1&t){const t=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",31),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](t);const e=o["\u0275\u0275nextContext"]().$implicit;return o["\u0275\u0275nextContext"](4).openContentImage(e)})),o["\u0275\u0275template"](1,T,2,1,"span",32),o["\u0275\u0275elementStart"](2,"span",33),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&t){const t=o["\u0275\u0275nextContext"]().$implicit,e=o["\u0275\u0275nextContext"](4);o["\u0275\u0275property"]("ngClass","image-link-"+t.fileurl),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",t.tagsList),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("[",e.displayHumanIndex(t.index),"]")}}function j(t,e){if(1&t&&(o["\u0275\u0275elementStart"](0,"span",36),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](t.key)}}function A(t,e){if(1&t){const t=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",34),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](t);const e=o["\u0275\u0275nextContext"]().$implicit;return o["\u0275\u0275nextContext"](4).openContentImage(e)})),o["\u0275\u0275template"](1,j,2,1,"span",35),o["\u0275\u0275elementEnd"]()}if(2&t){const t=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",t.tagsList)}}function H(t,e){if(1&t&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,L,4,3,"div",29),o["\u0275\u0275template"](2,A,2,1,"div",30),o["\u0275\u0275elementContainerEnd"]()),2&t){const t=e.$implicit,n=o["\u0275\u0275nextContext"](4);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.fileurl&&n.showItemTags(t)),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.fileurl)}}function N(t,e){if(1&t&&(o["\u0275\u0275elementStart"](0,"div",27),o["\u0275\u0275template"](1,H,3,2,"ng-container",28),o["\u0275\u0275elementEnd"]()),2&t){const t=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",t.detailsList)}}function $(t,e){if(1&t&&(o["\u0275\u0275elementStart"](0,"div",22),o["\u0275\u0275elementStart"](1,"div",23),o["\u0275\u0275elementStart"](2,"div"),o["\u0275\u0275elementStart"](3,"span",24),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](5," by: "),o["\u0275\u0275elementStart"](6,"span",11),o["\u0275\u0275text"](7),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"div",25),o["\u0275\u0275text"](9),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"div"),o["\u0275\u0275text"](11),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](12,N,2,1,"div",26),o["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit,n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("ngClass"," resolved-"+n.isResolved(t)+" deleted-"+n.isDeleted(t)+" reported-"+n.isReported(t)),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](n.getHistoryItemPrefixText(t)),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](t.personDisplayName),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",n.getHistoryItemReason(t)," "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](n.dateFormat(t.timestamp)),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.showModerationInfo(t.detailsList))}}function B(t,e){if(1&t&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275text"](1),o["\u0275\u0275elementContainerEnd"]()),2&t){const t=o["\u0275\u0275nextContext"](3);o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" Show All ",t.content.contentHistoryList.length," ")}}function V(t,e){1&t&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275text"](1," Show Less "),o["\u0275\u0275elementContainerEnd"]())}function U(t,e){if(1&t){const t=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",37),o["\u0275\u0275listener"]("click",(function(e){return o["\u0275\u0275restoreView"](t),o["\u0275\u0275nextContext"](2).toggleShowAllHistory(e)})),o["\u0275\u0275template"](1,B,2,1,"ng-container",13),o["\u0275\u0275template"](2,V,2,0,"ng-container",13),o["\u0275\u0275elementEnd"]()}if(2&t){const t=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.showAllHistory),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.showAllHistory)}}function q(t,e){if(1&t&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"div",19),o["\u0275\u0275template"](2,$,13,6,"div",20),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](3,U,3,2,"div",21),o["\u0275\u0275elementContainerEnd"]()),2&t){const t=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngClass","showing-all-"+t.showAllHistory),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",t.getHistoryList(t.content,t.showAllHistory)),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.getShowBottomFooterLink(t.content))}}let K=(()=>{class t{constructor(t,e){this.reportService=t,this.contentEvents=e,this.showFullBody=!1,this.showAllHistory=!1,this.showModeratedText=!1,this.showMinga=!1,this.showLongDateFormat=!1,this.updateStatusFromStream=!1,this.openContentCallback=new o.EventEmitter,this.openImagesCallback=new o.EventEmitter}_onClick(t){if(this.showModeratedText=!this.showModeratedText,"composedPath"in t){const e=t.composedPath();if(e.length&&!this.showFullBody&&"more-report-body"==e[0].className)return this.noClick(t),this.showFullBody=!this.showFullBody,void window.dispatchEvent(new CustomEvent("resize"));this.openModeratedResult(t)}}updateFromStream(t,e){if("object"==typeof this.reportService){if(e){const e=this.isResolved(t);return this.reportService.setReportedUgc({contextHash:t.contentContextHash,galleryPhotoUuid:t.galleryPhotoUuid},e),!0}this.reportService.setDeletedContent(t)}return!1}isReported(t){return t.status==c.ContentStatus.REPORTED}isResolved(t){return t.status==c.ContentStatus.RESOLVED||t.status==c.ContentStatus.OVERRIDDEN}isDeleted(t){return t.status==c.ContentStatus.DELETED||t.status==c.ContentStatus.BLOCKED}getHistoryItemPrefixText(t){let e="";switch(t.status){case c.ContentStatus.REPORTED:e+="Reported";break;case c.ContentStatus.RESOLVED:e+="Resolved";break;case c.ContentStatus.OVERRIDDEN:e+="Published";break;case c.ContentStatus.DELETED:case c.ContentStatus.BLOCKED:e+="Deleted"}return e}getContentTypeText(t){if(!t||!t.contentType)return"";let e=t.contentType;return e=e.toLowerCase(),e=e[0].toUpperCase()+e.substring(1),e=e.replace(/_/g," "),e}getHistoryItemReason(t){return c.ContentStatusUtil.hasReason(c.ContentStatus[t.status])?c.ReportReason.toString(t.reasonIndex):""}getHistoryList(t,e=!1){return e?t.contentHistoryList:t.contentHistoryList.slice(0,1)}openContent(t){this.noClick(t);const e=new CustomEvent("opencontent",{detail:this.content});this.openContentCallback&&this.openContentCallback.emit(e)}toggleShowAllHistory(t){this.noClick(t),this.showAllHistory=!this.showAllHistory,window.dispatchEvent(new CustomEvent("resize"))}noClick(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()}clickContextMenu(t){this.noClick(t);const{pageX:e,pageY:n}=t;this.content.contentContextHash&&this.contentEvents.emitContextMenuOpen({contentContextHash:this.content.actionContextHash||this.content.contentContextHash,contentHash:null,x:e,y:n,disableDelete:this.isDeleted(this.content)})}checkmark(t){if("string"==typeof t)switch(t){case"true":case"1":case"yes":t=!0;break;case"false":case"0":case"no":t=!1}return t?"\u{1f5f9}":"\u2612"}dateFormat(t,e=this.showLongDateFormat){if(!t)return"";const n=e?"llll":"l h:mm A";return Object(y.day)(t).format(n)}getOverriderName(t){return t||"[unknown]"}moderatedBodyHTML(t,e=!1){if(e)return t;t=t?t.replace(/<[^>]+>/g,""):"";const n=document.createElement("div");n.innerHTML=t;const o=n.querySelectorAll("p,br").length,i=Math.max(25,45-25*o);return S()(t,i,{html:!0,indicator:'<span class="more-indicator-wrap"><a href="javascript:;" class="more-report-body"></a></span>'})}getShowBottomFooterLink(t){return t&&t.contentHistoryList&&t.contentHistoryList.length>1}getMissingTextText(t){return t?"[Image(s) Passed Moderation]":"[Inappropriate Image(s) Blocked]"}geAssetSizeKeys(){return["cardbanner","longcardbanner","raw"]}showModerationInfo(t){for(let e of t)if(e.tagsList&&e.tagsList.length)return!0;return!1}showItemTags(t){return t.tagsList.length>0}getAssetUrl(t){return t?Object(v.d)(t):""}getMingaName(t,e,n=!1){return n?t||e?t||`minga hash: ${e}`:"[unknown minga]":null}getImageModerationDetails(){return console.log("@TODO: getImageModerationDetails"),{}}viewButtonClick(t){this.openContent(t)}openContentImage(t){if(t.fileurl){const e=new CustomEvent("openImages",{detail:{content:this.content,imageIndex:t.index}});this.openImagesCallback&&this.openImagesCallback.emit(e)}}openModeratedResult(t){this.content.actionContextHash||this.content.contentContextHash||this.content.parentContextHash||this.content.galleryPhotoUuid?this.openContent(t):this.noClick(t)}displayHumanIndex(t){return t+1}}return t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275directiveInject"](g.a),o["\u0275\u0275directiveInject"](d.a))},t.\u0275cmp=o["\u0275\u0275defineComponent"]({type:t,selectors:[["mg-detailed-moderation-item"]],hostBindings:function(t,e){1&t&&o["\u0275\u0275listener"]("click",(function(t){return e._onClick(t)}))},inputs:{content:"content",showFullBody:"showFullBody",showAllHistory:"showAllHistory",showModeratedText:"showModeratedText",showMinga:"showMinga",showLongDateFormat:"showLongDateFormat",updateStatusFromStream:"updateStatusFromStream"},outputs:{openContentCallback:"openContentCallback",openImagesCallback:"openImagesCallback"},decls:22,vars:12,consts:[[1,"mg-detailed-moderation-result"],[1,"content","content-block"],[1,"report-icon",3,"ngClass"],[1,"report-icon-wrap"],["icon","warning-o",4,"ngIf"],["icon","trash-o",4,"ngIf"],["icon","resolved-o",4,"ngIf"],[1,"inner-content"],[1,"moderated-text-wrap",3,"innerHTML"],[1,"content-author"],[1,"content-type"],[1,"content-author-name"],[1,"report-timestamp"],[4,"ngIf"],[1,"view-button",3,"click"],["icon","warning-o"],["icon","trash-o"],["icon","resolved-o"],[1,"text-minga"],[1,"footer",3,"ngClass"],["class","content-history",3,"ngClass",4,"ngFor","ngForOf"],["class","footer-show-link-container content-block",3,"click",4,"ngIf"],[1,"content-history",3,"ngClass"],[1,"content-history-row","content-block"],[1,"history-item-prefix"],[1,"content-history-center"],["class","moderation-info content-block",4,"ngIf"],[1,"moderation-info","content-block"],[4,"ngFor","ngForOf"],["class","moderation-info-item",3,"ngClass","click",4,"ngIf"],["class","moderation-info-item text-tags",3,"click",4,"ngIf"],[1,"moderation-info-item",3,"ngClass","click"],["class","provider-item-link",4,"ngFor","ngForOf"],[1,"provider-item-link"],[1,"moderation-info-item","text-tags",3,"click"],["class","provider-item",4,"ngFor","ngForOf"],[1,"provider-item"],[1,"footer-show-link-container","content-block",3,"click"]],template:function(t,e){1&t&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275elementStart"](3,"div",3),o["\u0275\u0275template"](4,E,1,0,"mge-icon",4),o["\u0275\u0275template"](5,F,1,0,"mge-icon",5),o["\u0275\u0275template"](6,R,1,0,"mge-icon",6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div",7),o["\u0275\u0275element"](8,"div",8),o["\u0275\u0275elementStart"](9,"div",9),o["\u0275\u0275elementStart"](10,"span",10),o["\u0275\u0275text"](11),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](12," posted by: "),o["\u0275\u0275elementStart"](13,"span",11),o["\u0275\u0275text"](14),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](15,"div",12),o["\u0275\u0275text"](16),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](17,z,3,1,"ng-container",13),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](18,"button",14),o["\u0275\u0275listener"]("click",(function(t){return e.viewButtonClick(t)})),o["\u0275\u0275text"](19," View "),o["\u0275\u0275template"](20,D,2,0,"ng-container",13),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](21,q,4,3,"ng-container",13),o["\u0275\u0275elementEnd"]()),2&t&&(o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngClass"," resolved-"+e.isResolved(e.content)+" deleted-"+e.isDeleted(e.content)+" reported-"+e.isReported(e.content)+" storing-status-"+e.updateFromStream(e.content,e.updateStatusFromStream)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",e.isReported(e.content)),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.isDeleted(e.content)),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.isResolved(e.content)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("innerHTML",e.moderatedBodyHTML(e.content.title,e.showFullBody),o["\u0275\u0275sanitizeHtml"]),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](e.getContentTypeText(e.content)),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate2"]("",e.content.contentAuthorFirstName," ",e.content.contentAuthorLastName,""),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",e.dateFormat(e.content.timestamp,!!e.content.timestamp)," "),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.getMingaName(e.content.mingaName,e.content.mingaHash,e.showMinga)),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",e.isReported(e.content)),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.content.contentHistoryList.length))},directives:[_.m,_.o,I.a,_.n],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");.mg-headline[_ngcontent-%COMP%]{font-family:Muli,sans-serif;font-weight:700;line-height:1}@media (orientation:landscape){.mg-headline[_ngcontent-%COMP%]{font-size:5.0724637681vh}}@media (orientation:portrait){.mg-headline[_ngcontent-%COMP%]{font-size:5.0724637681vw}}@media (orientation:landscape) and (max-height:414px){.mg-headline[_ngcontent-%COMP%]{font-size:21px}}@media (orientation:portrait) and (max-width:414px){.mg-headline[_ngcontent-%COMP%]{font-size:21px}}@media (min-width:433.7142857143px){.mg-headline[_ngcontent-%COMP%]{font-size:22px}}.mg-headline2[_ngcontent-%COMP%]{font-family:Muli,sans-serif;font-weight:700;line-height:1}@media (orientation:landscape){.mg-headline2[_ngcontent-%COMP%]{font-size:4.347826087vh}}@media (orientation:portrait){.mg-headline2[_ngcontent-%COMP%]{font-size:4.347826087vw}}@media (orientation:landscape) and (max-height:414px){.mg-headline2[_ngcontent-%COMP%]{font-size:18px}}@media (orientation:portrait) and (max-width:414px){.mg-headline2[_ngcontent-%COMP%]{font-size:18px}}@media (min-width:437px){.mg-headline2[_ngcontent-%COMP%]{font-size:19px}}.mg-headline3[_ngcontent-%COMP%]{font-family:Muli,sans-serif;font-weight:700;line-height:1}@media (orientation:landscape){.mg-headline3[_ngcontent-%COMP%]{font-size:3.8647342995vh}}@media (orientation:portrait){.mg-headline3[_ngcontent-%COMP%]{font-size:3.8647342995vw}}@media (orientation:landscape) and (max-height:414px){.mg-headline3[_ngcontent-%COMP%]{font-size:16px}}@media (orientation:portrait) and (max-width:414px){.mg-headline3[_ngcontent-%COMP%]{font-size:16px}}@media (min-width:439.875px){.mg-headline3[_ngcontent-%COMP%]{font-size:17px}}.mg-cta[_ngcontent-%COMP%]{font-family:Muli,sans-serif;line-height:1}@media (orientation:landscape){.mg-cta[_ngcontent-%COMP%]{font-size:7.2463768116vh}}@media (orientation:portrait){.mg-cta[_ngcontent-%COMP%]{font-size:7.2463768116vw}}@media (orientation:landscape) and (max-height:414px){.mg-cta[_ngcontent-%COMP%]{font-size:30px}}@media (orientation:portrait) and (max-width:414px){.mg-cta[_ngcontent-%COMP%]{font-size:30px}}@media (min-width:483px){.mg-cta[_ngcontent-%COMP%]{font-size:35px}}.mg-bodycopy[_ngcontent-%COMP%]{font-family:Muli,sans-serif;line-height:1.35}@media (orientation:landscape){.mg-bodycopy[_ngcontent-%COMP%]{font-size:3.8647342995vh}}@media (orientation:portrait){.mg-bodycopy[_ngcontent-%COMP%]{font-size:3.8647342995vw}}@media (orientation:landscape) and (max-height:414px){.mg-bodycopy[_ngcontent-%COMP%]{font-size:16px}}@media (orientation:portrait) and (max-width:414px){.mg-bodycopy[_ngcontent-%COMP%]{font-size:16px}}@media (min-width:439.875px){.mg-bodycopy[_ngcontent-%COMP%]{font-size:17px}}.mg-bodycopy-bold[_ngcontent-%COMP%]{font-family:Muli,sans-serif;font-weight:700;line-height:1.35}@media (orientation:landscape){.mg-bodycopy-bold[_ngcontent-%COMP%]{font-size:3.8647342995vh}}@media (orientation:portrait){.mg-bodycopy-bold[_ngcontent-%COMP%]{font-size:3.8647342995vw}}@media (orientation:landscape) and (max-height:414px){.mg-bodycopy-bold[_ngcontent-%COMP%]{font-size:16px}}@media (orientation:portrait) and (max-width:414px){.mg-bodycopy-bold[_ngcontent-%COMP%]{font-size:16px}}@media (min-width:439.875px){.mg-bodycopy-bold[_ngcontent-%COMP%]{font-size:17px}}.mg-smallcopy[_ngcontent-%COMP%]{font-family:Muli,sans-serif;line-height:1.35}@media (orientation:landscape){.mg-smallcopy[_ngcontent-%COMP%]{font-size:3.1400966184vh}}@media (orientation:portrait){.mg-smallcopy[_ngcontent-%COMP%]{font-size:3.1400966184vw}}@media (orientation:landscape) and (max-height:414px){.mg-smallcopy[_ngcontent-%COMP%]{font-size:13px}}@media (orientation:portrait) and (max-width:414px){.mg-smallcopy[_ngcontent-%COMP%]{font-size:13px}}@media (min-width:445.8461538462px){.mg-smallcopy[_ngcontent-%COMP%]{font-size:14px}}.mg-minicopy[_ngcontent-%COMP%]{font-family:Muli,sans-serif;line-height:1.35}@media (orientation:landscape){.mg-minicopy[_ngcontent-%COMP%]{font-size:2.8985507246vh}}@media (orientation:portrait){.mg-minicopy[_ngcontent-%COMP%]{font-size:2.8985507246vw}}@media (orientation:landscape) and (max-height:414px){.mg-minicopy[_ngcontent-%COMP%]{font-size:12px}}@media (orientation:portrait) and (max-width:414px){.mg-minicopy[_ngcontent-%COMP%]{font-size:12px}}@media (min-width:448.5px){.mg-minicopy[_ngcontent-%COMP%]{font-size:13px}}.mg-minitext[_ngcontent-%COMP%]{font-family:Muli,sans-serif;line-height:1}@media (orientation:landscape){.mg-minitext[_ngcontent-%COMP%]{font-size:2.1739130435vh}}@media (orientation:portrait){.mg-minitext[_ngcontent-%COMP%]{font-size:2.1739130435vw}}@media (orientation:landscape) and (max-height:414px){.mg-minitext[_ngcontent-%COMP%]{font-size:9px}}@media (orientation:portrait) and (max-width:414px){.mg-minitext[_ngcontent-%COMP%]{font-size:9px}}@media (min-width:460px){.mg-minitext[_ngcontent-%COMP%]{font-size:10px}}.mg-authortext[_ngcontent-%COMP%]{font-family:Muli,sans-serif;line-height:1.35}@media (orientation:landscape){.mg-authortext[_ngcontent-%COMP%]{font-size:3.8647342995vh}}@media (orientation:portrait){.mg-authortext[_ngcontent-%COMP%]{font-size:3.8647342995vw}}@media (orientation:landscape) and (max-height:414px){.mg-authortext[_ngcontent-%COMP%]{font-size:16px}}@media (orientation:portrait) and (max-width:414px){.mg-authortext[_ngcontent-%COMP%]{font-size:16px}}@media (min-width:439.875px){.mg-authortext[_ngcontent-%COMP%]{font-size:17px}}.mg-microtext[_ngcontent-%COMP%]{font-family:Muli,sans-serif;line-height:1;font-size:9px}.mg-centered[_ngcontent-%COMP%]{text-align:center}.mg-fullscreen[_ngcontent-%COMP%]{min-height:100vh}[_nghost-%COMP%]{display:block;background-color:#fff;box-shadow:0 0 6px rgba(0,0,0,.15);border-radius:6px;overflow:hidden}[_nghost-%COMP%]:hover{cursor:pointer;box-shadow:0 0 12px rgba(0,0,0,.15)}.content-block[_ngcontent-%COMP%]{padding:7px 12px;box-sizing:border-box;width:100%}.content[_ngcontent-%COMP%]{display:flex;align-items:center;margin:auto 0;position:relative;padding-bottom:12px}.content[_ngcontent-%COMP%]   .view-button[_ngcontent-%COMP%]{position:absolute;bottom:12px;right:12px}.report-icon[_ngcontent-%COMP%]{position:relative;margin:4px 6px 4px 0;fill:#fff;background-color:#de1717;border-radius:50%;width:40px;height:40px;flex-shrink:0}.report-icon[_ngcontent-%COMP%]   .report-icon-wrap[_ngcontent-%COMP%]{padding:5px;width:100%;height:100%;box-sizing:border-box}.report-icon[_ngcontent-%COMP%]   .report-icon-wrap[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%;height:100%}.inner-content[_ngcontent-%COMP%]{margin:4px 12px 0 4px;width:calc(100% - 64px)}.inner-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{line-height:1.4}.inner-content[_ngcontent-%COMP%]   .text-title[_ngcontent-%COMP%]{font-size:60%;font-weight:400;color:#737373}.inner-content[_ngcontent-%COMP%]   .text-reason[_ngcontent-%COMP%]{line-height:1.2;font-size:90%;width:96%}.inner-content[_ngcontent-%COMP%]   .text-reason[_ngcontent-%COMP%]:first-letter{text-transform:capitalize}.inner-content[_ngcontent-%COMP%]   .report-timestamp[_ngcontent-%COMP%]{font-size:60%;color:#737373;margin-top:2px}.inner-content[_ngcontent-%COMP%]   .text-minga[_ngcontent-%COMP%]{color:#737373;font-size:70%;color:#036}.inner-content[_ngcontent-%COMP%]   .text-minga[_ngcontent-%COMP%], .inner-content[_ngcontent-%COMP%]   .text-title[_ngcontent-%COMP%]{width:calc(100% - 35px);white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.more-report-body[_ngcontent-%COMP%]{color:#93f;text-decoration:none;font-size:70%}.more-report-body[_ngcontent-%COMP%]:before{content:"... "}.more-report-body[_ngcontent-%COMP%]:after{content:"More"}.more-report-body[_ngcontent-%COMP%]:hover:after{text-decoration:underline}.report-icon[_ngcontent-%COMP%]{background-color:#737373}.report-icon.resolved-true[_ngcontent-%COMP%]{background-color:#1dce4d}.report-icon.deleted-true[_ngcontent-%COMP%]{background-color:#de1717}.report-icon.reported-true[_ngcontent-%COMP%]{background-color:#fc0}.content-history[_ngcontent-%COMP%]{font-weight:400;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:60%;color:#737373;border-top:1px solid #ccc}.content-history[_ngcontent-%COMP%]:last-of-type{border-bottom:1px solid #ccc}.content-history.resolved-true[_ngcontent-%COMP%]{background-color:#e9faee}.content-history.deleted-true[_ngcontent-%COMP%]{background-color:#fddede}.content-history.reported-true[_ngcontent-%COMP%]{background-color:#fef8df}.content-history[_ngcontent-%COMP%]   .content-history-row[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-between}.content-history[_ngcontent-%COMP%]   .content-history-row[_ngcontent-%COMP%]   .history-item-prefix[_ngcontent-%COMP%]{color:#2f2f2f;font-weight:700}.content-history[_ngcontent-%COMP%]   .content-history-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex-basis:33%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.content-history[_ngcontent-%COMP%]   .content-history-row[_ngcontent-%COMP%] > div.content-history-center[_ngcontent-%COMP%]{text-align:center}.content-history[_ngcontent-%COMP%]   .content-history-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-of-type{text-align:right}.content-history[_ngcontent-%COMP%]   .provider-item[_ngcontent-%COMP%]{color:#737373}.content-history[_ngcontent-%COMP%]   .provider-item[_ngcontent-%COMP%]:not(:last-of-type):after{content:", "}.content-history[_ngcontent-%COMP%]   .provider-item-link[_ngcontent-%COMP%]{color:#93f}.content-history[_ngcontent-%COMP%]   .provider-item-link[_ngcontent-%COMP%]:not(:last-of-type):after{content:", "}.content-author[_ngcontent-%COMP%]{font-size:60%;color:#2f2f2f;max-width:60%;word-break:break-word}.content-author[_ngcontent-%COMP%]   .content-type[_ngcontent-%COMP%]{font-weight:700;text-transform:capitalize}.content-author[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:inline-block}.content-author-name[_ngcontent-%COMP%]{font-weight:700;color:#036}.footer-show-link-container[_ngcontent-%COMP%], .moderation-info-item.image-link-true[_ngcontent-%COMP%], a[_ngcontent-%COMP%]{color:#93f;text-decoration:none}.footer-show-link-container[_ngcontent-%COMP%]:hover, .moderation-info-item.image-link-true[_ngcontent-%COMP%]:hover, a[_ngcontent-%COMP%]:hover{text-decoration:underline}a[_ngcontent-%COMP%]{font-size:70%}.footer-show-link-container[_ngcontent-%COMP%]{font-size:60%;text-align:center}.footer[_ngcontent-%COMP%]{overflow:hidden}.moderation-info[_ngcontent-%COMP%]{display:flex;justify-content:start;flex-wrap:wrap;margin-top:-10px}.moderation-info[_ngcontent-%COMP%]   .moderation-info-item[_ngcontent-%COMP%]{margin-right:10px}.moderated-text-wrap[_ngcontent-%COMP%]{word-break:break-all;color:#036;width:96%}.moderated-text[_ngcontent-%COMP%]{background-color:#fddede}.moderated-text[_ngcontent-%COMP%]   .more-indicator-wrap[_ngcontent-%COMP%]{background-color:#fff}.view-button[_ngcontent-%COMP%]{cursor:pointer;color:#036;border:1px solid #036;border-radius:6px;box-sizing:border-box;padding:2px 6px;font-size:70%;white-space:nowrap;background-color:#fff!important}'],changeDetection:0}),t})();function G(t,e){if(1&t&&(o["\u0275\u0275elementStart"](0,"div",13),o["\u0275\u0275elementStart"](1,"span",14),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&t){const t=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](t.countText)}}function Y(t,e){if(1&t&&(o["\u0275\u0275elementStart"](0,"div",15),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&t){const t=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",t.total," ")}}function J(t,e){if(1&t&&(o["\u0275\u0275elementStart"](0,"div",16),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&t){const t=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275classProp"]("stat-inc",t.statInc)("stat-dec",t.statDec),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",t.statChangeMsg," ")}}function Z(t,e){if(1&t){const t=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",6),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](t);const n=e.$implicit;return o["\u0275\u0275nextContext"]().toggleFilter(n)})),o["\u0275\u0275element"](1,"div",7),o["\u0275\u0275elementStart"](2,"div",8),o["\u0275\u0275elementStart"](3,"div",9),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](5,G,3,1,"div",10),o["\u0275\u0275template"](6,Y,2,1,"div",11),o["\u0275\u0275template"](7,J,2,5,"div",12),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit;o["\u0275\u0275classProp"]("active",t.filterActive)("title-only",!t.countText)("mg-bodycopy",!t.countText),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](t.title),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.countText),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.total),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.statChangeMsg)}}function Q(t,e){if(1&t){const t=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"mg-detailed-moderation-item",20),o["\u0275\u0275listener"]("openContentCallback",(function(e){return o["\u0275\u0275restoreView"](t),o["\u0275\u0275nextContext"](2).onOpenContent(e)}))("openImagesCallback",(function(e){return o["\u0275\u0275restoreView"](t),o["\u0275\u0275nextContext"](2).onOpenImages(e)})),o["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("content",t)("showMinga",n.globalContent)("showLongDateFormat",n.showLongFormatDateComment)}}function W(t,e){if(1&t&&(o["\u0275\u0275elementStart"](0,"mg-stream-scroller",17),o["\u0275\u0275template"](1,Q,1,3,"ng-template",18),o["\u0275\u0275elementStart"](2,"p",19),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&t){const t=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("filter",t.contentFilter)("service",t.adminModerationManager)("clearOnRestart",!0)("bufferAmount",20),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",t.noResultsText," ")}}let X=(()=>{class t extends s{constructor(t,e,n,o,i,r,a,c,l,s){super(t,e,n,o,i,r,a,c,l),this.router=t,this.reportService=e,this.contentEvents=n,this.snackBar=o,this.route=i,this.permissions=r,this.contentState=a,this.streamManager=c,this.media=l,this.adminModerationManager=s,this.defaultNoResultText="moderated content"}get feedName(){return this.globalContent?"MingaGlobalModerationFeed":"MingaModerationFeed"}ngOnInit(){this.initSetup()}ngOnDestroy(){this.unsubscribeSubscriptions()}_getTabStatText(t){return this.getTabStatText(t,!0)}initTabs(t=!0){return Object(a.a)(this,void 0,void 0,(function*(){this.primaryStatFilters=[{title:"ALL",countText:null,total:0,cached:!0,primary:!0,filterActive:!0,searchFilter:c.ReportFilter.ALL,filterLinks:[{text:"moderated content"}]},{title:"PUBLISHED",countText:this._getTabStatText(c.ReportFilter.PUBLISHED),total:0,cached:!0,primary:!0,searchFilter:c.ReportFilter.PUBLISHED,filterLinks:[{text:"published content"}]},{title:"DELETED",countText:this._getTabStatText(c.ReportFilter.DELETED),total:0,cached:!0,primary:!0,searchFilter:c.ReportFilter.DELETED,filterLinks:[{text:"deleted or unpublished content"}]}],t&&this.resetToFirstFilter()}))}updateContentFilter(t){this.contentFilter={moderationFilter:t,global:this.globalContent}}}return t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275directiveInject"](i.g),o["\u0275\u0275directiveInject"](g.a),o["\u0275\u0275directiveInject"](d.a),o["\u0275\u0275directiveInject"](m.b),o["\u0275\u0275directiveInject"](i.a),o["\u0275\u0275directiveInject"](p.c),o["\u0275\u0275directiveInject"](f.a),o["\u0275\u0275directiveInject"](h.a),o["\u0275\u0275directiveInject"](C.g),o["\u0275\u0275directiveInject"](b.AdminModerationManager))},t.\u0275cmp=o["\u0275\u0275defineComponent"]({type:t,selectors:[["mg-moderation-feed"]],features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:8,vars:3,consts:[[1,"mg-headline","page-header"],[1,"default-icon"],["fxLayoutAlign","stretch","fxLayout.xs","row wrap",1,"filter-blocks","large",3,"ngClass.xs"],["fxFlex","auto","class","filter-block has-filter",3,"active","title-only","mg-bodycopy","click",4,"ngFor","ngForOf"],[1,"feed-items"],["rpcStream","streamDetailedModerationResults","rpcControl","streamDetailedModerationResultsControl","mgStreamControl","MingaModerationFeed",3,"filter","service","clearOnRestart","bufferAmount",4,"ngIf"],["fxFlex","auto",1,"filter-block","has-filter",3,"click"],[1,"filter-block-bg"],[1,"filter-block-content"],[1,"filter-block-title"],["class","filter-block-count",4,"ngIf"],["class","filter-block-total",4,"ngIf"],["class","filter-block-stat-change stat-change",3,"stat-inc","stat-dec",4,"ngIf"],[1,"filter-block-count"],[1,"filter-block-count-text"],[1,"filter-block-total"],[1,"filter-block-stat-change","stat-change"],["rpcStream","streamDetailedModerationResults","rpcControl","streamDetailedModerationResultsControl","mgStreamControl","MingaModerationFeed",3,"filter","service","clearOnRestart","bufferAmount"],["mgStreamItem",""],["mg-stream-empty","",1,"mg-centered","mg-minicopy"],[3,"content","showMinga","showLongDateFormat","openContentCallback","openImagesCallback"]],template:function(t,e){1&t&&(o["\u0275\u0275elementStart"](0,"p",0),o["\u0275\u0275elementStart"](1,"mg-icon",1),o["\u0275\u0275text"](2,"warning-o"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](3," Moderation\n"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",2),o["\u0275\u0275template"](5,Z,8,10,"div",3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",4),o["\u0275\u0275template"](7,W,4,5,"mg-stream-scroller",5),o["\u0275\u0275elementEnd"]()),2&t&&(o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngClass.xs","use-outline"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",e.primaryStatFilters),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",e.contentFilter))},directives:[u.a,M.d,M.e,O.a,_.n,_.o,M.b,P.a,x.a,k.a,K],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");.filter-blocks[_ngcontent-%COMP%]{overflow:hidden;margin:1em 0;box-shadow:0 0 6px rgba(0,0,0,.17);border-radius:6px;font-size:8px}@media (max-width:599px){.filter-blocks[_ngcontent-%COMP%]{margin:10px}}.filter-blocks.large[_ngcontent-%COMP%]{font-size:12px}@media (max-width:599px){.filter-blocks.large[_ngcontent-%COMP%]{font-size:10px}}.filter-blocks.min-col-2[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]{min-width:50%!important}.filter-blocks.min-col-4[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]{min-width:25%!important}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]{position:relative;text-align:center;padding:1em}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-bg[_ngcontent-%COMP%], .filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-bg-stats[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;pointer-events:none;position:absolute;z-index:0;top:0;bottom:0;left:0;right:0;border-right:1px solid #ccc;background-color:#fff}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-bg-stats[_ngcontent-%COMP%]{background-color:#036;border-right:none}.filter-blocks[_ngcontent-%COMP%]   .filter-block.has-filter[_ngcontent-%COMP%]{cursor:pointer}@media (hover:hover){.filter-blocks[_ngcontent-%COMP%]   .filter-block.has-filter[_ngcontent-%COMP%]:hover   .filter-block-bg[_ngcontent-%COMP%]{background-color:#f5f5f5}}.filter-blocks[_ngcontent-%COMP%]   .filter-block.active[_ngcontent-%COMP%]   .filter-block-bg[_ngcontent-%COMP%]{background-color:#f5f5f5}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]:first-child   .filter-block-bg[_ngcontent-%COMP%]{border-left:none}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]:last-child   .filter-block-bg[_ngcontent-%COMP%]{border-right:none}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .stat-change.stat-inc[_ngcontent-%COMP%]{color:#28b928}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .stat-change.stat-dec[_ngcontent-%COMP%]{color:#de1717}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content[_ngcontent-%COMP%], .filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content-stats[_ngcontent-%COMP%]{position:relative;z-index:1}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content-stats[_ngcontent-%COMP%]   .filter-block-title[_ngcontent-%COMP%], .filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content[_ngcontent-%COMP%]   .filter-block-title[_ngcontent-%COMP%]{text-transform:uppercase;color:#737373;font-size:.9em}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content-stats[_ngcontent-%COMP%]   .filter-block-title-stats[_ngcontent-%COMP%], .filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content[_ngcontent-%COMP%]   .filter-block-title-stats[_ngcontent-%COMP%]{color:#fff}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content-stats[_ngcontent-%COMP%]   .filter-block-count[_ngcontent-%COMP%], .filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content[_ngcontent-%COMP%]   .filter-block-count[_ngcontent-%COMP%]{color:#2f2f2f;font-size:2em}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content-stats[_ngcontent-%COMP%]   .filter-block-count[_ngcontent-%COMP%]   .filter-block-count-text[_ngcontent-%COMP%], .filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content[_ngcontent-%COMP%]   .filter-block-count[_ngcontent-%COMP%]   .filter-block-count-text[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;font-weight:700}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content-stats[_ngcontent-%COMP%]   .filter-block-count-stats[_ngcontent-%COMP%], .filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content[_ngcontent-%COMP%]   .filter-block-count-stats[_ngcontent-%COMP%]{color:#fff}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content-stats[_ngcontent-%COMP%]   .filter-block-total[_ngcontent-%COMP%], .filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content[_ngcontent-%COMP%]   .filter-block-total[_ngcontent-%COMP%]{color:#737373;font-weight:700;font-size:1.1em}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content-stats[_ngcontent-%COMP%]   .filter-block-total-stats[_ngcontent-%COMP%], .filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content[_ngcontent-%COMP%]   .filter-block-total-stats[_ngcontent-%COMP%]{color:#fff}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content-stats[_ngcontent-%COMP%]   .filter-block-stat-change[_ngcontent-%COMP%], .filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content[_ngcontent-%COMP%]   .filter-block-stat-change[_ngcontent-%COMP%]{font-size:.9em}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content-stats[_ngcontent-%COMP%]   .filter-block-stat-change-indicator[_ngcontent-%COMP%], .filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content[_ngcontent-%COMP%]   .filter-block-stat-change-indicator[_ngcontent-%COMP%]{display:none;width:.5em;height:1.5em;line-height:1.1em;font-size:.7em;font-weight:700;vertical-align:middle}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content-stats[_ngcontent-%COMP%]   .filter-block-stat-change-indicator.stat-dec[_ngcontent-%COMP%], .filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content-stats[_ngcontent-%COMP%]   .filter-block-stat-change-indicator.stat-inc[_ngcontent-%COMP%], .filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content[_ngcontent-%COMP%]   .filter-block-stat-change-indicator.stat-dec[_ngcontent-%COMP%], .filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content[_ngcontent-%COMP%]   .filter-block-stat-change-indicator.stat-inc[_ngcontent-%COMP%]{display:inline-block}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content-stats[_ngcontent-%COMP%]   .filter-block-stat-change-indicator.stat-inc[_ngcontent-%COMP%], .filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content[_ngcontent-%COMP%]   .filter-block-stat-change-indicator.stat-inc[_ngcontent-%COMP%]{transform:rotate(0deg)}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content-stats[_ngcontent-%COMP%]   .filter-block-stat-change-indicator.stat-dec[_ngcontent-%COMP%], .filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content[_ngcontent-%COMP%]   .filter-block-stat-change-indicator.stat-dec[_ngcontent-%COMP%]{transform:rotate(180deg)}.filter-blocks.use-outline[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-bg[_ngcontent-%COMP%]{border:none}.filter-blocks.use-outline[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]{outline:1px solid #ccc}.filter-blocks[_ngcontent-%COMP%]{max-width:510px;margin:6px}@media (min-width:600px){.filter-blocks[_ngcontent-%COMP%]{margin-left:0;margin-right:0}}.filter-link-text[_ngcontent-%COMP%]{text-align:center;font-family:Muli,sans-serif;line-height:1.35;margin-bottom:calc(1em - 6px)}@media (orientation:landscape){.filter-link-text[_ngcontent-%COMP%]{font-size:3.3816425121vh}}@media (orientation:portrait){.filter-link-text[_ngcontent-%COMP%]{font-size:3.3816425121vw}}@media (orientation:landscape) and (max-height:414px){.filter-link-text[_ngcontent-%COMP%]{font-size:14px}}@media (orientation:portrait) and (max-width:414px){.filter-link-text[_ngcontent-%COMP%]{font-size:14px}}@media (min-width:439.875px){.filter-link-text[_ngcontent-%COMP%]{font-size:14.875px}}.filter-link-text[_ngcontent-%COMP%]   .filter-link-text-link[_ngcontent-%COMP%]{font-weight:700}.filter-link-text[_ngcontent-%COMP%]   .filter-link-text-link.clickable[_ngcontent-%COMP%]{color:#93f}.filter-link-text[_ngcontent-%COMP%]   .filter-link-text-link.clickable[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}.filter-block.title-only[_ngcontent-%COMP%]{justify-content:center;align-items:center;display:flex;font-size:17px}@media (max-width:599px){.page-header[_ngcontent-%COMP%]{margin-left:8px;margin-right:8px}}.feed-items[_ngcontent-%COMP%]{margin-bottom:32px}']}),t})();var tt=n("u9T3"),et=n("m9yI"),nt=n("OyaY");let ot=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[nt.a,_.c]]}),t})();var it=n("ls3q");let rt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[it.a,et.b,ot,_.c,tt.a]]}),t})();var at=n("691y");function ct(t,e){if(1&t&&(o["\u0275\u0275elementStart"](0,"div",13),o["\u0275\u0275elementStart"](1,"span",14),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&t){const t=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](t.countText)}}function lt(t,e){if(1&t&&(o["\u0275\u0275elementStart"](0,"div",15),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&t){const t=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",t.total," ")}}function st(t,e){if(1&t&&(o["\u0275\u0275elementStart"](0,"div",16),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&t){const t=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275classProp"]("stat-inc",t.statInc)("stat-dec",t.statDec),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",t.statChangeMsg," ")}}function gt(t,e){if(1&t){const t=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",6),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](t);const n=e.$implicit;return o["\u0275\u0275nextContext"]().toggleFilter(n)})),o["\u0275\u0275element"](1,"div",7),o["\u0275\u0275elementStart"](2,"div",8),o["\u0275\u0275elementStart"](3,"div",9),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](5,ct,3,1,"div",10),o["\u0275\u0275template"](6,lt,2,1,"div",11),o["\u0275\u0275template"](7,st,2,5,"div",12),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit;o["\u0275\u0275classProp"]("active",t.filterActive)("title-only",!t.countText)("mg-bodycopy",!t.countText),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](t.title),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.countText),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.total),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.statChangeMsg)}}function dt(t,e){if(1&t){const t=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"mg-detailed-moderation-item",20),o["\u0275\u0275listener"]("openContentCallback",(function(e){return o["\u0275\u0275restoreView"](t),o["\u0275\u0275nextContext"](2).onOpenContent(e)}))("openImagesCallback",(function(e){return o["\u0275\u0275restoreView"](t),o["\u0275\u0275nextContext"](2).onOpenImages(e)})),o["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("content",t)("updateStatusFromStream",n.globalContent)("showMinga",!!n.globalContent)("showLongDateFormat",n.showLongFormatDateComment)}}function mt(t,e){if(1&t&&(o["\u0275\u0275elementStart"](0,"mg-stream-scroller",17),o["\u0275\u0275template"](1,dt,1,4,"ng-template",18),o["\u0275\u0275elementStart"](2,"p",19),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&t){const t=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("filter",t.contentFilter)("service",t.reportStreamManager)("clearOnRestart",!0)("bufferAmount",20),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",t.noResultsText," ")}}let pt=(()=>{class t extends s{constructor(t,e,n,o,i,r,a,c,l,s){super(t,e,n,o,i,r,a,c,l),this.router=t,this.reportService=e,this.contentEvents=n,this.snackBar=o,this.route=i,this.permissions=r,this.contentState=a,this.streamManager=c,this.media=l,this.reportStreamManager=s,this.defaultNoResultText="reported content"}get feedName(){return this.globalContent?"MingaGlobalReportFeed":"MingaReportFeed"}ngOnInit(){this.initSetup()}ngOnDestroy(){this.unsubscribeSubscriptions()}initTabs(t=!0){return Object(a.a)(this,void 0,void 0,(function*(){this.primaryStatFilters=[{title:"UNRESOLVED",countText:this.getTabStatText(c.ReportFilter.REPORTED),total:0,cached:!0,primary:!0,filterActive:!0,searchFilter:c.ReportFilter.REPORTED,filterLinks:[{text:"unresolved reported content"}]},{title:"RESOLVED",countText:this.getTabStatText(c.ReportFilter.RESOLVED),total:0,cached:!0,primary:!0,searchFilter:c.ReportFilter.RESOLVED,filterLinks:[{text:"resolved reported content"}]}],t&&this.resetToFirstFilter()}))}updateContentFilter(t){this.contentFilter={resolved:t==c.ReportFilter.RESOLVED,global:this.globalContent}}}return t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275directiveInject"](i.g),o["\u0275\u0275directiveInject"](g.a),o["\u0275\u0275directiveInject"](d.a),o["\u0275\u0275directiveInject"](m.b),o["\u0275\u0275directiveInject"](i.a),o["\u0275\u0275directiveInject"](p.c),o["\u0275\u0275directiveInject"](f.a),o["\u0275\u0275directiveInject"](h.a),o["\u0275\u0275directiveInject"](C.g),o["\u0275\u0275directiveInject"](at.ReportStreamManager))},t.\u0275cmp=o["\u0275\u0275defineComponent"]({type:t,selectors:[["mg-reports-feed"]],features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:8,vars:3,consts:[[1,"mg-headline","page-header"],[1,"default-icon"],["fxLayoutAlign","stretch","fxLayout.xs","row wrap",1,"filter-blocks","large",3,"ngClass.xs"],["fxFlex","auto","class","filter-block has-filter",3,"active","title-only","mg-bodycopy","click",4,"ngFor","ngForOf"],[1,"feed-items"],["rpcStream","streamReports","rpcControl","streamReportsControl","mgStreamControl","MingaReportFeed",3,"filter","service","clearOnRestart","bufferAmount",4,"ngIf"],["fxFlex","auto",1,"filter-block","has-filter",3,"click"],[1,"filter-block-bg"],[1,"filter-block-content"],[1,"filter-block-title"],["class","filter-block-count",4,"ngIf"],["class","filter-block-total",4,"ngIf"],["class","filter-block-stat-change stat-change",3,"stat-inc","stat-dec",4,"ngIf"],[1,"filter-block-count"],[1,"filter-block-count-text"],[1,"filter-block-total"],[1,"filter-block-stat-change","stat-change"],["rpcStream","streamReports","rpcControl","streamReportsControl","mgStreamControl","MingaReportFeed",3,"filter","service","clearOnRestart","bufferAmount"],["mgStreamItem",""],["mg-stream-empty","",1,"mg-centered","mg-minicopy"],[3,"content","updateStatusFromStream","showMinga","showLongDateFormat","openContentCallback","openImagesCallback"]],template:function(t,e){1&t&&(o["\u0275\u0275elementStart"](0,"p",0),o["\u0275\u0275elementStart"](1,"mg-icon",1),o["\u0275\u0275text"](2,"warning-o"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](3," User Reported Content\n"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",2),o["\u0275\u0275template"](5,gt,8,10,"div",3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",4),o["\u0275\u0275template"](7,mt,4,5,"mg-stream-scroller",5),o["\u0275\u0275elementEnd"]()),2&t&&(o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngClass.xs","use-outline"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",e.primaryStatFilters),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",e.contentFilter))},directives:[u.a,M.d,M.e,O.a,_.n,_.o,M.b,P.a,x.a,k.a,K],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");.filter-blocks[_ngcontent-%COMP%]{overflow:hidden;margin:1em 0;box-shadow:0 0 6px rgba(0,0,0,.17);border-radius:6px;font-size:8px}@media (max-width:599px){.filter-blocks[_ngcontent-%COMP%]{margin:10px}}.filter-blocks.large[_ngcontent-%COMP%]{font-size:12px}@media (max-width:599px){.filter-blocks.large[_ngcontent-%COMP%]{font-size:10px}}.filter-blocks.min-col-2[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]{min-width:50%!important}.filter-blocks.min-col-4[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]{min-width:25%!important}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]{position:relative;text-align:center;padding:1em}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-bg[_ngcontent-%COMP%], .filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-bg-stats[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;pointer-events:none;position:absolute;z-index:0;top:0;bottom:0;left:0;right:0;border-right:1px solid #ccc;background-color:#fff}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-bg-stats[_ngcontent-%COMP%]{background-color:#036;border-right:none}.filter-blocks[_ngcontent-%COMP%]   .filter-block.has-filter[_ngcontent-%COMP%]{cursor:pointer}@media (hover:hover){.filter-blocks[_ngcontent-%COMP%]   .filter-block.has-filter[_ngcontent-%COMP%]:hover   .filter-block-bg[_ngcontent-%COMP%]{background-color:#f5f5f5}}.filter-blocks[_ngcontent-%COMP%]   .filter-block.active[_ngcontent-%COMP%]   .filter-block-bg[_ngcontent-%COMP%]{background-color:#f5f5f5}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]:first-child   .filter-block-bg[_ngcontent-%COMP%]{border-left:none}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]:last-child   .filter-block-bg[_ngcontent-%COMP%]{border-right:none}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .stat-change.stat-inc[_ngcontent-%COMP%]{color:#28b928}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .stat-change.stat-dec[_ngcontent-%COMP%]{color:#de1717}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content[_ngcontent-%COMP%], .filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content-stats[_ngcontent-%COMP%]{position:relative;z-index:1}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content-stats[_ngcontent-%COMP%]   .filter-block-title[_ngcontent-%COMP%], .filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content[_ngcontent-%COMP%]   .filter-block-title[_ngcontent-%COMP%]{text-transform:uppercase;color:#737373;font-size:.9em}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content-stats[_ngcontent-%COMP%]   .filter-block-title-stats[_ngcontent-%COMP%], .filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content[_ngcontent-%COMP%]   .filter-block-title-stats[_ngcontent-%COMP%]{color:#fff}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content-stats[_ngcontent-%COMP%]   .filter-block-count[_ngcontent-%COMP%], .filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content[_ngcontent-%COMP%]   .filter-block-count[_ngcontent-%COMP%]{color:#2f2f2f;font-size:2em}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content-stats[_ngcontent-%COMP%]   .filter-block-count[_ngcontent-%COMP%]   .filter-block-count-text[_ngcontent-%COMP%], .filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content[_ngcontent-%COMP%]   .filter-block-count[_ngcontent-%COMP%]   .filter-block-count-text[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;font-weight:700}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content-stats[_ngcontent-%COMP%]   .filter-block-count-stats[_ngcontent-%COMP%], .filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content[_ngcontent-%COMP%]   .filter-block-count-stats[_ngcontent-%COMP%]{color:#fff}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content-stats[_ngcontent-%COMP%]   .filter-block-total[_ngcontent-%COMP%], .filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content[_ngcontent-%COMP%]   .filter-block-total[_ngcontent-%COMP%]{color:#737373;font-weight:700;font-size:1.1em}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content-stats[_ngcontent-%COMP%]   .filter-block-total-stats[_ngcontent-%COMP%], .filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content[_ngcontent-%COMP%]   .filter-block-total-stats[_ngcontent-%COMP%]{color:#fff}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content-stats[_ngcontent-%COMP%]   .filter-block-stat-change[_ngcontent-%COMP%], .filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content[_ngcontent-%COMP%]   .filter-block-stat-change[_ngcontent-%COMP%]{font-size:.9em}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content-stats[_ngcontent-%COMP%]   .filter-block-stat-change-indicator[_ngcontent-%COMP%], .filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content[_ngcontent-%COMP%]   .filter-block-stat-change-indicator[_ngcontent-%COMP%]{display:none;width:.5em;height:1.5em;line-height:1.1em;font-size:.7em;font-weight:700;vertical-align:middle}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content-stats[_ngcontent-%COMP%]   .filter-block-stat-change-indicator.stat-dec[_ngcontent-%COMP%], .filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content-stats[_ngcontent-%COMP%]   .filter-block-stat-change-indicator.stat-inc[_ngcontent-%COMP%], .filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content[_ngcontent-%COMP%]   .filter-block-stat-change-indicator.stat-dec[_ngcontent-%COMP%], .filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content[_ngcontent-%COMP%]   .filter-block-stat-change-indicator.stat-inc[_ngcontent-%COMP%]{display:inline-block}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content-stats[_ngcontent-%COMP%]   .filter-block-stat-change-indicator.stat-inc[_ngcontent-%COMP%], .filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content[_ngcontent-%COMP%]   .filter-block-stat-change-indicator.stat-inc[_ngcontent-%COMP%]{transform:rotate(0deg)}.filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content-stats[_ngcontent-%COMP%]   .filter-block-stat-change-indicator.stat-dec[_ngcontent-%COMP%], .filter-blocks[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-content[_ngcontent-%COMP%]   .filter-block-stat-change-indicator.stat-dec[_ngcontent-%COMP%]{transform:rotate(180deg)}.filter-blocks.use-outline[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]   .filter-block-bg[_ngcontent-%COMP%]{border:none}.filter-blocks.use-outline[_ngcontent-%COMP%]   .filter-block[_ngcontent-%COMP%]{outline:1px solid #ccc}.filter-blocks[_ngcontent-%COMP%]{max-width:510px;margin:6px}@media (min-width:600px){.filter-blocks[_ngcontent-%COMP%]{margin-left:0;margin-right:0}}.filter-link-text[_ngcontent-%COMP%]{text-align:center;font-family:Muli,sans-serif;line-height:1.35;margin-bottom:calc(1em - 6px)}@media (orientation:landscape){.filter-link-text[_ngcontent-%COMP%]{font-size:3.3816425121vh}}@media (orientation:portrait){.filter-link-text[_ngcontent-%COMP%]{font-size:3.3816425121vw}}@media (orientation:landscape) and (max-height:414px){.filter-link-text[_ngcontent-%COMP%]{font-size:14px}}@media (orientation:portrait) and (max-width:414px){.filter-link-text[_ngcontent-%COMP%]{font-size:14px}}@media (min-width:439.875px){.filter-link-text[_ngcontent-%COMP%]{font-size:14.875px}}.filter-link-text[_ngcontent-%COMP%]   .filter-link-text-link[_ngcontent-%COMP%]{font-weight:700}.filter-link-text[_ngcontent-%COMP%]   .filter-link-text-link.clickable[_ngcontent-%COMP%]{color:#93f}.filter-link-text[_ngcontent-%COMP%]   .filter-link-text-link.clickable[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}@media (max-width:599px){.page-header[_ngcontent-%COMP%]{margin-left:8px;margin-right:8px}}.feed-items[_ngcontent-%COMP%]{margin-bottom:32px}']}),t})(),ft=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[it.a,et.b,ot,_.c,tt.a]]}),t})();var ht=n("3qIc"),Ct=n("M9ds");function bt(t,e){if(1&t){const t=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"a",5),o["\u0275\u0275listener"]("click",(function(e){return o["\u0275\u0275restoreView"](t),o["\u0275\u0275nextContext"]().tabClick(e)})),o["\u0275\u0275text"](1,"Direct Messages"),o["\u0275\u0275elementEnd"]()}if(2&t){const t=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("disabled",t.globalContent)}}const ut=function(){return{exact:!0}};let Mt=(()=>{class t{constructor(t,e,n,o,i){this.reportService=t,this.contentEvents=e,this.permissions=n,this.route=o,this._settingsService=i,this.globalContent=!1,this.showStats=!1,this.stats={},this.shouldShowDirectMessages$=this._settingsService.isDmModuleEnabled()}ngOnInit(){this.initSetup()}initSetup(){return Object(a.a)(this,void 0,void 0,(function*(){this.showStats=this.permissions.hasPermission(c.MingaPermission.CONTENT_REPORTS_MANAGE),this.route.data.subscribe(t=>Object(a.a)(this,void 0,void 0,(function*(){const e=!!t.globalContent,n=this.permissions.hasPermission(c.MingaPermission.SUPERADMIN);e&&n?this.globalContent=!0:this.initMingaReports(),this.showStats&&(this._reportUpdateSub=this.reportService.onReportUpdate.subscribe(t=>{this.initStats()}),this._deletionSub=this.contentEvents.onContentDeleted.subscribe(t=>{this.refreshStreams()}),this._creationSub=this.contentEvents.onPostCreateSuccess.subscribe(t=>{this.refreshStreams()}),yield this.initStats())})))}))}ngOnDestroy(){this._reportUpdateSub&&this._reportUpdateSub.unsubscribe(),this._deletionSub&&this._deletionSub.unsubscribe(),this._creationSub&&this._creationSub.unsubscribe()}initStats(){return Object(a.a)(this,void 0,void 0,(function*(){this.showStats&&(this.stats=yield this.reportService.retrieveStats(this.globalContent),this._activeReportsFeedComponent&&(this._activeReportsFeedComponent.stats=this.stats,yield this._activeReportsFeedComponent.initTabs(!1)),this._activeModerationFeedComponent&&(this._activeModerationFeedComponent.stats=this.stats,yield this._activeModerationFeedComponent.initTabs(!1)))}))}refreshStreams(){this.reportService.restartReportRelatedStreams()}initMingaReports(){this.reportService.retrieveReportedUgc()}tabClick(t){t&&t.srcElement&&t.srcElement.classList.contains("active")&&(this.refreshStreams(),this.initStats())}onOverlayActivate(t){let e=t=>{t.stats=this.stats};t instanceof pt?(this._activeReportsFeedComponent=t,e(t)):t instanceof X&&(this._activeModerationFeedComponent=t,e(t))}onOverlayDeactivate(t){delete this._activeReportsFeedComponent}}return t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275directiveInject"](g.a),o["\u0275\u0275directiveInject"](d.a),o["\u0275\u0275directiveInject"](p.c),o["\u0275\u0275directiveInject"](i.a),o["\u0275\u0275directiveInject"](ht.a))},t.\u0275cmp=o["\u0275\u0275defineComponent"]({type:t,selectors:[["mg-minga-reports"]],decls:9,vars:9,consts:[["mat-tab-nav-bar","",1,"no-inactive-tab"],["mat-tab-link","","routerLink","./","routerLinkActive","active",3,"routerLinkActiveOptions","click"],["mat-tab-link","","routerLink","ugc","routerLinkActive","active",3,"click"],["mat-tab-link","","routerLink","dm","routerLinkActive","active",3,"disabled","click",4,"ngIf"],[3,"activate","deactivate"],["mat-tab-link","","routerLink","dm","routerLinkActive","active",3,"disabled","click"]],template:function(t,e){1&t&&(o["\u0275\u0275elementStart"](0,"nav",0),o["\u0275\u0275pipe"](1,"async"),o["\u0275\u0275elementStart"](2,"a",1),o["\u0275\u0275listener"]("click",(function(t){return e.tabClick(t)})),o["\u0275\u0275text"](3,"Moderation"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"a",2),o["\u0275\u0275listener"]("click",(function(t){return e.tabClick(t)})),o["\u0275\u0275text"](5,"Reported Content"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](6,bt,2,1,"a",3),o["\u0275\u0275pipe"](7,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"router-outlet",4),o["\u0275\u0275listener"]("activate",(function(t){return e.onOverlayActivate(t)}))("deactivate",(function(t){return e.onOverlayDeactivate(t)})),o["\u0275\u0275elementEnd"]()),2&t&&(o["\u0275\u0275classProp"]("disable-pagination",!o["\u0275\u0275pipeBind1"](1,4,e.shouldShowDirectMessages$)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("routerLinkActiveOptions",o["\u0275\u0275pureFunction0"](8,ut)),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](7,6,e.shouldShowDirectMessages$)))},directives:[Ct.f,i.j,Ct.e,i.i,_.o,i.l],pipes:[_.b],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");[_nghost-%COMP%]{display:block}.mat-tab-link[_ngcontent-%COMP%]{min-width:calc(100% / var(--mg-tab-count, 2));max-width:calc(100% / var(--mg-tab-count, 2));background-color:#fff;border-top:1px solid #ccc;border-bottom:1px solid #ccc;border-top-right-radius:0;border-bottom-left-radius:8px;border-bottom-right-radius:8px;border-right:1px solid #ccc;opacity:1;font-family:Muli,sans-serif;line-height:1.35;color:#036;height:48px;font-weight:400}@media (orientation:landscape){.mat-tab-link[_ngcontent-%COMP%]{font-size:3.3913043478vh}}@media (orientation:portrait){.mat-tab-link[_ngcontent-%COMP%]{font-size:3.3913043478vw}}@media (orientation:landscape) and (max-height:414px){.mat-tab-link[_ngcontent-%COMP%]{font-size:14.04px}}@media (orientation:portrait) and (max-width:414px){.mat-tab-link[_ngcontent-%COMP%]{font-size:14.04px}}@media (min-width:448.5px){.mat-tab-link[_ngcontent-%COMP%]{font-size:15.21px}}.mat-tab-link.tab-fill[_ngcontent-%COMP%]{background-color:#fff;border-top:none;pointer-events:none}.mat-tab-link.tab-fill[_ngcontent-%COMP%]:hover{cursor:default}.mat-tab-link[_ngcontent-%COMP%]:focus{background-color:#fff!important}.mat-tab-link[_ngcontent-%COMP%]:first-child{border-right:1px solid #ccc;min-width:calc(100% / (var(--mg-tab-count, 2) + 1));margin-left:0;border-top-right-radius:0;border-top-left-radius:0;border-bottom-left-radius:8px;border-bottom-right-radius:8px;border-left:none}.mat-tab-link[_ngcontent-%COMP%]:first-child.active + .mat-tab-link[_ngcontent-%COMP%], .mat-tab-link[_ngcontent-%COMP%]:first-child:focus.active + .mat-tab-link[_ngcontent-%COMP%]{border-bottom-left-radius:8px;border-bottom-right-radius:0;border-left:1px solid #ccc;border-right:1px solid #ccc}.mat-tab-link[_ngcontent-%COMP%]:first-child.active + .mat-tab-link[_ngcontent-%COMP%] + .mat-tab-link[_ngcontent-%COMP%], .mat-tab-link[_ngcontent-%COMP%]:first-child:focus.active + .mat-tab-link[_ngcontent-%COMP%] + .mat-tab-link[_ngcontent-%COMP%]{border-left:none;border-bottom-left-radius:0}@media (min-width:511px){.mat-tab-link[_ngcontent-%COMP%]:first-child{border-left:1px solid #ccc}.mat-tab-link[_ngcontent-%COMP%]:first-child.active, .mat-tab-link[_ngcontent-%COMP%]:first-child:focus.active{border-left:none}}.mat-tab-link[_ngcontent-%COMP%]:last-of-type{border-bottom-left-radius:8px;border-bottom-right-radius:8px;border-right:1px solid #ccc}.mat-tab-link.active[_ngcontent-%COMP%], .mat-tab-link[_ngcontent-%COMP%]:focus.active{background-color:#f5f5f5!important;border-bottom:1px solid #f5f5f5;font-weight:700;border-bottom-left-radius:0;border-bottom-right-radius:0;border-right:none}.mat-tab-link.active[_ngcontent-%COMP%] + .mat-tab-link[_ngcontent-%COMP%], .mat-tab-link[_ngcontent-%COMP%]:focus.active + .mat-tab-link[_ngcontent-%COMP%]{border-left:1px solid #ccc}nav[_ngcontent-%COMP%]{border-bottom:none;margin-top:0}@media (min-width:511px){nav[_ngcontent-%COMP%]:not(.no-inactive-tab){border-right:1px solid #ccc}}nav.no-inactive-tab[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]:first-child{min-width:calc(100% / var(--mg-tab-count, 2));max-width:calc(100% / var(--mg-tab-count, 2))}@media (min-width:511px){nav.no-inactive-tab[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]:last-of-type{min-width:calc((100% / var(--mg-tab-count, 2)) - 1px);max-width:calc((100% / var(--mg-tab-count, 2)) - 1px)}}[mat-tab-nav-bar][_ngcontent-%COMP%]{--mg-tab-count:3}[mat-tab-nav-bar].disable-pagination[_ngcontent-%COMP%]{--mg-tab-count:2}[mat-tab-nav-bar][_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{padding:0 10px}[mat-tab-nav-bar][_ngcontent-%COMP%]   .mat-tab-link.mat-tab-disabled[_ngcontent-%COMP%]{opacity:.5}']}),t})(),Ot=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[_.c,Ct.g,i.k]]}),t})();var _t=n("YGJC"),Pt=n("MnlX"),xt=n("3eSl"),kt=n("jtHE"),vt=n("2Vo4"),yt=n("itXk"),wt=n("1G5W"),St=n("Kj3r"),It=n("zp1y"),Et=n("lJxs"),Ft=n("ptnB"),Rt=n("XcM2"),zt=n("lNAY"),Dt=n("Cgve"),Tt=n("Rad/"),Lt=n("LRne"),jt=n("eIep"),At=n("zc8W"),Ht=n("kbmt"),Nt=n("DobJ");const $t=["participantsEl"];function Bt(t,e){1&t&&(o["\u0275\u0275elementStart"](0,"span",9),o["\u0275\u0275text"](1,"-"),o["\u0275\u0275elementEnd"]())}function Vt(t,e){if(1&t&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275element"](1,"mg-person-minimal",7),o["\u0275\u0275template"](2,Bt,2,0,"span",8),o["\u0275\u0275elementContainerEnd"]()),2&t){const t=e.$implicit,n=e.index,i=e.count;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("person",t),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n<i-1)}}function Ut(t){return{src:t.profileImageUrl,color:t.badgeIconColor}}let qt=(()=>{class t{constructor(t,e){this.authInfoService=t,this.peopleFacade=e,this._keywords=[],this.avatarLimit=3,this.readStatus=!1,this._data$=new vt.a(null),this.participatingPeople$=Object(yt.b)(this._data$,this.authInfoService.authPersonHash$).pipe(Object(jt.a)(([t,e])=>t?0===t.participants.length?Object(Lt.a)([zt.c.defaultValue()]):this.peopleFacade.getPeople(t.participants):Object(Lt.a)([zt.c.defaultValue()]))),this.avatarClusterItems$=this.participatingPeople$.pipe(Object(Et.a)(t=>(t.length>this.avatarLimit&&t.splice(this.avatarLimit-1,t.length-this.avatarLimit),t.map(Ut)))),this._particpatingSub=this.participatingPeople$.subscribe(t=>{this.updateMarkedKeywords()})}set data(t){this._data$.next(t||null)}get data(){return this._data$.getValue()}set markKeywords(t){this._keywords=t||[],this.updateMarkedKeywords()}get markKeywords(){return this._keywords}get lastMessageDateString(){var t;return(null===(t=this.data)||void 0===t?void 0:t.lastMessageDate)?"Last message: "+Object(y.day)(this.data.lastMessageDate).format("ddd, MMM D, YYYY h:mm A"):""}updateMarkedKeywords(){this._markInstance&&this._markInstance.unmark(),setTimeout(()=>{this._keywords.length&&this.participantsEl&&(this._markInstance=new Tt.a(this.participantsEl.nativeElement),this._markInstance.mark(this._keywords,{caseSensitive:!1,accuracy:"partially",className:"mg-mark-yellow"}))},0)}ngOnDestroy(){this._particpatingSub.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275directiveInject"](At.a),o["\u0275\u0275directiveInject"](zt.a))},t.\u0275cmp=o["\u0275\u0275defineComponent"]({type:t,selectors:[["mg-conversation-search-preview"]],viewQuery:function(t,e){if(1&t&&o["\u0275\u0275viewQuery"]($t,3),2&t){let t;o["\u0275\u0275queryRefresh"](t=o["\u0275\u0275loadQuery"]())&&(e.participantsEl=t.first)}},hostVars:2,hostBindings:function(t,e){2&t&&o["\u0275\u0275classProp"]("mg-read",e.readStatus)},inputs:{data:"data",markKeywords:"markKeywords",readStatus:"readStatus"},decls:11,vars:11,consts:[["fxLayout","row","fxLayoutAlign","start center"],[3,"items"],["fxLayout","column","fxFlex","auto",1,"preview-content"],[1,"participants"],["participantsEl",""],[4,"ngFor","ngForOf"],[1,"msg-date","mg-minitext"],[1,"mg-smallcopy",3,"person"],["class","multi-people-spreader",4,"ngIf"],[1,"multi-people-spreader"]],template:function(t,e){if(1&t&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275element"](1,"mg-avatar-cluster",1),o["\u0275\u0275pipe"](2,"async"),o["\u0275\u0275pipe"](3,"async"),o["\u0275\u0275elementStart"](4,"div",2),o["\u0275\u0275elementStart"](5,"div",3,4),o["\u0275\u0275template"](7,Vt,3,2,"ng-container",5),o["\u0275\u0275pipe"](8,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",6),o["\u0275\u0275text"](10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&t){let t=null;o["\u0275\u0275advance"](1),o["\u0275\u0275classProp"]("group",(null==(t=o["\u0275\u0275pipeBind1"](2,5,e.avatarClusterItems$))?null:t.length)>2),o["\u0275\u0275property"]("items",o["\u0275\u0275pipeBind1"](3,7,e.avatarClusterItems$)),o["\u0275\u0275advance"](6),o["\u0275\u0275property"]("ngForOf",o["\u0275\u0275pipeBind1"](8,9,e.participatingPeople$)),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](e.lastMessageDateString)}},directives:[M.e,M.d,Ht.a,M.b,_.n,Nt.a,_.o],pipes:[_.b],styles:["[_nghost-%COMP%]{display:block;padding:8px 16px;background-color:#fff;border-radius:4px;box-shadow:0 0 4px rgba(0,0,0,.17);border:1px solid #3cf}.mg-read[_nghost-%COMP%]{border-color:#fff}mg-avatar-cluster[_ngcontent-%COMP%]{margin-right:8px;flex-basis:15%;min-width:64px}mg-avatar-cluster.group[_ngcontent-%COMP%]{--mg-avatar-cluster-size:18px}@media (orientation:landscape){mg-avatar-cluster.group[_ngcontent-%COMP%]{--mg-avatar-size:7.8125vh}}@media (orientation:portrait){mg-avatar-cluster.group[_ngcontent-%COMP%]{--mg-avatar-size:7.8125vw}}@media (orientation:landscape) and (max-height:320px){mg-avatar-cluster.group[_ngcontent-%COMP%]{--mg-avatar-size:25px}}@media (orientation:portrait) and (max-width:320px){mg-avatar-cluster.group[_ngcontent-%COMP%]{--mg-avatar-size:25px}}@media (min-width:422.4px){mg-avatar-cluster.group[_ngcontent-%COMP%]{--mg-avatar-size:33px}}.msg-body-text[_ngcontent-%COMP%], .msg-date[_ngcontent-%COMP%]{color:#737373}.participants[_ngcontent-%COMP%], .preview-content[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden}.msg-date[_ngcontent-%COMP%], .participants[_ngcontent-%COMP%]{text-overflow:ellipsis}.msg-date[_ngcontent-%COMP%]{overflow:hidden;line-height:1.3}.multi-people-spreader[_ngcontent-%COMP%]{margin:0 4px}"],changeDetection:0}),t})();var Kt=n("05dM"),Gt=n("sj4O");function Yt(t,e){if(1&t&&(o["\u0275\u0275elementStart"](0,"div",9),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&t){const t=o["\u0275\u0275nextContext"](2).ngIf,e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("@inOutAnimation",void 0),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",e.getResultsHeaderText(t.length)," ")}}const Jt=function(){return[]};function Zt(t,e){if(1&t){const t=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",10),o["\u0275\u0275elementStart"](1,"mg-conversation-search-preview",11),o["\u0275\u0275listener"]("click",(function(n){o["\u0275\u0275restoreView"](t);const i=e.$implicit;return o["\u0275\u0275nextContext"](3).onClickConversationPreview({event:n,data:i.item})})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("data",t.item)("readStatus",!0)("markKeywords",t.keywords||o["\u0275\u0275pureFunction0"](3,Jt))}}function Qt(t,e){if(1&t&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,Yt,2,2,"div",7),o["\u0275\u0275pipe"](2,"async"),o["\u0275\u0275template"](3,Zt,2,4,"div",8),o["\u0275\u0275elementContainerEnd"]()),2&t){const t=o["\u0275\u0275nextContext"]().ngIf,e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](2,3,e.searchText$)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",t)("ngForTrackBy",e.trackByFn)}}function Wt(t,e){if(1&t&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275element"](1,"mg-empty-state",13),o["\u0275\u0275elementContainerEnd"]()),2&t){const t=e.ngIf;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("title","No conversations found!")("subtitle",'When searching for "'+t+'"')}}function Xt(t,e){1&t&&o["\u0275\u0275element"](0,"mg-empty-state",14),2&t&&o["\u0275\u0275property"]("title","No conversations yet!")}function te(t,e){if(1&t&&(o["\u0275\u0275template"](0,Wt,2,2,"ng-container",4),o["\u0275\u0275pipe"](1,"async"),o["\u0275\u0275template"](2,Xt,1,1,"ng-template",null,12,o["\u0275\u0275templateRefExtractor"])),2&t){const t=o["\u0275\u0275reference"](3),e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](1,2,e.searchText$))("ngIfElse",t)}}function ee(t,e){if(1&t&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,Qt,4,5,"ng-container",4),o["\u0275\u0275template"](2,te,4,4,"ng-template",null,6,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementContainerEnd"]()),2&t){const t=e.ngIf,n=o["\u0275\u0275reference"](3);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.length>0)("ngIfElse",n)}}function ne(t,e){1&t&&o["\u0275\u0275element"](0,"mg-spinner")}let oe=(()=>{class t{constructor(t,e,n,o,i,r){this.router=t,this.snackBar=e,this.route=n,this.messagingService=o,this.conversationNavigator=i,this.peopleFacade=r,this._destroyed$=new kt.a(1),this._fuseOptions={isCaseSensitive:!1,shouldSort:!0,keys:["people.displayName","people.firstName","people.lastName"],includeMatches:!0,threshold:.4},this.trackByFn=(t,e)=>e.id,this.searchText$=new vt.a("");const a=this.messagingService.getAllConversations();this.searchText$.pipe(Object(wt.a)(this._destroyed$),Object(St.a)(300)).subscribe(t=>{t&&this.peopleFacade.makePeopleSearchRequest(t)}),a.pipe(Object(It.a)(this.peopleFacade.mapPeopleCollectionAsPerson(this.peopleFacade.getAllPeopleDetails())),Object(wt.a)(this._destroyed$)).subscribe(([t,e])=>{const n=new Map;t&&t.map(t=>{t.participants.forEach(t=>{e.find(e=>e.hash==t)||n.set(t,t)})});const o=Array.from(n.keys());this.peopleFacade.requestFetchPeopleFromBackend(o)});const c=Object(Pt.a)(this.peopleFacade.mapPeopleCollectionAsPerson(this.peopleFacade.getAllPeopleDetails()),a);this.peopleConversations$=Object(yt.b)([c,this.searchText$]).pipe(Object(Et.a)(([t,e])=>e?new _t.a(t,this._fuseOptions).search(e).map(t=>{const e=this._getHighlightedNameSubstrings(t.matches,t.item.people);return e.length?{item:t.item.conversation,keywords:e}:null}).filter(t=>!!t):t.map(t=>({item:t.conversation}))))}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}_getHighlightedNameSubstrings(t,e){const n=[];for(let o of t){const t=o.refIndex;if(e[t]&&o.key.includes("displayName")){let i=0,r=0;for(let t=0;t<o.indices.length;t++){const e=o.indices[t];if(e.length>=2){const n=e[1]-e[0];n>i&&(i=n,r=t)}}const a=e[t].displayName,c=o.indices[r][1];if(a.length>=c-1){const t=a.slice(o.indices[r][0],c+1);n.push(t)}}}return n}getResultsHeaderText(t){return`Showing ${t} ${1==t?"result":"results"}`}onClickConversationPreview(t){this.conversationNavigator.navigateByConversationId(t.data.id,!0)}onSearchText(t){this.searchText$.next(t)}}return t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275directiveInject"](i.g),o["\u0275\u0275directiveInject"](m.b),o["\u0275\u0275directiveInject"](i.a),o["\u0275\u0275directiveInject"](Ft.a),o["\u0275\u0275directiveInject"](Rt.a),o["\u0275\u0275directiveInject"](zt.a))},t.\u0275cmp=o["\u0275\u0275defineComponent"]({type:t,selectors:[["mg-moderate-messages-feed"]],decls:10,vars:4,consts:[["searchPlaceholder","Search Messages by person",3,"searchQueryChange"],[1,"mg-headline","page-header"],[1,"default-icon"],[1,"feed-items"],[4,"ngIf","ngIfElse"],["loadingTpl",""],["noConversations",""],["class","results-header-text mg-smallcopy",4,"ngIf"],["class","item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"results-header-text","mg-smallcopy"],[1,"item"],[3,"data","readStatus","markKeywords","click"],["nonSearchEmpty",""],[3,"title","subtitle"],[3,"title"]],template:function(t,e){if(1&t&&(o["\u0275\u0275elementStart"](0,"mg-search-active-route",0),o["\u0275\u0275listener"]("searchQueryChange",(function(t){return e.onSearchText(t)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](1,"p",1),o["\u0275\u0275elementStart"](2,"mg-icon",2),o["\u0275\u0275text"](3,"moderation-o"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](4," Direct Messages\n"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",3),o["\u0275\u0275template"](6,ee,4,2,"ng-container",4),o["\u0275\u0275pipe"](7,"async"),o["\u0275\u0275template"](8,ne,1,0,"ng-template",null,5,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"]()),2&t){const t=o["\u0275\u0275reference"](9);o["\u0275\u0275advance"](6),o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](7,2,e.peopleConversations$))("ngIfElse",t)}},directives:[Dt.a,u.a,_.o,_.n,qt,Kt.a,Gt.a],pipes:[_.b],styles:["@media (max-width:599px){.page-header[_ngcontent-%COMP%]{margin-left:8px;margin-right:8px}}.results-header-text[_ngcontent-%COMP%]{color:#737373;text-align:center;margin-bottom:12px}.feed-items[_ngcontent-%COMP%]{margin-bottom:32px}.feed-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{padding:0 0 8px}@media (max-width:599px){.feed-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px}}.feed-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   mg-conversation-timestamp-preview[_ngcontent-%COMP%]{display:block;cursor:pointer}@media (hover:none){.feed-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   mg-conversation-timestamp-preview[_ngcontent-%COMP%]:active{box-shadow:0 0 6px rgba(0,0,0,.17)}}@media (hover:hover){.feed-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   mg-conversation-timestamp-preview[_ngcontent-%COMP%]:hover{box-shadow:0 0 6px rgba(0,0,0,.17)}}"],data:{animation:[xt.a]}}),t})();var ie=n("NG9B"),re=n("CuZz"),ae=n("fHWq"),ce=n("5VmK");let le=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[re.a,ce.a,ae.a,_.c,tt.a]]}),t})();var se=n("DjdL"),ge=n("7Tcv");let de=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[it.a,ie.a,ge.a,le,se.d,_.c]]}),t})();const me=[{path:"minga",component:Mt,children:[{path:"",component:X,data:{baseUrl:"/moderation/minga",globalContent:!1,title:"Moderation"}},{path:"ugc",component:pt,data:{baseUrl:"/moderation/minga/ugc",globalContent:!1,title:"Reported Content"}},{path:"dm",component:oe,data:{baseUrl:"/moderation/minga/dm",title:"DM Moderation"}}]},{path:"global",component:Mt,data:{baseUrl:"/moderation/global",globalContent:!0},children:[{path:"",component:X,data:{baseUrl:"/moderation/global",globalContent:!0}},{path:"ugc",component:pt,data:{baseUrl:"/moderation/global/ugc",globalContent:!0}}]}];let pe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=o["\u0275\u0275defineInjector"]({providers:[],imports:[[Ot,ft,rt,de,r.c.forChild(),i.k.forChild(me)]]}),t})()},jNTl:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AdminModerationManagerClient=e.AdminModerationManager=void 0;const o=n("8ywb"),i=n("PYFZ");class r{}e.AdminModerationManager=r,r.serviceName="minga.AdminModerationManager",r.StreamDetailedModerationResults={methodName:"StreamDetailedModerationResults",service:r,requestStream:!1,responseStream:!0,requestType:i.StreamID,responseType:o.StreamDetailedModerationResult},r.StreamDetailedModerationResultsControl={methodName:"StreamDetailedModerationResultsControl",service:r,requestStream:!1,responseStream:!1,requestType:i.StreamControl,responseType:i.StreamControlResponse},e.AdminModerationManagerClient=class{streamDetailedModerationResults(){throw new Error("minga_protoc_gen_improbable_eng_grpc_web client methods are unimplemented")}streamDetailedModerationResultsControl(){throw new Error("minga_protoc_gen_improbable_eng_grpc_web client methods are unimplemented")}}}}]);
//# sourceMappingURL=minga-app-src-app-routes-moderation-MgModeration-module-es2015.js.map
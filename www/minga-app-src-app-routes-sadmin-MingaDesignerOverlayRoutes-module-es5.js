!function(){function e(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||r(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t=function(){return e};var e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(_){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),l=new E(r||[]);return i(o,"_invoke",{value:C(e,n,l)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(_){return{type:"throw",arg:_}}}e.wrap=u;var g={};function m(){}function h(){}function f(){}var p={};c(p,o,(function(){return this}));var v=Object.getPrototypeOf,x=v&&v(v(M([])));x&&x!==n&&r.call(x,o)&&(p=x);var S=f.prototype=m.prototype=Object.create(p);function y(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var n;i(this,"_invoke",{value:function(i,a){function o(){return new t((function(n,o){!function n(i,a,o,l){var s=d(e[i],e,a);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"==typeof u&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,o,l)}),(function(e){n("throw",e,o,l)})):t.resolve(u).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,l)}))}l(s.arg)}(i,a,n,o)}))}return n=n?n.then(o,o):o()}})}function C(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return V()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var l=b(o,n);if(l){if(l===g)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=d(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===g)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function b(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=d(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,g;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,g):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,g)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function M(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:V}}function V(){return{value:void 0,done:!0}}return h.prototype=f,i(S,"constructor",{value:f,configurable:!0}),i(f,"constructor",{value:h,configurable:!0}),h.displayName=c(f,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,c(e,s,"GeneratorFunction")),e.prototype=Object.create(S),e},e.awrap=function(e){return{__await:e}},y(k.prototype),c(k.prototype,l,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(u(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},y(S),c(S,s,"Generator"),c(S,o,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=M,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(l&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),g}},e}function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw o}}}}function r(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"))?a:String(a)),r)}var i,a}function l(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{DwB7:function(e,r,i){"use strict";i.d(r,"a",(function(){return m}));var o,s=i("mrSG"),c=i("8Y7J"),u=i("Fawd"),d=i("2Vo4"),g=i("TNy8"),m=((o=function(){function e(t){a(this,e),this.bannerLibrary=t,this._old=!0,this.bannerCategoryStasSubject=new d.a({categoryCounts:{}}),this.bannerCategoryStats$=this.bannerCategoryStasSubject.asObservable()}return l(e,[{key:"markOld",value:function(){this._old=!0}},{key:"refreshIfOld",value:function(){this._old&&(this._old=!1,this.refreshBannerCategoryStats())}},{key:"refreshBannerCategoryStats",value:function(){return Object(s.a)(this,void 0,void 0,t().mark((function e(){var r,i,a,o,l,s,c,d;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={categoryCounts:{}},i=new u.BannerLibraryGetStatsRequest,e.next=4,this.bannerLibrary.getStats(i);case 4:a=e.sent.getStats().getCategoryCountList(),o=n(a);try{for(o.s();!(l=o.n()).done;)s=l.value,c=s.getCategory(),d=s.getCategoryCount(),r.categoryCounts[c]=d}catch(t){o.e(t)}finally{o.f()}this.bannerCategoryStasSubject.next(r);case 8:case"end":return e.stop()}}),e,this)})))}}]),e}()).\u0275fac=function(e){return new(e||o)(c["\u0275\u0275inject"](g.BannerLibrary))},o.\u0275prov=c["\u0275\u0275defineInjectable"]({token:o,factory:o.\u0275fac,providedIn:"root"}),o)},Pzyi:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("Fawd");function i(){return[{name:"Art",value:r.Banner.Category.ART},{name:"Causes",value:r.Banner.Category.CAUSES},{name:"Food",value:r.Banner.Category.FOOD},{name:"General",value:r.Banner.Category.GENERAL},{name:"School Events",value:r.Banner.Category.SCHOOL_EVENTS},{name:"Seasonal",value:r.Banner.Category.SEASONAL},{name:"Sports",value:r.Banner.Category.SPORTS}]}},gtkb:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("SVse"),i=n("8Y7J"),o=n("s7LF"),s=n("Tj54");n("qftF");var c,u=((c=l((function e(){a(this,e)}))).\u0275fac=function(e){return new(e||c)},c.\u0275mod=i["\u0275\u0275defineNgModule"]({type:c}),c.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[o.m,r.c,s.b]]}),c)},lN98:function(e,t,n){"use strict";var r=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],i=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],a=function(e,t){var n=e;return"string"==typeof t?n=e.toLocaleString(t):!0===t&&(n=e.toLocaleString()),n};e.exports=function(e,t){if(!Number.isFinite(e))throw new TypeError("Expected a finite number, got ".concat(typeof e,": ").concat(e));var n=(t=Object.assign({bits:!1},t)).bits?i:r;if(t.signed&&0===e)return" 0 "+n[0];var o=e<0,l=o?"-":t.signed?"+":"";if(o&&(e=-e),e<1)return l+a(e,t.locale)+" "+n[0];var s=Math.min(Math.floor(Math.log10(e)/3),n.length-1);return e=Number((e/Math.pow(1e3,s)).toPrecision(3)),l+a(e,t.locale)+" "+n[s]}},"mN/7":function(r,i,o){"use strict";o.r(i),o.d(i,"MingaDesignerOverlayRoutesModule",(function(){return Pt}));var s=o("8Y7J"),c=o("iInd"),u=o("6ra5"),d=o("vCJc"),g=o("mrSG"),m=o("PLeU"),h=o("lJxs"),f=o("pLZG"),p=o("B3cG"),v=o("GFah"),x=o("UWMR"),S=o("BxgO"),y=o("SVse"),k=o("uplL"),C=o("s7LF"),b=o("o1f5"),w=o("pMoy"),I=o("4avL"),E=o("Fudl"),M=o("sj4O");function V(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275elementStart"](1,"mg-overlay-nav-item",3),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().onClose()})),s["\u0275\u0275text"](2," Close "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"mg-overlay-nav-item",4),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().onSave()})),s["\u0275\u0275text"](4," Save "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){var r=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("disabled",r.saveDisabled)}}function _(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"mg-button",11),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](3).deletePhoto()})),s["\u0275\u0275text"](1," Delete "),s["\u0275\u0275elementStart"](2,"mg-icon"),s["\u0275\u0275text"](3,"trash-o"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}function O(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275elementStart"](1,"div",7),s["\u0275\u0275elementStart"](2,"h2",8),s["\u0275\u0275text"](3,"Stock Photo Publish Options"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"p"),s["\u0275\u0275elementStart"](5,"mat-checkbox",9),s["\u0275\u0275listener"]("ngModelChange",(function(e){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](2).archived=e}))("ngModelChange",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](2).onInputUpdated()})),s["\u0275\u0275text"](6,"Archived"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](7,_,4,0,"mg-button",10),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementContainerEnd"]()}if(2&e){var r=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngModel",r.archived),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",r.photoId)}}function D(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"ng-form"),s["\u0275\u0275elementStart"](1,"mg-file-input-upload",5),s["\u0275\u0275listener"]("ngModelChange",(function(e){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().imageAsset=e}))("ngModelChange",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().onInputUpdated()})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](2,O,8,2,"ng-container",6),s["\u0275\u0275elementEnd"]()}if(2&e){var r=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("previewSize",500)("customTitleText",r.photoId?"Upload new Photo to replace existing":"Upload Photo here")("ngModel",r.imageAsset),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",r.imageAsset)}}function F(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",12),s["\u0275\u0275element"](1,"mg-spinner",13),s["\u0275\u0275elementEnd"]())}var T,j,P=((T=function(){function e(n,r,i,o,l,s,c){var u=this;a(this,e),this.fileUploadManager=n,this.mingaDesigner=r,this.rootService=i,this.router=o,this.route=l,this.mingaSnack=s,this._cdr=c,this._initHappened=!1,this._saving=!1,this._metadataEdited=!1,this.imageAsset="",this.photoId="",this.initialStockPhoto=null,this.fetchingStockPhoto=!1,this.archived=!1,this.svgSize="",this.route.params.pipe(Object(h.a)((function(e){return e.photoId||""})),Object(f.a)((function(e){return!!e}))).subscribe((function(e){return Object(g.a)(u,void 0,void 0,t().mark((function n(){var r;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.fetchingStockPhoto=!0,c.markForCheck(),t.prev=1,t.next=4,this.mingaDesigner.getStockPhotoById(e);case 4:if(r=t.sent,t.t0=r,!t.t0){t.next=9;break}return t.next=9,this.setupInitialValues(r);case 9:return t.prev=9,this.fetchingStockPhoto=!1,c.markForCheck(),t.finish(9);case 12:case"end":return t.stop()}}),n,this,[[1,,9,12]])})))})),this.route.params.subscribe((function(e){return u.photoId=e.photoId||""}))}return l(e,[{key:"saveDisabled",get:function(){if(!this.imageAsset||this._saving)return!0;if(this.photoId){var e=Object.keys(this.getChangedFields()).length>0;if(!this._metadataEdited&&!e)return!0}return!1}},{key:"ngAfterViewInit",value:function(){this._initHappened=!0}},{key:"onOverlayClose",value:function(){return!confirm("Are you sure you want to close? Your progress will be lost")}},{key:"setupInitialValues",value:function(e){return Object(g.a)(this,void 0,void 0,t().mark((function n(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.imageAsset=e.photoUrl,this.archived=e.archived,this.initialStockPhoto=e;case 1:case"end":return t.stop()}}),n,this)})))}},{key:"registerOnOverlayConfig",value:function(e){e({containWithinViewport:!0})}},{key:"onClose",value:function(){Object(m.a)(this.router)}},{key:"onInputUpdated",value:function(){this._cdr.markForCheck()}},{key:"deletePhoto",value:function(){return Object(g.a)(this,void 0,void 0,t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.rootService.addLoadingPromise(this.mingaDesigner.deleteStockPhoto(this.photoId));case 3:this.mingaSnack.open("Photo deleted!"),this.onClose(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.mingaSnack.open("Error occurred while deleting photo..."),console.error("Delete Stock Photo error: ",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})))}},{key:"_onSave",value:function(){return Object(g.a)(this,void 0,void 0,t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.photoId){e.next=7;break}return n=this.getChangedFields(),this.imageAsset&&(n.photoUrl=this.imageAsset),e.next=5,this.mingaDesigner.updateStockPhoto(this.photoId,Object.assign({},n));case 5:e.next=10;break;case 7:return e.next=9,this.mingaDesigner.createStockPhoto({photoUrl:this.imageAsset,archived:this.archived});case 9:this.photoId=e.sent;case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e,this)})))}},{key:"getChangedFields",value:function(){var e,t={};return this.archived!==(null===(e=this.initialStockPhoto)||void 0===e?void 0:e.archived)&&(t.archived=this.archived),t}},{key:"onSave",value:function(){return Object(g.a)(this,void 0,void 0,t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._saving){e.next=13;break}return e.prev=1,this._saving=!0,this._cdr.markForCheck(),e.next=6,this.rootService.addLoadingPromise(this._onSave());case 6:if(e.t0=e.sent,!e.t0){e.next=10;break}return e.next=10,Object(m.a)(this.router);case 10:return e.prev=10,this._saving=!1,this._cdr.markForCheck(),e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[1,,10,13]])})))}}]),e}()).\u0275fac=function(e){return new(e||T)(s["\u0275\u0275directiveInject"](p.d),s["\u0275\u0275directiveInject"](d.MingaDesignerService),s["\u0275\u0275directiveInject"](v.a),s["\u0275\u0275directiveInject"](c.g),s["\u0275\u0275directiveInject"](c.a),s["\u0275\u0275directiveInject"](x.b),s["\u0275\u0275directiveInject"](s.ChangeDetectorRef))},T.\u0275cmp=s["\u0275\u0275defineComponent"]({type:T,selectors:[["ng-component"]],decls:5,vars:4,consts:[[4,"mgOverlayStructure","mgOverlayStructureRegion"],[4,"ngIf","ngIfElse"],["fetchingStockPhotoTpl",""],["icon","close",1,"mg-align-left",3,"click"],["icon","save-o",1,"mg-align-right",3,"disabled","click"],["required","","name","image","previewAspectRatio","1:1",3,"previewSize","customTitleText","ngModel","ngModelChange"],[4,"ngIf"],[1,"padded"],[1,"mg-headline2"],["name","archived",3,"ngModel","ngModelChange"],["color","warn",3,"click",4,"ngIf"],["color","warn",3,"click"],[1,"mg-centered"],["diameter","25","thickness","4"]],template:function(e,t){if(1&e&&(s["\u0275\u0275template"](0,V,5,1,"div",0),s["\u0275\u0275elementStart"](1,"div"),s["\u0275\u0275template"](2,D,3,4,"ng-form",1),s["\u0275\u0275template"](3,F,2,0,"ng-template",null,2,s["\u0275\u0275templateRefExtractor"]),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275reference"](4);s["\u0275\u0275property"]("mgOverlayStructure",!0)("mgOverlayStructureRegion","top"),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",!t.fetchingStockPhoto)("ngIfElse",n)}},directives:[S.a,y.o,k.a,C.v,b.a,C.B,C.t,C.w,w.a,I.a,E.a,M.a],styles:[".padded[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px;padding-bottom:16px}"],changeDetection:0}),T),A=o("u9T3"),L=o("Q2Ze"),B=o("e6WT"),R=o("CO6v"),U=o("p+4T"),$=o("gtkb"),N=o("HxU+"),z=o("ls3q"),H=o("CL15"),G=o("7Tcv"),q=((j=l((function e(){a(this,e)}))).\u0275fac=function(e){return new(e||j)},j.\u0275mod=s["\u0275\u0275defineNgModule"]({type:j}),j.\u0275inj=s["\u0275\u0275defineInjector"]({imports:[[H.a,$.a,N.a,G.a,R.a,z.a,A.a,U.a,y.c,C.m,L.f,B.c,w.b]]}),j);function W(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275elementStart"](1,"mg-overlay-nav-item",3),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().onClose()})),s["\u0275\u0275text"](2," Close "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"mg-overlay-nav-item",4),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().onSave()})),s["\u0275\u0275text"](4," Save "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){var r=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("disabled",r.saveDisabled)}}function Y(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"mg-button",11),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](3).deleteSticker()})),s["\u0275\u0275text"](1," Delete "),s["\u0275\u0275elementStart"](2,"mg-icon"),s["\u0275\u0275text"](3,"trash-o"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}function Q(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275elementStart"](1,"div",7),s["\u0275\u0275elementStart"](2,"h2",8),s["\u0275\u0275text"](3,"Stock Sticker Publish Options"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"p"),s["\u0275\u0275elementStart"](5,"mat-checkbox",9),s["\u0275\u0275listener"]("ngModelChange",(function(e){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](2).archived=e}))("ngModelChange",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](2).onInputUpdated()})),s["\u0275\u0275text"](6,"Archived"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](7,Y,4,0,"mg-button",10),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementContainerEnd"]()}if(2&e){var r=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngModel",r.archived),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",r.stickerId)}}function J(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"ng-form"),s["\u0275\u0275elementStart"](1,"mg-file-input-upload",5),s["\u0275\u0275listener"]("ngModelChange",(function(e){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().imageAsset=e}))("ngModelChange",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().onInputUpdated()})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](2,Q,8,2,"ng-container",6),s["\u0275\u0275elementEnd"]()}if(2&e){var r=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("previewSize",500)("customTitleText",r.stickerId?"Upload new Sticker to replace existing":"Upload Sticker here")("ngModel",r.imageAsset),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",r.imageAsset)}}function K(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",12),s["\u0275\u0275element"](1,"mg-spinner",13),s["\u0275\u0275elementEnd"]())}var Z,X=((Z=function(){function e(n,r,i,o,l,s,c){var u=this;a(this,e),this.fileUploadManager=n,this.mingaDesigner=r,this.rootService=i,this.router=o,this.route=l,this.mingaSnack=s,this._cdr=c,this._initHappened=!1,this._saving=!1,this._metadataEdited=!1,this.imageAsset="",this.stickerId="",this.initialStockSticker=null,this.fetchingStockSticker=!1,this.archived=!1,this.svgSize="",this.route.params.pipe(Object(h.a)((function(e){return e.stickerId||""})),Object(f.a)((function(e){return!!e}))).subscribe((function(e){return Object(g.a)(u,void 0,void 0,t().mark((function n(){var r;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.fetchingStockSticker=!0,c.markForCheck(),t.prev=1,t.next=4,this.mingaDesigner.getStockStickerById(e);case 4:if(r=t.sent,t.t0=r,!t.t0){t.next=9;break}return t.next=9,this.setupInitialValues(r);case 9:return t.prev=9,this.fetchingStockSticker=!1,c.markForCheck(),t.finish(9);case 12:case"end":return t.stop()}}),n,this,[[1,,9,12]])})))})),this.route.params.subscribe((function(e){return u.stickerId=e.stickerId||""}))}return l(e,[{key:"saveDisabled",get:function(){if(!this.imageAsset||this._saving)return!0;if(this.stickerId){var e=Object.keys(this.getChangedFields()).length>0;if(!this._metadataEdited&&!e)return!0}return!1}},{key:"ngAfterViewInit",value:function(){this._initHappened=!0}},{key:"onOverlayClose",value:function(){return!confirm("Are you sure you want to close? Your progress will be lost")}},{key:"setupInitialValues",value:function(e){return Object(g.a)(this,void 0,void 0,t().mark((function n(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.imageAsset=e.stickerUrl,this.archived=e.archived,this.initialStockSticker=e;case 1:case"end":return t.stop()}}),n,this)})))}},{key:"registerOnOverlayConfig",value:function(e){e({containWithinViewport:!0})}},{key:"onClose",value:function(){Object(m.a)(this.router)}},{key:"onInputUpdated",value:function(){this._cdr.markForCheck()}},{key:"deleteSticker",value:function(){return Object(g.a)(this,void 0,void 0,t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.rootService.addLoadingPromise(this.mingaDesigner.deleteStockSticker(this.stickerId));case 3:this.mingaSnack.open("Sticker deleted!"),this.onClose(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.mingaSnack.open("Error occurred while deleting sticker..."),console.error("Delete Stock Sticker error: ",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})))}},{key:"_onSave",value:function(){return Object(g.a)(this,void 0,void 0,t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.stickerId){e.next=7;break}return n=this.getChangedFields(),this.imageAsset&&(n.stickerUrl=this.imageAsset),e.next=5,this.mingaDesigner.updateStockSticker(this.stickerId,Object.assign({},n));case 5:e.next=10;break;case 7:return e.next=9,this.mingaDesigner.createStockSticker({stickerUrl:this.imageAsset,archived:this.archived});case 9:this.stickerId=e.sent;case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e,this)})))}},{key:"getChangedFields",value:function(){var e,t={};return this.archived!==(null===(e=this.initialStockSticker)||void 0===e?void 0:e.archived)&&(t.archived=this.archived),t}},{key:"onSave",value:function(){return Object(g.a)(this,void 0,void 0,t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._saving){e.next=13;break}return e.prev=1,this._saving=!0,this._cdr.markForCheck(),e.next=6,this.rootService.addLoadingPromise(this._onSave());case 6:if(e.t0=e.sent,!e.t0){e.next=10;break}return e.next=10,Object(m.a)(this.router);case 10:return e.prev=10,this._saving=!1,this._cdr.markForCheck(),e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[1,,10,13]])})))}}]),e}()).\u0275fac=function(e){return new(e||Z)(s["\u0275\u0275directiveInject"](p.d),s["\u0275\u0275directiveInject"](d.MingaDesignerService),s["\u0275\u0275directiveInject"](v.a),s["\u0275\u0275directiveInject"](c.g),s["\u0275\u0275directiveInject"](c.a),s["\u0275\u0275directiveInject"](x.b),s["\u0275\u0275directiveInject"](s.ChangeDetectorRef))},Z.\u0275cmp=s["\u0275\u0275defineComponent"]({type:Z,selectors:[["ng-component"]],decls:5,vars:4,consts:[[4,"mgOverlayStructure","mgOverlayStructureRegion"],[4,"ngIf","ngIfElse"],["fetchingStockStickerTpl",""],["icon","close",1,"mg-align-left",3,"click"],["icon","save-o",1,"mg-align-right",3,"disabled","click"],["required","","name","image","previewAspectRatio","1:1",3,"previewSize","customTitleText","ngModel","ngModelChange"],[4,"ngIf"],[1,"padded"],[1,"mg-headline2"],["name","archived",3,"ngModel","ngModelChange"],["color","warn",3,"click",4,"ngIf"],["color","warn",3,"click"],[1,"mg-centered"],["diameter","25","thickness","4"]],template:function(e,t){if(1&e&&(s["\u0275\u0275template"](0,W,5,1,"div",0),s["\u0275\u0275elementStart"](1,"div"),s["\u0275\u0275template"](2,J,3,4,"ng-form",1),s["\u0275\u0275template"](3,K,2,0,"ng-template",null,2,s["\u0275\u0275templateRefExtractor"]),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275reference"](4);s["\u0275\u0275property"]("mgOverlayStructure",!0)("mgOverlayStructureRegion","top"),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",!t.fetchingStockSticker)("ngIfElse",n)}},directives:[S.a,y.o,k.a,C.v,b.a,C.B,C.t,C.w,w.a,I.a,E.a,M.a],styles:[".padded[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px;padding-bottom:16px}"],changeDetection:0}),Z),ee=o("Q3ix"),te=o("osae"),ne=o("NiVs"),re=o("jaBy"),ie=o("gO7L"),ae=o("lN98"),oe=o.n(ae),le=o("Cfvw"),se=o("IzEk"),ce=o("tS1D"),ue=o("vkgz"),de=o("KNwe"),ge=o("NchO"),me=o("c1WO"),he=o("T0RT"),fe=o("i1AJ"),pe=o("TAkL"),ve=o("M9ds"),xe=o("8sFK"),Se=o("A7V7"),ye=o("as3c"),ke=o("o4Yh");function Ce(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275elementStart"](1,"mat-form-field",11),s["\u0275\u0275elementStart"](2,"mat-label"),s["\u0275\u0275text"](3,"Default Value"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"textarea",12),s["\u0275\u0275listener"]("blur",(function(){s["\u0275\u0275restoreView"](n);var e=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().onSlotDefaultValueBlur(e)}))("focus",(function(){s["\u0275\u0275restoreView"](n);var e=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().onSlotDefaultValueFocus(e)}))("ngModelChange",(function(e){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().$implicit.defaultValue=e}))("ngModelChange",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](2).triggerChange()})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"mg-button",13),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](n);var e=s["\u0275\u0275nextContext"]().$implicit,t=s["\u0275\u0275nextContext"]();return e.defaultValue={text:e.defaultValue},t.triggerChange()})),s["\u0275\u0275text"](6," Use styles "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementContainerEnd"]()}if(2&e){var r=s["\u0275\u0275nextContext"](),i=r.index,a=r.$implicit;s["\u0275\u0275advance"](4),s["\u0275\u0275propertyInterpolate1"]("name","slot_default_value_",i,""),s["\u0275\u0275property"]("ngModel",a.defaultValue)}}function be(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"mat-form-field",11),s["\u0275\u0275elementStart"](1,"mat-label"),s["\u0275\u0275text"](2,"Default Value"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"textarea",12),s["\u0275\u0275listener"]("blur",(function(){s["\u0275\u0275restoreView"](n);var e=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().onSlotDefaultValueBlur(e)}))("focus",(function(){s["\u0275\u0275restoreView"](n);var e=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().onSlotDefaultValueFocus(e)}))("ngModelChange",(function(e){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().$implicit.defaultValue.text=e}))("ngModelChange",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](2).triggerChange()})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"mg-alignment-selector",14),s["\u0275\u0275listener"]("ngModelChange",(function(e){s["\u0275\u0275restoreView"](n);var t=s["\u0275\u0275nextContext"]().$implicit,r=s["\u0275\u0275nextContext"]();return t.defaultValue.textAnchor=r.alignmentToTextAnchor(e),r.triggerChange()})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"mat-form-field",11),s["\u0275\u0275elementStart"](6,"mat-label"),s["\u0275\u0275text"](7,"Default Color"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"textarea",12),s["\u0275\u0275listener"]("blur",(function(){s["\u0275\u0275restoreView"](n);var e=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().onSlotDefaultValueBlur(e)}))("focus",(function(){s["\u0275\u0275restoreView"](n);var e=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().onSlotDefaultValueFocus(e)}))("ngModelChange",(function(e){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().$implicit.defaultValue.color=e}))("ngModelChange",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](2).triggerChange()})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"mat-form-field",11),s["\u0275\u0275elementStart"](10,"mat-label"),s["\u0275\u0275text"](11,"Default Font Size"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"textarea",12),s["\u0275\u0275listener"]("blur",(function(){s["\u0275\u0275restoreView"](n);var e=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().onSlotDefaultValueBlur(e)}))("focus",(function(){s["\u0275\u0275restoreView"](n);var e=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().onSlotDefaultValueFocus(e)}))("ngModelChange",(function(e){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().$implicit.defaultValue.fontSize=e}))("ngModelChange",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](2).triggerChange()})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"mg-svg-font-selector",15),s["\u0275\u0275listener"]("selectedFontFamilyChange",(function(e){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().$implicit.defaultValue.fontFamily=e}))("selectedFontFamilyChange",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](2).triggerChange()})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"mat-checkbox",16),s["\u0275\u0275listener"]("ngModelChange",(function(e){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().$implicit.defaultValue.italic=e}))("ngModelChange",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](2).triggerChange()})),s["\u0275\u0275text"](15,"Italic"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](16,"mat-checkbox",16),s["\u0275\u0275listener"]("ngModelChange",(function(e){s["\u0275\u0275restoreView"](n);var t=s["\u0275\u0275nextContext"]().$implicit,r=s["\u0275\u0275nextContext"]();return t.defaultValue.fontWeight=e?700:400,r.triggerChange()})),s["\u0275\u0275text"](17,"Bold"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"mg-button",13),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](n);var e=s["\u0275\u0275nextContext"]().$implicit,t=s["\u0275\u0275nextContext"]();return e.defaultValue=e.defaultValue.text,t.triggerChange()})),s["\u0275\u0275text"](19," Clear styles "),s["\u0275\u0275elementEnd"]()}if(2&e){var r=s["\u0275\u0275nextContext"](),i=r.index,a=r.$implicit,o=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](3),s["\u0275\u0275propertyInterpolate1"]("name","slot_default_value_",i,""),s["\u0275\u0275property"]("ngModel",a.defaultValue.text),s["\u0275\u0275advance"](1),s["\u0275\u0275propertyInterpolate1"]("name","slot_text_anchor_",i,""),s["\u0275\u0275property"]("ngModel",o.textAnchorToAlignment(a.defaultValue.textAnchor)),s["\u0275\u0275advance"](4),s["\u0275\u0275propertyInterpolate1"]("name","slot_default_color_",i,""),s["\u0275\u0275property"]("ngModel",a.defaultValue.color),s["\u0275\u0275advance"](4),s["\u0275\u0275propertyInterpolate1"]("name","slot_default_font_size_",i,""),s["\u0275\u0275property"]("ngModel",a.defaultValue.fontSize),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("selectedFontFamily",a.defaultValue.fontFamily),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngModel",a.defaultValue.italic),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",700==a.defaultValue.fontWeight)}}function we(e,t){if(1&e&&(s["\u0275\u0275template"](0,Ce,7,2,"ng-container",9),s["\u0275\u0275template"](1,be,20,11,"ng-template",null,10,s["\u0275\u0275templateRefExtractor"])),2&e){var n=t.$implicit,r=s["\u0275\u0275reference"](2),i=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("ngIf",i.isString(n.defaultValue))("ngIfElse",r)}}function Ie(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"pre"),s["\u0275\u0275text"](1,"Cannot edit image slot default value"),s["\u0275\u0275elementEnd"]())}function Ee(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"pre"),s["\u0275\u0275text"](1,"Cannot edit background slot default value"),s["\u0275\u0275elementEnd"]())}function Me(e,t){1&e&&s["\u0275\u0275elementContainer"](0)}var Ve=function(e,t){return{$implicit:e,index:t}};function _e(e,t){if(1&e&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275template"](1,Me,1,0,"ng-container",6),s["\u0275\u0275elementContainerEnd"]()),2&e){var n=s["\u0275\u0275nextContext"](2),r=n.$implicit,i=n.index;s["\u0275\u0275nextContext"]();var a=s["\u0275\u0275reference"](1);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngTemplateOutlet",a)("ngTemplateOutletContext",s["\u0275\u0275pureFunction2"](2,Ve,r,i))}}function Oe(e,t){1&e&&s["\u0275\u0275elementContainer"](0)}function De(e,t){if(1&e&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275template"](1,Oe,1,0,"ng-container",6),s["\u0275\u0275elementContainerEnd"]()),2&e){var n=s["\u0275\u0275nextContext"](2),r=n.$implicit,i=n.index;s["\u0275\u0275nextContext"]();var a=s["\u0275\u0275reference"](5);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngTemplateOutlet",a)("ngTemplateOutletContext",s["\u0275\u0275pureFunction2"](2,Ve,r,i))}}function Fe(e,t){1&e&&s["\u0275\u0275elementContainer"](0)}function Te(e,t){if(1&e&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275template"](1,Fe,1,0,"ng-container",6),s["\u0275\u0275elementContainerEnd"]()),2&e){var n=s["\u0275\u0275nextContext"](2),r=n.$implicit,i=n.index;s["\u0275\u0275nextContext"]();var a=s["\u0275\u0275reference"](3);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngTemplateOutlet",a)("ngTemplateOutletContext",s["\u0275\u0275pureFunction2"](2,Ve,r,i))}}function je(e,t){if(1&e&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275template"](1,_e,2,5,"ng-container",18),s["\u0275\u0275template"](2,De,2,5,"ng-container",18),s["\u0275\u0275template"](3,Te,2,5,"ng-container",18),s["\u0275\u0275elementContainerEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]().$implicit,r=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",r.isTextSlot(n.fullId,n.defaultValue)),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",r.isBackgroundSlot(n.fullId,n.defaultValue)),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",r.isImageSlot(n.fullId,n.defaultValue))}}function Pe(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"mat-form-field",11),s["\u0275\u0275elementStart"](1,"mat-label"),s["\u0275\u0275text"](2,"Default Value"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"textarea",19),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"mg-button",13),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](n);var e=s["\u0275\u0275nextContext"]().$implicit,t=s["\u0275\u0275nextContext"]();return e.defaultValue="",t.triggerChange()})),s["\u0275\u0275text"](6," Clear Default Value "),s["\u0275\u0275elementEnd"]()}if(2&e){var r=s["\u0275\u0275nextContext"]().$implicit,i=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate1"]("Too large to edit (",i.getSlotDefaultValueSize(r),")")}}function Ae(e,t){if(1&e&&(s["\u0275\u0275template"](0,je,4,3,"ng-container",9),s["\u0275\u0275template"](1,Pe,7,1,"ng-template",null,17,s["\u0275\u0275templateRefExtractor"])),2&e){var n=t.$implicit,r=s["\u0275\u0275reference"](2),i=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("ngIf",i.getSlotDefaultValueSize(n)<1500)("ngIfElse",r)}}var Le=function(){return{standalone:!0}};function Be(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275elementStart"](1,"mat-form-field",23),s["\u0275\u0275elementStart"](2,"mat-label"),s["\u0275\u0275text"](3,"Line Height"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"input",24),s["\u0275\u0275listener"]("blur",(function(){s["\u0275\u0275restoreView"](n);var e=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"](3).onSlotDefaultValueBlur(e)}))("focus",(function(){s["\u0275\u0275restoreView"](n);var e=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"](3).onSlotDefaultValueFocus(e)}))("ngModelChange",(function(e){return t.ngIf.textLineHeight=e}))("ngModelChange",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](4).triggerChange()})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementContainerEnd"]()}if(2&e){var r=t.ngIf;s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngModelOptions",s["\u0275\u0275pureFunction0"](2,Le))("ngModel",r.textLineHeight)}}function Re(e,t){1&e&&s["\u0275\u0275elementContainer"](0)}function Ue(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"mat-expansion-panel"),s["\u0275\u0275elementStart"](1,"mat-expansion-panel-header"),s["\u0275\u0275elementStart"](2,"mat-panel-title"),s["\u0275\u0275text"](3),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"mat-panel-description"),s["\u0275\u0275text"](5),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"mat-form-field",11),s["\u0275\u0275elementStart"](7,"mat-label"),s["\u0275\u0275text"](8,"Input Label"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"input",22),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.$implicit.inputLabel=e}))("ngModelChange",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](3).triggerChange()})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](10,Be,5,3,"ng-container",18),s["\u0275\u0275template"](11,Re,1,0,"ng-container",6),s["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,i=t.index,a=s["\u0275\u0275nextContext"](2).slotTitlePrefix;s["\u0275\u0275nextContext"]();var o=s["\u0275\u0275reference"](7);s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"](a+"#"+(i+1)),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](r.inputLabel),s["\u0275\u0275advance"](4),s["\u0275\u0275propertyInterpolate1"]("name","slot_label_",i,""),s["\u0275\u0275propertyInterpolate"]("placeholder",a+(i+1)),s["\u0275\u0275property"]("ngModel",r.inputLabel),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",r.textOptions),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngTemplateOutlet",o)("ngTemplateOutletContext",s["\u0275\u0275pureFunction2"](8,Ve,r,i))}}function $e(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"ng-form"),s["\u0275\u0275elementStart"](1,"mat-accordion"),s["\u0275\u0275template"](2,Ue,12,11,"mat-expansion-panel",21),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngForOf",n)}}function Ne(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"p",25),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]().slotTitlePrefix;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" No ",n," Slots Available in .svg file ")}}function ze(e,t){if(1&e&&(s["\u0275\u0275template"](0,$e,3,1,"ng-form",9),s["\u0275\u0275template"](1,Ne,2,1,"ng-template",null,20,s["\u0275\u0275templateRefExtractor"])),2&e){var n=t.$implicit,r=s["\u0275\u0275reference"](2);s["\u0275\u0275property"]("ngIf",n.length>0)("ngIfElse",r)}}function He(e,t){1&e&&s["\u0275\u0275elementContainer"](0)}function Ge(e,t){1&e&&s["\u0275\u0275elementContainer"](0)}function qe(e,t){1&e&&s["\u0275\u0275elementContainer"](0)}var We=function(e){return{$implicit:e,slotTitlePrefix:"Text "}},Ye=function(e){return{$implicit:e,slotTitlePrefix:"Background "}},Qe=function(e){return{$implicit:e,slotTitlePrefix:"Image "}};function Je(e){switch(e){case"start":return"left";case"end":return"right";case"middle":return"center"}return"left"}function Ke(e){switch(e){case"left":return"start";case"right":return"end";case"center":return"middle"}return"start"}var Ze,Xe=((Ze=function(){function e(){a(this,e),this.prettyBytes=oe.a,this.textAnchorToAlignment=Je,this.alignmentToTextAnchor=Ke,this.isString=function(e){return"string"==typeof e},this.isTextSlot=pe.DesignedSvgData.isText,this.isBackgroundSlot=pe.DesignedSvgData.isBackground,this.isImageSlot=pe.DesignedSvgData.isImage,this.designedSvgMetadata={backgroundSlots:[],imageSlots:[],textSlots:[]},this.designedSvgMetadataChange=new s.EventEmitter,this.slotDefaultValueInputFocus=new s.EventEmitter,this.slotDefaultValueInputBlur=new s.EventEmitter}return l(e,[{key:"onSlotDefaultValueFocus",value:function(e){this.slotDefaultValueInputFocus.emit(e)}},{key:"onSlotDefaultValueBlur",value:function(e){this.slotDefaultValueInputBlur.emit(e)}},{key:"triggerChange",value:function(){this.designedSvgMetadataChange.emit(this.designedSvgMetadata)}},{key:"getSlotDefaultValueSize",value:function(e){if(e.defaultValue){if(pe.DesignedSvgData.isText(e.fullId,e.defaultValue))return"string"==typeof e.defaultValue?e.defaultValue.length:e.defaultValue.text.length;if(pe.DesignedSvgData.isImage(e.fullId,e.defaultValue))return e.defaultValue.length;if(pe.DesignedSvgData.isBackground(e.fullId,e.defaultValue)){if("string"==typeof e.defaultValue)return e.defaultValue.length;if("src"in e.defaultValue)return e.defaultValue.src.length}}return 0}}]),e}()).\u0275fac=function(e){return new(e||Ze)},Ze.\u0275cmp=s["\u0275\u0275defineComponent"]({type:Ze,selectors:[["mg-designed-svg-metadata-editor"]],inputs:{designedSvgMetadata:"designedSvgMetadata"},outputs:{designedSvgMetadataChange:"designedSvgMetadataChange",slotDefaultValueInputFocus:"slotDefaultValueInputFocus",slotDefaultValueInputBlur:"slotDefaultValueInputBlur"},decls:17,vars:12,consts:[["textValueInputTpl",""],["imageInputTpl",""],["backgroundInputTpl",""],["defaultValueInputTpl",""],["tabTpl",""],["label","Text"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["label","Background"],["label","Image"],[4,"ngIf","ngIfElse"],["extraTextValues",""],["mgFormField","","mgNoHintMargin",""],["matInput","","required","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","autocomplete","off",3,"name","ngModel","blur","focus","ngModelChange"],["type","outline",1,"small",3,"click"],[3,"name","ngModel","ngModelChange"],[3,"selectedFontFamily","selectedFontFamilyChange"],[3,"ngModel","ngModelChange"],["largeDefaultTpl",""],[4,"ngIf"],["matInput","","disabled","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","autocomplete","off"],["noSlots",""],[4,"ngFor","ngForOf"],["matInput","","required","","autocomplete","off",3,"name","placeholder","ngModel","ngModelChange"],["mgFormField",""],["matInput","","type","text","autocomplete","off",3,"ngModelOptions","ngModel","blur","focus","ngModelChange"],[1,"mg-centered"]],template:function(e,t){if(1&e&&(s["\u0275\u0275template"](0,we,3,2,"ng-template",null,0,s["\u0275\u0275templateRefExtractor"]),s["\u0275\u0275template"](2,Ie,2,0,"ng-template",null,1,s["\u0275\u0275templateRefExtractor"]),s["\u0275\u0275template"](4,Ee,2,0,"ng-template",null,2,s["\u0275\u0275templateRefExtractor"]),s["\u0275\u0275template"](6,Ae,3,2,"ng-template",null,3,s["\u0275\u0275templateRefExtractor"]),s["\u0275\u0275template"](8,ze,3,2,"ng-template",null,4,s["\u0275\u0275templateRefExtractor"]),s["\u0275\u0275elementStart"](10,"mat-tab-group"),s["\u0275\u0275elementStart"](11,"mat-tab",5),s["\u0275\u0275template"](12,He,1,0,"ng-container",6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"mat-tab",7),s["\u0275\u0275template"](14,Ge,1,0,"ng-container",6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"mat-tab",8),s["\u0275\u0275template"](16,qe,1,0,"ng-container",6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275reference"](9);s["\u0275\u0275advance"](12),s["\u0275\u0275property"]("ngTemplateOutlet",n)("ngTemplateOutletContext",s["\u0275\u0275pureFunction1"](6,We,t.designedSvgMetadata.textSlots)),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngTemplateOutlet",n)("ngTemplateOutletContext",s["\u0275\u0275pureFunction1"](8,Ye,t.designedSvgMetadata.backgroundSlots)),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngTemplateOutlet",n)("ngTemplateOutletContext",s["\u0275\u0275pureFunction1"](10,Qe,t.designedSvgMetadata.imageSlots))}},directives:[ve.c,ve.a,y.t,y.o,L.d,fe.a,L.h,B.b,xe.b,C.d,C.B,C.t,C.w,I.a,Se.a,ye.b,w.a,C.v,ke.a,y.n,ke.c,ke.f,ke.g,ke.e],styles:["mat-accordion[_ngcontent-%COMP%]{display:block;min-height:2048px}"],changeDetection:0}),Ze),et=o("ZTz/"),tt=o("UhP/"),nt=["svgViewer"],rt=["svgManipulator"];function it(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275elementStart"](1,"mg-overlay-nav-item",3),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().onClose()})),s["\u0275\u0275text"](2," Close "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"mg-overlay-nav-item",4),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().onSave()})),s["\u0275\u0275text"](4," Save "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){var r=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("disabled",r.saveDisabled)}}function at(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",7),s["\u0275\u0275elementStart"](1,"mg-designed-svg-viewer",8,9),s["\u0275\u0275listener"]("designedSvgMetadata",(function(e){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](2).onDesignedSvgMetadata(e)}))("manipulationsChange",(function(e){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](2).onManipulationsChanged(e)}))("designedSvgReady",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](2).onSvgReady()})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](4,"mg-designed-svg-viewer",10),s["\u0275\u0275elementEnd"]()}if(2&e){var r=s["\u0275\u0275reference"](2),i=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("manipulatorToolsEnabled",r.needsMigration?i.DesignedSvgManipulatorToolsEnabled.None:i.DesignedSvgManipulatorToolsEnabled.All)("designedSvgSrc",i.designedSvgSrc)("designedSvgData",i.designedSvgPreviewData)("designedSvgManipulations",i.manipulations_)("manipulations",i.manipulations_),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("designedSvgSrc",i.designedSvgSrc)("designedSvgData",i.designedSvgPreviewData)("designedSvgManipulations",i.manipulations_)}}function ot(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"h2",11),s["\u0275\u0275text"](1," Upload an SVG to get started "),s["\u0275\u0275elementEnd"]())}function lt(e,t){if(1&e&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275template"](1,at,5,8,"div",5),s["\u0275\u0275template"](2,ot,2,0,"ng-template",null,6,s["\u0275\u0275templateRefExtractor"]),s["\u0275\u0275elementContainerEnd"]()),2&e){var n=s["\u0275\u0275reference"](3),r=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",r.designedSvgSrc)("ngIfElse",n)}}function st(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",15),s["\u0275\u0275elementStart"](1,"p"),s["\u0275\u0275text"](2," The current template is using an old format that requires migration to enable new features. "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"mg-button",24),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](3).migrateTemplate()})),s["\u0275\u0275text"](4,"Migrate Template"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}function ct(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-option",27),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;s["\u0275\u0275property"]("value",n.themeId),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",n.title," ")}}function ut(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"mat-select",25),s["\u0275\u0275listener"]("ngModelChange",(function(e){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](3).themeId=e})),s["\u0275\u0275template"](1,ct,2,2,"mat-option",26),s["\u0275\u0275elementEnd"]()}if(2&e){var r=t.ngIf,i=s["\u0275\u0275nextContext"](3);s["\u0275\u0275property"]("ngModel",i.themeId),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",r)}}function dt(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275template"](1,st,5,0,"div",14),s["\u0275\u0275elementStart"](2,"div",15),s["\u0275\u0275elementStart"](3,"p"),s["\u0275\u0275elementStart"](4,"a",16),s["\u0275\u0275text"](5,"Download SVG file"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",15),s["\u0275\u0275elementStart"](7,"h2",17),s["\u0275\u0275text"](8,"SVG Publish Options"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"p"),s["\u0275\u0275elementStart"](10,"mat-checkbox",18),s["\u0275\u0275listener"]("ngModelChange",(function(e){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](2).archived=e}))("ngModelChange",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](2).onInputUpdated()})),s["\u0275\u0275text"](11,"Archived"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"mat-form-field",19),s["\u0275\u0275elementStart"](13,"mat-label"),s["\u0275\u0275text"](14,"Featured"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"input",20),s["\u0275\u0275listener"]("ngModelChange",(function(e){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](2).featured=e}))("ngModelChange",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](2).onInputUpdated()})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](16,"mat-hint"),s["\u0275\u0275text"](17," A higher number means it shows up higher on the list "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"p"),s["\u0275\u0275text"](19," SVG Size: "),s["\u0275\u0275elementStart"](20,"strong"),s["\u0275\u0275text"](21),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](22,"mat-form-field",19),s["\u0275\u0275elementStart"](23,"mat-label"),s["\u0275\u0275text"](24,"Theme"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](25,ut,2,2,"mat-select",21),s["\u0275\u0275pipe"](26,"async"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](27,"h2",22),s["\u0275\u0275text"](28,"SVG Slot Metadata"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](29,"mg-designed-svg-metadata-editor",23),s["\u0275\u0275listener"]("slotDefaultValueInputFocus",(function(e){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](2).onSlotDefaultValueFocus(e)}))("slotDefaultValueInputBlur",(function(e){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](2).onSlotDefaultValueBlur(e)}))("designedSvgMetadataChange",(function(e){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](2).designedSvgMetadata=e}))("designedSvgMetadataChange",(function(e){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](2).onDesignedSvgMetadataEdited(e)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementContainerEnd"]()}if(2&e){var r=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",null==r.svgViewer?null:r.svgViewer.needsMigration),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("href",r.designedSvgSrc,s["\u0275\u0275sanitizeUrl"]),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("ngModel",r.archived),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngModel",r.featured),s["\u0275\u0275advance"](6),s["\u0275\u0275textInterpolate"](r.svgSize),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngIf",s["\u0275\u0275pipeBind1"](26,7,r.themes$)),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("designedSvgMetadata",r.designedSvgMetadata)}}var gt=function(){return{standalone:!0}};function mt(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"ng-form"),s["\u0275\u0275elementStart"](1,"mg-file-input",12),s["\u0275\u0275listener"]("ngModelChange",(function(e){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().designedSvgFiles=e}))("ngModelChange",(function(e){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().onDesignedSvgFilesChanged(e)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](2,dt,30,9,"ng-container",13),s["\u0275\u0275elementEnd"]()}if(2&e){var r=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("multiple",!1)("customTitleText",r.designedSvgSrc?"Upload new SVG to replace existing":"Upload SVG here")("ngModelOptions",s["\u0275\u0275pureFunction0"](5,gt))("ngModel",r.designedSvgFiles),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",r.designedSvgSrc)}}function ht(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",28),s["\u0275\u0275element"](1,"mg-spinner",29),s["\u0275\u0275elementEnd"]())}var ft,pt,vt,xt=((ft=function(){function r(e,t,n,i,o,l,s){var c=this;a(this,r),this.fileUploadManager=e,this.mingaDesigner=t,this.rootService=n,this.router=i,this.route=o,this.mingaSnack=l,this._cdr=s,this.DesignedSvgManipulatorToolsEnabled=te.c,this._initHappened=!1,this._saving=!1,this._fromFile=!1,this._metadataEdited=!1,this._overrideSaveDisabled=!1,this._waitingForSvgFilesReady=!1,this.templateId="",this.initialTemplate=null,this.designedSvgImages=[],this.designedSvgSrc="",this.designedSvgFiles=[],this.designedSvgMetadata={backgroundSlots:[],imageSlots:[],textSlots:[]},this.designedSvgPreviewData={},this.fetchingTemplate=!1,this.archived=!1,this.featured=0,this.themeId="",this.svgSize="",this.manipulations_={},window.test=ee.c,this.route.params.pipe(Object(h.a)((function(e){return e.templateId||""})),Object(f.a)((function(e){return!!e}))).subscribe({next:function(e){return c.onTemplateIdChange(e)}}),this.route.params.subscribe((function(e){return c.templateId=e.templateId||""})),this.themes$=Object(le.a)(this.mingaDesigner.getThemes())}return l(r,[{key:"saveDisabled",get:function(){if(this._overrideSaveDisabled)return!1;if(!this.designedSvgSrc||this._saving||!this.themeId)return!0;if(this.templateId){var e=Object.keys(this.getChangedFields()).length>0;if(!this._metadataEdited&&!e)return!0}return!1}},{key:"onWindowKeydown",value:function(e){"Control"===e.key&&(this._overrideSaveDisabled=!0,this._cdr.markForCheck())}},{key:"onWindowKeyup",value:function(e){"Control"===e.key&&(this._overrideSaveDisabled=!1,this._cdr.markForCheck())}},{key:"ngAfterViewInit",value:function(){this._initHappened=!0}},{key:"onOverlayClose",value:function(){return!confirm("Are you sure you want to close? Your progress will be lost")}},{key:"modifySvgViewer",value:function(e){this._initHappened&&this.svgViewers&&this.svgViewers.forEach((function(t){t.isSvgContainerReady()&&e(t)}))}},{key:"onTemplateIdChange",value:function(e){return Object(g.a)(this,void 0,void 0,t().mark((function n(){var r;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.fetchingTemplate=!0,this._cdr.markForCheck(),t.prev=1,t.next=4,this.mingaDesigner.getTemplateById(e);case 4:if(r=t.sent,t.t0=r,!t.t0){t.next=10;break}return t.next=9,this.setupInitialValues(r);case 9:this._fromFile=!1;case 10:return t.prev=10,this.fetchingTemplate=!1,this._cdr.markForCheck(),t.finish(10);case 13:case"end":return t.stop()}}),n,this,[[1,,10,13]])})))}},{key:"setupInitialValues",value:function(e){return Object(g.a)(this,void 0,void 0,t().mark((function n(){var r,i;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.designedSvgSrc=e.templateSvgUrl,this.themeId=e.themeId,this.archived=e.archived,this.featured=e.featured,this.initialTemplate=e,t.next=3,fetch(this.designedSvgSrc);case 3:return r=t.sent,t.next=6,r.blob();case 6:i=t.sent,this.svgSize=oe()(i.size);case 8:case"end":return t.stop()}}),n,this)})))}},{key:"onDesignedSvgFilesChanged",value:function(e){var t=this;this.designedSvgMetadata={backgroundSlots:[],imageSlots:[],textSlots:[]},this.rootService.addLoadingPromise(this._onDesignedSvgFilesChanged(e)),this.svgViewer?this.rootService.addLoadingPromise(this.svgViewer.designedSvgReady.pipe(Object(se.a)(1),Object(ce.a)(15e3)).toPromise().catch((function(e){return console.error(e)})).then((function(){return t.onAfterSvgFilesLoaded()}))):this._waitingForSvgFilesReady=!0}},{key:"_onDesignedSvgFilesChanged",value:function(e){return Object(g.a)(this,void 0,void 0,t().mark((function n(){var r;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(e){return setTimeout(e,100)}));case 2:if(this.designedSvgSrc="",!(e.length>0)){t.next=12;break}return this._fromFile=!0,this._metadataEdited=!0,t.next=7,function(e){return new Promise((function(t,n){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return t(r.result)},r.onerror=function(e){return n(e)}}))}(e[0]);case 7:return r=t.sent,this.designedSvgSrc=r,this._cdr.markForCheck(),t.next=12,new Promise((function(e){return setTimeout(e,100)}));case 12:case"end":return t.stop()}}),n,this)})))}},{key:"onAfterSvgFilesLoaded",value:function(){return Object(g.a)(this,void 0,void 0,t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.svgViewer.getSvgElementReference(),this.svgViewer.removeExcessiveSlotScale(),n.dataset.mingaSvg="v2",this.modifySvgViewer((function(e){e.normalizeSlotStyles(),e.setDefaultSlotValuesFromMarkup()})),this.svgViewer&&(this.designedSvgMetadata=this.svgViewer.getSlotMetadata(),this.useDefaultPreviewData()),this._cdr.markForCheck();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"onSvgReady",value:function(){var e=this;setTimeout((function(){var t;e._fromFile&&(null===(t=e.svgViewer)||void 0===t?void 0:t.needsMigration)&&e.migrateTemplate(),e.modifySvgViewer((function(e){return e.forceManipulationsUpdate()})),e._waitingForSvgFilesReady&&(e._waitingForSvgFilesReady=!1,e.onAfterSvgFilesLoaded())}),0)}},{key:"migrateTemplate",value:function(){this.modifySvgViewer((function(e){e.migrateTemplate()})),this._metadataEdited=!0,this._cdr.markForCheck()}},{key:"useDefaultPreviewData",value:function(){var t,r=n([].concat(e(this.designedSvgMetadata.backgroundSlots),e(this.designedSvgMetadata.imageSlots),e(this.designedSvgMetadata.textSlots)));try{for(r.s();!(t=r.n()).done;){var i=t.value;this.designedSvgPreviewData[i.fullId]=i.defaultValue}}catch(a){r.e(a)}finally{r.f()}this.designedSvgPreviewData=Object.assign({},this.designedSvgPreviewData)}},{key:"onDesignedSvgMetadata",value:function(e){var t=this;this.designedSvgMetadata=e,this.designedSvgImages=[],this.modifySvgViewer((function(r){for(var i,a=r.getSvgElementReference(),o=a.outerHTML.length,l=a.querySelectorAll("image"),s=0;l.length>s;++s){var c=l.item(s);t.designedSvgImages.push(c);var u=c.getAttribute("href")||c.getAttribute("xlink:href");u&&u.startsWith("data:")&&(o-=u.length)}t.svgSize=oe()(o);var d=r.computeTextSlotLineHeights();for(var g in d){var m,h=n(e.textSlots);try{for(h.s();!(m=h.n()).done;){var f=m.value;if(g===f.fullId&&!(null===(i=f.textOptions)||void 0===i?void 0:i.textLineHeight)){var p=d[g],v=a.getElementById(g);v&&p&&(v.dataset.mingaLineHeight="".concat(p),f.textOptions&&(f.textOptions.textLineHeight=p))}}}catch(x){h.e(x)}finally{h.f()}}})),this._cdr.markForCheck()}},{key:"onDesignedSvgMetadataEdited",value:function(e){this._metadataEdited=!0;var t=[].concat(e.backgroundSlots,e.imageSlots,e.textSlots),r=this.designedSvgPreviewData.additionalSlots;this.designedSvgPreviewData={},r&&(this.designedSvgPreviewData.additionalSlots=r);var i,a=n(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.designedSvgPreviewData[o.fullId]=o.defaultValue}}catch(l){a.e(l)}finally{a.f()}this.modifySvgViewer((function(t){t.applyNewMetadata(e)})),this._cdr.markForCheck()}},{key:"registerOnOverlayConfig",value:function(e){e({wide:!0,containWithinViewport:!0})}},{key:"onClose",value:function(){Object(m.a)(this.router)}},{key:"onSlotDefaultValueFocus",value:function(e){this.modifySvgViewer((function(t){t.highlightSlot(e.fullId)}))}},{key:"onSlotDefaultValueBlur",value:function(e){this.modifySvgViewer((function(t){t.clearHighlight(e.fullId)}))}},{key:"onInputUpdated",value:function(){this._cdr.markForCheck()}},{key:"onManipulationsChanged",value:function(e){this.manipulations_=Object.assign({},e),this._cdr.markForCheck()}},{key:"_onSave",value:function(){return Object(g.a)(this,void 0,void 0,t().mark((function e(){var r,i,a,o,l,s,c,u,d,m=this;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r="",this.modifySvgViewer((function(e){e.clearAllHighlights()})),i=[],a=function(e,n){return Object(g.a)(m,void 0,void 0,t().mark((function r(){var i,a,o,l,s,c;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(i=new ie.ProcessAssetRequest).setAssetId(n),i.setName("svg-template"),i.setQuality(80),a=Object(ee.c)(e.ownerSVGElement).rbox(),o=Object(ee.c)(e).rbox(),l=Math.min(o.width,a.width),i.setWidth(Math.round(l/a.width*1420)),t.next=6,this.fileUploadManager.processAsset(i).toPromise();case 6:s=t.sent.getPath(),c=Object(re.b)(s),e.removeAttribute("href"),e.removeAttribute("xlink:href"),e.setAttribute("href",c);case 9:case"end":return t.stop()}}),r,this)})))},o=n(this.designedSvgImages),e.prev=5,s=t().mark((function e(){var n,r,o,s,c,u,d;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.value,!(r=n.getAttribute("href")||n.getAttribute("xlink:href"))||!r.startsWith("data:")){e.next=25;break}return o="",e.next=6,fetch(r);case 6:return s=e.sent,e.next=9,s.blob();case 9:return c=e.sent,e.next=12,m.fileUploadManager.uploadFile(c,s.type,"template-image").pipe(Object(ue.a)((function(e){return o=e.assetId||o}))).toPromise();case 12:if(u=e.sent,o){e.next=24;break}d="",e.t0=u.errorCode,e.next=e.t0===ie.ResponseCode.ASSET_INVALID_SIZE?18:e.t0===ie.ResponseCode.ASSET_INVALID_TYPE?20:22;break;case 18:return d="Failed to upload embeded image. File is too large (".concat(oe()(c.size),")"),e.abrupt("break",23);case 20:return d="Failed to upload embeded image. Image is invalid type (".concat(s.type,")"),e.abrupt("break",23);case 22:d="Failed to upload embeded image. Status ".concat(u.errorCode);case 23:return e.abrupt("return",{v:(m.mingaSnack.open(d,"OK",{panelClass:"mg-snackbar-alert"}),!1)});case 24:i.push(a(n,o));case 25:case"end":return e.stop()}}),e)})),o.s();case 8:if((l=o.n()).done){e.next=15;break}return e.delegateYield(s(),"t0",10);case 10:if("object"!=typeof(c=e.t0)){e.next=13;break}return e.abrupt("return",c.v);case 13:e.next=8;break;case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(5),o.e(e.t1);case 20:return e.prev=20,o.f(),e.finish(20);case 23:return e.next=25,Promise.all(i);case 25:if(this.templateId&&!this._metadataEdited&&!this._overrideSaveDisabled){e.next=31;break}return e.next=28,this.createSvgBlob();case 28:return u=e.sent,e.next=31,this.fileUploadManager.uploadFile(u,"image/svg+xml","template.svg").pipe(Object(ue.a)((function(e){return r=e.assetId||r}))).toPromise();case 31:if(!this.templateId){e.next=38;break}return d=this.getChangedFields(),r&&(d.templateSvgUrl=r),e.next=36,this.mingaDesigner.updateTemplate(this.templateId,Object.assign({},d));case 36:e.next=41;break;case 38:return e.next=40,this.mingaDesigner.createTemplate({templateSvgUrl:r,themeId:this.themeId,archived:this.archived,featured:this.featured});case 40:this.templateId=e.sent;case 41:return e.abrupt("return",!0);case 42:case"end":return e.stop()}}),e,this,[[5,17,20,23]])})))}},{key:"getChangedFields",value:function(){var e,t,n,r={};return this.themeId!==(null===(e=this.initialTemplate)||void 0===e?void 0:e.themeId)&&(r.themeId=this.themeId),this.archived!==(null===(t=this.initialTemplate)||void 0===t?void 0:t.archived)&&(r.archived=this.archived),this.featured!==(null===(n=this.initialTemplate)||void 0===n?void 0:n.featured)&&(r.featured=this.featured),r}},{key:"createSvgBlob",value:function(){return Object(g.a)(this,void 0,void 0,t().mark((function r(){var i,a,o,l,s,c,u,d,g,m,h,f,p;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.svgViewer){t.next=2;break}throw new Error("Cannot create svg blob without svgViewer");case 2:(i=this.svgViewer.getSvgElementReference().cloneNode(!0)).removeAttribute("xmlns:svgjs"),(a=i.querySelector("style#svg-defaults"))||((a=document.createElementNS("http://www.w3.org/2000/svg","style")).id="svg-defaults",(o=i.querySelector("defs"))||(o=document.createElementNS("http://www.w3.org/2000/svg","defs"),i.insertBefore(o,i.firstElementChild)),o.firstElementChild?o.insertBefore(a,o.firstElementChild):o.appendChild(a)),l="",s=n(this.designedSvgMetadata.textSlots);try{for(s.s();!(c=s.n()).done;)"string"!=typeof(u=c.value).defaultValue&&"fontFamily"in(d=u.defaultValue)&&d.fontFamily&&(l=d.fontFamily)}catch(r){s.e(r)}finally{s.f()}l&&(a.innerHTML="text{font-family:'".concat(l,"',sans-serif}}tspan{font-family:inherit}")),g=[].concat(e(this.designedSvgMetadata.backgroundSlots),e(this.designedSvgMetadata.imageSlots),e(this.designedSvgMetadata.textSlots)),m=n(g);try{for(m.s();!(h=m.n()).done;)f=h.value,(p=i.getElementById(f.fullId))&&(p.dataset.mingaInputLabel=f.inputLabel)}catch(r){m.e(r)}finally{m.f()}return t.abrupt("return",(i.querySelectorAll(".minga-svg-manipulator-tool").forEach((function(e){return e.remove()})),new Blob([i.outerHTML],{type:"image/svg+xml"})));case 14:case"end":return t.stop()}}),r,this)})))}},{key:"onSave",value:function(){return Object(g.a)(this,void 0,void 0,t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._saving){e.next=13;break}return e.prev=1,this._saving=!0,this._cdr.markForCheck(),e.next=6,this.rootService.addLoadingPromise(this._onSave());case 6:if(e.t0=e.sent,!e.t0){e.next=10;break}return e.next=10,Object(m.a)(this.router);case 10:return e.prev=10,this._saving=!1,this._cdr.markForCheck(),e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[1,,10,13]])})))}}]),r}()).\u0275fac=function(e){return new(e||ft)(s["\u0275\u0275directiveInject"](p.d),s["\u0275\u0275directiveInject"](d.MingaDesignerService),s["\u0275\u0275directiveInject"](v.a),s["\u0275\u0275directiveInject"](c.g),s["\u0275\u0275directiveInject"](c.a),s["\u0275\u0275directiveInject"](x.b),s["\u0275\u0275directiveInject"](s.ChangeDetectorRef))},ft.\u0275cmp=s["\u0275\u0275defineComponent"]({type:ft,selectors:[["ng-component"]],viewQuery:function(e,t){var n;1&e&&(s["\u0275\u0275viewQuery"](nt,1),s["\u0275\u0275viewQuery"](rt,1,te.a),s["\u0275\u0275viewQuery"](ne.a,1)),2&e&&(s["\u0275\u0275queryRefresh"](n=s["\u0275\u0275loadQuery"]())&&(t.svgViewer=n.first),s["\u0275\u0275queryRefresh"](n=s["\u0275\u0275loadQuery"]())&&(t.svgManipulator=n.first),s["\u0275\u0275queryRefresh"](n=s["\u0275\u0275loadQuery"]())&&(t.svgViewers=n))},hostBindings:function(e,t){1&e&&s["\u0275\u0275listener"]("keydown",(function(e){return t.onWindowKeydown(e)}),!1,s["\u0275\u0275resolveWindow"])("keyup",(function(e){return t.onWindowKeyup(e)}),!1,s["\u0275\u0275resolveWindow"])},decls:5,vars:6,consts:[[4,"mgOverlayStructure","mgOverlayStructureRegion"],[4,"ngIf","ngIfElse"],["fetchingTemplateTpl",""],["icon","close",1,"mg-align-left",3,"click"],["icon","save-o",1,"mg-align-right",3,"disabled","click"],["class","preview-section",4,"ngIf","ngIfElse"],["noSvgSelected",""],[1,"preview-section"],["mgDesignedSvgManipulator","",3,"manipulatorToolsEnabled","designedSvgSrc","designedSvgData","designedSvgManipulations","manipulations","designedSvgMetadata","manipulationsChange","designedSvgReady"],["svgViewer","","svgManipulator","mgDesignedSvgManipulator"],[1,"small-viewer",3,"designedSvgSrc","designedSvgData","designedSvgManipulations"],["mgOverlayHide.split-content-small","",1,"mg-headline2","abs-center-text"],["fileDetailText","","accept","image/svg+xml",3,"multiple","customTitleText","ngModelOptions","ngModel","ngModelChange"],[4,"ngIf"],["class","padded",4,"ngIf"],[1,"padded"],[3,"href"],[1,"mg-headline2"],["name","archived",3,"ngModel","ngModelChange"],["mgFormField",""],["matInput","","type","number","min","0","name","featured",3,"ngModel","ngModelChange"],["required","","name","theme",3,"ngModel","ngModelChange",4,"ngIf"],[1,"mg-headline2","padded"],[3,"designedSvgMetadata","slotDefaultValueInputFocus","slotDefaultValueInputBlur","designedSvgMetadataChange"],[3,"click"],["required","","name","theme",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mg-centered"],["diameter","25","thickness","4"]],template:function(e,t){if(1&e&&(s["\u0275\u0275template"](0,it,5,1,"div",0),s["\u0275\u0275template"](1,lt,4,2,"ng-container",0),s["\u0275\u0275template"](2,mt,3,6,"ng-form",1),s["\u0275\u0275template"](3,ht,2,0,"ng-template",null,2,s["\u0275\u0275templateRefExtractor"])),2&e){var n=s["\u0275\u0275reference"](4);s["\u0275\u0275property"]("mgOverlayStructure",!0)("mgOverlayStructureRegion","top"),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("mgOverlayStructure",!0)("mgOverlayStructureRegion","split-content"),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!t.fetchingTemplate)("ngIfElse",n)}},directives:[S.a,y.o,k.a,de.a,ge.a,me.a,C.v,he.a,C.t,C.w,w.a,L.d,fe.a,L.h,B.b,C.y,C.d,L.g,Xe,I.a,et.a,C.B,y.n,tt.m,M.a],pipes:[y.b],styles:["[_nghost-%COMP%]{min-height:200px;display:block}mg-designed-svg-viewer[_ngcontent-%COMP%]{display:block;border-radius:6px;overflow:hidden;margin:16px;box-shadow:0 6px 16px rgba(0,0,0,.3);max-width:70%}mg-designed-svg-viewer.small-viewer[_ngcontent-%COMP%]{max-width:187px}.padded[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px}.preview-section[_ngcontent-%COMP%]{overflow:hidden;text-align:center;max-height:100vh;height:100%;position:-webkit-sticky;position:sticky;top:0}.abs-center-text[_ngcontent-%COMP%]{position:absolute;text-align:center;transform:translateY(-50%);top:50%;left:0;right:0}mg-icon.done-icon[_ngcontent-%COMP%]{color:#036}mg-icon.err-icon[_ngcontent-%COMP%]{color:#de1717}.font-status[_ngcontent-%COMP%]{--mg-icon-size:16px}.font-families[_ngcontent-%COMP%]{margin:8px 0}"],changeDetection:0}),ft),St=o("9F0b"),yt=o("YjH6"),kt=o("Qne4"),Ct=o("hpfr"),bt=((vt=l((function e(){a(this,e)}))).\u0275fac=function(e){return new(e||vt)},vt.\u0275mod=s["\u0275\u0275defineNgModule"]({type:vt}),vt.\u0275inj=s["\u0275\u0275defineInjector"]({imports:[[N.a,kt.a,R.a,ke.b,w.b,Ct.b,y.c,C.m,L.f,B.c,ve.g]]}),vt),wt=((pt=l((function e(){a(this,e)}))).\u0275fac=function(e){return new(e||pt)},pt.\u0275mod=s["\u0275\u0275defineNgModule"]({type:pt}),pt.\u0275inj=s["\u0275\u0275defineInjector"]({imports:[[H.a,$.a,yt.b,bt,ne.b,St.c,N.a,z.a,G.a,R.a,A.a,te.b,y.c,C.m,et.b,L.f,B.c,w.b]]}),pt);function It(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"span"),s["\u0275\u0275text"](1,"Update Theme"),s["\u0275\u0275elementEnd"]())}function Et(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"span"),s["\u0275\u0275text"](1,"Create New Theme"),s["\u0275\u0275elementEnd"]())}function Mt(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275elementStart"](1,"mg-overlay-nav-item",6),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().onClose()})),s["\u0275\u0275text"](2," Close "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"mg-overlay-nav-item",7),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().onSave()})),s["\u0275\u0275template"](4,It,2,0,"span",8),s["\u0275\u0275template"](5,Et,2,0,"ng-template",null,9,s["\u0275\u0275templateRefExtractor"]),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){var r=s["\u0275\u0275reference"](6),i=s["\u0275\u0275nextContext"](),a=s["\u0275\u0275reference"](2);s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("disabled",a.invalid||i.saveDisabled),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",i.themeId)("ngIfElse",r)}}var Vt,_t,Ot,Dt=((Vt=function(){function e(t,n,r,i,o,l){var s=this;a(this,e),this.router=t,this.rootService=n,this.mingaDesigner=r,this.mingaSnack=i,this._cdr=o,this._saving=!1,this.imageAsset="",this.themeTitle="",this.themeDescription="",this.themeId="",l.params.subscribe((function(e){s.themeId=e.themeId||"",s.themeId&&s.fetchThemeFields()}))}return l(e,[{key:"hasChangedFields",get:function(){return!this._fetchedFields||this.imageAsset!=this._fetchedFields.featuredImageUrl||this.themeDescription!=this._fetchedFields.description||this.themeTitle}},{key:"saveDisabled",get:function(){return this._saving||!this.hasChangedFields}},{key:"_onSave",value:function(){var e,n,r;return Object(g.a)(this,void 0,void 0,t().mark((function i(){var a,o;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.themeId){t.next=13;break}if(a={},this.imageAsset!=(null===(e=this._fetchedFields)||void 0===e?void 0:e.featuredImageUrl)&&(a.featuredImageUrl=this.imageAsset),this.themeDescription!=(null===(n=this._fetchedFields)||void 0===n?void 0:n.description)&&(a.description=this.themeDescription),this.themeTitle!=(null===(r=this._fetchedFields)||void 0===r?void 0:r.title)&&(a.title=this.themeTitle),0!=Object.keys(a).length){t.next=9;break}this.mingaSnack.open("Nothing to update"),t.next=11;break;case 9:return t.next=11,this.mingaDesigner.updateTheme(this.themeId,a);case 11:t.next=19;break;case 13:return o={featuredImageUrl:this.imageAsset,title:this.themeTitle,description:this.themeDescription},t.next=16,this.mingaDesigner.createTheme(o);case 16:return this.themeId=t.sent,t.next=19,this.router.navigate(["edit",this.themeId],{replaceUrl:!0,skipLocationChange:!0});case 19:return this._cdr.markForCheck(),t.next=22,new Promise((function(e){return setTimeout(e,100)}));case 22:return t.next=24,Object(m.a)(this.router);case 24:case"end":return t.stop()}}),i,this)})))}},{key:"onSave",value:function(){return Object(g.a)(this,void 0,void 0,t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this._saving=!0,this._cdr.markForCheck(),e.next=5,this.rootService.addLoadingPromise(this._onSave());case 5:return e.prev=5,this._saving=!1,e.finish(5);case 8:case"end":return e.stop()}}),e,this,[[0,,5,8]])})))}},{key:"onClose",value:function(){Object(m.a)(this.router)}},{key:"fetchThemeFields",value:function(){return Object(g.a)(this,void 0,void 0,t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.rootService.addLoadingPromise(this._fetchThemeFields());case 3:e.next=11;break;case 5:return e.prev=5,e.t0=e.catch(0),console.error(e.t0),this.mingaSnack.open("Unable to load theme at this time. Please try again later"),e.next=11,Object(m.a)(this.router);case 11:case"end":return e.stop()}}),e,this,[[0,5]])})))}},{key:"_fetchThemeFields",value:function(){return Object(g.a)(this,void 0,void 0,t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.mingaDesigner.getThemeById(this.themeId);case 2:n=e.sent,this._fetchedFields=n,this.imageAsset=n.featuredImageUrl,this.themeTitle=n.title,this.themeDescription=n.description,this._cdr.markForCheck();case 4:case"end":return e.stop()}}),e,this)})))}}]),e}()).\u0275fac=function(e){return new(e||Vt)(s["\u0275\u0275directiveInject"](c.g),s["\u0275\u0275directiveInject"](v.a),s["\u0275\u0275directiveInject"](d.MingaDesignerService),s["\u0275\u0275directiveInject"](x.b),s["\u0275\u0275directiveInject"](s.ChangeDetectorRef),s["\u0275\u0275directiveInject"](c.a))},Vt.\u0275cmp=s["\u0275\u0275defineComponent"]({type:Vt,selectors:[["ng-component"]],decls:12,vars:8,consts:[[4,"mgOverlayStructure","mgOverlayStructureRegion"],["form",""],["required","","name","imageAsset","previewAspectRatio","16:9",3,"previewSize","ngModel","ngModelChange"],["mgFormField","",3,"mgNoHintMargin"],["matInput","","required","","name","themeTitle",3,"ngModel","ngModelChange"],["matInput","","name","themeDesc","maxlength","60",3,"ngModel","ngModelChange"],["icon","close",1,"mg-align-left",3,"click"],["icon","save-o",1,"mg-align-right",3,"disabled","click"],[4,"ngIf","ngIfElse"],["noThemeId",""]],template:function(e,t){1&e&&(s["\u0275\u0275template"](0,Mt,7,3,"div",0),s["\u0275\u0275elementStart"](1,"form",null,1),s["\u0275\u0275elementStart"](3,"mg-file-input-upload",2),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.imageAsset=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"mat-form-field",3),s["\u0275\u0275elementStart"](5,"mat-label"),s["\u0275\u0275text"](6,"Theme Title"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"input",4),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.themeTitle=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"mat-form-field",3),s["\u0275\u0275elementStart"](9,"mat-label"),s["\u0275\u0275text"](10,"Theme Description"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"textarea",5),s["\u0275\u0275listener"]("ngModelChange",(function(e){return t.themeDescription=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275property"]("mgOverlayStructure",!0)("mgOverlayStructureRegion","top"),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("previewSize",700)("ngModel",t.imageAsset),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("mgNoHintMargin",!0),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngModel",t.themeTitle),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("mgNoHintMargin",!0),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngModel",t.themeDescription))},directives:[S.a,C.E,C.u,C.v,b.a,C.B,C.t,C.w,L.d,fe.a,L.h,B.b,C.d,C.n,k.a,y.o],styles:["form[_ngcontent-%COMP%]{display:block;padding:16px}mat-form-field[_ngcontent-%COMP%]{margin:16px 0}"],changeDetection:0}),Vt),Ft=o("62tx"),Tt=((_t=l((function e(){a(this,e)}))).\u0275fac=function(e){return new(e||_t)},_t.\u0275mod=s["\u0275\u0275defineNgModule"]({type:_t}),_t.\u0275inj=s["\u0275\u0275defineInjector"]({imports:[[H.a,Ft.a,U.a,N.a,C.m,c.k,y.c,B.c,L.f,A.a]]}),_t),jt=[{path:"template/create",component:xt},{path:"template/edit/:templateId",component:xt},{path:"stock-photo/create",component:P},{path:"stock-photo/edit/:photoId",component:P},{path:"stock-sticker/create",component:X},{path:"stock-sticker/edit/:stickerId",component:X},{path:"theme/create",component:Dt},{path:"theme/edit/:themeId",component:Dt}],Pt=((Ot=l((function e(){a(this,e)}))).\u0275fac=function(e){return new(e||Ot)},Ot.\u0275mod=s["\u0275\u0275defineNgModule"]({type:Ot}),Ot.\u0275inj=s["\u0275\u0275defineInjector"]({providers:[{provide:d.MingaDesignerService,useExisting:u.a}],imports:[[Tt,wt,q,c.k.forChild(jt)]]}),Ot)},qftF:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("8Y7J"),i=n("s7LF"),o=n("Tj54"),s=["pillCheckmark"],c=["*"],u={provide:i.r,useExisting:Object(r.forwardRef)((function(){return d})),multi:!0},d=function(){var e=function(){function e(){a(this,e),this.tabindex="0",this.icon="check",this.disabled=!1,this._value=!1}return l(e,[{key:"hasIcon",get:function(){return!!this.icon}},{key:"checked",get:function(){return this._value}},{key:"unchecked",get:function(){return!this._value}},{key:"onClick",value:function(e){this.disabled||(this._value=!this._value,this._onChange&&this._onChange(this._value))}},{key:"onKeypress",value:function(e){this.disabled||"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this._value=!this._value,this._onChange&&this._onChange(this._value))}},{key:"writeValue",value:function(e){this._value=!!e}},{key:"registerOnChange",value:function(e){this._onChange=e}},{key:"registerOnTouched",value:function(e){this._onTouched=e}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-pill-checkbox"]],viewQuery:function(e,t){var n;(1&e&&r["\u0275\u0275viewQuery"](s,3),2&e)&&(r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.pillCheckmark=n.first))},hostVars:9,hostBindings:function(e,t){1&e&&r["\u0275\u0275listener"]("click",(function(e){return t.onClick(e)}))("keypress",(function(e){return t.onKeypress(e)})),2&e&&(r["\u0275\u0275attribute"]("tabindex",t.tabindex),r["\u0275\u0275classProp"]("mg-pill-checkmark-disabled",t.disabled)("mg-pill-checkmark-has-icon",t.hasIcon)("mg-pill-checkmark-checked",t.checked)("mg-pill-checkmark-unchecked",t.unchecked))},inputs:{icon:"icon",disabled:"disabled"},features:[r["\u0275\u0275ProvidersFeature"]([u])],ngContentSelectors:c,decls:7,vars:1,consts:[[1,"mg-pill-checkbox"],[1,"mg-pill-checkbox-content"],[1,"mg-pill-checkbox-checkmark"],["pillCheckmark",""]],template:function(e,t){1&e&&(r["\u0275\u0275projectionDef"](),r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275projection"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"div",2,3),r["\u0275\u0275elementStart"](5,"mat-icon"),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](6),r["\u0275\u0275textInterpolate"](t.icon))},directives:[o.a],styles:[".mg-pill-checkbox[_ngcontent-%COMP%]{min-height:1em;min-width:1em;overflow:hidden;border-width:1px;border-style:solid;position:relative;padding:var(--mg-pillcheckbox-padding,.35em .7em);border-radius:1.35em;transition:background-color .3s ease;margin:var(--mg-pillcheckbox-margin,0);font-size:var(--mg-pillcheckbox-font-size,16px)}.mg-pill-checkbox[_ngcontent-%COMP%]   .mg-pill-checkbox-content[_ngcontent-%COMP%]{padding-right:0;transition:padding-right .3s ease}.mg-pill-checkbox[_ngcontent-%COMP%]   .mg-pill-checkbox-checkmark[_ngcontent-%COMP%]{position:absolute;right:0;top:0;bottom:0;transform:translateX(100%);opacity:0;transition:transform .3s ease,opacity .3s ease}.mg-pill-checkbox[_ngcontent-%COMP%]   .mg-pill-checkbox-checkmark[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:0 .35em;position:relative;top:50%;transform:translateY(-50%);color:currentColor;width:1em;height:1em;line-height:1em;font-size:1em}[_nghost-%COMP%]{display:inline-block;cursor:pointer;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]:focus{outline:none}.mg-pill-checkmark-checked.mg-pill-checkmark-has-icon[_nghost-%COMP%]   .mg-pill-checkbox[_ngcontent-%COMP%]   .mg-pill-checkbox-checkmark[_ngcontent-%COMP%]{transform:translateX(0);opacity:1}.mg-pill-checkmark-checked.mg-pill-checkmark-has-icon[_nghost-%COMP%]   .mg-pill-checkbox[_ngcontent-%COMP%]   .mg-pill-checkbox-content[_ngcontent-%COMP%]{padding-right:1em}.mg-pill-checkmark-disabled[_nghost-%COMP%]{pointer-events:none}.small[_nghost-%COMP%]{font-size:10px}.small[_nghost-%COMP%]   .mg-pill-checkbox[_ngcontent-%COMP%]{padding-top:.05em;padding-bottom:.05em}.large[_nghost-%COMP%]   .mg-pill-checkbox[_ngcontent-%COMP%]{padding-top:.7em;padding-bottom:.7em}.bold[_nghost-%COMP%]   .mg-pill-checkbox[_ngcontent-%COMP%]{font-weight:700;border-width:2px}"]}),e}()}}])}();
//# sourceMappingURL=minga-app-src-app-routes-sadmin-MingaDesignerOverlayRoutes-module-es5.js.map
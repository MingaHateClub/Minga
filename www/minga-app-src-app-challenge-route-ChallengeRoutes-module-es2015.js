(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{LTfw:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n("Nxoj");var i=n("SVse"),o=n("8Y7J"),a=n("u9T3"),l=n("zkd0"),r=n("ls3q"),s=n("E4Uz");let c=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[r.a,l.a,a.a,i.c,s.b]]}),e})()},Nxoj:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var i=n("8Y7J"),o=n("SVse"),a=n("VDRc"),l=n("E4Uz"),r=n("Fudl");function s(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",3),i["\u0275\u0275elementStart"](1,"div",4),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const n=t.$implicit;return i["\u0275\u0275nextContext"](2).selectColor(n)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275styleProp"]("background-color",e),i["\u0275\u0275classProp"]("color-option-selected",!n.customColorSelected_&&e==n.color)}}function c(e,t){1&e&&i["\u0275\u0275template"](0,s,2,4,"div",2),2&e&&i["\u0275\u0275property"]("ngForOf",t.$implicit)}function d(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}const g=function(){return[]};function p(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",5),i["\u0275\u0275elementStart"](1,"div",3),i["\u0275\u0275elementStart"](2,"div",6),i["\u0275\u0275listener"]("colorPickerChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().selectColor(t)})),i["\u0275\u0275elementStart"](3,"mg-icon"),i["\u0275\u0275text"](4,"color-picker"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](5,d,1,0,"ng-container",7),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](),t=i["\u0275\u0275reference"](1);i["\u0275\u0275advance"](2),i["\u0275\u0275classProp"]("color-option-selected",e.customColorSelected_),i["\u0275\u0275property"]("colorPicker",e.color)("cpPresetColors",i["\u0275\u0275pureFunction0"](9,g))("cpCloseClickOutside",!1)("cpOKButton",!0)("cpOKButtonText","Close"),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngTemplateOutlet",t)("ngTemplateOutletContext",e.presetsRow1)}}function m(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function h(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",5),i["\u0275\u0275template"](1,m,1,0,"ng-container",7),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](),t=i["\u0275\u0275reference"](1);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",t)("ngTemplateOutletContext",e.presetsRow2)}}function u(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function f(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",5),i["\u0275\u0275template"](1,u,1,0,"ng-container",7),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](),t=i["\u0275\u0275reference"](1);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",t)("ngTemplateOutletContext",e.presetsRow3)}}function C(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function v(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",5),i["\u0275\u0275template"](1,C,1,0,"ng-container",7),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](),t=i["\u0275\u0275reference"](1);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",t)("ngTemplateOutletContext",e.customColorList)}}let x=(()=>{class e{constructor(){this.customColorSelected_=!1,this.presetsRow1={$implicit:["#e3752b","#fdcb69","#41a96d","#2999ab","#22b7ec"]},this.presetsRow2={$implicit:["#31318d","#635ca7","#c75fa4","#efdc12","#ab3283","#f56365"]},this.presetsRow3={$implicit:["#ffffff","#d6d6d6","#b2b2b2","#898989","#414141","#000000"]},this.color="",this.customColorList=null,this.colorChange=new i.EventEmitter}selectColor(e){this.color=e,this.colorChange.emit(this.color),this.customColorSelected_=!(this.presetsRow1.$implicit.includes(e)||this.presetsRow2.$implicit.includes(e)||this.presetsRow3.$implicit.includes(e)||this.customColorList)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-color-select"]],inputs:{color:"color",customColorList:"customColorList"},outputs:{colorChange:"colorChange"},decls:6,vars:4,consts:[["presetColorsTpl",""],["class","color-options-row","fxLayout","row","fxLayoutGap","12px",4,"ngIf"],["fxFlex","auto",4,"ngFor","ngForOf"],["fxFlex","auto"],[1,"color-option",3,"click"],["fxLayout","row","fxLayoutGap","12px",1,"color-options-row"],["cpOutputFormat","hex",1,"color-option",3,"colorPicker","cpPresetColors","cpCloseClickOutside","cpOKButton","cpOKButtonText","colorPickerChange"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,c,1,1,"ng-template",null,0,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](2,p,6,10,"div",1),i["\u0275\u0275template"](3,h,2,2,"div",1),i["\u0275\u0275template"](4,f,2,2,"div",1),i["\u0275\u0275template"](5,v,2,2,"div",1)),2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!t.customColorList),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.customColorList),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.customColorList),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.customColorList))},directives:[o.o,o.n,a.b,a.e,a.f,l.a,r.a,o.t],styles:[".color-options-row[_ngcontent-%COMP%]{margin:12px}.color-option[_ngcontent-%COMP%]{padding-top:100%;position:relative;cursor:pointer;text-align:center;border-radius:3px;box-shadow:0 2px 6px rgba(0,0,0,.3);transform:scale(1);transition:transform .1s ease;border:2px solid transparent}.color-option.color-option-selected[_ngcontent-%COMP%]{transform:scale(1.1);border-color:#036}.color-option[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}"],changeDetection:0}),e})()},V5YL:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n("eQq5");var i=n("SVse"),o=n("8Y7J"),a=n("u9T3");let l=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[i.c,a.a]]}),e})()},eQq5:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s}));var i=n("8Y7J");const o=["*"],a=[[["mg-tab-group-header-item"]]],l=["mg-tab-group-header-item"];let r=(()=>{class e{constructor(){this.active=!1,this.activeChange=new i.EventEmitter}onClick(e){this.active=!0,this.activeChange.emit(this.active)}selectTab(){this.active=!0,this.activeChange.emit(this.active)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-tab-group-header-item"]],hostVars:2,hostBindings:function(e,t){1&e&&i["\u0275\u0275listener"]("click",(function(e){return t.onClick(e)})),2&e&&i["\u0275\u0275classProp"]("mg-tab-group-header-item-active",t.active)},outputs:{activeChange:"activeChange"},ngContentSelectors:o,decls:1,vars:0,template:function(e,t){1&e&&(i["\u0275\u0275projectionDef"](),i["\u0275\u0275projection"](0))},encapsulation:2}),e})(),s=(()=>{class e{constructor(){this._headerItemSubscriptions=[],this._activeTab=null,this.activeTabChange=new i.EventEmitter}set activeTab(e){this._activeTab=e||null,e&&this.setActiveTabGroupHeaderItem(e,!0)}get activeTab(){return this._activeTab}ngAfterContentInit(){this.tabGroupHeaderItems.changes.subscribe(e=>{this.onHeaderItemsChange()}),this.headerItemsCheck()}ngOnDestroy(){this._headerItemSubscriptions.forEach(e=>e.unsubscribe())}onHeaderItemsChange(){this.headerItemsCheck()}headerItemsCheck(){this._headerItemSubscriptions.forEach(e=>e.unsubscribe()),this._headerItemSubscriptions=[],this.tabGroupHeaderItems.forEach((e,t)=>{const n=e.activeChange.subscribe(()=>{this.onTabActiveChange(e)});this._headerItemSubscriptions.push(n)}),this._activeTab||this.setActiveTabGroupHeaderItem(this.tabGroupHeaderItems.first)}onTabActiveChange(e){e.active&&this.setActiveTabGroupHeaderItem(e)}setActiveTabGroupHeaderItem(e,t=!1){if(this.activeTab){if(this.activeTab===e)return;this.activeTab.active=!1}this.activeTab=e,this.activeTab.active=!0,t||this.activeTabChange.emit(this.activeTab)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-tab-group-header"]],contentQueries:function(e,t,n){if(1&e&&i["\u0275\u0275contentQuery"](n,r,0),2&e){let e;i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.tabGroupHeaderItems=e)}},inputs:{activeTab:"activeTab"},outputs:{activeTabChange:"activeTabChange"},ngContentSelectors:l,decls:2,vars:0,consts:[[1,"tab-group-header"]],template:function(e,t){1&e&&(i["\u0275\u0275projectionDef"](a),i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275projection"](1),i["\u0275\u0275elementEnd"]())},styles:[""],changeDetection:0}),e})()},pmxV:function(e,t,n){"use strict";n.r(t),n.d(t,"challengeRoute",(function(){return li})),n.d(t,"challengeRoutes",(function(){return ri})),n.d(t,"ChallengeRoutesModule",(function(){return ci}));var i=n("8Y7J"),o=n("iInd"),a=n("mrSG"),l=n("/Hrl");function r(e){if(!e)throw new Error("Cannot get challenge route data for non-challenge content");return e}class s extends l.a{constructor(e,t,n){super(e,t),this.snapshot=e,this.injector=t,this.contentInfoService=n}getContentInfo(){return Object(a.a)(this,void 0,void 0,(function*(){yield this.contentInfoService.getContentInfo(this.contentHash).then(r).then(e=>Object(a.a)(this,void 0,void 0,(function*(){this.challengeInfo=e,this.challengeType=e.type})))}))}getAdditionalRouteData(){this.challengeType||(this.challengeType=this.snapshot.data.type)}}var c=n("egeQ");let d=(()=>{class e{constructor(e,t){this.studioContentInfoService=e,this.injector=t}resolve(e,t){return Object(a.a)(this,void 0,void 0,(function*(){const t=new s(e,this.injector,this.studioContentInfoService);return yield t.initDataFromRoute(),t}))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](c.a),i["\u0275\u0275inject"](i.Injector))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var g=n("+lWm"),p=n("GaEU"),m=n("em/2"),h=n("6GgV"),u=(n("rS4c"),n("f14+")),f=(n("jxTo"),n("kG1N"),n("OKSY")),C=(n("8hsd"),n("lJxs"));class v{constructor(e,t,n){if(this.draftService=n,!t.snapshot.data.routeData)throw new Error("ChallngeRouteDataResolver missing routeData. Please use the challengeRouteConfig() function when declaring your route");this.routeData=t.snapshot.data.routeData,
//! not guaranteed to get correct challenge type past the photo page
this.challengeType=t.snapshot.data.routeData.challengeType,this._router=e}getDraft(){return Object(a.a)(this,void 0,void 0,(function*(){const e=yield this.draftService.getDraftDefaulted(this.routeData.contentHash,()=>this.routeData.challengeInfo?this.routeData.challengeInfo:this.getDefaultChallenge());return e.type!==this.challengeType&&this.challengeType?(yield this.draftService.clearDraft(),this.getDefaultChallenge()):e}))}getDefaultChallenge(){return{body:"",commentsAllowed:!0,privacy:h.ChallengePrivacy.PUBLIC,title:"",type:this.challengeType||h.ChallengeType.TEXT,color:h.ChallengeColor.RED,points:0,allowedRoles:[],requiresApproval:!1}}navigatePrevious(){return this._router.navigate(["challenge",...this.routeData.previousPath])}navigateNext(){return this._router.navigate(["challenge",...this.routeData.nextPath])}}var x=n("Dy4O"),b=n("LvDl"),y=n("5km/"),P=n("orC8"),O=n("iELJ");function w(e,...t){return b.merge(e,...t)}let M=(()=>{class e{constructor(e,t){this.userStorage=e,this.matDialog=t,this._pendingDraft={}}cancelDraft(){return Object(a.a)(this,void 0,void 0,(function*(){let e=this.matDialog.open(y.g);const t=yield e.beforeClosed().toPromise();if("keep"===t)return"";if("discard"===t)return yield this.clearDraft(),"";throw new Error("User abort")}))}getDraftType(e){return Object(a.a)(this,void 0,void 0,(function*(){if(!e){const t=yield this.getDraft();if(!t)throw new Error("No Challenge Draft found for draft type!");e=t}return e.type}))}clearDraft(){return Object(a.a)(this,void 0,void 0,(function*(){yield this.userStorage.setItem("MingaChallengeDraft",null)}))}getDraft(){return Object(a.a)(this,void 0,void 0,(function*(){return(yield this.userStorage.getItem("MingaChallengeDraft"))||null}))}getDraftDefaulted(e,t){return Object(a.a)(this,void 0,void 0,(function*(){let n=yield this.getDraft();return(!n||e&&n.contentHash!=e)&&(n=yield t(),yield this.storeDraft(n)),n}))}getDraftAssert(){return Object(a.a)(this,void 0,void 0,(function*(){return(yield this.getDraft())||{}}))}saveDraft(e){return Object(a.a)(this,void 0,void 0,(function*(){const t=Object.assign({},this._pendingDraft);t.allowedRoles=[],this._pendingDraft=w(t,e),yield this.savePendingDraft()}))}saveDraftDelayed(e,t=1e3){const n=Object.assign({},this._pendingDraft);n.allowedRoles=[],this._pendingDraft=w(n,e),clearTimeout(this.draftSaveTimeout),this.draftSaveTimeout=setTimeout(()=>this.savePendingDraft(),t)}savePendingDraft(){return Object(a.a)(this,void 0,void 0,(function*(){clearTimeout(this.draftSaveTimeout);const e=Object.assign({},this._pendingDraft);this._pendingDraft={};const t=yield this.getDraftAssert();"allowedRoles"in t&&(t.allowedRoles=[]);const n=w(t,e);!e.banner&&e.uploadedImage&&(n.banner=void 0),!e.badge&&e.uploadedBadge&&(n.badge=void 0),yield this.storeDraft(n)}))}storeDraft(e){return Object(a.a)(this,void 0,void 0,(function*(){yield this.userStorage.setItem("MingaChallengeDraft",e)}))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](P.a),i["\u0275\u0275inject"](O.b))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var _=n("vaq4"),I=n("lkjj"),S=n("xLF2"),E=n("UCUv"),D=n("V3cZ"),k=n("+/Hu");let T=(()=>{class e{constructor(e,t){this.mentionsService=e,this.router=t,this.overlayClose=new i.EventEmitter,this.mentionsSub=S.a.onMentionClicked.subscribe(e=>{this.mentionsService.getMentionable(e.hash).subscribe(e=>{e&&"group"===e.type?this.router.navigate([{outlets:{o:null}}]).then(()=>Object(E.c)(this.router,e.hash)):"person"==(null==e?void 0:e.type)&&this.router.navigate(["",{outlets:{o:null}}]).then(()=>Object(a.a)(this,void 0,void 0,(function*(){yield this.router.navigate(["/profile",e.hash])})))}).unsubscribe()})}ngOnInit(){D.a.hide()}close(){this.overlayClose.emit()}ngOnDestroy(){this.mentionsSub.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](k.b),i["\u0275\u0275directiveInject"](o.g))},e.\u0275dir=i["\u0275\u0275defineDirective"]({type:e,outputs:{overlayClose:"overlayClose"}}),e})();var R=n("Fudl"),j=n("olC0");const B=["*"],A=[[["mg-challenge-overlay-title"]],"*",[["mg-challenge-overlay-footer"]]],H=["mg-challenge-overlay-title","*","mg-challenge-overlay-footer"];let V=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-challenge-overlay-title"]],ngContentSelectors:B,decls:1,vars:0,template:function(e,t){1&e&&(i["\u0275\u0275projectionDef"](),i["\u0275\u0275projection"](0))},styles:[""],changeDetection:0}),e})(),z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-challenge-overlay-footer"]],ngContentSelectors:B,decls:1,vars:0,template:function(e,t){1&e&&(i["\u0275\u0275projectionDef"](),i["\u0275\u0275projection"](0))},styles:["[_nghost-%COMP%]{border-top:1px solid #707070;padding:8px 10%;box-sizing:border-box;display:flex;justify-content:space-between;align-items:center}@media (max-width:1140px){[_nghost-%COMP%]{width:100%;padding:8px 16px}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{height:100%}}"],changeDetection:0}),e})(),L=(()=>{class e extends T{constructor(e,t){super(e,t),this.mentionsService=e,this.router=t}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](k.b),i["\u0275\u0275directiveInject"](o.g))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-challenge-overlay"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],ngContentSelectors:H,decls:11,vars:1,consts:[[1,"overlay-container"],[1,"overlay"],[1,"header"],[1,"close-icon",3,"click"],[1,"end-fill"],[1,"content-wrap",3,"mgScrollTarget"],[1,"footer"]],template:function(e,t){1&e&&(i["\u0275\u0275projectionDef"](A),i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"div",2),i["\u0275\u0275elementStart"](3,"mg-icon",3),i["\u0275\u0275listener"]("click",(function(){return t.close()})),i["\u0275\u0275text"](4,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275projection"](5),i["\u0275\u0275element"](6,"div",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"div",5),i["\u0275\u0275projection"](8,1),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"div",6),i["\u0275\u0275projection"](10,2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](7),i["\u0275\u0275property"]("mgScrollTarget",!0))},directives:[R.a,j.a],styles:["[_nghost-%COMP%]{display:flex;align-items:center;background-color:#1c2f59;color:#fff;height:100vh;width:100%;--overlay-border-radius:20px}.overlay-container[_ngcontent-%COMP%]{height:90vh;width:90vw;margin:0 auto;padding:32px 0;position:relative}.overlay-container[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{height:100%;box-sizing:border-box;display:flex;flex-direction:column;justify-content:stretch}.overlay-container[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;z-index:1000;top:4px;background-color:#c66b83;border-radius:var(--overlay-border-radius,6px) var(--overlay-border-radius,6px) 0 0;color:#fff;display:flex;align-items:center;justify-content:space-between;padding:12px}.overlay-container[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{padding:10px 22px;cursor:pointer}.overlay-container[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .content-wrap[_ngcontent-%COMP%]{flex-grow:1;height:100%;background:#f4f4f4;color:#036;display:flex;flex-direction:column;justify-content:space-between;overflow-y:auto;overflow-x:hidden}.overlay-container[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{background:#f4f4f4;color:#036;width:100%;z-index:1000;border-radius:0 0 var(--overlay-border-radius,6px) var(--overlay-border-radius,6px)}@media (max-width:1140px){.overlay-container[_ngcontent-%COMP%]{height:100%;width:100%;padding:0;--overlay-border-radius:0}.overlay-container[_ngcontent-%COMP%]   .content-wrap[_ngcontent-%COMP%]{padding:0 8px;overflow-y:inherit}}@media (max-height:900px) and (min-width:1140px){.overlay-container[_ngcontent-%COMP%]{height:100%;width:100%;padding:0;--overlay-border-radius:0}.overlay-container[_ngcontent-%COMP%]   .content-wrap[_ngcontent-%COMP%]{padding:0 8px;overflow-y:inherit}}"]}),e})(),F=(()=>{class e{constructor(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-challenge-logo"]],decls:1,vars:0,consts:[[1,"logo"]],template:function(e,t){1&e&&i["\u0275\u0275element"](0,"div",0)},styles:["[_nghost-%COMP%]{display:inline-block;height:39px;width:216px}.logo[_ngcontent-%COMP%]{background-image:url(/assets/challenges/CC-logo.png);background-repeat:no-repeat;background-size:contain;height:inherit;width:inherit}"]}),e})();var N=n("SVse"),U=n("s7LF"),q=n("Q2Ze"),G=n("i1AJ"),$=n("8p1t"),Q=n("QSFu"),Y=n("9sQ6"),J=n("ifhk"),W=n("pMoy"),K=n("WNdF"),X=n("VDRc"),Z=n("eQq5"),ee=n("Hp2Z"),te=n("rs8O"),ne=n("o1f5"),ie=n("nbn/"),oe=n("tcBv"),ae=n("w8an"),le=n("TSSN");const re=["form"],se=["uploadTab"],ce=["bannersTab"],de=["uploadBadgeTab"],ge=["badgeTab"],pe=["fileInputUpload"],me=["badgeInputUpload"];function he(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",40),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" Create a new ",e.challengeTypeString," challenge ")}}function ue(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",40),i["\u0275\u0275text"](1," Edit challenge "),i["\u0275\u0275elementEnd"]())}function fe(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-hint",41),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.challengeTitle.length," / 150 ")}}const Ce=function(){return{value:"A headline"}};function ve(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind2"](2,1,"input.generic.error.required",i["\u0275\u0275pureFunction0"](4,Ce))," "))}const xe=function(){return{value:"Headline"}};function be(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind2"](2,1,"input.generic.error.maxlength",i["\u0275\u0275pureFunction0"](4,xe))," "))}function ye(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mg-points-selector",42),i["\u0275\u0275listener"]("pointsClick",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onPointsChange(t)})),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("title","Points awarded to people who respond to this challenge")("selectedPoints",e.points)}}function Pe(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"mg-file-input-upload",43,44),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onFileUpload(t)}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().uploadedImage=t})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275classProp"]("file-uploaded",!!e.uploadedImage),i["\u0275\u0275property"]("showFileDetails",!1)("fallback",e.uploadedImage)("ngModel",e.uploadedImage)}}const Oe=function(){return{standalone:!0}};function we(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"mg-banner-category-select",45),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().bannerCategories=t})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](2,"mg-challenge-banner-library-stream",46),i["\u0275\u0275listener"]("selectedBannerChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onBannerSelected(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("allowDeselect",!0)("ngModelOptions",i["\u0275\u0275pureFunction0"](6,Oe))("ngModel",e.bannerCategories),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("categories",e.bannerCategories)("selectedAssetId",e.selectedBanner)("initialBannerAsset",e.initialBanner)}}function Me(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"mg-file-input-upload",47,48),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onBadgeUpload(t)}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().uploadedBadge=t})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275classProp"]("badge-uploaded",!!e.uploadedBadge),i["\u0275\u0275property"]("showFileDetails",!1)("fallback",e.uploadedBadge)("ngModel",e.uploadedBadge)}}function _e(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"mg-challenge-banner-library-stream",49),i["\u0275\u0275listener"]("selectedBannerChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onBadgeSelected(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("selectedAssetId",e.selectedBadge)("initialBannerAsset",e.initialBadge)}}let Ie=(()=>{class e extends v{constructor(e,t,n,i,o,a){super(e,t,i),this.router=e,this.challengesRouteService=n,this.challengeDraftService=i,this.pointsManager=o,this.rolesService=a,this.bannerCategories=[],this.challengeTitle="",this.challengeBody="",this.dueDate=null,this.uploadedImage="",this.selectedBanner=null,this.initialBanner=null,this.uploadedBadge="",this.selectedBadge=null,this.initialBadge=null,this.points=0,this.isApprovalRequired=!1,this.public=!1,this.semiPrivate=!1,this.contentHash="",this.private=!1,this.allowComments=!1,this.availableResponseRoles=[],this.allowedRoles=[],this.initialAllowedRoles=[],this.allResponseRolesSelected=!1,this.isLoadingRoles=!0,this.initRoles(),this.initDraft(),this.availableResponseRoles$=this.rolesService.availableCommentPermitableRoles$.pipe(Object(C.a)(e=>{const t=e.map(e=>({disabled:e.immutableCommentPermittable,name:e.name,roleType:e.roleType,get tooltip(){return""}}));return this.availableResponseRoles=t,t})),this.canAllocateContentPoints$=this.pointsManager.getCanCurrentUserAllocatePointsObs()}get challengeTypeString(){switch(this.challengeType){case h.ChallengeType.TEXT:return"written";case h.ChallengeType.IMAGE:return"photo";case h.ChallengeType.VIDEO:return"video"}return""}ngOnInit(){this.initialAllowedRoles.length&&(this.isLoadingRoles=!1,this.initSelectedRoles())}ngOnDestroy(){var e;null===(e=this.availableResponseRolesSub)||void 0===e||e.unsubscribe()}initDraft(){return Object(a.a)(this,void 0,void 0,(function*(){const e=yield this.getDraft();e&&(this.challengeTitle=e.title,this.challengeBody=e.body,this.allowComments=e.commentsAllowed,this.dueDate=e.dueDate||null,this.uploadedImage=e.uploadedImage||"",this.selectedBanner=e.banner||null,this.initialBanner=e.banner||null,this.uploadedBadge=e.uploadedBadge||"",this.selectedBadge=e.badge||null,this.initialBadge=e.badge||null,this.allResponseRolesSelected=e.allRolesSelected||!1,this.isApprovalRequired=e.requiresApproval||!1,this.initialAllowedRoles=e.allowedRoles||[],this.uploadTab&&this.uploadedImage?this.uploadTab.selectTab():this.bannersTab&&this.bannersTab.selectTab(),this.uploadBadgeTab&&this.uploadedBadge?this.uploadBadgeTab.selectTab():this.badgeTab&&this.badgeTab.selectTab(),this.contentHash=e.contentHash||"",e.privacy&&(e.privacy==h.ChallengePrivacy.PRIVATE?this.private=!0:e.privacy==h.ChallengePrivacy.SEMIPRIVATE?this.semiPrivate=!0:this.public=!0),this.challengeType=e.type,this.points=e.points,this.isLoadingRoles&&this.initSelectedRoles())}))}initRoles(){return Object(a.a)(this,void 0,void 0,(function*(){yield this.rolesService.fetchIfNeeded()}))}initSelectedRoles(){this.availableResponseRolesSub=this.availableResponseRoles$.subscribe(e=>{this.availableResponseRoles=e,this.allowedRoles=this.initialAllowedRoles.length?this.initialAllowedRoles:["STUDENT","STUDENT_LEADER","OWNER","MANAGER","DISTRICT_MANAGER"]})}onFileUpload(e){this.uploadedImage=window.MINGA_ASSET_URL_PREFIX+e,this.selectedBanner=null,this.updateDraft()}onBannerSelected(e){e&&(this.selectedBanner=e,this.uploadedImage="",this.updateDraft())}onBadgeUpload(e){this.uploadedBadge=window.MINGA_ASSET_URL_PREFIX+e,this.selectedBadge=null,this.updateDraft()}onBadgeSelected(e){e&&(this.selectedBadge=e,this.uploadedBadge="",this.updateDraft())}onOverlayClose(){return Object(a.a)(this,void 0,void 0,(function*(){yield this.challengeDraftService.cancelDraft(),this.contentHash?yield this.router.navigateByUrl(""):this.challengesRouteService.returnFromChallenges()}))}goBack(){return Object(a.a)(this,void 0,void 0,(function*(){yield this.challengeDraftService.cancelDraft(),this.contentHash?yield this.router.navigateByUrl(""):yield this.navigatePrevious()}))}nextButtonEnabled(){var e;return!(null===(e=this.form)||void 0===e?void 0:e.invalid)&&(this.private||this.semiPrivate||this.public)}onPublicChange(){this.semiPrivate=!1,this.private=!1,this.updateDraft()}onSemiPrivateChange(){this.public=!1,this.private=!1,this.updateDraft()}onPrivateChange(){this.public=!1,this.semiPrivate=!1,this.updateDraft()}onPointsChange(e){this.points=e,this.updateDraft()}onApprovalChange(){this.updateDraft()}onToggleAll(e){this.availableResponseRoles&&(this.availableResponseRoles.forEach(t=>{if(e&&!this.allowedRoles.includes(t.roleType))this.allowedRoles.push(t.roleType),this.allowedRoles=this.allowedRoles.slice();else if(!e&&this.allowedRoles.includes(t.roleType)){if(t.disabled)return;this.allowedRoles=this.allowedRoles.filter(e=>e!==t.roleType)}}),this.updateDraft())}onSelectedRolesChange(e){e.length&&(this.allowedRoles=e,this.allResponseRolesSelected=e.length===this.availableResponseRoles.length,this.updateDraft())}_getPendingDraft(){let e=h.ChallengePrivacy.PUBLIC;this.private?e=h.ChallengePrivacy.PRIVATE:this.semiPrivate&&(e=h.ChallengePrivacy.SEMIPRIVATE);const t={title:this.challengeTitle,body:this.challengeBody,privacy:e,commentsAllowed:this.allowComments,type:this.challengeType,points:this.points,allowedRoles:this.allowedRoles||[],allRolesSelected:this.allResponseRolesSelected,requiresApproval:this.isApprovalRequired};return this.dueDate&&(t.dueDate=this.dueDate),this.uploadedImage&&(t.uploadedImage=this.uploadedImage),this.selectedBanner&&(t.banner=this.selectedBanner),this.uploadedBadge&&(t.uploadedBadge=this.uploadedBadge),this.selectedBadge&&(t.badge=this.selectedBadge),t}updateDraft(){const e=this._getPendingDraft();this.challengeDraftService.saveDraftDelayed(e)}onNextClick(){return Object(a.a)(this,void 0,void 0,(function*(){const e=this._getPendingDraft();yield this.challengeDraftService.saveDraft(e),yield this.navigateNext()}))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](o.g),i["\u0275\u0275directiveInject"](o.a),i["\u0275\u0275directiveInject"](x.a),i["\u0275\u0275directiveInject"](M),i["\u0275\u0275directiveInject"](_.b),i["\u0275\u0275directiveInject"](I.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&(i["\u0275\u0275viewQuery"](re,3),i["\u0275\u0275viewQuery"](se,3),i["\u0275\u0275viewQuery"](ce,3),i["\u0275\u0275viewQuery"](de,3),i["\u0275\u0275viewQuery"](ge,3),i["\u0275\u0275viewQuery"](pe,1),i["\u0275\u0275viewQuery"](me,1)),2&e){let e;i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.form=e.first),i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.uploadTab=e.first),i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.bannersTab=e.first),i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.uploadBadgeTab=e.first),i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.badgeTab=e.first),i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.fileInputUpload=e.first),i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.badgeInputUpload=e.first)}},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:74,vars:31,consts:[[3,"overlayClose"],[1,"content"],[1,"header-content"],["class","title-text",4,"ngIf"],[1,"divider"],[1,"mg-bodycopy"],["form","ngForm"],[1,"left-col"],["mgFormField","","floatLabel","always"],["mgMentionable2","inline","allowedTags","mg-mention","name","challengeTitle","autocomplete","off","required","true",1,"headline",3,"required","multiline","maxlength","ngModel","ngModelChange"],["challengeHeadlineInput","ngModel"],["align","end",4,"ngIf"],[4,"ngIf"],["name","challengeBody","placeholder","Description","float","always","required","true","requiredMessage","A description is required","align","flex-start","minHeight","100px",1,"form-input-hpadding",3,"richContent","maxlength","ngModel","ngModelChange"],["name","dueDate","datePlaceholder","Due Date","dateOnly","true","required","true",1,"span-two",3,"hideOptionalMarker","canReset","ngModel","ngModelChange"],[3,"title","selectedPoints","pointsClick",4,"ngIf"],[1,"component-divider"],[1,"role-select-header"],[1,"role-select-title"],["name","toggleAllRoles",3,"ngModel","ngModelChange","change"],["reduceFlexBasis","true",3,"roles","selectedRoles","selectedRolesChange"],[1,"approval-setting"],[1,"approval-title"],["name","approvalRequired",3,"ngModel","ngModelChange","change"],[1,"right-col"],[1,"form-section"],["fxLayout","row","fxLayoutAlign","start center"],[1,"file-input-title"],[3,"activeTab","activeTabChange"],["challengePhotoTabs",""],["uploadTab",""],["bannersTab",""],["challengeBadgeTabs",""],["uploadBadgeTab",""],["badgeTab",""],[1,"left-footer-container",3,"click"],["icon","back"],[1,"back-btn"],[1,"right-footer-container"],["mgBubbleBtn","",1,"mg-bodycopy","next-button",3,"disabled","click"],[1,"title-text"],["align","end"],[3,"title","selectedPoints","pointsClick"],["accept","image/*","customTitleText","Upload A Photo","previewAspectRatio","2:1","name","bannerUpload",3,"showFileDetails","fallback","ngModel","ngModelChange"],["fileInputUpload",""],["disableStatCount","true",3,"allowDeselect","ngModelOptions","ngModel","ngModelChange"],["type","CHALLENGE_HEADER",3,"categories","selectedAssetId","initialBannerAsset","selectedBannerChange"],["accept","image/*","customTitleText","Upload A Badge Photo","customBottomText","Design Tip: Use a png with a transparent background for the best badges!","previewAspectRatio","2:1","name","badgeUpload",3,"showFileDetails","fallback","ngModel","ngModelChange"],["badgeInputUpload",""],["type","BADGE",3,"selectedAssetId","initialBannerAsset","selectedBannerChange"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mg-challenge-overlay",0),i["\u0275\u0275listener"]("overlayClose",(function(){return t.onOverlayClose()})),i["\u0275\u0275elementStart"](1,"mg-challenge-overlay-title"),i["\u0275\u0275element"](2,"mg-challenge-logo"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div",1),i["\u0275\u0275elementStart"](4,"div",2),i["\u0275\u0275template"](5,he,2,1,"div",3),i["\u0275\u0275template"](6,ue,2,0,"div",3),i["\u0275\u0275element"](7,"div",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"form",5,6),i["\u0275\u0275elementStart"](10,"div",7),i["\u0275\u0275elementStart"](11,"mat-form-field",8),i["\u0275\u0275elementStart"](12,"mat-label"),i["\u0275\u0275text"](13,"Headline"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"mg-textarea",9,10),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.challengeTitle=e}))("ngModelChange",(function(){return t.updateDraft()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](16,fe,2,1,"mat-hint",11),i["\u0275\u0275template"](17,ve,3,5,"mat-error",12),i["\u0275\u0275template"](18,be,3,5,"mat-error",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](19,"mg-body-input",13),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.challengeBody=e}))("ngModelChange",(function(){return t.updateDraft()})),i["\u0275\u0275pipe"](20,"hasPermission"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](21,"mg-date-time-picker",14),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.dueDate=e}))("ngModelChange",(function(){return t.updateDraft()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](22,ye,1,2,"mg-points-selector",15),i["\u0275\u0275pipe"](23,"async"),i["\u0275\u0275element"](24,"hr",16),i["\u0275\u0275elementStart"](25,"div",17),i["\u0275\u0275elementStart"](26,"p",18),i["\u0275\u0275text"](27,"Who can respond to this challenge"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](28,"mat-checkbox",19),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.allResponseRolesSelected=e}))("change",(function(e){return t.onToggleAll(e.checked)})),i["\u0275\u0275text"](29," All "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](30,"mg-multi-select-role",20),i["\u0275\u0275listener"]("selectedRolesChange",(function(e){return t.onSelectedRolesChange(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](31,"hr",16),i["\u0275\u0275elementStart"](32,"div",21),i["\u0275\u0275elementStart"](33,"div",22),i["\u0275\u0275text"](34,"Responses require approval"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](35,"mat-checkbox",23),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.isApprovalRequired=e}))("change",(function(){return t.onApprovalChange()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](36,"div",24),i["\u0275\u0275elementStart"](37,"div",25),i["\u0275\u0275elementStart"](38,"div",26),i["\u0275\u0275elementStart"](39,"div",27),i["\u0275\u0275text"](40,"Pick a Challenge Image"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](41,"mg-tab-group-header",28,29),i["\u0275\u0275listener"]("activeTabChange",(function(e){return t.activeTab=e})),i["\u0275\u0275elementStart"](43,"mg-tab-group-header-item",null,30),i["\u0275\u0275text"](45," Upload "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](46,"mg-tab-group-header-item",null,31),i["\u0275\u0275text"](48," Stock "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](49,Pe,3,5,"ng-container",12),i["\u0275\u0275template"](50,we,3,7,"ng-container",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](51,"hr",16),i["\u0275\u0275elementStart"](52,"div",25),i["\u0275\u0275elementStart"](53,"div",26),i["\u0275\u0275elementStart"](54,"div",27),i["\u0275\u0275text"](55,"Add A Badge"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](56,"mg-tab-group-header",28,32),i["\u0275\u0275listener"]("activeTabChange",(function(e){return t.activeBadgeTab=e})),i["\u0275\u0275elementStart"](58,"mg-tab-group-header-item",null,33),i["\u0275\u0275text"](60," Upload "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](61,"mg-tab-group-header-item",null,34),i["\u0275\u0275text"](63," Stock "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](64,Me,3,5,"ng-container",12),i["\u0275\u0275template"](65,_e,2,2,"ng-container",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](66,"mg-challenge-overlay-footer"),i["\u0275\u0275elementStart"](67,"div",35),i["\u0275\u0275listener"]("click",(function(){return t.goBack()})),i["\u0275\u0275elementStart"](68,"mg-button-icon",36),i["\u0275\u0275elementStart"](69,"span",37),i["\u0275\u0275text"](70,"Back"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](71,"div",38),i["\u0275\u0275elementStart"](72,"button",39),i["\u0275\u0275listener"]("click",(function(){return t.onNextClick()})),i["\u0275\u0275text"](73," Next "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275reference"](15),n=i["\u0275\u0275reference"](44),o=i["\u0275\u0275reference"](47),a=i["\u0275\u0275reference"](59),l=i["\u0275\u0275reference"](62);i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",!t.contentHash),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.contentHash),i["\u0275\u0275advance"](8),i["\u0275\u0275property"]("required",!0)("multiline",!1)("maxlength",150)("ngModel",t.challengeTitle),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.challengeTitle),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",null==e.control||null==e.control.errors?null:e.control.errors.required),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",null==e.control||null==e.control.errors?null:e.control.errors.maxlength),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("richContent",i["\u0275\u0275pipeBind1"](20,27,"CONTENT_HTML_INCLUDE"))("maxlength",5e3)("ngModel",t.challengeBody),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("hideOptionalMarker",!0)("canReset",!0)("ngModel",t.dueDate),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](23,29,t.canAllocateContentPoints$)),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngModel",t.allResponseRolesSelected),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("roles",t.availableResponseRoles)("selectedRoles",t.allowedRoles),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngModel",t.isApprovalRequired),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("activeTab",t.activeTab),i["\u0275\u0275advance"](8),i["\u0275\u0275property"]("ngIf",t.activeTab===n),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.activeTab===o||!t.activeTab),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("activeTab",t.activeBadgeTab),i["\u0275\u0275advance"](8),i["\u0275\u0275property"]("ngIf",t.activeBadgeTab===a),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.activeBadgeTab===l||!t.activeBadgeTab),i["\u0275\u0275advance"](7),i["\u0275\u0275property"]("disabled",!t.nextButtonEnabled())}},directives:[L,V,F,N.o,U.E,U.u,U.v,q.d,G.a,q.h,$.a,Q.a,U.B,U.n,U.t,U.w,Y.a,J.a,W.a,K.a,X.e,X.d,Z.a,Z.b,z,ee.a,q.g,q.c,te.a,ne.a,ie.a,oe.a],pipes:[ae.a,N.b,le.d],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");.title-text[_ngcontent-%COMP%]{margin-bottom:20px;font-family:Muli,sans-serif;line-height:1.35;margin-top:32px}@media (orientation:landscape){.title-text[_ngcontent-%COMP%]{font-size:6.8019323671vh}}@media (orientation:portrait){.title-text[_ngcontent-%COMP%]{font-size:6.8019323671vw}}@media (orientation:landscape) and (max-height:414px){.title-text[_ngcontent-%COMP%]{font-size:28.16px}}@media (orientation:portrait) and (max-width:414px){.title-text[_ngcontent-%COMP%]{font-size:28.16px}}@media (min-width:439.875px){.title-text[_ngcontent-%COMP%]{font-size:29.92px}}@media (max-width:1140px){.title-text[_ngcontent-%COMP%]{margin-top:16px}}.divider[_ngcontent-%COMP%]{width:165px;border-top:6px solid #b2b2b2;margin:auto}[_nghost-%COMP%]{--mg-form-input-border-width:1px}.padded-center-content[_ngcontent-%COMP%]{padding:0 10%}@media (max-width:1140px){.padded-center-content[_ngcontent-%COMP%]{padding:0}}.content[_ngcontent-%COMP%]{flex-direction:column;position:relative;text-align:center}form[_ngcontent-%COMP%]{text-align:left;display:flex;flex-direction:row;justify-content:center;row-gap:16px}form[_ngcontent-%COMP%]   .left-col[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   .right-col[_ngcontent-%COMP%]{flex-basis:40%;max-width:40%;margin-left:20px;margin-right:20px}form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]{margin-bottom:22px}@media (max-width:1140px){form[_ngcontent-%COMP%]{flex-direction:column}form[_ngcontent-%COMP%]   .left-col[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   .right-col[_ngcontent-%COMP%]{max-width:none}}.headline[_ngcontent-%COMP%]{font-size:26px}.challenge-options-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,minmax(-webkit-min-content,1fr));grid-template-columns:repeat(2,minmax(min-content,1fr));column-gap:22px;align-items:start}.challenge-options-container[_ngcontent-%COMP%]   .span-two[_ngcontent-%COMP%]{grid-column:1/span 2}.challenge-options-container[_ngcontent-%COMP%]   .slide-toggle-section[_ngcontent-%COMP%]{min-width:200px}@media (max-width:599px){.challenge-options-container[_ngcontent-%COMP%]{grid-template-columns:1fr}.challenge-options-container[_ngcontent-%COMP%]   .span-two[_ngcontent-%COMP%]{grid-column:1}}mg-button-icon[_ngcontent-%COMP%]     button{display:flex;align-items:center}mg-button-icon[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{margin-left:8px}mg-points-selector[_ngcontent-%COMP%]{margin-bottom:15px}.next-button[_ngcontent-%COMP%]{padding:1em 4.1em;cursor:pointer;border-radius:2.5em}@media (max-width:599px){.next-button[_ngcontent-%COMP%]{font-size:14px;padding:1.2em 3em}}.header-content[_ngcontent-%COMP%]{margin-bottom:2em}@media (max-width:1140px){.header-content[_ngcontent-%COMP%]{margin-bottom:16px}}mg-banner-category-select[_ngcontent-%COMP%]{font-size:10px}mg-tab-group-header[_ngcontent-%COMP%]{justify-content:flex-start}mg-file-input-upload[_ngcontent-%COMP%]{overflow:hidden;height:7em;margin-top:5px;--mg-file-input-drop-info-height:10em;--mg-file-input-drop-info-display:flex;--mg-file-input-drop-info-align:center;--mg-file-input-drop-info-icon-margin:0 20px 0 0;--mg-file-input-icon-size-desktop:5em;--mg-file-input-icon-size-mobile:4em;--mg-file-input-sub-text-align:left;--mg-file-progress-spinner-position-top:30%}.file-uploaded[_ngcontent-%COMP%]{height:16em}.badge-uploaded[_ngcontent-%COMP%]{height:12em}.component-divider[_ngcontent-%COMP%]{color:#707070;margin:15px 0}.file-input-title[_ngcontent-%COMP%]{margin-right:10px}.role-select-header[_ngcontent-%COMP%]{display:flex;margin:10px 0}.role-select-title[_ngcontent-%COMP%]{font-size:15px;font-weight:700;margin:0 15px 0 0}mg-multi-select-role[_ngcontent-%COMP%]{--mg-multi-select-role-font-size:15px;--mg-multi-select-role-layout-flex:0 1 25%}.approval-setting[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;margin:15px 0}.approval-title[_ngcontent-%COMP%]{font-size:15px;font-weight:700;margin-right:15px}']}),e})();var Se=n("u9T3"),Ee=n("jMqV"),De=n("CO6v"),ke=n("mP6D");let Te=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[N.c]]}),e})();var Re=n("rJgo"),je=n("ls3q"),Be=n("c4Ft");let Ae=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[De.a,je.a,Be.a,N.c,o.k,Re.c]]}),e})();var He=n("+0Zl"),Ve=n("p+4T"),ze=n("pu9B"),Le=n("V5YL"),Fe=n("EBcp"),Ne=n("SOT1"),Ue=n("HxU+"),qe=n("ppIK"),Ge=n("Vwx4"),$e=n("Ogcz"),Qe=n("WmLq"),Ye=n("37Vl");let Je=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[De.a,Ge.b,je.a,Ae,Te,qe.a,Fe.a,$e.b,Ue.a,k.a,Ne.a,ke.a,He.a,Ve.a,Le.a,ze.a,Qe.a,Ye.a,N.c,o.k,q.f,W.b,Ee.b,U.m,Se.a,le.c]]}),e})();var We=n("+dib"),Ke=n("zTy+"),Xe=n("4doY"),Ze=n("5Jf8"),et=n("4Zvv"),tt=n("WH00"),nt=n("9szt"),it=n("G1e9"),ot=n("YgQ7"),at=n("M4qg"),lt=n("4avL");const rt=["challengeSuccessOverlayTemplate"];function st(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",1),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().closeInner()})),i["\u0275\u0275elementStart"](1,"div",2),i["\u0275\u0275elementStart"](2,"mg-icon"),i["\u0275\u0275text"](3,"challenges-o"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"div",3),i["\u0275\u0275elementStart"](5,"div",4),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().gotoChallengeInvites()})),i["\u0275\u0275elementStart"](6,"mg-button",5),i["\u0275\u0275text"](7,"Invite"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("innerHTML",e.text,i["\u0275\u0275sanitizeHtml"])}}let ct=(()=>{class e{constructor(e,t,n,i,o){this.dialogRef=e,this.data=t,this.modalService=n,this.router=i,this._peopleSelector=o,this.text="Challenge Created!",t.text&&(this.text=t.text),t.challengeId?this.challengeId=t.challengeId:(console.error("[ChallengeSuccessDialog] missing required challenge context id!"),this.close(),this.closeInner())}ngOnInit(){this.dialogRef.afterClosed().subscribe(()=>{this.showDialog()}),this.close()}showDialog(){return Object(a.a)(this,void 0,void 0,(function*(){if(!this.challengeSuccessOverlayTemplate)throw new Error("this.challengeSuccessOverlayTemplate unset");this.innerDialogRef=this.modalService.open(this.challengeSuccessOverlayTemplate,{full:!0,animation:"fade",backgroundColor:"rgba(28, 47, 89,0.95)"}),setTimeout(()=>this.closeInner(),5e3)}))}close(){this.dialogRef.close()}closeInner(){this.innerDialogRef&&this.innerDialogRef.close()}gotoChallengeInvites(){return Object(a.a)(this,void 0,void 0,(function*(){yield this._peopleSelector.open("Challenge","invite",{data:{contextHash:this.challengeId}}),this.closeInner()}))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](O.g),i["\u0275\u0275directiveInject"](O.a),i["\u0275\u0275directiveInject"](ot.b),i["\u0275\u0275directiveInject"](o.g),i["\u0275\u0275directiveInject"](at.PeopleSelectorService))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-pending-invitations-dialog"]],viewQuery:function(e,t){if(1&e&&i["\u0275\u0275viewQuery"](rt,3),2&e){let e;i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.challengeSuccessOverlayTemplate=e.first)}},decls:2,vars:0,consts:[["challengeSuccessOverlayTemplate",""],[1,"success-overlay",3,"click"],[1,"content-wrap"],[1,"text","mg-headline",3,"innerHTML"],[1,"button-wrap",3,"click"],["mgBubbleBtn","",1,"mg-headline"]],template:function(e,t){1&e&&i["\u0275\u0275template"](0,st,8,1,"ng-template",null,0,i["\u0275\u0275templateRefExtractor"])},directives:[R.a,lt.a],styles:["[_nghost-%COMP%]{display:block;width:100%;text-align:center}.success-overlay[_ngcontent-%COMP%]{height:100%;text-align:center;position:relative;cursor:pointer}.success-overlay[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{--mg-icon-size:104px;color:#c66b83}.success-overlay[_ngcontent-%COMP%]   .content-wrap[_ngcontent-%COMP%]{position:absolute;top:25%;left:50%;transform:translateY(-50%) translateX(-50%)}.invite-icon[_ngcontent-%COMP%]{background-image:url(/assets/event/event-invited.svg);background-repeat:no-repeat;width:75px;height:75px;margin:0 auto 13px}.text[_ngcontent-%COMP%]{color:#fff;margin:39px auto 0}.button-wrap[_ngcontent-%COMP%]{--mg-button-border-radius:2em;--mg-button-padding-horz:3em;padding:39px 20px 20px}mg-button[_ngcontent-%COMP%]{--mg-button-color:#c66b83;--mg-button-padding-horz:4em}"]}),e})(),dt=(()=>{class e{constructor(e){this.matDialog=e}open(e){return this.matDialog.open(ct,Object.assign({},e))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](O.b))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var gt=n("GFah"),pt=n("Nxoj"),mt=n("o4Yh"),ht=n("MAbt"),ut=n("A2eb"),ft=n("chTD");function Ct(e,t){if(1&e&&i["\u0275\u0275element"](0,"mg-challenge-short-card",15),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("content",e.previewContent)("color",e.previewContent.color)}}let vt=(()=>{class e extends v{constructor(e,t,n,i,o,a,l,r,s,c){var d;if(super(n,i,t),this.challengesRouteService=e,this.challengeDraftService=t,this.router=n,this.contentEvents=o,this._cdr=a,this.challengeProto=l,this.contentModerationInterstitial=r,this.challengeSuccessDialog=s,this.rootService=c,this.loaded=!1,this.previewContent={title:"",body:"",challengeType:"photo",color:h.ChallengeColor.RED,likeCount:0,commentCount:0,commentList:[],ownerGroupHash:"",contentHash:"",totalCommentCount:0,pinned:!1,timestamp:0,unpublishTimestamp:0,cloudflareVideoUrl:"",cloudflareUid:"",cloudflareReady:!1,allowedCommentingRoleTypesList:[],commentsAllowed:!0,hasResponded:!1,privacy:h.ChallengePrivacy.PUBLIC,respondedPeopleCount:0,responsesSummaryList:[],points:0,allowedRolesList:[],invitePeopleCount:0,inviteResponseCount:0,requiresApproval:!1,hasLiked:!1},this._publishInfo={},this.publishDate=null,this.unpublishDate=null,this.pinned=!1,this.pinDays=1,this.endPinDate=null,this.selectedColor="",this.publishInfoEditComponents=[],this.colorList={$implicit:["#cf244e","#dc924b","#d1ae16","#47b3a9","#335ebc","#6248b5"]},this.hexToChallengeClr=new Map([["#cf244e",h.ChallengeColor.RED],["#dc924b",h.ChallengeColor.ORANGE],["#d1ae16",h.ChallengeColor.YELLOW],["#47b3a9",h.ChallengeColor.GREEN],["#335ebc",h.ChallengeColor.BLUE],["#6248b5",h.ChallengeColor.PURPLE]]),this.challengeClrToHex=new Map([[h.ChallengeColor.RED,"#cf244e"],[h.ChallengeColor.ORANGE,"#dc924b"],[h.ChallengeColor.YELLOW,"#d1ae16"],[h.ChallengeColor.GREEN,"#47b3a9"],[h.ChallengeColor.BLUE,"#335ebc"],[h.ChallengeColor.PURPLE,"#6248b5"]]),!i.snapshot.data.routeData)throw new Error("No route data");this.routeData=i.snapshot.data.routeData,this.contentHash=this.routeData.contentHash,this.publishInfoEditComponentType=null===(d=this.routeData.contentManager)||void 0===d?void 0:d.getPublishInfoEditComponent(),this.initDraft()}ngOnInit(){setTimeout(()=>this.initPublishInfo(),0)}initPublishInfo(){var e;return Object(a.a)(this,void 0,void 0,(function*(){if(this.routeData.contentHash){const t=yield null===(e=this.routeData.contentManager)||void 0===e?void 0:e.getPublishInfo(this.routeData.contentHash);t&&this.setPublishInfo(t),this._cdr.markForCheck()}}))}initDraft(){return Object(a.a)(this,void 0,void 0,(function*(){const e=yield this.getDraft();if(e){if(this.draft=e,this.previewContent.title=e.title,this.previewContent.body=e.body,this.previewContent.challengeType=e.type,this.previewContent.color=e.color||h.ChallengeColor.RED,this.previewContent.allowedRolesList=e.allowedRoles,this.selectedColor=this.challengeClrToHex.get(e.color)||"#cf244e",e.dueDate&&e.dueDate.getFullYear&&(
//! This line errors out occasionally and the user must hard refresh
this.previewContent.dueDate=Object(We.c)(e.dueDate).toObject()),e.banner)this.previewContent.featuredImage=e.banner.image;else if(e.uploadedImage){const t=new Ze.ImageInfo;let n=t.getSizeMap();const i=new Ze.ImageSize;i.setPath(e.uploadedImage),i.setHeight(400),i.setWidth(700),n.set("raw",i),this.previewContent.featuredImage=t.toObject()}let t=!1;void 0!==e.publishDate&&(this._publishInfo.publishDate=e.publishDate,t=!0),void 0!==e.unpublishDate&&(this._publishInfo.unpublishDate=e.unpublishDate,t=!0),void 0!==e.endPinDate&&(this._publishInfo.endPinDate=e.endPinDate,t=!0),t&&this.setPublishInfo(this._publishInfo),this.loaded=!0,this._cdr.markForCheck()}}))}onClickBack(){return Object(a.a)(this,void 0,void 0,(function*(){if(this.draft){const e=yield this.challengeDraftService.getDraftType(this.draft);let t=e.toLowerCase();const n=this.routeData.previousPath;e==h.ChallengeType.IMAGE&&(t="photo"),this.draft.contentHash?yield this.router.navigate(["challenge",...n]):yield this.router.navigate(["challenge",...n,t])}}))}onOverlayClose(){return Object(a.a)(this,void 0,void 0,(function*(){yield this.challengeDraftService.cancelDraft(),this.challengesRouteService.returnFromChallenges()}))}_save(){return Object(a.a)(this,void 0,void 0,(function*(){let e;return this.contentHash?(e=yield this._update(),this.contentEvents.emitPostUpdateSuccess({typeString:"challenge",date:this.publishDate||void 0,endDate:this.unpublishDate||void 0,color:this.hexToChallengeClr.get(this.selectedColor)||h.ChallengeColor.RED})):(e=yield this._create(),this.contentEvents.emitPostCreateSuccess({typeString:"challenge",date:this.publishDate||void 0,endDate:this.unpublishDate||void 0,color:this.hexToChallengeClr.get(this.selectedColor)||h.ChallengeColor.RED})),e}))}_create(){return Object(a.a)(this,void 0,void 0,(function*(){if(!this.draft)throw new Error("no draft to save");const e=new Ke.ChallengeInfo;e.setBody(this.draft.body),this.draft.dueDate&&e.setDueDate(Object(We.g)(this.draft.dueDate)),e.setTitle(this.draft.title),e.setType(this.draft.type),e.setPrivacy(this.draft.privacy),e.setCommentsAllowed(this.draft.commentsAllowed),e.setColor(this.hexToChallengeClr.get(this.selectedColor)||h.ChallengeColor.RED),e.setPointValue(this.draft.points),e.setAllowedRolesList(this.draft.allowedRoles),e.setRequiresApproval(this.draft.requiresApproval);const t=this.draft.banner,n=this.draft.uploadedImage;t?e.setBannerHash(t.bannerHash):n&&e.setBannerAsset(n);const i=this.draft.badge,o=this.draft.uploadedBadge;i?e.setBadgeHash(i.bannerHash):o&&e.setBadgeAsset(o);const a=(yield this.challengeProto.new(e)).getContentHash(),l=this.hasPublishInfoEditComponents()?this.getPublishInfo():this.routeData.contentManager.getDefaultPublishInfo(),r=yield this.routeData.contentManager.addContent(a,l);return this.challengeSuccessDialog.open({data:{challengeId:r.contentContextHash}}),r}))}_update(){return Object(a.a)(this,void 0,void 0,(function*(){const e=yield this._getChallengeInfo(),t=yield this.getDraft(),n=new Ke.ChallengeInfo;t.contentHash&&n.setContentHash(t.contentHash);let i=null;if(this.hasPublishInfoEditComponents()){const e=this.getPartialPublishInfo();Object.keys(e).length>0&&(i=yield this.routeData.contentManager.moveContent(this.routeData.contentHash,e))}n.setBody(t.body),t.dueDate&&n.setDueDate(Object(We.g)(t.dueDate)),n.setTitle(t.title),n.setType(t.type),n.setPrivacy(t.privacy),n.setCommentsAllowed(t.commentsAllowed),n.setColor(this.hexToChallengeClr.get(this.selectedColor)||h.ChallengeColor.RED),n.setPointValue(t.points),n.setAllowedRolesList(t.allowedRoles),n.setRequiresApproval(t.requiresApproval);const o=t.banner,a=t.uploadedImage;o?n.setBannerHash(o.bannerHash):a&&a!=(null==e?void 0:e.getBannerAsset())&&n.setBannerAsset(a);const l=t.badge,r=t.uploadedBadge;l?n.setBadgeHash(l.bannerHash):r&&r!=(null==e?void 0:e.getBadgeAsset())&&n.setBadgeAsset(r);const s=yield this.challengeProto.update(n);let c;if(i)c=i;else{const e=s.hasModerationResult()?et.ModerationResultMapper.toIModerationResult(s.getModerationResult()):null;c={contentContextHash:s.getContentContextHash(),moderationResult:e}}return c}))}_getChallengeInfo(){if(this.contentHash){const e=new Xe.ContentInfoQuery;return e.setContentHash(this.contentHash),this.challengeProto.getInfo(e)}}hasPublishInfoEditComponents(){return this.publishInfoEditComponents.length>0}setPublishInfo(e){this._publishInfo=e,this.publishInfoEditComponents.forEach(t=>t.setPublishInfo(e))}getPublishInfo(){return this.getLastPublishInfoEditComponent().getPublishInfo()}getLastPublishInfoEditComponent(){return this.publishInfoEditComponents[this.publishInfoEditComponents.length-1]}getPartialPublishInfo(){let e=0,t={};for(const n of this.publishInfoEditComponents){const i=n.getPartialPublishInfo(),o=Object.keys(i).length;o>e&&(t=i,e=o)}return t}onColorChange(e){const t=this.hexToChallengeClr.get(e)||h.ChallengeColor.RED;this.selectedColor=e,this.previewContent.color=t,this.draft&&(this.draft.color=t)}onPublishInfoEditComponentReady(e){this.publishInfoEditComponents.push(e),e.setPublishInfo(this._publishInfo)}onPublishInfoChange(e,t){for(const n of this.publishInfoEditComponents)n!==t.publishInfoEditComponent&&n.setPublishInfo(e);this.setPublishInfo(e),void 0!==e.publishDate&&(this.publishDate=e.publishDate,this.draft&&(this.draft.publishDate=e.publishDate)),void 0!==e.unpublishDate&&(this.unpublishDate=e.unpublishDate,this.draft&&(this.draft.unpublishDate=e.unpublishDate)),void 0!==e.endPinDate&&(this.endPinDate=e.endPinDate,this.draft&&(this.draft.endPinDate=e.endPinDate)),this.draft&&this.challengeDraftService.saveDraftDelayed(this.draft)}_nextStep(){return Object(a.a)(this,void 0,void 0,(function*(){const e=yield this._save();e.moderationResult&&(yield this.contentModerationInterstitial.trigger(this.routeData.contentHash,e.contentContextHash,e.moderationResult)),yield this.challengeDraftService.clearDraft(),this.contentEvents.emitContentFeedsUpdate(),this.challengesRouteService.returnFromChallenges()}))}nextStep(e){e&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()),this.rootService.addLoadingPromise(this._nextStep())}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](x.a),i["\u0275\u0275directiveInject"](M),i["\u0275\u0275directiveInject"](o.g),i["\u0275\u0275directiveInject"](o.a),i["\u0275\u0275directiveInject"](tt.a),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](nt.Challenge),i["\u0275\u0275directiveInject"](it.a),i["\u0275\u0275directiveInject"](dt),i["\u0275\u0275directiveInject"](gt.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ng-component"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:25,vars:4,consts:[[3,"overlayClose"],[1,"content"],[1,"publish-controls-container"],[1,"color-selector-title"],[3,"customColorList","color","colorChange"],["mgExpansionPanel","","expanded",""],[1,"mg-headline2"],[3,"publishInfoEditorComponentType","publishInfoEditComponentReady","publishInfoChange"],["publishInfoEditor",""],[3,"content","color",4,"ngIf"],[1,"left-footer-container",3,"click"],["icon","back"],[1,"back-btn"],[1,"right-footer-container"],["mgBubbleBtn","",1,"mg-bodycopy","next-button",3,"click"],[3,"content","color"]],template:function(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mg-challenge-overlay",0),i["\u0275\u0275listener"]("overlayClose",(function(){return t.onOverlayClose()})),i["\u0275\u0275elementStart"](1,"mg-challenge-overlay-title"),i["\u0275\u0275element"](2,"mg-challenge-logo"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div",1),i["\u0275\u0275elementStart"](4,"div",2),i["\u0275\u0275elementStart"](5,"p",3),i["\u0275\u0275text"](6,"Choose Your Challenge Color:"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"mg-color-select",4),i["\u0275\u0275listener"]("colorChange",(function(e){return t.onColorChange(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"mat-expansion-panel",5),i["\u0275\u0275elementStart"](9,"mat-expansion-panel-header"),i["\u0275\u0275elementStart"](10,"mat-panel-title",6),i["\u0275\u0275text"](11," Additional Publish Settings "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"mg-content-manager-publish-info-editor",7,8),i["\u0275\u0275listener"]("publishInfoEditComponentReady",(function(e){return t.onPublishInfoEditComponentReady(e)}))("publishInfoChange",(function(n){i["\u0275\u0275restoreView"](e);const o=i["\u0275\u0275reference"](13);return t.onPublishInfoChange(n,o)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](14,Ct,1,2,"mg-challenge-short-card",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](15,"mg-challenge-overlay-footer"),i["\u0275\u0275elementStart"](16,"div",10),i["\u0275\u0275listener"]("click",(function(){return t.onClickBack()})),i["\u0275\u0275elementStart"](17,"mg-button-icon",11),i["\u0275\u0275elementStart"](18,"span",12),i["\u0275\u0275text"](19,"Back"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](20,"div",13),i["\u0275\u0275elementStart"](21,"button",14),i["\u0275\u0275listener"]("click",(function(e){return t.nextStep(e)})),i["\u0275\u0275text"](22," Publish "),i["\u0275\u0275elementStart"](23,"mg-icon"),i["\u0275\u0275text"](24,"right-arrow-active"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](7),i["\u0275\u0275property"]("customColorList",t.colorList)("color",t.selectedColor),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("publishInfoEditorComponentType",t.publishInfoEditComponentType),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.loaded))},directives:[L,V,F,pt.a,mt.c,ht.a,mt.f,mt.g,ut.a,N.o,z,ee.a,R.a,ft.a],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");.title-text[_ngcontent-%COMP%]{margin-bottom:20px;font-family:Muli,sans-serif;line-height:1.35;margin-top:32px}@media (orientation:landscape){.title-text[_ngcontent-%COMP%]{font-size:6.8019323671vh}}@media (orientation:portrait){.title-text[_ngcontent-%COMP%]{font-size:6.8019323671vw}}@media (orientation:landscape) and (max-height:414px){.title-text[_ngcontent-%COMP%]{font-size:28.16px}}@media (orientation:portrait) and (max-width:414px){.title-text[_ngcontent-%COMP%]{font-size:28.16px}}@media (min-width:439.875px){.title-text[_ngcontent-%COMP%]{font-size:29.92px}}@media (max-width:1140px){.title-text[_ngcontent-%COMP%]{margin-top:16px}}.divider[_ngcontent-%COMP%]{width:165px;border-top:6px solid #b2b2b2;margin:auto}[_nghost-%COMP%]{--mg-form-input-border-width:1px}.padded-center-content[_ngcontent-%COMP%]{padding:0 10%}@media (max-width:1140px){.padded-center-content[_ngcontent-%COMP%]{padding:0}}.content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-around;flex-direction:row;flex-wrap:wrap;position:relative;text-align:center}.content[_ngcontent-%COMP%]   mg-challenge-short-card[_ngcontent-%COMP%]{max-width:510px;min-width:510px;margin:20px}@media (max-width:959px){.content[_ngcontent-%COMP%]   mg-challenge-short-card[_ngcontent-%COMP%]{min-width:unset}}@media (max-width:959px){.content[_ngcontent-%COMP%]{overflow-y:auto}}.publish-controls-container[_ngcontent-%COMP%]{height:100%;width:350px;overflow-y:auto;text-align:left}.publish-controls-container[_ngcontent-%COMP%]   .color-selector-title[_ngcontent-%COMP%]{font-weight:700;margin-left:10px}.publish-controls-container[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]{padding:0 16px;background:transparent}@media (max-width:1140px){.publish-controls-container[_ngcontent-%COMP%]{width:100%}}.next-button[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.8em 2.8em;border-radius:2.5em;cursor:pointer}@media (max-width:599px){.next-button[_ngcontent-%COMP%]{padding:.9em 1.5em;font-size:14px}}mg-button-icon[_ngcontent-%COMP%]     button{display:flex;align-items:center}mg-button-icon[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{margin-left:8px}'],changeDetection:0}),e})();var xt=n("Ji8J"),bt=n("LTfw"),yt=n("fy1K"),Pt=n("cOAp"),Ot=n("vjAc");let wt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[je.a,Ae,Te,Ot.a,xt.a,yt.a,Pt.a,bt.a,De.a,N.c,o.k,mt.b]]}),e})(),Mt=(()=>{class e extends v{constructor(e,t,n,i){super(e,t,i),this.router=e,this.route=t,this.challengesRouteService=n,this.challengeDraftService=i}onOverlayClose(){this.challengesRouteService.returnFromChallenges()}createPhotoChallenge(){return this.router.navigate(["challenge",...this.routeData.nextPath,"photo"])}createTextChallenge(){return this.router.navigate(["challenge",...this.routeData.nextPath,"text"])}createVideoChallenge(){return this.router.navigate(["challenge",...this.routeData.nextPath,"video"])}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](o.g),i["\u0275\u0275directiveInject"](o.a),i["\u0275\u0275directiveInject"](x.a),i["\u0275\u0275directiveInject"](M))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ng-component"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:43,vars:0,consts:[[3,"overlayClose"],[1,"content"],[1,"header"],[1,"title-text"],[1,"divider"],[1,"challenge-type-container"],[1,"challenge-type",3,"click"],[1,"image-container"],[1,"image","photo"],[1,"challenge-content"],[1,"challenge-icon","photo"],[1,"challenge-type-title","mg-headline2"],[1,"challenge-type-text","mg-smallcopy"],[1,"image","written"],[1,"challenge-icon","written"],[1,"challenge-type","disabled"],[1,"image","video"],[1,"challenge-icon","video"],[1,"left-footer-container",3,"click"],["icon","back"],[1,"back-btn"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mg-challenge-overlay",0),i["\u0275\u0275listener"]("overlayClose",(function(){return t.onOverlayClose()})),i["\u0275\u0275elementStart"](1,"mg-challenge-overlay-title"),i["\u0275\u0275element"](2,"mg-challenge-logo"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div",1),i["\u0275\u0275elementStart"](4,"div",2),i["\u0275\u0275elementStart"](5,"div",3),i["\u0275\u0275text"](6,"Choose a challenge type to get started."),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](7,"div",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"div",5),i["\u0275\u0275elementStart"](9,"div",6),i["\u0275\u0275listener"]("click",(function(){return t.createPhotoChallenge()})),i["\u0275\u0275elementStart"](10,"div",7),i["\u0275\u0275element"](11,"div",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"div",9),i["\u0275\u0275element"](13,"div",10),i["\u0275\u0275elementStart"](14,"div",11),i["\u0275\u0275text"](15,"Photo Challenge"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"div",12),i["\u0275\u0275text"](17," Challenge your students to submit a photo in their answer to your challenge. "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](18,"div",6),i["\u0275\u0275listener"]("click",(function(){return t.createTextChallenge()})),i["\u0275\u0275elementStart"](19,"div",7),i["\u0275\u0275element"](20,"div",13),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](21,"div",9),i["\u0275\u0275element"](22,"div",14),i["\u0275\u0275elementStart"](23,"div",11),i["\u0275\u0275text"](24,"Written Challenge"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](25,"div",12),i["\u0275\u0275text"](26," Your students will write their response. "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](27,"div",15),i["\u0275\u0275elementStart"](28,"div",7),i["\u0275\u0275element"](29,"div",16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](30,"div",9),i["\u0275\u0275element"](31,"div",17),i["\u0275\u0275elementStart"](32,"div",11),i["\u0275\u0275text"](33,"Video Challenge"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](34,"div",12),i["\u0275\u0275text"](35," Your students will answer this challenge with a video response. "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](36,"p",12),i["\u0275\u0275text"](37,"COMING SOON..."),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](38,"mg-challenge-overlay-footer"),i["\u0275\u0275elementStart"](39,"div",18),i["\u0275\u0275listener"]("click",(function(){return t.onOverlayClose()})),i["\u0275\u0275elementStart"](40,"mg-button-icon",19),i["\u0275\u0275elementStart"](41,"span",20),i["\u0275\u0275text"](42,"Back"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())},directives:[L,V,F,z,ee.a],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");.title-text[_ngcontent-%COMP%]{margin-bottom:20px;font-family:Muli,sans-serif;line-height:1.35;margin-top:32px}@media (orientation:landscape){.title-text[_ngcontent-%COMP%]{font-size:6.8019323671vh}}@media (orientation:portrait){.title-text[_ngcontent-%COMP%]{font-size:6.8019323671vw}}@media (orientation:landscape) and (max-height:414px){.title-text[_ngcontent-%COMP%]{font-size:28.16px}}@media (orientation:portrait) and (max-width:414px){.title-text[_ngcontent-%COMP%]{font-size:28.16px}}@media (min-width:439.875px){.title-text[_ngcontent-%COMP%]{font-size:29.92px}}@media (max-width:1140px){.title-text[_ngcontent-%COMP%]{margin-top:16px}}.divider[_ngcontent-%COMP%]{width:165px;border-top:6px solid #b2b2b2;margin:auto}[_nghost-%COMP%]{--mg-form-input-border-width:1px}.padded-center-content[_ngcontent-%COMP%]{padding:0 10%}@media (max-width:1140px){.padded-center-content[_ngcontent-%COMP%]{padding:0}}.content[_ngcontent-%COMP%]{height:100%;position:relative;text-align:center}.header[_ngcontent-%COMP%]{margin-bottom:40px}.header[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]{font-size:22px}@media (max-width:599px){.header[_ngcontent-%COMP%]{margin-bottom:20px}}.challenge-type-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;overflow-x:auto;max-width:100%;padding:0 16px 30px;box-sizing:border-box;justify-content:center}.challenge-type[_ngcontent-%COMP%]{width:308px;box-shadow:0 3px 6px rgba(0,0,0,.1607843137254902);flex-shrink:0;cursor:pointer;margin:15px 10px}.challenge-type[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{position:relative}.challenge-type[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]:after{content:"";background-color:#c66b83;opacity:.5;position:absolute;top:0;right:0;bottom:0;left:0}.challenge-type[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{background-size:cover;background-repeat:no-repeat;height:310px;width:100%}.challenge-type[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .image.photo[_ngcontent-%COMP%]{background-image:url(/assets/challenges/cc-photo.jpg)}.challenge-type[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .image.written[_ngcontent-%COMP%]{background-image:url(/assets/challenges/cc-written.jpg)}.challenge-type[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .image.video[_ngcontent-%COMP%]{background-image:url(/assets/challenges/cc-video.jpg)}.challenge-type[_ngcontent-%COMP%]   .challenge-content[_ngcontent-%COMP%]{position:relative;padding:50px 34px 34px;box-sizing:border-box}.challenge-type[_ngcontent-%COMP%]   .challenge-content[_ngcontent-%COMP%]   .challenge-icon[_ngcontent-%COMP%]{position:absolute;top:-22%;margin:auto;left:0;right:0}.challenge-type[_ngcontent-%COMP%]   .challenge-content[_ngcontent-%COMP%]   .challenge-type-text[_ngcontent-%COMP%]{color:#888;margin-top:10px}.challenge-type[_ngcontent-%COMP%]   .challenge-icon[_ngcontent-%COMP%]{width:84px;height:76px;background-repeat:no-repeat;background-size:contain}.challenge-type[_ngcontent-%COMP%]   .challenge-icon.photo[_ngcontent-%COMP%]{background-image:url(/assets/challenges/CC-Categories-Photo.png)}.challenge-type[_ngcontent-%COMP%]   .challenge-icon.written[_ngcontent-%COMP%]{background-image:url(/assets/challenges/CC-Categories-text.png)}.challenge-type[_ngcontent-%COMP%]   .challenge-icon.video[_ngcontent-%COMP%]{background-image:url(/assets/challenges/CC-Categories-Video.png)}.disabled[_ngcontent-%COMP%]{filter:brightness(50%)}mg-button-icon[_ngcontent-%COMP%]     button{display:flex;align-items:center}mg-button-icon[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{margin-left:8px}']}),e})(),_t=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[je.a,Ae,Te,De.a,N.c,o.k]]}),e})();var It=n("jtHE"),St=n("1G5W"),Et=n("zc8W"),Dt=n("lNAY"),kt=n("BxgO"),Tt=n("uplL"),Rt=n("gjtd"),jt=n("DobJ"),Bt=n("qftF"),At=n("sj4O");function Ht(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"mg-overlay-nav-item",3),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onClose()})),i["\u0275\u0275text"](2," Who has answered your challenge: "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function Vt(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mg-pill-checkbox",11),i["\u0275\u0275text"](1,"You"),i["\u0275\u0275elementEnd"]()),2&e&&i["\u0275\u0275property"]("disabled",!0)}function zt(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mg-pill-checkbox",11),i["\u0275\u0275text"](1,"Owner"),i["\u0275\u0275elementEnd"]()),2&e&&i["\u0275\u0275property"]("disabled",!0)}function Lt(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",6),i["\u0275\u0275element"](1,"mg-avatar",7),i["\u0275\u0275elementStart"](2,"div",8),i["\u0275\u0275element"](3,"mg-person-minimal",9),i["\u0275\u0275pipe"](4,"async"),i["\u0275\u0275template"](5,Vt,2,1,"mg-pill-checkbox",10),i["\u0275\u0275pipe"](6,"async"),i["\u0275\u0275template"](7,zt,2,1,"mg-pill-checkbox",10),i["\u0275\u0275pipe"](8,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("src",e.profileImageUrl)("color",e.badgeIconColor),i["\u0275\u0275advance"](2),i["\u0275\u0275classProp"]("has-pill",e.hash==i["\u0275\u0275pipeBind1"](4,7,n.currentUserHash$)),i["\u0275\u0275property"]("person",e),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",e.hash==i["\u0275\u0275pipeBind1"](6,9,n.currentUserHash$)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",e.hash==i["\u0275\u0275pipeBind1"](8,11,n.ownerUserHash$))}}function Ft(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div",4),i["\u0275\u0275template"](2,Lt,9,13,"div",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.ngIf;i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",e)}}function Nt(e,t){1&e&&i["\u0275\u0275element"](0,"mg-spinner")}let Ut=(()=>{class e{constructor(e,t,n,i){this.route=e,this._location=t,this.authInfo=n,this.peopleFacade=i,this._destroyed$=new It.a(1),e.params.pipe(Object(C.a)(e=>parseInt(e.id))),this.currentUserHash$=this.authInfo.authInfo$.pipe(Object(St.a)(this._destroyed$),Object(C.a)(e=>e&&e.person?e.person.personHash:""))}onClose(){this._location.back()}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](o.a),i["\u0275\u0275directiveInject"](N.k),i["\u0275\u0275directiveInject"](Et.a),i["\u0275\u0275directiveInject"](Dt.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-challenge-people-overlay"]],decls:5,vars:6,consts:[[4,"mgOverlayStructure","mgOverlayStructureRegion"],[4,"ngIf","ngIfElse"],["loadingTpl",""],["icon","close",1,"mg-align-left",3,"click"],[1,"person-list"],["fxLayout","row","fxLayoutAlign","start center","class","member-info",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center",1,"member-info"],[3,"src","color"],[1,"person-wrap"],[1,"no-wrap",3,"person"],["icon","","class","small self",3,"disabled",4,"ngIf"],["icon","",1,"small","self",3,"disabled"]],template:function(e,t){if(1&e&&(i["\u0275\u0275template"](0,Ht,3,0,"div",0),i["\u0275\u0275template"](1,Ft,3,1,"ng-container",1),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275template"](3,Nt,1,0,"ng-template",null,2,i["\u0275\u0275templateRefExtractor"])),2&e){const e=i["\u0275\u0275reference"](4);i["\u0275\u0275property"]("mgOverlayStructure",!0)("mgOverlayStructureRegion","top"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](2,4,t.participants$))("ngIfElse",e)}},directives:[kt.a,N.o,Tt.a,N.n,X.e,X.d,Rt.a,jt.a,Bt.a,At.a],pipes:[N.b],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");[_nghost-%COMP%]{background-color:#fff;display:block}.title[_ngcontent-%COMP%]{margin:24px 16px 16px;font-family:Muli,sans-serif;line-height:1.35}@media (orientation:landscape){.title[_ngcontent-%COMP%]{font-size:3.3816425121vh}}@media (orientation:portrait){.title[_ngcontent-%COMP%]{font-size:3.3816425121vw}}@media (orientation:landscape) and (max-height:414px){.title[_ngcontent-%COMP%]{font-size:14px}}@media (orientation:portrait) and (max-width:414px){.title[_ngcontent-%COMP%]{font-size:14px}}@media (min-width:439.875px){.title[_ngcontent-%COMP%]{font-size:14.875px}}@media (min-width:600px){.title[_ngcontent-%COMP%]{margin:32px 32px 16px}}.person-list[_ngcontent-%COMP%]{display:block;padding-bottom:32px;overflow:hidden}.member-info[_ngcontent-%COMP%]{--mg-avatar-size:30px;flex:1 1 90%;border-bottom:1px solid #ccc;margin:12px 0;display:flex;justify-content:space-between;align-items:center;padding-bottom:12px}@media (orientation:landscape){.member-info[_ngcontent-%COMP%]{padding-right:3.125vh}}@media (orientation:portrait){.member-info[_ngcontent-%COMP%]{padding-right:3.125vw}}@media (orientation:landscape) and (max-height:320px){.member-info[_ngcontent-%COMP%]{padding-right:10px}}@media (orientation:portrait) and (max-width:320px){.member-info[_ngcontent-%COMP%]{padding-right:10px}}@media (min-width:640px){.member-info[_ngcontent-%COMP%]{padding-right:20px}}@media (orientation:landscape){.member-info[_ngcontent-%COMP%]{padding-left:3.125vh}}@media (orientation:portrait){.member-info[_ngcontent-%COMP%]{padding-left:3.125vw}}@media (orientation:landscape) and (max-height:320px){.member-info[_ngcontent-%COMP%]{padding-left:10px}}@media (orientation:portrait) and (max-width:320px){.member-info[_ngcontent-%COMP%]{padding-left:10px}}@media (min-width:640px){.member-info[_ngcontent-%COMP%]{padding-left:20px}}.member-info[_ngcontent-%COMP%]   mg-avatar[_ngcontent-%COMP%]{margin-right:8px}.member-info[_ngcontent-%COMP%]   mg-person-minimal[_ngcontent-%COMP%]{display:inline-flex;align-items:center;max-width:100%}.member-info[_ngcontent-%COMP%]   mg-person-minimal.has-pill[_ngcontent-%COMP%]{max-width:82%}.member-info[_ngcontent-%COMP%]   mg-pill-checkbox[_ngcontent-%COMP%]{margin-left:8px}.member-info[_ngcontent-%COMP%]   .person-wrap[_ngcontent-%COMP%]{flex:1;flex-direction:row;display:flex;justify-content:flex-start;align-items:center;max-width:calc(100% - var(--mg-avatar-size))}']}),e})();var qt=n("gtkb"),Gt=n("fHWq"),$t=n("5VmK"),Qt=n("CL15"),Yt=n("7Tcv");let Jt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[Qt.a,Yt.a,Gt.a,$t.a,qt.a,N.c,Se.a]]}),e})();var Wt=n("gEWx"),Kt=n("EPnd"),Xt=n("ThxV"),Zt=n("cUpR"),en=n("F7jZ"),tn=n("2nPA"),nn=n("HQAS"),on=n("0cKA");let an=(()=>{class e{constructor(){this.setOuterContentVisibility=new i.EventEmitter,this.onCreateChallengeClick=new i.EventEmitter,this.onOverlayCloseClick=new i.EventEmitter}ngOnInit(){this.setOuterContentVisibility.emit(!1)}onOverlayClose(){this.onOverlayCloseClick.emit()}onNext(){this.onCreateChallengeClick.emit()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-challenge-responses-empty-state"]],outputs:{setOuterContentVisibility:"setOuterContentVisibility",onCreateChallengeClick:"onCreateChallengeClick",onOverlayCloseClick:"onOverlayCloseClick"},decls:9,vars:0,consts:[[1,"content"],[1,"challenge-icon-container"],[1,"challenge-icon","photo"],[1,"challenge-icon","written"],[1,"challenge-icon","video"],[1,"heading"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275element"](2,"div",2),i["\u0275\u0275element"](3,"div",3),i["\u0275\u0275element"](4,"div",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"div",5),i["\u0275\u0275text"](6," Come back here to review the "),i["\u0275\u0275element"](7,"br"),i["\u0275\u0275text"](8," results from your challenges! "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())},styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");.title-text[_ngcontent-%COMP%]{margin-bottom:20px;font-family:Muli,sans-serif;line-height:1.35;margin-top:32px}@media (orientation:landscape){.title-text[_ngcontent-%COMP%]{font-size:6.8019323671vh}}@media (orientation:portrait){.title-text[_ngcontent-%COMP%]{font-size:6.8019323671vw}}@media (orientation:landscape) and (max-height:414px){.title-text[_ngcontent-%COMP%]{font-size:28.16px}}@media (orientation:portrait) and (max-width:414px){.title-text[_ngcontent-%COMP%]{font-size:28.16px}}@media (min-width:439.875px){.title-text[_ngcontent-%COMP%]{font-size:29.92px}}@media (max-width:1140px){.title-text[_ngcontent-%COMP%]{margin-top:16px}}.divider[_ngcontent-%COMP%]{width:165px;border-top:6px solid #b2b2b2;margin:auto}[_nghost-%COMP%]{--mg-form-input-border-width:1px}.padded-center-content[_ngcontent-%COMP%]{padding:0 10%}@media (max-width:1140px){.padded-center-content[_ngcontent-%COMP%]{padding:0}}.content[_ngcontent-%COMP%]{margin-top:200px;display:flex;align-items:center;justify-content:center;flex-direction:column}.content[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font-size:26px;text-align:center}.content[_ngcontent-%COMP%]   .challenge-icon-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-bottom:30px}.content[_ngcontent-%COMP%]   .challenge-icon-container[_ngcontent-%COMP%]   .challenge-icon[_ngcontent-%COMP%]{width:84px;height:76px;background-repeat:no-repeat;background-size:contain;margin-left:10px;margin-right:10px}.content[_ngcontent-%COMP%]   .challenge-icon-container[_ngcontent-%COMP%]   .challenge-icon.photo[_ngcontent-%COMP%]{background-image:url(/assets/challenges/CC-Categories-Photo.png)}.content[_ngcontent-%COMP%]   .challenge-icon-container[_ngcontent-%COMP%]   .challenge-icon.written[_ngcontent-%COMP%]{background-image:url(/assets/challenges/CC-Categories-text.png)}.content[_ngcontent-%COMP%]   .challenge-icon-container[_ngcontent-%COMP%]   .challenge-icon.video[_ngcontent-%COMP%]{background-image:url(/assets/challenges/CC-Categories-Video.png)}']}),e})();var ln=n("cXmD"),rn=n("vJwY"),sn=n("IheW"),cn=n("fA8H"),dn=n("jcBT"),gn=n("kCL4"),pn=n("rKY/"),mn=n("Jkk8"),hn=n("StFh");function un(e,t){1&e&&i["\u0275\u0275element"](0,"div",21)}function fn(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"mg-generic-button",22),i["\u0275\u0275listener"]("onClick",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().downloadChallengePhoto()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("isRounded",!1))}function Cn(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275element"](1,"mg-challenge-approval-controls",23),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("currentState",e.responseItem.approved)("contextHash",e.responseItem.contextHash)}}function vn(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",2),i["\u0275\u0275element"](1,"mg-challenge-approval-controls",23),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("currentState",e.responseItem.approved)("contextHash",e.responseItem.contextHash)}}let xn=(()=>{class e{constructor(e){this.httpService=e,this.responseItem={contentHash:"",contextHash:"",body:"",ownerContextHash:"",grade:"",likeCount:0,commentCount:0,approved:h.ChallengeApprovalState.PENDING},this.hideApprovalButtons=!1,this.setOuterContentVisibility=new i.EventEmitter,this.responseClicked=new i.EventEmitter,this.approved=new i.EventEmitter,this.declined=new i.EventEmitter,this.imageSizes=["cardbanner"]}ngOnInit(){this.setOuterContentVisibility.emit(!0)}isPending(){return this.responseItem.approved==h.ChallengeApprovalState.PENDING}getResponsedDate(e){return e?new Date(e.year,e.month-1,e.day).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric"}):""}onApproved(e){this.approved.emit(e)}onDeclined(e){this.declined.emit(e)}downloadChallengePhoto(){return Object(a.a)(this,void 0,void 0,(function*(){const e=this.responseItem.featuredImage.sizeMap[this.responseItem.featuredImage.sizeMap.length-1][1].path,t=window.MINGA_ASSET_URL_PREFIX+e;yield this.httpService.get(t,{responseType:"arraybuffer"}).subscribe(n=>{let i=t.indexOf("."),o=t.substring(i+1),a=new Blob([n],{type:"image/"+o});Object(rn.a)(a,e.substring(4))})}))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](sn.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-challenge-responses-admin-page-item"]],inputs:{responseItem:"responseItem",hideApprovalButtons:"hideApprovalButtons"},outputs:{setOuterContentVisibility:"setOuterContentVisibility",responseClicked:"responseClicked",approved:"approved",declined:"declined"},decls:37,vars:24,consts:[[1,"item",3,"mgContentContextMenu"],["class","pending-indicator",4,"ngIf"],[1,"item-mobile"],[1,"author-avatar",3,"src","color"],[1,"info-container"],[1,"light-text","response-text",3,"innerHTML"],[1,"inline-items"],[1,"column-item","short-item"],[1,"response-preview",3,"srcs"],[4,"ngIf"],[1,"column-item","long-item","item-desktop"],[1,"person-name"],[1,"response-text",3,"innerHTML"],[1,"column-item","short-item","date-text"],[1,"column-item","short-item","like-comment"],["fxLayout","row"],[1,"like-icon"],[1,"like-count"],[1,"comment-icon"],[1,"comment-count"],["class","item-mobile",4,"ngIf"],[1,"pending-indicator"],["colorTheme","navy","paddingSize","none","size","large","variant","clear","iconLeft","download-o",3,"isRounded","onClick"],[3,"currentState","contextHash"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,un,1,0,"div",1),i["\u0275\u0275elementStart"](2,"div",2),i["\u0275\u0275element"](3,"mg-avatar",3),i["\u0275\u0275elementStart"](4,"div",4),i["\u0275\u0275elementStart"](5,"div"),i["\u0275\u0275text"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](7,"div",5),i["\u0275\u0275pipe"](8,"mgSafeHtml"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"div",6),i["\u0275\u0275elementStart"](10,"div",7),i["\u0275\u0275element"](11,"mg-image",8),i["\u0275\u0275pipe"](12,"mgImageUrls"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](13,fn,2,1,"ng-container",9),i["\u0275\u0275elementStart"](14,"div",10),i["\u0275\u0275element"](15,"mg-avatar",3),i["\u0275\u0275elementStart"](16,"div",4),i["\u0275\u0275elementStart"](17,"div",11),i["\u0275\u0275text"](18),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](19,"div",12),i["\u0275\u0275pipe"](20,"mgSafeHtml"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](21,"div",13),i["\u0275\u0275text"](22),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](23,"div",14),i["\u0275\u0275elementStart"](24,"div",15),i["\u0275\u0275elementStart"](25,"mg-icon",16),i["\u0275\u0275text"](26,"like-active"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](27,"div",17),i["\u0275\u0275text"](28),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](29,"div",15),i["\u0275\u0275elementStart"](30,"mg-icon",18),i["\u0275\u0275text"](31,"comment-active"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](32,"div",19),i["\u0275\u0275text"](33),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](34,"div",10),i["\u0275\u0275template"](35,Cn,2,2,"ng-container",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](36,vn,2,2,"div",20),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("mgContentContextMenu",t.responseItem.contextHash),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.isPending()),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("src",null==t.responseItem.authorPersonView?null:t.responseItem.authorPersonView.profileImageUrl)("color",null==t.responseItem.authorPersonView?null:t.responseItem.authorPersonView.badgeIconColor),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](null==t.responseItem.authorPersonView?null:t.responseItem.authorPersonView.displayName),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("innerHTML",i["\u0275\u0275pipeBind1"](8,17,t.responseItem.body),i["\u0275\u0275sanitizeHtml"]),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("srcs",i["\u0275\u0275pipeBind2"](12,19,t.responseItem.featuredImage,t.imageSizes)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.responseItem.featuredImage),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("src",null==t.responseItem.authorPersonView?null:t.responseItem.authorPersonView.profileImageUrl)("color",null==t.responseItem.authorPersonView?null:t.responseItem.authorPersonView.badgeIconColor),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",null==t.responseItem.authorPersonView?null:t.responseItem.authorPersonView.displayName," "),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("innerHTML",i["\u0275\u0275pipeBind1"](20,22,t.responseItem.body),i["\u0275\u0275sanitizeHtml"]),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",t.getResponsedDate(t.responseItem.publishDate)," "),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate"](t.responseItem.likeCount),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](t.responseItem.commentCount),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!t.hideApprovalButtons),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.hideApprovalButtons))},directives:[cn.a,N.o,Rt.a,dn.a,X.e,R.a,gn.a,pn.a],pipes:[mn.a,hn.a],styles:[".item[_ngcontent-%COMP%]{width:100%;background-color:#fff;border:none;box-shadow:3px 3px 10px #ccc;border-radius:5px}@media (min-width:740px){.item[_ngcontent-%COMP%]{border-radius:5px;padding:8px}}.pending-indicator[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:1em;background-color:#c66b6b;position:relative;left:98%;top:-12px}@media (min-width:1140px){.pending-indicator[_ngcontent-%COMP%]{left:100%}}.inline-items[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;justify-content:center}@media (max-width:740px){.inline-items[_ngcontent-%COMP%]{margin:15px 0}}.column-item[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:0 5px}.short-item[_ngcontent-%COMP%]{width:14%}@media (max-width:740px){.short-item[_ngcontent-%COMP%]{width:33.3%}}.long-item[_ngcontent-%COMP%]{width:29%}.author-avatar[_ngcontent-%COMP%]{--mg-avatar-size:35px;margin:0 10px}@media (max-width:740px){.author-avatar[_ngcontent-%COMP%]{--mg-avatar-size:50px;margin:5px}}.item-mobile[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:8px 0}@media (min-width:741px){.item-mobile[_ngcontent-%COMP%]{display:none}}@media (max-width:740px){.item-desktop[_ngcontent-%COMP%]{display:none}}.response-preview[_ngcontent-%COMP%]{height:65px;width:90px}.info-container[_ngcontent-%COMP%]{width:80%;margin:auto 0;text-align:left}.person-name[_ngcontent-%COMP%]{font-size:15px;font-weight:700}.response-text[_ngcontent-%COMP%]{font-size:15px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:grey}.date-text[_ngcontent-%COMP%]{font-size:15px;font-weight:600}.like-comment[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly;margin-left:5px}.like-icon[_ngcontent-%COMP%]{color:#c66b83}.comment-icon[_ngcontent-%COMP%], .like-icon[_ngcontent-%COMP%]{font-weight:600;margin:0 4px}.comment-icon[_ngcontent-%COMP%]{color:#1c2f59}.like-count[_ngcontent-%COMP%]{color:#c66b83}.comment-count[_ngcontent-%COMP%]{color:#1c2f59}.assess-button[_ngcontent-%COMP%]{width:110px;border-radius:2em;padding:0 10px;margin:0 2px;--mg-button-color:transparent;--mg-button-padding-vert:9px}.assess-button-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-size:15px;color:#fff}.assess-button-content[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff}.approve-button[_ngcontent-%COMP%]{background:linear-gradient(#92bdad,#619e85)}.decline-button[_ngcontent-%COMP%]{background:linear-gradient(#c75f5f,#9b4141)}"],changeDetection:0}),e})();function bn(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",14),i["\u0275\u0275elementStart"](1,"div",15),i["\u0275\u0275text"](2,"Challenge Responses"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](3,"div",16),i["\u0275\u0275elementEnd"]())}function yn(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mg-button-clear",19),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const n=t.$implicit;return i["\u0275\u0275nextContext"](2).setFilter(n.state)})),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275classProp"]("selected-filter",e.state===n.filterToState),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.label," ")}}function Pn(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",17),i["\u0275\u0275template"](1,yn,2,3,"mg-button-clear",18),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",e.filterOptions)}}function On(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",22),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e," ")}}function wn(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",20),i["\u0275\u0275template"](1,On,2,1,"div",21),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",e.headerLabels)}}function Mn(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",23),i["\u0275\u0275elementStart"](1,"mg-challenge-responses-admin-page-item",24),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const n=t.itemId;return i["\u0275\u0275nextContext"]().onClickResponse(n)}))("setOuterContentVisibility",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().setOuterContentVisibility(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("responseItem",e)("hideApprovalButtons",!n.requiresApproval)}}function _n(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",25),i["\u0275\u0275elementStart"](1,"div",26),i["\u0275\u0275text"](2," Engage your Minga Community!"),i["\u0275\u0275element"](3,"br"),i["\u0275\u0275text"](4,"Create a new challenge for your students. "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"button",27),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onCreateChallengeClick()})),i["\u0275\u0275text"](6," Create a Challenge "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}let In=(()=>{class e{constructor(e,t,n,i,o,a,l,r){this.challengesRouteService=e,this.contentInfoService=t,this.route=n,this.responseProto=i,this.router=o,this.sanitizer=a,this.contentState=l,this._cdr=r,this.contentContextHash="",this.responses=[],this.isVisible=!0,this.requiresApproval=!1,this.filterToState=h.ChallengeApprovalState.PENDING,this.filterOptions=[{label:"All",state:null},{label:"Approved",state:h.ChallengeApprovalState.APPROVED},{label:"Declined",state:h.ChallengeApprovalState.DENIED},{label:"Pending",state:h.ChallengeApprovalState.PENDING}],this.headerLabels=["Respond Date","Likes/Comments"],this._routeParamSub=n.params.subscribe(e=>{this.contentContextHash=e.id,this.getChallenge()})}get feedFilter(){return this.requiresApproval?{"templateData.authorPersonView.personHash":"",contentType:"CHALLENGE",ownerContextHash:this.contentContextHash,approved:this.filterToState}:{"templateData.authorPersonView.personHash":"",contentType:"CHALLENGE",ownerContextHash:this.contentContextHash}}ngOnDestroy(){this._routeParamSub&&(this._routeParamSub.unsubscribe(),delete this._routeParamSub)}getSafeStyle(e,t){return this.sanitizer.bypassSecurityTrustStyle(`${e}: `+t)}onCreateChallengeClick(){this.challengesRouteService.gotoCreate("m",null,!1)}getChallenge(){return Object(a.a)(this,void 0,void 0,(function*(){this.feedFilter.ownerContextHash=this.contentContextHash,this.challenge=yield this.contentInfoService.getContentInfoByContext(this.contentContextHash),this.challenge.requiresApproval&&(this.requiresApproval=this.challenge.requiresApproval,this._cdr.detectChanges())}))}onOverlayClose(){return Object(a.a)(this,void 0,void 0,(function*(){this.challengesRouteService.returnFromChallenges()}))}onClickResponse(e){return Object(a.a)(this,void 0,void 0,(function*(){this.contentState.setStateValue(this.contentContextHash,"responseContextHash",e),this.contentState.setStateValue(this.contentContextHash,"responseStreamState",this.filterToState?Object(Wt.$enum)(h.ChallengeApprovalState).asValueOrDefault(this.filterToState,h.ChallengeApprovalState.PENDING):"ALL"),yield this.router.navigate(["",{outlets:{o:["view",this.contentContextHash]}}])}))}onClickBack(){this.challengesRouteService.gotoAdminSummary()}getAvatarClutsterItems(e){const t=[];for(let n of e)if(t.push({src:n.author_person_view.profileImageUrl,color:n.author_person_view.badgeIconColor}),3==t.length)break;return t}getPeopleResponsesText(e){let t="";for(let n=0;n<e.length&&3!=n;n++)t+=e[n].personView.displayName,n+2<e.length?t+=", ":n+1<e.length&&(t+=" and ");return t+=" have answered",t}setFilter(e){this.filterToState=e||null}setOuterContentVisibility(e){this.isVisible=e}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](x.a),i["\u0275\u0275directiveInject"](Kt.a),i["\u0275\u0275directiveInject"](o.a),i["\u0275\u0275directiveInject"](Xt.ChallengeResponse),i["\u0275\u0275directiveInject"](o.g),i["\u0275\u0275directiveInject"](Zt.b),i["\u0275\u0275directiveInject"](en.a),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ng-component"]],decls:18,vars:7,consts:[[3,"overlayClose"],[1,"content","padded-center-content"],["class","header-content",4,"ngIf"],["class","filter-options",4,"ngIf"],["class","response-list-header",4,"ngIf"],[1,"body-content"],["mgStreamControl","challengesAdminResponsesFeed","rpcStream","streamResponsesAdmin","rpcControl","streamResponsesAdminControl",3,"filter","service","mgTrimmed"],["streamScroller",""],["mgStreamItem",""],["mg-stream-empty","",3,"setOuterContentVisibility","onCreateChallengeClick","onOverlayCloseClick"],[1,"left-footer-container",3,"click"],["icon","back"],[1,"back-btn"],["class","right-footer-container",4,"ngIf"],[1,"header-content"],[1,"title-text"],[1,"divider"],[1,"filter-options"],[3,"selected-filter","click",4,"ngFor","ngForOf"],[3,"click"],[1,"response-list-header"],["class","response-list-label",4,"ngFor","ngForOf"],[1,"response-list-label"],[1,"challenge"],[3,"responseItem","hideApprovalButtons","click","setOuterContentVisibility"],[1,"right-footer-container"],[1,"footer-title"],["mgBubbleBtn","",1,"mg-bodycopy","next-button",3,"click"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mg-challenge-overlay",0),i["\u0275\u0275listener"]("overlayClose",(function(){return t.onOverlayClose()})),i["\u0275\u0275elementStart"](1,"mg-challenge-overlay-title"),i["\u0275\u0275element"](2,"mg-challenge-logo"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div",1),i["\u0275\u0275template"](4,bn,4,0,"div",2),i["\u0275\u0275template"](5,Pn,2,1,"div",3),i["\u0275\u0275template"](6,wn,2,1,"div",4),i["\u0275\u0275elementStart"](7,"div",5),i["\u0275\u0275elementStart"](8,"mg-stream-scroller",6,7),i["\u0275\u0275template"](10,Mn,2,2,"ng-template",8),i["\u0275\u0275elementStart"](11,"mg-challenge-responses-empty-state",9),i["\u0275\u0275listener"]("setOuterContentVisibility",(function(e){return t.setOuterContentVisibility(e)}))("onCreateChallengeClick",(function(){return t.onCreateChallengeClick()}))("onOverlayCloseClick",(function(){return t.onOverlayClose()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"mg-challenge-overlay-footer"),i["\u0275\u0275elementStart"](13,"div",10),i["\u0275\u0275listener"]("click",(function(){return t.onClickBack()})),i["\u0275\u0275elementStart"](14,"mg-button-icon",11),i["\u0275\u0275elementStart"](15,"span",12),i["\u0275\u0275text"](16,"Back"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](17,_n,7,0,"div",13),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",t.isVisible),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.requiresApproval),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.isVisible),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("filter",t.feedFilter)("service",t.responseProto)("mgTrimmed",!0),i["\u0275\u0275advance"](9),i["\u0275\u0275property"]("ngIf",!t.isVisible))},directives:[L,V,F,N.o,tn.a,nn.a,on.a,an,z,ee.a,N.n,ln.a,xn],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");.title-text[_ngcontent-%COMP%]{margin-bottom:20px;font-family:Muli,sans-serif;line-height:1.35;margin-top:32px}@media (orientation:landscape){.title-text[_ngcontent-%COMP%]{font-size:6.8019323671vh}}@media (orientation:portrait){.title-text[_ngcontent-%COMP%]{font-size:6.8019323671vw}}@media (orientation:landscape) and (max-height:414px){.title-text[_ngcontent-%COMP%]{font-size:28.16px}}@media (orientation:portrait) and (max-width:414px){.title-text[_ngcontent-%COMP%]{font-size:28.16px}}@media (min-width:439.875px){.title-text[_ngcontent-%COMP%]{font-size:29.92px}}@media (max-width:1140px){.title-text[_ngcontent-%COMP%]{margin-top:16px}}.divider[_ngcontent-%COMP%]{width:165px;border-top:6px solid #b2b2b2;margin:auto}[_nghost-%COMP%]{--mg-form-input-border-width:1px}.padded-center-content[_ngcontent-%COMP%]{padding:0 10%}@media (max-width:1140px){.padded-center-content[_ngcontent-%COMP%]{padding:0}}.content[_ngcontent-%COMP%]{height:85%;flex-direction:column;position:relative;text-align:center}.header-content[_ngcontent-%COMP%]{margin-bottom:20px}@media (max-width:1140px){.header-content[_ngcontent-%COMP%]{margin-bottom:16px}}.filter-options[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;color:#1c2f59;margin-bottom:15px}.filter-options[_ngcontent-%COMP%]   mg-button-clear[_ngcontent-%COMP%]   mg-button[_ngcontent-%COMP%]{--mg-button-padding-vert:5px}@media (max-width:599px){.filter-options[_ngcontent-%COMP%]{justify-content:center}}.selected-filter[_ngcontent-%COMP%]{font-weight:600;border-bottom:4px solid #1c2f59}.response-list-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;margin-left:45%}@media (max-width:599px){.response-list-header[_ngcontent-%COMP%]{margin-left:35%}}.response-list-label[_ngcontent-%COMP%]{width:20%;font-size:14px;margin:0 8px}@media (max-width:599px){.response-list-label[_ngcontent-%COMP%]{width:35%;font-size:12px}}.body-content[_ngcontent-%COMP%]{display:block}mg-button-icon[_ngcontent-%COMP%]     button{display:flex;align-items:center}mg-button-icon[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{margin-left:8px}.right-footer-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap}.right-footer-container[_ngcontent-%COMP%]   .footer-title[_ngcontent-%COMP%]{text-align:center;margin-right:10px}@media (max-width:599px){.right-footer-container[_ngcontent-%COMP%]   .footer-title[_ngcontent-%COMP%]{font-size:11px}}.right-footer-container[_ngcontent-%COMP%]   .next-button[_ngcontent-%COMP%]{padding:1em;border-radius:2.5em}@media (max-width:599px){.right-footer-container[_ngcontent-%COMP%]   .next-button[_ngcontent-%COMP%]{padding:0 1em;font-size:14px}}'],changeDetection:0}),e})();var Sn=n("Tj54"),En=n("OLhe"),Dn=n("NjBC"),kn=n("ugqS"),Tn=n("PRFu"),Rn=n("gU2t");let jn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[kn.a,$e.b,Rn.a,Tn.a,Gt.a,De.a,je.a,Dn.a,Fe.a,En.a,N.c,Sn.b,Se.a]]}),e})();var Bn=n("oQsg");let An=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[De.a,Bn.b,Ge.b,je.a,Ae,Te,N.c,o.k]]}),e})();var Hn=n("CuZz"),Vn=n("NG9B"),zn=n("m9yI");let Ln=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[De.a,Ge.b,je.a,Ae,$e.b,Te,Le.a,zn.b,Hn.a,Vn.a,jn,Be.a,An,N.c,o.k,le.c]]}),e})();var Fn=n("TxG7");let Nn=(()=>{class e{constructor(){this.setOuterContentVisibility=new i.EventEmitter,this.onCreateChallengeClick=new i.EventEmitter,this.onOverlayCloseClick=new i.EventEmitter}ngOnInit(){this.setOuterContentVisibility.emit(!1)}onOverlayClose(){this.onOverlayCloseClick.emit()}onNext(){this.onCreateChallengeClick.emit()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-challenges-summary-empty-state"]],outputs:{setOuterContentVisibility:"setOuterContentVisibility",onCreateChallengeClick:"onCreateChallengeClick",onOverlayCloseClick:"onOverlayCloseClick"},decls:9,vars:0,consts:[[1,"content"],[1,"title-text","mg-cta"],["mgBubbleBtn","",1,"mg-headline",3,"click"],[1,"flag"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275text"](2," Engage your Minga Community!"),i["\u0275\u0275element"](3,"br"),i["\u0275\u0275text"](4,"Create a new challenge for your students. "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"button",2),i["\u0275\u0275listener"]("click",(function(){return t.onNext()})),i["\u0275\u0275text"](6," Create Your First Challenge "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"mg-icon",3),i["\u0275\u0275text"](8,"flag-icon"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())},directives:[R.a],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");.title-text[_ngcontent-%COMP%]{margin-bottom:20px;font-family:Muli,sans-serif;line-height:1.35;margin-top:32px}@media (orientation:landscape){.title-text[_ngcontent-%COMP%]{font-size:6.8019323671vh}}@media (orientation:portrait){.title-text[_ngcontent-%COMP%]{font-size:6.8019323671vw}}@media (orientation:landscape) and (max-height:414px){.title-text[_ngcontent-%COMP%]{font-size:28.16px}}@media (orientation:portrait) and (max-width:414px){.title-text[_ngcontent-%COMP%]{font-size:28.16px}}@media (min-width:439.875px){.title-text[_ngcontent-%COMP%]{font-size:29.92px}}@media (max-width:1140px){.title-text[_ngcontent-%COMP%]{margin-top:16px}}.divider[_ngcontent-%COMP%]{width:165px;border-top:6px solid #b2b2b2;margin:auto}[_nghost-%COMP%]{--mg-form-input-border-width:1px}.padded-center-content[_ngcontent-%COMP%]{padding:0 10%}@media (max-width:1140px){.padded-center-content[_ngcontent-%COMP%]{padding:0}}.content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;flex-direction:column;position:relative;text-align:center}.content[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]{margin-bottom:36px}.content[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(.flag-img){position:relative;z-index:1}.content[_ngcontent-%COMP%]   button[mgBubbleBtn][_ngcontent-%COMP%]{font-weight:400}.content[_ngcontent-%COMP%]   mg-icon.flag[_ngcontent-%COMP%]{position:absolute;left:50%;right:0;top:25%;color:#ecdde1;z-index:0;--mg-icon-size:400px}@media (min-width:959px){.content[_ngcontent-%COMP%]{margin-top:100px}}']}),e})();var Un=n("tfgo");function qn(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mg-icon",11),i["\u0275\u0275text"](1,"star-active"),i["\u0275\u0275elementEnd"]())}function Gn(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"span",12),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" /",null==e.challengeItem?null:e.challengeItem.invitePeopleCount," ")}}function $n(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",1),i["\u0275\u0275element"](1,"div",2),i["\u0275\u0275pipe"](2,"mgSafeHtml"),i["\u0275\u0275elementStart"](3,"div",3),i["\u0275\u0275element"](4,"mg-image",4),i["\u0275\u0275pipe"](5,"mgImageUrls"),i["\u0275\u0275element"](6,"div",5),i["\u0275\u0275pipe"](7,"mgSafeHtml"),i["\u0275\u0275elementStart"](8,"div",6),i["\u0275\u0275text"](9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"div",6),i["\u0275\u0275text"](11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"div",6),i["\u0275\u0275template"](13,qn,2,0,"mg-icon",7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"div",8),i["\u0275\u0275listener"]("click",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().invitesClick.emit(t)})),i["\u0275\u0275elementStart"](15,"span",9),i["\u0275\u0275text"](16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](17,Gn,2,1,"span",10),i["\u0275\u0275elementStart"](18,"div"),i["\u0275\u0275text"](19),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("innerHTML",i["\u0275\u0275pipeBind1"](2,9,e.challengeItem.title),i["\u0275\u0275sanitizeHtml"]),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("srcs",i["\u0275\u0275pipeBind2"](5,11,e.challengeItem.featuredImage,e.imageSizes)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("innerHTML",i["\u0275\u0275pipeBind1"](7,14,e.challengeItem.title),i["\u0275\u0275sanitizeHtml"]),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",e.challengeItem.respondedPeopleCount," "),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",e.getChallengeDueDate(e.challengeItem.dueDate)," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",e.dueDate.getTime()>=e.currentDate.getTime()),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",e.challengeItem.inviteResponseCount||0," "),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.challengeItem.invitePeopleCount),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",e.challengeItem.invitePeopleCount?"Responded":"Invited"," ")}}let Qn=(()=>{class e{constructor(e){this.challengeInvitesService=e,this._challengeItem=null,this.challengeContextHash="",this.setOuterContentVisibility=new i.EventEmitter,this.invitesClick=new i.EventEmitter,this.imageSizes=["cardbanner"],this.currentDate=new Date,this.dueDate=new Date,this._challengeInviteEventSub=this.challengeInvitesService.onChallengeInviteSuccess.subscribe(e=>{e.challengeContextHash==this.challengeContextHash&&this._challengeItem&&(void 0!==e.inviteResponseCount&&(this._challengeItem.inviteResponseCount=e.inviteResponseCount),void 0!==e.invitePeopleCount&&(this._challengeItem.invitePeopleCount=e.invitePeopleCount))})}get challengeItem(){return this._challengeItem}set challengeItem(e){e&&(this._challengeItem={featuredImage:e.featuredImage,title:e.title,respondedPeopleCount:e.respondedPeopleCount,dueDate:e.dueDate,inviteResponseCount:e.inviteResponseCount||0,invitePeopleCount:e.invitePeopleCount||0},this._challengeItem.dueDate&&(this.dueDate=Object(We.a)(this._challengeItem.dueDate)),this.setOuterContentVisibility.emit(!0))}ngOnDestroy(){this._challengeInviteEventSub.unsubscribe()}getChallengeDueDate(e){return e?new Date(e.year,e.month-1,e.day).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric"}).toUpperCase():""}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](Un.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-challenges-summary-admin-page-item"]],inputs:{challengeContextHash:"challengeContextHash",challengeItem:"challengeItem"},outputs:{setOuterContentVisibility:"setOuterContentVisibility",invitesClick:"invitesClick"},decls:1,vars:1,consts:[["class","item",4,"ngIf"],[1,"item"],[1,"title-mobile",3,"innerHTML"],[1,"inline-items"],[1,"image",3,"srcs"],[1,"item-column","item-desktop","title-text",3,"innerHTML"],[1,"item-column"],["class","active-star",4,"ngIf"],[1,"item-column",3,"click"],[1,"invite-response-count"],["class","invite-total-count",4,"ngIf"],[1,"active-star"],[1,"invite-total-count"]],template:function(e,t){1&e&&i["\u0275\u0275template"](0,$n,20,16,"div",0),2&e&&i["\u0275\u0275property"]("ngIf",t.challengeItem)},directives:[N.o,dn.a,R.a],pipes:[mn.a,hn.a],styles:[".item[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #d8d8d8;border-radius:5px;cursor:pointer;box-shadow:0 2px 5px rgba(0,0,0,.2)}@media (max-width:599px){.item[_ngcontent-%COMP%]{border-radius:5px}}.inline-items[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center}.item-column[_ngcontent-%COMP%]{flex:1 0 15%;font-weight:700}@media (max-width:599px){.item-column[_ngcontent-%COMP%]{font-size:14px;margin-right:2px;font-weight:400}}.image[_ngcontent-%COMP%]{flex:1 0 22%;height:60px;margin:5px 20px 5px 5px;border-radius:5px}@media (max-width:599px){.image[_ngcontent-%COMP%]{margin:1px 2px 1px 1px;border-radius:2px}}.title-mobile[_ngcontent-%COMP%]{text-align:left;padding-left:20px;border-bottom:1px solid grey}@media (min-width:600px){.title-mobile[_ngcontent-%COMP%]{display:none}}@media (max-width:599px){.item-desktop[_ngcontent-%COMP%]{display:none}}.title-mobile[_ngcontent-%COMP%], .title-text[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;text-align:left}@media (min-width:599px){.title-mobile[_ngcontent-%COMP%], .title-text[_ngcontent-%COMP%]{width:250px}}.active-star[_ngcontent-%COMP%]{--mg-icon-size:30px;color:#70b2d7}"],changeDetection:0}),e})();function Yn(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",9),i["\u0275\u0275elementStart"](1,"div",10),i["\u0275\u0275text"](2,"Your Challenges"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](3,"div",11),i["\u0275\u0275elementEnd"]())}function Jn(e,t){1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275element"](1,"img",17),i["\u0275\u0275elementContainerEnd"]())}function Wn(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275text"](1),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e," ")}}function Kn(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",16),i["\u0275\u0275template"](1,Jn,2,0,"ng-container",8),i["\u0275\u0275template"](2,Wn,2,1,"ng-container",8),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","invite-image"==e),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","invite-image"!=e)}}function Xn(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",12),i["\u0275\u0275element"](1,"div",13),i["\u0275\u0275element"](2,"div",14),i["\u0275\u0275template"](3,Kn,3,2,"div",15),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngForOf",e.headerLabels)}}function Zn(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mg-challenges-summary-admin-page-item",20),i["\u0275\u0275listener"]("setOuterContentVisibility",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).setOuterContentVisibility(t)}))("invitesClick",(function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275nextContext"]().itemId;return i["\u0275\u0275nextContext"]().onInvitesClick(t)})),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](),t=e.$implicit;i["\u0275\u0275property"]("challengeContextHash",e.itemId)("challengeItem",t.shortChallengeCard)}}function ei(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",18),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const n=t.itemId;return i["\u0275\u0275nextContext"]().onClickChallenge(n)})),i["\u0275\u0275template"](1,Zn,1,2,"mg-challenges-summary-admin-page-item",19),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.shortChallengeCard)}}function ti(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mg-challenge-overlay-footer"),i["\u0275\u0275element"](1,"div",21),i["\u0275\u0275elementStart"](2,"div",22),i["\u0275\u0275elementStart"](3,"p"),i["\u0275\u0275text"](4," Engage your Minga Community! Create a new challenge for your school. "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"button",23),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onCreateChallengeClick()})),i["\u0275\u0275text"](6," Create New "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}let ni=(()=>{class e{constructor(e,t,n,i,o){this.challengesRouteService=e,this.contentFeed=t,this.sanitizer=n,this.router=i,this._peopleSelector=o,this.selectedChallengeId="",this.emptyStateIcons=[{icon:"post",text:"Add"},{icon:"challenges-o",text:"Challenge"}],this.feedFilter={filterByCurrentUser:!0,contentType:"CHALLENGE"},this.headerLabels=["Responses","Date","Active","invite-image"],this.isVisible=!0}onCreateChallengeClick(){this.challengesRouteService.gotoCreate("m",null,!1)}onOverlayClose(){return Object(a.a)(this,void 0,void 0,(function*(){this.challengesRouteService.returnFromChallenges()}))}onClickChallenge(e){this.selectedChallengeId=e,this.challengesRouteService.gotoAdminResponses(e)}setOuterContentVisibility(e){this.isVisible=e}onInvitesClick(e){this._peopleSelector.open("Challenge","invited",{title:"Challenge Invites",data:{contextHash:e}})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](x.a),i["\u0275\u0275directiveInject"](Fn.ContentFeed),i["\u0275\u0275directiveInject"](Zt.b),i["\u0275\u0275directiveInject"](o.g),i["\u0275\u0275directiveInject"](at.PeopleSelectorService))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ng-component"]],decls:11,vars:6,consts:[[3,"overlayClose"],[1,"content","padded-center-content"],["class","header-content",4,"ngIf"],["class","challenge-list-header",4,"ngIf"],[1,"body-content"],["mgStreamControl","challengesPersonalFeed","rpcStream","streamContentFeed","rpcControl","streamContentFeedControl",3,"filter","service","mgTrimmed"],["mgStreamItem",""],["mg-stream-empty","",3,"setOuterContentVisibility","onCreateChallengeClick","onOverlayCloseClick"],[4,"ngIf"],[1,"header-content"],[1,"title-text"],[1,"divider"],[1,"challenge-list-header"],[1,"challenge-list-label-image-fill"],[1,"challenge-list-label","title"],["class","challenge-list-label",4,"ngFor","ngForOf"],[1,"challenge-list-label"],["src","assets/event/event-invited.svg",1,"invite-icon-header"],[1,"challenge",3,"click"],[3,"challengeContextHash","challengeItem","setOuterContentVisibility","invitesClick",4,"ngIf"],[3,"challengeContextHash","challengeItem","setOuterContentVisibility","invitesClick"],[1,"left-footer-container"],[1,"right-footer-container"],["mgBubbleBtn","",1,"next-button",3,"click"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mg-challenge-overlay",0),i["\u0275\u0275listener"]("overlayClose",(function(){return t.onOverlayClose()})),i["\u0275\u0275elementStart"](1,"mg-challenge-overlay-title"),i["\u0275\u0275element"](2,"mg-challenge-logo"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div",1),i["\u0275\u0275template"](4,Yn,4,0,"div",2),i["\u0275\u0275template"](5,Xn,4,1,"div",3),i["\u0275\u0275elementStart"](6,"div",4),i["\u0275\u0275elementStart"](7,"mg-stream-scroller",5),i["\u0275\u0275template"](8,ei,2,1,"ng-template",6),i["\u0275\u0275elementStart"](9,"mg-challenges-summary-empty-state",7),i["\u0275\u0275listener"]("setOuterContentVisibility",(function(e){return t.setOuterContentVisibility(e)}))("onCreateChallengeClick",(function(){return t.onCreateChallengeClick()}))("onOverlayCloseClick",(function(){return t.onOverlayClose()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](10,ti,7,0,"mg-challenge-overlay-footer",8),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",t.isVisible),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.isVisible),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("filter",t.feedFilter)("service",t.contentFeed)("mgTrimmed",!0),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",t.isVisible))},directives:[L,V,F,N.o,tn.a,nn.a,on.a,Nn,N.n,Qn,z],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");.title-text[_ngcontent-%COMP%]{margin-bottom:20px;font-family:Muli,sans-serif;line-height:1.35;margin-top:32px}@media (orientation:landscape){.title-text[_ngcontent-%COMP%]{font-size:6.8019323671vh}}@media (orientation:portrait){.title-text[_ngcontent-%COMP%]{font-size:6.8019323671vw}}@media (orientation:landscape) and (max-height:414px){.title-text[_ngcontent-%COMP%]{font-size:28.16px}}@media (orientation:portrait) and (max-width:414px){.title-text[_ngcontent-%COMP%]{font-size:28.16px}}@media (min-width:439.875px){.title-text[_ngcontent-%COMP%]{font-size:29.92px}}@media (max-width:1140px){.title-text[_ngcontent-%COMP%]{margin-top:16px}}.divider[_ngcontent-%COMP%]{width:165px;border-top:6px solid #b2b2b2;margin:auto}[_nghost-%COMP%]{--mg-form-input-border-width:1px}.padded-center-content[_ngcontent-%COMP%]{padding:0 10%}@media (max-width:1140px){.padded-center-content[_ngcontent-%COMP%]{padding:0}}.content[_ngcontent-%COMP%]{flex-direction:column;position:relative;text-align:center}.next-button[_ngcontent-%COMP%]{padding:0 2.5em;border-radius:2.5em;margin-left:10px;cursor:pointer;font-size:17px}@media (max-width:599px){.next-button[_ngcontent-%COMP%]{font-size:14px}}.header-content[_ngcontent-%COMP%]{margin-bottom:30px}@media (max-width:1140px){.header-content[_ngcontent-%COMP%]{margin-bottom:16px}}.body-content[_ngcontent-%COMP%]{display:block;height:80%}@media (max-width:1140px){.body-content[_ngcontent-%COMP%]{height:90%}}.challenge-list-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;margin-bottom:6px;align-items:center}.challenge-list-label-image-fill[_ngcontent-%COMP%]{flex:1 0 22%;margin-left:5px;margin-right:20px}@media (max-width:599px){.challenge-list-label-image-fill[_ngcontent-%COMP%]{margin-left:1px;margin-right:2px}}.challenge-list-label[_ngcontent-%COMP%]{color:#b2b2b2;flex:1 0 15%}@media (max-width:599px){.challenge-list-label[_ngcontent-%COMP%]{font-size:12px}.challenge-list-label.title[_ngcontent-%COMP%]{display:none}}.right-footer-container[_ngcontent-%COMP%]{display:flex;flex-direction:row}@media (max-width:599px){.right-footer-container[_ngcontent-%COMP%]{font-size:11px}}.invite-icon-header[_ngcontent-%COMP%]{width:28px}']}),e})(),ii=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[kn.a,$e.b,je.a,N.c]]}),e})(),oi=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[De.a,Bn.b,Ge.b,je.a,Ae,Te,N.c,o.k]]}),e})(),ai=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[De.a,Ge.b,je.a,Ae,$e.b,Te,Le.a,zn.b,Vn.a,oi,ii,Be.a,N.c,o.k,le.c]]}),e})();function li(e){return{path:e.path,component:e.component,resolve:{routeData:d},data:{nextPath:e.nextPath,previousPath:e.previousPath,contentManagerType:e.contentManager,title:e.title,type:e.type}}}function ri(e,t){return[{path:`${e}`,children:[li({path:"create/type",component:Mt,contentManager:t,previousPath:"",nextPath:"create",title:"Create A Challenge"}),li({path:"create/photo",component:Ie,contentManager:t,previousPath:"create/type",nextPath:"create/preview",title:"Create a Photo Challenge",type:h.ChallengeType.IMAGE}),li({path:"create/video",component:Ie,contentManager:t,previousPath:"create/type",nextPath:"create/preview",title:"Create a Video Challenge",type:h.ChallengeType.VIDEO}),li({path:"create/text",component:Ie,contentManager:t,previousPath:"create/type",nextPath:"create/preview",title:"Create a Text Challenge",type:h.ChallengeType.TEXT}),li({path:"create/preview",component:vt,contentManager:t,previousPath:"create",nextPath:"",title:"Preview your changes"}),li({path:"edit/content/:contentHash",component:Ie,contentManager:t,previousPath:"",nextPath:"edit/preview/:contentHash",title:"Edit Your Challenge"}),li({path:"edit/preview/:contentHash",component:vt,contentManager:t,previousPath:"edit/content/:contentHash",nextPath:"",title:"Preview your changes"}),li({path:"edit/content/:contentHash/:contextHash",component:Ie,contentManager:t,previousPath:"",nextPath:"edit/preview/:contentHash/:contextHash"}),li({path:"edit/preview/:contentHash/:contextHash",component:vt,contentManager:t,previousPath:"edit/content/:contentHash/:contextHash"})]}]}const si=[{path:"",pathMatch:"full",redirectTo:"m/create/landing"},{path:"admin/summary",component:ni},{outlet:"o",path:"challenge~people/:id",component:Ut},{path:"admin/responses/:id",component:In},...ri("m",p.a),...ri("g/:groupHash",g.a),...ri("p/:programHash",m.a)];let ci=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[_t,Je,p.b,g.b,wt,ai,Jt,Ln,u.a,ii,jn,oi,f.a,An,o.k.forChild(si)]]}),e})()}}]);
//# sourceMappingURL=minga-app-src-app-challenge-route-ChallengeRoutes-module-es2015.js.map
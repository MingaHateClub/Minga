(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{IPaV:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("mrSG"),o=n("8Y7J"),a=n("QPZY"),r=n("mI3D"),s=n("ypKM"),l=n("Tcc+");let c=(()=>{class e{constructor(e,t){this.errorReporter=e,this.analytics=t}sendErrorReport(e,t,n=0){return Object(i.a)(this,void 0,void 0,(function*(){let i=new r.ErrorReportRequest,o=new r.ErrorReportResponse;console.log("GRPCErrorReportRequest: ",i),console.log("GRPCErrorReportResponse: ",o),this.analytics.sendException(`[${e}]: ${t}`,n),i.setErrorPriority(n),i.setErrorMessage(t),i.setErrorContext(e),o=yield this.errorReporter.sendErrorReport(i).catch(e=>{console.error("[ErrorReporter] sendErrorReport error",e);let t=new r.ErrorReportResponse;return t.setStatus(a.StatusCode.ERROR),t}),console.log("Error Response Status:",o.getStatus()),console.log("Error Response error_handler_override:",o.getErrorHandlerOverride())}))}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275inject"](s.ErrorReporter),o["\u0275\u0275inject"](l.a))},e.\u0275prov=o["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},dcfX:function(e,t,n){"use strict";n.r(t),n.d(t,"StudentIdRoutesModule",(function(){return pa}));var i=n("8Y7J"),o=n("iInd"),a=n("mrSG"),r=n("vJwY"),s=n("Cnb3"),l=n("2Vo4"),c=n("jtHE"),d=n("1G5W"),m=n("Kj3r"),g=n("lJxs"),p=n("L75u"),u=n("OgRi"),h=n("jNxq");let f=(()=>{class e extends p.a{constructor(e,t){super(t),this.studentIdService=e,this.limit=20,this.offset=0,this.threshold=5,this.streamName="studentIdManagerFeed"}ngOnDestroy(){}_fetch(){return Object(a.a)(this,void 0,void 0,(function*(){if(this.reachedEnd)return;const e=yield this.studentIdService.getMingaStudentIds(this.limit,this.offset,this.filter);this.addNewItems(e)}))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](u.a),i["\u0275\u0275inject"](h.a))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})();var C=n("lkjj"),x=n("GFah"),v=n("vYPr"),b=n("UWMR"),S=n("Vwx4"),_=n("QWb5"),I=n("3qIc"),O=n("VDRc"),E=n("SVse"),y=n("Uork"),M=n("OeN6"),P=n("05dM"),w=n("sj4O"),T=n("1nQu"),k=n("4YA2"),L=n("Q2Ze"),A=n("i1AJ"),N=n("ZTz/"),D=n("s7LF"),F=n("UhP/"),R=n("LvDl"),U=n("LQlJ"),j=n("IeKC"),B=n("mI3D"),G=function(e){return e.CHANGE_PHOTO="Change Your Photo",e.NO_PHOTO="No Photo",e.GRADE="Grade",e.ACTIVE="Active",e.INACTIVE="Inactive",e.TEMPORARY_PHOTO="Temp Photo",e.PRINT_ID="Print ID",e}({}),V=n("/q54"),H=n("/YXT"),z=n("IPaV"),$=n("IheW"),q=n("Fudl"),W=n("e6WT");function K(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function Y(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function Z(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function J(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function Q(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",22),i["\u0275\u0275template"](1,J,1,0,"ng-container",17),i["\u0275\u0275elementEnd"]()),2&e){i["\u0275\u0275nextContext"](2);const e=i["\u0275\u0275reference"](10);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",e)}}function X(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function ee(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function te(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function ne(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function ie(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div",15),i["\u0275\u0275elementStart"](2,"div",16),i["\u0275\u0275template"](3,K,1,0,"ng-container",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"div",18),i["\u0275\u0275template"](5,Y,1,0,"ng-container",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"div",18),i["\u0275\u0275template"](7,Z,1,0,"ng-container",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](8,Q,2,1,"div",19),i["\u0275\u0275elementStart"](9,"div",20),i["\u0275\u0275template"](10,X,1,0,"ng-container",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"div",20),i["\u0275\u0275template"](12,ee,1,0,"ng-container",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"div",21),i["\u0275\u0275template"](14,te,1,0,"ng-container",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](15,"div",16),i["\u0275\u0275template"](16,ne,1,0,"ng-container",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](),t=i["\u0275\u0275reference"](4),n=i["\u0275\u0275reference"](6),o=i["\u0275\u0275reference"](8),a=i["\u0275\u0275reference"](14),r=i["\u0275\u0275reference"](12),s=i["\u0275\u0275reference"](16),l=i["\u0275\u0275reference"](28);i["\u0275\u0275advance"](1),i["\u0275\u0275classProp"]("input-disabled",e.disable),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngTemplateOutlet",t),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngTemplateOutlet",n),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngTemplateOutlet",o),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.showIdNum),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngTemplateOutlet",a),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngTemplateOutlet",r),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngTemplateOutlet",s),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngTemplateOutlet",l)}}function oe(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function ae(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function re(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function se(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function le(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275template"](1,se,1,0,"ng-container",17),i["\u0275\u0275elementEnd"]()),2&e){i["\u0275\u0275nextContext"](2);const e=i["\u0275\u0275reference"](10);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",e)}}function ce(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function de(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function me(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function ge(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function pe(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",23),i["\u0275\u0275elementStart"](1,"div",24),i["\u0275\u0275template"](2,oe,1,0,"ng-container",17),i["\u0275\u0275elementStart"](3,"div",25),i["\u0275\u0275template"](4,ae,1,0,"ng-container",17),i["\u0275\u0275template"](5,re,1,0,"ng-container",17),i["\u0275\u0275template"](6,le,2,1,"div",26),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"div",27),i["\u0275\u0275template"](8,ce,1,0,"ng-container",17),i["\u0275\u0275template"](9,de,1,0,"ng-container",17),i["\u0275\u0275template"](10,me,1,0,"ng-container",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"div",28),i["\u0275\u0275template"](12,ge,1,0,"ng-container",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](),t=i["\u0275\u0275reference"](4),n=i["\u0275\u0275reference"](6),o=i["\u0275\u0275reference"](8),a=i["\u0275\u0275reference"](12),r=i["\u0275\u0275reference"](14),s=i["\u0275\u0275reference"](28),l=i["\u0275\u0275reference"](16);i["\u0275\u0275classProp"]("input-disabled",e.disable),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngTemplateOutlet",t),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngTemplateOutlet",n),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",o),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.showIdNum),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngTemplateOutlet",a),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",r),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",s),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngTemplateOutlet",l)}}function ue(e,t){1&e&&i["\u0275\u0275element"](0,"div",34)}function he(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",35),i["\u0275\u0275element"](1,"img",36),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("src",e.studentId.image,i["\u0275\u0275sanitizeUrl"])}}function fe(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",37),i["\u0275\u0275elementStart"](1,"mg-icon",38),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).downloadIdImage()})),i["\u0275\u0275text"](2,"download-o"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function Ce(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",29),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().changeStudentIdImage()})),i["\u0275\u0275template"](1,ue,1,0,"div",30),i["\u0275\u0275template"](2,he,2,1,"div",31),i["\u0275\u0275elementStart"](3,"div",32),i["\u0275\u0275elementStart"](4,"span"),i["\u0275\u0275text"](5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](6,fe,3,0,"div",33)}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!e.studentId.image),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.studentId.image),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](e.MESSAGES.CHANGE_PHOTO),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.canDownloadImage&&e.studentId.image)}}function xe(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-form-field",39),i["\u0275\u0275elementStart"](1,"input",40),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().firstName=t}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onFirstNameChange(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("readonly",e.disable)("required",!0)("ngModel",e.firstName)}}function ve(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-form-field",39),i["\u0275\u0275elementStart"](1,"input",41),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().lastName=t}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onLastNameChange(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("readonly",e.disable)("required",!0)("ngModel",e.lastName)}}function be(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-form-field",42),i["\u0275\u0275elementStart"](1,"input",43,44),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().studentIdNumber=t}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onStudentIdChange(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("readonly",e.disable)("ngModel",e.studentIdNumber)}}function Se(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",45),i["\u0275\u0275element"](1,"span",46),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275styleProp"]("background-image","url("+e.studentId.badgeIconUrl+")")}}function _e(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.MESSAGES.GRADE," ")}}function Ie(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"span",47),i["\u0275\u0275template"](1,_e,2,1,"span",26),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275classProp"]("not-avail",!e.studentId.grade),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.isOnMobile),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.studentId.grade||"N/A"," ")}}function Oe(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function Ee(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function ye(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function Me(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function Pe(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function we(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div",49),i["\u0275\u0275template"](2,Oe,1,0,"ng-container",17),i["\u0275\u0275template"](3,Ee,1,0,"ng-container",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"div",49),i["\u0275\u0275template"](5,ye,1,0,"ng-container",17),i["\u0275\u0275template"](6,Me,1,0,"ng-container",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"div",49),i["\u0275\u0275template"](8,Pe,1,0,"ng-container",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()),2&e){i["\u0275\u0275nextContext"](2);const e=i["\u0275\u0275reference"](18),t=i["\u0275\u0275reference"](20),n=i["\u0275\u0275reference"](24),o=i["\u0275\u0275reference"](26),a=i["\u0275\u0275reference"](22);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngTemplateOutlet",e),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",t),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngTemplateOutlet",n),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",o),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngTemplateOutlet",a)}}function Te(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function ke(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function Le(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function Ae(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function Ne(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function De(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,Te,1,0,"ng-container",17),i["\u0275\u0275template"](2,ke,1,0,"ng-container",17),i["\u0275\u0275template"](3,Le,1,0,"ng-container",17),i["\u0275\u0275template"](4,Ae,1,0,"ng-container",17),i["\u0275\u0275template"](5,Ne,1,0,"ng-container",17),i["\u0275\u0275elementContainerEnd"]()),2&e){i["\u0275\u0275nextContext"](2);const e=i["\u0275\u0275reference"](18),t=i["\u0275\u0275reference"](20),n=i["\u0275\u0275reference"](22),o=i["\u0275\u0275reference"](24),a=i["\u0275\u0275reference"](26);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",e),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",t),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",n),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",o),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",a)}}function Fe(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",48),i["\u0275\u0275template"](1,we,9,5,"ng-container",26),i["\u0275\u0275template"](2,De,6,5,"ng-container",26),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.isOnMobile),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!e.isOnMobile)}}function Re(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",50),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().setActive()})),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275classProp"]("disabled",!e.studentId.active),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.MESSAGES.ACTIVE," ")}}function Ue(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",51),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().toggleTemp()})),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275classProp"]("disabled",!e.studentId.tempPhoto),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.MESSAGES.TEMPORARY_PHOTO," ")}}function je(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",52),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().togglePrintId()})),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275classProp"]("disabled",!e.studentId.printId),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.MESSAGES.PRINT_ID," ")}}function Be(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",53),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().setInactive()})),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275classProp"]("disabled",e.studentId.active),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.MESSAGES.INACTIVE," ")}}function Ge(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",54),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275classProp"]("disabled",!e.noPhoto),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.MESSAGES.NO_PHOTO," ")}}function Ve(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",55),i["\u0275\u0275elementStart"](1,"div",56),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().launchStudentIdView()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}let He=(()=>{class e{constructor(e,t,n,o,a,r,s,g,p,u){this.media=e,this.studentIdService=t,this.snackBar=n,this.idUploaderDialog=o,this.studentIdImageService=a,this.errorReporting=r,this._cdr=s,this.router=g,this.permissions=p,this.httpService=u,this.firstName="",this.lastName="",this.studentIdNumber="",this._firstNameText$=new l.a(""),this._lastNameText$=new l.a(""),this._studentIdNumberText$=new l.a(""),this._destroyed$=new c.a(1),this.mqAlias="",this.isOnMobile=!0,this.mobileBreakpoints=U.a,this.disable=!1,this.showIdNum=!0,this.canDownloadImage=!1,this.itemChange=new i.EventEmitter,this.pictureChange=new i.EventEmitter,this.MESSAGES=G,this.printPermission=!1,e.asObservable().pipe(Object(d.a)(this._destroyed$)).subscribe(e=>{this.isOnMobile=!!this.mobileBreakpoints.includes(e[0].mqAlias),this._cdr.markForCheck()}),this._firstNameText$.pipe(Object(d.a)(this._destroyed$),Object(m.a)(500)).subscribe(e=>{this._studentId&&this._orginalStudentId&&e&&(this._studentId.firstName=e,this.emitItemChange())}),this._lastNameText$.pipe(Object(d.a)(this._destroyed$),Object(m.a)(500)).subscribe(e=>{this._studentId&&this._orginalStudentId&&e&&(this._studentId.lastName=e,this.emitItemChange())}),this._studentIdNumberText$.pipe(Object(d.a)(this._destroyed$),Object(m.a)(500)).subscribe(e=>{this._studentId&&this._orginalStudentId&&this.studentIdNumber==e&&e!=this._orginalStudentId.studentIdNumber&&(this._studentId.studentIdNumber=e,this.emitItemChange())})}set studentIdResponse(e){this._orginalStudentId=void 0,this._handleStudentIdResponse(e)}get studentId(){return this._studentId}get noPhoto(){return!this.studentId||!this.studentId.tempPhoto&&!this.studentId.image&&!this.studentId.fileName}ngOnInit(){this.printPermission=this.permissions.hasPermission(s.MingaPermission.ADMINISTER_STUDENT_ID)}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}emitItemChange(){if(!this.disable&&this._studentId&&this._orginalStudentId){const e=Object.entries(this._studentId);let t={personHash:this._studentId.personHash,image:this._studentId.image};const n=["personHash","image"],i=[];for(const[o,a]of e)R.isEqual(this._orginalStudentId[o],a)||n.includes(o)||(t[o]=a,i.push(o));if(i.length){this.itemChange.emit(t);for(const e of i)this._orginalStudentId[e]=this._studentId[e]}}}setActive(){this.disable||this.studentId&&(this.studentId.active=!0,this.emitItemChange())}setInactive(){this.disable||this.studentId&&(this.studentId.active=!1,this.emitItemChange())}toggleTemp(){this.disable||this.studentId&&(this.studentId.fileName||this.studentId.image?(this.studentId.tempPhoto=!this.studentId.tempPhoto,this.emitItemChange()):this.snackBar.open("Cannot set as temporary photo without a photo"))}togglePrintId(){this.disable||this.studentId&&(this.studentId.printId=!this.studentId.printId,this.emitItemChange())}onFirstNameChange(e){this.disable||this._firstNameText$.next(e)}onLastNameChange(e){this.disable||this._lastNameText$.next(e)}onStudentIdChange(e){this.disable||this._studentIdNumberText$.next(e)}changeStudentIdImage(){var e;return Object(a.a)(this,void 0,void 0,(function*(){if(this.disable)return;this.disable=!0;let t="";(null===(e=this._studentId)||void 0===e?void 0:e.fileName)&&(t=yield this.studentIdImageService.getFilePathToStudentIdImage(this.studentId.fileName,j.b.RAW)),this._studentId&&this.idUploaderDialog.open({data:{personHash:this._studentId.personHash,currentImage:t||this._studentId.image}}).afterClosed().subscribe(e=>{e&&(e.deleteImage&&this._studentId?(this.studentIdService.deleteStudentIdImage(this._studentId.personHash),this._studentId.fileName=void 0,this._studentId.image="",this._studentId.noPhoto=!0,this._studentId.tempPhoto=!1,this._cdr.markForCheck(),this.emitItemChange()):e.fileName&&this._studentId&&(this._studentId.fileName||(this._studentId.tempPhoto=!0),this._studentId.fileName=e.fileName,e.previewUrl&&(this._studentId.image=e.previewUrl),this._cdr.markForCheck(),this.emitItemChange()))}),this.disable=!1}))}launchStudentIdView(){var e,t;(null===(e=this._studentId)||void 0===e?void 0:e.personHash)&&this.router.navigate(["",{outlets:{o:["student-id",null===(t=this._studentId)||void 0===t?void 0:t.personHash,!0]}}],{})}_handleStudentIdResponse(e){return Object(a.a)(this,void 0,void 0,(function*(){if(this._studentId={personHash:e.personHash||"",image:"",studentIdNumber:e.studentIdNumber||"",grade:e.grade||"",name:e.name||"",firstName:e.firstName||"",lastName:e.lastName||"",fileName:e.fileName||"",active:!!e.active,tempPhoto:!!e.tempPhoto,printId:!!e.printId,roleType:e.roleType||"",badgeIconUrl:e.badgeIconUrl||""},this.firstName=this._studentId.firstName||"",this.lastName=this._studentId.lastName||"",this.studentIdNumber=this._studentId.studentIdNumber||"",!this._studentId.image&&this._studentId.fileName)try{this._studentId.image=yield this.studentIdImageService.getFilePathToStudentIdImage(this._studentId.fileName,j.b.AVATAR)}catch(t){console.error("[StudentIdManagerCardComponent] error occurred while getting file path for student id image: ",t),yield this.errorReporting.sendErrorReport("client student-id-manage-card.component","error occurred while getting file path for student id image",B.errorPriority.WARN)}this._orginalStudentId=R.cloneDeep(this._studentId),this._cdr.markForCheck()}))}downloadIdImage(){return Object(a.a)(this,void 0,void 0,(function*(){if(!this.studentId.fileName)return;const e=yield this.studentIdImageService.getFilePathToStudentIdImage(this.studentId.fileName,j.b.RAW);yield this.httpService.get(e,{responseType:"arraybuffer"}).subscribe(e=>{var t=this.studentId.fileName.indexOf(".");if(-1==t)return!1;var n=this.studentId.fileName.substr(t+1);let i=new Blob([e],{type:"image/"+n});Object(r.a)(i,this.studentId.studentIdNumber+"."+n,"image/"+n)})}))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](V.g),i["\u0275\u0275directiveInject"](u.a),i["\u0275\u0275directiveInject"](b.b),i["\u0275\u0275directiveInject"](H.b),i["\u0275\u0275directiveInject"](j.a),i["\u0275\u0275directiveInject"](z.a),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](o.g),i["\u0275\u0275directiveInject"](S.c),i["\u0275\u0275directiveInject"]($.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-student-id-manage-card"]],inputs:{studentIdResponse:"studentIdResponse",disable:"disable",showIdNum:"showIdNum",canDownloadImage:"canDownloadImage"},outputs:{itemChange:"itemChange",pictureChange:"pictureChange"},decls:29,vars:2,consts:[[4,"ngIf","ngIfElse"],["mobileLayoutTpl",""],["imageTpl",""],["firstNameTpl",""],["lastNameTpl",""],["idNumberTpl",""],["roleTpl",""],["gradeTpl",""],["statusTpl",""],["statusActiveTpl",""],["statusTempPhotoTpl",""],["statusPrintIdTpl",""],["statusInactiveTpl",""],["statusNoPhotoTpl",""],["viewIdTpl",""],["fxLayout","row","fxLayoutGap","25px",1,"item-card"],["fxFlex","7"],[4,"ngTemplateOutlet"],["fxFlex","14"],["fxFlex","12",4,"ngIf"],["fxFlex","5"],["fxFlex","25"],["fxFlex","12"],["fxLayout","column","fxLayoutGap","15px",1,"item-card"],["fxLayout","row"],[1,"mobile-inputs-container"],[4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-around center"],[1,"status-row"],["fxLayoutAlign","center center",1,"image-input-container",3,"click"],["class","image",4,"ngIf"],["class","image filled",4,"ngIf"],["fxLayoutAlign","center center",1,"change-image"],["class","download-image","fxLayoutAlign","center center",4,"ngIf"],[1,"image"],[1,"image","filled"],[3,"src"],["fxLayoutAlign","center center",1,"download-image"],[3,"click"],["mgFormField","","hideRequiredMarker","","mgNoHintMargin","true","appearance","outline"],["type","text","matInput","","name","firstName","minlength","1","maxlength","25",3,"readonly","required","ngModel","ngModelChange"],["type","text","matInput","","name","lastName","minlength","1","maxlength","25",3,"readonly","required","ngModel","ngModelChange"],["mgFormField","","hideOptionalMarker","","mgNoHintMargin","true","appearance","outline"],["matInput","","type","text","name","idNumber","maxlength","20",3,"readonly","ngModel","ngModelChange"],["idNumber","ngModel"],[1,"role-grade-container"],[1,"badge-img"],["fxLayout","column","fxLayoutAlign","center",1,"grade-text"],[1,"status-container"],[1,"status-item-row"],[1,"status-item","active",3,"click"],[1,"status-item","temp-photo",3,"click"],[1,"status-item","print-id",3,"click"],[1,"status-item","inactive",3,"click"],[1,"status-item","no-photo"],[1,"view-id-button-container"],[1,"view-id-button",3,"click"]],template:function(e,t){if(1&e&&(i["\u0275\u0275template"](0,ie,17,10,"ng-container",0),i["\u0275\u0275template"](1,pe,13,10,"ng-template",null,1,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](3,Ce,7,4,"ng-template",null,2,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](5,xe,2,3,"ng-template",null,3,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](7,ve,2,3,"ng-template",null,4,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](9,be,3,2,"ng-template",null,5,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](11,Se,2,2,"ng-template",null,6,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](13,Ie,3,4,"ng-template",null,7,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](15,Fe,3,2,"ng-template",null,8,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](17,Re,2,3,"ng-template",null,9,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](19,Ue,2,3,"ng-template",null,10,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](21,je,2,3,"ng-template",null,11,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](23,Be,2,3,"ng-template",null,12,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](25,Ge,2,3,"ng-template",null,13,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](27,Ve,2,0,"ng-template",null,14,i["\u0275\u0275templateRefExtractor"])),2&e){const e=i["\u0275\u0275reference"](2);i["\u0275\u0275property"]("ngIf",!t.isOnMobile)("ngIfElse",e)}},directives:[E.o,O.e,O.f,O.b,E.t,O.d,q.a,L.d,A.a,W.b,D.d,D.o,D.n,D.B,D.t,D.w],styles:[".item-card[_ngcontent-%COMP%]{display:block;font-weight:700;background-color:#fff;padding:12px;margin-bottom:10px;align-items:center;border:1px solid #ccc;border-radius:5px;box-shadow:0 0 6px rgba(0,0,0,.15);text-align:center;min-height:118px}.item-card[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%}@media print,screen and (max-width:59.99875em){.item-card[_ngcontent-%COMP%]{width:100%;padding:18px 20px}}.mobile-inputs-container[_ngcontent-%COMP%]{flex-grow:1;margin-left:8px;width:100%;overflow:hidden}.mobile-inputs-container[_ngcontent-%COMP%]   .name-input-container[_ngcontent-%COMP%]{margin-bottom:2px}.status-row[_ngcontent-%COMP%]{border-top:2px solid #f4f4f4;text-align:center}.status-row[_ngcontent-%COMP%]   .status-title-text[_ngcontent-%COMP%]{color:#b2b2b2;font-weight:400;margin:8.5px auto 4px}.download-image[_ngcontent-%COMP%]{padding-top:5px}.download-image[_ngcontent-%COMP%]:hover{cursor:pointer}@media print,screen and (max-width:37.49875em){.download-image[_ngcontent-%COMP%]{display:none!important}}.image-input-container[_ngcontent-%COMP%]{display:inline-flex;position:relative}.image-input-container[_ngcontent-%COMP%] > .image[_ngcontent-%COMP%]{width:60px;height:65px}@media print,screen and (max-width:59.99875em){.image-input-container[_ngcontent-%COMP%] > .image[_ngcontent-%COMP%]{width:102px;height:90px}}.image-input-container[_ngcontent-%COMP%] > .image[_ngcontent-%COMP%]:not(.filled){background-size:100%;background-repeat:no-repeat;background-image:url(/assets/student-id/placeholder-profile-pic.png);background-position:50%;border-radius:4px}@media print,screen and (max-width:59.99875em){.image-input-container[_ngcontent-%COMP%] > .image[_ngcontent-%COMP%]:not(.filled){background-size:100%}}.image-input-container[_ngcontent-%COMP%] > .image[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{max-height:100%;max-width:100%;image-orientation:from-image}.image-input-container[_ngcontent-%COMP%]   .change-image[_ngcontent-%COMP%]{display:flex;position:absolute;top:0;bottom:0;left:0;right:0;background-color:rgba(0,0,0,.35);opacity:0;cursor:pointer;transition:opacity .3s ease-in-out;font-size:12px;color:#fff;text-align:center;border-radius:4px}.image-input-container[_ngcontent-%COMP%]   .change-image[_ngcontent-%COMP%]:hover{opacity:1}mat-form-field[_ngcontent-%COMP%]{--mg-form-input-outline-color:#609fc9;--mg-form-field-height:40px}.grade-text[_ngcontent-%COMP%]{display:inline-flex}@media print,screen and (max-width:59.99875em){.grade-text[_ngcontent-%COMP%]{font-size:13px}}.grade-text.not-avail[_ngcontent-%COMP%]{color:#e2e2e2}.status-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:30% 30% 30%;justify-content:center;row-gap:10px;column-gap:10px}@media print,screen and (max-width:79.99875em){.status-container[_ngcontent-%COMP%]{grid-template-columns:45% 45%;max-width:232px;margin:auto;justify-content:center}}@media print,screen and (max-width:59.99875em){.status-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-width:232px;margin:18px auto 0;justify-content:center}.status-container[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]{width:110px}.status-container[_ngcontent-%COMP%]   .status-item-row[_ngcontent-%COMP%] > .status-item[_ngcontent-%COMP%]:first-child{margin-right:10px}}.status-item[_ngcontent-%COMP%]{display:inline-flex;max-width:110px;min-width:80px;height:30px;font-size:.7647058824rem;color:#fff;justify-content:center;align-items:center;border-radius:8px;cursor:pointer}.status-item[_ngcontent-%COMP%], .status-item.disabled[_ngcontent-%COMP%]{background-color:#e2e2e2}.status-item.disabled[_ngcontent-%COMP%]:hover, .status-item[_ngcontent-%COMP%]:hover{background-color:#c9c9c9}.status-item.active[_ngcontent-%COMP%]:not(.disabled){background-color:#99baad}.status-item.active[_ngcontent-%COMP%]:not(.disabled):hover{background-color:#b7cfc5}.status-item.inactive[_ngcontent-%COMP%]:not(.disabled){background-color:#4d6bbf}.status-item.inactive[_ngcontent-%COMP%]:not(.disabled):hover{background-color:#738acc}.status-item.no-photo[_ngcontent-%COMP%]:not(.disabled){background-color:#755a9f}.status-item.no-photo[_ngcontent-%COMP%]:not(.disabled):hover{background-color:#9079b3}.status-item.temp-photo[_ngcontent-%COMP%]:not(.disabled){background-color:#609fc9}.status-item.temp-photo[_ngcontent-%COMP%]:not(.disabled):hover{background-color:#86b6d6}.status-item.print-id[_ngcontent-%COMP%]:not(.disabled){background-color:#6aa29e}.status-item.print-id[_ngcontent-%COMP%]:not(.disabled):hover{background-color:#89b6b2}.status-item.print-now[_ngcontent-%COMP%]:not(.disabled){background-color:initial;color:#036}.status-item.print-now[_ngcontent-%COMP%]:not(.disabled):hover{opacity:.7}.status-item.print-now[_ngcontent-%COMP%]:not(.disabled)   mg-icon[_ngcontent-%COMP%]{--mg-icon-size:16px;margin-left:4px}.view-id-button[_ngcontent-%COMP%]{background-image:url(/assets/teacher-tools/student-id-icon.svg);background-repeat:no-repeat;background-size:contain;height:65px;width:60px;cursor:pointer}.view-id-button[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.student-id-icon-custom[_ngcontent-%COMP%], mg-file-input-upload[_ngcontent-%COMP%]{width:86px;height:76px;margin:auto;border-radius:5px;overflow:hidden}@media print,screen and (max-width:59.99875em){.student-id-icon-custom[_ngcontent-%COMP%], mg-file-input-upload[_ngcontent-%COMP%]{width:102px;height:90px}}.badge-img[_ngcontent-%COMP%]{display:inline-block;width:35px;height:35px;-webkit-mask-size:contain;mask-size:contain;-webkit-mask-position:center bottom;mask-position:center bottom;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat}.input-disabled[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{--mg-form-input-hover-color:#000}.input-disabled[_ngcontent-%COMP%]   .image-input-container[_ngcontent-%COMP%], .input-disabled[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]{pointer-events:none}"],changeDetection:0}),e})();var ze=n("ura0"),$e=n("kCL4");function qe(e,t){1&e&&i["\u0275\u0275element"](0,"mg-spinner")}function We(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div",25),i["\u0275\u0275elementStart"](2,"div",26),i["\u0275\u0275elementStart"](3,"mg-count-tile",27),i["\u0275\u0275listener"]("tileClicked",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onClickFilterActive()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"mg-count-tile",27),i["\u0275\u0275listener"]("tileClicked",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onClickFilterInactive()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"mg-count-tile",27),i["\u0275\u0275listener"]("tileClicked",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onClickFilterNoPhoto()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"mg-count-tile",27),i["\u0275\u0275listener"]("tileClicked",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onClickFilterTempPhoto()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"mg-count-tile",27),i["\u0275\u0275listener"]("tileClicked",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onClickFilterPrintId()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("count",e.activeCount)("label","Active")("isActive",e.selectedFilter==e.selectedFilterOptions.ACTIVE)("color","#99BAAD")("icon","checkin-6"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("count",e.inactiveCount)("label","Inactive")("isActive",e.selectedFilter==e.selectedFilterOptions.INACTIVE)("color","#4D6BBF")("icon","inactive-o"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("count",e.noPhotoCount)("label","No Photo")("isActive",e.selectedFilter==e.selectedFilterOptions.NO_PHOTO)("color","#755A9F")("icon","no-photo-o"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("count",e.tempPhotoCount)("label","Temp Photo")("isActive",e.selectedFilter==e.selectedFilterOptions.TEMP_PHOTO)("color","#609FC9")("icon","temp-photo-o"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("count",e.printIdCount)("label","Print ID")("isActive",e.selectedFilter==e.selectedFilterOptions.PRINT_ID)("color","#6AA29E")("icon","print-o")}}function Ke(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",31),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275property"]("value",e.roleType),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.name," ")}}const Ye=function(){return{standalone:!0}};function Ze(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-form-field",28),i["\u0275\u0275elementStart"](1,"mat-label"),i["\u0275\u0275text"](2,"Filter by Role"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"mat-select",29),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().roleTypeFilter=t}))("selectionChange",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().updateFilter()})),i["\u0275\u0275elementStart"](4,"mat-option"),i["\u0275\u0275text"](5,"None"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](6,Ke,2,2,"mat-option",30),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.ngIf,n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("mgHideOptionalMarker",!0),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngModelOptions",i["\u0275\u0275pureFunction0"](4,Ye))("ngModel",n.roleTypeFilter),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngForOf",e)}}function Je(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",31),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275property"]("value",e),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e," ")}}function Qe(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-form-field",28),i["\u0275\u0275elementStart"](1,"mat-label"),i["\u0275\u0275text"](2,"Filter by Grade"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"mat-select",32),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().gradeFilter=t}))("selectionChange",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().updateFilter()})),i["\u0275\u0275elementStart"](4,"mat-option"),i["\u0275\u0275text"](5,"None"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](6,Je,2,2,"mat-option",30),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.ngIf,n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("mgHideOptionalMarker",!0),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngModelOptions",i["\u0275\u0275pureFunction0"](4,Ye))("ngModel",n.gradeFilter),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngForOf",e)}}function Xe(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function et(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",33),i["\u0275\u0275text"](1," ID Number "),i["\u0275\u0275elementEnd"]())}function tt(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mg-student-id-manage-card",34),i["\u0275\u0275listener"]("itemChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onStudentIdChange(t)})),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("studentIdResponse",e)("disable",n.disableEdits)("showIdNum",!i["\u0275\u0275pipeBind1"](1,4,n.hideIdNum$)||n.canManage)("canDownloadImage",n.canManage)}}function nt(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",37),i["\u0275\u0275elementStart"](1,"mg-generic-button",38),i["\u0275\u0275listener"]("onClick",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).launchDownloadList()})),i["\u0275\u0275text"](2," Export List "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("hasRipples",!1)("isRounded",!1))}function it(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",35),i["\u0275\u0275template"](1,nt,3,2,"div",36),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.canManage)}}var ot=function(e){return e[e.ACTIVE=1]="ACTIVE",e[e.INACTIVE=2]="INACTIVE",e[e.NO_PHOTO=3]="NO_PHOTO",e[e.TEMP_PHOTO=4]="TEMP_PHOTO",e[e.PRINT_ID=5]="PRINT_ID",e[e.NONE=6]="NONE",e}({});let at=(()=>{class e{constructor(e,t,n,i,o,a,r,p,u,h){this.studentIdService=e,this._cdr=t,this.rolesService=n,this.rootService=i,this.studentIdManager=o,this.snackBar=a,this.permissions=r,this.gradeService=p,this.ds=u,this._settingService=h,this.searchText="",this.searchTextDebounced="",this._searchText$=new l.a(""),this._destroyed$=new c.a(1),this.loadedCounts=!1,this.activeCount=0,this.inactiveCount=0,this.tempPhotoCount=0,this.noPhotoCount=0,this.printIdCount=0,this.disableEdits=!1,this.canManage=!1,this.roleTypeFilter="",this.gradeFilter="",this.personHashFilter="",this.selectedFilter=ot.NONE,this.selectedFilterOptions=ot,this._searchText$.pipe(Object(d.a)(this._destroyed$),Object(m.a)(500)).subscribe(e=>{this.searchTextDebounced!=e&&(this.searchTextDebounced=e,this.updateFilter(),this._cdr.markForCheck())}),this.availableFilterRoles$=this.rolesService.availableCommentPermitableRoles$.pipe(Object(g.a)(e=>e.map(e=>({name:e.name,roleType:e.roleType})))),this.availableGrade$=this.gradeService.grades$,this.retrieveCountInfo(),this.initRoles(),this.initGrades(),this.canManage=this.permissions.hasPermission(s.MingaPermission.ADMINISTER_STUDENT_ID),this.disableEdits=!this.canManage,this.hideIdNum$=this._settingService.getSettingValueObs(s.mingaSettingTypes.HIDE_ID_NUM)}updateFilter(){const e={};switch(this.selectedFilter){case ot.ACTIVE:e.activeStatus=!0;break;case ot.INACTIVE:e.inactiveStatus=!0;break;case ot.NO_PHOTO:e.noPhotoStatus=!0;break;case ot.TEMP_PHOTO:e.tempPhotoStatus=!0;break;case ot.PRINT_ID:e.printIdStatus=!0}this.searchTextDebounced.length&&(e.searchNameId=this.searchTextDebounced),this.roleTypeFilter&&(e.role=this.roleTypeFilter),this.gradeFilter&&(e.grade=this.gradeFilter),this.personHashFilter&&(e.personHash=this.personHashFilter),this.streamFilter=e}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}initRoles(){return Object(a.a)(this,void 0,void 0,(function*(){yield this.rolesService.fetchIfNeeded()}))}initGrades(){return Object(a.a)(this,void 0,void 0,(function*(){yield this.gradeService.fetchIfNeeded()}))}retrieveCountInfo(){return Object(a.a)(this,void 0,void 0,(function*(){const{active:e,inactive:t,tempPhoto:n,noPhoto:i,printId:o}=yield this.studentIdService.getStatusCounts();this.activeCount=e,this.inactiveCount=t,this.tempPhotoCount=n,this.noPhotoCount=i,this.printIdCount=o,this.loadedCounts=!0}))}onClickFilterActive(){this.selectedFilter=this.selectedFilter==ot.ACTIVE?ot.NONE:ot.ACTIVE,this.updateFilter()}onClickFilterInactive(){this.selectedFilter=this.selectedFilter==ot.INACTIVE?ot.NONE:ot.INACTIVE,this.updateFilter()}onClickFilterNoPhoto(){this.selectedFilter=this.selectedFilter==ot.NO_PHOTO?ot.NONE:ot.NO_PHOTO,this.updateFilter()}onClickFilterTempPhoto(){this.selectedFilter=this.selectedFilter==ot.TEMP_PHOTO?ot.NONE:ot.TEMP_PHOTO,this.updateFilter()}onClickFilterPrintId(){this.selectedFilter=this.selectedFilter==ot.PRINT_ID?ot.NONE:ot.PRINT_ID,this.updateFilter()}onSearchTextChange(e){this._searchText$.next(e)}onSearchUserChange(e){this.personHashFilter=e?e.hash:null,this.updateFilter()}onStudentIdChange(e){return Object(a.a)(this,void 0,void 0,(function*(){if(this.permissions.hasPermission(s.MingaPermission.ADMINISTER_STUDENT_ID)){try{yield this.rootService.addLoadingPromise(this.studentIdService.updateStudentId(e))}catch(t){return t.message&&this.snackBar.open(t.message),void console.warn("onStudentIdChange update error occured: ",t)}"tempPhoto"in e&&(e.tempPhoto?this.tempPhotoCount++:this.tempPhotoCount>0&&this.tempPhotoCount--),"active"in e&&(e.active?(this.activeCount++,this.inactiveCount>0&&this.inactiveCount--):(this.activeCount>0&&this.activeCount--,this.inactiveCount++)),"printId"in e&&(e.printId?this.printIdCount++:this.printIdCount>0&&this.printIdCount--),"noPhoto"in e&&this.noPhotoCount++,e.fileName&&this.noPhotoCount>0&&this.noPhotoCount--,this._cdr.markForCheck()}}))}clearSearch(){this.searchText="",this.searchTextDebounced="",this.updateFilter(),this._cdr.markForCheck()}launchDownloadList(){return Object(a.a)(this,void 0,void 0,(function*(){const e=this.studentIdService.downloadList(this.streamFilter);let t="",n=new Uint8Array(0);yield this.rootService.addLoadingPromise(new Promise((i,o)=>{e.subscribe(e=>{if(e.hasChunk()){const t=e.getChunk_asU8(),i=new Uint8Array(n.length+t.length);i.set(n),i.set(t,n.length),n=i}else e.hasFilename()&&(t=e.getFilename())},o,i)})),Object(r.a)(n,t)}))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](u.a),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](C.a),i["\u0275\u0275directiveInject"](x.a),i["\u0275\u0275directiveInject"](v.StudentIdManager),i["\u0275\u0275directiveInject"](b.b),i["\u0275\u0275directiveInject"](S.c),i["\u0275\u0275directiveInject"](_.b),i["\u0275\u0275directiveInject"](f),i["\u0275\u0275directiveInject"](I.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-student-id-manage-page"]],features:[i["\u0275\u0275ProvidersFeature"]([f])],decls:44,vars:17,consts:[[1,"manager-overlay-subpage-header"],["fxLayoutAlign","space-between flex-start",1,"header"],[1,"col","left","status-items"],[4,"ngIf"],[1,"col","right"],[1,"filter-inputs"],[1,"search-input-container"],[3,"label","onPersonSelected"],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign","center center","fxLayoutGap","10px",1,"filter-inputs-dropdowns"],["fxFlex","50","fxFlex.lt-sm","auto"],["mgFormField","","mgNoHintMargin","true","appearance","outline",3,"mgHideOptionalMarker",4,"ngIf"],["fxFlex",""],[1,"manager-overlay-subpage-content","white-bg"],[4,"ngTemplateOutlet"],[1,"student-id-list"],["fxLayoutGap","25px",1,"student-id-list-header"],["fxFlex","7"],["fxFlex","14","fxLayoutAlign","start"],["fxFlex","12","fxLayoutAlign","start",4,"ngIf"],["fxFlex","5"],["fxFlex","25"],[3,"dataSource","filter"],["streamItemTemplate",""],["mg-empty-state","",3,"title","subtitle"],["quickActionsTemplate",""],[1,"status-item-wrapper"],["count-tile-container",""],[3,"count","label","isActive","color","icon","tileClicked"],["mgFormField","","mgNoHintMargin","true","appearance","outline",3,"mgHideOptionalMarker"],["name","roleType",3,"ngModelOptions","ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["name","gradeSelect",3,"ngModelOptions","ngModel","ngModelChange","selectionChange"],["fxFlex","12","fxLayoutAlign","start"],[3,"studentIdResponse","disable","showIdNum","canDownloadImage","itemChange"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","15px",1,"quick-action-container"],["fxFlex","nogrow","fxHide.lt-md","",4,"ngIf"],["fxFlex","nogrow","fxHide.lt-md",""],["colorTheme","navy","size","small","paddingSize","none","variant","clear","iconLeft","download-o",3,"hasRipples","isRounded","onClick"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"div",2),i["\u0275\u0275template"](3,qe,1,0,"mg-spinner",3),i["\u0275\u0275template"](4,We,8,25,"ng-container",3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"div",4),i["\u0275\u0275elementStart"](6,"div",5),i["\u0275\u0275elementStart"](7,"div",6),i["\u0275\u0275elementStart"](8,"mg-people-search-input",7),i["\u0275\u0275listener"]("onPersonSelected",(function(e){return t.onSearchUserChange(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"div",8),i["\u0275\u0275elementStart"](10,"div",9),i["\u0275\u0275elementStart"](11,"div"),i["\u0275\u0275template"](12,Ze,7,5,"mat-form-field",10),i["\u0275\u0275pipe"](13,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"div",11),i["\u0275\u0275elementStart"](15,"div"),i["\u0275\u0275template"](16,Qe,7,5,"mat-form-field",10),i["\u0275\u0275pipe"](17,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](18,"div",12),i["\u0275\u0275template"](19,Xe,1,0,"ng-container",13),i["\u0275\u0275elementStart"](20,"div",14),i["\u0275\u0275elementStart"](21,"div",15),i["\u0275\u0275elementStart"](22,"div",16),i["\u0275\u0275text"](23,"Photo"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](24,"div",17),i["\u0275\u0275text"](25," First Name "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](26,"div",17),i["\u0275\u0275text"](27," Last Name "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](28,et,2,0,"div",18),i["\u0275\u0275pipe"](29,"async"),i["\u0275\u0275elementStart"](30,"div",19),i["\u0275\u0275text"](31,"Grade"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](32,"div",19),i["\u0275\u0275text"](33,"Role"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](34,"div",20),i["\u0275\u0275text"](35,"Status"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](36,"div",16),i["\u0275\u0275text"](37,"View ID"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](38,"mg-paged-scroller",21),i["\u0275\u0275template"](39,tt,2,6,"ng-template",null,22,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275element"](41,"mg-empty-state",23),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](42,it,2,1,"ng-template",null,24,i["\u0275\u0275templateRefExtractor"])),2&e){const e=i["\u0275\u0275reference"](43);i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",!t.loadedCounts),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.loadedCounts),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("label","Search by Name or ID"),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](13,11,t.availableFilterRoles$)),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](17,13,t.availableGrade$)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngTemplateOutlet",e),i["\u0275\u0275advance"](9),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](29,15,t.hideIdNum$)||t.canManage),i["\u0275\u0275advance"](10),i["\u0275\u0275property"]("dataSource",t.ds)("filter",t.streamFilter),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("title","No Student IDs found")("subtitle","Try changing your search or filtering and try again.")}},directives:[O.d,E.o,y.a,O.e,O.f,O.b,E.t,M.a,P.a,w.a,T.a,k.a,L.d,A.a,L.h,N.a,D.t,D.w,F.m,E.n,He,ze.b,$e.a],pipes:[E.b],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;position:relative}.manager-overlay-subpage[_ngcontent-%COMP%]{margin-bottom:3.5294117647rem}.manager-overlay-subpage-header[_ngcontent-%COMP%]{background:#f4f4f4;padding:1.1764705882rem 20%;box-sizing:border-box;margin:-20px -20% 0;width:calc(140%)}.manager-overlay-subpage-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{display:inline-block;font-size:1.2941176471rem;font-weight:800;color:#036;padding:0;margin:0}@media print,screen and (max-width:37.49875em){.manager-overlay-subpage-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;display:block}}.manager-overlay-subpage-content[_ngcontent-%COMP%]{flex:1;padding:1.1764705882rem 0;box-sizing:border-box}.manager-overlay-subpage-content.white-bg[_ngcontent-%COMP%]{background-color:#fff}.quick-action-container[_ngcontent-%COMP%]{margin-bottom:1.1764705882rem}.quick-action-container[_ngcontent-%COMP%]:empty{display:none}.quick-action-btn[_ngcontent-%COMP%]{-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;-webkit-appearance:none;border-radius:0;text-align:inherit;box-shadow:none;color:inherit;font:inherit;padding:0;margin:0;background:none;border:none;outline:none;box-sizing:border-box;cursor:pointer;font-size:.8823529412rem;color:#036;display:inline-flex;align-items:center;justify-content:center;--mg-icon-size:20px}.quick-action-btn[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{margin-right:.2941176471rem}.quick-action-btn[_ngcontent-%COMP%]:hover{opacity:.7}@media print,screen and (max-width:37.49875em){.quick-action-btn[_ngcontent-%COMP%]{display:none}}.manager-layout-loading-container[_ngcontent-%COMP%]{padding:2.9411764706rem 0}.header-title[_ngcontent-%COMP%]{display:inline-block;font-size:1.2941176471rem;font-weight:800;color:#036;padding:0;margin:0}@media print,screen and (max-width:37.49875em){.header-title[_ngcontent-%COMP%]{text-align:center;display:block}}@media print,screen and (max-width:59.99875em){.header[_ngcontent-%COMP%]   .col.right[_ngcontent-%COMP%]{flex-basis:100%}}.download-btn[_ngcontent-%COMP%]{--mg-button-border-radius:2em;--mg-button-padding-vert:9px;--mg-button-padding-horz:40px}.filter-inputs[_ngcontent-%COMP%]{--mg-form-input-background-color:#fff;--mg-form-input-outline-color:#609fc9}.filter-inputs[_ngcontent-%COMP%]   .role-input-container[_ngcontent-%COMP%], .filter-inputs[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]{margin-bottom:10px}@media print,screen and (max-width:79.99875em){.filter-inputs[_ngcontent-%COMP%]{flex:1 auto}}.filter-inputs-dropdowns[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%}@media print,screen and (max-width:37.49875em){.filter-inputs-dropdowns[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-of-type{margin-bottom:10px}}@media print,screen and (max-width:59.99875em){.status-items[_ngcontent-%COMP%]{display:none}}.student-id-list[_ngcontent-%COMP%]   .student-id-list-header[_ngcontent-%COMP%]{margin-bottom:15px;padding:0 12px;font-size:.8823529412rem;font-weight:700;color:#b2b2b2}.student-id-list[_ngcontent-%COMP%]   .student-id-list-header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{text-align:center}@media print,screen and (max-width:79.99875em){.student-id-list[_ngcontent-%COMP%]   .student-id-list-header[_ngcontent-%COMP%]{display:none!important}}"],changeDetection:0}),e})();var rt=n("u9T3"),st=n("Tj54"),lt=n("OLhe"),ct=n("IkgF"),dt=n("CO6v"),mt=n("NG9B"),gt=n("HxU+"),pt=n("ls3q"),ut=n("7Tcv"),ht=n("p+4T"),ft=n("ugqS"),Ct=n("Ogcz");let xt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[pt.a,gt.a,Ct.b,ft.a,dt.a,ht.a,H.a,E.c,D.m,L.f,W.c,N.b,rt.a,st.b,o.k]]}),e})();var vt=n("rJgo"),bt=n("O2jg"),St=function(e){return e.HEADER_TITLE="ID Manager",e}({}),_t=n("EZOG"),It=n("tOtK");function Ot(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mg-icon"),i["\u0275\u0275text"](1,"student-id-o"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](2)),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("\xa0 ",e.MESSAGES.HEADER_TITLE," ")}}let Et=(()=>{class e{constructor(e,t,n,i,o){this.media=e,this.studentIdRouteService=n,this.router=i,this.url=o,this.MESSAGES=St,this.openedSideNav=!1,this.mqAlias="",this.colorTheme=bt.a.ID_MANAGER,this.tabs=[],this.tabLabels=[],this.tabIndex=0,this.lastUrlSegment="",e.asObservable().subscribe(e=>{this.mqAlias=e[0].mqAlias}),t.data.subscribe(e=>{this._handleRouteTabs(e.tabs)}),t.url.subscribe(e=>{const t=this.url.path().split("/");t.length&&(this.lastUrlSegment=t[t.length-1],this._syncUrlWithTab())})}onOverlayClose(){return Object(a.a)(this,void 0,void 0,(function*(){this.studentIdRouteService.returnFromStudentId()}))}onTabIndexChange(e){this.tabs[e]&&this.router.navigate(["/studentid/"+this.tabs[e].path,{outlets:{o:null}}])}goToRoute(e){e&&this.router.navigateByUrl(e)}_handleRouteTabs(e){for(let t of e)this.studentIdRouteService.hasTabRoutePermissions(t.permissions)&&(this.tabs.push(t),this.tabLabels.push(t.title));this.tabs.length&&this._syncUrlWithTab()}onSideNav(e){this.openedSideNav=!this.openedSideNav}_syncUrlWithTab(){if(this.tabs.length&&this.lastUrlSegment)for(let e=0;e<this.tabs.length;e++)this.tabs[e].path==this.lastUrlSegment&&(this.tabIndex=e)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](V.g),i["\u0275\u0275directiveInject"](o.a),i["\u0275\u0275directiveInject"](_t.a),i["\u0275\u0275directiveInject"](o.g),i["\u0275\u0275directiveInject"](E.l))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-student-id-page"]],decls:4,vars:1,consts:[[3,"colorTheme","overlayClose"],["overlayTitle",""]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mg-manager-overlay",0),i["\u0275\u0275listener"]("overlayClose",(function(){return t.onOverlayClose()})),i["\u0275\u0275template"](1,Ot,3,1,"ng-template",null,1,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275element"](3,"router-outlet"),i["\u0275\u0275elementEnd"]()),2&e&&i["\u0275\u0275property"]("colorTheme",t.colorTheme)},directives:[It.a,o.l,q.a],styles:[".nav-icon[_ngcontent-%COMP%]{--mg-icon-size:42px;cursor:pointer;padding:10px 20px;color:#fff}.minga-logo[_ngcontent-%COMP%]{height:32px;margin-right:15px;color:#fff}@media (orientation:landscape){.minga-logo[_ngcontent-%COMP%]{height:8vh}}@media (orientation:portrait){.minga-logo[_ngcontent-%COMP%]{height:8vw}}@media (orientation:landscape) and (max-height:375px){.minga-logo[_ngcontent-%COMP%]{height:30px}}@media (orientation:portrait) and (max-width:375px){.minga-logo[_ngcontent-%COMP%]{height:30px}}@media (min-width:400px){.minga-logo[_ngcontent-%COMP%]{height:32px}}@media (max-width:530px){.minga-logo[_ngcontent-%COMP%]{display:none}}.header-logo-container[_ngcontent-%COMP%]{text-align:center}.header-menu[_ngcontent-%COMP%]{text-align:right}.header-menu-list[_ngcontent-%COMP%]{list-style:none;list-style-type:none;padding:0;margin:0}.header-menu-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]{margin-left:10px}.header-menu-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;border-radius:25px}.header-menu-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{--mg-icon-size:18px;color:#1c2f59;text-decoration:none;display:inline-flex;align-items:center;padding:5px 13px}.header-menu-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#e9d68f}.header-menu-list[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%], .header-menu-list[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:hover{background:#fff}.text-icon-wrap[_ngcontent-%COMP%]{font-size:17px;display:inline-flex;align-items:center;color:#fff}"],changeDetection:0}),e})(),yt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[pt.a,bt.b,E.c,rt.a,o.k,vt.c]]}),e})();var Mt=n("rNFI"),Pt=n("j7EK");let wt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[yt,xt,dt.a,pt.a,gt.a,ut.a,mt.a,Mt.a,Pt.b,ct.a,lt.a,E.c,D.m,rt.a,L.f,W.c,N.b,st.b]]}),e})();var Tt=n("XNiG"),kt=n("/4+J"),Lt=n("k/kw"),At=n("fC9k"),Nt=n("wIoi"),Dt=function(e){return e.HELP_TOOLTIP_FOR_OFFLINE_STICKERS="Allows the app to save the users current stickers to their device, so the stickers will be displayed regardless of internet connection. However, the stickers may be out of date if they've recently changed.",e.WARNING_FOR_TEMP_PHOTOS="By enabling this setting, students will be able to upload their own Student ID photo. Do you still wish to proceed? We recommend you do not turn this on.",e.STAFF_CHANGE_PICTURE="ID picture can be changed in the user profile",e}({}),Ft=n("iELJ"),Rt=n("jMqV"),Ut=n("o1f5"),jt=n("E4Uz"),Bt=n("o4Yh"),Gt=n("acpF"),Vt=n("+ZML"),Ht=n("alHs");const zt=["backgroundColorPreview"],$t=["fontColorPreview"],qt=["gradeColorPreview"];function Wt(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div",36),i["\u0275\u0275elementStart"](2,"div",37),i["\u0275\u0275elementStart"](3,"div",12),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"div",38),i["\u0275\u0275text"](6,"Background"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"div",39),i["\u0275\u0275listener"]("colorPickerChange",(function(n){i["\u0275\u0275restoreView"](e);const o=t.index;return i["\u0275\u0275nextContext"]().onGradeColorChange(n,o,!0)}))("colorPickerCancel",(function(){i["\u0275\u0275restoreView"](e);const n=t.index;return i["\u0275\u0275nextContext"]().onGradeColorChange("",n,!0)})),i["\u0275\u0275element"](8,"div",15,40),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"div",41),i["\u0275\u0275elementStart"](11,"div",38),i["\u0275\u0275text"](12,"Font"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"div",39),i["\u0275\u0275listener"]("colorPickerChange",(function(n){i["\u0275\u0275restoreView"](e);const o=t.index;return i["\u0275\u0275nextContext"]().onGradeColorChange(n,o,!1)}))("colorPickerCancel",(function(){i["\u0275\u0275restoreView"](e);const n=t.index;return i["\u0275\u0275nextContext"]().onGradeColorChange("",n,!1)})),i["\u0275\u0275element"](14,"div",15,40),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=t.$implicit,n=t.index,o=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275classProp"]("no-action",!o.canCreateIdsWithMinga),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](e.grade),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("colorPicker",e.value[0])("cpCloseClickOutside",!1)("cpOKButton",!0)("cpOKButtonText","Apply")("cpCancelButton",!0)("cpCancelButtonText","Reset")("cpWidth","200px")("cpPosition",o.gradeCPPosition(n)),i["\u0275\u0275advance"](3),i["\u0275\u0275classProp"]("no-action",!o.canCreateIdsWithMinga),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("colorPicker",e.value[1])("cpCloseClickOutside",!1)("cpOKButton",!0)("cpOKButtonText","Apply")("cpCancelButton",!0)("cpCancelButtonText","Reset")("cpWidth","200px")("cpPosition",o.gradeCPPosition(n))}}const Kt=function(e){return[e]};let Yt=(()=>{class e{constructor(e,t,n){this._cdr=e,this.dialog=t,this.mingaSettingStore=n,this.TOOL_TIPS=Dt,this.canCreateIdsWithMinga=!1,this.idSchoolName="",this.schoolLogoAssetPath="",this.idBackgroundColor="#BEBEBE",this.defaultIdBackgroundColor="#1c2f59",this.idFontColor="#000000",this.defaultFontColor="#FFFFFF",this.barcodeType="CODE128",this.canUploadTemporaryPhotos=!1,this.showCustomLifeline="",this.isCustomLifelineContentLoaded=!1,this.canSetCustomGradeColors=!1,this.idGradeColors={},this.gradeColorItems=[],this.studentIdSettings=s.mingaSettingTypes,this._destroyed$=new c.a(1),this._showCustomLifeline$=new l.a(null),this.onSettingChanged=new i.EventEmitter,this.delayedUpdate$=new Tt.a,this.delayedUpdateSub$=this.delayedUpdate$.pipe(Object(m.a)(1e3),Object(d.a)(this._destroyed$)),this.delayedUpdateSub$.subscribe(e=>{this._onUpdateSetting(e)}),this._showCustomLifeline$.pipe(Object(d.a)(this._destroyed$),Object(m.a)(1500)).subscribe(e=>{this.isCustomLifelineContentLoaded?(this._onUpdateSetting({keyName:this.studentIdSettings.ID_SHOW_CUSTOM_LIFELINE,value:e}),this._cdr.markForCheck()):this.isCustomLifelineContentLoaded=!0})}set initialSettings(e){this._initStudentIdSettings(e)}set schoolType(e){this.mingaSchoolType=e,this._initGradeColorItems(this.idGradeColors)}ngOnInit(){}ngOnDestroy(){this.delayedUpdate$.unsubscribe(),this._destroyed$.next(),this._destroyed$.complete()}ngAfterViewInit(){this._setBackgroundColorPreview(),this._setFontColorPreview(),this.gradeColorPreviews.changes.subscribe(e=>{Object.keys(this.gradeColorItems).length&&this._initGradeColorPreviews(e.toArray())})}onCreateIdsWithMingaChange(){this._onUpdateSetting({keyName:this.studentIdSettings.ID_MINGA_STUDENT_ID,value:this.canCreateIdsWithMinga})}onSchoolNameChange(){this.canCreateIdsWithMinga&&this.delayedUpdate$.next({keyName:this.studentIdSettings.ID_SCHOOL_NAME,value:this.idSchoolName})}onSchoolLogoPhotoChange(){this.canCreateIdsWithMinga&&this._onUpdateSetting({keyName:this.studentIdSettings.ID_LOGO_ASSET_PATH,value:this.schoolLogoAssetPath})}onBackgroundColorChange(e){this.canCreateIdsWithMinga&&(this.idBackgroundColor=e,this.delayedUpdate$.next({keyName:this.studentIdSettings.ID_BACKGROUND_COLOR,value:this.idBackgroundColor}),this._setBackgroundColorPreview())}onFontColorChange(e){this.canCreateIdsWithMinga&&(this.idFontColor=e,this.delayedUpdate$.next({keyName:this.studentIdSettings.ID_FONT_COLOR,value:this.idFontColor}),this._setFontColorPreview())}onGradeColorChange(e,t,n){if(!this.canCreateIdsWithMinga)return;const i=this.gradeColorItems[t];if(i){if(n){this.gradeColorItems[t].value[0]=e;const n=this.gradeColorPreviews.find((e,n)=>n==2*t);n.nativeElement.style.setProperty("background-color",e||"")}else{this.gradeColorItems[t].value[1]=e;const n=this.gradeColorPreviews.find((e,n)=>n==2*t+1);n.nativeElement.style.setProperty("background-color",e||"")}this.idGradeColors[i.grade]=this.gradeColorItems[t].value,this.delayedUpdate$.next({keyName:this.studentIdSettings.ID_GRADE_COLORS,value:this.idGradeColors})}}onEnableGradeColorsChange(){this.canCreateIdsWithMinga&&(this.canSetCustomGradeColors=!this.canSetCustomGradeColors,this._onUpdateSetting({keyName:this.studentIdSettings.ID_ENABLE_GRADE_COLORS,value:this.canSetCustomGradeColors}))}onBarcodeTypeChange(e){this.canCreateIdsWithMinga&&this._onUpdateSetting({keyName:this.studentIdSettings.ID_BARCODE_TYPE,value:e})}onShowCustomLifelineChange(){this.canCreateIdsWithMinga&&this._showCustomLifeline$.next(this.showCustomLifeline)}_onUpdateSetting(e){this.mingaSettingStore.updateSetting(e.keyName,e.value),this.onSettingChanged.emit({keyName:e.keyName,value:JSON.stringify(e.value)})}_initStudentIdSettings(e){this.canCreateIdsWithMinga=e.idMingaStudentId,this.idSchoolName=e.idSchoolName,this.schoolLogoAssetPath=e.idLogoAssetPath,this.idBackgroundColor=e.idBackgroundColor,this.barcodeType=e.idBarcodeType,this.idFontColor=e.idFontColor,this.canUploadTemporaryPhotos=e.idUploadTempPhoto,this.showCustomLifeline=e.idShowCustomLifeline,this.canSetCustomGradeColors=e.idEnableGradeColors,this.idGradeColors=e.idGradeColors}_initGradeColorItems(e){this.gradeColorItems=[],s.GradeFunctions.getAllowedGrades(this.mingaSchoolType).forEach((t,n)=>{let i=e[t];"string"==typeof i?i=[i,""]:void 0===i&&(i=["",""]),this.gradeColorItems.push({grade:t,value:i})})}_setBackgroundColorPreview(){this.backgroundColorPreview&&this.backgroundColorPreview.nativeElement.style.setProperty("background-color",this.idBackgroundColor||"")}_setFontColorPreview(){this.fontColorPreview&&this.fontColorPreview.nativeElement.style.setProperty("background-color",this.idFontColor||"")}_initGradeColorPreviews(e){this.gradeColorItems.forEach((t,n)=>{const i=e.find((e,t)=>t==2*n);i&&i.nativeElement.style.setProperty("background-color",t.value[0]);const o=e.find((e,t)=>t==2*n+1);o&&o.nativeElement.style.setProperty("background-color",t.value[1])}),this._cdr.markForCheck()}gradeCPPosition(e){let t="left",n="bottom-";return e>6&&(n="top-"),e%2==0&&(t="right"),n+t}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](Ft.b),i["\u0275\u0275directiveInject"](I.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-student-id-select-settings"]],viewQuery:function(e,t){if(1&e&&(i["\u0275\u0275viewQuery"](zt,1),i["\u0275\u0275viewQuery"]($t,1),i["\u0275\u0275viewQuery"](qt,1)),2&e){let e;i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.backgroundColorPreview=e.first),i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.fontColorPreview=e.first),i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.gradeColorPreviews=e)}},inputs:{initialSettings:"initialSettings",schoolType:"schoolType"},outputs:{onSettingChanged:"onSettingChanged"},decls:83,vars:79,consts:[[1,"container"],["fxLayout","row","fxLayoutAlign","space-between center",1,"settings-item"],[1,"settings-header"],[1,"no-mg",3,"ngModel","ngModelChange"],["fxLayout","row","fxLayout.lt-sm","column","fxLayoutAlign","flex-start","fxLayoutGap","10px",1,"settings-item"],["fxFlex","60","mgFormField","","hideRequiredMarker","","appearance","outline",1,"school-name-input"],["matInput","","required","","type","text","placeHolder","School Name","minLength","3","maxLength","300",3,"ngModel","ngModelChange"],["fxLayout","row","fxFlex","40","fxLayoutAlign",""],[1,"setting-title","setting-title-logo","bold"],[1,"image-input"],["accept","image/*","customTitleText","Upload","previewAspectRatio","2:1",3,"showFileDetails","ngModel","onFileUpload","ngModelChange"],[1,"horiz-divider"],[1,"setting-title","bold"],[1,"setting-title"],["cpOutputFormat","hex",1,"pick-color-img",3,"colorPicker","cpPresetColors","cpCloseClickOutside","cpOKButton","cpOKButtonText","cpPosition","colorPickerChange"],[1,"color-preview"],["backgroundColorPreview",""],["fontColorPreview",""],["hideToggle","true",3,"disabled","expanded"],[1,"setting-title","bold",3,"click"],[1,"no-mg","grade-color-toggle",3,"disabled","ngModel","ngModelChange"],[1,"grade-color-grid"],[4,"ngFor","ngForOf"],[1,"barcode-type-select",3,"ngModel","ngModelChange"],[3,"value"],[1,"settings-item"],[3,"setting","label"],[3,"setting","label","warning"],[3,"setting","label","helpTooltip"],[3,"setting","helpTooltip","label"],["fxLayout","row","fxLayoutAlign","start center",1,"settings-item"],[3,"setting","label","helpText","min","required"],["fxLayout","column","fxLayoutAlign","center",1,"settings-item"],[1,"setting-title","mobile"],[1,"custom-lifeline"],[3,"ngModel","ngModelChange"],["fxLayout","column"],["fxLayout","row","fxLayoutAlign","space-between center",1,"grade-color-top"],[1,"setting-title","setting-title-color","bold"],["cpOutputFormat","hex",1,"pick-color-grade",3,"colorPicker","cpCloseClickOutside","cpOKButton","cpOKButtonText","cpCancelButton","cpCancelButtonText","cpWidth","cpPosition","colorPickerChange","colorPickerCancel"],["gradeColorPreview",""],["fxLayout","row",1,"grade-color-bottom"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"div",2),i["\u0275\u0275text"](3,"Create IDs with Minga"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"mat-slide-toggle",3),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.canCreateIdsWithMinga=e}))("ngModelChange",(function(){return t.onCreateIdsWithMingaChange()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"div",4),i["\u0275\u0275elementStart"](6,"mat-form-field",5),i["\u0275\u0275elementStart"](7,"mat-label"),i["\u0275\u0275text"](8,"School Name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"input",6),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.idSchoolName=e}))("ngModelChange",(function(){return t.onSchoolNameChange()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"div",7),i["\u0275\u0275elementStart"](11,"div",8),i["\u0275\u0275text"](12,"School Logo"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"div",9),i["\u0275\u0275elementStart"](14,"mg-file-input-upload",10),i["\u0275\u0275listener"]("onFileUpload",(function(){return t.onSchoolLogoPhotoChange()}))("ngModelChange",(function(e){return t.schoolLogoAssetPath=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](15,"div",11),i["\u0275\u0275elementStart"](16,"div",12),i["\u0275\u0275text"](17,"Digital Student IDs"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](18,"div",1),i["\u0275\u0275elementStart"](19,"div",13),i["\u0275\u0275text"](20,"ID Background Color"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](21,"div",14),i["\u0275\u0275listener"]("colorPickerChange",(function(e){return t.onBackgroundColorChange(e)})),i["\u0275\u0275element"](22,"div",15,16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](24,"div",1),i["\u0275\u0275elementStart"](25,"div",13),i["\u0275\u0275text"](26,"ID Font Color"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](27,"div",14),i["\u0275\u0275listener"]("colorPickerChange",(function(e){return t.onFontColorChange(e)})),i["\u0275\u0275element"](28,"div",15,17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](30,"div",11),i["\u0275\u0275elementStart"](31,"mat-expansion-panel",18),i["\u0275\u0275elementStart"](32,"mat-expansion-panel-header",19),i["\u0275\u0275listener"]("click",(function(){return t.onEnableGradeColorsChange()})),i["\u0275\u0275elementStart"](33,"mat-panel-title"),i["\u0275\u0275text"](34," Custom Background Colors Per Grade "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](35,"mat-panel-description"),i["\u0275\u0275elementStart"](36,"mat-slide-toggle",20),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.canSetCustomGradeColors=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](37,"div",21),i["\u0275\u0275template"](38,Wt,16,21,"ng-container",22),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](39,"div",11),i["\u0275\u0275elementStart"](40,"div",1),i["\u0275\u0275elementStart"](41,"div",13),i["\u0275\u0275text"](42,"Barcode type on ID"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](43,"mat-select",23),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.barcodeType=e}))("ngModelChange",(function(e){return t.onBarcodeTypeChange(e)})),i["\u0275\u0275elementStart"](44,"mat-option",24),i["\u0275\u0275text"](45,"CODE128"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](46,"mat-option",24),i["\u0275\u0275text"](47,"CODE39"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](48,"div",25),i["\u0275\u0275element"](49,"mg-setting-toggle",26),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](50,"div",25),i["\u0275\u0275element"](51,"mg-setting-toggle",26),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](52,"div",25),i["\u0275\u0275element"](53,"mg-setting-toggle",26),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](54,"div",25),i["\u0275\u0275element"](55,"mg-setting-toggle",26),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](56,"div",25),i["\u0275\u0275element"](57,"mg-setting-toggle",26),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](58,"div",25),i["\u0275\u0275element"](59,"mg-setting-toggle",27),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](60,"div",25),i["\u0275\u0275element"](61,"mg-setting-toggle",28),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](62,"div",25),i["\u0275\u0275element"](63,"mg-setting-toggle",29),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](64,"div",30),i["\u0275\u0275element"](65,"mg-setting-number-textbox",31),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](66,"div",11),i["\u0275\u0275elementStart"](67,"div",25),i["\u0275\u0275elementStart"](68,"mat-expansion-panel"),i["\u0275\u0275elementStart"](69,"mat-expansion-panel-header",12),i["\u0275\u0275text"](70," Suicide Hotline Page Settings "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](71,"div",25),i["\u0275\u0275element"](72,"mg-setting-toggle",26),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](73,"div",25),i["\u0275\u0275element"](74,"mg-setting-toggle",26),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](75,"div",25),i["\u0275\u0275element"](76,"mg-setting-toggle",26),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](77,"div",32),i["\u0275\u0275elementStart"](78,"div",33),i["\u0275\u0275text"](79,"Add Custom Info"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](80,"div",34),i["\u0275\u0275elementStart"](81,"quill-editor",35),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.showCustomLifeline=e}))("ngModelChange",(function(){return t.onShowCustomLifelineChange()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](82,"div",11),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngModel",t.canCreateIdsWithMinga),i["\u0275\u0275advance"](1),i["\u0275\u0275classProp"]("no-action",!t.canCreateIdsWithMinga),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngModel",t.idSchoolName),i["\u0275\u0275advance"](4),i["\u0275\u0275classProp"]("no-action",!t.canCreateIdsWithMinga),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("showFileDetails",!1)("ngModel",t.schoolLogoAssetPath),i["\u0275\u0275advance"](4),i["\u0275\u0275classProp"]("no-action",!t.canCreateIdsWithMinga),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("colorPicker",t.idBackgroundColor)("cpPresetColors",i["\u0275\u0275pureFunction1"](75,Kt,t.defaultIdBackgroundColor))("cpCloseClickOutside",!1)("cpOKButton",!0)("cpOKButtonText","Close")("cpPosition","left"),i["\u0275\u0275advance"](3),i["\u0275\u0275classProp"]("no-action",!t.canCreateIdsWithMinga),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("colorPicker",t.idFontColor)("cpPresetColors",i["\u0275\u0275pureFunction1"](77,Kt,t.defaultFontColor))("cpCloseClickOutside",!1)("cpOKButton",!0)("cpOKButtonText","Close")("cpPosition","left"),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("disabled",!t.canCreateIdsWithMinga)("expanded",t.canSetCustomGradeColors),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("disabled",!t.canCreateIdsWithMinga)("ngModel",t.canSetCustomGradeColors),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",t.gradeColorItems),i["\u0275\u0275advance"](2),i["\u0275\u0275classProp"]("no-action",!t.canCreateIdsWithMinga),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngModel",t.barcodeType),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("value","CODE128"),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("value","CODE39"),i["\u0275\u0275advance"](2),i["\u0275\u0275classProp"]("no-action",!t.canCreateIdsWithMinga),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("setting",t.studentIdSettings.ID_SHOW_ROLE)("label","Show Role on ID"),i["\u0275\u0275advance"](1),i["\u0275\u0275classProp"]("no-action",!t.canCreateIdsWithMinga),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("setting",t.studentIdSettings.ID_SHOW_GRADE)("label","Show Grade on ID"),i["\u0275\u0275advance"](1),i["\u0275\u0275classProp"]("no-action",!t.canCreateIdsWithMinga),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("setting",t.studentIdSettings.ID_SHOW_ID_FIELD_1)("label","Show ID Field 1 on ID"),i["\u0275\u0275advance"](1),i["\u0275\u0275classProp"]("no-action",!t.canCreateIdsWithMinga),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("setting",t.studentIdSettings.ID_SHOW_ID_FIELD_2)("label","Show ID Field 2 on ID"),i["\u0275\u0275advance"](1),i["\u0275\u0275classProp"]("no-action",!t.canCreateIdsWithMinga),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("setting",t.studentIdSettings.HIDE_ID_NUM_ON_IDS)("label","Hide ID Number on ID"),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("setting",t.studentIdSettings.ID_UPLOAD_TEMP_PHOTO)("label","Students Can Upload Temporary Photos")("warning",t.TOOL_TIPS.WARNING_FOR_TEMP_PHOTOS),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("setting",t.studentIdSettings.ID_STAFF_CHANGE_PICTURE)("label","Teachers / Staff can upload their own ID pictures")("helpTooltip",t.TOOL_TIPS.STAFF_CHANGE_PICTURE),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("setting",t.studentIdSettings.ID_ENABLE_OFFLINE)("helpTooltip",t.TOOL_TIPS.HELP_TOOLTIP_FOR_OFFLINE_STICKERS)("label","Enable Offline Stickers"),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("setting",t.studentIdSettings.ID_CLOCK_FONT_SIZE)("label","Student ID Clock Size")("helpText","Adjust the size of the clock located atop the ID. Scale the clock font size in terms of percentage(%)")("min",0)("required",!0),i["\u0275\u0275advance"](7),i["\u0275\u0275property"]("setting",t.studentIdSettings.ID_SHOW_ENGLISH_SUICIDE_LIFELINE)("label","Show English National Suicide Prevention Lifeline"),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("setting",t.studentIdSettings.ID_SHOW_SPANISH_SUICIDE_LIFELINE)("label","Show Spanish Suicide Prevention Lifeline"),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("setting",t.studentIdSettings.ID_SHOW_DOMESTIC_VIOLENCE_HOTLINE)("label","Show Domestic Violence Hotline"),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngModel",t.showCustomLifeline))},directives:[O.e,O.d,Rt.a,D.t,D.w,O.f,L.d,O.b,L.h,W.b,D.d,D.B,Ut.a,jt.a,Bt.c,Bt.f,Bt.g,Bt.e,E.n,N.a,F.m,Gt.a,Vt.a,Ht.a],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");[_nghost-%COMP%]{display:block;background-color:#fff;font-size:17px;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content}.container[_ngcontent-%COMP%]{margin-bottom:30px}.settings-item[_ngcontent-%COMP%]{margin:15px 0}.settings-header[_ngcontent-%COMP%]{width:-webkit-fill-available;font-family:Muli,sans-serif;line-height:1.35;font-weight:700;color:#036}@media (orientation:landscape){.settings-header[_ngcontent-%COMP%]{font-size:4.6376811594vh}}@media (orientation:portrait){.settings-header[_ngcontent-%COMP%]{font-size:4.6376811594vw}}@media (orientation:landscape) and (max-height:414px){.settings-header[_ngcontent-%COMP%]{font-size:19.2px}}@media (orientation:portrait) and (max-width:414px){.settings-header[_ngcontent-%COMP%]{font-size:19.2px}}@media (min-width:439.875px){.settings-header[_ngcontent-%COMP%]{font-size:20.4px}}.school-name-input[_ngcontent-%COMP%]{height:60px}.school-logo-custom[_ngcontent-%COMP%], mg-file-input-upload[_ngcontent-%COMP%]{width:75px;height:75px;border-radius:50%;margin:auto;overflow:hidden;--mg-file-input-icon-size-desktop:25px;--mg-file-input-icon-size-mobile:25px;--mg-file-input-icon-color:$mingaBlue1}.school-logo-custom[_ngcontent-%COMP%]  .drop-info .text, mg-file-input-upload[_ngcontent-%COMP%]  .drop-info .text{font-size:12px!important;margin-top:-8px}.school-logo-custom[_ngcontent-%COMP%]  .file-input-upload, mg-file-input-upload[_ngcontent-%COMP%]  .file-input-upload{padding-bottom:100%!important}.setting-title[_ngcontent-%COMP%]{font-size:.9411764706rem;font-weight:700;width:-webkit-fill-available;width:fill-available;width:--webkit-fill-available;color:#036}.setting-title-logo[_ngcontent-%COMP%]{display:flex;align-items:center;margin:0 10px}.setting-title.bold[_ngcontent-%COMP%]{font-weight:700;font-size:1rem}.setting-title-color[_ngcontent-%COMP%]{text-align:right}@media print,screen and (max-width:59.99875em){.setting-title.mobile[_ngcontent-%COMP%]{width:250px;font-size:.8823529412rem;line-height:1.2}}.pick-color-grade[_ngcontent-%COMP%]{margin-left:10px}.color-input[_ngcontent-%COMP%]{font-size:14px;height:45px;width:100px;margin:0 5px}.color-preview[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:5px;border:1px solid #d0d0d0}.grade-color-toggle[_ngcontent-%COMP%]{pointer-events:none;overflow:hidden}.grade-color-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);grid-template-rows:auto;gap:15px 40px}@media print,screen and (max-width:59.99875em){.grade-color-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr);gap:8px 40px}}.grade-color-top[_ngcontent-%COMP%]{padding-bottom:5px}.grade-color-bottom[_ngcontent-%COMP%]{align-items:center;justify-content:right}.no-action[_ngcontent-%COMP%]{pointer-events:none;opacity:.6}.horiz-divider[_ngcontent-%COMP%]{border-top:1px solid #ccc;margin:10px 0}.custom-lifeline[_ngcontent-%COMP%]{margin-top:10px;max-width:100%}.barcode-type-select[_ngcontent-%COMP%], .custom-lifeline[_ngcontent-%COMP%]{border-radius:5px;border:1px solid #d0d0d0}.barcode-type-select[_ngcontent-%COMP%]{max-width:110px;padding:3px}mat-expansion-panel[_ngcontent-%COMP%]{overflow:inherit}mat-expansion-panel[_ngcontent-%COMP%]   mat-panel-description[_ngcontent-%COMP%]{justify-content:flex-end;margin-right:0}mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]{padding:0}mat-form-field-wrapper[_ngcontent-%COMP%]{padding:0!important}mg-setting-toggle[_ngcontent-%COMP%]{--mg-setting-toggle-title-font-weight:bold}mg-setting-number-textbox[_ngcontent-%COMP%]{--mg-setting-number-text-font-weight:bold}div.setting-title[_ngcontent-%COMP%]{font-size:17px}'],changeDetection:0}),e})();var Zt=n("PqYM"),Jt=n("w1tV"),Qt=n("u3Fk");function Xt(e,t){if(1&e&&(i["\u0275\u0275element"](0,"mg-student-id-view",3),i["\u0275\u0275pipe"](1,"async")),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("studentIdInfo",e.studentIdInfo)("studentIdMingaSettings",e.studentIdMingaSettings)("canUseCustomColorsByGrade",i["\u0275\u0275pipeBind1"](1,3,e.canUseCustomColorsByGrade$))}}let en=(()=>{class e{constructor(e,t){this._studentIdService=e,this._settingService=t,this.currentDate$=Object(Zt.a)(0,1e3).pipe(Object(g.a)(()=>new Date),Object(Jt.a)()),this.idClockFontSize$=this._settingService.getSettingValueObs(s.mingaSettingTypes.ID_CLOCK_FONT_SIZE).pipe(Object(g.a)(e=>1+e/100)),this.canUseCustomColorsByGrade$=this._settingService.getSettingValueObs(s.mingaSettingTypes.ID_GRADE_COLORS)}ngOnDestroy(){this.studentInfoSub.unsubscribe()}ngOnInit(){this.studentInfoSub=this._studentIdService.studentId$.subscribe(e=>{e&&(this.studentIdInfo={image:"",name:"",firstName:"George",lastName:"Washington",grade:this.grade||"12",studentIdNumber:"5555555",mingaAddress:e.mingaAddress||"",roleType:"STUDENT",icons:[],personHash:"",active:!0,idField1:"ID Field 1",idField2:"ID Field 2"})})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](u.a),i["\u0275\u0275directiveInject"](I.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-student-id-settings-preview"]],inputs:{grade:"grade",studentIdMingaSettings:"studentIdMingaSettings"},decls:7,vars:11,consts:[[1,"preview-container"],[1,"preview-clock"],[3,"studentIdInfo","studentIdMingaSettings","canUseCustomColorsByGrade",4,"ngIf"],[3,"studentIdInfo","studentIdMingaSettings","canUseCustomColorsByGrade"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"date"),i["\u0275\u0275pipe"](5,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](6,Xt,2,5,"mg-student-id-view",2),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275styleProp"]("font-size",i["\u0275\u0275pipeBind1"](2,4,t.idClockFontSize$),"rem"),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind2"](4,6,i["\u0275\u0275pipeBind1"](5,9,t.currentDate$),"HH:mm:ss")," "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",t.studentIdInfo&&t.studentIdMingaSettings))},directives:[E.o,Qt.a],pipes:[E.b,E.f],styles:[".preview-container[_ngcontent-%COMP%]{max-width:22.3529411765rem}.preview-clock[_ngcontent-%COMP%]{text-align:center;font-weight:700;padding:.5rem}"]}),e})();var tn=n("w8an");function nn(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function on(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function an(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div",9),i["\u0275\u0275elementStart"](2,"div"),i["\u0275\u0275template"](3,nn,1,0,"ng-container",10),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"div"),i["\u0275\u0275template"](5,on,1,0,"ng-container",10),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()),2&e){i["\u0275\u0275nextContext"]();const e=i["\u0275\u0275reference"](13),t=i["\u0275\u0275reference"](11);i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngTemplateOutlet",e),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngTemplateOutlet",t)}}function rn(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function sn(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function ln(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",11),i["\u0275\u0275template"](1,rn,1,0,"ng-container",10),i["\u0275\u0275template"](2,sn,1,0,"ng-container",10),i["\u0275\u0275elementEnd"]()),2&e){i["\u0275\u0275nextContext"]();const e=i["\u0275\u0275reference"](11),t=i["\u0275\u0275reference"](13);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",e),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",t)}}function cn(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mg-student-id-select-settings",15),i["\u0275\u0275listener"]("onSettingChanged",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).updateIdSetting(t)})),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("schoolType",e.mingaSchoolType)("initialSettings",i["\u0275\u0275pipeBind1"](1,2,e.idSettings$))}}function dn(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",12),i["\u0275\u0275template"](1,cn,2,4,"mg-student-id-select-settings",13),i["\u0275\u0275pipe"](2,"hasPermission"),i["\u0275\u0275element"](3,"mg-membership-list-table",14),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](2,3,"ADMINISTER_STUDENT_ID_SETTINGS")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("hideHeader",!0)("types",e.LIST_TYPES)}}function mn(e,t){if(1&e&&i["\u0275\u0275element"](0,"mg-student-id-settings-preview",20),2&e){const e=t.ngIf,n=i["\u0275\u0275nextContext"](3);i["\u0275\u0275property"]("grade",n.sampleGrade)("studentIdMingaSettings",e)}}function gn(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div",17),i["\u0275\u0275elementStart"](2,"div",18),i["\u0275\u0275text"](3," SAMPLE "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](4,mn,1,2,"mg-student-id-settings-preview",19),i["\u0275\u0275pipe"](5,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",e.sampleGrade&&i["\u0275\u0275pipeBind1"](5,1,e.idSettings$))}}function pn(e,t){if(1&e&&(i["\u0275\u0275template"](0,gn,6,3,"ng-container",16),i["\u0275\u0275pipe"](1,"async")),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](1,1,e.shouldPreview$))}}let un=(()=>{class e{constructor(e,t,n,i,o,r){this.mingaManager=e,this.studentIdService=t,this.media=n,this._cdr=i,this.listMembershipService=o,this._permissionsService=r,this.idSettingsLists=[],this.LIST_TYPES=[kt.MembershipListType.ID_MANAGER],this._destroyed$=new c.a(1),this._reloadListsDebounce$=new Tt.a,this.isOnMobile=!0,this.mobileBreakpoints=U.a,this.idSettings$=this.studentIdService.idSettings$,this.shouldPreview$=this.idSettings$.pipe(Object(g.a)(e=>e.idMingaStudentId)),this._initStudentIdLists(),this._initGradeDependentSettings(),this._mqAliasSubscription=n.asObservable().pipe(Object(d.a)(this._destroyed$)).subscribe(e=>{this.isOnMobile=!!this.mobileBreakpoints.includes(e[0].mqAlias),this._cdr.markForCheck()}),this._reloadListsDebounce$.pipe(Object(m.a)(300),Object(d.a)(this._destroyed$)).subscribe(()=>Object(a.a)(this,void 0,void 0,(function*(){yield this._initStudentIdLists()})))}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}updateIdSetting(e){return Object(a.a)(this,void 0,void 0,(function*(){yield this.mingaManager.updateUserMingaSettings(e.keyName,e.value)}))}reloadLists(){return Object(a.a)(this,void 0,void 0,(function*(){this._reloadListsDebounce$.next()}))}_initStudentIdLists(){return Object(a.a)(this,void 0,void 0,(function*(){const e=[kt.MembershipListType.ID_MANAGER];this._permissionsService.hasPermission(s.MingaPermission.ADMINISTER_STUDENT_ID_SETTINGS)&&e.push(kt.MembershipListType.NO_ACCESS),this.idSettingsLists=yield this.listMembershipService.getOrCreateMembershipLists(e),this._cdr.markForCheck()}))}_initGradeDependentSettings(){return Object(a.a)(this,void 0,void 0,(function*(){this.mingaSchoolType=yield this.mingaManager.getMingaSchoolType();const e=s.GradeFunctions.getAllowedGrades(this.mingaSchoolType);this.sampleGrade=e[0],this._cdr.markForCheck()}))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](Lt.a),i["\u0275\u0275directiveInject"](u.a),i["\u0275\u0275directiveInject"](V.g),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](At.a),i["\u0275\u0275directiveInject"](S.c))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-student-id-settings-page"]],decls:14,vars:2,consts:[[1,"manager-overlay-subpage-header"],["fxLayout","row","fxLayout.lt-sm","column","fxLayoutAlign","start center","fxLayoutAlign.lt-sm","start stretch","fxLayoutGap.lt-sm","15px"],["fxFlex","grow"],[1,"manager-overlay-subpage-content","white-bg"],[1,"section","card"],[4,"ngIf","ngIfElse"],["mobileLayoutTpl",""],["settingsTpl",""],["previewTpl",""],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","80px",1,"settings-preview-container"],[4,"ngTemplateOutlet"],["fxLayout","column",1,"settings-preview-container"],["fxLayout","column","fxLayoutGap","20px",1,"settings-container"],[3,"schoolType","initialSettings","onSettingChanged",4,"ngIf"],[3,"hideHeader","types"],[3,"schoolType","initialSettings","onSettingChanged"],[4,"ngIf"],["fxLayoutGap.lt-sm","40px",1,"student-id-preview"],["fxLayoutAlign","center center",1,"sample-text"],[3,"grade","studentIdMingaSettings",4,"ngIf"],[3,"grade","studentIdMingaSettings"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"div",2),i["\u0275\u0275elementStart"](3,"h2"),i["\u0275\u0275text"](4,"Settings"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"div",3),i["\u0275\u0275elementStart"](6,"section",4),i["\u0275\u0275template"](7,an,6,2,"ng-container",5),i["\u0275\u0275template"](8,ln,3,2,"ng-template",null,6,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](10,dn,4,5,"ng-template",null,7,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](12,pn,2,3,"ng-template",null,8,i["\u0275\u0275templateRefExtractor"])),2&e){const e=i["\u0275\u0275reference"](9);i["\u0275\u0275advance"](7),i["\u0275\u0275property"]("ngIf",!t.isOnMobile)("ngIfElse",e)}},directives:[O.e,O.d,O.f,O.b,E.o,E.t,Nt.a,Yt,en],pipes:[tn.a,E.b],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;position:relative}.manager-overlay-subpage[_ngcontent-%COMP%]{margin-bottom:3.5294117647rem}.manager-overlay-subpage-header[_ngcontent-%COMP%]{background:#f4f4f4;padding:1.1764705882rem 20%;box-sizing:border-box;margin:-20px -20% 0;width:calc(140%)}.manager-overlay-subpage-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{display:inline-block;font-size:1.2941176471rem;font-weight:800;color:#036;padding:0;margin:0}@media print,screen and (max-width:37.49875em){.manager-overlay-subpage-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;display:block}}.manager-overlay-subpage-content[_ngcontent-%COMP%]{flex:1;padding:1.1764705882rem 0;box-sizing:border-box}.manager-overlay-subpage-content.white-bg[_ngcontent-%COMP%]{background-color:#fff}.quick-action-container[_ngcontent-%COMP%]{margin-bottom:1.1764705882rem}.quick-action-container[_ngcontent-%COMP%]:empty{display:none}.quick-action-btn[_ngcontent-%COMP%]{-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;-webkit-appearance:none;border-radius:0;text-align:inherit;box-shadow:none;color:inherit;font:inherit;padding:0;margin:0;background:none;border:none;outline:none;box-sizing:border-box;cursor:pointer;font-size:.8823529412rem;color:#036;display:inline-flex;align-items:center;justify-content:center;--mg-icon-size:20px}.quick-action-btn[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{margin-right:.2941176471rem}.quick-action-btn[_ngcontent-%COMP%]:hover{opacity:.7}@media print,screen and (max-width:37.49875em){.quick-action-btn[_ngcontent-%COMP%]{display:none}}.manager-layout-loading-container[_ngcontent-%COMP%]{padding:2.9411764706rem 0}.header-title[_ngcontent-%COMP%]{display:inline-block;font-size:1.2941176471rem;font-weight:800;color:#036;padding:0;margin:0}@media print,screen and (max-width:37.49875em){.header-title[_ngcontent-%COMP%]{text-align:center;display:block}}[_nghost-%COMP%]{height:100%}@media print,screen and (min-width:37.5em){.settings-preview-container[_ngcontent-%COMP%]{padding:15px}}mg-student-id-select-settings[_ngcontent-%COMP%]{padding:15px;margin-top:5px;box-shadow:0 0 6px rgba(0,0,0,.15);margin-bottom:10px}@media print,screen and (min-width:37.5em){mg-student-id-select-settings[_ngcontent-%COMP%]{width:500px;padding:30px}}mg-membership-list-view[_ngcontent-%COMP%]{width:100%}@media print,screen and (min-width:37.5em){mg-membership-list-view[_ngcontent-%COMP%]{width:560px}}.student-id-preview[_ngcontent-%COMP%]{max-width:380px;position:relative;box-shadow:0 0 6px rgba(0,0,0,.15)}@media print,screen and (max-width:59.99875em){.student-id-preview[_ngcontent-%COMP%]{margin:40px 0}}.student-id-preview[_ngcontent-%COMP%]   .sample-text[_ngcontent-%COMP%]{position:absolute;top:45%;z-index:4;font-weight:900;font-size:80px;color:#fff;opacity:.5;transform:rotate(-15deg);letter-spacing:10px}"],changeDetection:0}),e})();var hn=n("ygam");let fn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[dt.a,pt.a,ht.a,jt.b,ft.a,S.b,Ct.b,hn.a,E.c,o.k,rt.a,Rt.b,L.f,D.m,W.c,Bt.b,N.b,Ht.b]]}),e})();var Cn=n("LJN2");let xn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[Cn.a,E.c,o.k,rt.a]]}),e})();var vn=n("zJTi");let bn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[dt.a,pt.a,fn,xn,S.b,vn.a,E.c,o.k,vt.c,rt.a]]}),e})();var Sn=Uint8Array,_n=Uint16Array,In=Int32Array,On=new Sn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),En=new Sn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),yn=new Sn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Mn=function(e,t){for(var n=new _n(31),i=0;i<31;++i)n[i]=t+=1<<e[i-1];var o=new In(n[30]);for(i=1;i<30;++i)for(var a=n[i];a<n[i+1];++a)o[a]=a-n[i]<<5|i;return{b:n,r:o}},Pn=Mn(On,2),wn=Pn.b,Tn=Pn.r;wn[28]=258,Tn[258]=28;for(var kn=Mn(En,0).b,Ln=new _n(32768),An=0;An<32768;++An){var Nn=(43690&An)>>1|(21845&An)<<1;Ln[An]=((65280&(Nn=(61680&(Nn=(52428&Nn)>>2|(13107&Nn)<<2))>>4|(3855&Nn)<<4))>>8|(255&Nn)<<8)>>1}var Dn=function(e,t,n){for(var i=e.length,o=0,a=new _n(t);o<i;++o)e[o]&&++a[e[o]-1];var r,s=new _n(t);for(o=1;o<t;++o)s[o]=s[o-1]+a[o-1]<<1;if(n){r=new _n(1<<t);var l=15-t;for(o=0;o<i;++o)if(e[o])for(var c=o<<4|e[o],d=t-e[o],m=s[e[o]-1]++<<d,g=m|(1<<d)-1;m<=g;++m)r[Ln[m]>>l]=c}else for(r=new _n(i),o=0;o<i;++o)e[o]&&(r[o]=Ln[s[e[o]-1]++]>>15-e[o]);return r},Fn=new Sn(288);for(An=0;An<144;++An)Fn[An]=8;for(An=144;An<256;++An)Fn[An]=9;for(An=256;An<280;++An)Fn[An]=7;for(An=280;An<288;++An)Fn[An]=8;var Rn=new Sn(32);for(An=0;An<32;++An)Rn[An]=5;var Un=Dn(Fn,9,1),jn=Dn(Rn,5,1),Bn=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},Gn=function(e,t,n){var i=t/8|0;return(e[i]|e[i+1]<<8)>>(7&t)&n},Vn=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},Hn=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var i=new Sn(n-t);return i.set(e.subarray(t,n)),i},zn=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],$n=function(e,t,n){var i=new Error(t||zn[e]);if(i.code=e,Error.captureStackTrace&&Error.captureStackTrace(i,$n),!n)throw i;return i},qn=function(e,t,n,i){var o=e.length,a=i?i.length:0;if(!o||t.f&&!t.l)return n||new Sn(0);var r=!n||2!=t.i,s=t.i;n||(n=new Sn(3*o));var l,c=function(e){var t=n.length;if(e>t){var i=new Sn(Math.max(2*t,e));i.set(n),n=i}},d=t.f||0,m=t.p||0,g=t.b||0,p=t.l,u=t.d,h=t.m,f=t.n,C=8*o;do{if(!p){d=Gn(e,m,1);var x=Gn(e,m+1,3);if(m+=3,!x){var v=e[(l=m,(T=4+((l+7)/8|0))-4)]|e[T-3]<<8,b=T+v;if(b>o){s&&$n(0);break}r&&c(g+v),n.set(e.subarray(T,b),g),t.b=g+=v,t.p=m=8*b,t.f=d;continue}if(1==x)p=Un,u=jn,h=9,f=5;else if(2==x){var S=Gn(e,m,31)+257,_=Gn(e,m+10,15)+4,I=S+Gn(e,m+5,31)+1;m+=14;for(var O=new Sn(I),E=new Sn(19),y=0;y<_;++y)E[yn[y]]=Gn(e,m+3*y,7);m+=3*_;var M=Bn(E),P=(1<<M)-1,w=Dn(E,M,1);for(y=0;y<I;){var T,k=w[Gn(e,m,P)];if(m+=15&k,(T=k>>4)<16)O[y++]=T;else{var L=0,A=0;for(16==T?(A=3+Gn(e,m,3),m+=2,L=O[y-1]):17==T?(A=3+Gn(e,m,7),m+=3):18==T&&(A=11+Gn(e,m,127),m+=7);A--;)O[y++]=L}}var N=O.subarray(0,S),D=O.subarray(S);h=Bn(N),f=Bn(D),p=Dn(N,h,1),u=Dn(D,f,1)}else $n(1);if(m>C){s&&$n(0);break}}r&&c(g+131072);for(var F=(1<<h)-1,R=(1<<f)-1,U=m;;U=m){var j=(L=p[Vn(e,m)&F])>>4;if((m+=15&L)>C){s&&$n(0);break}if(L||$n(2),j<256)n[g++]=j;else{if(256==j){U=m,p=null;break}var B=j-254;j>264&&(B=Gn(e,m,(1<<(H=On[y=j-257]))-1)+wn[y],m+=H);var G=u[Vn(e,m)&R],V=G>>4;if(G||$n(3),m+=15&G,D=kn[V],V>3){var H=En[V];D+=Vn(e,m)&(1<<H)-1,m+=H}if(m>C){s&&$n(0);break}r&&c(g+131072);var z=g+B;if(g<D){var $=a-D,q=Math.min(D,z);for($+g<0&&$n(3);g<q;++g)n[g]=i[$+g]}for(;g<z;g+=4)n[g]=n[g-D],n[g+1]=n[g+1-D],n[g+2]=n[g+2-D],n[g+3]=n[g+3-D];g=z}}t.l=p,t.p=U,t.b=g,t.f=d,p&&(d=1,t.m=h,t.d=u,t.n=f)}while(!d);return g==n.length?n:Hn(n,0,g)},Wn=new Sn(0),Kn=function(e,t){return e[t]|e[t+1]<<8},Yn=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},Zn=function(e,t){return Yn(e,t)+4294967296*Yn(e,t+4)};function Jn(e,t){return qn(e,{i:2},t&&t.out,t&&t.dictionary)}var Qn="undefined"!=typeof TextDecoder&&new TextDecoder;try{Qn.decode(Wn,{stream:!0})}catch(ua){}var Xn=function(e,t){return t+30+Kn(e,t+26)+Kn(e,t+28)},ei=function(e,t,n){var i=Kn(e,t+28),o=function(e,t){if(t){for(var n="",i=0;i<e.length;i+=16384)n+=String.fromCharCode.apply(null,e.subarray(i,i+16384));return n}if(Qn)return Qn.decode(e);var o=function(e){for(var t="",n=0;;){var i=e[n++],o=(i>127)+(i>223)+(i>239);if(n+o>e.length)return{s:t,r:Hn(e,n-1)};o?3==o?(i=((15&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536,t+=String.fromCharCode(55296|i>>10,56320|1023&i)):t+=String.fromCharCode(1&o?(31&i)<<6|63&e[n++]:(15&i)<<12|(63&e[n++])<<6|63&e[n++]):t+=String.fromCharCode(i)}}(e),a=o.s;return(n=o.r).length&&$n(8),a}(e.subarray(t+46,t+46+i),!(2048&Kn(e,t+8))),a=t+46+i,r=Yn(e,t+20),s=n&&4294967295==r?ti(e,a):[r,Yn(e,t+24),Yn(e,t+42)],l=s[0],c=s[1],d=s[2];return[Kn(e,t+10),l,c,o,a+Kn(e,t+30)+Kn(e,t+32),d]},ti=function(e,t){for(;1!=Kn(e,t);t+=4+Kn(e,t+2));return[Zn(e,t+12),Zn(e,t+4),Zn(e,t+20)]};function ni(e,t){for(var n={},i=e.length-22;101010256!=Yn(e,i);--i)(!i||e.length-i>65558)&&$n(13);var o=Kn(e,i+8);if(!o)return{};var a=Yn(e,i+16),r=4294967295==a||65535==o;if(r){var s=Yn(e,i-12);(r=101075792==Yn(e,s))&&(o=Yn(e,s+32),a=Yn(e,s+48))}for(var l=t&&t.filter,c=0;c<o;++c){var d=ei(e,a,r),m=d[0],g=d[1],p=d[2],u=d[3],h=d[4],f=Xn(e,d[5]);a=h,l&&!l({name:u,size:g,originalSize:p,compression:m})||(m?8==m?n[u]=Jn(e.subarray(f,f+g),{out:new Sn(p)}):$n(14,"unknown compression type "+m):n[u]=Hn(e,f,f+g))}return n}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;var ii=n("JcrP"),oi=n("vvTe"),ai=n("mE1D"),ri=n("cHiK"),si=n("T0RT");const li=function(){return{standalone:!0}};function ci(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div"),i["\u0275\u0275elementStart"](2,"mg-file-input",1),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().files=t}))("ngModelChange",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onFileInputChange()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("showFileDetails",!1)("dropOnElementOnly",!0)("multiple",!0)("ngModelOptions",i["\u0275\u0275pureFunction0"](5,li))("ngModel",e.files)}}function di(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div",2),i["\u0275\u0275element"](2,"div",3),i["\u0275\u0275elementStart"](3,"h2"),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](e.files[0].name)}}let mi=(()=>{class e{constructor(e){this.matDialog=e,this.studentFileUploaded=new i.EventEmitter,this.fileProcessed=!1,this.files=[]}ngOnInit(){}onFileInputChange(){this.files&&0!==this.files.length&&this.files[0]&&this._launchXlsUploader(this.files[0])}_launchXlsUploader(e){const t=new ai.d,n=new ai.r,i=new ai.l,o=new ai.f,a=new ai.k,r=new ai.e;this.matDialog.open(ri.a,{data:{fields:[t,n,i,o,a,r],file:e,allowNoIdField:!0,onValidate:e=>{const s=[];for(let l=0;l<e.length;l++){const c=e[l],d=t.getValue(c),m=n.getValue(c),g=i.getValue(c),p=o.getValue(c),u=a.getValue(c);d||m||g||p&&u||s.push({recordIndex:l,errors:["Missing an email, studentId, name or first name and last name field"]}),r.getValue(c)||s.push({recordIndex:l,errors:["Missing a required field: File Name"]})}return{formatErrors:[],rowErrors:s}}},panelClass:"mg-no-padding-dialog"}).afterClosed().subscribe(e=>{e.length>0&&(this.fileProcessed=!0,this.studentFileUploaded.emit(e))})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](Ft.b))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-student-id-map-file-upload"]],outputs:{studentFileUploaded:"studentFileUploaded"},decls:2,vars:2,consts:[[4,"ngIf"],["name","uploader-input","icon","upload-icon-o","customTitleText","First Upload Student File","helperText","Drag and Drop ID File to Upload","customBottomText","(click to browse)","accept",".xls, .xlsx, .csv","compactIcon","list_file-o",3,"showFileDetails","dropOnElementOnly","multiple","ngModelOptions","ngModel","ngModelChange"],[1,"successful-upload"],[1,"success-checkmark"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,ci,3,6,"ng-container",0),i["\u0275\u0275template"](1,di,5,1,"ng-container",0)),2&e&&(i["\u0275\u0275property"]("ngIf",!t.fileProcessed),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.fileProcessed))},directives:[E.o,si.a,D.t,D.w],styles:[".success-checkmark[_ngcontent-%COMP%]{background-color:#fff;color:#4caf50;-webkit-mask-image:url(/assets/icon/checkmark.svg);mask-image:url(/assets/icon/checkmark.svg);-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-position:center;mask-position:center;-webkit-mask-size:.6em;mask-size:.6em;background-color:#4caf50;background-size:200px;-webkit-mask-size:40px;transform:none;display:inline-block;height:22px;width:100%;margin:20px 0 0}.successful-upload[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#4caf50;font-size:18px;font-weight:700;padding:0;margin:10px 0 20px}"],changeDetection:0}),e})();var gi=n("B3cG");const pi=function(){return{standalone:!0}};let ui=(()=>{class e{constructor(){this.files=[],this.customTitleText=null,this.customBottomText=null,this.helperText="",this.accept=gi.a,this.filesSelected=new i.EventEmitter}ngOnInit(){}onFileSelected(){return Object(a.a)(this,void 0,void 0,(function*(){this.files&&0!==this.files.length&&this.files[0]&&(yield this.filesSelected.emit(this.files))}))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-student-id-mass-uploader"]],inputs:{customTitleText:"customTitleText",customBottomText:"customBottomText",helperText:"helperText",accept:"accept"},outputs:{filesSelected:"filesSelected"},decls:1,vars:10,consts:[["name","uploader-input","icon","upload-icon-o",3,"showFileDetails","dropOnElementOnly","multiple","accept","ngModelOptions","customTitleText","helperText","customBottomText","ngModel","ngModelChange"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mg-file-input",0),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.files=e}))("ngModelChange",(function(){return t.onFileSelected()})),i["\u0275\u0275elementEnd"]()),2&e&&i["\u0275\u0275property"]("showFileDetails",!1)("dropOnElementOnly",!0)("multiple",!0)("accept",t.accept)("ngModelOptions",i["\u0275\u0275pureFunction0"](9,pi))("customTitleText",t.customTitleText)("helperText",t.helperText)("customBottomText",t.customBottomText)("ngModel",t.files)},directives:[si.a,D.t,D.w],styles:[""],changeDetection:0}),e})();var hi=n("pzvA"),fi=n("BTe0");function Ci(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function xi(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,Ci,1,0,"ng-container",8),i["\u0275\u0275elementContainerEnd"]()),2&e){i["\u0275\u0275nextContext"]();const e=i["\u0275\u0275reference"](10);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",e)}}function vi(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function bi(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,vi,1,0,"ng-container",8),i["\u0275\u0275elementContainerEnd"]()),2&e){i["\u0275\u0275nextContext"]();const e=i["\u0275\u0275reference"](12);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",e)}}function Si(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function _i(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,Si,1,0,"ng-container",8),i["\u0275\u0275elementContainerEnd"]()),2&e){i["\u0275\u0275nextContext"]();const e=i["\u0275\u0275reference"](14);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",e)}}function Ii(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",9),i["\u0275\u0275elementStart"](1,"div",10),i["\u0275\u0275elementStart"](2,"div",11),i["\u0275\u0275elementStart"](3,"h2"),i["\u0275\u0275text"](4,"Option 1"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"mg-student-id-map-file-upload",12),i["\u0275\u0275listener"]("studentFileUploaded",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onStudentIdMapFileUpload(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"mg-student-id-mass-uploader",13),i["\u0275\u0275listener"]("filesSelected",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onImagesSelected(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"div",14),i["\u0275\u0275elementStart"](8,"p"),i["\u0275\u0275text"](9," Each file should contain a column for the student ID and the photo file name "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"div",15),i["\u0275\u0275elementStart"](11,"h2"),i["\u0275\u0275text"](12,"Option 2"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"mg-student-id-mass-uploader",16),i["\u0275\u0275listener"]("filesSelected",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onImagesSelected(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"div",14),i["\u0275\u0275elementStart"](15,"p"),i["\u0275\u0275text"](16," Default file names for photos must be [idnumber.jpg] or [idnumber.png]. "),i["\u0275\u0275element"](17,"br"),i["\u0275\u0275text"](18,"Ex: 422309.jpg"),i["\u0275\u0275element"](19,"br"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](20,"p"),i["\u0275\u0275element"](21,"br"),i["\u0275\u0275text"](22," For best results, upload in small batches of a few hundred images, and make sure the images you are uploading are less than 1mb in size each. "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function Oi(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div",22),i["\u0275\u0275elementStart"](2,"strong"),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"br"),i["\u0275\u0275elementStart"](5,"span"),i["\u0275\u0275text"](6),i["\u0275\u0275pipe"](7,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.ngIf,n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate2"](" Uploaded ",e," of ",n.totalFileCount," "),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("Currently Uploading ",i["\u0275\u0275pipeBind1"](7,3,n.currentFileName$),"...")}}function Ei(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div",23),i["\u0275\u0275element"](2,"mat-progress-bar",24),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.ngIf,n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("value",e/n.totalFileCount*100)}}function yi(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",17),i["\u0275\u0275elementStart"](1,"div",18),i["\u0275\u0275element"](2,"div",19),i["\u0275\u0275template"](3,Oi,8,5,"ng-container",4),i["\u0275\u0275pipe"](4,"async"),i["\u0275\u0275template"](5,Ei,3,1,"ng-container",4),i["\u0275\u0275pipe"](6,"async"),i["\u0275\u0275elementStart"](7,"div",20),i["\u0275\u0275elementStart"](8,"mg-button-outline",21),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onUploadCancelled()})),i["\u0275\u0275text"](9,"Cancel Upload"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](4,2,e.currentCount$)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](6,4,e.currentCount$))}}function Mi(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",28),i["\u0275\u0275elementStart"](1,"div",29),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div",30),i["\u0275\u0275elementStart"](4,"mg-button-outline",21),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).onDownloadErrorsClicked()})),i["\u0275\u0275text"](5," Download All Errors "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" There's ",e.uploadErrors.length>1?e.uploadErrors.length+" errors":e.uploadErrors.length+" error"," to resolve. ")}}function Pi(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",25),i["\u0275\u0275elementStart"](1,"h2",26),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](3,Mi,6,1,"div",27),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" Successfully imported ",e.successfulUploads>1?e.successfulUploads+" images":e.successfulUploads+" image"," to the list. "),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.uploadErrors.length>0)}}var wi=function(e){return e[e.SETUP=1]="SETUP",e[e.UPLOADING=2]="UPLOADING",e[e.SUMMARY=3]="SUMMARY",e}({});let Ti=(()=>{class e{constructor(e,t,n){this.studentIdService=e,this.studentIdImageService=t,this._cdr=n,this.listUploaderRows=[],this.uploadErrors=[],this.files=[],this.enablePhotoUpload=!1,this.currentUploadState=wi.SETUP,this.uploadStates=wi,this.totalFileCount=0,this.successfulUploads=0,this.uploadCanceled=!1,this.currentFileSubject=new l.a(""),this.currentFileName$=this.currentFileSubject.asObservable(),this.currentCountSubject=new l.a(0),this.currentCount$=this.currentCountSubject.asObservable(),this.fileMap=new Map}ngOnInit(){}onStudentIdMapFileUpload(e){this.listUploaderRows=e,this.enablePhotoUpload=!0}getMimeTypeFromArrayBuffer(e){if(e.length>=4){const t=new Array(4);for(let n=0;n<4;n++)t[n]=e[n].toString(16);switch(t.join("").toUpperCase()){case"89504E47":return"image/png";case"47494638":return"image/gif";case"FFD8FFDB":case"FFD8FFE0":return"image/jpeg";default:return null}}return null}onImagesSelected(e){return Object(a.a)(this,void 0,void 0,(function*(){const t=[];for(const n of e)if("application/zip"===n.type){const e=yield n.arrayBuffer(),i=ni(new Uint8Array(e));for(const[n,o]of Object.entries(i)){const e=this.getMimeTypeFromArrayBuffer(o);if(null==e?void 0:e.includes("image")){const i=new File([o],n,{type:e});t.push(i)}}}else t.push(n);this.files=t,this.totalFileCount=e.length,this.currentUploadState=wi.UPLOADING,this.triggerIdUploads()}))}onDownloadErrorsClicked(){this.downloadXlsx()}onUploadCancelled(){this.uploadCanceled=!0}triggerIdUploads(){return Object(a.a)(this,void 0,void 0,(function*(){this.listUploaderRows.length>0?yield this._uploadIdsUsingList():yield this._uploadIdsUsingImageFileNames(),this.currentUploadState=wi.SUMMARY,this.uploadCanceled=!1,this._cdr.markForCheck()}))}_uploadIdsUsingList(){return Object(a.a)(this,void 0,void 0,(function*(){let e="studentId";const t=this.listUploaderRows[0];let n=!1;t.studentId?e="studentId":t.email?e="email":t.name?e="name":t.firstName&&t.lastName&&(e="name",n=!0);const i=new Map;(yield this._getAllIdsInMinga()).forEach(t=>{i.set(t[e],t)}),this.listUploaderRows.forEach(e=>{const t=e.fileName;Array.isArray(t)||this.fileMap.set(t,e)}),yield this._processFiles(t=>{const o=this.fileMap.get(t.name);if(!o)throw new Error("File was not in map file");{let t=o[e];if(n&&(t=(new ai.f).getValue(o).toLowerCase()+" "+(new ai.k).getValue(o).toLowerCase()),!Array.isArray(t))return i.get(t)}})}))}_uploadIdsUsingImageFileNames(){return Object(a.a)(this,void 0,void 0,(function*(){const e=new Map;(yield this._getAllIdsInMinga()).forEach(t=>{e.set(t.studentId,t)}),yield this._processFiles(t=>{const n=Object(oi.getFileTitle)(t.name);return e.get(n)})}))}_processFiles(e){return Object(a.a)(this,void 0,void 0,(function*(){for(let t=0;t<this.files.length;t++){const n=this.files[t];if(this.currentCountSubject.next(t),this.currentFileSubject.next(n.name),this.uploadCanceled)this.uploadErrors.push({fileName:n.name,errors:["Upload cancelled"]});else try{const t=e(n);t?yield this._uploadFile(n,t.personHash).catch(e=>{this.uploadErrors.push({fileName:n.name,errors:[e.message]})}):this.uploadErrors.push({fileName:n.name,errors:["No matching person in Minga"]})}catch(ua){this.uploadErrors.push({fileName:n.name,errors:[ua]})}}}))}_getAllIdsInMinga(){return Object(a.a)(this,void 0,void 0,(function*(){return yield this.studentIdService.getAllIdListItemsInMinga()}))}_uploadFile(e,t){return Object(a.a)(this,void 0,void 0,(function*(){yield this.studentIdImageService.uploadFile(e,t),yield this._saveToBackend(t+"."+Object(oi.getFileExtension)(e.name),t),this.successfulUploads++}))}_saveToBackend(e,t){return Object(a.a)(this,void 0,void 0,(function*(){return this.studentIdService.bulkUpdateStudentIdImage([{fileName:e,personHash:t}])}))}downloadXlsx(){const e=this._createXlsxWorkbook();ii.c(e,"id-upload-errors.xlsx")}_createXlsxWorkbook(){const e=ii.b.book_new(),t=this.uploadErrors.map((e,t)=>{let n="";return n=Array.isArray(e.errors)?e.errors.join("\n"):e.errors,[e.fileName,n]});t.unshift(["File name","Errors"]);const n=ii.b.aoa_to_sheet(t,{cellDates:!0});return n["!cols"]||(n["!cols"]=[]),ii.b.book_append_sheet(e,n),e}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](u.a),i["\u0275\u0275directiveInject"](j.a),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-student-id-mass-upload-page"]],decls:15,vars:3,consts:[[1,"manager-overlay-subpage-header"],["fxLayout","row","fxLayout.lt-sm","column","fxLayoutAlign","start center","fxLayoutAlign.lt-sm","start stretch","fxLayoutGap.lt-sm","15px"],["fxFlex","grow"],["fxLayout","row"],[4,"ngIf"],["setupTpl",""],["uploadingTpl",""],["summaryTpl",""],[4,"ngTemplateOutlet"],["fxLayout","row","fxLayoutAlign","center start",1,"uploader-container"],["fxLayout","row","fxLayout.xs","column"],["fxLayout","column","fxLayoutAlign","start center","fxFlex","50%","fxFlex.xs","100%",1,"column"],[3,"studentFileUploaded"],["customTitleText","Then Upload Photos","helperText","Drag and Drop Photos to Upload","customBottomText","(click to browse)",3,"filesSelected"],[1,"student-id-mass-uploader-helper-text"],["fxLayout","column","fxLayoutAlign","start center","fxFlex","50%","fxFlex.xs","100%","fxFlexAlign","auto",1,"column"],["customTitleText","Upload Photos or Zip files and assign them to your student list within Minga automatically by file name","customBottomText","(click to browse)","accept","image/jpeg,image/png,image/gif,application/zip",3,"filesSelected"],[1,"progress-container"],["fxLayout","column",1,"progress-inner"],[1,"progress-inner-loader"],["fxLayout","row","fxLayoutAlign","center center"],[3,"click"],[1,"progress-inner-text"],["fxLayoutAlign","center center",1,"progress-bar"],[3,"value"],[1,"summary-container"],[1,"success"],["fxLayout","row","fxLayoutAlign","space-between center",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between center"],[1,"error"],["fxLayoutAlign","end center"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"div",2),i["\u0275\u0275elementStart"](3,"h2"),i["\u0275\u0275text"](4,"Mass Photo Upload"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"div",3),i["\u0275\u0275template"](6,xi,2,1,"ng-container",4),i["\u0275\u0275template"](7,bi,2,1,"ng-container",4),i["\u0275\u0275template"](8,_i,2,1,"ng-container",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](9,Ii,23,0,"ng-template",null,5,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](11,yi,10,6,"ng-template",null,6,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](13,Pi,4,2,"ng-template",null,7,i["\u0275\u0275templateRefExtractor"])),2&e&&(i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",t.currentUploadState==t.uploadStates.SETUP),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.currentUploadState==t.uploadStates.UPLOADING),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.currentUploadState==t.uploadStates.SUMMARY))},directives:[O.e,O.d,O.f,O.b,E.o,E.t,mi,ui,O.a,hi.a,fi.a],pipes:[E.b],styles:['[_nghost-%COMP%]{display:flex;flex-direction:column;position:relative}.manager-overlay-subpage[_ngcontent-%COMP%]{margin-bottom:3.5294117647rem}.manager-overlay-subpage-header[_ngcontent-%COMP%]{background:#f4f4f4;padding:1.1764705882rem 20%;box-sizing:border-box;margin:-20px -20% 0;width:calc(140%)}.manager-overlay-subpage-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{display:inline-block;font-size:1.2941176471rem;font-weight:800;color:#036;padding:0;margin:0}@media print,screen and (max-width:37.49875em){.manager-overlay-subpage-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;display:block}}.manager-overlay-subpage-content[_ngcontent-%COMP%]{flex:1;padding:1.1764705882rem 0;box-sizing:border-box}.manager-overlay-subpage-content.white-bg[_ngcontent-%COMP%]{background-color:#fff}.quick-action-container[_ngcontent-%COMP%]{margin-bottom:1.1764705882rem}.quick-action-container[_ngcontent-%COMP%]:empty{display:none}.quick-action-btn[_ngcontent-%COMP%]{-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;-webkit-appearance:none;border-radius:0;text-align:inherit;box-shadow:none;color:inherit;font:inherit;padding:0;margin:0;background:none;border:none;outline:none;box-sizing:border-box;cursor:pointer;font-size:.8823529412rem;color:#036;display:inline-flex;align-items:center;justify-content:center;--mg-icon-size:20px}.quick-action-btn[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{margin-right:.2941176471rem}.quick-action-btn[_ngcontent-%COMP%]:hover{opacity:.7}@media print,screen and (max-width:37.49875em){.quick-action-btn[_ngcontent-%COMP%]{display:none}}.manager-layout-loading-container[_ngcontent-%COMP%]{padding:2.9411764706rem 0}.header-title[_ngcontent-%COMP%]{display:inline-block;font-size:1.2941176471rem;font-weight:800;color:#036;padding:0;margin:0}@media print,screen and (max-width:37.49875em){.header-title[_ngcontent-%COMP%]{text-align:center;display:block}}.column[_ngcontent-%COMP%]{padding:40px}.column[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#036;font-size:23px;padding:0;margin:0 0 10px;display:block;text-align:center;font-weight:700}mg-student-id-map-file-upload[_ngcontent-%COMP%], mg-student-id-mass-uploader[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:6px;padding:0 10px;background:#fff;margin-bottom:20px;max-width:500px;width:100%;text-align:center;line-height:1.2;box-sizing:border-box;box-shadow:0 0 6px rgba(0,0,0,.17)}mg-student-id-map-file-upload[_ngcontent-%COMP%]     .drop-area .icon-o, mg-student-id-mass-uploader[_ngcontent-%COMP%]     .drop-area .icon-o{width:40px!important;height:40px!important;padding:0;color:#036!important;margin:0 auto!important}mg-student-id-map-file-upload[_ngcontent-%COMP%]     .drop-area h2 .text, mg-student-id-mass-uploader[_ngcontent-%COMP%]     .drop-area h2 .text{font-size:23px!important;line-height:1.2}mg-student-id-map-file-upload[_ngcontent-%COMP%]     .drop-area .sub-text, mg-student-id-mass-uploader[_ngcontent-%COMP%]     .drop-area .sub-text{color:#036!important;font-weight:700!important;font-size:16px;font-weight:400!important;margin-bottom:5px!important}mg-student-id-map-file-upload[_ngcontent-%COMP%]     .drop-area .sub-text:last-child, mg-student-id-mass-uploader[_ngcontent-%COMP%]     .drop-area .sub-text:last-child{margin-bottom:0!important}mg-student-id-map-file-upload[_ngcontent-%COMP%]:last-child, mg-student-id-mass-uploader[_ngcontent-%COMP%]:last-child{margin-bottom:0}.student-id-mass-uploader-helper-text[_ngcontent-%COMP%]{text-align:center}.student-id-mass-uploader-helper-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#036;max-width:400px;font-size:16px;margin:0;padding:0 15px;box-sizing:border-box}.progress-inner[_ngcontent-%COMP%], .summary-container[_ngcontent-%COMP%]{width:80%;max-width:1152px;padding-top:100px;margin:0 auto;box-sizing:border-box}@media (min-width:768px){.progress-inner[_ngcontent-%COMP%], .summary-container[_ngcontent-%COMP%]{width:100%;padding:16px}}.progress-container[_ngcontent-%COMP%]{width:100%}.progress-bar[_ngcontent-%COMP%]{width:25%;margin:auto;padding-bottom:10px;padding-top:10px}.progress-inner[_ngcontent-%COMP%]{margin-top:30px}.progress-inner-text[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px;span-font-size:15px}.progress-inner-loader[_ngcontent-%COMP%]{width:270px;height:280px;margin:0 auto 50px;position:relative}.progress-inner-loader[_ngcontent-%COMP%]:after, .progress-inner-loader[_ngcontent-%COMP%]:before{display:block;content:"";width:162px;height:204px;position:absolute;background-size:cover;animation:swing .75s ease-in-out infinite alternate}.progress-inner-loader[_ngcontent-%COMP%]:before{background-image:url(/assets/student-id/id-placeholder-girl.svg);left:0;top:0}.progress-inner-loader[_ngcontent-%COMP%]:after{background-image:url(/assets/student-id/id-placeholder-boy.svg);right:0;bottom:0}@keyframes swing{0%{transform:rotate(3deg)}to{transform:rotate(-3deg)}}.summary-container[_ngcontent-%COMP%]   h2.success[_ngcontent-%COMP%]{color:#4ba083;font-size:27px;font-weight:700;padding:0;margin:0}.error[_ngcontent-%COMP%]{color:#ce6560;padding:15px 0;margin:0;font-size:23px;font-weight:700}.uploader-container[_ngcontent-%COMP%]{width:100%}'],changeDetection:0}),e})();var ki=n("9F0b");let Li=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[ri.b,dt.a,ki.c,D.m,E.c]]}),e})(),Ai=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[ki.c,E.c,D.m]]}),e})(),Ni=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[Li,Ai,dt.a,E.c,fi.b,rt.a]]}),e})();var Di=n("tfHx"),Fi=n("Ggka"),Ri=function(e){return e.MODAL_TITLE="Select an Image",e.BUTTON_LABEL_SAVE="Select",e.BUTTON_LABEL_PENDING_UPLOAD="Uploading...",e}({}),Ui=n("yaoB"),ji=n("jcBT"),Bi=n("StFh");function Gi(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function Vi(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function Hi(e,t){if(1&e&&i["\u0275\u0275template"](0,Vi,1,0,"ng-container",1),2&e){i["\u0275\u0275nextContext"]();const e=i["\u0275\u0275reference"](8);i["\u0275\u0275property"]("ngTemplateOutlet",e)}}function zi(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",10),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const n=t.$implicit;return i["\u0275\u0275nextContext"](2).updateSelectedBanner(n)})),i["\u0275\u0275element"](1,"mg-image",11),i["\u0275\u0275pipe"](2,"mgImageUrls"),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275classProp"]("selected-border",e.getBannerHash()==n.selectedBannerHash),i["\u0275\u0275property"]("srcs",i["\u0275\u0275pipeBind2"](2,3,e.getImage(),n._imagePreviewSizes))}}function $i(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",5),i["\u0275\u0275elementStart"](1,"div",6),i["\u0275\u0275elementStart"](2,"div",7),i["\u0275\u0275elementStart"](3,"mg-file-input-upload",8),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().selectedAssetPath=t}))("onFileUpload",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().saveUploadedAsset(t)}))("onStatusChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onStatusChange(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](4,zi,3,6,"div",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](3),i["\u0275\u0275classProp"]("selected-border",e.selectedAssetPath),i["\u0275\u0275property"]("showFileDetails",!1)("ngModel",e.selectedAssetPath),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",e.stickerImageList)}}function qi(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",12),i["\u0275\u0275elementStart"](1,"div"),i["\u0275\u0275elementStart"](2,"mg-generic-button",13),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onSubmit()})),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("isDisabled",!e.canSubmit),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.canSubmit?e.MESSAGES.BUTTON_LABEL_SAVE:e.MESSAGES.BUTTON_LABEL_PENDING_UPLOAD," ")}}let Wi=(()=>{class e{constructor(e,t){this.data=e,this._modalOverlay=t,this.stickerImageList=[],this.selectedAssetPath="",this.selectedBannerHash="",this.MESSAGES=Ri,this.modalBg=Di.c.PURPLE,this._uploadStatus="VALID",this._imagePreviewSizes=["blurloading1",["studio","bannerlibpreview","cardbanner"]],e.stickerImageList&&(this.stickerImageList=e.stickerImageList),e.assetPath?this.selectedAssetPath=e.assetPath:e.bannerHash&&(this.selectedBannerHash=e.bannerHash)}get canSubmit(){return"PENDING"!==this._uploadStatus}onSubmit(){this.canSubmit&&this._modalOverlay.close(Di.f.SUBMIT,{assetPath:this.selectedAssetPath,bannerHash:this.selectedBannerHash,bannerImage:this.selectedBannerImage})}updateSelectedBanner(e){this.selectedBannerHash=e.getBannerHash(),this.selectedAssetPath="",this.selectedBannerImage=e.getImage()}saveUploadedAsset(e){this.selectedBannerHash=""}onStatusChange(e){this._uploadStatus=e}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](Di.b),i["\u0275\u0275directiveInject"](Di.d))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-sticker-selector-dialog"]],decls:9,vars:4,consts:[["size","auto",3,"overlayTitle","headerBackground","isLoading"],[4,"ngTemplateOutlet"],["overlayFooter",""],["mainContent",""],["modalFooterTemplate",""],[1,"stickers-container"],["fxLayout","row wrap","fxLayoutAlign","center","fxLayoutGap","15px"],[1,"sticker-item","image-uploader"],["accept","image/*","icon","camera","customTitleText","Upload Your Own","previewAspectRatio","2:1",1,"sticker-image-uploader",3,"showFileDetails","ngModel","ngModelChange","onFileUpload","onStatusChange"],["class","sticker-item",3,"click",4,"ngFor","ngForOf"],[1,"sticker-item",3,"click"],[3,"srcs"],["fxLayout","row","fxLayoutAlign","end center",1,"overlay-footer"],["colorTheme","aqua",3,"isDisabled","click"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mg-overlay-primary",0),i["\u0275\u0275elementContainerStart"](1),i["\u0275\u0275template"](2,Gi,1,0,"ng-container",1),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275template"](3,Hi,1,1,"ng-template",null,2,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](5,$i,5,5,"ng-template",null,3,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](7,qi,4,2,"ng-template",null,4,i["\u0275\u0275templateRefExtractor"])),2&e){const e=i["\u0275\u0275reference"](6);i["\u0275\u0275property"]("overlayTitle",t.MESSAGES.MODAL_TITLE)("headerBackground",t.modalBg)("isLoading",!1),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngTemplateOutlet",e)}},directives:[Ui.a,E.t,O.e,O.d,O.f,Ut.a,D.t,D.w,E.n,ji.a,$e.a],pipes:[Bi.a],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");.stickers-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}.sticker-item[_ngcontent-%COMP%]{height:80px;width:80px;margin:15px}.sticker-item[_ngcontent-%COMP%]   mg-image[_ngcontent-%COMP%]{height:100%;width:100%;cursor:pointer}@media print,screen and (min-width:37.5em){.sticker-item[_ngcontent-%COMP%]{height:110px;width:110px}}.image-uploader[_ngcontent-%COMP%]{position:relative}.image-uploader[_ngcontent-%COMP%]   mg-image[_ngcontent-%COMP%]{position:absolute}mg-file-input-upload[_ngcontent-%COMP%]{width:80px;height:80px;position:absolute;background-color:#f4f4f4;border-radius:50%;overflow:hidden;z-index:1;--mg-file-input-icon-size-desktop:30px;--mg-file-input-icon-size-mobile:30px;--mg-file-input-icon-color:#036}mg-file-input-upload[_ngcontent-%COMP%]  .drop-info .text{font-size:9px!important;margin-top:-8px}mg-file-input-upload[_ngcontent-%COMP%]  .file-input-upload{padding-bottom:100%!important}@media print,screen and (min-width:37.5em){mg-file-input-upload[_ngcontent-%COMP%]{height:110px;width:110px}}.selected-border[_ngcontent-%COMP%]{border:3px solid transparent;outline:6px solid #e1c764;border-radius:50%}'],changeDetection:0}),e})();var Ki=n("5H0S"),Yi=function(e){return e.MODAL_TITLE_EDIT="Edit Sticker",e.MODAL_TITLE_NEW="Create Sticker",e.BUTTON_LABEL_SAVE="Save",e.BUTTON_LABEL_DELETE="Delete",e.BUTTON_LABEL_CANCEL="Cancel",e.BUTTON_LABEL_CREATE="Create",e.BUTTON_LABEL_SAVING="Saving",e.ERROR_SAVING="Failed to save sticker",e.ERROR_DELETING="Failed to delete your sticker, try again",e.DELETE_DIALOG_CONFIRM="Are you sure you want to delete this sticker?",e.DELETE_DIALOG_DISCARD="Are you sure you want to discard this sticker?",e.FIELD_LABEL_IMAGE="Select an Image",e.FIELD_LABEL_NAME="Name",e.FIELD_LABEL_PRIORITY="Priority (optional)",e.FIELD_LABEL_PRIORITY_HINT="Position the sticker further up/down the list. 0 represents the highest priority",e}({}),Zi=n("Fawd"),Ji=n("AdbN"),Qi=n("TNy8");let Xi=(()=>{class e{constructor(e){this._bannerLibrary=e}getStickerImageList(){return Object(a.a)(this,void 0,void 0,(function*(){const e=new Zi.BannerLibraryGetAllByType;return e.setType(Ji.BannerType.STICKER),(yield this._bannerLibrary.getAllByType(e)).getBannersList()}))}getStickerPath(e){return(null==e?void 0:e.assetPath)?e.assetPath:(null==e?void 0:e.bannerImage)?e.bannerImage:""}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](Qi.BannerLibrary))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var eo=n("q1Ec");function to(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function no(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function io(e,t){if(1&e&&i["\u0275\u0275template"](0,no,1,0,"ng-container",1),2&e){i["\u0275\u0275nextContext"]();const e=i["\u0275\u0275reference"](8);i["\u0275\u0275property"]("ngTemplateOutlet",e)}}const oo=function(){return["bannerlibpreview","cardbanner"]},ao=function(e){return["blurloading1",e]};function ro(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275element"](1,"mg-image",13),i["\u0275\u0275pipe"](2,"mgImageUrls"),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("srcs",i["\u0275\u0275pipeBind2"](2,2,e.stickerImage,i["\u0275\u0275pureFunction1"](6,ao,i["\u0275\u0275pureFunction0"](5,oo))))("background-size","contain")}}function so(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",14),i["\u0275\u0275elementStart"](1,"mg-icon"),i["\u0275\u0275text"](2,"camera"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}function lo(e,t){if(1&e&&i["\u0275\u0275element"](0,"mg-form-text-input",15),2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("label",e.MESSAGES.FIELD_LABEL_NAME)("control",e.form.get(e.FORM_FIELDS.NAME))("placeholder",e.MESSAGES.FIELD_LABEL_NAME)}}function co(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"mg-membership-list-table",16),i["\u0275\u0275listener"]("listUpdated",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).onMembershipListChange(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("hideHeader",!0)("lists",e.membershipList)}}const mo=function(){return{"min-width.px":620}};function go(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",5),i["\u0275\u0275elementStart"](1,"div",6),i["\u0275\u0275elementStart"](2,"div",7),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onOpenStickerDialogClicked()})),i["\u0275\u0275template"](3,ro,3,8,"ng-container",8),i["\u0275\u0275template"](4,so,3,0,"ng-template",null,9,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementStart"](6,"label"),i["\u0275\u0275text"](7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](8,lo,1,3,"mg-form-text-input",10),i["\u0275\u0275element"](9,"mg-form-text-input",11),i["\u0275\u0275template"](10,co,2,2,"ng-container",12),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275reference"](5),t=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngStyle.gt-md",i["\u0275\u0275pureFunction0"](10,mo)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",t.stickerImage)("ngIfElse",e),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](t.MESSAGES.FIELD_LABEL_IMAGE),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.isNoAccess),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("label",t.MESSAGES.FIELD_LABEL_PRIORITY)("hint",t.MESSAGES.FIELD_LABEL_PRIORITY_HINT)("control",t.form.get(t.FORM_FIELDS.PRIORITY))("step",1),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.isNewItem)}}function po(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"mg-generic-button",19),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).onClickDeleteConfirm()})),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("isRounded",!1),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.MESSAGES.BUTTON_LABEL_DELETE," ")}}function uo(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",17),i["\u0275\u0275template"](1,po,3,2,"div",12),i["\u0275\u0275elementStart"](2,"div"),i["\u0275\u0275elementStart"](3,"mg-generic-button",18),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onSubmit()})),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("fxLayoutAlign",e.isNoAccess||e.isNewItem?"end center":"space-between center"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!e.isNoAccess&&!e.isNewItem),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("isDisabled",!e.canSubmit),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.saveLabel," ")}}var ho=function(e){return e.NAME="NAME",e.PRIORITY="PRIORITY",e.STICKER_IMAGE="STICKER_IMAGE",e}({});let fo=(()=>{class e{constructor(e,t,n,i,o,a,r,s,l,c){this.dialogData=e,this._editModalOverlayRef=t,this._fb=n,this._cdr=i,this._membershipManager=o,this._dialog=a,this._snackBar=r,this._stickerBanners=s,this._stickerModal=l,this._rootService=c,this.stickerImage="",this.formState="idle",this.MESSAGES=Yi,this.FORM_FIELDS=ho,this.isNewItem=!1,this._startedAsNewItem=!1,this.initialLoad=!1,this.isNoAccess=!1,this.modalBg=Di.c.PURPLE,this.form=this._fb.group({[ho.NAME]:["",[D.D.required,D.D.minLength(1),D.D.maxLength(25)]],[ho.PRIORITY]:[0,[Fi.a.PositiveIntegerValidator()]],[ho.STICKER_IMAGE]:["",[D.D.required]]})}get canSubmit(){return"submitting"!==this.formState&&(this.isNewItem?this.form.dirty&&this.form.valid:this.form.valid)}get membershipList(){return this.list?[{id:this.list.id}]:[{type:kt.MembershipListType.STICKER}]}get saveLabel(){return"submitting"===this.formState?this.MESSAGES.BUTTON_LABEL_SAVING:this.isNewItem?this.MESSAGES.BUTTON_LABEL_CREATE:this.MESSAGES.BUTTON_LABEL_SAVE}ngOnInit(){var e,t,n;this.isNewItem=!(null===(t=null===(e=this.dialogData)||void 0===e?void 0:e.item)||void 0===t?void 0:t.id),this._startedAsNewItem=this.isNewItem,this.list=Object.assign({},(null===(n=this.dialogData)||void 0===n?void 0:n.item)||{}),this._listsUpdatedSub=this._membershipManager.listUpdated$.subscribe(e=>{e&&this._refreshList()});const i=this.form.get(ho.NAME),o=this.form.get(ho.PRIORITY);i.setValue(this.list.name),o.setValue(this.list.priority),this._updateStickerPath(this.list),this.isNoAccess=this.list.listType===kt.MembershipListType.NO_ACCESS}ngOnDestroy(){this._listsUpdatedSub.unsubscribe()}onSubmit(){return Object(a.a)(this,void 0,void 0,(function*(){if(this.canSubmit){this.formState="submitting";try{const e=this.form.get(ho.NAME).value,t=this.form.get(ho.PRIORITY).value;if(this.list=yield this._rootService.addLoadingPromise(this._updateList({name:e,priority:t})),!this.isNewItem)return this._editModalOverlayRef.close(this._startedAsNewItem?Di.f.CREATE:Di.f.SUBMIT,{item:this.list});this.isNewItem=!1}catch(ua){this._snackBar.open(Yi.ERROR_SAVING)}finally{this.formState="idle",this._cdr.markForCheck()}}}))}_updateStickerPath(e){this.stickerImage=this._stickerBanners.getStickerPath(e),this.form.get(ho.STICKER_IMAGE).setValue(this.stickerImage),this._cdr.markForCheck()}_refreshList(){return Object(a.a)(this,void 0,void 0,(function*(){this.isNewItem||(this.list=yield this._membershipManager.getMembershipList(this.list.id),this._cdr.markForCheck())}))}_updateList(e){return Object(a.a)(this,void 0,void 0,(function*(){const t=Object.assign(Object.assign({},this.list),e||{});return t.listType=kt.MembershipListType.STICKER,yield this._membershipManager.updateMembershipList(t)}))}onMembershipListChange(e){this.list=Object.assign({},e),this._cdr.markForCheck()}onClickDeleteConfirm(){return Object(a.a)(this,void 0,void 0,(function*(){this._dialog.open(Ki.a,{data:{text:{description:this.isNewItem?Yi.DELETE_DIALOG_DISCARD:Yi.DELETE_DIALOG_CONFIRM,deleteBtn:"Delete"}}}).afterClosed().subscribe(e=>Object(a.a)(this,void 0,void 0,(function*(){this._deleteList(e)})))}))}onOpenStickerDialogClicked(){return Object(a.a)(this,void 0,void 0,(function*(){this._stickerModal.open(Wi,{data:{assetPath:this.list.assetPath,bannerHash:this.list.bannerHash,stickerImageList:yield this._getStickerList()}}).afterClosed.subscribe(e=>{this._updateSticker(e)})}))}_updateSticker(e){return Object(a.a)(this,void 0,void 0,(function*(){if(!e)return;const{type:t,data:n}=e;t===Di.f.SUBMIT&&(n.assetPath?(this.list.assetPath=n.assetPath,this.list.bannerHash=""):n.bannerHash&&(this.list.bannerHash=n.bannerHash,this.list.assetPath="",n.bannerImage&&(this.list.bannerImage=n.bannerImage)),this._updateStickerPath(this.list))}))}_deleteList(e){return Object(a.a)(this,void 0,void 0,(function*(){try{if(!e||!e.confirmed||e.cancelled)return;this.isNewItem?this._editModalOverlayRef.close(Di.f.CLOSE):(yield this._membershipManager.deleteMembershipList(this.list.id),this._editModalOverlayRef.close(Di.f.DELETE,{item:this.list}))}catch(ua){this._snackBar.open(Yi.ERROR_DELETING)}}))}_getStickerList(){return Object(a.a)(this,void 0,void 0,(function*(){return yield this._stickerBanners.getStickerImageList()}))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](Di.b),i["\u0275\u0275directiveInject"](Di.d),i["\u0275\u0275directiveInject"](D.g),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](At.a),i["\u0275\u0275directiveInject"](Ft.b),i["\u0275\u0275directiveInject"](b.b),i["\u0275\u0275directiveInject"](Xi),i["\u0275\u0275directiveInject"](Di.e),i["\u0275\u0275directiveInject"](x.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-sis-edit"]],decls:9,vars:4,consts:[["size","auto",3,"overlayTitle","headerBackground","isLoading"],[4,"ngTemplateOutlet"],["overlayFooter",""],["mainContent",""],["modalFooterTemplate",""],["fxLayout","column","fxLayoutAlign","start stretch","fxLayoutGap","15px",3,"ngStyle.gt-md"],[1,"image"],[3,"click"],[4,"ngIf","ngIfElse"],["placeholder",""],[3,"label","control","placeholder",4,"ngIf"],["inputType","number","widthSize","medium",3,"label","hint","control","step"],[4,"ngIf"],[1,"student-id-icon-custom",3,"srcs","background-size"],["fxLayoutAlign","center center",1,"placeholder-sticker"],[3,"label","control","placeholder"],[3,"hideHeader","lists","listUpdated"],["fxLayout","row",1,"overlay-footer",3,"fxLayoutAlign"],["colorTheme","aqua",3,"isDisabled","click"],["colorTheme","red","variant","clear","paddingSize","none",3,"isRounded","click"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mg-overlay-primary",0),i["\u0275\u0275elementContainerStart"](1),i["\u0275\u0275template"](2,to,1,0,"ng-container",1),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275template"](3,io,1,1,"ng-template",null,2,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](5,go,11,11,"ng-template",null,3,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](7,uo,5,4,"ng-template",null,4,i["\u0275\u0275templateRefExtractor"])),2&e){const e=i["\u0275\u0275reference"](6);i["\u0275\u0275property"]("overlayTitle",t.isNewItem?t.MESSAGES.MODAL_TITLE_NEW:t.MESSAGES.MODAL_TITLE_EDIT)("headerBackground",t.modalBg)("isLoading",t.initialLoad),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngTemplateOutlet",e)}},directives:[Ui.a,E.t,O.e,O.d,O.f,ze.c,E.o,eo.a,ji.a,q.a,Nt.a,$e.a],pipes:[Bi.a],styles:['.image[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{cursor:pointer;display:inline-block}.image[_ngcontent-%COMP%]   mg-image[_ngcontent-%COMP%]{height:50px;width:50px;margin:auto}.image[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#4ba0cb;font-weight:700;font-size:.8823529412rem;cursor:pointer}.membership-manage[_ngcontent-%COMP%]{flex-direction:column!important}.membership-manage[_ngcontent-%COMP%]:before{content:"";width:100%;border-top:1px solid #ccc;padding:.5882352941rem 0}.membership-manage[_ngcontent-%COMP%]:after{content:"";width:100%;border-bottom:1px solid #ccc;padding:.5882352941rem 0}'],changeDetection:0}),e})();var Co=function(e){return e.PAGE_TITLE="Sticker Types",e.BUTTON_LABEL_CREATE="Create Sticker",e.NO_RESULTS_TITLE="No ID stickers added yet",e.NO_RESULTS_MESSAGE="",e.SNACK_UPDATE_SUCCESS="Sticker Updated",e.SNACK_DELETE_SUCCESS="Sticker Deleted",e.SNACK_CREATE_SUCCESS="Sticker Created",e.SNACK_UPDATE_FAIL="Error Updating Sticker",e}({}),xo=n("o8tc"),vo=n("944/"),bo=n("LUZP"),So=n("OaSA"),_o=n("QT1V"),Io=function(e){return e.COLUMN_LABEL_NAME="Sticker Name",e.COLUMN_LABEL_MEMBER_COUNT="Members",e.COLUMN_LABEL_MANAGE_MEMBERS="Manage Members",e.COLUMN_LABEL_STATUS="Status",e.COLUMN_LABEL_EDIT="Edit",e}({});const Oo=["icon","name","memberCount","manageMembers","status","edit","mobile"];var Eo=n("M4qg"),yo=n("4avL"),Mo=n("fXzf");function Po(e,t){1&e&&i["\u0275\u0275element"](0,"mat-header-cell")}const wo=function(e){return{$implicit:e}};function To(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-cell"),i["\u0275\u0275elementContainer"](1,18),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275nextContext"]();const n=i["\u0275\u0275reference"](25);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",n)("ngTemplateOutletContext",i["\u0275\u0275pureFunction1"](2,wo,e))}}function ko(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-header-cell",19),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.MESSAGES.COLUMN_LABEL_NAME," ")}}function Lo(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-cell"),i["\u0275\u0275elementStart"](1,"span"),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",e.name," ")}}function Ao(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-header-cell",19),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.MESSAGES.COLUMN_LABEL_MEMBER_COUNT," ")}}function No(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-cell"),i["\u0275\u0275elementStart"](1,"mg-button",20),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const n=t.$implicit;return i["\u0275\u0275nextContext"]().openMembersList(n)})),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",null==e?null:e.memberCount," ")}}function Do(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-header-cell",19),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.MESSAGES.COLUMN_LABEL_MANAGE_MEMBERS," ")}}function Fo(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-cell"),i["\u0275\u0275elementContainer"](1,18),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275nextContext"]();const n=i["\u0275\u0275reference"](29);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",n)("ngTemplateOutletContext",i["\u0275\u0275pureFunction1"](2,wo,e))}}function Ro(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-header-cell",21),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.MESSAGES.COLUMN_LABEL_STATUS," ")}}function Uo(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-cell"),i["\u0275\u0275elementContainer"](1,18),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275nextContext"]();const n=i["\u0275\u0275reference"](27);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",n)("ngTemplateOutletContext",i["\u0275\u0275pureFunction1"](2,wo,e))}}function jo(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-header-cell"),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.MESSAGES.COLUMN_LABEL_EDIT," ")}}function Bo(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-cell"),i["\u0275\u0275elementStart"](1,"mg-generic-button",22),i["\u0275\u0275listener"]("onClick",(function(){i["\u0275\u0275restoreView"](e);const n=t.$implicit;return i["\u0275\u0275nextContext"]().openEditSticker(n)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("hasRipples",!1)("isRounded",!1))}function Go(e,t){1&e&&i["\u0275\u0275element"](0,"mat-header-cell")}function Vo(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-cell",23),i["\u0275\u0275elementStart"](1,"div",24),i["\u0275\u0275elementStart"](2,"div",25),i["\u0275\u0275elementStart"](3,"div",26),i["\u0275\u0275elementContainer"](4,18),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"div",27),i["\u0275\u0275text"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"div",26),i["\u0275\u0275elementStart"](8,"mg-generic-button",22),i["\u0275\u0275listener"]("onClick",(function(){i["\u0275\u0275restoreView"](e);const n=t.$implicit;return i["\u0275\u0275nextContext"]().openEditSticker(n)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"div",28),i["\u0275\u0275elementStart"](10,"div",26),i["\u0275\u0275elementContainer"](11,18),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"div",28),i["\u0275\u0275elementStart"](13,"div",26),i["\u0275\u0275elementContainer"](14,18),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;i["\u0275\u0275nextContext"]();const n=i["\u0275\u0275reference"](25),o=i["\u0275\u0275reference"](27),a=i["\u0275\u0275reference"](29);i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngTemplateOutlet",n)("ngTemplateOutletContext",i["\u0275\u0275pureFunction1"](9,wo,e)),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",e.name," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("hasRipples",!1)("isRounded",!1),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngTemplateOutlet",o)("ngTemplateOutletContext",i["\u0275\u0275pureFunction1"](11,wo,e)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngTemplateOutlet",a)("ngTemplateOutletContext",i["\u0275\u0275pureFunction1"](13,wo,e))}}function Ho(e,t){1&e&&i["\u0275\u0275element"](0,"mat-header-row")}function zo(e,t){1&e&&i["\u0275\u0275element"](0,"mat-row")}const $o=function(){return["bannerlibpreview","cardbanner"]},qo=function(e){return["blurloading1",e]};function Wo(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275element"](1,"mg-image",31),i["\u0275\u0275pipe"](2,"mgImageUrls"),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]().$implicit,t=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("srcs",i["\u0275\u0275pipeBind2"](2,1,t.getStickerPath(e),i["\u0275\u0275pureFunction1"](5,qo,i["\u0275\u0275pureFunction0"](4,$o))))}}function Ko(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",29),i["\u0275\u0275template"](1,Wo,3,7,"ng-container",30),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.getStickerPath(e))}}function Yo(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mg-activate-deactivate-toggle-button",33),i["\u0275\u0275listener"]("onToggleStateChange",(function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"]().onChangeStatus(t)})),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275property"]("initialState",null==e?null:e.active)}}function Zo(e,t){if(1&e&&i["\u0275\u0275template"](0,Yo,1,1,"mg-activate-deactivate-toggle-button",32),2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngIf",e.listType!==n.listTypes.NO_ACCESS)}}function Jo(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",34),i["\u0275\u0275elementStart"](1,"mg-generic-button",35),i["\u0275\u0275listener"]("onClick",(function(){i["\u0275\u0275restoreView"](e);const n=t.$implicit;return i["\u0275\u0275nextContext"]().openAddMembers(n)})),i["\u0275\u0275text"](2," Add "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"mg-generic-button",36),i["\u0275\u0275listener"]("onClick",(function(){i["\u0275\u0275restoreView"](e);const n=t.$implicit;return i["\u0275\u0275nextContext"]().openRemoveMembers(n)})),i["\u0275\u0275text"](4," Remove "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"mg-generic-button",37),i["\u0275\u0275listener"]("onClick",(function(){i["\u0275\u0275restoreView"](e);const n=t.$implicit;return i["\u0275\u0275nextContext"]().openRemoveAllMembers(n)})),i["\u0275\u0275text"](6," Remove All "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("isRounded",!1),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("isRounded",!1)("isDisabled",0===(null==e?null:e.memberCount)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("isRounded",!1)("isDisabled",0===(null==e?null:e.memberCount))}}let Qo=(()=>{class e{constructor(e,t,n,o,a,r){this._stickerBannerService=e,this._modalOverlay=t,this._listService=n,this._cdr=o,this._matDialog=a,this._peopleSelector=r,this.dataSource=new So.k([]),this.DISPLAYED_COLUMNS=Oo,this.MESSAGES=Io,this.listTypes=kt.MembershipListType,this.statusChange=new i.EventEmitter,this.openEditModal=new i.EventEmitter}set data(e){this.dataSource.data=e,this.dataSource.sort=this.sort}trackById(e,t){return t.id||e}openEditSticker(e){return Object(a.a)(this,void 0,void 0,(function*(){this.openEditModal.emit(e)}))}onChangeStatus(e){return Object(a.a)(this,void 0,void 0,(function*(){this.statusChange.emit(e)}))}getStickerPath(e){return this._stickerBannerService.getStickerPath(e)}openMembersList(e){e.id&&this._modalOverlay.open(_o.a,{data:{membershipListId:e.id},disposeOnNavigation:!1})}openAddMembers(e){this._peopleSelector.open("List Membership","add",{title:e.name,data:{contextHash:e.contextHash,listId:e.id,listType:e.listType,name:e.name}})}openRemoveMembers(e){this._peopleSelector.open("List Membership","remove",{title:e.name,data:{contextHash:e.contextHash,listId:e.id,listType:e.listType,name:e.name}})}openRemoveAllMembers(e){this._matDialog.open(Ki.a,{data:{text:{description:`Are you sure you want to remove all the members from ${e.name}?`}}}).afterClosed().subscribe(t=>{(null==t?void 0:t.confirmed)&&(this._listService.removeAllMembersFromList(e.id),this._cdr.markForCheck())})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](Xi),i["\u0275\u0275directiveInject"](Di.e),i["\u0275\u0275directiveInject"](At.a),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](Ft.b),i["\u0275\u0275directiveInject"](Eo.PeopleSelectorService))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-sis-table"]],viewQuery:function(e,t){if(1&e&&(i["\u0275\u0275viewQuery"](So.j,1),i["\u0275\u0275viewQuery"](bo.a,1)),2&e){let e;i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.table=e.first),i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.sort=e.first)}},inputs:{data:"data"},outputs:{statusChange:"statusChange",openEditModal:"openEditModal"},decls:30,vars:4,consts:[["matSort","",3,"dataSource","trackBy"],["matColumnDef","icon"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","name"],["mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","memberCount"],["matColumnDef","manageMembers"],["matColumnDef","status"],["mat-sort-header","","class","status-header",4,"matHeaderCellDef"],["matColumnDef","edit"],["matColumnDef","mobile"],["class","mobile-block",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["assetTemplate",""],["statusTemplate",""],["manageMembersTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["mat-sort-header",""],["type","clear",3,"click"],["mat-sort-header","",1,"status-header"],["colorTheme","navy","iconLeft","edit-o","size","large","paddingSize","none","variant","clear",3,"hasRipples","isRounded","onClick"],[1,"mobile-block"],["fxLayout","column","fxLayoutAlign","start stretch","fxLayoutGap","10px",1,"mobile-list"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px"],["fxFlex","nogrow"],["fxFlex","grow",1,"mobile-list-title"],["fxLayout","row","fxLayoutAlign","center center",1,"mobile-column-item"],[1,"image"],[4,"ngIf"],["background-size","contain",1,"student-id-icon-custom",3,"srcs"],["class","status-toggle",3,"initialState","onToggleStateChange",4,"ngIf"],[1,"status-toggle",3,"initialState","onToggleStateChange"],["fxLayout","flex","fxLayout","center center","fxLayoutGap","10px"],["colorTheme","navy","variant","secondary","size","xsmall","paddingSize","small",3,"isRounded","onClick"],["colorTheme","navy","variant","secondary","size","xsmall","paddingSize","small",3,"isRounded","isDisabled","onClick"],["colorTheme","red","variant","secondary","size","xsmall","paddingSize","small",3,"isRounded","isDisabled","onClick"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-table",0),i["\u0275\u0275elementContainerStart"](1,1),i["\u0275\u0275template"](2,Po,1,0,"mat-header-cell",2),i["\u0275\u0275template"](3,To,2,4,"mat-cell",3),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](4,4),i["\u0275\u0275template"](5,ko,2,1,"mat-header-cell",5),i["\u0275\u0275template"](6,Lo,3,1,"mat-cell",3),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](7,6),i["\u0275\u0275template"](8,Ao,2,1,"mat-header-cell",5),i["\u0275\u0275template"](9,No,3,1,"mat-cell",3),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](10,7),i["\u0275\u0275template"](11,Do,2,1,"mat-header-cell",5),i["\u0275\u0275template"](12,Fo,2,4,"mat-cell",3),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](13,8),i["\u0275\u0275template"](14,Ro,2,1,"mat-header-cell",9),i["\u0275\u0275template"](15,Uo,2,4,"mat-cell",3),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](16,10),i["\u0275\u0275template"](17,jo,2,1,"mat-header-cell",2),i["\u0275\u0275template"](18,Bo,2,2,"mat-cell",3),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](19,11),i["\u0275\u0275template"](20,Go,1,0,"mat-header-cell",2),i["\u0275\u0275template"](21,Vo,15,15,"mat-cell",12),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275template"](22,Ho,1,0,"mat-header-row",13),i["\u0275\u0275template"](23,zo,1,0,"mat-row",14),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](24,Ko,2,1,"ng-template",null,15,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](26,Zo,1,1,"ng-template",null,16,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](28,Jo,7,5,"ng-template",null,17,i["\u0275\u0275templateRefExtractor"])),2&e&&(i["\u0275\u0275property"]("dataSource",t.dataSource)("trackBy",t.trackById),i["\u0275\u0275advance"](22),i["\u0275\u0275property"]("matHeaderRowDef",t.DISPLAYED_COLUMNS),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("matRowDefColumns",t.DISPLAYED_COLUMNS))},directives:[So.j,bo.a,So.c,So.e,So.b,So.g,So.i,So.d,So.a,E.t,bo.b,yo.a,$e.a,O.e,O.d,O.f,O.b,So.f,So.h,E.o,ji.a,Mo.a],pipes:[Bi.a],styles:[".mobile-list[_ngcontent-%COMP%]{width:100%}.mobile-list.more-details[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.1);padding-top:10px;margin-top:10px}.mobile-list[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.1);padding-bottom:10px}.mobile-list[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(:only-child):last-child{border-bottom:none;padding-bottom:0}.mobile-list-title[_ngcontent-%COMP%]{font-size:1.1764705882rem;text-align:left}.mobile-list-label[_ngcontent-%COMP%]{text-align:left;color:rgba(0,0,0,.6)}.mobile-list-value[_ngcontent-%COMP%]{text-align:right}.mobile-list-status[_ngcontent-%COMP%]{margin-top:.8823529412rem}.mobile-list-view-more[_ngcontent-%COMP%]{margin-top:.5882352941rem}.more-details-container[_ngcontent-%COMP%]{overflow:hidden}.mobile-block[_ngcontent-%COMP%]{display:block}.empty-state-container[_ngcontent-%COMP%]   mg-empty-state[_ngcontent-%COMP%]{margin-right:0;margin-left:0}.mat-column-infiniteScrollLoading[_ngcontent-%COMP%], .mat-column-staticLoading[_ngcontent-%COMP%]{width:100%;justify-content:center!important;align-items:center}.multiline-ellipsis[_ngcontent-%COMP%]{display:-webkit-box;max-width:100%;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden}mat-table[_ngcontent-%COMP%]{background:none}mat-table[_ngcontent-%COMP%]   mat-header-row[_ngcontent-%COMP%]{border:none;padding:0 .4411764706rem}@media print,screen and (max-width:59.99875em){mat-table[_ngcontent-%COMP%]   mat-header-row[_ngcontent-%COMP%]{display:none}}mat-table[_ngcontent-%COMP%]   mat-header-row[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]{color:#b2b2b2;font-size:.8823529412rem;font-weight:700;margin:0 .4411764706rem;justify-content:start}mat-table[_ngcontent-%COMP%]   mat-header-row[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]:first-of-type{padding-left:0}mat-table[_ngcontent-%COMP%]   mat-header-row[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]:last-of-type{padding-right:0}mat-table[_ngcontent-%COMP%]   mat-row[_ngcontent-%COMP%]{margin-bottom:.8823529412rem;padding:.5882352941rem .4411764706rem;background:#fff;border:none;border-radius:.2941176471rem;box-shadow:0 0 6px rgba(0,0,0,.15)}mat-table[_ngcontent-%COMP%]   mat-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}mat-table[_ngcontent-%COMP%]   mat-row[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]{font-size:.9411764706rem;color:#073869;font-weight:600;margin:0 .4411764706rem;justify-content:start}mat-table[_ngcontent-%COMP%]   mat-row[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]:first-of-type{padding-left:0}mat-table[_ngcontent-%COMP%]   mat-row[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]:last-of-type{padding-right:0}mat-paginator[_ngcontent-%COMP%]{background:none;display:block;margin-top:.8823529412rem}mat-paginator[_ngcontent-%COMP%]     .mat-paginator-container{padding:0}mat-paginator[_ngcontent-%COMP%]     .mat-paginator-range-label{margin:0 .4705882353rem 0 0;padding-top:.2941176471rem}mat-paginator[_ngcontent-%COMP%]     .mat-paginator-page-size-label{margin:0 .4705882353rem 0 0}mat-paginator[_ngcontent-%COMP%]     mat-form-field{width:auto;max-width:100px;margin:0}mat-paginator[_ngcontent-%COMP%]     mat-form-field .mat-form-field-wrapper{margin:0;padding:0}@media print,screen and (max-width:59.99875em){mat-table[_ngcontent-%COMP%]   mat-row[_ngcontent-%COMP%]{padding:1.1764705882rem}}.mat-column-edit[_ngcontent-%COMP%], .mat-column-icon[_ngcontent-%COMP%], .mat-column-manageMembers[_ngcontent-%COMP%], .mat-column-memberCount[_ngcontent-%COMP%], .mat-column-name[_ngcontent-%COMP%], .mat-column-status[_ngcontent-%COMP%]{display:none}@media print,screen and (min-width:60em){.mat-column-edit[_ngcontent-%COMP%], .mat-column-icon[_ngcontent-%COMP%], .mat-column-manageMembers[_ngcontent-%COMP%], .mat-column-memberCount[_ngcontent-%COMP%], .mat-column-name[_ngcontent-%COMP%], .mat-column-status[_ngcontent-%COMP%]{display:flex}}.mat-column-icon[_ngcontent-%COMP%]{flex:0 3.5294117647rem}@media print,screen and (min-width:60em){.mat-column-name[_ngcontent-%COMP%]{flex:0 18%}}.mat-column-memberCount[_ngcontent-%COMP%]{flex:0 10%}.mat-column-manageMembers[_ngcontent-%COMP%], .mat-column-memberCount[_ngcontent-%COMP%], .mat-column-status[_ngcontent-%COMP%]{justify-content:center!important}.mat-column-edit[_ngcontent-%COMP%]{flex:0 1.7647058824rem}.mat-column-edit[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{--mg-icon-size:30px}@media print,screen and (min-width:60em){.mat-column-mobile[_ngcontent-%COMP%]{display:none}}.mat-column-manageMembers[_ngcontent-%COMP%]{flex:0 18.8235294118rem}.image[_ngcontent-%COMP%]{width:100%}.image[_ngcontent-%COMP%]   mg-image[_ngcontent-%COMP%]{height:50px;width:50px;margin:auto}@media print,screen and (max-width:59.99875em){.image[_ngcontent-%COMP%]{max-width:30%}}mat-table[_ngcontent-%COMP%]   mat-header-row[_ngcontent-%COMP%]   mat-header-cell.status-header[_ngcontent-%COMP%]{justify-content:center}.mobile-column-item[_ngcontent-%COMP%]{padding:.5882352941rem 0}.mobile-column-item[_ngcontent-%COMP%]:last-child{padding-bottom:0}.mobile-list-title[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}"],changeDetection:0}),e})();function Xo(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"h2",5),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](e.MESSAGES.PAGE_TITLE)}}function ea(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",6),i["\u0275\u0275elementStart"](1,"div",7),i["\u0275\u0275elementStart"](2,"mg-generic-button",8),i["\u0275\u0275listener"]("onClick",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onClickCreateSticker()})),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",e.MESSAGES.BUTTON_LABEL_CREATE," ")}}function ta(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mg-sis-table",9),i["\u0275\u0275listener"]("statusChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onStatusChange(t)}))("openEditModal",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onOpenEditModal(t)})),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("data",e.lists)}}function na(e,t){if(1&e&&i["\u0275\u0275element"](0,"mg-empty-state",10),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("title",e.MESSAGES.NO_RESULTS_TITLE)("subtitle",e.MESSAGES.NO_RESULTS_MESSAGE)}}const ia={backdrop:Di.a.DARK_BLUE,disposeOnNavigation:!1,data:{}};let oa=(()=>{class e{constructor(e,t,n,i,o){this._cdr=e,this._stickersService=t,this._snackBar=n,this._membershipManager=i,this._modalOverlay=o,this.lists=[],this.loading=!0,this.MESSAGES=Co,this._listsUpdatedSub=this._membershipManager.listUpdated$.subscribe(e=>{e&&this._fetchLists()})}ngOnInit(){this._fetchLists()}ngOnDestroy(){var e;null===(e=this._listsUpdatedSub)||void 0===e||e.unsubscribe()}_fetchLists(){return Object(a.a)(this,void 0,void 0,(function*(){try{this.lists=yield this._stickersService.getStickersAndNoAccessList()}catch(ua){this._snackBar.open("An error occured trying to fetch stickers. Please try again")}finally{this.loading=!1,this._cdr.markForCheck()}}))}onClickCreateSticker(){this._openModal()}_openModal(e){this._modalOverlay.open(fo,Object.assign(Object.assign({},ia),{data:e||{}})).afterClosed.subscribe(e=>{if(!e)return;const{type:t}=e;t===Di.f.SUBMIT&&this._snackBar.open(Co.SNACK_UPDATE_SUCCESS),t===Di.f.DELETE&&this._snackBar.open(Co.SNACK_DELETE_SUCCESS),t===Di.f.CREATE&&this._snackBar.open(Co.SNACK_CREATE_SUCCESS),this._fetchLists()})}onOpenEditModal(e){return Object(a.a)(this,void 0,void 0,(function*(){this._openModal({item:e})}))}onStatusChange(e){return Object(a.a)(this,void 0,void 0,(function*(){const t=e;t.active=!t.active,this._updateMembershipList(t)}))}_updateMembershipList(e){return Object(a.a)(this,void 0,void 0,(function*(){try{yield this._membershipManager.updateMembershipList(e),this._snackBar.open(Co.SNACK_UPDATE_SUCCESS),this._cdr.markForCheck()}catch(t){this._snackBar.open(Co.SNACK_UPDATE_FAIL)}}))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](xo.a),i["\u0275\u0275directiveInject"](b.b),i["\u0275\u0275directiveInject"](At.a),i["\u0275\u0275directiveInject"](Di.e))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-student-id-stickers"]],decls:8,vars:3,consts:[[3,"loading"],["headerLeft",""],["headerRight",""],[3,"data","statusChange","openEditModal",4,"ngIf","ngIfElse"],["noResults",""],[1,"header-title"],[1,"header-right"],["fxFlex","noshrink","fxFlex.lt-sm","grow","fxFlexAlign","center"],["colorTheme","aqua",3,"onClick"],[3,"data","statusChange","openEditModal"],[3,"title","subtitle"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mg-manager-overlay-subpage",0),i["\u0275\u0275template"](1,Xo,2,1,"ng-template",null,1,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](3,ea,4,1,"ng-template",null,2,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](5,ta,1,1,"mg-sis-table",3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](6,na,1,2,"ng-template",null,4,i["\u0275\u0275templateRefExtractor"])),2&e){const e=i["\u0275\u0275reference"](7);i["\u0275\u0275property"]("loading",t.loading),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",(null==t.lists?null:t.lists.length)>0)("ngIfElse",e)}},directives:[vo.a,E.o,O.b,O.a,$e.a,Qo,P.a],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;position:relative}.manager-overlay-subpage[_ngcontent-%COMP%]{margin-bottom:3.5294117647rem}.manager-overlay-subpage-header[_ngcontent-%COMP%]{background:#f4f4f4;padding:1.1764705882rem 20%;box-sizing:border-box;margin:-20px -20% 0;width:calc(140%)}.manager-overlay-subpage-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{display:inline-block;font-size:1.2941176471rem;font-weight:800;color:#036;padding:0;margin:0}@media print,screen and (max-width:37.49875em){.manager-overlay-subpage-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;display:block}}.manager-overlay-subpage-content[_ngcontent-%COMP%]{flex:1;padding:1.1764705882rem 0;box-sizing:border-box}.manager-overlay-subpage-content.white-bg[_ngcontent-%COMP%]{background-color:#fff}.quick-action-container[_ngcontent-%COMP%]{margin-bottom:1.1764705882rem}.quick-action-container[_ngcontent-%COMP%]:empty{display:none}.quick-action-btn[_ngcontent-%COMP%]{-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;-webkit-appearance:none;border-radius:0;text-align:inherit;box-shadow:none;color:inherit;font:inherit;padding:0;margin:0;background:none;border:none;outline:none;box-sizing:border-box;cursor:pointer;font-size:.8823529412rem;color:#036;display:inline-flex;align-items:center;justify-content:center;--mg-icon-size:20px}.quick-action-btn[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{margin-right:.2941176471rem}.quick-action-btn[_ngcontent-%COMP%]:hover{opacity:.7}@media print,screen and (max-width:37.49875em){.quick-action-btn[_ngcontent-%COMP%]{display:none}}.manager-layout-loading-container[_ngcontent-%COMP%]{padding:2.9411764706rem 0}.header-title[_ngcontent-%COMP%]{display:inline-block;font-size:1.2941176471rem;font-weight:800;color:#036;padding:0;margin:0}@media print,screen and (max-width:37.49875em){.header-title[_ngcontent-%COMP%]{text-align:center;display:block}}@media print,screen and (max-width:59.99875em){.header-right[_ngcontent-%COMP%]{text-align:center}}"],changeDetection:0}),e})();var aa=function(e){return e.ROOT="studentid",e.DASHBOARD="manage",e.STICKERS="stickers",e.PHOTOS="uplaod",e.SETTINGS="settings",e}({});const ra=[{path:"",pathMatch:"full",redirectTo:"manage"},{path:"",component:Et,data:{defaultRootPath:aa.ROOT,tabs:[{title:"Dashboard",path:aa.DASHBOARD,permissions:{atLeastOne:[s.MingaPermission.MINGA_PEOPLE_MANAGE,s.MingaPermission.ADMINISTER_STUDENT_ID,s.MingaPermission.VIEW_STUDENT_ID_DASHBOARD]}},{title:"Stickers",path:aa.STICKERS,permissions:{atLeastOne:[s.MingaPermission.MINGA_PEOPLE_MANAGE,s.MingaPermission.ADMINISTER_STUDENT_ID]}},{title:"Photos",path:aa.PHOTOS,permissions:{atLeastOne:[s.MingaPermission.MINGA_PEOPLE_MANAGE,s.MingaPermission.ADMINISTER_STUDENT_ID]}},{title:"Settings",path:aa.SETTINGS,permissions:{atLeastOne:[s.MingaPermission.MINGA_PEOPLE_MANAGE,s.MingaPermission.ADMINISTER_STUDENT_ID_SETTINGS]}}]},children:[{path:aa.DASHBOARD,component:at,data:{title:"Manage Student IDs"}},{path:aa.STICKERS,component:oa,data:{title:"Manage ID Stickers"}},{path:aa.PHOTOS,component:Ti,data:{title:"Manage ID Photos"}},{path:aa.SETTINGS,component:un,data:{title:"Manage ID Settings"}}]}];var sa=n("Ynp+"),la=n("pMoy"),ca=n("eRNI"),da=n("1uLP"),ma=n("37Vl");let ga=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[mt.a,lt.a,bt.b,ma.a,ft.a,ca.a,pt.a,Ct.b,Di.g,da.a,dt.a,vn.a,E.c,rt.a,So.l,bo.c,D.m,W.c,N.b,la.b,sa.c,L.f,D.A]]}),e})(),pa=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[wt,bn,Ni,ga,o.k.forChild(ra)]]}),e})()},dfi4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorReporterClient=t.LocaleSyncClient=t.AppConfigClient=t.ErrorReporter=t.LocaleSync=t.AppConfig=void 0;const i=n("mI3D");class o{}t.AppConfig=o,o.serviceName="AppConfig",o.getAppConfig={methodName:"getAppConfig",service:o,requestStream:!1,responseStream:!1,requestType:i.AppConfigRequest,responseType:i.AppConfigResponse};class a{}t.LocaleSync=a,a.serviceName="LocaleSync",a.getLocaleSync={methodName:"getLocaleSync",service:a,requestStream:!1,responseStream:!1,requestType:i.LocaleSyncRequest,responseType:i.LocaleSyncResponse};class r{}t.ErrorReporter=r,r.serviceName="ErrorReporter",r.sendErrorReport={methodName:"sendErrorReport",service:r,requestStream:!1,responseStream:!1,requestType:i.ErrorReportRequest,responseType:i.ErrorReportResponse},t.AppConfigClient=class{getAppConfig(){throw new Error("minga_protoc_gen_improbable_eng_grpc_web client methods are unimplemented")}},t.LocaleSyncClient=class{getLocaleSync(){throw new Error("minga_protoc_gen_improbable_eng_grpc_web client methods are unimplemented")}},t.ErrorReporterClient=class{sendErrorReport(){throw new Error("minga_protoc_gen_improbable_eng_grpc_web client methods are unimplemented")}}},ypKM:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorReporter=t.LocaleSync=t.AppConfig=void 0,n("8Y7J");const i=n("+6wJ"),o=n("dfi4"),a=n("8Y7J");class r{constructor(e){this._ngZone=e}getAppConfig(e,t,n){let a,r,s;"function"==typeof t?r=t:(s=t,r=n),r||(a=new Promise((e,t)=>{r=(n,i)=>{n?t(n):e(i)}}));let l=null,c=i.grpc.invoke(o.AppConfig.getAppConfig,{request:e,host:window.DEFAULT_ANGULAR_GRPC_HOST||"https://"+location.hostname,metadata:s,onHeaders:e=>l=e,onMessage:e=>this._ngZone.run(()=>{r(null,e,l||new i.grpc.Metadata)}),onEnd:(e,t,n)=>this._ngZone.run(()=>{if(e!=i.grpc.Code.OK){let n=new Error(t);n.code=e,r(n)}})});return a.cancel=()=>c.close(),a}}t.AppConfig=r,r.\u0275fac=function(e){return new(e||r)(a.\u0275\u0275inject(a.NgZone))},r.\u0275prov=a.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"root"});class s{constructor(e){this._ngZone=e}getLocaleSync(e,t,n){let a,r,s;"function"==typeof t?r=t:(s=t,r=n),r||(a=new Promise((e,t)=>{r=(n,i)=>{n?t(n):e(i)}}));let l=null,c=i.grpc.invoke(o.LocaleSync.getLocaleSync,{request:e,host:window.DEFAULT_ANGULAR_GRPC_HOST||"https://"+location.hostname,metadata:s,onHeaders:e=>l=e,onMessage:e=>this._ngZone.run(()=>{r(null,e,l||new i.grpc.Metadata)}),onEnd:(e,t,n)=>this._ngZone.run(()=>{if(e!=i.grpc.Code.OK){let n=new Error(t);n.code=e,r(n)}})});return a.cancel=()=>c.close(),a}}t.LocaleSync=s,s.\u0275fac=function(e){return new(e||s)(a.\u0275\u0275inject(a.NgZone))},s.\u0275prov=a.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"});class l{constructor(e){this._ngZone=e}sendErrorReport(e,t,n){let a,r,s;"function"==typeof t?r=t:(s=t,r=n),r||(a=new Promise((e,t)=>{r=(n,i)=>{n?t(n):e(i)}}));let l=null,c=i.grpc.invoke(o.ErrorReporter.sendErrorReport,{request:e,host:window.DEFAULT_ANGULAR_GRPC_HOST||"https://"+location.hostname,metadata:s,onHeaders:e=>l=e,onMessage:e=>this._ngZone.run(()=>{r(null,e,l||new i.grpc.Metadata)}),onEnd:(e,t,n)=>this._ngZone.run(()=>{if(e!=i.grpc.Code.OK){let n=new Error(t);n.code=e,r(n)}})});return a.cancel=()=>c.close(),a}}t.ErrorReporter=l,l.\u0275fac=function(e){return new(e||l)(a.\u0275\u0275inject(a.NgZone))},l.\u0275prov=a.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac,providedIn:"root"})}}]);
//# sourceMappingURL=minga-app-src-app-studentid-route-StudentIdRoutes-module-es2015.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"5xcx":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("8Y7J"),i=n("s7LF"),o=n("NW4y");let a=(()=>{class e{validate(e){return Object(o.a)(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r["\u0275\u0275defineDirective"]({type:e,selectors:[["","mgPhoneNumberValidator",""]],features:[r["\u0275\u0275ProvidersFeature"]([{provide:i.q,useExisting:e,multi:!0}])]}),e})()},"7jcR":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgramContextStreamManagerClient=t.ProgramContextStreamManager=void 0;const r=n("xVyk"),i=n("PYFZ");class o{}t.ProgramContextStreamManager=o,o.serviceName="minga.content.ProgramContextStreamManager",o.StreamProgramContexts={methodName:"StreamProgramContexts",service:o,requestStream:!1,responseStream:!0,requestType:i.StreamID,responseType:r.StreamProgramContextInfo},o.StreamProgramContextsControl={methodName:"StreamProgramContextsControl",service:o,requestStream:!1,responseStream:!1,requestType:i.StreamControl,responseType:i.StreamControlResponse},o.StreamProgramContextContent={methodName:"StreamProgramContextContent",service:o,requestStream:!1,responseStream:!0,requestType:i.StreamID,responseType:r.StreamProgramContextContentInfo},o.StreamProgramContextContentControl={methodName:"StreamProgramContextContentControl",service:o,requestStream:!1,responseStream:!1,requestType:i.StreamControl,responseType:i.StreamControlResponse},t.ProgramContextStreamManagerClient=class{streamProgramContexts(){throw new Error("minga_protoc_gen_improbable_eng_grpc_web client methods are unimplemented")}streamProgramContextsControl(){throw new Error("minga_protoc_gen_improbable_eng_grpc_web client methods are unimplemented")}streamProgramContextContent(){throw new Error("minga_protoc_gen_improbable_eng_grpc_web client methods are unimplemented")}streamProgramContextContentControl(){throw new Error("minga_protoc_gen_improbable_eng_grpc_web client methods are unimplemented")}}},"85oS":function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n("8Y7J"),i=n("s7LF"),o=n("Cnb3"),a=n("Q2Ze"),s=n("i1AJ"),l=n("e6WT"),c=n("SVse"),d=n("sj4O"),m=n("pMoy"),g=n("TSSN");const p=["matInputEl"];function u(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",6),r["\u0275\u0275element"](1,"mg-spinner",7),r["\u0275\u0275elementEnd"]())}const h=function(){return{standalone:!0}};function f(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"mat-checkbox",8),r["\u0275\u0275listener"]("ngModelChange",(function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().customDisplayName=t}))("ngModelChange",(function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().customDisplayNameChange(t)})),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("ngModel",e.customDisplayName)("ngModelOptions",r["\u0275\u0275pureFunction0"](2,h))}}function v(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"input.displayName.error.minlength")," "))}function C(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"input.displayName.error.maxlength")," "))}function b(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"input.displayName.error.required")," "))}function P(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275elementContainerStart"](1,9),r["\u0275\u0275template"](2,v,3,3,"span",10),r["\u0275\u0275template"](3,C,3,3,"span",10),r["\u0275\u0275template"](4,b,3,3,"span",11),r["\u0275\u0275elementContainerEnd"](),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngSwitch",e.inputControlError),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngSwitchCase","minlength"),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngSwitchCase","maxlength")}}const M={provide:i.r,useExisting:Object(r.forwardRef)(()=>x),multi:!0};let x=(()=>{class e{constructor(){this.value="",this.defaultValue="",this.inputCustom=!1,this.firstName="",this.lastName="",this.alwaysDefaultValue=!1,this.required=!1,this.customChange=new r.EventEmitter,this.statusPending=!1,this.statusTouched=!1,this.inputControlError="",this.instantErrors=!0,this.minlength=4,this.maxlength=25,this.showOnlyWithRole=!1,this.hasRole=!1}set custom(e){this.inputCustom=e,this.customDisplayName=e}get hint(){return this.customDisplayName?"":"Check the box to create a custom display name"}get inputMaxLength(){return parseInt(`${this.maxlength}`)+1}get inputMinLength(){return this.minlength>0?this.minlength-1:0}setupDefault(){this.defaultValue=o.DisplayNameFormat.format(this.firstName||"",this.lastName||"",this.displayNameFormat),this.customDisplayName?!this.inputCustom&&this.customDisplayName&&this.value==this.defaultValue&&(this.customDisplayName=!1):this.value=!this.showOnlyWithRole||this.showOnlyWithRole&&this.hasRole?this.defaultValue:""}_handleDisplayNameChange(){this.customDisplayName?(this.value=this.defaultValue,this.focusInput()):(this.setupDefault(),this.onChange(this.showOnlyWithRole&&!this.hasRole?"":this.value)),this.triggerOnTouched(),this.triggerOnChange()}customDisplayNameChange(e){this.customDisplayName=e,this.customChange.emit(this.customDisplayName),this._handleDisplayNameChange()}focusInput(){if(!this.matInputEl)return;const e=this.matInputEl;let t=!1;if(e.disabled)return this.value||(this.value=" ",t=!0),new Promise(n=>{let r=setInterval(()=>{this.matInputEl.disabled||(e.focus(),t&&(this.value=""),clearInterval(r),n())},100)});e.focus()}ngOnChanges(e){(e.firstName||e.lastName||e.displayNameFormat)&&(this.setupDefault(),this._checkIfCustom()),e.inputControlError&&setTimeout(()=>{this.inputControlError&&(this.matInputEl.errorState=!0,this.matInputEl.ngControl.control.setErrors({errorKey:!0}))})}ngOnInit(){}change(e){"string"==typeof e&&this.onChange(e),this.onTouched()}triggerOnChange(){this._onChange&&this._onChange(this.value)}triggerOnTouched(){this._onTouched&&this._onTouched()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){null===e||this.showOnlyWithRole&&!this.hasRole?this.value="":"string"==typeof e&&(this.value=e,this.setupDefault())}_checkIfCustom(){const e=this.defaultValue.trim(),t=this.value.trim();(this.inputCustom||e&&t&&t!=e)&&(this.customDisplayName=!0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-display-name"]],viewQuery:function(e,t){if(1&e&&r["\u0275\u0275viewQuery"](p,3),2&e){let e;r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.matInputEl=e.first)}},inputs:{firstName:"firstName",lastName:"lastName",alwaysDefaultValue:"alwaysDefaultValue",displayNameFormat:"displayNameFormat",required:"required",custom:"custom",statusPending:"statusPending",statusTouched:"statusTouched",inputControlError:"inputControlError",instantErrors:"instantErrors",minlength:"minlength",maxlength:"maxlength",showOnlyWithRole:"showOnlyWithRole",hasRole:"hasRole"},outputs:{customChange:"customChange"},features:[r["\u0275\u0275ProvidersFeature"]([M]),r["\u0275\u0275NgOnChangesFeature"]],decls:9,vars:10,consts:[["hideRequiredMarker","","mgFormField","",1,"mg-display-name",3,"hintLabel","mgNoDisabledText"],["matInput","","ngDefaultControl","","name","displayName","autocomplete","off",3,"maxlength","minlength","ngModel","disabled","required","ngModelChange"],["inputEl","","matInputEl","matInput"],["class","input-icon","mat-icon-button","","matSuffix","",4,"ngIf"],["matSuffix","","ngDefaultControl","",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[4,"ngIf"],["mat-icon-button","","matSuffix","",1,"input-icon"],["color","primary","diameter","25"],["matSuffix","","ngDefaultControl","",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-form-field",0),r["\u0275\u0275elementStart"](1,"mat-label"),r["\u0275\u0275text"](2,"Display Name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"input",1,2),r["\u0275\u0275listener"]("ngModelChange",(function(e){return t.value=e}))("ngModelChange",(function(e){return t.change(e)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](6,u,2,0,"div",3),r["\u0275\u0275template"](7,f,1,3,"mat-checkbox",4),r["\u0275\u0275template"](8,P,5,3,"mat-error",5),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275property"]("hintLabel",t.hint)("mgNoDisabledText",!t.value&&!t.customDisplayName),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("maxlength",t.inputMaxLength)("minlength",t.inputMinLength)("ngModel",t.value)("disabled",!t.customDisplayName)("required",t.customDisplayName),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",t.statusPending),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!t.statusPending),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.statusTouched))},directives:[a.d,s.a,a.h,l.b,i.d,i.n,i.o,i.t,i.w,i.B,c.o,a.j,d.a,m.a,a.c,c.q,c.r,c.s],pipes:[g.d],styles:[""]}),e})()},"9QcJ":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("8Y7J"),i=n("s7LF"),o=n("Ggka");let a=(()=>{class e{validate(e){const t=e.value;return t&&!o.a.EmailRegex.test(t)?{invalidEmail:!0}:null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r["\u0275\u0275defineDirective"]({type:e,selectors:[["","mgEmailValidator",""]],features:[r["\u0275\u0275ProvidersFeature"]([{provide:i.q,useExisting:e,multi:!0}])]}),e})()},"9XEq":function(e,t,n){"use strict";n.r(t),n.d(t,"AdminRoutesModule",(function(){return Tr}));var r=n("8Y7J"),i=n("iInd"),o=n("TSSN"),a=n("oTGS"),s=n("CslP"),l=n("M9ds"),c=n("NGeL");let d=(()=>{class e{constructor(e){this.router=e,this.canCreateGroups=!1}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](i.g))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-challenge-poll-list-page"]],decls:8,vars:4,consts:[["mat-tab-nav-bar","",1,"no-inactive-tab"],["mat-tab-link","","routerLink","/admin/challenge~polls/challenges","routerLinkActive","active"],["rlaChallenges","routerLinkActive"],["value","Challenges",3,"strong"],["mat-tab-link","","routerLink","/admin/challenge~polls/polls","routerLinkActive","active"],["rlaPolls","routerLinkActive"],["value","Polls",3,"strong"]],template:function(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"nav",0),r["\u0275\u0275elementStart"](1,"a",1,2),r["\u0275\u0275element"](3,"mg-toggle-strong",3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"a",4,5),r["\u0275\u0275element"](6,"mg-toggle-strong",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](7,"router-outlet")),2&e){const e=r["\u0275\u0275reference"](2),n=r["\u0275\u0275reference"](5);r["\u0275\u0275classProp"]("enable-create",t.canCreateGroups),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("strong",e.isActive),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("strong",n.isActive)}},directives:[l.f,i.j,l.e,i.i,c.a,i.l],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");[_nghost-%COMP%]{display:block}.mat-tab-link[_ngcontent-%COMP%]{min-width:calc(100% / var(--mg-tab-count, 2));max-width:calc(100% / var(--mg-tab-count, 2));background-color:#fff;border-top:1px solid #ccc;border-bottom:1px solid #ccc;border-top-right-radius:0;border-bottom-left-radius:8px;border-bottom-right-radius:8px;border-right:1px solid #ccc;opacity:1;font-family:Muli,sans-serif;line-height:1.35;color:#036;height:48px;font-weight:400}@media (orientation:landscape){.mat-tab-link[_ngcontent-%COMP%]{font-size:3.3913043478vh}}@media (orientation:portrait){.mat-tab-link[_ngcontent-%COMP%]{font-size:3.3913043478vw}}@media (orientation:landscape) and (max-height:414px){.mat-tab-link[_ngcontent-%COMP%]{font-size:14.04px}}@media (orientation:portrait) and (max-width:414px){.mat-tab-link[_ngcontent-%COMP%]{font-size:14.04px}}@media (min-width:448.5px){.mat-tab-link[_ngcontent-%COMP%]{font-size:15.21px}}.mat-tab-link.tab-fill[_ngcontent-%COMP%]{background-color:#fff;border-top:none;pointer-events:none}.mat-tab-link.tab-fill[_ngcontent-%COMP%]:hover{cursor:default}.mat-tab-link[_ngcontent-%COMP%]:focus{background-color:#fff!important}.mat-tab-link[_ngcontent-%COMP%]:first-child{border-right:1px solid #ccc;min-width:calc(100% / (var(--mg-tab-count, 2) + 1));margin-left:0;border-top-right-radius:0;border-top-left-radius:0;border-bottom-left-radius:8px;border-bottom-right-radius:8px;border-left:none}.mat-tab-link[_ngcontent-%COMP%]:first-child.active + .mat-tab-link[_ngcontent-%COMP%], .mat-tab-link[_ngcontent-%COMP%]:first-child:focus.active + .mat-tab-link[_ngcontent-%COMP%]{border-bottom-left-radius:8px;border-bottom-right-radius:0;border-left:1px solid #ccc;border-right:1px solid #ccc}.mat-tab-link[_ngcontent-%COMP%]:first-child.active + .mat-tab-link[_ngcontent-%COMP%] + .mat-tab-link[_ngcontent-%COMP%], .mat-tab-link[_ngcontent-%COMP%]:first-child:focus.active + .mat-tab-link[_ngcontent-%COMP%] + .mat-tab-link[_ngcontent-%COMP%]{border-left:none;border-bottom-left-radius:0}@media (min-width:511px){.mat-tab-link[_ngcontent-%COMP%]:first-child{border-left:1px solid #ccc}.mat-tab-link[_ngcontent-%COMP%]:first-child.active, .mat-tab-link[_ngcontent-%COMP%]:first-child:focus.active{border-left:none}}.mat-tab-link[_ngcontent-%COMP%]:last-of-type{border-bottom-left-radius:8px;border-bottom-right-radius:8px;border-right:1px solid #ccc}.mat-tab-link.active[_ngcontent-%COMP%], .mat-tab-link[_ngcontent-%COMP%]:focus.active{background-color:#f5f5f5!important;border-bottom:1px solid #f5f5f5;font-weight:700;border-bottom-left-radius:0;border-bottom-right-radius:0;border-right:none}.mat-tab-link.active[_ngcontent-%COMP%] + .mat-tab-link[_ngcontent-%COMP%], .mat-tab-link[_ngcontent-%COMP%]:focus.active + .mat-tab-link[_ngcontent-%COMP%]{border-left:1px solid #ccc}nav[_ngcontent-%COMP%]{border-bottom:none;margin-top:0}@media (min-width:511px){nav[_ngcontent-%COMP%]:not(.no-inactive-tab){border-right:1px solid #ccc}}nav.no-inactive-tab[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]:first-child{min-width:calc(100% / var(--mg-tab-count, 2));max-width:calc(100% / var(--mg-tab-count, 2))}@media (min-width:511px){nav.no-inactive-tab[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]:last-of-type{min-width:calc((100% / var(--mg-tab-count, 2)) - 1px);max-width:calc((100% / var(--mg-tab-count, 2)) - 1px)}}[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]{width:60%;margin-left:auto;--mg-tab-count:2}@media (orientation:landscape){[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]{--mg-icon-size:4.2666666667vh}}@media (orientation:portrait){[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]{--mg-icon-size:4.2666666667vw}}@media (orientation:landscape) and (max-height:375px){[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]{--mg-icon-size:16px}}@media (orientation:portrait) and (max-width:375px){[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]{--mg-icon-size:16px}}@media (min-width:562.5px){[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]{--mg-icon-size:24px}}[_nghost-%COMP%]   nav[mat-tab-nav-bar].enable-create[_ngcontent-%COMP%]{--mg-tab-count:3}@media (orientation:landscape){[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{padding-left:5vh}}@media (orientation:portrait){[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{padding-left:5vw}}@media (orientation:landscape) and (max-height:320px){[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{padding-left:16px}}@media (orientation:portrait) and (max-width:320px){[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{padding-left:16px}}@media (min-width:480px){[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{padding-left:24px}}@media (orientation:landscape){[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{padding-right:5vh}}@media (orientation:portrait){[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{padding-right:5vw}}@media (orientation:landscape) and (max-height:320px){[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{padding-right:16px}}@media (orientation:portrait) and (max-width:320px){[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{padding-right:16px}}@media (min-width:480px){[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{padding-right:24px}}[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]   .group-text[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   mg-button-icon[_ngcontent-%COMP%]{display:inline-block;margin-left:-.3em}@media (min-width:390px){[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]   .group-text[_ngcontent-%COMP%]{display:inline}}@media (max-width:599px){[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]{width:100%}}']}),e})();var m=n("SVse"),g=n("CO6v"),p=n("0hYQ");let u=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[p.a,g.a,m.c,i.k,l.g]]}),e})();n("8Vb0");var h=n("LM9v"),f=(n("sETV"),n("Cnb3")),v=n("PfYm"),C=n("WH00"),b=n("HSxi"),P=n("F7jZ"),M=n("Vwx4"),x=n("TxG7"),y=n("Fudl"),O=n("2nPA"),_=n("HQAS"),S=n("0cKA"),w=n("05dM"),I=n("chTD");function E(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"mg-challenge-short-card",8),r["\u0275\u0275listener"]("challengeClick",(function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().onChallengeClick(t)}))("challengeResponseClick",(function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().onChallengeResponseClick(t)})),r["\u0275\u0275elementEnd"]()}if(2&e){const e=t.itemId;r["\u0275\u0275property"]("content",t.$implicit.shortChallengeCard)("context",e)}}const k=function(){return[]};let F=(()=>{class e{constructor(e,t,n,r,i,o){this.pollAnswerService=e,this.contentEvents=t,this.groupsFacade=n,this.contentState=r,this.permissions=i,this.contentFeed=o,this.emptyStateIcons=[],this.canCreateChallenges=!1,this.feedFilter={contentType:"CHALLENGE"},n.dispatchLoadAll(),this.emptyStateIcons=[{icon:"post",text:"Add"},{icon:"challenges-o",text:"Challenge"}],this.canCreateChallenges=this.permissions.hasPermission(f.MingaPermission.CONTENT_CHALLENGE_CREATE)}onChallengeClick(e){this.contentEvents.emitContentOpen({contentContextHash:e.challengeContextHash})}onChallengeResponseClick(e){this.contentEvents.emitContentOpen({contentContextHash:e.responseContextHash})}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](v.a),r["\u0275\u0275directiveInject"](C.a),r["\u0275\u0275directiveInject"](b.b),r["\u0275\u0275directiveInject"](P.a),r["\u0275\u0275directiveInject"](M.c),r["\u0275\u0275directiveInject"](x.ContentFeed))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-challenge-admin-list"]],decls:13,vars:11,consts:[[1,"mg-headline","page-header"],[1,"default-icon"],[1,"mg-smallcopy"],[1,"divider"],[1,"feed-items"],["mgStreamControl","challengesMingaFeed","rpcStream","streamContentFeed","rpcControl","streamContentFeedControl",3,"filter","service","mgTrimmed"],["mgStreamItem",""],["mg-stream-empty","",3,"title","subtitle","icons"],[3,"content","context","challengeClick","challengeResponseClick"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"p",0),r["\u0275\u0275elementStart"](1,"mg-icon",1),r["\u0275\u0275text"](2,"flag-icon"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](3," Challenges\n"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"p",2),r["\u0275\u0275text"](5,"Here are your weekly challenges."),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](6,"div",3),r["\u0275\u0275elementStart"](7,"div",4),r["\u0275\u0275elementStart"](8,"mg-stream-scroller",5),r["\u0275\u0275template"](9,E,1,2,"ng-template",6),r["\u0275\u0275element"](10,"mg-empty-state",7),r["\u0275\u0275pipe"](11,"translate"),r["\u0275\u0275pipe"](12,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("filter",t.feedFilter)("service",t.contentFeed)("mgTrimmed",!0),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("title",r["\u0275\u0275pipeBind1"](11,6,"emptyState.manageChallengesTitle"))("subtitle",t.canCreateChallenges?r["\u0275\u0275pipeBind1"](12,8,"emptyState.manageChallengesSubtitle"):"")("icons",t.canCreateChallenges?t.emptyStateIcons:r["\u0275\u0275pureFunction0"](10,k)))},directives:[y.a,O.a,_.a,S.a,w.a,I.a],pipes:[o.d],styles:[".page-header[_ngcontent-%COMP%]{position:relative}@media (max-width:599px){.page-header[_ngcontent-%COMP%]{margin-left:16px;margin-right:16px}}.page-header[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{position:absolute;right:0;--mg-icon-size:141px;color:#ecdde1;z-index:0}.feed-items[_ngcontent-%COMP%]{margin-bottom:32px}.divider[_ngcontent-%COMP%]{border-top:1px solid #707070;width:100%;margin-bottom:14px;position:relative;z-index:1}"]}),e})();var T=n("NG9B"),R=n("m9yI"),j=n("PRFu"),D=(n("vjAc"),n("ls3q")),N=n("Ogcz"),B=n("iELJ"),A=n("4avL");let L=(()=>{class e{constructor(e){this.dialogRef=e}addPerson(){this.dialogRef.close("single")}addMultiplePeople(){this.dialogRef.close("multiple")}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](B.g))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-add-people-dialog"]],decls:4,vars:0,consts:[["type","outline",3,"click"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mg-button",0),r["\u0275\u0275listener"]("click",(function(){return t.addPerson()})),r["\u0275\u0275text"](1,"Add Person"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](2,"mg-button",0),r["\u0275\u0275listener"]("click",(function(){return t.addMultiplePeople()})),r["\u0275\u0275text"](3,"Add Multiple People"),r["\u0275\u0275elementEnd"]())},directives:[A.a],styles:["mg-button[_ngcontent-%COMP%]{width:100%;display:block;margin:16px 0}"]}),e})(),z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[g.a,B.f]]}),e})();var H=n("mrSG"),V=n("7bNT"),W=n("jtHE"),G=n("1G5W"),q=n("vAI6"),U=n("WFJ2"),$=n("vJwY"),Y=n("PYFZ"),Q=n("pgOG"),Z=n("HHVM"),J=n("orC8"),K=n("EyMp"),X=n("GFah"),ee=n("DjdL"),te=n("UWMR"),ne=n("cUpR"),re=n("mEol"),ie=n("3qIc"),oe=n("Cgve"),ae=n("VDRc"),se=n("cKGL"),le=n("FlXp"),ce=n("hrfs"),de=n("YgQ7"),me=n("cRkC");const ge=["successOverlayTemplate"];function pe(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",1),r["\u0275\u0275elementStart"](1,"div",2),r["\u0275\u0275element"](2,"mg-success-checkmark"),r["\u0275\u0275elementStart"](3,"div",3),r["\u0275\u0275projection"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]())}const ue=["*"];let he=(()=>{class e{constructor(e){this.mgModal=e,this.autoClose=!1,this.closed=new r.EventEmitter}open(){return Object(H.a)(this,void 0,void 0,(function*(){if(!this.successOverlayTemplate)return void console.error("successOverlayTemplate unset!");const e=this.mgModal.open(this.successOverlayTemplate,{full:!0,animation:"fade"});this.dialogRef=e,this.autoClose&&(this.getAutoCloseDelay(),setTimeout(()=>e.close(),this.getAutoCloseDelay())),yield new Promise(t=>{const n=e.onClosed.subscribe(r=>{t(),e===this.dialogRef&&(delete this.dialogRef,this.closed.emit(r)),n.unsubscribe()})})}))}close(e){this.dialogRef&&this.dialogRef.close(e)}getAutoCloseDelay(){return"number"==typeof this.autoClose?this.autoClose:2e3}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](de.b))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-success-modal"]],viewQuery:function(e,t){if(1&e&&r["\u0275\u0275viewQuery"](ge,3),2&e){let e;r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.successOverlayTemplate=e.first)}},inputs:{autoClose:"autoClose"},outputs:{closed:"closed"},ngContentSelectors:ue,decls:2,vars:0,consts:[["successOverlayTemplate",""],[1,"success-overlay"],[1,"checkmark-wrap"],[1,"mg-bodycopy"]],template:function(e,t){1&e&&(r["\u0275\u0275projectionDef"](),r["\u0275\u0275template"](0,pe,5,0,"ng-template",null,0,r["\u0275\u0275templateRefExtractor"]))},directives:[me.a],styles:["[_nghost-%COMP%]{display:block;width:100%;text-align:center}.success-overlay[_ngcontent-%COMP%]{height:100%;text-align:center;position:relative}.success-overlay[_ngcontent-%COMP%]   .checkmark-wrap[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%)}"],changeDetection:0}),e})();var fe=n("h4xe"),ve=n("ura0"),Ce=n("itXk"),be=n("pLZG"),Pe=n("lJxs"),Me=n("o4Yh"),xe=n("SLe5"),ye=n("sj4O");const Oe=["groupPanel"];function _e(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"mg-button",6),r["\u0275\u0275listener"]("click",(function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"](3).onGroupSelect(null,t)})),r["\u0275\u0275text"](1,"Reset"),r["\u0275\u0275elementEnd"]()}}function Se(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275elementStart"](1,"mat-expansion-panel",null,3),r["\u0275\u0275elementStart"](3,"mat-expansion-panel-header"),r["\u0275\u0275elementStart"](4,"mat-panel-title"),r["\u0275\u0275text"](5),r["\u0275\u0275template"](6,_e,2,0,"mg-button",4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"mg-group-list",5),r["\u0275\u0275listener"]("groupSelect",(function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"](2).onGroupSelect(t)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]().ngIf,t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate1"](" ",t.selectedGroup?"Selected: "+t.selectedGroup.name:"Select a school"," "),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.selectedGroup),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("groups",e)("clickMode","SELECT")}}function we(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"p"),r["\u0275\u0275text"](1,"No schools to select."),r["\u0275\u0275elementEnd"]())}function Ie(e,t){if(1&e&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275template"](1,Se,8,4,"ng-container",0),r["\u0275\u0275template"](2,we,2,0,"ng-template",null,2,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.ngIf,n=r["\u0275\u0275reference"](3);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.length>0)("ngIfElse",n)}}function Ee(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",7),r["\u0275\u0275element"](1,"mg-spinner",8),r["\u0275\u0275elementEnd"]())}let ke=(()=>{class e{constructor(e){this.groupsFacade=e,this.selectedGroup=null,this.groupSelect=new r.EventEmitter,this.loadedParentGroups$=Object(Ce.b)([this.groupsFacade.getGroupsLoaded(),this.groupsFacade.getParentGroups()]).pipe(Object(be.a)(([e])=>e),Object(Pe.a)(([,e])=>e))}onGroupSelect(e,t){t&&!e&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()),this.selectedGroup=e,this.groupSelect.emit(e),this.expansionPanel&&this.expansionPanel.close()}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](b.b))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-parent-group-select-expansion-panel"]],viewQuery:function(e,t){if(1&e&&r["\u0275\u0275viewQuery"](Oe,1),2&e){let e;r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.expansionPanel=e.first)}},outputs:{groupSelect:"groupSelect"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["loadingTpl",""],["noGroups",""],["groupPanel",""],["class","small","type","outline",3,"click",4,"ngIf"],[3,"groups","clickMode","groupSelect"],["type","outline",1,"small",3,"click"],[1,"mg-centered"],["diameter","30","thickness","4"]],template:function(e,t){if(1&e&&(r["\u0275\u0275template"](0,Ie,4,2,"ng-container",0),r["\u0275\u0275pipe"](1,"async"),r["\u0275\u0275template"](2,Ee,2,0,"ng-template",null,1,r["\u0275\u0275templateRefExtractor"])),2&e){const e=r["\u0275\u0275reference"](3);r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pipeBind1"](1,2,t.loadedParentGroups$))("ngIfElse",e)}},directives:[m.o,Me.c,Me.f,Me.g,xe.a,A.a,ye.a],pipes:[m.b],styles:["mat-expansion-panel[_ngcontent-%COMP%]{background-color:initial}mat-expansion-panel[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]{justify-content:space-between}"],changeDetection:0}),e})();var Fe=n("UhP/"),Te=n("pMoy"),Re=n("f44v"),je=n("Tj54"),De=n("Hp2Z"),Ne=n("O4Bs"),Be=n("VoSn"),Ae=n("gjtd"),Le=n("DobJ");const ze=["confirmResendEmailsTpl"],He=["confirmResendSuccessModal"];function Ve(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",29),r["\u0275\u0275elementStart"](1,"div",30),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"div",31),r["\u0275\u0275element"](4,"mg-odometer",32),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){const e=t.statType,n=t.statTitle,i=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](n),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("value",i.getActivityStats(e,!0))}}const We=function(){return["people","add"]},Ge=function(e){return{o:e}},qe=function(e){return{outlets:e}},Ue=function(e){return["",e]};function $e(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mg-button",33),r["\u0275\u0275elementStart"](1,"div",34),r["\u0275\u0275elementStart"](2,"mg-icon"),r["\u0275\u0275text"](3,"post"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](4,"Add Person"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&r["\u0275\u0275property"]("ngClass.xs","small")("ngClass.gt-sm","normal")("routerLink",r["\u0275\u0275pureFunction1"](8,Ue,r["\u0275\u0275pureFunction1"](6,qe,r["\u0275\u0275pureFunction1"](4,Ge,r["\u0275\u0275pureFunction0"](3,We)))))}const Ye=function(){return["people","import"]};function Qe(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mg-button",33),r["\u0275\u0275elementStart"](1,"div",34),r["\u0275\u0275elementStart"](2,"mg-icon"),r["\u0275\u0275text"](3,"upload-o"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](4,"Upload List"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&r["\u0275\u0275property"]("ngClass.xs","small")("ngClass.gt-sm","normal")("routerLink",r["\u0275\u0275pureFunction1"](8,Ue,r["\u0275\u0275pureFunction1"](6,qe,r["\u0275\u0275pureFunction1"](4,Ge,r["\u0275\u0275pureFunction0"](3,Ye)))))}const Ze=function(){return["people","delete-many"]};function Je(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mg-button",33),r["\u0275\u0275elementStart"](1,"div",34),r["\u0275\u0275elementStart"](2,"mg-icon"),r["\u0275\u0275text"](3,"warning-o"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](4,"Delete Multiple "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&r["\u0275\u0275property"]("ngClass.xs","small")("ngClass.gt-sm","normal")("routerLink",r["\u0275\u0275pureFunction1"](8,Ue,r["\u0275\u0275pureFunction1"](6,qe,r["\u0275\u0275pureFunction1"](4,Ge,r["\u0275\u0275pureFunction0"](3,Ze)))))}function Ke(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",6),r["\u0275\u0275elementStart"](1,"div",14),r["\u0275\u0275elementStart"](2,"div",8),r["\u0275\u0275text"](3,"District School Select"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"div",9),r["\u0275\u0275text"](5,"Filter by School"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"mg-parent-group-select-expansion-panel",36),r["\u0275\u0275listener"]("groupSelect",(function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"](2).onGroupSelect(t)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}}function Xe(e,t){1&e&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275template"](1,Ke,7,0,"div",35),r["\u0275\u0275elementContainerEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("hasPermission","GROUP_ALLOW_ANY_PARENT_GROUP"))}function et(e,t){1&e&&r["\u0275\u0275elementContainer"](0)}function tt(e,t){1&e&&r["\u0275\u0275elementContainer"](0)}function nt(e,t){1&e&&r["\u0275\u0275elementContainer"](0)}function rt(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",39),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const t=r["\u0275\u0275nextContext"]().$implicit;return r["\u0275\u0275nextContext"]().toggleFilter(t)})),r["\u0275\u0275elementStart"](1,"div",40),r["\u0275\u0275element"](2,"mat-checkbox",41),r["\u0275\u0275elementStart"](3,"div"),r["\u0275\u0275elementStart"](4,"div",42),r["\u0275\u0275text"](5,"PEOPLE"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",40),r["\u0275\u0275element"](7,"span",43),r["\u0275\u0275elementStart"](8,"span",44),r["\u0275\u0275text"](9),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]().$implicit;r["\u0275\u0275classProp"]("has-filter",e.searchFilter)("active",e.filterActive),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("checked",e.filterActive),r["\u0275\u0275advance"](7),r["\u0275\u0275textInterpolate"](e.total)}}function it(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",45),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const t=r["\u0275\u0275nextContext"]().$implicit;return r["\u0275\u0275nextContext"]().toggleFilter(t)})),r["\u0275\u0275elementStart"](1,"div",46),r["\u0275\u0275elementStart"](2,"div",40),r["\u0275\u0275element"](3,"mat-checkbox",41),r["\u0275\u0275elementStart"](4,"div"),r["\u0275\u0275elementStart"](5,"div",42),r["\u0275\u0275text"](6,"PENDING INVITES"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"div",40),r["\u0275\u0275element"](8,"span",47),r["\u0275\u0275elementStart"](9,"span",48),r["\u0275\u0275text"](10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"div",49),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"](2).resendAllInviteEmails()})),r["\u0275\u0275elementStart"](12,"mg-icon"),r["\u0275\u0275text"](13,"publish-o"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](14," Resend"),r["\u0275\u0275element"](15,"br"),r["\u0275\u0275text"](16,"Invites "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]().$implicit,t=r["\u0275\u0275nextContext"]();r["\u0275\u0275classProp"]("has-filter",e.searchFilter)("active",e.filterActive),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("checked",e.filterActive),r["\u0275\u0275advance"](7),r["\u0275\u0275textInterpolate"](t.unregisteredCount)}}function ot(e,t){if(1&e&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275template"](1,rt,10,6,"div",37),r["\u0275\u0275template"](2,it,17,6,"div",38),r["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit,n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.title===n.StatCategories.REGISTERED),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.title===n.StatCategories.UNREGISTERED)}}function at(e,t){if(1&e&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275element"](1,"div",52),r["\u0275\u0275element"](2,"mat-checkbox",53),r["\u0275\u0275elementStart"](3,"strong",54),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"strong",55),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"strong",56),r["\u0275\u0275text"](8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](9),r["\u0275\u0275elementContainerEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]().$implicit,t=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275attribute"]("style",t.getRoleCircleGradient(e.statColor),r["\u0275\u0275sanitizeStyle"]),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("checked",e.filterActive),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](e.total-(e.registered||e.total)),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](e.registered),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](e.countText),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" \xa0",e.title," ")}}function st(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",57),r["\u0275\u0275text"](1," Total:\xa0 "),r["\u0275\u0275elementStart"](2,"strong",54),r["\u0275\u0275text"](3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"strong",55),r["\u0275\u0275text"](5),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"strong",56),r["\u0275\u0275text"](7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]().$implicit;r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](e.total-(e.registered||e.total)),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](e.registered),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](e.countText)}}function lt(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",50),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const n=t.$implicit;return r["\u0275\u0275nextContext"]().toggleFilter(n)})),r["\u0275\u0275template"](1,at,10,6,"ng-container",5),r["\u0275\u0275template"](2,st,8,3,"div",51),r["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.title!=n.StatCategories.TOTAL&&e.title!=n.StatCategories.SADMIN),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.title==n.StatCategories.TOTAL)}}function ct(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"mat-chip",60),r["\u0275\u0275listener"]("removed",(function(){r["\u0275\u0275restoreView"](e);const t=r["\u0275\u0275nextContext"]().$implicit;return r["\u0275\u0275nextContext"](2).toggleFilter(t)})),r["\u0275\u0275text"](1),r["\u0275\u0275elementStart"](2,"mat-icon",61),r["\u0275\u0275text"](3,"cancel"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]().$implicit;r["\u0275\u0275property"]("removable",!0)("disableRipple",!0),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",e.title," "),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("matRippleUnbounded",!0)}}function dt(e,t){if(1&e&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275template"](1,ct,4,4,"mat-chip",59),r["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.filterActive)}}function mt(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"mat-chip",60),r["\u0275\u0275listener"]("removed",(function(){r["\u0275\u0275restoreView"](e);const t=r["\u0275\u0275nextContext"]().$implicit;return r["\u0275\u0275nextContext"](2).toggleFilter(t)})),r["\u0275\u0275text"](1),r["\u0275\u0275elementStart"](2,"mat-icon",61),r["\u0275\u0275text"](3,"cancel"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]().$implicit;r["\u0275\u0275property"]("removable",!0)("disableRipple",!0),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",e.title," "),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("matRippleUnbounded",!0)}}function gt(e,t){if(1&e&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275template"](1,mt,4,4,"mat-chip",59),r["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit,n=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.filterActive&&e.title!==n.StatCategories.TOTAL)}}function pt(e,t){if(1&e&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275elementStart"](1,"p",58),r["\u0275\u0275elementStart"](2,"strong"),r["\u0275\u0275text"](3,"Your active selections"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"mat-chip-list"),r["\u0275\u0275template"](5,dt,2,1,"ng-container",16),r["\u0275\u0275template"](6,gt,2,1,"ng-container",16),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementContainerEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngForOf",e.primaryStatFilters),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",e.secondaryStatFilters)}}function ut(e,t){1&e&&(r["\u0275\u0275element"](0,"mg-empty-state",62),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275pipe"](2,"translate")),2&e&&r["\u0275\u0275property"]("title",r["\u0275\u0275pipeBind1"](1,2,"emptyState.nothingSelected"))("subtitle",r["\u0275\u0275pipeBind1"](2,4,"emptyState.nothingSelectedPeopleSubtitle"))}function ht(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",63),r["\u0275\u0275element"](1,"mg-button-icon",64),r["\u0275\u0275elementStart"](2,"h1",65),r["\u0275\u0275text"](3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"p"),r["\u0275\u0275elementStart"](5,"strong"),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](7," will receive the invite email with their PIN and a link to register. "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"div",66),r["\u0275\u0275element"](9,"div",67),r["\u0275\u0275elementStart"](10,"mg-button",68),r["\u0275\u0275text"](11,"Cancel"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"mg-button",69),r["\u0275\u0275text"](13,"Proceed"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("matDialogClose",null),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" Resend Invite Email",1!=e.unregisteredCount?"s":""," "),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate2"]("",e.unregisteredCount," ",1!=e.unregisteredCount?"people":"person",""),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("matDialogClose",!1),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("matDialogClose",!0)}}function ft(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"mg-button",70),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().submit()})),r["\u0275\u0275text"](1," List Selected People\n"),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275classProp"]("unsubmitted",!e.submitted),r["\u0275\u0275property"]("disabled",e.submitted||!e.hasActiveFilters())}}function vt(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",78),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"](3).export()})),r["\u0275\u0275text"](1," Export list "),r["\u0275\u0275elementEnd"]()}}function Ct(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"th",76),r["\u0275\u0275text"](1," Member Details "),r["\u0275\u0275template"](2,vt,2,0,"button",77),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"th"),r["\u0275\u0275text"](4,"Role"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"th"),r["\u0275\u0275text"](6,"Last Login"),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",!e.searchText)}}function bt(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"span",86),r["\u0275\u0275text"](1,"--"),r["\u0275\u0275elementEnd"]())}function Pt(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]().$implicit,t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",t.lastLoginFormat(e.lastLogin)," ")}}const Mt=function(e){return["people","update",e]};function xt(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"td"),r["\u0275\u0275element"](1,"mg-avatar",79),r["\u0275\u0275elementStart"](2,"div",80),r["\u0275\u0275elementStart"](3,"div"),r["\u0275\u0275element"](4,"mg-person-minimal",81),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"div"),r["\u0275\u0275elementStart"](6,"a",82),r["\u0275\u0275text"](7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"td",83),r["\u0275\u0275elementStart"](9,"strong",84),r["\u0275\u0275text"](10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"td",83),r["\u0275\u0275template"](12,bt,2,0,"span",85),r["\u0275\u0275template"](13,Pt,2,1,"span",5),r["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275styleProp"]("opacity",e.archived?"0.5":1),r["\u0275\u0275property"]("src",e.profileImageUrl)("color",e.badgeIconColor)("personHash",e.personHash),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("person",n.personMinimalData(e))("routerLink",r["\u0275\u0275pureFunction1"](21,Ue,r["\u0275\u0275pureFunction1"](19,qe,r["\u0275\u0275pureFunction1"](17,Ge,r["\u0275\u0275pureFunction1"](15,Mt,e.personHash))))),r["\u0275\u0275advance"](1),r["\u0275\u0275styleProp"]("opacity",e.archived?"0.5":1),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("href","mailto:"+e.email,r["\u0275\u0275sanitizeUrl"]),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](e.email),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("title",n.roleTitle(e)),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",n.roleInitial(e.badgeRoleName)," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",!e.lastLogin),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.lastLogin)}}function yt(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mg-table-stream-scroller",71),r["\u0275\u0275elementStart"](1,"p",72),r["\u0275\u0275text"](2," No results "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"p",73),r["\u0275\u0275text"](4," No more results "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](5,Ct,7,1,"ng-template",74),r["\u0275\u0275template"](6,xt,14,23,"ng-template",75),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("service",e.mingaPeopleManager)("filter",e.getStreamFilter())}}const Ot=function(e){return{statType:e,statTitle:"Today"}},_t=function(e){return{statType:e,statTitle:"Last 7 Days"}},St=function(e){return{statType:e,statTitle:"Last 30 Days"}};var wt=function(e){return e.REGISTERED="Registered",e.TOTAL="Total",e.DAILY="daily",e.WEEKLY="weekly",e.MONTHLY="monthly",e.SADMIN="Super Admin",e.UNREGISTERED="Unregistered",e}({});let It=(()=>{class e{constructor(e,t,n,r,i,o,a,s,l,c,d,m,g,p,u){this.userStorage=e,this.peopleManager=t,this.peopleAdminManager=n,this.mingaPeopleManager=r,this.router=i,this.dialog=o,this.permissions=a,this.rootService=s,this.actions$=l,this.search=c,this.snackbar=d,this.cdr=m,this.sanitizer=g,this.rootNav=p,this._settingService=u,this._destroyed$=new W.a(1),this.items=[],this.people=null,this.StatCategories=wt,this.primaryStatFilters=[],this.secondaryStatFilters=[],this.activityStats=[],this.streamFilter={query:""},this.submitted=!1,this.tableLabel="",this.searchText="",this.unregisteredCount="--",this.registeredCount="--",this.currentGroup=null,this.selectedGroup=null,this.doughnutChartData=[],this.doughnutChartType="doughnut",this.doughnutChartLabels=[],this.doughnutChartColours=[],this.rootNav.currentGroup$.pipe(Object(G.a)(this._destroyed$)).subscribe(e=>{this.currentGroup=e,this._initMingaPeopleInfo()}),this.isDistrictEnabled$=this._settingService.getSettingValueObs(f.mingaSettingTypes.FEATURE_DISTRICT_ENABLED),this._initMingaPeopleInfo()}onGroupSelect(e){this.selectedGroup=e||null,this._initMingaPeopleInfo(),this.submitted=!1}hasActiveFilters(e=!1){if(!e)for(let t=0;t<this.primaryStatFilters.length;t++)if(this.primaryStatFilters[t].filterActive)return!0;for(let t=0;t<this.secondaryStatFilters.length;t++)if(this.secondaryStatFilters[t].filterActive&&this.secondaryStatFilters[t].title!==wt.TOTAL)return!0;return!1}_doResendAllInviteEmails(){return Object(H.a)(this,void 0,void 0,(function*(){const e=new Q.ResendAllInvitesRequest;e.setSendInviteEmail(!0);let t=!1;try{yield this.peopleAdminManager.resendAllInvites(e),t=!0}catch(n){console.error(n),this.snackbar.open("Something went wrong, please try again later")}t&&this.confirmResendSuccessModal&&(yield this.confirmResendSuccessModal.open().then(()=>{}))}))}resendAllInviteEmails(){this.confirmResendEmailsTpl&&this.dialog.open(this.confirmResendEmailsTpl,{panelClass:"mg-normal-padding-dialog"}).beforeClosed().subscribe(e=>{e&&this.rootService.addLoadingPromise(this._doResendAllInviteEmails())})}export(){return Object(H.a)(this,void 0,void 0,(function*(){return this.rootService.addLoadingPromise(this._doExport())}))}_doExport(){return Object(H.a)(this,void 0,void 0,(function*(){const e=new Q.ExportPeopleRequest;let t=null;for(let o of this.primaryStatFilters)o.searchFilter&&o.filterActive&&(t=t?null:o.searchFilter["searchData.registered"]);!0!==t&&!1!==t||e.setRegistered(t?Q.ExportPeopleRequest.FilterRegistered.REGISTERED:Q.ExportPeopleRequest.FilterRegistered.NOT_REGISTERED);for(let o of this.secondaryStatFilters)o.searchFilter&&o.filterActive&&o.searchFilter["searchData.roleType"]&&e.addRoleTypeFilter(o.searchFilter["searchData.roleType"]);const n=this.mingaPeopleManager.exportPeople(e);let r="",i=new Uint8Array(0);yield new Promise((e,t)=>{n.subscribe(e=>{if(e.hasChunk()){const t=e.getChunk_asU8(),n=new Uint8Array(i.length+t.length);n.set(i),n.set(t,i.length),i=n}else e.hasFilename()&&(r=e.getFilename())},t,e)}),Object($.a)(i,r)}))}_initChart(){const e=[],t=[],n=[],r=this.hasActiveFilters(!0),i=this.isOnlyUnregisteredFilterActive(),o=this.isRegisteredFilterActive();for(let a=0;a<this.secondaryStatFilters.length;a++){const s=this.secondaryStatFilters[a];s.title===wt.TOTAL||!s.total||r&&!s.filterActive||(e.push(i?s.total-(s.registered||s.total):o&&s.registered?s.registered:s.total),t.push(s.title),n.push(s.statColor||"#1DCE4D"))}this.doughnutChartColours=[{backgroundColor:n}],this.doughnutChartData=[e],this.doughnutChartLabels=t}_fillInStatInfo(e,t,n){let r=0;for(let i=0;e.length>i;i++){const o=e[i];let a=o.getStatTitle();const s={title:a,countText:"--",total:o.getStatTotal()||o.getStatCount(),primary:n,daily:o.getDaily(),weekly:o.getWeekly(),monthly:o.getMonthly(),registered:o.getRegistered(),statColor:o.getStatColor()};if(a!==wt.REGISTERED&&a!==wt.TOTAL||(s.filterActive=!0,r=i),o.hasStatPercent()?s.countText=(100*o.getStatPercent()).toFixed(0)+"%":o.hasStatCount()&&(s.countText=""+o.getStatCount()),o.hasStatSearchFilter()){const e=o.getStatSearchFilter().getKeyValuesMap();s.searchFilter={},e.forEach((e,t)=>{let n;switch(e.getValuesCase()){case Y.StreamFilterType.ValuesCase.BOOL_VALUE:n=e.getBoolValue();break;case Y.StreamFilterType.ValuesCase.FLOAT_VALUE:n=e.getFloatValue();break;case Y.StreamFilterType.ValuesCase.DOUBLE_VALUE:n=e.getDoubleValue();break;case Y.StreamFilterType.ValuesCase.UINT32_VALUE:n=e.getUint32Value();break;case Y.StreamFilterType.ValuesCase.INT32_VALUE:n=e.getInt32Value();break;case Y.StreamFilterType.ValuesCase.STRING_VALUE:n=e.getStringValue();break;case Y.StreamFilterType.ValuesCase.OP:n=e.getOp();break;default:return}s.searchFilter[t]=n})}t.push(s)}if(!n&&(this._initChart(),r<t.length-1)){const e=t.splice(r)[0];t.push(e)}}getRoleCircleGradient(e){const t=e||"#1DCE4D",n=Object(U.a)(t).darken(.25);return this.sanitizer.bypassSecurityTrustStyle(`--circle-gradient-color1: ${t}; --circle-gradient-color2: ${n};`)}_loadMingaPeopleInfoCache(){return Object(H.a)(this,void 0,void 0,(function*(){const e=yield this.userStorage.getItem("minga_people_info_cache");if(e){this.primaryStatFilters.length>e.primary_count&&(this.primaryStatFilters=this.primaryStatFilters.slice(0,e.primary_count)),this.secondaryStatFilters.length>e.secondary_count&&(this.secondaryStatFilters=this.secondaryStatFilters.slice(0,e.secondary_count));for(let t=0;e.primary_count>t;t++)this.primaryStatFilters[t]||(this.primaryStatFilters[t]={title:"",countText:"--",total:0,cached:!0,primary:!0});for(let t=0;e.secondary_count>t;t++)this.secondaryStatFilters[t]||(this.secondaryStatFilters[t]={title:"",countText:"--",total:0,cached:!0,primary:!1})}}))}lastLoginFormat(e){if(!e)return"--";const t=new Date;t.setUTCHours(0),t.setUTCMinutes(0),t.setUTCSeconds(0),t.setUTCMilliseconds(0);const n=new Date(Date.UTC(e.year,e.month-1,e.day)),r=t.getTime()-n.getTime();return r<864e5?"today":Z.day.duration(-r).humanize(!0)}getTableLabel(){const e=[];if(this.searchText)e.push(`"${this.searchText}"`);else{for(let t of this.primaryStatFilters)t.filterActive&&e.push(t.title);for(let t of this.secondaryStatFilters)t.filterActive&&t.title!==wt.TOTAL&&e.push(t.title)}return e.join(", ")}getRegisteredStats(e,t){let n=0,r=0;for(let i of this.secondaryStatFilters)i.title!==wt.TOTAL&&i.filterActive&&(n+=i.registered,r+=i.total);if(e.title!=wt.REGISTERED&&(n=r-n),t){const e=n/r*100;return isFinite(e)?e.toFixed(0)+"%":"0%"}return n}_activePrimaryFilters(){let e=!1,t=!1;for(let n of this.primaryStatFilters)n.title===wt.UNREGISTERED&&n.filterActive?e=!0:n.title===wt.REGISTERED&&n.filterActive&&(t=!0);return[e,t]}isRegisteredFilterActive(){const[e,t]=this._activePrimaryFilters();return t&&!e}isOnlyUnregisteredFilterActive(){const[e,t]=this._activePrimaryFilters();return!t&&e}hasClearableFilters(){return this.submitted&&!!this.streamFilter.query}getActivityStats(e,t){const[n,r]=this._activePrimaryFilters();if(!r)return"--";let i=0,o=0;for(let a of this.secondaryStatFilters)a.filterActive&&(i+=a[e],o+=a.registered);if(t){const e=i/o*100;return isFinite(e)?e.toFixed(0)+"%":"0%"}return i.toString()}getStreamFilter(){return this.streamFilter}applyStreamFilter(){var e;const t={query:""};let n=null;for(let s of this.primaryStatFilters)s.searchFilter&&s.filterActive&&(n=n?null:s.searchFilter);n&&Object.assign(t,n);const r=new Y.StreamFilterOp.Includes;let i=!1;for(let s of this.secondaryStatFilters)if(s.searchFilter&&s.filterActive)if(s.searchFilter["searchData.roleType"]){const e=new Y.StreamFilterOp.Value;e.setStringValue(s.searchFilter["searchData.roleType"]),r.addValue(e),i=!0}else Object.assign(t,s.searchFilter);if(i){const e=new Y.StreamFilterOp;e.setIncludes(r),t["searchData.roleType"]=e}"searchData.archived"in t||(t["searchData.archived"]=!1),this.searchText&&(t.query=this.searchText);let o=null;const a=this.permissions.hasPermission(f.MingaPermission.GROUP_ALLOW_ANY_PARENT_GROUP);if((null===(e=this.currentGroup)||void 0===e?void 0:e.isParent)&&!a?o=this.currentGroup:this.selectedGroup&&(o=this.selectedGroup),o){const e=new Y.StreamFilterOp,n=new Y.StreamFilterOp.Includes,r=new Y.StreamFilterOp.Value;r.setStringValue(o.hash),n.addValue(r),e.setIncludes(n),t["searchData.parentGroupHashes"]=e}this.streamFilter=t}clearActivePrimaryFilter(e){this.primaryStatFilters.forEach(t=>{"filterActive"in t&&(t.filterActive=!1),e&&t.title==e&&(t.filterActive=!0)})}clearActiveSecondaryFilter(e){this.secondaryStatFilters.forEach(t=>{"filterActive"in t&&(t.filterActive=!1),e&&t.title==e&&(t.filterActive=!0)})}clearActiveTotalFilter(){this.secondaryStatFilters.forEach(e=>{e.title==wt.TOTAL&&(e.filterActive=!1)})}activateActiveTotalFilter(){this.secondaryStatFilters.forEach(e=>{e.title==wt.TOTAL&&(e.filterActive=!0)})}clearFilters(){this.clearActiveSecondaryFilter(wt.TOTAL),this.clearActivePrimaryFilter(wt.REGISTERED),this.search.resetSearch(),this.submitted=!1}toggleFilter(e){const t=!e.filterActive;requestAnimationFrame(()=>{e.searchFilter||e.primary?e.primary||e.filterActive||this.clearActiveTotalFilter():(this.clearActiveSecondaryFilter(),e.filterActive=!0),e.searchFilter&&(e.filterActive=t),this.hasActiveFilters(!0)&&this.activateActiveTotalFilter(),this.submitted=!1,this.searchText&&this.submit(),this._initChart(),this.cdr.markForCheck()})}roleTitle(e){return e.archived?"(Archived) "+e.badgeRoleName:e.badgeRoleName}roleInitial(e){if("Member"===e||"Members"===e)return"Mem";if("Staff"===e)return"Sf";let t="";for(let n=0;e.length>n;n++){const r=e[n];r===r.toUpperCase()&&(t+=r)}return t||(t=e[0].toUpperCase()),t}_saveMingaPeopleInfoCache(){return Object(H.a)(this,void 0,void 0,(function*(){const e={primary_count:this.primaryStatFilters.length,secondary_count:this.secondaryStatFilters.length};yield this.userStorage.setItem("minga_people_info_cache",e)}))}_removeInvalidCachInfo(){this.primaryStatFilters=this.primaryStatFilters.filter(e=>!e.cached),this.secondaryStatFilters=this.secondaryStatFilters.filter(e=>!e.cached)}_initMingaPeopleInfo(){var e;return Object(H.a)(this,void 0,void 0,(function*(){yield this._loadMingaPeopleInfoCache();const t=new Q.MingaPeopleInfoRequest,n=this.permissions.hasPermission(f.MingaPermission.GROUP_ALLOW_ANY_PARENT_GROUP);(null===(e=this.currentGroup)||void 0===e?void 0:e.isParent)&&!n?t.setParentGroupHash(this.currentGroup.hash):this.selectedGroup&&t.setParentGroupHash(this.selectedGroup.hash);const r=yield this.mingaPeopleManager.getInfo(t);this.unregisteredCount=r.getUnregisteredCount();const i=r.getPrimaryStatFilterList(),o=r.getSecondaryStatFilterList();this.primaryStatFilters=[],this.secondaryStatFilters=[],this._fillInStatInfo(i,this.primaryStatFilters,!0),this._fillInStatInfo(o,this.secondaryStatFilters,!1),this.primaryStatFilters.length>0&&(this.primaryStatFilters[0].filterActive=!0);for(let e=0;e<this.primaryStatFilters.length;e++){const t=this.primaryStatFilters[e];if(t.title===wt.REGISTERED){this.registeredCount=t.total;break}}this._removeInvalidCachInfo(),yield this._saveMingaPeopleInfoCache(),this.cdr.markForCheck()}))}streamItemClick(e){this.router.navigate(["/admin/",{outlets:{o:["people","update",e.model.item.data.personHash]}}])}_cleanupSubs(){this._onPullDownSub&&(this._onPullDownSub.unsubscribe(),delete this._onPullDownSub),this._personCreateSuccessSub&&(this._personCreateSuccessSub.unsubscribe(),delete this._personCreateSuccessSub)}ngOnInit(){this._cleanupSubs(),this._onPullDownSub=this.rootService.onPullDown.subscribe(()=>{this._initMingaPeopleInfo()}),this._personCreateSuccessSub=this.actions$.pipe(Object(V.e)(q.a.TypeEnum.PeopleUpdated)).subscribe(()=>{this._initMingaPeopleInfo()})}onSearchText(e){!this.searchText&&e&&this.clearActivePrimaryFilter(),this.searchText=e,this.searchText?this.submit():this.submitted=!1}ngOnDestroy(){this._cleanupSubs(),this._destroyed$.next(),this._destroyed$.complete(),this.search.resetSearch()}personMinimalData(e){return Object.assign(Object.assign({},e),{displayName:e.firstName+" "+e.lastName})}openAddPeopleDialog(){return Object(H.a)(this,void 0,void 0,(function*(){this.permissions.hasPermission(f.MingaPermission.MINGA_PEOPLE_MANAGE)?this.dialog.open(L).beforeClosed().subscribe(e=>{"single"===e?this.router.navigate(["/admin/",{outlets:{o:["people","create"]}}]):"multiple"===e&&this.router.navigate(["/admin/",{outlets:{o:["people","create","bulk"]}}])}):yield this.router.navigate(["/admin/",{outlets:{o:["people","create"]}}])}))}submit(){this.submitted=!0,this.applyStreamFilter(),this.tableLabel=this.getTableLabel()}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](J.a),r["\u0275\u0275directiveInject"](K.PeopleManager),r["\u0275\u0275directiveInject"](K.PeopleAdminManager),r["\u0275\u0275directiveInject"](K.MingaPeopleManager),r["\u0275\u0275directiveInject"](i.g),r["\u0275\u0275directiveInject"](B.b),r["\u0275\u0275directiveInject"](M.c),r["\u0275\u0275directiveInject"](X.a),r["\u0275\u0275directiveInject"](V.a),r["\u0275\u0275directiveInject"](ee.f),r["\u0275\u0275directiveInject"](te.b),r["\u0275\u0275directiveInject"](r.ChangeDetectorRef),r["\u0275\u0275directiveInject"](ne.b),r["\u0275\u0275directiveInject"](re.b),r["\u0275\u0275directiveInject"](ie.a))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-admin-people"]],viewQuery:function(e,t){if(1&e&&(r["\u0275\u0275viewQuery"](ze,3),r["\u0275\u0275viewQuery"](He,3)),2&e){let e;r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.confirmResendEmailsTpl=e.first),r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.confirmResendSuccessModal=e.first)}},decls:57,vars:34,consts:[["searchPlaceholder","Search People",3,"searchQueryChange"],["filterActivityBlocksTemplate",""],["fxLayout","row","fxLayoutAlign","start center",1,"mg-headline","admin-people-top"],["fxFlex",""],["class","btn small","type","outline",3,"ngClass.xs","ngClass.gt-sm","routerLink",4,"hasPermission"],[4,"ngIf"],[1,"section"],[1,"activity-flex-container","section-title"],[1,"mg-bodycopy-bold"],[1,"mg-minicopy","hide-mobile"],[1,"mg-minitext"],["label","Use the top Search bar to quickly find a specific Profile.\n\n          Activity shows the % of people that have logged in to your Minga in\n          each time period. Keep in mind this does not include people that have\n          engaged with push notifications to their device.\n\n          Use the People and Role sections to select filters to list and view\n          People in your Minga to make updates to their Profile or to see the\n          last time they logged in.\n\n          View your filter selection at the bottom of the page and make updates\n          to your selections before you List Selected People."],[1,"block-row","mg-align-center","blue-children","no-click-children"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"section-title"],[1,"block-row"],[4,"ngFor","ngForOf"],[1,"role-filter-container"],[1,"roles-list","mg-minicopy"],["class","role",3,"click",4,"ngFor","ngForOf"],[1,"role-graph-container"],["baseChart","",3,"data","labels","legend","colors","chartType"],[1,"section-footer"],[3,"title","subtitle",4,"ngIf"],[3,"autoClose"],["confirmResendSuccessModal",""],["confirmResendEmailsTpl",""],["class","list-members","type","outline",3,"unsubmitted","disabled","click",4,"ngIf"],["class","mg-table","mgStreamControl","AdminPeopleFeed","rpcStream","searchPeople","rpcControl","searchPeopleControl",3,"service","filter",4,"ngIf"],[1,"block"],[1,"responsive-stat-title","small"],[1,"number","percent"],["odometer-percent","",1,"filter-block-count-text",3,"value"],["type","outline",1,"btn","small",3,"ngClass.xs","ngClass.gt-sm","routerLink"],[1,"button-centered"],["class","section",4,"hasPermission"],[3,"groupSelect"],["class","block people","matRipple","",3,"has-filter","active","click",4,"ngIf"],["class","block-container",3,"has-filter","active","click",4,"ngIf"],["matRipple","",1,"block","people",3,"click"],[1,"row"],["mg-color","white",3,"checked"],[1,"responsive-stat-title"],[1,"icon","desk"],[1,"number","bold","large"],[1,"block-container",3,"click"],["matRipple","",1,"inner","block","invites"],[1,"icon","email"],[1,"number"],["matRipple","",1,"inner","block","mg-no-transform","mg-align-center","responsive-stat-title","resend-invites",3,"click"],[1,"role",3,"click"],["class","mg-bodycopy",4,"ngIf"],[1,"circle"],[3,"checked"],[1,"unregistered-count"],[1,"registered-count"],[1,"total-count"],[1,"mg-bodycopy"],[1,"mg-minicopy"],[3,"removable","disableRipple","removed",4,"ngIf"],[3,"removable","disableRipple","removed"],["matRipple","","matChipRemove","",3,"matRippleUnbounded"],[3,"title","subtitle"],["matDialogContent","",1,"confirm-resend-dialog"],["icon","close",1,"mg-no-padding",3,"matDialogClose"],[1,"mg-headline3"],["fxLayout","row","fxLayoutGap","8px"],["fxFlex","auto"],["type","text",1,"normal",3,"matDialogClose"],["type","outline",1,"normal",3,"matDialogClose"],["type","outline",1,"list-members",3,"disabled","click"],["mgStreamControl","AdminPeopleFeed","rpcStream","searchPeople","rpcControl","searchPeopleControl",1,"mg-table",3,"service","filter"],["mg-stream-empty","",1,"mg-centered"],["mg-stream-front-exhausted","",1,"mg-centered"],["mgTableStreamHeader",""],["mgTableStreamRow",""],[2,"text-align","left"],["class","export-button",3,"click",4,"ngIf"],[1,"export-button",3,"click"],[2,"margin-right","8px","cursor","pointer",3,"src","color","personHash"],["fxLayout","column","fxFlex",""],[2,"cursor","pointer",3,"person","routerLink"],[2,"color","#9933ff","text-decoration","none","font-size","10px",3,"href"],[1,"mg-centered"],[3,"title"],["style","color: #737373",4,"ngIf"],[2,"color","#737373"]],template:function(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mg-search-active-route",0),r["\u0275\u0275listener"]("searchQueryChange",(function(e){return t.onSearchText(e)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](1,Ve,5,2,"ng-template",null,1,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275elementStart"](3,"div",2),r["\u0275\u0275elementStart"](4,"mg-icon"),r["\u0275\u0275text"](5,"person"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"span"),r["\u0275\u0275text"](7,"People"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](8,"div",3),r["\u0275\u0275template"](9,$e,5,10,"mg-button",4),r["\u0275\u0275template"](10,Qe,5,10,"mg-button",4),r["\u0275\u0275template"](11,Je,5,10,"mg-button",4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](12,Xe,2,1,"ng-container",5),r["\u0275\u0275pipe"](13,"async"),r["\u0275\u0275elementStart"](14,"div",6),r["\u0275\u0275elementStart"](15,"div",7),r["\u0275\u0275elementStart"](16,"div"),r["\u0275\u0275elementStart"](17,"div",8),r["\u0275\u0275text"](18,"Activity"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](19,"div",9),r["\u0275\u0275text"](20," % of People that have logged in to Minga "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](21,"div",10),r["\u0275\u0275text"](22," How to use this page "),r["\u0275\u0275element"](23,"mg-tooltip",11),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](24,"div",12),r["\u0275\u0275template"](25,et,1,0,"ng-container",13),r["\u0275\u0275template"](26,tt,1,0,"ng-container",13),r["\u0275\u0275template"](27,nt,1,0,"ng-container",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](28,"div",6),r["\u0275\u0275elementStart"](29,"div",14),r["\u0275\u0275elementStart"](30,"div",8),r["\u0275\u0275text"](31,"People"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](32,"div",9),r["\u0275\u0275text"](33," Filter by People or Pending Invites "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](34,"div",15),r["\u0275\u0275template"](35,ot,3,2,"ng-container",16),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](36,"div",6),r["\u0275\u0275elementStart"](37,"div",14),r["\u0275\u0275elementStart"](38,"div",8),r["\u0275\u0275text"](39,"Roles"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](40,"div",9),r["\u0275\u0275text"](41,"Filter by Role"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](42,"div",17),r["\u0275\u0275elementStart"](43,"div",18),r["\u0275\u0275template"](44,lt,3,2,"div",19),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](45,"div",20),r["\u0275\u0275element"](46,"canvas",21),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](47,"div",22),r["\u0275\u0275template"](48,pt,7,2,"ng-container",5),r["\u0275\u0275template"](49,ut,3,6,"mg-empty-state",23),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](50,"mg-success-modal",24,25),r["\u0275\u0275text"](52," Success!\n"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](53,ht,14,6,"ng-template",null,26,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275template"](55,ft,2,3,"mg-button",27),r["\u0275\u0275template"](56,yt,7,2,"mg-table-stream-scroller",28)),2&e){const e=r["\u0275\u0275reference"](2);r["\u0275\u0275advance"](9),r["\u0275\u0275property"]("hasPermission","MINGA_PEOPLE_MANAGE"),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("hasPermission","MINGA_PEOPLE_MANAGE"),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("hasPermission","SUPERADMIN"),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pipeBind1"](13,26,t.isDistrictEnabled$)),r["\u0275\u0275advance"](13),r["\u0275\u0275property"]("ngTemplateOutlet",e)("ngTemplateOutletContext",r["\u0275\u0275pureFunction1"](28,Ot,t.StatCategories.DAILY)),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngTemplateOutlet",e)("ngTemplateOutletContext",r["\u0275\u0275pureFunction1"](30,_t,t.StatCategories.WEEKLY)),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngTemplateOutlet",e)("ngTemplateOutletContext",r["\u0275\u0275pureFunction1"](32,St,t.StatCategories.MONTHLY)),r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("ngForOf",t.primaryStatFilters),r["\u0275\u0275advance"](8),r["\u0275\u0275classProp"]("unregistered",t.isOnlyUnregisteredFilterActive())("registered",t.isRegisteredFilterActive()),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",t.secondaryStatFilters),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("data",t.doughnutChartData)("labels",t.doughnutChartLabels)("legend",!1)("colors",t.doughnutChartColours)("chartType",t.doughnutChartType),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.hasActiveFilters()),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!t.hasActiveFilters()),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("autoClose",!0),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",!t.searchText),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.submitted)}},directives:[oe.a,ae.e,ae.d,y.a,ae.b,se.a,m.o,le.a,m.t,m.n,ce.a,he,fe.a,A.a,ve.a,i.h,ke,Fe.q,Te.a,Re.c,Re.a,je.a,Re.d,w.a,B.e,De.a,B.d,ae.f,Ne.a,_.a,Be.a,S.a,Ae.a,Le.a],pipes:[m.b,o.d],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");.person-search[_ngcontent-%COMP%]{background-color:#fff}@media (orientation:landscape){.person-search[_ngcontent-%COMP%]   mg-search[_ngcontent-%COMP%]{padding-left:5vh}}@media (orientation:portrait){.person-search[_ngcontent-%COMP%]   mg-search[_ngcontent-%COMP%]{padding-left:5vw}}@media (orientation:landscape) and (max-height:320px){.person-search[_ngcontent-%COMP%]   mg-search[_ngcontent-%COMP%]{padding-left:16px}}@media (orientation:portrait) and (max-width:320px){.person-search[_ngcontent-%COMP%]   mg-search[_ngcontent-%COMP%]{padding-left:16px}}@media (min-width:640px){.person-search[_ngcontent-%COMP%]   mg-search[_ngcontent-%COMP%]{padding-left:32px}}.admin-people-top[_ngcontent-%COMP%]{margin:16px 0}@media (max-width:599px){.admin-people-top[_ngcontent-%COMP%]{margin-left:8px;margin-right:8px}}.admin-people-top[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{margin-right:8px;--mg-icon-size:20px}.admin-people-top[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:400}.admin-people-top[_ngcontent-%COMP%]   mg-button[_ngcontent-%COMP%] + mg-button[_ngcontent-%COMP%]{margin-left:8px}@media (orientation:landscape){.admin-people-top[_ngcontent-%COMP%]   mg-button[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{--mg-icon-size:3.125vh}}@media (orientation:portrait){.admin-people-top[_ngcontent-%COMP%]   mg-button[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{--mg-icon-size:3.125vw}}@media (orientation:landscape) and (max-height:320px){.admin-people-top[_ngcontent-%COMP%]   mg-button[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{--mg-icon-size:10px}}@media (orientation:portrait) and (max-width:320px){.admin-people-top[_ngcontent-%COMP%]   mg-button[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{--mg-icon-size:10px}}@media (min-width:640px){.admin-people-top[_ngcontent-%COMP%]   mg-button[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{--mg-icon-size:20px}}.section[_ngcontent-%COMP%]{color:#737373;margin-bottom:1em}@media (max-width:599px){.section[_ngcontent-%COMP%]{margin-left:16px;margin-right:16px}}.section[_ngcontent-%COMP%]   .activity-flex-container[_ngcontent-%COMP%]{display:flex;align-items:flex-end;flex-direction:row;justify-content:space-between}.section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{margin-bottom:8px}.section[_ngcontent-%COMP%]   .section-footer[_ngcontent-%COMP%]{margin-top:1em}.section[_ngcontent-%COMP%]   .section-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#737373}.section[_ngcontent-%COMP%]   .section-footer[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{font-family:Muli,sans-serif;line-height:1.35}@media (orientation:landscape){.section[_ngcontent-%COMP%]   .section-footer[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{font-size:2.8985507246vh}}@media (orientation:portrait){.section[_ngcontent-%COMP%]   .section-footer[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{font-size:2.8985507246vw}}@media (orientation:landscape) and (max-height:414px){.section[_ngcontent-%COMP%]   .section-footer[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{font-size:12px}}@media (orientation:portrait) and (max-width:414px){.section[_ngcontent-%COMP%]   .section-footer[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{font-size:12px}}@media (min-width:448.5px){.section[_ngcontent-%COMP%]   .section-footer[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{font-size:13px}}.section[_ngcontent-%COMP%]   .section-footer[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]:after, .section[_ngcontent-%COMP%]   .section-footer[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]:hover:after{opacity:0!important}.section[_ngcontent-%COMP%]   .section-footer[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{cursor:pointer}.section[_ngcontent-%COMP%]   .section-footer[_ngcontent-%COMP%]   mg-empty-state[_ngcontent-%COMP%]{margin-left:0;margin-right:0}.block-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:stretch;flex-direction:row;box-sizing:border-box}.block-row.blue-children[_ngcontent-%COMP%]   .block[_ngcontent-%COMP%]{background-color:#62afc9}.block-row.blue-children[_ngcontent-%COMP%]   .block[_ngcontent-%COMP%]:first-child{background-color:#3cf}.block-row.blue-children[_ngcontent-%COMP%]   .block[_ngcontent-%COMP%]:last-child{background-color:#85bdd2}.block-row.no-click-children[_ngcontent-%COMP%]   .block[_ngcontent-%COMP%]:hover{cursor:default}.block-row[_ngcontent-%COMP%]   .block-container[_ngcontent-%COMP%], .block-row[_ngcontent-%COMP%] > .block[_ngcontent-%COMP%]{flex:1 1 50%;margin-right:8px;border-radius:6px;overflow:hidden}.block-row[_ngcontent-%COMP%]   .block-container[_ngcontent-%COMP%]:last-child, .block-row[_ngcontent-%COMP%] > .block[_ngcontent-%COMP%]:last-child{margin-right:0}@media (max-width:599px){.block-row[_ngcontent-%COMP%]   .block-container[_ngcontent-%COMP%]{flex-basis:65%}}.block-row[_ngcontent-%COMP%]   .block[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column;align-items:stretch;justify-content:center}@media (orientation:landscape){.responsive-stat-title[_ngcontent-%COMP%]{font-size:2.5vh}}@media (orientation:portrait){.responsive-stat-title[_ngcontent-%COMP%]{font-size:2.5vw}}@media (orientation:landscape) and (max-height:320px){.responsive-stat-title[_ngcontent-%COMP%]{font-size:8px}}@media (orientation:portrait) and (max-width:320px){.responsive-stat-title[_ngcontent-%COMP%]{font-size:8px}}@media (min-width:520px){.responsive-stat-title[_ngcontent-%COMP%]{font-size:13px}}@media (orientation:landscape){.responsive-stat-title.small[_ngcontent-%COMP%]{font-size:2.1875vh}}@media (orientation:portrait){.responsive-stat-title.small[_ngcontent-%COMP%]{font-size:2.1875vw}}@media (orientation:landscape) and (max-height:320px){.responsive-stat-title.small[_ngcontent-%COMP%]{font-size:7px}}@media (orientation:portrait) and (max-width:320px){.responsive-stat-title.small[_ngcontent-%COMP%]{font-size:7px}}@media (min-width:594.2857142857px){.responsive-stat-title.small[_ngcontent-%COMP%]{font-size:13px}}.block-container[_ngcontent-%COMP%]{display:flex}.block-container[_ngcontent-%COMP%]   .block[_ngcontent-%COMP%]{flex:1 1 auto}.block-container[_ngcontent-%COMP%]   .block.inner[_ngcontent-%COMP%]{border-right:1px solid #fff}.block-container[_ngcontent-%COMP%]   .block.inner.invites[_ngcontent-%COMP%]{flex-basis:70%}.block-container[_ngcontent-%COMP%]   .block.inner.resent-invites[_ngcontent-%COMP%]{flex-basis:30%}.block-container[_ngcontent-%COMP%]   .block.inner[_ngcontent-%COMP%]:last-child{border-right:none}.block[_ngcontent-%COMP%]{height:96px;color:#fff;background:green;text-transform:uppercase;position:relative;padding:16px 6%;box-sizing:border-box}@media (orientation:landscape){.block[_ngcontent-%COMP%]{padding-left:2.5vh}}@media (orientation:portrait){.block[_ngcontent-%COMP%]{padding-left:2.5vw}}@media (orientation:landscape) and (max-height:320px){.block[_ngcontent-%COMP%]{padding-left:8px}}@media (orientation:portrait) and (max-width:320px){.block[_ngcontent-%COMP%]{padding-left:8px}}@media (min-width:720px){.block[_ngcontent-%COMP%]{padding-left:18px}}@media (orientation:landscape){.block[_ngcontent-%COMP%]{padding-right:2.5vh}}@media (orientation:portrait){.block[_ngcontent-%COMP%]{padding-right:2.5vw}}@media (orientation:landscape) and (max-height:320px){.block[_ngcontent-%COMP%]{padding-right:8px}}@media (orientation:portrait) and (max-width:320px){.block[_ngcontent-%COMP%]{padding-right:8px}}@media (min-width:720px){.block[_ngcontent-%COMP%]{padding-right:18px}}@media (orientation:landscape){.block[_ngcontent-%COMP%]{padding-top:2.5vh}}@media (orientation:portrait){.block[_ngcontent-%COMP%]{padding-top:2.5vw}}@media (orientation:landscape) and (max-height:320px){.block[_ngcontent-%COMP%]{padding-top:8px}}@media (orientation:portrait) and (max-width:320px){.block[_ngcontent-%COMP%]{padding-top:8px}}@media (min-width:640px){.block[_ngcontent-%COMP%]{padding-top:16px}}@media (orientation:landscape){.block[_ngcontent-%COMP%]{padding-bottom:2.5vh}}@media (orientation:portrait){.block[_ngcontent-%COMP%]{padding-bottom:2.5vw}}@media (orientation:landscape) and (max-height:320px){.block[_ngcontent-%COMP%]{padding-bottom:8px}}@media (orientation:portrait) and (max-width:320px){.block[_ngcontent-%COMP%]{padding-bottom:8px}}@media (min-width:640px){.block[_ngcontent-%COMP%]{padding-bottom:16px}}@media (orientation:landscape){.block[_ngcontent-%COMP%]{height:17.1875vh}}@media (orientation:portrait){.block[_ngcontent-%COMP%]{height:17.1875vw}}@media (orientation:landscape) and (max-height:320px){.block[_ngcontent-%COMP%]{height:55px}}@media (orientation:portrait) and (max-width:320px){.block[_ngcontent-%COMP%]{height:55px}}@media (min-width:558.5454545455px){.block[_ngcontent-%COMP%]{height:96px}}.block[_ngcontent-%COMP%]:hover{cursor:pointer}.block[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{position:absolute;top:12px;right:8px}@media (orientation:landscape){.block[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{--mat-checkbox-box-size:3.4375vh}}@media (orientation:portrait){.block[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{--mat-checkbox-box-size:3.4375vw}}@media (orientation:landscape) and (max-height:320px){.block[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{--mat-checkbox-box-size:11px}}@media (orientation:portrait) and (max-width:320px){.block[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{--mat-checkbox-box-size:11px}}@media (min-width:581.8181818182px){.block[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{--mat-checkbox-box-size:20px}}@media (orientation:landscape){.block[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{top:1.5625vh}}@media (orientation:portrait){.block[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{top:1.5625vw}}@media (orientation:landscape) and (max-height:320px){.block[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{top:5px}}@media (orientation:portrait) and (max-width:320px){.block[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{top:5px}}@media (min-width:768px){.block[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{top:12px}}.block[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{height:32px;width:32px;display:inline-block;background-size:contain;background-repeat:no-repeat}@media (orientation:landscape){.block[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{height:5.625vh}}@media (orientation:portrait){.block[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{height:5.625vw}}@media (orientation:landscape) and (max-height:320px){.block[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{height:18px}}@media (orientation:portrait) and (max-width:320px){.block[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{height:18px}}@media (min-width:568.8888888889px){.block[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{height:32px}}@media (orientation:landscape){.block[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:5.625vh}}@media (orientation:portrait){.block[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:5.625vw}}@media (orientation:landscape) and (max-height:320px){.block[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px}}@media (orientation:portrait) and (max-width:320px){.block[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px}}@media (min-width:568.8888888889px){.block[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:32px}}.block[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{margin-left:8px}.block[_ngcontent-%COMP%]   .icon.email[_ngcontent-%COMP%]{background-image:url(/assets/email_icon.svg)}.block[_ngcontent-%COMP%]   .icon.desk[_ngcontent-%COMP%]{background-image:url(/assets/person_desk_icon.svg)}.block[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;align-items:center}.block.people[_ngcontent-%COMP%]{background:transparent linear-gradient(180deg,#1dce4d,#009729) 0 0 no-repeat padding-box}@media (orientation:landscape){.block.people[_ngcontent-%COMP%]{padding-left:2.5vh}}@media (orientation:portrait){.block.people[_ngcontent-%COMP%]{padding-left:2.5vw}}@media (orientation:landscape) and (max-height:320px){.block.people[_ngcontent-%COMP%]{padding-left:8px}}@media (orientation:portrait) and (max-width:320px){.block.people[_ngcontent-%COMP%]{padding-left:8px}}@media (min-width:1200px){.block.people[_ngcontent-%COMP%]{padding-left:30px}}.block.people[_ngcontent-%COMP%]:hover{background:transparent linear-gradient(180deg,#1ab845,#007e22) 0 0 no-repeat padding-box}.block.people.active[_ngcontent-%COMP%], .block.people[_ngcontent-%COMP%]:active{background:transparent linear-gradient(0deg,#1dce4d,#009729) 0 0 no-repeat padding-box}.block.invites[_ngcontent-%COMP%]{background:transparent linear-gradient(180deg,#3cf,#036) 0 0 no-repeat padding-box}.block.invites[_ngcontent-%COMP%]:hover{background:transparent linear-gradient(180deg,#1ac6ff,#00264d) 0 0 no-repeat padding-box}.block.invites.active[_ngcontent-%COMP%], .block.invites[_ngcontent-%COMP%]:active{background:transparent linear-gradient(0deg,#3cf,#036) 0 0 no-repeat padding-box}.block.resend-invites[_ngcontent-%COMP%]{background:#036}.block.resend-invites[_ngcontent-%COMP%]:hover{background:#00264d}.block.resend-invites[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{margin-bottom:8px}@media (orientation:landscape){.block.resend-invites[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{--mg-icon-size:4.375vh}}@media (orientation:portrait){.block.resend-invites[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{--mg-icon-size:4.375vw}}@media (orientation:landscape) and (max-height:320px){.block.resend-invites[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{--mg-icon-size:14px}}@media (orientation:portrait) and (max-width:320px){.block.resend-invites[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{--mg-icon-size:14px}}@media (min-width:548.5714285714px){.block.resend-invites[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{--mg-icon-size:24px}}@media (orientation:landscape){.block.resend-invites[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{margin-bottom:.78125vh}}@media (orientation:portrait){.block.resend-invites[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{margin-bottom:.78125vw}}@media (orientation:landscape) and (max-height:320px){.block.resend-invites[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{margin-bottom:2.5px}}@media (orientation:portrait) and (max-width:320px){.block.resend-invites[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{margin-bottom:2.5px}}@media (min-width:1024px){.block.resend-invites[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{margin-bottom:8px}}.number[_ngcontent-%COMP%]{font-size:32px}@media (orientation:landscape){.number[_ngcontent-%COMP%]{font-size:5.3125vh}}@media (orientation:portrait){.number[_ngcontent-%COMP%]{font-size:5.3125vw}}@media (orientation:landscape) and (max-height:320px){.number[_ngcontent-%COMP%]{font-size:17px}}@media (orientation:portrait) and (max-width:320px){.number[_ngcontent-%COMP%]{font-size:17px}}@media (min-width:602.3529411765px){.number[_ngcontent-%COMP%]{font-size:32px}}.number[_ngcontent-%COMP%]   .percent[_ngcontent-%COMP%]{font-size:35px}@media (orientation:landscape){.number[_ngcontent-%COMP%]   .percent[_ngcontent-%COMP%]{font-size:5.9375vh}}@media (orientation:portrait){.number[_ngcontent-%COMP%]   .percent[_ngcontent-%COMP%]{font-size:5.9375vw}}@media (orientation:landscape) and (max-height:320px){.number[_ngcontent-%COMP%]   .percent[_ngcontent-%COMP%]{font-size:19px}}@media (orientation:portrait) and (max-width:320px){.number[_ngcontent-%COMP%]   .percent[_ngcontent-%COMP%]{font-size:19px}}@media (min-width:589.4736842105px){.number[_ngcontent-%COMP%]   .percent[_ngcontent-%COMP%]{font-size:35px}}.number[_ngcontent-%COMP%]   .bold[_ngcontent-%COMP%]{font-weight:700}.number[_ngcontent-%COMP%]   .large[_ngcontent-%COMP%]{font-size:40px}@media (orientation:landscape){.number[_ngcontent-%COMP%]   .large[_ngcontent-%COMP%]{font-size:6.875vh}}@media (orientation:portrait){.number[_ngcontent-%COMP%]   .large[_ngcontent-%COMP%]{font-size:6.875vw}}@media (orientation:landscape) and (max-height:320px){.number[_ngcontent-%COMP%]   .large[_ngcontent-%COMP%]{font-size:22px}}@media (orientation:portrait) and (max-width:320px){.number[_ngcontent-%COMP%]   .large[_ngcontent-%COMP%]{font-size:22px}}@media (min-width:581.8181818182px){.number[_ngcontent-%COMP%]   .large[_ngcontent-%COMP%]{font-size:40px}}.mg-align-center[_ngcontent-%COMP%]{text-align:center}.mg-align-center[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto}.mg-no-transform[_ngcontent-%COMP%]{text-transform:none}.button-centered[_ngcontent-%COMP%]{display:flex;align-items:center}@media (max-width:599px){.hide-mobile[_ngcontent-%COMP%]{display:none}}.role-filter-container[_ngcontent-%COMP%]{box-shadow:0 0 6px rgba(0,0,0,.16);border-radius:6px;background-color:#fff;padding:20px 8px 20px 28px;display:flex;flex-direction:row;align-items:center;justify-content:space-between;position:relative}@media (orientation:landscape){.role-filter-container[_ngcontent-%COMP%]{padding-left:2.5vh}}@media (orientation:portrait){.role-filter-container[_ngcontent-%COMP%]{padding-left:2.5vw}}@media (orientation:landscape) and (max-height:320px){.role-filter-container[_ngcontent-%COMP%]{padding-left:8px}}@media (orientation:portrait) and (max-width:320px){.role-filter-container[_ngcontent-%COMP%]{padding-left:8px}}@media (min-width:1120px){.role-filter-container[_ngcontent-%COMP%]{padding-left:28px}}@media (orientation:landscape){.role-filter-container[_ngcontent-%COMP%]{padding-top:3.75vh}}@media (orientation:portrait){.role-filter-container[_ngcontent-%COMP%]{padding-top:3.75vw}}@media (orientation:landscape) and (max-height:320px){.role-filter-container[_ngcontent-%COMP%]{padding-top:12px}}@media (orientation:portrait) and (max-width:320px){.role-filter-container[_ngcontent-%COMP%]{padding-top:12px}}@media (min-width:533.3333333333px){.role-filter-container[_ngcontent-%COMP%]{padding-top:20px}}@media (orientation:landscape){.role-filter-container[_ngcontent-%COMP%]{padding-bottom:3.75vh}}@media (orientation:portrait){.role-filter-container[_ngcontent-%COMP%]{padding-bottom:3.75vw}}@media (orientation:landscape) and (max-height:320px){.role-filter-container[_ngcontent-%COMP%]{padding-bottom:12px}}@media (orientation:portrait) and (max-width:320px){.role-filter-container[_ngcontent-%COMP%]{padding-bottom:12px}}@media (min-width:533.3333333333px){.role-filter-container[_ngcontent-%COMP%]{padding-bottom:20px}}.role-filter-container[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%] + .role.mg-bodycopy[_ngcontent-%COMP%]{margin-top:16px}.role-filter-container[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]:last-child{margin-bottom:0}.role-filter-container[_ngcontent-%COMP%]   .role-graph-container[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);width:70%;right:-10%}@media (max-width:599px){.role-filter-container[_ngcontent-%COMP%]   .role-graph-container[_ngcontent-%COMP%]{right:-17.5%;width:85%}}.roles-list[_ngcontent-%COMP%]   .total-count[_ngcontent-%COMP%]{display:inline}.roles-list[_ngcontent-%COMP%]   .registered-count[_ngcontent-%COMP%], .roles-list[_ngcontent-%COMP%]   .unregistered-count[_ngcontent-%COMP%], .roles-list.unregistered[_ngcontent-%COMP%]   .registered-count[_ngcontent-%COMP%], .roles-list.unregistered[_ngcontent-%COMP%]   .total-count[_ngcontent-%COMP%]{display:none}.roles-list.unregistered[_ngcontent-%COMP%]   .unregistered-count[_ngcontent-%COMP%]{display:inline}.roles-list.registered[_ngcontent-%COMP%]   .total-count[_ngcontent-%COMP%], .roles-list.registered[_ngcontent-%COMP%]   .unregistered-count[_ngcontent-%COMP%]{display:none}.roles-list.registered[_ngcontent-%COMP%]   .registered-count[_ngcontent-%COMP%]{display:inline}.role[_ngcontent-%COMP%]{margin-bottom:8px;display:flex;align-items:center}.role[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{height:26px;width:26px;border-radius:100%;display:inline-block;background:transparent linear-gradient(180deg,var(--circle-gradient-color1),var(--circle-gradient-color2)) 0 0 no-repeat padding-box}.role[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%] + mat-checkbox[_ngcontent-%COMP%]{margin-left:8px}.role[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin-right:14px}@media (orientation:landscape){.role[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{--mat-checkbox-box-size:4.0625vh}}@media (orientation:portrait){.role[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{--mat-checkbox-box-size:4.0625vw}}@media (orientation:landscape) and (max-height:320px){.role[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{--mat-checkbox-box-size:13px}}@media (orientation:portrait) and (max-width:320px){.role[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{--mat-checkbox-box-size:13px}}@media (min-width:492.3076923077px){.role[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{--mat-checkbox-box-size:20px}}mg-table-stream-scroller[_ngcontent-%COMP%]{--table-stream-padding:6px;--table-stream-empty-cell-color:#e2e2e2;--table-stream-border-width:1px;--table-stream-border-color:#ccc;--table-stream-margin-bottom:32px;margin-top:16px;margin-bottom:16px}@media (max-width:599px){mg-table-stream-scroller[_ngcontent-%COMP%]{margin:10px;--table-stream-margin-bottom:82px}}mg-table-stream-scroller[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-top:16px;padding-bottom:16px}.people-table-controls[_ngcontent-%COMP%]{padding:8px 16px 0}.list-members[_ngcontent-%COMP%], .list-members[_ngcontent-%COMP%]   mg-button[_ngcontent-%COMP%]{width:100%}@media (max-width:599px){.list-members[_ngcontent-%COMP%], .list-members[_ngcontent-%COMP%]   mg-button[_ngcontent-%COMP%]{margin-left:8px;margin-right:8px;width:calc(100% - 16px)}}.list-members.unsubmitted[_ngcontent-%COMP%], .list-members[_ngcontent-%COMP%]   mg-button.unsubmitted[_ngcontent-%COMP%]{margin-bottom:32px}.export-button[_ngcontent-%COMP%]{border-color:#fff;padding:8px 12px;border-radius:4px;margin-left:5px;color:#fff;background-color:#036;font-size:12px;border-width:1px}.export-button[_ngcontent-%COMP%]:hover{color:#036;border-color:#036;background-color:#fff;cursor:pointer}.header-cell[_ngcontent-%COMP%]{font-size:.8em;font-weight:700}.header[_ngcontent-%COMP%]{font-size:.8em;color:#737373;margin-top:15px;display:flex;justify-content:space-between}@media (max-width:599px){.header[_ngcontent-%COMP%]{margin-left:8px;margin-right:8px}}.selected-role[_ngcontent-%COMP%]{font-weight:700}.clear-filters[_ngcontent-%COMP%]{color:#93f;text-decoration:none}.clear-filters[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}.stats[_ngcontent-%COMP%]{background-color:#737373}table[_ngcontent-%COMP%]{background-color:#fff}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding:6px 8px}@media (orientation:landscape){td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding-left:2.1333333333vh}}@media (orientation:portrait){td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding-left:2.1333333333vw}}@media (orientation:landscape) and (max-height:375px){td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding-left:8px}}@media (orientation:portrait) and (max-width:375px){td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding-left:8px}}@media (min-width:750px){td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding-left:16px}}@media (orientation:landscape){td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding-right:2.1333333333vh}}@media (orientation:portrait){td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding-right:2.1333333333vw}}@media (orientation:landscape) and (max-height:375px){td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding-right:8px}}@media (orientation:portrait) and (max-width:375px){td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding-right:8px}}@media (min-width:750px){td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding-right:16px}}td[_ngcontent-%COMP%]{font-size:75%}.confirm-resend-dialog[_ngcontent-%COMP%]{max-width:300px}.confirm-resend-dialog[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#036}.confirm-resend-dialog[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#2f2f2f}'],changeDetection:0}),e})();var Et=n("u9T3"),kt=n("eJkR");let Ft=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[kt.a,m.c]]}),e})();var Tt=n("fHWq"),Rt=n("JGGa"),jt=n("5VmK"),Dt=n("WsNZ"),Nt=n("7Tcv");let Bt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[Dt.a,Nt.a,g.a,m.c,Me.b]]}),e})();var At=n("37Vl");let Lt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[D.a,jt.a,Tt.a,g.a,Rt.a,R.b,ee.d,M.b,Ft,Te.b,T.a,o.c,Bt,At.a,m.c,i.k,Et.a.withConfig({addFlexToParent:!1}),B.f,Fe.r,Re.e,je.b,ce.b]]}),e})();var zt=n("ITzS"),Ht=n("/jon"),Vt=n("5/J/"),Wt=n("zDft"),Gt=n("w8an");function qt(e,t){if(1&e&&(r["\u0275\u0275element"](0,"mg-poll-mini-card",6),r["\u0275\u0275pipe"](1,"hasPermission")),2&e){const e=t.$implicit,n=t.itemId;r["\u0275\u0275property"]("mgContentLink",n)("showVotes",r["\u0275\u0275pipeBind1"](1,4,"MINGA_POLLS_MANAGE"))("context",n)("content",e)}}const Ut=function(){return[]};let $t=(()=>{class e{constructor(e,t,n,r,i,o){this.pollAnswerService=e,this.contentEvents=t,this.groupsFacade=n,this.contentState=r,this.pollService=i,this.permissions=o,this.emptyStateIcons=[],this.canCreatePolls=!1,n.dispatchLoadAll(),this.emptyStateIcons=[{icon:"post",text:"Add"},{icon:"polls-o",text:"Poll"}],this.canCreatePolls=this.permissions.hasPermission(f.MingaPermission.CONTENT_POLL_CREATE)}onItemClick(e){const t=e.model.item.id;t&&this.contentEvents.emitContentOpen({contentContextHash:t})}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](v.a),r["\u0275\u0275directiveInject"](C.a),r["\u0275\u0275directiveInject"](b.b),r["\u0275\u0275directiveInject"](P.a),r["\u0275\u0275directiveInject"](Ht.Poll),r["\u0275\u0275directiveInject"](M.c))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-poll-admin-list"]],decls:10,vars:9,consts:[[1,"mg-headline","page-header"],[1,"default-icon"],[1,"feed-items"],["mgStreamControl","AdminPolls","rpcStream","streamPollsV2","rpcControl","streamPollsV2Control",3,"service"],["mgStreamItem",""],["mg-stream-empty","",3,"title","subtitle","icons"],["mg-stream-item","",3,"mgContentLink","showVotes","context","content"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"p",0),r["\u0275\u0275elementStart"](1,"mg-icon",1),r["\u0275\u0275text"](2,"polls-o"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](3," Polls\n"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"div",2),r["\u0275\u0275elementStart"](5,"mg-stream-scroller",3),r["\u0275\u0275template"](6,qt,2,6,"ng-template",4),r["\u0275\u0275element"](7,"mg-empty-state",5),r["\u0275\u0275pipe"](8,"translate"),r["\u0275\u0275pipe"](9,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("service",t.pollService),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("title",r["\u0275\u0275pipeBind1"](8,4,"emptyState.managePollsTitle"))("subtitle",t.canCreatePolls?r["\u0275\u0275pipeBind1"](9,6,"emptyState.managePollsSubtitle"):"")("icons",t.canCreatePolls?t.emptyStateIcons:r["\u0275\u0275pureFunction0"](8,Ut)))},directives:[y.a,O.a,_.a,S.a,w.a,Vt.a,Wt.a],pipes:[o.d,Gt.a],styles:["@media (max-width:599px){.page-header[_ngcontent-%COMP%]{margin-left:16px;margin-right:16px}}.feed-items[_ngcontent-%COMP%]{margin-bottom:32px}"]}),e})();var Yt=n("xvu2");let Qt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[R.b,Yt.a,D.a,N.b,j.a,M.b,T.a,m.c,o.c]]}),e})();var Zt=n("lDpI"),Jt=n("bCM0"),Kt=n("b/1s"),Xt=n("jaBy"),en=n("Pwpr"),tn=n.n(en),nn=n("Jkk8");function rn(e,t){if(1&e&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275elementStart"](1,"div",8),r["\u0275\u0275text"](2," in "),r["\u0275\u0275elementStart"](3,"span",9),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementContainerEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](e.getMingaCountText(e.content.mingaCount))}}let on=(()=>{class e{constructor(){this.showFullBody=!1}intToDate(e){return e?Object(Z.day)(e).format("MMMM Do YYYY, h:mm:ss a"):"unset"}getAssetUrl(e){return e?Object(Xt.d)(e):""}getMingaCountText(e){return e+(1==e?" Minga":" Mingas")}bodyHtml(e,t=!1){return t?e:tn()(e,112,{html:!0,indicator:'<a href="javascript:;" class="more-program"></a>'})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-program-item"]],inputs:{showFullBody:"showFullBody",content:"content"},decls:10,vars:10,consts:[[1,"content-item-wrap"],[1,"content-item",3,"ngClass"],[1,"banner-image"],[1,"icon-image"],[1,"content-body"],[1,"title"],[1,"description","mg-minicopy",3,"innerHTML"],[4,"ngIf"],[1,"count","mg-minicopy"],[1,"link-color"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275element"](3,"div",3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"div",4),r["\u0275\u0275elementStart"](5,"div",5),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](7,"div",6),r["\u0275\u0275pipe"](8,"mgSafeHtml"),r["\u0275\u0275template"](9,rn,5,1,"ng-container",7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngClass","content-active-"+t.content.active),r["\u0275\u0275advance"](1),r["\u0275\u0275styleProp"]("background-image","url("+t.getAssetUrl(t.content.banner)+")"),r["\u0275\u0275advance"](1),r["\u0275\u0275styleProp"]("background-image","url("+t.content.logo+")"),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](t.content.title),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("innerHTML",r["\u0275\u0275pipeBind1"](8,8,t.bodyHtml(t.content.description,t.showFullBody)),r["\u0275\u0275sanitizeHtml"]),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.content.mingaCount))},directives:[m.m,m.o],pipes:[nn.a],styles:['[_nghost-%COMP%]{display:block}.content-item[_ngcontent-%COMP%]{display:flex;flex-direction:row;background-color:#fff;padding:16px;box-shadow:0 0 6px rgba(0,0,0,.15);border-radius:8px;margin:var(--feed-item-margin-top,4px) var(--feed-item-margin-side,16px)}.content-item[_ngcontent-%COMP%]:hover{cursor:pointer;box-shadow:0 0 12px rgba(0,0,0,.15)}.content-item[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:1}.content-item[_ngcontent-%COMP%]   .content-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.content-item.content-active-false[_ngcontent-%COMP%]{opacity:.5}.banner-image[_ngcontent-%COMP%], .icon-image[_ngcontent-%COMP%]{background-repeat:no-repeat;background-size:cover;background-position:50%}.banner-image[_ngcontent-%COMP%]{margin-right:16px;height:88px;width:88px;min-width:60px;position:relative;border-radius:8px}.banner-image[_ngcontent-%COMP%] > .icon-image[_ngcontent-%COMP%]{height:53px;width:53px;position:absolute;top:50%;transform:translateY(-50%);left:0;right:0;margin:auto;border-radius:50%}.content-body[_ngcontent-%COMP%]{flex-basis:56%;height:88px;display:flex;flex-direction:column}.content-body[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%], .content-body[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#737373;font-size:12px}.content-body[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{max-height:75%;overflow:hidden;text-overflow:ellipsis;flex-basis:100%;word-break:break-word}.content-body[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .more-program[_ngcontent-%COMP%]{color:#93f;text-decoration:none}.content-body[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .more-program[_ngcontent-%COMP%]:before{content:"..."}.content-body[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .more-program[_ngcontent-%COMP%]:after{content:"More"}.content-body[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .more-program[_ngcontent-%COMP%]:hover:after{text-decoration:underline}.link-color[_ngcontent-%COMP%]{color:#93f}'],changeDetection:0}),e})();function an(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"mg-program-item",11),r["\u0275\u0275listener"]("click",(function(n){r["\u0275\u0275restoreView"](e);const i=t.$implicit;return r["\u0275\u0275nextContext"]().streamItemClick(n,i)})),r["\u0275\u0275elementEnd"]()}2&e&&r["\u0275\u0275property"]("content",t.$implicit)}const sn=function(){return["program","create"]},ln=function(e){return{o:e}},cn=function(e){return{outlets:e}},dn=function(e){return["",e]};let mn=(()=>{class e{constructor(e,t){this.router=e,this.programStreamManager=t}streamItemClick(e,t){this.router.navigate(["/admin/program",t.contentHash])}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](i.g),r["\u0275\u0275directiveInject"](Zt.ProgramStreamManager))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-admin-programs"]],decls:14,vars:12,consts:[[1,"mg-headline","page-header"],[1,"default-icon"],[1,"program-search"],["fxLayout","row","fxLayoutAlign","center"],["fxFlex","80%",3,"mgNoHintMargin"],["fxFlex","20%","fxLayout","column","fxLayoutAlign","center center"],["icon","post",3,"routerLink"],[1,"program-list"],["rpcStream","streamPrograms","rpcControl","streamProgramsControl",3,"service","bufferAmount","loadThreshold"],["mgStreamItem",""],["mg-stream-empty","",1,"mg-centered","mg-minicopy"],[3,"content","click"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"p",0),r["\u0275\u0275elementStart"](1,"mg-icon",1),r["\u0275\u0275text"](2,"challenge"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](3," All Programs\n"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"div",2),r["\u0275\u0275elementStart"](5,"div",3),r["\u0275\u0275element"](6,"mg-search",4),r["\u0275\u0275elementStart"](7,"div",5),r["\u0275\u0275element"](8,"mg-navicon",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"div",7),r["\u0275\u0275elementStart"](10,"mg-stream-scroller",8),r["\u0275\u0275template"](11,an,1,1,"ng-template",9),r["\u0275\u0275elementStart"](12,"p",10),r["\u0275\u0275text"](13," There are no programs "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("mgNoHintMargin",!0),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("routerLink",r["\u0275\u0275pureFunction1"](10,dn,r["\u0275\u0275pureFunction1"](8,cn,r["\u0275\u0275pureFunction1"](6,ln,r["\u0275\u0275pureFunction0"](5,sn))))),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("service",t.programStreamManager)("bufferAmount",10)("loadThreshold",10))},directives:[y.a,ae.e,ae.d,Jt.a,ae.b,Kt.a,i.h,O.a,S.a,on],styles:[".program-search[_ngcontent-%COMP%]{background-color:#fff;padding:16px 0;border-radius:8px}@media (orientation:landscape){.program-search[_ngcontent-%COMP%]   mg-search[_ngcontent-%COMP%]{padding-left:5vh}}@media (orientation:portrait){.program-search[_ngcontent-%COMP%]   mg-search[_ngcontent-%COMP%]{padding-left:5vw}}@media (orientation:landscape) and (max-height:320px){.program-search[_ngcontent-%COMP%]   mg-search[_ngcontent-%COMP%]{padding-left:16px}}@media (orientation:portrait) and (max-width:320px){.program-search[_ngcontent-%COMP%]   mg-search[_ngcontent-%COMP%]{padding-left:16px}}@media (min-width:640px){.program-search[_ngcontent-%COMP%]   mg-search[_ngcontent-%COMP%]{padding-left:32px}}.mg-headline[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{vertical-align:middle}.page-header[_ngcontent-%COMP%]{margin:16px 0;font-weight:400}@media (min-width:600px){.page-header[_ngcontent-%COMP%]{margin:28px var(--feed-item-margin-side,8px) 16px var(--feed-item-margin-side,8px)}}@media (max-width:599px){.page-header[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{margin-left:8px}}"]}),e})();var gn=n("Ycbo"),pn=n("cbZm");let un=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[N.b,m.c]]}),e})(),hn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[R.b,D.a,gn.a,pn.a,un,m.c,i.k,Et.a]]}),e})();var fn=n("LvDl"),vn=n("5km/"),Cn=n("joVo"),bn=n("l6At"),Pn=n("YTnL"),Mn=n("oeMW"),xn=n("LTMa"),yn=n("jNxq"),On=n("Ssrr"),_n=n("Wgwc"),Sn=n("Ds8A"),wn=n("oFih"),In=n("cB5b"),En=n.n(In),kn=n("jcBT"),Fn=n("x1c8"),Tn=n("2FiO");function Rn(e,t){if(1&e&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275element"](1,"div",13),r["\u0275\u0275elementContainerEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngClass","pl-"+e.pollLayoutName(e.item.pollLayout))}}function jn(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275elementStart"](1,"div"),r["\u0275\u0275elementStart"](2,"mg-ellipsis",14),r["\u0275\u0275listener"]("click",(function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().onContextMenuClick(t)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementContainerEnd"]()}}const Dn=function(e){return{"background-image":e}};_n.extend(Sn);class Nn extends Event{constructor(e){super("date-control-click"),this.originalClickEvent=e}get isTrusted(){return this.originalClickEvent.isTrusted}get pageX(){return this.originalClickEvent.pageX}get pageY(){return this.originalClickEvent.pageY}preventDefault(){super.preventDefault(),this.originalClickEvent.preventDefault()}stopImmediatePropagation(){super.stopImmediatePropagation(),this.originalClickEvent.stopImmediatePropagation()}stopPropagation(){super.stopPropagation(),this.originalClickEvent.stopPropagation()}}let Bn=(()=>{class e{constructor(){this.canEdit=!1,this.contextMenuClick=new r.EventEmitter,this.dateControlClick=new r.EventEmitter}onDateControlClick(e){if(!this.canEdit)return;e&&(e.preventDefault(),e.stopImmediatePropagation());const t=new Nn(e);t.item=this.item,this.dateControlClick&&this.dateControlClick.emit(t)}onContextMenuClick(e){const t=new CustomEvent("ellipsis");t.pageX=e.pageX,t.pageY=e.pageY,t.model={item:this.item},t.preventDefault=()=>e.preventDefault(),t.stopImmediatePropagation=()=>e.stopImmediatePropagation(),this.contextMenuClick&&this.contextMenuClick.emit(t)}getContentStyle(){const e=this.getProgressiveAssetUrls();if(!e||0==e.length)return"";const t=e.shift();return t&&this.item.fullImage?t:""}getProgressiveAssetUrls(){const e=this.item.imageInfo;return e?Object(Xt.e)(e,["blurloading1","cardbanner"]):[]}showThumbnail(e){return!(e.fullImage||!e.imageInfo)}getDateControlsText(e,t,n=null){const r=e||n;return t?`Day\n${Math.floor(e/864e5)+1}`:_n.utc(r).format("MMM Do").split(" ").join("\n")}bodyHtml(e,t){const n=this.showThumbnail(t)?100:195;return En()(e,n,{html:!1,indicator:'<a href="javascript:;" class="more"></a>'})}hasPollLayoutImage(e,t){if("poll"===t)switch(e){case wn.PollLayout.PL_GRID:case wn.PollLayout.PL_LIST:return!0}return!1}pollLayoutName(e){switch(e){case wn.PollLayout.PL_GRID:return"grid";case wn.PollLayout.PL_LIST:return"list"}return"none"}getFormattedTypeString(e){return e[0].toUpperCase()+e.substr(1)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-program-content-item"]],inputs:{item:"item",canEdit:"canEdit"},outputs:{contextMenuClick:"contextMenuClick",dateControlClick:"dateControlClick"},decls:24,vars:13,consts:[[1,"mg-program-content-item"],[1,"date-controls",3,"ngClass","click"],[1,"edit-icon"],[1,"text"],[1,"content",3,"ngClass","ngStyle","contextmenu"],[1,"content-thumbnail",3,"srcs"],[4,"ngIf"],[1,"content-wrap"],[1,"content-title"],[1,"content-body",3,"innerHTML"],["is","dom-if","if","[[item.icon]]"],[1,"icon-wrap"],[3,"icon"],[1,"poll-layout-image",3,"ngClass"],[3,"click"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275listener"]("click",(function(e){return t.onDateControlClick(e)})),r["\u0275\u0275element"](2,"div",2),r["\u0275\u0275elementStart"](3,"span",3),r["\u0275\u0275elementStart"](4,"strong"),r["\u0275\u0275text"](5),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",4),r["\u0275\u0275listener"]("contextmenu",(function(e){return t.onContextMenuClick(e)})),r["\u0275\u0275elementStart"](7,"mg-image",5),r["\u0275\u0275template"](8,Rn,2,1,"ng-container",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"div",7),r["\u0275\u0275elementStart"](10,"div",8),r["\u0275\u0275text"](11),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](12,"div",9),r["\u0275\u0275elementStart"](13,"template",10),r["\u0275\u0275text"](14,"\n        "),r["\u0275\u0275elementStart"](15,"div",11),r["\u0275\u0275text"](16,"\n          "),r["\u0275\u0275element"](17,"mge-icon",12),r["\u0275\u0275text"](18,"\n          "),r["\u0275\u0275elementStart"](19,"span"),r["\u0275\u0275text"](20),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](21,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](22,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](23,jn,3,0,"ng-container",6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngClass","date-rel-"+(null==t.item?null:t.item.positionRelative)+" can-edit-"+t.canEdit),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](t.getDateControlsText(null==t.item?null:t.item.positionOffset,null==t.item?null:t.item.positionRelative,null==t.item?null:t.item.timestamp)),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngClass","light-content-"+(null==t.item?null:t.item.lightContent)+" has-image-"+t.showThumbnail(t.item))("ngStyle",r["\u0275\u0275pureFunction1"](11,Dn,"url("+t.getContentStyle()+")")),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("srcs",t.getProgressiveAssetUrls()),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.hasPollLayoutImage(t.item.pollLayout,null==t.item?null:t.item.typeString)),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](null==t.item?null:t.item.title),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("innerHTML",t.bodyHtml(null==t.item?null:t.item.description,t.item),r["\u0275\u0275sanitizeHtml"]),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("icon",null==t.item?null:t.item.icon),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](t.getFormattedTypeString(t.item.typeString)),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",t.canEdit))},directives:[m.m,m.p,kn.a,m.o,Fn.a,Tn.a],styles:['[_nghost-%COMP%]{display:block;margin:8px 0}.mg-program-content-item[_ngcontent-%COMP%]{display:flex;flex-direction:row}.date-controls[_ngcontent-%COMP%]{position:relative;font-size:16px;color:#2f2f2f;text-align:center;background-color:#f5f5f5;border-top-left-radius:8px;border-bottom-left-radius:8px;margin-right:-8px;padding:8px 16px 8px 8px;flex:2;transform:translateX(0);transition:transform .1s ease}.date-controls[_ngcontent-%COMP%]:hover:not(.can-edit-false){cursor:pointer;transform:translateX(8px)}.date-controls.date-rel-false[_ngcontent-%COMP%]{background-color:#e2e2e2}.date-controls[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:inline-block;padding:8px 24px 8px 16px}.date-controls[_ngcontent-%COMP%]   .edit-icon[_ngcontent-%COMP%]{position:absolute;top:0;right:0}.date-controls[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{white-space:pre-line;position:absolute;top:50%;left:0;right:0;transform:translateY(-50%)}.content[_ngcontent-%COMP%]{position:relative;z-index:1;display:flex;flex-direction:row;padding:8px;background-color:#fff;border-radius:8px;box-shadow:0 0 6px rgba(0,0,0,.15);flex:12;min-height:110px;background-position:top;background-size:cover}.content[_ngcontent-%COMP%]:hover{cursor:pointer;box-shadow:0 0 12px rgba(0,0,0,.15)}.content.light-content-true[_ngcontent-%COMP%]{color:#fff}.content[_ngcontent-%COMP%]   .content-wrap[_ngcontent-%COMP%]{position:relative;flex:1;display:flex;flex-direction:column;word-break:break-word;padding:8px 8px 8px 11px}.content[_ngcontent-%COMP%]   .content-title[_ngcontent-%COMP%]{font-weight:700}.content[_ngcontent-%COMP%]   .content-body[_ngcontent-%COMP%]{max-height:70px;overflow:hidden;font-size:75%;color:#2f2f2f;flex:1}.content[_ngcontent-%COMP%]   .content-body[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]{color:#93f;text-decoration:none}.content[_ngcontent-%COMP%]   .content-body[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]:before{content:"..."}.content[_ngcontent-%COMP%]   .content-body[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]:after{content:"More"}.content[_ngcontent-%COMP%]   .content-body[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]:hover:after{text-decoration:underline}.content[_ngcontent-%COMP%]   .content-thumbnail[_ngcontent-%COMP%]{position:relative;overflow:hidden;height:110px;width:110px;min-width:110px;border-radius:8px;background-color:#d3d3d3;background-position:50%;background-size:cover}.content.has-image-false[_ngcontent-%COMP%]   .content-thumbnail[_ngcontent-%COMP%]{display:none}.content.has-image-false[_ngcontent-%COMP%]   .content-body[_ngcontent-%COMP%]{max-height:100px}.icon-wrap[_ngcontent-%COMP%]   mge-icon[_ngcontent-%COMP%]{fill:#036}.poll-layout-image[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;-webkit-mask-position:center;mask-position:center;-webkit-mask-size:80%;mask-size:80%;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;background-color:#fff}.poll-layout-image.pl-grid[_ngcontent-%COMP%]{-webkit-mask-image:url(/assets/content/emotive_poll_icon.svg);mask-image:url(/assets/content/emotive_poll_icon.svg)}.poll-layout-image.pl-list[_ngcontent-%COMP%]{-webkit-mask-image:url(/assets/content/list_poll_icon.svg);mask-image:url(/assets/content/list_poll_icon.svg)}'],changeDetection:0}),e})();function An(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"mg-program-content-item",15),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const n=t.$implicit;return r["\u0275\u0275nextContext"]().onStreamItemClick(n)})),r["\u0275\u0275elementEnd"]()}2&e&&r["\u0275\u0275property"]("item",t.$implicit)("canEdit",!1)}const Ln=function(e){return{programContextHash:e}};let zn=(()=>{class e{constructor(e,t,n,r,i,o,a,s,l,c,d,m,g,p){this.mgModal=t,this.programManager=n,this.adminEvents=r,this.url=i,this.mingaStore=o,this.dialog=a,this.mingaContent=s,this.router=l,this.permissions=c,this.snackBar=d,this.streamManager=m,this.contentEvents=g,this.programContextStreamManager=p,this.programContextHash="",this.programHash="",this.canEditProgramContent=!1,e.params.subscribe(e=>{this.programContextHash=e.programInstanceHash,this._initProgramInfo(this.programContextHash)}),this._programUpdateSuccess=this.adminEvents.onProgramUpdateSuccess.subscribe(e=>{e.programHash==this.programHash&&this._initProgramInfo(this.programHash)})}ngOnInit(){}get bannerUrl(){return this.programInfo&&this.programInfo.bannerList?"url("+window.MINGA_ASSET_URL_PREFIX+this.programInfo.bannerList[0]+")":""}get logoUrl(){return this.programInfo&&this.programInfo.logo?window.MINGA_ASSET_URL_PREFIX+this.programInfo.logo:""}_initProgramInfo(e){return Object(H.a)(this,void 0,void 0,(function*(){const t=new bn.ProgramInstanceInfoQuery;t.setProgramContextHash(e);const n=yield this.programManager.getInstanceInfo(t);this.programInfo=n.toObject()}))}onStreamItemClick(e){const t=fn.get(e,"contextHash","");t&&this.contentEvents.emitContentOpen({contentContextHash:t})}confirmRemoveProgram(e){return Object(H.a)(this,void 0,void 0,(function*(){const t=yield this.mingaStore.getMingaAsPromise();e&&e.preventDefault(),this.dialog.open(vn.h,{data:{programName:this.programInfo.title,mingaName:t?t.name:""}}).afterClosed().subscribe(e=>Object(H.a)(this,void 0,void 0,(function*(){if(e){let e=new Cn.MingaRemoveProgram;e.setProgramContextHash(this.programContextHash),yield this.mingaContent.removeProgram(e),this.snackBar.open(`program "${this.programInfo.title}" successfully removed!`),yield this.streamManager.restartStreamIfAvailable("AdminProgramContextFeed"),yield this.router.navigate(["/admin/minga~programs"])}})))}))}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](de.b),r["\u0275\u0275directiveInject"](Pn.ProgramManager),r["\u0275\u0275directiveInject"](s.a),r["\u0275\u0275directiveInject"](m.l),r["\u0275\u0275directiveInject"](Mn.a),r["\u0275\u0275directiveInject"](B.b),r["\u0275\u0275directiveInject"](xn.MingaContent),r["\u0275\u0275directiveInject"](i.g),r["\u0275\u0275directiveInject"](M.c),r["\u0275\u0275directiveInject"](te.b),r["\u0275\u0275directiveInject"](yn.a),r["\u0275\u0275directiveInject"](C.a),r["\u0275\u0275directiveInject"](On.ProgramContextStreamManager))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-minga-program-view"]],decls:28,vars:16,consts:[["fxLayout","row","fxLayoutAlign","center center",1,"program-view-header"],[3,"routerLink"],["fxHide.xs",""],["fxFlex",""],["type","outline",1,"remove-program-button",3,"click"],[1,"program-view-container"],[1,"mg-headline","title-text","program-view-padding-content"],[1,"program-hero-container"],[1,"program-hero-banner"],[1,"program-hero-logo",3,"src"],[1,"description-text","program-view-padding-content"],[1,"content-divider","mg-headline2"],[1,"program-view-padding-content"],["rpcStream","streamProgramContextContent","rpcControl","streamProgramContextContentControl",3,"filter","service"],["mgStreamItem",""],[3,"item","canEdit","click"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"a",1),r["\u0275\u0275elementStart"](2,"mg-icon"),r["\u0275\u0275text"](3,"back"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"span"),r["\u0275\u0275text"](5,"Back "),r["\u0275\u0275elementStart"](6,"span",2),r["\u0275\u0275text"](7,"to programs"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](8,"div",3),r["\u0275\u0275elementStart"](9,"div"),r["\u0275\u0275elementStart"](10,"mg-button",4),r["\u0275\u0275listener"]("click",(function(e){return t.confirmRemoveProgram(e)})),r["\u0275\u0275text"](11),r["\u0275\u0275pipe"](12,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"div",5),r["\u0275\u0275elementStart"](14,"h1",6),r["\u0275\u0275text"](15),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"div",7),r["\u0275\u0275element"](17,"div",8),r["\u0275\u0275element"](18,"mg-avatar",9),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](19,"p",10),r["\u0275\u0275text"](20),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](21,"div",11),r["\u0275\u0275elementStart"](22,"p",12),r["\u0275\u0275text"](23),r["\u0275\u0275pipe"](24,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](25,"div",12),r["\u0275\u0275elementStart"](26,"mg-stream-scroller",13),r["\u0275\u0275template"](27,An,1,2,"ng-template",14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("routerLink","/admin/minga~programs"),r["\u0275\u0275advance"](10),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](12,10,"button.removeProgram")," "),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate1"](" ",null==t.programInfo?null:t.programInfo.title," "),r["\u0275\u0275advance"](2),r["\u0275\u0275styleProp"]("background-image",t.bannerUrl),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("src",t.logoUrl),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",null==t.programInfo?null:t.programInfo.description," "),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](24,12,"program.contentDividerText")," "),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("filter",r["\u0275\u0275pureFunction1"](14,Ln,t.programContextHash))("service",t.programContextStreamManager))},directives:[ae.e,ae.d,i.j,y.a,ve.b,ae.b,A.a,Ae.a,O.a,S.a,Bn],pipes:[o.d],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");.program-view-header[_ngcontent-%COMP%]{margin-top:7px;position:relative}.program-view-header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#036}.program-view-header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle}.program-view-header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{margin-right:8px}@media (max-width:599px){.program-view-header[_ngcontent-%COMP%]{padding:8px 8px 0}}@media (min-width:600px){.program-view-header[_ngcontent-%COMP%]{margin-top:28px}}.remove-program-button[_ngcontent-%COMP%]{font-family:Muli,sans-serif;line-height:1.35}@media (orientation:landscape){.remove-program-button[_ngcontent-%COMP%]{font-size:2.8985507246vh}}@media (orientation:portrait){.remove-program-button[_ngcontent-%COMP%]{font-size:2.8985507246vw}}@media (orientation:landscape) and (max-height:414px){.remove-program-button[_ngcontent-%COMP%]{font-size:12px}}@media (orientation:portrait) and (max-width:414px){.remove-program-button[_ngcontent-%COMP%]{font-size:12px}}@media (min-width:448.5px){.remove-program-button[_ngcontent-%COMP%]{font-size:13px}}.program-view-container[_ngcontent-%COMP%]{margin-top:16px;background-color:#fff;border-radius:6px;padding:16px 0;box-shadow:0 0 8px rgba(0,0,0,.17)}@media (max-width:599px){.program-view-container[_ngcontent-%COMP%]{padding:0;margin-top:15px}}.program-view-padding-content[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px}.title-text[_ngcontent-%COMP%]{margin-top:0}@media (max-width:599px){.title-text[_ngcontent-%COMP%]{padding-top:.67em}}.content-divider[_ngcontent-%COMP%]{font-weight:400;border-top:1px solid #ccc;display:flex;justify-content:space-between;align-items:center;padding-top:8px}.content-divider[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{display:inline-block}.content-divider[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   mg-button-outline[_ngcontent-%COMP%]{margin-right:10px}.content-divider[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   mg-button-outline[_ngcontent-%COMP%]:last-child{margin-right:0}.description-text[_ngcontent-%COMP%]{color:#2f2f2f;padding:0 1em}.success-overlay[_ngcontent-%COMP%]{height:100%;text-align:center;position:relative}.success-overlay[_ngcontent-%COMP%]   .checkmark-wrap[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%)}.program-hero-container[_ngcontent-%COMP%]{position:relative;text-align:center;margin-bottom:60px;--mg-avatar-size:98px}.program-hero-container[_ngcontent-%COMP%]   .program-hero-banner[_ngcontent-%COMP%], .program-hero-container[_ngcontent-%COMP%]   .program-hero-logo[_ngcontent-%COMP%]{background-repeat:no-repeat;width:100%;background-position:50%;background-size:cover}.program-hero-container[_ngcontent-%COMP%]   .program-hero-banner[_ngcontent-%COMP%]{padding-bottom:56.25%}.program-hero-container[_ngcontent-%COMP%]   .program-hero-logo[_ngcontent-%COMP%]{width:98px;height:98px;position:absolute;bottom:0;transform:translateY(50%);left:0;right:0;margin:auto;border-radius:50%;box-shadow:0 0 8px rgba(0,0,0,.17)}']}),e})();var Hn=n("ugqS"),Vn=n("OyaY"),Wn=n("gU2t");let Gn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[Wn.a,Vn.a,Hn.a,m.c]]}),e})(),qn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[R.b,g.a,D.a,Gn,Tt.a,o.c,i.k,Et.a.withConfig({addFlexToParent:!1})]]}),e})();var Un=n("qLpX");function $n(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"mg-program-item",9),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const n=t.$implicit;return r["\u0275\u0275nextContext"]().streamContextItemClick(n)})),r["\u0275\u0275elementEnd"]()}2&e&&r["\u0275\u0275property"]("content",t.$implicit)}function Yn(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"mg-program-item",9),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const n=t.$implicit;return r["\u0275\u0275nextContext"]().streamItemClick(n)})),r["\u0275\u0275elementEnd"]()}2&e&&r["\u0275\u0275property"]("content",t.$implicit)}let Qn=(()=>{class e{constructor(e,t,n,r,i,o,a,s){this.router=e,this.mingaStore=t,this.snackBar=n,this.dialog=r,this.mingaContent=i,this.streamManager=o,this.programStreamManager=a,this.programContextStreamManager=s}get programFilter(){return{active:!0}}streamContextItemClick(e){this.router.navigate(["/admin/minga/programs/",e.programContextHash])}streamItemClick(e){this.router.navigate(["/admin/minga~programs/program",e.contentHash])}removeFromMyMinga(e){return Object(H.a)(this,void 0,void 0,(function*(){const t=yield this.mingaStore.getMingaAsPromise();this.dialog.open(vn.h,{data:{programName:e.title,mingaName:t?t.name:""}}).afterClosed().subscribe(t=>Object(H.a)(this,void 0,void 0,(function*(){if(t){let t=new Cn.MingaRemoveProgram;t.setProgramContextHash(e.programContextHash),yield this.mingaContent.removeProgram(t),this.snackBar.open(`program "${e.title}" successfully removed!`),yield this.streamManager.restartStreamIfAvailable("AdminProgramContextFeed")}})))}))}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](i.g),r["\u0275\u0275directiveInject"](Mn.a),r["\u0275\u0275directiveInject"](te.b),r["\u0275\u0275directiveInject"](B.b),r["\u0275\u0275directiveInject"](xn.MingaContent),r["\u0275\u0275directiveInject"](yn.a),r["\u0275\u0275directiveInject"](Zt.ProgramStreamManager),r["\u0275\u0275directiveInject"](On.ProgramContextStreamManager))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-minga-programs"]],decls:16,vars:3,consts:[[1,"mg-headline","page-header"],[1,"default-icon"],[1,"program-list"],["text","My Programs",1,"no-side-margin","title-separator"],["rpcStream","streamProgramContexts","rpcControl","streamProgramContextsControl",3,"service"],["mgStreamItem",""],["mg-stream-empty","",1,"mg-centered","mg-minicopy"],["text","Available Programs",1,"no-side-margin","title-separator"],["rpcStream","streamPrograms","rpcControl","streamProgramsControl",3,"filter","service"],[3,"content","click"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"p",0),r["\u0275\u0275elementStart"](1,"mg-icon",1),r["\u0275\u0275text"](2,"challenge"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](3," Programs\n"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"div",2),r["\u0275\u0275element"](5,"mg-date-separator",3),r["\u0275\u0275elementStart"](6,"mg-stream-scroller",4),r["\u0275\u0275template"](7,$n,1,1,"ng-template",5),r["\u0275\u0275elementStart"](8,"p",6),r["\u0275\u0275text"](9," There are currently no programs added to your minga. "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"div",2),r["\u0275\u0275element"](11,"mg-date-separator",7),r["\u0275\u0275elementStart"](12,"mg-stream-scroller",8),r["\u0275\u0275template"](13,Yn,1,1,"ng-template",5),r["\u0275\u0275elementStart"](14,"p",6),r["\u0275\u0275text"](15," There are currently no programs available. "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("service",t.programContextStreamManager),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("filter",t.programFilter)("service",t.programStreamManager))},directives:[y.a,Un.a,O.a,S.a,on],styles:[".program-search[_ngcontent-%COMP%]{background-color:#fff}.mg-headline[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{vertical-align:middle}.program-list[_ngcontent-%COMP%]{min-height:100px}.page-header[_ngcontent-%COMP%]{margin:16px 0;font-weight:400}@media (min-width:600px){.page-header[_ngcontent-%COMP%]{margin:28px var(--feed-item-margin-side,8px) 16px var(--feed-item-margin-side,8px)}}@media (max-width:599px){.page-header[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{margin-left:8px}}"]}),e})();var Zn=n("26Ds");let Jn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[D.a,Zn.a,R.b,un]]}),e})();var Kn=n("tsE+"),Xn=n("s7LF");let er=(()=>{class e{constructor(e,t){this.dialogRef=e,this.programContentOffset=null,this.programContentOffset=t,this.initProgramContentOffset=t}isInitDifferent(){const e=Object.keys(this.initProgramContentOffset);for(let t of e)if(this.programContentOffset[t]!=this.initProgramContentOffset[t])return!0;return!1}onCancel(e){this.dialogRef.close(!1)}onSave(e){this.dialogRef.close(this.programContentOffset)}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](B.g),r["\u0275\u0275directiveInject"](B.a))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-move-program-content-dialog"]],decls:6,vars:2,consts:[["name","programContentOffset",3,"ngModel","ngModelChange"],[1,"btns-wrap"],[3,"disabled","click"],["type","outline",3,"click"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mg-date-time-offset-picker",0),r["\u0275\u0275listener"]("ngModelChange",(function(e){return t.programContentOffset=e})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"mg-button",2),r["\u0275\u0275listener"]("click",(function(e){return t.onSave(e)})),r["\u0275\u0275text"](3,"Save"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"mg-button",3),r["\u0275\u0275listener"]("click",(function(e){return t.onCancel(e)})),r["\u0275\u0275text"](5,"Cancel"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275property"]("ngModel",t.programContentOffset),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",!t.isInitDifferent()))},directives:[Kn.a,Xn.t,Xn.w,A.a],styles:[".btns-wrap[_ngcontent-%COMP%]{padding-top:16px}"]}),e})();var tr=n("9iN8");let nr=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[g.a,tr.a,Xn.m]]}),e})();var rr=n("vxDR"),ir=n("iIIi"),or=n("AmzI"),ar=n("4doY"),sr=n("YLbN"),lr=n("dy9V"),cr=n("pzvA");const dr=["stream"],mr=["successOverlayTemplate"],gr=function(e){return["view","program~mingas",e]},pr=function(e){return{o:e}},ur=function(e){return{outlets:e}},hr=function(e){return["",e]};function fr(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mg-button-outline",1),r["\u0275\u0275text"](1,"Mingas"),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"](3);r["\u0275\u0275property"]("routerLink",r["\u0275\u0275pureFunction1"](7,hr,r["\u0275\u0275pureFunction1"](5,ur,r["\u0275\u0275pureFunction1"](3,pr,r["\u0275\u0275pureFunction1"](1,gr,e.programHash)))))}}function vr(e,t){1&e&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275template"](1,fr,2,9,"mg-button-outline",20),r["\u0275\u0275elementContainerEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("hasPermission","SUPERADMIN"))}const Cr=function(e){return["program","update",e]};function br(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mg-button-outline",1),r["\u0275\u0275text"](1,"Edit"),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275property"]("routerLink",r["\u0275\u0275pureFunction1"](7,hr,r["\u0275\u0275pureFunction1"](5,ur,r["\u0275\u0275pureFunction1"](3,pr,r["\u0275\u0275pureFunction1"](1,Cr,e.programHash)))))}}function Pr(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",18),r["\u0275\u0275template"](1,vr,2,1,"ng-container",19),r["\u0275\u0275template"](2,br,2,9,"mg-button-outline",20),r["\u0275\u0275elementStart"](3,"mg-button-outline",21),r["\u0275\u0275listener"]("click",(function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().confirmDeleteProgram(t)})),r["\u0275\u0275text"](4),r["\u0275\u0275pipe"](5,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.mingaCount),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("hasPermission","SUPERADMIN"),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("color","warn"),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](5,4,"button.deleteProgram")," ")}}function Mr(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"mg-button-outline",23),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"](2).addToMyMinga()})),r["\u0275\u0275text"](1," Add to Minga "),r["\u0275\u0275elementEnd"]()}}function xr(e,t){if(1&e&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275template"](1,Mr,2,0,"mg-button-outline",22),r["\u0275\u0275elementContainerEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.mingaContext)}}function yr(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"p",27),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",1==e.contentCount?e.contentCount+" item":e.contentCount+" items"," ")}}function Or(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"mg-button-outline",28),r["\u0275\u0275listener"]("click",(function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"](2).addContent(t)})),r["\u0275\u0275text"](1,"Add Content"),r["\u0275\u0275elementEnd"]()}}function _r(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",24),r["\u0275\u0275template"](1,yr,2,1,"p",25),r["\u0275\u0275template"](2,Or,2,0,"mg-button-outline",26),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!e.mingaContext&&null!==e.contentCount),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("hasPermission","SUPERADMIN")}}function Sr(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"mg-program-content-item",29),r["\u0275\u0275listener"]("dateControlClick",(function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().onItemDateControlClick(t)}))("click",(function(){r["\u0275\u0275restoreView"](e);const n=t.$implicit;return r["\u0275\u0275nextContext"]().onStreamItemClick(n)}))("contextMenuClick",(function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().onItemContextMenu(t)})),r["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("item",e)("canEdit",n.canEditProgramContent)}}function wr(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",30),r["\u0275\u0275elementStart"](1,"div",31),r["\u0275\u0275element"](2,"mg-success-checkmark"),r["\u0275\u0275elementStart"](3,"div",32),r["\u0275\u0275text"](4,"Program Successfully Added!"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]())}const Ir=function(e){return{programHash:e}};let Er=(()=>{class e{constructor(e,t,n,r,i,o,a,s,l,c,d,m,g,p,u,h,f){this.mgModal=t,this.programManager=n,this.contentBuilder=r,this.adminEvents=i,this.url=o,this.mingaStore=a,this.dialog=s,this.mingaContent=l,this.rootService=c,this.ngZone=d,this.matDialog=m,this.contentCleanup=g,this.router=p,this.permissions=u,this.snackBar=h,this.programStreamManager=f,this.programHash="",this.mingaContext=!0,this.canEditProgramContent=!1,this.mingaCount=null,this.contentCount=null,this.onItemContextMenu=e=>this.ngZone.run(()=>this._onItemContextMenu(e)),this.onItemDateControlClick=e=>this.ngZone.run(()=>this._onItemDateControlClick(e)),e.params.subscribe(e=>{this.programHash=e.programHash,this._initProgramInfo(this.programHash),this.mingaContext=this.url.path().includes("minga~programs")}),this._programUpdateSuccess=this.adminEvents.onProgramUpdateSuccess.subscribe(e=>{e.programHash==this.programHash&&this._initProgramInfo(this.programHash)})}ngOnInit(){this.initPermissions()}get bannerUrl(){return this.programInfo&&this.programInfo.bannerList?"url("+window.MINGA_ASSET_URL_PREFIX+this.programInfo.bannerList[0]+")":""}get logoUrl(){return this.programInfo&&this.programInfo.logo?window.MINGA_ASSET_URL_PREFIX+this.programInfo.logo:""}_onItemDateControlClick(e){this.dialog.open(er,{data:Object(tr.c)(e.item.positionRelative,e.item.positionOffset)}).beforeClosed().subscribe(t=>{t&&this.moveProgramContent(e.item,t)})}initPermissions(){return Object(H.a)(this,void 0,void 0,(function*(){this.canEditProgramContent=this.permissions.hasPermission(f.MingaPermission.SUPERADMIN)}))}editProgramContent(e){e.typeString&&e.contentHash&&this.contentBuilder.navEdit(e.typeString,e.contentHash)}moveProgramContent(e,t){return Object(H.a)(this,void 0,void 0,(function*(){if(!e.contentHash)return;const n=new bn.ProgramMoveContent;n.setContentHash(e.contentHash),n.setProgramHash(this.programHash);const r=new bn.ProgramContentPosition;r.setOffset(Object(tr.b)(t)),r.setRelativeOffset(t.relative),n.setContentStartPosition(r),yield this.rootService.addLoadingPromise(this.programManager.moveContent(n))}))}confirmRemoveProgramContent(e){return Object(H.a)(this,void 0,void 0,(function*(){if(!e.contentHash)return;const t=yield this.matDialog.open(ir.a,{data:{text:"dialog.removeProgramContentConfirm",saveButtonLocale:"button.remove"}});t.beforeClosed().subscribe(t=>{t&&this.removeProgramContent(e)}),yield t.beforeClosed().toPromise()}))}removeProgramContent(e){return Object(H.a)(this,void 0,void 0,(function*(){if(!e.contentHash)return;const t=new bn.ProgramRemoveContent;t.setContentHash(e.contentHash),t.setProgramHash(this.programHash),yield this.rootService.addLoadingPromise(this.programManager.removeContent(t))}))}_onItemContextMenu(e){return Object(H.a)(this,void 0,void 0,(function*(){e.preventDefault(),e.stopImmediatePropagation(),yield this.rootService.openGlobalMenu({x:e.pageX,y:e.pageY,items:[{name:"Edit",click:()=>this.editProgramContent(e.model.item)},{name:"Remove",click:()=>this.confirmRemoveProgramContent(e.model.item)}]})}))}_initProgramInfo(e){return Object(H.a)(this,void 0,void 0,(function*(){const t=new bn.ProgramInfoQuery;t.setProgramHash(e);const n=(yield this.programManager.getDetails(t)).toObject();this.programInfo=n.programInfo,this.mingaCount=n.mingaCount,this.contentCount=n.contentCount}))}onStreamItemClick(e){const t=fn.get(e,"contentHash","");this.router.navigate(["",{outlets:{o:["preview~content",t,this.programHash]}}])}addContent(e){this.contentBuilder.openCreateContextMenu(e.pageX,e.pageY,{type:"program",hash:this.programHash})}addToMyMinga(){return Object(H.a)(this,void 0,void 0,(function*(){const e=yield this.mingaStore.getMingaAsPromise();this.dialog.open(vn.a,{data:{programName:this.programInfo.title,mingaName:e?e.name:""}}).afterClosed().subscribe(e=>Object(H.a)(this,void 0,void 0,(function*(){if(e){let t=new Cn.MingaAddProgram;t.setProgramHash(this.programHash);const n=new or.Date;n.setYear(e.getFullYear()),n.setMonth(e.getMonth()+1),n.setDay(e.getDate()),t.setProgramStartDate(n);const r=yield this.rootService.addLoadingPromise(this.mingaContent.addProgram(t));r&&r.getProgramContextHash()&&(yield this._successDialog())}})))}))}confirmDeleteProgram(e){e&&e.preventDefault(),this.dialog.open(vn.d,{data:{matchString:this.programInfo.title,placeholderLocaleValue:"Program's Title",titleLocaleValue:"Program"}}).beforeClosed().subscribe(e=>{!0===e&&this.deleteProgram()})}deleteProgram(){return Object(H.a)(this,void 0,void 0,(function*(){const e=new ar.ContentInfoQuery;e.setContentHash(this.programHash),this.snackBar.open("successfully deleted program: "+this.programInfo.title),yield this.contentCleanup.delete(e),yield this.router.navigate(["/admin/program"])}))}_successDialog(){return Object(H.a)(this,void 0,void 0,(function*(){let e=this.mgModal.open(this.successOverlayTemplate,{full:!0,animation:"fade"});setTimeout(()=>e.close(),2e3),yield new Promise(e=>setTimeout(e,1e3)),yield this.router.navigate(["",{outlets:{o:null}}]).then(()=>Object(H.a)(this,void 0,void 0,(function*(){yield this.router.navigate(["/admin/minga~programs"])})))}))}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](de.b),r["\u0275\u0275directiveInject"](Pn.ProgramManager),r["\u0275\u0275directiveInject"](sr.a),r["\u0275\u0275directiveInject"](s.a),r["\u0275\u0275directiveInject"](m.l),r["\u0275\u0275directiveInject"](Mn.a),r["\u0275\u0275directiveInject"](B.b),r["\u0275\u0275directiveInject"](xn.MingaContent),r["\u0275\u0275directiveInject"](X.a),r["\u0275\u0275directiveInject"](r.NgZone),r["\u0275\u0275directiveInject"](B.b),r["\u0275\u0275directiveInject"](lr.ContentCleanup),r["\u0275\u0275directiveInject"](i.g),r["\u0275\u0275directiveInject"](M.c),r["\u0275\u0275directiveInject"](te.b),r["\u0275\u0275directiveInject"](Zt.ProgramStreamManager))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-program-view"]],viewQuery:function(e,t){if(1&e&&(r["\u0275\u0275viewQuery"](dr,3),r["\u0275\u0275viewQuery"](mr,3)),2&e){let e;r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.stream=e.first),r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.successOverlayTemplate=e.first)}},decls:28,vars:16,consts:[["fxLayout","row","fxLayoutAlign","center center",1,"program-view-header"],[3,"routerLink"],["fxHide.xs",""],["fxFlex",""],["class","top-action-buttons",4,"ngIf"],[4,"hasPermission"],[1,"program-view-container"],[1,"mg-headline","title-text","program-view-padding-content"],[1,"program-hero-container"],[1,"program-hero-banner"],[1,"program-hero-logo",3,"src"],[1,"description-text","program-view-padding-content",3,"innerHTML"],[1,"content-divider","mg-headline2"],[1,"program-view-padding-content"],["class","program-view-padding-content mg-minicopy",4,"ngIf"],["rpcStream","streamProgramContent","rpcControl","streamProgramContentControl",3,"service","filter"],["mgStreamItem",""],["successOverlayTemplate",""],[1,"top-action-buttons"],[4,"ngIf"],[3,"routerLink",4,"hasPermission"],[1,"add-program-button",3,"color","click"],["class","delete-program-button",3,"click",4,"ngIf"],[1,"delete-program-button",3,"click"],[1,"program-view-padding-content","mg-minicopy"],["class","program-content-count",4,"ngIf"],[3,"click",4,"hasPermission"],[1,"program-content-count"],[3,"click"],[3,"item","canEdit","dateControlClick","click","contextMenuClick"],[1,"success-overlay"],[1,"checkmark-wrap"],[1,"mg-bodycopy"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"a",1),r["\u0275\u0275elementStart"](2,"mg-icon"),r["\u0275\u0275text"](3,"back"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"span"),r["\u0275\u0275text"](5,"Back "),r["\u0275\u0275elementStart"](6,"span",2),r["\u0275\u0275text"](7,"to all programs"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](8,"div",3),r["\u0275\u0275template"](9,Pr,6,6,"div",4),r["\u0275\u0275template"](10,xr,2,1,"ng-container",5),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"div",6),r["\u0275\u0275elementStart"](12,"h1",7),r["\u0275\u0275text"](13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"div",8),r["\u0275\u0275element"](15,"div",9),r["\u0275\u0275element"](16,"mg-avatar",10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](17,"p",11),r["\u0275\u0275elementStart"](18,"div",12),r["\u0275\u0275elementStart"](19,"p",13),r["\u0275\u0275text"](20),r["\u0275\u0275pipe"](21,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](22,_r,3,2,"div",14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](23,"div",13),r["\u0275\u0275elementStart"](24,"mg-stream-scroller",15),r["\u0275\u0275template"](25,Sr,1,2,"ng-template",16),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](26,wr,5,0,"ng-template",null,17,r["\u0275\u0275templateRefExtractor"])),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("routerLink",t.mingaContext?"/admin/minga~programs":"/admin/program"),r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("ngIf",!t.mingaContext),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("hasPermission","MINGA_PROGRAMS_MANAGE"),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"](" ",null==t.programInfo?null:t.programInfo.title," "),r["\u0275\u0275advance"](2),r["\u0275\u0275styleProp"]("background-image",t.bannerUrl),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("src",t.logoUrl),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("innerHTML",null==t.programInfo?null:t.programInfo.description,r["\u0275\u0275sanitizeHtml"]),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](21,12,"program.contentDividerText")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",!t.mingaContext),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("service",t.programStreamManager)("filter",r["\u0275\u0275pureFunction1"](14,Ir,t.programHash)))},directives:[i.j,y.a,m.o,se.a,Ae.a,O.a,S.a,cr.a,i.h,Bn,me.a],pipes:[o.d],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");.program-view-header[_ngcontent-%COMP%]{margin-top:7px;position:relative;flex-direction:row;box-sizing:border-box;display:flex;max-height:100%;justify-content:space-between;align-items:center}@media (max-width:599px){.program-view-header[_ngcontent-%COMP%]{margin-left:16px;margin-right:16px}}.program-view-header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#036}.program-view-header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle}@media (max-width:599px){.program-view-header[_ngcontent-%COMP%]{padding:8px 8px 0}}@media (min-width:600px){.program-view-header[_ngcontent-%COMP%]{margin-top:28px}}.program-view-header[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{margin-right:8px}mg-button-outline[_ngcontent-%COMP%]{font-family:Muli,sans-serif;line-height:1.35}@media (orientation:landscape){mg-button-outline[_ngcontent-%COMP%]{font-size:2.8985507246vh}}@media (orientation:portrait){mg-button-outline[_ngcontent-%COMP%]{font-size:2.8985507246vw}}@media (orientation:landscape) and (max-height:414px){mg-button-outline[_ngcontent-%COMP%]{font-size:12px}}@media (orientation:portrait) and (max-width:414px){mg-button-outline[_ngcontent-%COMP%]{font-size:12px}}@media (min-width:448.5px){mg-button-outline[_ngcontent-%COMP%]{font-size:13px}}.top-action-buttons[_ngcontent-%COMP%]{font-family:Muli,sans-serif;line-height:1.35}@media (orientation:landscape){.top-action-buttons[_ngcontent-%COMP%]{font-size:2.8985507246vh}}@media (orientation:portrait){.top-action-buttons[_ngcontent-%COMP%]{font-size:2.8985507246vw}}@media (orientation:landscape) and (max-height:414px){.top-action-buttons[_ngcontent-%COMP%]{font-size:12px}}@media (orientation:portrait) and (max-width:414px){.top-action-buttons[_ngcontent-%COMP%]{font-size:12px}}@media (min-width:448.5px){.top-action-buttons[_ngcontent-%COMP%]{font-size:13px}}.top-action-buttons[_ngcontent-%COMP%] > mg-button-outline[_ngcontent-%COMP%]{margin-left:6px}.program-view-container[_ngcontent-%COMP%]{margin-top:16px;background-color:#fff;border-radius:6px;padding:16px 0;box-shadow:0 0 8px rgba(0,0,0,.17)}@media (max-width:599px){.program-view-container[_ngcontent-%COMP%]{padding:0;margin-top:15px}}.program-view-padding-content[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px}.title-text[_ngcontent-%COMP%]{margin-top:0}@media (max-width:599px){.title-text[_ngcontent-%COMP%]{padding-top:.67em}}.content-divider[_ngcontent-%COMP%]{font-weight:400;border-top:1px solid #ccc;display:flex;justify-content:space-between;align-items:center;padding-top:8px}.content-divider[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{display:inline-block}.content-divider[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;justify-content:center}.content-divider[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .program-content-count[_ngcontent-%COMP%]{margin-right:8px}.content-divider[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   mg-button-outline[_ngcontent-%COMP%]{margin-right:10px}.content-divider[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   mg-button-outline[_ngcontent-%COMP%]:last-child{margin-right:0}.description-text[_ngcontent-%COMP%]{color:#2f2f2f;padding:0 1em;word-break:break-word;white-space:pre-wrap}.success-overlay[_ngcontent-%COMP%]{height:100%;text-align:center;position:relative}.success-overlay[_ngcontent-%COMP%]   .checkmark-wrap[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%)}.program-hero-container[_ngcontent-%COMP%]{position:relative;text-align:center;margin-bottom:60px;--mg-avatar-size:98px}.program-hero-container[_ngcontent-%COMP%]   .program-hero-banner[_ngcontent-%COMP%], .program-hero-container[_ngcontent-%COMP%]   .program-hero-logo[_ngcontent-%COMP%]{background-repeat:no-repeat;width:100%;background-position:50%;background-size:cover}.program-hero-container[_ngcontent-%COMP%]   .program-hero-banner[_ngcontent-%COMP%]{padding-bottom:56.25%}.program-hero-container[_ngcontent-%COMP%]   .program-hero-logo[_ngcontent-%COMP%]{width:98px;height:98px;position:absolute;bottom:0;transform:translateY(50%);left:0;right:0;margin:auto;border-radius:50%;box-shadow:0 0 8px rgba(0,0,0,.17)}']}),e})(),kr=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[D.a,g.a,Tt.a,Gn,R.b,kt.a,ir.b,M.b,m.c,o.c,i.k]]}),e})();const Fr=[{path:"",pathMatch:"full",redirectTo:"/admin/people"},{path:"people",component:It,data:{title:"People Manager"}},{path:"program",component:mn},{path:"minga~programs",component:Qn,data:{title:"Minga Programs"}},{path:"challenge~polls",component:d,data:{baseUrl:"/challenge~polls/"},children:[{path:"polls",component:$t,data:{title:"View Polls"}},{path:"challenges",component:F,data:{title:"View Challenges"}}]},{path:"minga~polls",component:$t,data:{title:"View Polls"}},{path:"program/:programHash",component:Er},{path:"minga~programs/program/:programHash",component:Er},{path:"minga/programs/:programInstanceHash",component:zn},{outlet:"o",path:"minga/:mingaHash/people/create",component:zt.a,canDeactivate:[a.c]},{outlet:"o",path:"minga/:mingaHash/people/update/:hash",component:zt.a,canDeactivate:[a.c]}];let Tr=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({providers:[s.a],imports:[[Lt,zt.b,hn,Jn,h.a,Qt,rr.b,kr,qn,nr,z,u,o.c.forChild(),i.k.forChild(Fr)]]}),e})()},"9iN8":function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return d.b})),n.d(t,"c",(function(){return d.c}));var r=n("SVse"),i=n("8Y7J"),o=n("s7LF"),a=n("pMoy"),s=n("Q2Ze"),l=n("e6WT"),c=n("ZTz/"),d=n("tsE+");let m=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[r.c,o.m,a.b,c.b,s.f,l.c]]}),e})()},CslP:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("8Y7J"),i=n("XNiG");let o=(()=>{class e{constructor(){this._onProgramUpdateSuccess=new i.a}emitProgramUpdateSuccess(e){this._onProgramUpdateSuccess.next(e)}get onProgramUpdateSuccess(){return this._onProgramUpdateSuccess.asObservable()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},GNGV:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("8Y7J"),i=n("s7LF");n("9QcJ");let o=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[i.m]]}),e})()},GNNB:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r=n("8Y7J"),i=n("s7LF"),o=n("pgOG"),a=n("PqYM"),s=n("eIep"),l=n("EyMp"),c=n("Q2Ze"),d=n("i1AJ"),m=n("SVse"),g=n("e6WT"),p=n("Tj54"),u=n("sj4O"),h=n("TSSN");const f=["pinInput"];function v(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-icon"),r["\u0275\u0275text"](1,"done"),r["\u0275\u0275elementEnd"]())}function C(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-icon"),r["\u0275\u0275text"](1,"error_outline"),r["\u0275\u0275elementEnd"]())}function b(e,t){1&e&&r["\u0275\u0275element"](0,"mg-spinner",6)}function P(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-hint"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,e.hint)," ")}}function M(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"input.pin.error.pattern")," "))}function x(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"input.pin.error.pinTaken")," "))}function y(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"input.pin.error.max")," "))}function O(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"input.pin.error.incorrect")," "))}function _(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"input.pin.error.required")," "))}function S(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275elementContainerStart"](1,7),r["\u0275\u0275template"](2,M,3,3,"span",8),r["\u0275\u0275template"](3,x,3,3,"span",8),r["\u0275\u0275template"](4,y,3,3,"span",8),r["\u0275\u0275template"](5,O,3,3,"span",8),r["\u0275\u0275template"](6,_,3,3,"span",9),r["\u0275\u0275elementContainerEnd"](),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngSwitch",e.inputControlErrorKey),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngSwitchCase","pattern"),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngSwitchCase","pinTaken"),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngSwitchCase","max"),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngSwitchCase","incorrect")}}const w=function(e){return{"hidden-required":e}},I={provide:i.r,useExisting:Object(r.forwardRef)(()=>k),multi:!0},E={provide:i.q,useExisting:Object(r.forwardRef)(()=>k),multi:!0};let k=(()=>{class e{constructor(e,t){this.personValidation=e,this.inj=t,this.disabled=!1,this.required=!1,this.unique=!1,this.error="",this.hint="",this.hiddenRequired=!1,this.readonly=!0,this.mgNoHintMargin=!1,this.outerControl=new i.h,this._setupUniqueValidator()}validate(e){return this.inputControl.errors}ngOnInit(){this.inputControl=new i.h({value:this.innerValue,disabled:this.disabled},[i.D.pattern(/^[0-9]*$/),i.D.max(2147483647)],this._getAsyncValidators()),this._formGroup=new i.k({inputControl:this.inputControl}),this._initOuterControl(),this.inputControl.statusChanges.subscribe(e=>{"function"==typeof this.onChange&&(this.onChange(this.innerValue),this.onTouched())})}ngOnChanges(e){if(e.unique&&this._formGroup){let e=this._getAsyncValidators();this.inputControl.setAsyncValidators(e)}e.error&&this._showCustomError()}_showCustomError(){if(this.error&&this.inputControl){let e={};e[this.error]=!0,this.inputControl.setErrors(e)}}_initOuterControl(){let e=this.inj.get(i.s);e&&e.control&&(this.outerControl=e.control),this.outerControl.statusChanges.subscribe(e=>{this.outerControl.errors&&0==!!this.inputControl.errors?this.outerErrors=this.outerControl.errors:!this.outerControl.errors&&this.outerErrors&&(this.outerErrors=null)})}get inputRequired(){return this.required}get inputControlErrorKey(){let e=this.inputControl.errors?Object.keys(this.inputControl.errors)[0]:"",t=this.outerControl.errors?Object.keys(this.outerControl.errors)[0]:"";return e||t}get statusDone(){return this.inputControl.dirty&&this.inputControl.valid&&(!this.outerControl||this.outerControl.dirty&&this.outerControl.valid)}get statusInvalid(){return this.inputControl.dirty&&this.inputControl.invalid||!this.outerControl||this.outerControl.dirty&&this.outerControl.invalid}get statusTouched(){return this.inputControl.invalid&&(this.inputControl.dirty||this.inputControl.touched)||this.outerControl.invalid&&(this.outerControl.dirty||this.outerControl.touched)}get statusPending(){return this.inputControl.pending||this.outerControl.pending}wantsUnique(){return this.unique||"number"==typeof this.unique}_getAsyncValidators(e=this.wantsUnique()){let t=[];return e&&t.push(this._uniqueValidator),t}_setupUniqueValidator(){this._uniqueValidator=e=>{const t=e.value;let n=new o.PinUniqueRequest;return n.setPin(t),"number"==typeof this.unique&&(console.log("gonna return as value is: "+t),this.unique==t||t>=2147483648)?Promise.resolve(null):Object(a.a)(1e3).pipe(Object(s.a)(()=>this.personValidation.pinUnique(n).then(e=>e.getUnique()?null:{pinTaken:!0})))}}writeValue(e){"number"==typeof e&&(this.innerValue=e,this.inputControl.setValue(this.innerValue))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}change(e){e=this.ensureNumeric(e),this.innerValue=e,this.onChange&&this.onChange(this.innerValue)}ensureNumeric(e){return String(e).replace(/\D/g,"")}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](l.PersonValidation),r["\u0275\u0275directiveInject"](r.Injector))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-pin"]],viewQuery:function(e,t){if(1&e&&r["\u0275\u0275viewQuery"](f,3),2&e){let e;r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.pinInput=e.first)}},inputs:{disabled:"disabled",required:"required",unique:"unique",error:"error",hint:"hint",placeholder:"placeholder",hiddenRequired:"hiddenRequired",readonly:"readonly",mgNoHintMargin:"mgNoHintMargin"},features:[r["\u0275\u0275ProvidersFeature"]([I,E]),r["\u0275\u0275NgOnChangesFeature"]],decls:11,vars:14,consts:[["mgFormField","",1,"mg-pin",3,"ngClass","mgReadOnly","mgNoHintMargin"],["matInput","","type","text","min","0","inputmode","numeric","pattern","[0-9]*",3,"formControl","required","readonly","ngModelChange"],["pinInput",""],["mat-icon-button","","matSuffix","",1,"input-icon"],[4,"ngIf"],["color","primary","mode","indeterminate","diameter","25",4,"ngIf"],["color","primary","mode","indeterminate","diameter","25"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-form-field",0),r["\u0275\u0275elementStart"](1,"mat-label"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"input",1,2),r["\u0275\u0275listener"]("ngModelChange",(function(e){return t.change(e)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"div",3),r["\u0275\u0275template"](6,v,2,0,"mat-icon",4),r["\u0275\u0275template"](7,C,2,0,"mat-icon",4),r["\u0275\u0275template"](8,b,1,0,"mg-spinner",5),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](9,P,3,3,"mat-hint",4),r["\u0275\u0275template"](10,S,7,5,"mat-error",4),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275property"]("ngClass",r["\u0275\u0275pureFunction1"](12,w,t.hiddenRequired))("mgReadOnly",t.readonly)("mgNoHintMargin",t.mgNoHintMargin),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](t.placeholder||"PIN"),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("formControl",t.outerErrors?t.outerControl:t.inputControl)("required",t.inputRequired)("readonly",t.readonly),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",t.statusDone&&t.outerControl.asyncValidator),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.statusInvalid&&t.outerControl.asyncValidator),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.statusPending),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.hint),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.statusTouched))},directives:[c.d,d.a,m.m,c.h,g.b,i.d,i.z,i.t,i.i,i.B,c.j,m.o,p.a,u.a,c.g,c.c,m.q,m.r,m.s],pipes:[h.d],styles:[""]}),e})()},ITzS:function(e,t,n){"use strict";n.d(t,"b",(function(){return Ct})),n.d(t,"a",(function(){return vt}));var r=n("SVse"),i=n("8Y7J"),o=n("s7LF"),a=n("pMoy"),s=n("Q2Ze"),l=n("e6WT"),c=n("ZTz/"),d=n("jMqV"),m=n("TSSN"),g=n("CO6v"),p=n("qsjj"),u=n("n09W"),h=n("KRyY"),f=n("/2l8"),v=n("LGJD"),C=n("SOT1"),b=n("iIIi"),P=n("HxU+"),M=n("ls3q"),x=n("GNGV"),y=n("vtEA"),O=n("CL15"),_=n("XMmb"),S=n("Vwx4"),w=n("kWWr"),I=n("mrSG"),E=n("LRne"),k=n("lJxs");let F=(()=>{class e{constructor(){this.label=""}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-person-permission-override-field"]],inputs:{permission:"permission",label:"label"},decls:0,vars:0,template:function(e,t){},styles:[""],changeDetection:0}),e})(),T=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[]]}),e})();var R=n("VDRc"),j=n("zQhy");function D(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div",2),i["\u0275\u0275elementStart"](2,"div",3),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"mat-radio-group",4),i["\u0275\u0275listener"]("ngModelChange",(function(t){i["\u0275\u0275restoreView"](e);const n=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"](2).onRadioGroupChange(t,n)})),i["\u0275\u0275elementStart"](5,"mat-radio-button",5),i["\u0275\u0275text"](6,"Default"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"mat-radio-button",5),i["\u0275\u0275text"](8,"Enabled"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"mat-radio-button",5),i["\u0275\u0275text"](10,"Disabled"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=t.ngIf,n=i["\u0275\u0275nextContext"]().$implicit,r=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](n.label),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",r._loading)("ngModel",e.value),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("value",null),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("value",!0),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("value",!1)}}function N(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275template"](1,D,11,6,"ng-container",0),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](2,1,n.watchOptionValue(e.permission)))}}function B(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,N,3,3,"div",1),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",e.options)("ngForTrackBy",e.trackByFn)}}let A=(()=>{class e{constructor(e){this._cdr=e,this._permissionOverrides=null,this._loading=!1,this.trackByFn=(e,t)=>t.permission}set permissionOverrides(e){this._permissionOverrides&&this._cleanupPermissionOverrides(this._permissionOverrides),this._permissionOverrides=e}get permissionOverrides(){return this._permissionOverrides}onRadioGroupChange(e,t){return Object(I.a)(this,void 0,void 0,(function*(){this._loading=!0,this._cdr.markForCheck();try{null===e?yield this._permissionOverrides.unset(t.permission):!0===e?yield this._permissionOverrides.set(t.permission,!0):!1===e?yield this._permissionOverrides.set(t.permission,!1):console.error("Unexpected value:",e)}finally{this._loading=!1,this._cdr.markForCheck()}}))}watchOptionValue(e){return this._permissionOverrides?this._permissionOverrides.observe(e).pipe(Object(k.a)(e=>({value:e}))):Object(E.a)({value:null})}ngOnDestroy(){this._permissionOverrides&&(this._cleanupPermissionOverrides(this._permissionOverrides),this._permissionOverrides=null)}onEnableChange(e,t){return Object(I.a)(this,void 0,void 0,(function*(){this._loading=!0,this._cdr.markForCheck();try{t?yield this._permissionOverrides.set(e.permission,!0):yield this._permissionOverrides.unset(e.permission)}finally{this._loading=!1,this._cdr.markForCheck()}}))}onValueChange(e,t){return Object(I.a)(this,void 0,void 0,(function*(){this._loading=!0,this._cdr.markForCheck();try{yield this._permissionOverrides.set(e.permission,t)}finally{this._loading=!1,this._cdr.markForCheck()}}))}_cleanupPermissionOverrides(e){}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](i.ChangeDetectorRef))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-person-permission-overrides-form"]],contentQueries:function(e,t,n){if(1&e&&i["\u0275\u0275contentQuery"](n,F,0),2&e){let e;i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.options=e)}},inputs:{permissionOverrides:"permissionOverrides"},decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["fxLayout","row","fxLayout.lt-sm","column","fxLayoutAlign","start center","fxLayoutGap","8px"],["fxFlex","auto"],[3,"disabled","ngModel","ngModelChange"],[3,"value"]],template:function(e,t){1&e&&i["\u0275\u0275template"](0,B,2,2,"ng-container",0),2&e&&i["\u0275\u0275property"]("ngIf",t.permissionOverrides)},directives:[r.o,r.n,R.e,R.d,R.f,R.b,j.b,o.t,o.w,j.a],pipes:[r.b],styles:["mat-radio-button[_ngcontent-%COMP%] ~ mat-radio-button[_ngcontent-%COMP%]{margin-left:8px}mat-radio-group[_ngcontent-%COMP%]{font-size:15px}"],changeDetection:0}),e})();var L=n("u9T3");let z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[r.c,L.a,j.c,o.m],T]}),e})();var H=n("XNiG"),V=n("itXk"),W=n("Cfvw"),G=n("eIep"),q=n("pLZG"),U=n("lkjj"),$=n("p3fa");let Y=(()=>{class e{constructor(e,t){this.rolesService=e,this.checker=t,this._checkedRole="",this.ignoreRole="",this.pendingUsers=[],this.updatingRole=!1,this.reachedLimit=new i.EventEmitter,this._checkRoleSubj=new H.a;const n=this._checkRoleSubj.pipe(Object(G.a)(t=>Object(V.b)([Object(E.a)(t),e.adminRoles$,Object(E.a)(this.updatingRole),Object(E.a)(this.ignoreRole),Object(E.a)(this.pendingUsers)])),Object(q.a)(([e])=>e!=this.ignoreRole),Object(q.a)(([e,t,n,r,i])=>{const o=!!t.find(t=>t.roleType==e);return o&&n&&r?!t.find(e=>e.roleType==r):o}),Object(G.a)(([e,t,n,r,i])=>{let o=0;if(i.length)for(let a=0;a<i.length;a++){const n=i[a];n.roleType?t.find(e=>e.roleType==n.roleType)&&n.roleType!=r&&o++:t.find(t=>t.roleType==e)&&o++}return Object(W.a)(this.checker.checkAdminUserLimits(o))}),Object(q.a)(e=>e)),r=this._checkRoleSubj.pipe(Object(G.a)(t=>Object(V.b)([Object(E.a)(t),e.billableRoles$,Object(E.a)(this.updatingRole),Object(E.a)(this.ignoreRole),Object(E.a)(this.pendingUsers)])),Object(q.a)(([e])=>e!=this.ignoreRole),Object(q.a)(([e,t,n,r,i])=>{const o=!!t.find(t=>t.roleType==e);return o&&n&&r?!t.find(e=>e.roleType==r):o}),Object(G.a)(([e,t,n,r,i])=>{let o=0;if(i.length)for(let a=0;a<i.length;a++){const n=i[a];n.roleType?t.find(e=>e.roleType==n.roleType)&&n.roleType!=r&&o++:t.find(t=>t.roleType==e)&&o++}return Object(W.a)(this.checker.checkBillableUserLimits(o))}),Object(q.a)(e=>e));this.adminSub=n.subscribe(()=>this.reachedLimit.emit()),this.billableSub=r.subscribe(()=>this.reachedLimit.emit())}set checkedRole(e){this._checkedRole=e,this.trigger()}get checkedRole(){return this._checkedRole}trigger(){this._checkRoleSubj.next(this._checkedRole)}ngOnInit(){this.rolesService.fetchIfNeeded()}ngOnDestroy(){this._checkRoleSubj.complete(),this.adminSub&&this.adminSub.unsubscribe(),this.billableSub&&this.billableSub.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](U.a),i["\u0275\u0275directiveInject"]($.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-admin-role-limit-checker"]],inputs:{ignoreRole:"ignoreRole",pendingUsers:"pendingUsers",updatingRole:"updatingRole",checkedRole:"checkedRole"},outputs:{reachedLimit:"reachedLimit"},decls:0,vars:0,template:function(e,t){},styles:[""],changeDetection:0}),e})();var Q=n("g1Mv");let Z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[Q.b,r.c]]}),e})();var J=n("7Tcv"),K=n("1uLP"),X=n("LvDl"),ee=n("5km/"),te=n("NG82"),ne=n("vAI6"),re=n("QPZY"),ie=n("mI3D"),oe=n("S8Pw"),ae=n("Cnb3"),se=n("Ggka"),le=n("UWMR"),ce=n("iInd"),de=n("iELJ"),me=n("IPaV"),ge=n("jNxq"),pe=n("tqRt"),ue=n("oeMW"),he=n("QWb5"),fe=n("HSxi"),ve=n("jbKS"),Ce=n("2Vo4"),be=n("s8Ph");class Pe{constructor(e,t){this.protoService=e,this.personHash=t,this._permissions=new Map}get(e){return Object(I.a)(this,void 0,void 0,(function*(){return this._permissions.has(e)?this._permissions.get(e).getValue():null}))}observe(e){return this._ensurePermObs(e).asObservable()}set(e,t){return Object(I.a)(this,void 0,void 0,(function*(){const n=this._ensurePermObs(e),r=new ve.SetPermissionOverrideRequest;r.setPersonHash(this.personHash),r.setPermission(e),r.setPermissionOverride(t),yield this.protoService.setPermissionOverride(r),n.next(t)}))}unset(e){return Object(I.a)(this,void 0,void 0,(function*(){const t=this._ensurePermObs(e),n=new ve.UnsetPermissionOverrideRequest;n.setPersonHash(this.personHash),n.setPermission(e),yield this.protoService.unsetPermissionOverride(n),t.next(null)}))}reload(){return Object(I.a)(this,void 0,void 0,(function*(){const e=new ve.GetPermissionOverridesRequest;e.setPersonHash(this.personHash);const t=(yield this.protoService.getPermissionOverrides(e)).getOverridePermissionsMap(),n=Array.from(this._permissions.keys()),r=[];t.forEach((e,t)=>{r.push(t);const n=this._ensurePermObs(t);n.getValue()!==e&&n.next(e)});const i=X.difference(r,n);for(const o of i)this._permissions.has(o)&&this._permissions.get(o).next(null)}))}clear(){this._permissions.forEach(e=>{e.complete()}),this._permissions.clear()}_ensurePermObs(e){return this._permissions.has(e)||this._permissions.set(e,new Ce.a(null)),this._permissions.get(e)}}let Me=(()=>{class e{constructor(e){this.protoService=e}personPermissionOverrides(e,t){const n=new Pe(this.protoService,e);return n.reload().then(()=>{t&&t(null)},e=>{if(!t)throw e;t(e)}),n}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](be.PermissionOverrideAdmin))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var xe=n("3qIc"),ye=n("BxgO"),Oe=n("i1AJ"),_e=n("v3UH"),Se=n("3/G9"),we=n("9QcJ"),Ie=n("TcST"),Ee=n("UhP/"),ke=n("5xcx"),Fe=n("EEb0"),Te=n("ifhk"),Re=n("85oS"),je=n("dhKc"),De=n("yWQT"),Ne=n("+060"),Be=n("uplL"),Ae=n("sj4O"),Le=n("Fudl"),ze=n("GNNB");const He=["form"],Ve=["password"],We=["passwordElement"],Ge=["overridesForm"];function qe(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"mg-overlay-nav-item",47),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onOverlayPrevious()})),i["\u0275\u0275text"](2," Cancel "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"mg-overlay-nav-item",48),i["\u0275\u0275text"](4," Save "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function Ue(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",49),i["\u0275\u0275elementStart"](1,"div",50),i["\u0275\u0275element"](2,"mg-spinner",51),i["\u0275\u0275elementStart"](3,"p"),i["\u0275\u0275text"](4),i["\u0275\u0275pipe"](5,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](5,1,"loading")," "))}function $e(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span",53),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"people.archiveFormSubtitle")))}function Ye(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"br"),i["\u0275\u0275template"](4,$e,3,3,"span",52),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,2,"people.editPersonTitle")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",e.archived)}}function Qe(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"people.createPersonTitle")))}function Ze(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"input.firstName.error.maxlength")," "))}function Je(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"input.firstName.error.required")," "))}function Ke(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"input.firstName.error.pattern")," "))}function Xe(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"input.lastName.error.required")," "))}function et(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"input.lastName.error.maxlength")," "))}function tt(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"input.lastName.error.pattern")," "))}function nt(e,t){1&e&&i["\u0275\u0275element"](0,"mg-spinner",54),2&e&&i["\u0275\u0275property"]("diameter",16)("thickness",3)}function rt(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mg-icon",55),i["\u0275\u0275text"](1,"warning-o"),i["\u0275\u0275elementEnd"]())}function it(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"input.email.error.emailTaken")," "))}function ot(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"input.email.error.required")," "))}function at(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",25),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275property"]("value",e),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e," ")}}function st(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"mat-form-field",27),i["\u0275\u0275elementStart"](2,"mat-label"),i["\u0275\u0275text"](3,"ID Field 1"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"input",56),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().fields.idField1=t}))("ngModelChange",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().checkPristine()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngModel",e.fields.idField1)}}function lt(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"mat-form-field",27),i["\u0275\u0275elementStart"](2,"mat-label"),i["\u0275\u0275text"](3,"ID Field 2"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"input",57),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().fields.idField2=t}))("ngModelChange",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().checkPristine()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngModel",e.fields.idField2)}}function ct(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" Sorry, that's not a real phone number ",i["\u0275\u0275pipeBind1"](2,1,"input.phone.error.format")," "))}function dt(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",25),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275property"]("value",e.hash),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.name," ")}}function mt(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-form-field",27),i["\u0275\u0275elementStart"](1,"mat-label"),i["\u0275\u0275text"](2,"Schools"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"mat-select",58),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().fields.parentGroups=t}))("ngModelChange",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().checkPristine()})),i["\u0275\u0275template"](4,dt,2,2,"mat-option",26),i["\u0275\u0275pipe"](5,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("multiple",!0)("ngModel",e.fields.parentGroups),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](5,3,e.parentGroups$))}}function gt(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mg-pin",59,60),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().fields.pin=t}))("ngModelChange",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().checkPristine()})),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngModel",e.fields.pin)("disabled",!0)("unique",e.initialFields.pin||e.fields.pin)}}function pt(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mg-form-toggle",61),i["\u0275\u0275listener"]("valueChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().changeDisableDM(t)})),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",e.fields.disabledDM)}}function ut(e,t){if(1&e&&i["\u0275\u0275element"](0,"mg-person-permission-override-field",65),2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("permission",e.MingaPermission.CONTENT_SMS_MESSAGE_CREATE)}}function ht(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mg-person-permission-overrides-form",62,63),i["\u0275\u0275template"](2,ut,1,1,"mg-person-permission-override-field",64),i["\u0275\u0275pipe"](3,"async"),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("permissionOverrides",e.permOverrides),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](3,2,e.smsExpansionEnabled$))}}function ft(e){return!["pin"].includes(e[0])}let vt=(()=>{class e{constructor(e,t,n,r,i,o,a,s,l,c,d,m,g,p){this.peopleManagerService=e,this.snackBar=t,this.router=n,this.dialog=r,this.route=i,this.errorReporting=o,this.streamManager=a,this.store=s,this.mingaStore=l,this.rolesService=c,this.gradesService=d,this.permissionOverrideAdmin=g,this._settingService=p,this._leaving=!1,this.MingaPermission=ae.MingaPermission,this.editing=!1,this.mingaNameT="",this.personHash="",this.fields=te.b.defaultValue(),this.initialFields=te.b.defaultValue(),this.validForm=!1,this.loading=!0,this.people=null,this.person=null,this.editingPassword=!1,this.disableBlurPasswordEvent=!1,this.unsavedPassword=!1,this.confirmPasswordDialogRef=null,this.currentTime=Date.now(),this.currentDate=new Date,this.archived=!1,this.customDisplayName=!1,this.hasPassword=!1,this.showSMS=!1,this.allowedSMS=!1,this.mingaHash="",this.personUniqueHash=new re.UniqueHash,this.showGradeField=!0,this.showStudentIdField=!0,this.gradesInitialized=!1,this.permOverrides=null,this.districtFeatureEnabled$=l.observeDistrictFeatureEnabled(),this.parentGroups$=m.getParentGroups(),this.isStudentIdEnabled$=this._settingService.isIdModuleEnabled(),this.smsExpansionEnabled$=this._settingService.isSMSModuleEnabled(),this.showCustomIdField1$=this._settingService.getSettingValueObs(ae.mingaSettingTypes.ID_SHOW_ID_FIELD_1),this.showCustomIdField2$=this._settingService.getSettingValueObs(ae.mingaSettingTypes.ID_SHOW_ID_FIELD_2),this.gradeOptions$=d.grades$}get disableSavePassword(){return!this.form||!this.form.controls[`personFormPassword-${this.currentTime}`]||!this.fields.password||this.form.controls[`personFormPassword-${this.currentTime}`].invalid}onAdminRoleReachedLimit(){this.fields.accountRoleType=this.initialFields.accountRoleType}initGradeOptions(){return Object(I.a)(this,void 0,void 0,(function*(){yield this.gradesService.fetchIfNeeded()}))}getFormControlErrorKey(e){if(this.form&&this.form.controls[e]){const t=this.form.controls[e];return t.errors?Object.keys(t.errors)[0]:""}return""}ngOnInit(){this.form&&(this.form.form.addControl("parentEmail",new o.h([],se.a.allValuesAsEmailsValidator)),this.form.form.addControl("parentPhone",new o.h([],se.a.allValuesAsPhoneNumbersValidator)),this.form.form.addControl("enableParentNotification",new o.h(!0)),this.form.form.addControl("disabledDM",new o.h(!0))),this.route.params.subscribe(e=>{this.personHash=e.hash||"","hash"in e?(this.getPerson(e.hash),this.editing=!0,this.mingaHash="mingaHash"in e?e.mingaHash:""):"mingaHash"in e?(this.editing=!1,this.loading=!1,this.mingaHash=e.mingaHash):(this.editing=!1,this.loading=!1,this.mingaHash=""),this.editing&&this.initPermissionOverrides()}),this._settingService.getModuleEnabled(oe.IMingaFeatureToggleKeys.SMS_ENABLED).then(e=>{e?this.allowedSMS=!0:this.showSMS=!1})}onPhoneNumberStatusChange(e){const t=e&&e.status||"";"VALID"!==t||!this.fields.phoneNumber||this.showSMS||this.hasPassword?"VALID"===t&&this.fields.phoneNumber||(this.showSMS=!1):this.showSMS=!0,this.checkPristine()}ngOnDestroy(){var e;null===(e=this.permOverrides)||void 0===e||e.clear()}onBeforeUnload(e){let t=this.preventNavigation();if(t)return e.returnValue=t,t}onOverlayPrevious(){return Object(I.a)(this,void 0,void 0,(function*(){yield this._closeOverlay()}))}brithdateChanged(){}preventNavigation(){return this.form.dirty&&!this._leaving&&this.hasChangedFields()?"You have unsaved changes. Are you sure you want to leave?":""}addGroup(){this.fields.groups.push(""),this.snackMessage("Person created!")}removeGroup(e){this.fields.groups.splice(e,1)}snackTryAgain(e){this.snackBar.open(e).onAction().subscribe(()=>{this.submit()})}snackMessage(e){this.snackBar.open(e)}onFormKeyPress(e){13!=e.keyCode||this.editing||(e.preventDefault(),this.submit())}onPasswordKeyPress(e){this.disableBlurPasswordEvent=!1,13==e.keyCode&&this.editing&&(e.preventDefault(),this.savePassword(null))}onPasswordBlur(e){!this.disableBlurPasswordEvent&&this.editingPassword&&this.passwordInput.valid&&this.passwordInput.value&&this.confirmPassword(null)}confirmPassword(e){e&&e.preventDefault(),this.confirmPasswordDialogRef||(this.confirmPasswordDialogRef=this.dialog.open(b.a,{data:{text:"dialog.passwordConfirm"}}),this.confirmPasswordDialogRef.afterClosed().subscribe(e=>{this.confirmPasswordDialogRef=null,!0===e?this.savePassword(null):this.passwordInputElementRef.inputElementRef.nativeElement.focus()})),this.disableBlurPasswordEvent=!1}editPassword(){this.editingPassword=!0,this.unsavedPassword=!0}savePassword(e){this.disableBlurPasswordEvent=!0,e&&e.preventDefault();let t=this.person.getIdentity().getHash();this.passwordInput.valueAccessor.savePassword(t).then(()=>{this.editingPassword=!1,this.unsavedPassword=!1,this.disableBlurPasswordEvent=!1})}cancelPasswordEdit(e){this.disableBlurPasswordEvent=!0,e&&e.preventDefault(),this.unsavedPassword=!1,this.editingPassword=!1,this.passwordInput.valueAccessor.cancelEdit()}getPerson(e){return Object(I.a)(this,void 0,void 0,(function*(){let t=()=>(this.snackBar.open(`Error occurred while loading person (id: ${e})`,"dismiss",{disableDuration:!0}),this._closeOverlay(),this.loading=!1,this.errorReporting.sendErrorReport("client PersonForm.component",`getPerson() failed for hash: ${e}`,ie.errorPriority.WARN),[]);try{let n=[e],r=yield this.peopleManagerService.readPeople(n);if(r.length)return this.person=r[0],this.initEditPerson(r[0]),this.loading=!1,this.person;console.warn("[PersonForm]getPerson() no people found"),t()}catch(n){t()}}))}initEditPerson(e){if(this.person){const e=this.person.getIdentity(),t=this.person.getAccount();if(this.personUniqueHash=e.getHash(),this.fields.active=this.person.getActive(),this.fields.firstname=e.getFirstName(),this.fields.lastname=e.getLastName(),this.fields.email=e.getEmailAddress(),this.fields.pin=e.getPin(),this.fields.studentId=e.getStudentId(),this.fields.grade=t.getGrade(),this.fields.phoneNumber=e.getPhoneNumber(),this.fields.parentGroups=this.person.getParentGroupList(),this.hasPassword=!!e.getHasPassword(),!this.hasPassword&&this.fields.phoneNumber&&this.allowedSMS&&(this.showSMS=!0),this.fields.accountRoleType=this.person.getAccountRoleType(),this.archived=!!this.person.getArchived(),this.person.hasBirthdate()){const e=this.person.getBirthdate(),t=new Date(Date.UTC(e.getYear(),e.getMonth()-1,e.getDay(),(new Date).getTimezoneOffset()/60));this.fields.birthdate=t}else this.fields.birthdate=null;t&&(this.fields.displayName=t.getDisplayName(),this.customDisplayName=!!t.getCustomDisplayName(),this.fields.disabledDM=t.getDisabledDm(),this.fields.asbMember=t.getAsb(),this.fields.idField1=t.getIdField1()||"",this.fields.idField2=t.getIdField2()||"",this.fields.parentEmail=t.getParentEmailList()||[],this.fields.parentPhone=t.getParentPhoneList()||[],this.fields.enableParentNotification=!t.getDisableParentNotification()||!1,this.EMAIL_OPTIONS=[],this.fields.parentEmail.forEach(e=>{this.EMAIL_OPTIONS.push({value:e,label:e})}),this.PHONE_OPTIONS=[],this.fields.parentPhone.forEach(e=>{this.PHONE_OPTIONS.push({value:e,label:e})})),this.initialFields=X.cloneDeep(this.fields),setTimeout(()=>this.checkPristine())}else this.errorReporting.sendErrorReport("client PersonForm.component","initEditPerson() has no person",ie.errorPriority.WARN)}checkPristine(){this.form&&(this.hasChangedFields()||this.form.control.markAsPristine())}updateForm(){return Object(I.a)(this,void 0,void 0,(function*(){this.checkPristine(),this.gradesInitialized||(yield this.initGradeOptions(),this.gradesInitialized=!0)}))}cancel(){this._leaving=!0,this._closeOverlay()}_closeOverlay(){return this.router.navigate(this.mingaHash?["",{outlets:{o:["minga","update",this.mingaHash]}}]:["",{outlets:{o:null}}])}onOverlayClose(){return Object(I.a)(this,void 0,void 0,(function*(){return!0}))}_submitNew(){this.peopleManagerService.createPeople(this.fields).then(e=>Object(I.a)(this,void 0,void 0,(function*(){if(e.getStatus()==re.StatusCode.OK)this.snackMessage("Person added successfully!"),this._leaving=!0,yield this._closeOverlay();else{let t=e.toObject();const n=e.getReasonList()[0].getMessage();console.warn("[PersonForm]submit() non OK response",t),this.snackTryAgain(n)}this.loading=!1,yield this.streamManager.restartStreamIfAvailable("AdminPeopleFeed"),this.store.dispatch(new ne.a.PeopleUpdated)}))).catch(e=>{console.error("Create Person Error:",e),this.loading=!1,this.snackTryAgain(`ERROR (${e.code})`)})}getControlNameFromFieldName(e){return"password"!=e?e:"personFormPassword-"+this.currentTime}_getUpdateFormFields(){const e={},t=te.b.entries(this.fields).filter(ft);for(const[n,r]of t)if("parentGroups"===n){const t=X.differenceWith(r,this.initialFields.parentGroups,X.isEqual),n=X.differenceWith(this.initialFields.parentGroups,r,X.isEqual);e.newParentGroups=t,e.removeParentGroups=n}else if("parentEmail"!==n||X.isEqual(this.initialFields.parentEmail,r))if("parentPhone"!==n||X.isEqual(this.initialFields.parentPhone,r)){if("disabledDM"===n)e.disabledDM=r;else if("enableParentNotification"===n)e.enableParentNotification=r;else if(!X.isEqual(this.initialFields[n],r)){const t=this.getControlNameFromFieldName(n),i=this.form.controls[t];i&&!i.pristine&&(e[n]=r||"")}}else e.parentPhone=r;else e.parentEmail=r;return e}hasChangedFields(){const e=te.b.entries(this.fields).filter(ft);for(const[t,n]of e)if(!X.isEqual(this.initialFields[t],n)){const e=this.getControlNameFromFieldName(t),n=this.form.controls[e];if(n&&!n.pristine)return!0}return!1}_submitUpdate(){return Object(I.a)(this,void 0,void 0,(function*(){const e=this._getUpdateFormFields(),t=Object.keys(e).length>0;yield this.peopleManagerService.updatePerson(e,this.personUniqueHash).then(e=>{if(e.getStatus()==re.StatusCode.OK){let e="";e=t?"Person updated!":"No new changes to apply.",this.snackMessage(e),this._leaving=!0,this._closeOverlay()}else{let t=e.toObject();console.warn("[PersonForm]submit() update had non OK response",t),this.snackTryAgain("Unable to update person")}this.loading=!1,this.streamManager.restartStreamIfAvailable("AdminPeopleFeed"),this.store.dispatch(new ne.a.PeopleUpdated)}).catch(e=>{console.error("Update Person Error:",e),this.loading=!1,this.snackTryAgain(`ERROR (${e.code})`)})}))}submit(e){if(e&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()),!this.form.valid)return this.form.control.markAllAsTouched(),void this.snackMessage("Form invalid. Cannot save person");this.loading=!0,this.mingaHash&&(this.fields.mingaHash=this.mingaHash),this.editing?this._submitUpdate():this._submitNew()}getStatusDone(e){const t=this.form.controls[e];return t&&(this.editing&&t.valid||t.dirty&&t.valid)}getStatusInvalid(e){const t=this.form.controls[e];return t&&t.dirty&&t.invalid}getStatusPending(e){const t=this.form.controls[e];return t&&t.pending}deletePerson(e){return Object(I.a)(this,void 0,void 0,(function*(){e&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()),this.loading=!0,this.dialog.open(ee.d,{data:{matchString:this.initialFields.firstname+" "+this.initialFields.lastname,placeholderLocaleValue:"Person's Name",titleLocaleValue:"Person"}}).afterClosed().subscribe(e=>Object(I.a)(this,void 0,void 0,(function*(){!0===e&&((yield this.peopleManagerService.deletePerson(this.personHash)).getStatus()==re.StatusCode.OK?(yield this.streamManager.restartStreamIfAvailable("AdminPeopleFeed"),this.store.dispatch(new ne.a.PeopleUpdated),this.snackBar.open("person was deleted successfully"),yield this._closeOverlay()):this.snackBar.open("Failed to delete person")),this.loading=!1})))}))}archivePerson(e){return Object(I.a)(this,void 0,void 0,(function*(){e&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()),this.loading=!0,this.dialog.open(b.a,{data:{text:"dialog.archivePerson",saveButtonLocale:"button.archive",textParams:this.initialFields.firstname+" "+this.initialFields.lastname}}).afterClosed().subscribe(e=>Object(I.a)(this,void 0,void 0,(function*(){!0===e&&((yield this.peopleManagerService.archivePerson(this.personHash)).getStatus()==re.StatusCode.OK?(yield this.streamManager.restartStreamIfAvailable("AdminPeopleFeed"),this.store.dispatch(new ne.a.PeopleUpdated),this.snackBar.open("person archived successfully"),yield this._closeOverlay()):this.snackBar.open("oops, an error occurred, please try again.")),this.loading=!1})))}))}initPermissionOverrides(){this.permOverrides=this.permissionOverrideAdmin.personPermissionOverrides(this.personHash)}addNew(e){return{label:e,value:e}}changeParentEmailType(e){return Object(I.a)(this,void 0,void 0,(function*(){this.fields.parentEmail=e,this.form.form.get("parentEmail").setValue(e)}))}changeParentPhoneType(e){return Object(I.a)(this,void 0,void 0,(function*(){this.fields.parentPhone=e,this.form.form.get("parentPhone").setValue(e)}))}changeDisableDM(e){return Object(I.a)(this,void 0,void 0,(function*(){this.fields.disabledDM=e,this.form.form.get("disabledDM").setValue(e)}))}changeEnableParentNofitication(e){return Object(I.a)(this,void 0,void 0,(function*(){this.fields.enableParentNotification=e,this.form.form.get("enableParentNotification").setValue(e)}))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](te.a),i["\u0275\u0275directiveInject"](le.b),i["\u0275\u0275directiveInject"](ce.g),i["\u0275\u0275directiveInject"](de.b),i["\u0275\u0275directiveInject"](ce.a),i["\u0275\u0275directiveInject"](me.a),i["\u0275\u0275directiveInject"](ge.a),i["\u0275\u0275directiveInject"](pe.i),i["\u0275\u0275directiveInject"](ue.a),i["\u0275\u0275directiveInject"](U.a),i["\u0275\u0275directiveInject"](he.b),i["\u0275\u0275directiveInject"](fe.b),i["\u0275\u0275directiveInject"](Me),i["\u0275\u0275directiveInject"](xe.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-person-form"]],viewQuery:function(e,t){if(1&e&&(i["\u0275\u0275viewQuery"](He,3,o.v),i["\u0275\u0275viewQuery"](Ve,3),i["\u0275\u0275viewQuery"](We,3),i["\u0275\u0275viewQuery"](Ge,1,A)),2&e){let e;i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.form=e.first),i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.passwordInput=e.first),i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.passwordInputElementRef=e.first),i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.overridesForm=e.first)}},hostBindings:function(e,t){1&e&&i["\u0275\u0275listener"]("beforeunload",(function(e){return t.onBeforeUnload(e)}),!1,i["\u0275\u0275resolveWindow"])},decls:90,vars:101,consts:[[4,"mgOverlayStructure","mgOverlayStructureRegion"],["class","loader",4,"ngIf"],["id","personForm",3,"autocomplete","submit","keypress"],["form","ngForm"],["type","text",1,"input-hidden",3,"autocomplete","name"],["type","hidden","autocomplete","off"],[1,"form-block","mg-minicopy"],[1,"title-text","mg-headline",3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"input-wrapper"],[1,"flex","flex-col"],["mgFormField","","hideRequiredMarker",""],["type","text","name","firstname","autocomplete","off","matInput","","maxlength","50","mgFirstNameValidator","",3,"ngModel","required","ngModelChange"],["firstname","ngModel"],[4,"ngIf"],["type","text","name","lastname","autocomplete","off","matInput","","mgLastNameValidator","","maxlength","50",3,"ngModel","required","ngModelChange"],["lastname","ngModel"],["matSuffix","",3,"diameter","thickness",4,"ngIf"],["matSuffix","",4,"ngIf"],["type","email","matInput","","name","email","autocomplete","off","mgEmailValidator","",3,"mgUniqueEmail","required","ngModel","ngModelChange"],["emailInput","ngModel"],[1,"flex","flex-row"],["mgFormField","",1,"grade"],["name","grade",3,"ngModel","ngModelChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["mgFormField",""],["matInput","","type","text","name","studentId","maxlength","20",3,"ngModel","ngModelChange"],["matInput","","type","text","name","phoneNumber","maxlength","13","mgPhoneNumberValidator","",3,"ngModel","ngModelChange"],["phoneNumberModel","ngModel"],["mgFormField","",4,"ngIf"],["name","accountRoleType","mgApperance","outline",1,"role",3,"required","ngModel","ngModelChange","displayNameFormat"],[3,"updatingRole","ignoreRole","checkedRole","reachedLimit"],["datePlaceholder","Birthday","name","birthdate",3,"utc","canReset","ngModel","maxDate","dateOnly","ngModelChange"],["minlength","4","maxlength","55","name","displayName",3,"showOnlyWithRole","hasRole","firstName","lastName","statusPending","statusTouched","inputControlError","ngModel","custom","displayNameFormat","required","ngModelChange","customChange"],["floatLabel","never",3,"required","ngModel","editMode","name","editClick","initialUnset","ngModelChange","keypress"],["password","ngModel","passwordElement",""],["required","true","name","pin",3,"ngModel","disabled","unique","ngModelChange",4,"ngIf"],["appendTo","body",3,"placeholder","value","closeOnSelect","multiple","addTag","addTagText","searchable","hideSelected","options","selectionChanged"],[1,"checkbox-container"],["label","Send behavior notification to parent",3,"value","valueChange"],["label","Disable direct messaging",3,"value","valueChange",4,"ngIf"],[1,"divide"],[1,"realtime-update-area"],[3,"permissionOverrides",4,"ngIf"],[1,"info-help-box","small-user-content-page"],["icon","close",1,"mg-align-left",3,"click"],["icon","save-o","formId","personForm","buttonType","submit",1,"mg-align-right"],[1,"loader"],[1,"loader-content"],["color","primary","mode","indeterminate"],["class","title-subtitle mg-minicopy",4,"ngIf"],[1,"title-subtitle","mg-minicopy"],["matSuffix","",3,"diameter","thickness"],["matSuffix",""],["matInput","","type","text","name","idField1","maxlength","20",3,"ngModel","ngModelChange"],["matInput","","type","text","name","idField2","maxlength","20",3,"ngModel","ngModelChange"],["name","parentGroups",3,"multiple","ngModel","ngModelChange"],["required","true","name","pin",3,"ngModel","disabled","unique","ngModelChange"],["pinInput","ngModel"],["label","Disable direct messaging",3,"value","valueChange"],[3,"permissionOverrides"],["overridesForm",""],["label","Can Send SMS Messages",3,"permission",4,"ngIf"],["label","Can Send SMS Messages",3,"permission"]],template:function(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275template"](0,qe,5,0,"div",0),i["\u0275\u0275template"](1,Ue,6,3,"div",1),i["\u0275\u0275elementStart"](2,"form",2,3),i["\u0275\u0275listener"]("submit",(function(e){return t.submit(e)}))("keypress",(function(e){return t.onFormKeyPress(e)})),i["\u0275\u0275element"](4,"input",4),i["\u0275\u0275element"](5,"input",5),i["\u0275\u0275elementStart"](6,"div",6),i["\u0275\u0275elementStart"](7,"p",7),i["\u0275\u0275template"](8,Ye,5,4,"span",8),i["\u0275\u0275template"](9,Qe,3,3,"span",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"div",10),i["\u0275\u0275elementStart"](11,"div",11),i["\u0275\u0275elementStart"](12,"mat-form-field",12),i["\u0275\u0275elementStart"](13,"mat-label"),i["\u0275\u0275text"](14,"First Name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](15,"input",13,14),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.fields.firstname=e}))("ngModelChange",(function(){return t.checkPristine()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](17,"mat-hint"),i["\u0275\u0275text"](18),i["\u0275\u0275pipe"](19,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](20,Ze,3,3,"mat-error",15),i["\u0275\u0275template"](21,Je,3,3,"mat-error",15),i["\u0275\u0275template"](22,Ke,3,3,"mat-error",15),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](23,"mat-form-field",12),i["\u0275\u0275elementStart"](24,"mat-label"),i["\u0275\u0275text"](25,"Last Name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](26,"input",16,17),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.fields.lastname=e}))("ngModelChange",(function(){return t.checkPristine()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](28,"mat-hint"),i["\u0275\u0275text"](29),i["\u0275\u0275pipe"](30,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](31,Xe,3,3,"mat-error",15),i["\u0275\u0275template"](32,et,3,3,"mat-error",15),i["\u0275\u0275template"](33,tt,3,3,"mat-error",15),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](34,"mat-form-field",12),i["\u0275\u0275elementStart"](35,"mat-label"),i["\u0275\u0275text"](36,"Email Address"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](37,nt,1,2,"mg-spinner",18),i["\u0275\u0275template"](38,rt,2,0,"mg-icon",19),i["\u0275\u0275elementStart"](39,"input",20,21),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.fields.email=e}))("ngModelChange",(function(){return t.checkPristine()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](41,"mat-hint"),i["\u0275\u0275text"](42),i["\u0275\u0275pipe"](43,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](44,it,3,3,"mat-error",15),i["\u0275\u0275template"](45,ot,3,3,"mat-error",15),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](46,"div",22),i["\u0275\u0275elementStart"](47,"mat-form-field",23),i["\u0275\u0275elementStart"](48,"mat-label"),i["\u0275\u0275text"](49,"Grade"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](50,"mat-select",24),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.fields.grade=e}))("ngModelChange",(function(){return t.checkPristine()})),i["\u0275\u0275elementStart"](51,"mat-option",25),i["\u0275\u0275text"](52,"None"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](53,at,2,2,"mat-option",26),i["\u0275\u0275pipe"](54,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](55,"mat-form-field",27),i["\u0275\u0275elementStart"](56,"mat-label"),i["\u0275\u0275text"](57,"ID Number"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](58,"input",28),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.fields.studentId=e}))("ngModelChange",(function(){return t.checkPristine()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](59,st,5,1,"div",15),i["\u0275\u0275pipe"](60,"async"),i["\u0275\u0275template"](61,lt,5,1,"div",15),i["\u0275\u0275pipe"](62,"async"),i["\u0275\u0275elementStart"](63,"mat-form-field",27),i["\u0275\u0275elementStart"](64,"mat-label"),i["\u0275\u0275text"](65,"Phone Number"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](66,"input",29,30),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.fields.phoneNumber=e}))("ngModelChange",(function(){i["\u0275\u0275restoreView"](e);const n=i["\u0275\u0275reference"](67);return t.onPhoneNumberStatusChange(n)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](68,ct,3,3,"mat-error",15),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](69,mt,6,5,"mat-form-field",31),i["\u0275\u0275pipe"](70,"async"),i["\u0275\u0275elementStart"](71,"div",22),i["\u0275\u0275elementStart"](72,"mg-role-select",32),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.fields.accountRoleType=e}))("ngModelChange",(function(){return t.updateForm()}))("displayNameFormat",(function(e){return t.displayNameFormat=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](73,"mg-admin-role-limit-checker",33),i["\u0275\u0275listener"]("reachedLimit",(function(){return t.onAdminRoleReachedLimit()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](74,"mg-date-time-picker",34),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.fields.birthdate=e}))("ngModelChange",(function(){return t.checkPristine()}))("ngModelChange",(function(){return t.brithdateChanged()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](75,"mg-display-name",35),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.fields.displayName=e}))("ngModelChange",(function(){return t.checkPristine()}))("customChange",(function(e){return t.customDisplayName=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](76,"mg-password",36,37),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.fields.password=e}))("ngModelChange",(function(){return t.checkPristine()}))("keypress",(function(e){return t.onPasswordKeyPress(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](79,gt,2,3,"mg-pin",38),i["\u0275\u0275elementStart"](80,"mg-form-select",39),i["\u0275\u0275listener"]("selectionChanged",(function(e){return t.changeParentEmailType(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](81,"mg-form-select",39),i["\u0275\u0275listener"]("selectionChanged",(function(e){return t.changeParentPhoneType(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](82,"div",40),i["\u0275\u0275elementStart"](83,"mg-form-toggle",41),i["\u0275\u0275listener"]("valueChange",(function(e){return t.changeEnableParentNofitication(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](84,pt,1,1,"mg-form-toggle",42),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](85,"div",43),i["\u0275\u0275elementStart"](86,"div",44),i["\u0275\u0275template"](87,ht,4,4,"mg-person-permission-overrides-form",45),i["\u0275\u0275elementStart"](88,"p",46),i["\u0275\u0275text"](89," SMS message status updates immediately. Clicking save is not necessary. "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275reference"](3),n=i["\u0275\u0275reference"](16),r=i["\u0275\u0275reference"](27),o=i["\u0275\u0275reference"](40),a=i["\u0275\u0275reference"](67);i["\u0275\u0275property"]("mgOverlayStructure",!0)("mgOverlayStructureRegion","top"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.loading),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("autocomplete","person-form-off-"+t.currentTime),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("autocomplete","hidden-input-off-"+t.currentTime)("name","personFormhidden-"+t.currentTime),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngSwitch",t.editing),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",!0),i["\u0275\u0275advance"](7),i["\u0275\u0275property"]("ngModel",t.fields.firstname)("required",!0),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](19,87,"input.firstName.hint")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",null==n||null==n.errors?null:n.errors.maxlength),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",null==n||null==n.errors?null:n.errors.required),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",null==n||null==n.errors?null:n.errors.invalidFirstName),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngModel",t.fields.lastname)("required",!0),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](30,89,"input.lastName.hint")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",null==r||null==r.errors?null:r.errors.required),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",null==r||null==r.errors?null:r.errors.maxlength),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",null==r||null==r.errors?null:r.errors.invalidLastName),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",o.pending),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",null==o||null==o.errors?null:o.errors.emailTaken),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("mgUniqueEmail",t.initialFields.email||!0)("required",!0)("ngModel",t.fields.email),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](43,91,"input.email.hint")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",null==o||null==o.errors?null:o.errors.emailTaken),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",null==o||null==o.errors?null:o.errors.required),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngModel",t.fields.grade),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](54,93,t.gradeOptions$)),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngModel",t.fields.studentId),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](60,95,t.showCustomIdField1$)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](62,97,t.showCustomIdField2$)),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngModel",t.fields.phoneNumber),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",null==a||null==a.errors?null:a.errors.invalidPhoneNumber),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](70,99,t.districtFeatureEnabled$)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("required",!0)("ngModel",t.fields.accountRoleType),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("updatingRole",t.editing)("ignoreRole",t.initialFields.accountRoleType)("checkedRole",t.fields.accountRoleType),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("utc",!0)("canReset",!0)("ngModel",t.fields.birthdate)("maxDate",t.currentDate)("dateOnly",!0),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("showOnlyWithRole",!0)("hasRole",!!t.fields.accountRoleType)("firstName",t.fields.firstname)("lastName",t.fields.lastname)("statusPending",null==e.controls||null==e.controls.displayName?null:e.controls.displayName.pending)("statusTouched",null==e.controls||null==e.controls.displayName?null:e.controls.displayName.touched)("inputControlError",t.getFormControlErrorKey("displayName"))("ngModel",t.fields.displayName)("custom",t.customDisplayName)("displayNameFormat",t.displayNameFormat)("required",t.customDisplayName),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("required",t.hasPassword)("ngModel",t.fields.password)("editMode",t.editing)("name","personFormPassword-"+t.currentTime)("editClick",t.editPassword.bind(t))("initialUnset",!t.hasPassword),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",t.editing),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("placeholder","Parent Email Addresses (optional)")("value",t.fields.parentEmail)("closeOnSelect",!0)("multiple",!0)("addTag",t.addNew)("addTagText","Add email")("searchable",!0)("hideSelected",!1)("options",t.EMAIL_OPTIONS),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("placeholder","Parent Phone Numbers (optional)")("value",t.fields.parentPhone)("closeOnSelect",!0)("multiple",!0)("addTag",t.addNew)("addTagText","Add phone")("searchable",!0)("hideSelected",!1)("options",t.PHONE_OPTIONS),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("value",t.fields.enableParentNotification),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.editing),i["\u0275\u0275advance"](2),i["\u0275\u0275styleProp"]("display",null!=t.overridesForm&&null!=t.overridesForm.options&&t.overridesForm.options.length?"":"none"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.personHash&&t.permOverrides)}},directives:[ye.a,r.o,o.E,o.u,o.v,r.q,r.r,r.s,s.d,Oe.a,s.h,l.b,o.d,o.n,_e.a,o.t,o.w,o.B,s.g,Se.a,we.a,Ie.a,c.a,Ee.m,r.n,ke.a,Fe.a,Y,Te.a,Re.a,o.o,je.b,De.a,Ne.a,Be.a,Ae.a,s.c,s.j,Le.a,ze.a,A,F],pipes:[m.d,r.b],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");form[_ngcontent-%COMP%]{color:#737373}.flex[_ngcontent-%COMP%]{display:inline-flex;width:100%}.flex-row[_ngcontent-%COMP%]{flex-direction:row}@media (max-width:599px){.flex-row[_ngcontent-%COMP%]{flex-direction:column}}.flex-col[_ngcontent-%COMP%]{flex-direction:column}.loader[_ngcontent-%COMP%]{position:absolute;z-index:2;top:0;right:0;left:0;bottom:0;background-color:hsla(0,0%,100%,.8)}.loader[_ngcontent-%COMP%]   .loader-content[_ngcontent-%COMP%]{position:absolute;top:50%;right:50%;transform:translateX(50%) translateY(-50%);text-align:center;color:#737373}.form-block[_ngcontent-%COMP%]{color:#737373;border-bottom:1px solid #ccc;padding:24px 16px}@media (min-width:600px){.form-block[_ngcontent-%COMP%]{padding:32px}}.form-block[_ngcontent-%COMP%]:last-child, .form-block[_ngcontent-%COMP%]:nth-last-child(2){border:none}.grade[_ngcontent-%COMP%], .role[_ngcontent-%COMP%]{margin-right:15px}.input-wrapper[_ngcontent-%COMP%]{display:inline-flex;flex-direction:row;width:100%}.add-group-block-title[_ngcontent-%COMP%]{position:relative}.add-group-block-title[_ngcontent-%COMP%]   .add-group-button[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);right:0}.asb-toggle[_ngcontent-%COMP%]{width:35%;min-width:220px;margin-bottom:calc(var(--hint-height, 14px) + 16px);margin-right:15px}.group-name-wrapper[_ngcontent-%COMP%]{position:relative}.group-name-wrapper[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{position:absolute;right:0;top:50%;transform:translateY(-65%)}.title-text[_ngcontent-%COMP%]{margin-top:0}.title-text[_ngcontent-%COMP%]   .float-actions[_ngcontent-%COMP%]{float:right}.title-text[_ngcontent-%COMP%]   .float-actions.buttons[_ngcontent-%COMP%]{float:left;margin-top:8px;margin-bottom:8px}.title-text[_ngcontent-%COMP%]   .float-actions.buttons[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-left:0}.title-text[_ngcontent-%COMP%]   .float-actions.buttons[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:last-child{margin-right:0}.title-text[_ngcontent-%COMP%]   .view-id-button-container[_ngcontent-%COMP%]{flex-basis:10%}.title-text[_ngcontent-%COMP%]   .view-id-button-container[_ngcontent-%COMP%]   .view-id-button[_ngcontent-%COMP%]{background-image:url(/assets/settings/settings_ids.svg);background-repeat:no-repeat;background-size:contain;height:65px;width:55px;cursor:pointer;margin:auto}.title-text[_ngcontent-%COMP%]   .archive-button[_ngcontent-%COMP%]{height:42px;width:100px;border-color:2px solid #036;background-color:initial;color:#036}@media (min-width:599px){.title-text[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.title-text[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:not(.float-actions){flex-basis:40%}}.title-subtitle[_ngcontent-%COMP%]{font-weight:400;color:#737373}.input-hidden[_ngcontent-%COMP%]{display:none}.resend-email-btn[_ngcontent-%COMP%]{margin-left:14px}.form-button[_ngcontent-%COMP%]{font-family:Muli,sans-serif;line-height:1.35}@media (orientation:landscape){.form-button[_ngcontent-%COMP%]{font-size:2.8985507246vh}}@media (orientation:portrait){.form-button[_ngcontent-%COMP%]{font-size:2.8985507246vw}}@media (orientation:landscape) and (max-height:414px){.form-button[_ngcontent-%COMP%]{font-size:12px}}@media (orientation:portrait) and (max-width:414px){.form-button[_ngcontent-%COMP%]{font-size:12px}}@media (min-width:448.5px){.form-button[_ngcontent-%COMP%]{font-size:13px}}.checkbox-container[_ngcontent-%COMP%]:last-of-type{margin-bottom:20px}.checkbox-item[_ngcontent-%COMP%]{width:50%}.checkbox-hint[_ngcontent-%COMP%]{margin-bottom:3em;width:90%}a[_ngcontent-%COMP%]{color:#93f;text-decoration:none}a[_ngcontent-%COMP%]:hover{text-decoration:underline}a.cancel-link[_ngcontent-%COMP%]{padding-right:1.5em}.realtime-update-area[_ngcontent-%COMP%]{padding:32px}.info-help-box[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;width:96%;padding:15px;border-radius:6px;background-color:#f5f5f5;margin:12px 0;color:#036;font-style:italic}.divide[_ngcontent-%COMP%]{border-top:1px solid #ccc;margin:0 32px}.birthdate[_ngcontent-%COMP%], .roll[_ngcontent-%COMP%]{display:flex}mg-form-select[_ngcontent-%COMP%]{margin-bottom:1.1764705882rem}']}),e})(),Ct=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[g.a,_.b,C.a,J.a,u.a,P.a,f.a,h.a,v.a,w.a,p.a,M.a,y.a,x.a,b.b,S.b,O.a,Z,d.b,z,K.a,r.c,o.m,m.c,a.b,s.f,l.c,c.b]]}),e})()},JjHu:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgramStreamManagerClient=t.ProgramStreamManager=void 0;const r=n("mXHK"),i=n("PYFZ");class o{}t.ProgramStreamManager=o,o.serviceName="minga.content.ProgramStreamManager",o.StreamPrograms={methodName:"StreamPrograms",service:o,requestStream:!1,responseStream:!0,requestType:i.StreamID,responseType:r.StreamProgramInfo},o.StreamProgramsControl={methodName:"StreamProgramsControl",service:o,requestStream:!1,responseStream:!1,requestType:i.StreamControl,responseType:i.StreamControlResponse},o.StreamProgramContent={methodName:"StreamProgramContent",service:o,requestStream:!1,responseStream:!0,requestType:i.StreamID,responseType:r.StreamProgramContentInfo},o.StreamProgramContentControl={methodName:"StreamProgramContentControl",service:o,requestStream:!1,responseStream:!1,requestType:i.StreamControl,responseType:i.StreamControlResponse},t.ProgramStreamManagerClient=class{streamPrograms(){throw new Error("minga_protoc_gen_improbable_eng_grpc_web client methods are unimplemented")}streamProgramsControl(){throw new Error("minga_protoc_gen_improbable_eng_grpc_web client methods are unimplemented")}streamProgramContent(){throw new Error("minga_protoc_gen_improbable_eng_grpc_web client methods are unimplemented")}streamProgramContentControl(){throw new Error("minga_protoc_gen_improbable_eng_grpc_web client methods are unimplemented")}}},LGJD:function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n("GNNB");var r=n("SVse"),i=n("8Y7J"),o=n("s7LF"),a=n("Q2Ze"),s=n("e6WT"),l=n("Tj54"),c=n("TSSN"),d=n("HxU+"),m=n("7Tcv");let g=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[d.a,m.a,r.c,o.m,o.A,a.f,s.c,l.b,c.c]]}),e})()},NW4y:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("bEel");function i(e){const t=e.value;return t&&!new r.a(t,"US").isValid()?{invalidPhoneNumber:!0}:null}},Ssrr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgramContextStreamManager=void 0,n("8Y7J");const r=n("qCKp"),i=n("+6wJ"),o=n("7jcR"),a=n("8Y7J");class s{constructor(e){this._ngZone=e}streamProgramContexts(e,t,n,a,s){let l,c,d,m,g;if("function"==typeof t?(d=t,m=n,g=a):"function"==typeof n?(c=t,d=n,m=a,g=s):c=t,d)m||(m=e=>console.error(e)),g||(g=(e,t,n)=>{});else{let e=new r.Subject;l=e.asObservable(),d=t=>{e.next(t)},m=t=>{e.error(t)},g=(t,n,r)=>{e.complete()}}let p=i.grpc.invoke(o.ProgramContextStreamManager.StreamProgramContexts,{request:e,host:window.DEFAULT_ANGULAR_GRPC_HOST||"https://"+location.hostname,metadata:c,onMessage:e=>this._ngZone.run(()=>{d(e)}),onEnd:(e,t,n)=>this._ngZone.run(()=>{if(e==i.grpc.Code.OK)g(e,t,n);else{let n=new Error(e+" "+(t||""));n.code=e,m(n)}})});return l.close=()=>(console.warn("[Angular Grpc] .close() is deprecated use .cancel() instead"),p.close()),l.cancel=()=>p.close(),l}streamProgramContextsControl(e,t,n){let r,a,s;"function"==typeof t?a=t:(s=t,a=n),a||(r=new Promise((e,t)=>{a=(n,r)=>{n?t(n):e(r)}}));let l=null,c=i.grpc.invoke(o.ProgramContextStreamManager.StreamProgramContextsControl,{request:e,host:window.DEFAULT_ANGULAR_GRPC_HOST||"https://"+location.hostname,metadata:s,onHeaders:e=>l=e,onMessage:e=>this._ngZone.run(()=>{a(null,e,l||new i.grpc.Metadata)}),onEnd:(e,t,n)=>this._ngZone.run(()=>{if(e!=i.grpc.Code.OK){let n=new Error(t);n.code=e,a(n)}})});return r.cancel=()=>c.close(),r}streamProgramContextContent(e,t,n,a,s){let l,c,d,m,g;if("function"==typeof t?(d=t,m=n,g=a):"function"==typeof n?(c=t,d=n,m=a,g=s):c=t,d)m||(m=e=>console.error(e)),g||(g=(e,t,n)=>{});else{let e=new r.Subject;l=e.asObservable(),d=t=>{e.next(t)},m=t=>{e.error(t)},g=(t,n,r)=>{e.complete()}}let p=i.grpc.invoke(o.ProgramContextStreamManager.StreamProgramContextContent,{request:e,host:window.DEFAULT_ANGULAR_GRPC_HOST||"https://"+location.hostname,metadata:c,onMessage:e=>this._ngZone.run(()=>{d(e)}),onEnd:(e,t,n)=>this._ngZone.run(()=>{if(e==i.grpc.Code.OK)g(e,t,n);else{let n=new Error(e+" "+(t||""));n.code=e,m(n)}})});return l.close=()=>(console.warn("[Angular Grpc] .close() is deprecated use .cancel() instead"),p.close()),l.cancel=()=>p.close(),l}streamProgramContextContentControl(e,t,n){let r,a,s;"function"==typeof t?a=t:(s=t,a=n),a||(r=new Promise((e,t)=>{a=(n,r)=>{n?t(n):e(r)}}));let l=null,c=i.grpc.invoke(o.ProgramContextStreamManager.StreamProgramContextContentControl,{request:e,host:window.DEFAULT_ANGULAR_GRPC_HOST||"https://"+location.hostname,metadata:s,onHeaders:e=>l=e,onMessage:e=>this._ngZone.run(()=>{a(null,e,l||new i.grpc.Metadata)}),onEnd:(e,t,n)=>this._ngZone.run(()=>{if(e!=i.grpc.Code.OK){let n=new Error(t);n.code=e,a(n)}})});return r.cancel=()=>c.close(),r}}t.ProgramContextStreamManager=s,s.\u0275fac=function(e){return new(e||s)(a.\u0275\u0275inject(a.NgZone))},s.\u0275prov=a.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"})},bCM0:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("8Y7J"),i=n("s7LF"),o=n("Q2Ze"),a=n("i1AJ"),s=n("e6WT"),l=n("Tj54");const c=["inputEl"],d={provide:i.r,useExisting:Object(r.forwardRef)(()=>m),multi:!0};let m=(()=>{class e{constructor(){this.value="",this.placeholder="Search",this.mgNoHintMargin=!1,this.blur=new r.EventEmitter}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}valueChange(e){this.onChange&&this.onChange(e),this.onTouched&&this.onTouched()}writeValue(e){"string"==typeof e?this.value=e:null===e?this.value="":console.warn("mg-stream unsupported write value:",e)}focus(){this.inputEl&&this.inputEl.nativeElement.focus()}hasFocus(){return!!this.inputEl&&document.activeElement===this.inputEl.nativeElement}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-search"]],viewQuery:function(e,t){if(1&e&&r["\u0275\u0275viewQuery"](c,3),2&e){let e;r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.inputEl=e.first)}},inputs:{placeholder:"placeholder",mgNoHintMargin:"mgNoHintMargin"},outputs:{blur:"blur"},features:[r["\u0275\u0275ProvidersFeature"]([d])],decls:5,vars:5,consts:[["mgFormField","","floatPlaceholder","never",3,"mgNoHintMargin"],["matInput","","type","text","autocomplete","off",3,"placeholder","ngModel","ngModelChange","blur"],["inputEl",""],["matSuffix",""]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-form-field",0),r["\u0275\u0275elementStart"](1,"input",1,2),r["\u0275\u0275listener"]("ngModelChange",(function(e){return t.value=e}))("ngModelChange",(function(e){return t.valueChange(e)}))("blur",(function(e){return t.blur.emit(e)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"mat-icon",3),r["\u0275\u0275text"](4,"search"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275property"]("mgNoHintMargin",t.mgNoHintMargin),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("placeholder",t.placeholder)("ngModel",t.value),r["\u0275\u0275advance"](2),r["\u0275\u0275classProp"]("active",!!t.value))},directives:[o.d,a.a,s.b,i.d,i.t,i.w,l.a,o.j],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),e})()},cbZm:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n("bCM0");var r=n("SVse"),i=n("8Y7J"),o=n("s7LF"),a=n("Q2Ze"),s=n("Tj54"),l=n("e6WT"),c=n("HxU+");let d=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[c.a,r.c,o.m,a.f,l.c,s.b]]}),e})()},jbKS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetPermissionOverridesResponse=t.GetPermissionOverridesRequest=t.UnsetPermissionOverrideResponse=t.UnsetPermissionOverrideRequest=t.SetPermissionOverrideResponse=t.SetPermissionOverrideRequest=void 0;const r=n("hRO2");class i extends r.Message{constructor(e){super(),r.Message.initialize(this,e,0,-1,null,null)}toObject(e){return i.toObject(e||!1,this)}static toObject(e,t){var n={personHash:r.Message.getFieldWithDefault(t,1,""),permission:r.Message.getFieldWithDefault(t,2,0),permissionOverride:r.Message.getBooleanFieldWithDefault(t,3,!1)};return e&&(n.$jspbMessageInstance=t),n}static deserializeBinary(e){var t=new r.BinaryReader(e),n=new i;return i.deserializeBinaryFromReader(n,t)}static deserializeBinaryFromReader(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setPersonHash(n);break;case 2:var r=t.readInt32();e.setPermission(r);break;case 3:var i=t.readBool();e.setPermissionOverride(i);break;default:t.skipField()}return e}static serializeBinaryToWriter(e,t){var n=void 0;(n=e.getPersonHash()).length>0&&t.writeString(1,n),0!==(n=e.getPermission())&&t.writeInt32(2,n),(n=e.getPermissionOverride())&&t.writeBool(3,n)}serializeBinary(){var e=new r.BinaryWriter;return i.serializeBinaryToWriter(this,e),e.getResultBuffer()}getPersonHash(){return r.Message.getFieldWithDefault(this,1,"")}setPersonHash(e){r.Message.setProto3StringField(this,1,e)}getPermission(){return r.Message.getFieldWithDefault(this,2,0)}setPermission(e){r.Message.setProto3IntField(this,2,e)}getPermissionOverride(){return r.Message.getBooleanFieldWithDefault(this,3,!1)}setPermissionOverride(e){r.Message.setProto3BooleanField(this,3,e)}}t.SetPermissionOverrideRequest=i,i.displayName="SetPermissionOverrideRequest";class o extends r.Message{constructor(e){super(),r.Message.initialize(this,e,0,-1,null,null)}toObject(e){return o.toObject(e||!1,this)}static toObject(e,t){var n={};return e&&(n.$jspbMessageInstance=t),n}static deserializeBinary(e){var t=new r.BinaryReader(e),n=new o;return o.deserializeBinaryFromReader(n,t)}static deserializeBinaryFromReader(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e}static serializeBinaryToWriter(e,t){}serializeBinary(){var e=new r.BinaryWriter;return o.serializeBinaryToWriter(this,e),e.getResultBuffer()}}t.SetPermissionOverrideResponse=o,o.displayName="SetPermissionOverrideResponse";class a extends r.Message{constructor(e){super(),r.Message.initialize(this,e,0,-1,null,null)}toObject(e){return a.toObject(e||!1,this)}static toObject(e,t){var n={personHash:r.Message.getFieldWithDefault(t,1,""),permission:r.Message.getFieldWithDefault(t,2,0)};return e&&(n.$jspbMessageInstance=t),n}static deserializeBinary(e){var t=new r.BinaryReader(e),n=new a;return a.deserializeBinaryFromReader(n,t)}static deserializeBinaryFromReader(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setPersonHash(n);break;case 2:var r=t.readInt32();e.setPermission(r);break;default:t.skipField()}return e}static serializeBinaryToWriter(e,t){var n=void 0;(n=e.getPersonHash()).length>0&&t.writeString(1,n),0!==(n=e.getPermission())&&t.writeInt32(2,n)}serializeBinary(){var e=new r.BinaryWriter;return a.serializeBinaryToWriter(this,e),e.getResultBuffer()}getPersonHash(){return r.Message.getFieldWithDefault(this,1,"")}setPersonHash(e){r.Message.setProto3StringField(this,1,e)}getPermission(){return r.Message.getFieldWithDefault(this,2,0)}setPermission(e){r.Message.setProto3IntField(this,2,e)}}t.UnsetPermissionOverrideRequest=a,a.displayName="UnsetPermissionOverrideRequest";class s extends r.Message{constructor(e){super(),r.Message.initialize(this,e,0,-1,null,null)}toObject(e){return s.toObject(e||!1,this)}static toObject(e,t){var n={};return e&&(n.$jspbMessageInstance=t),n}static deserializeBinary(e){var t=new r.BinaryReader(e),n=new s;return s.deserializeBinaryFromReader(n,t)}static deserializeBinaryFromReader(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e}static serializeBinaryToWriter(e,t){}serializeBinary(){var e=new r.BinaryWriter;return s.serializeBinaryToWriter(this,e),e.getResultBuffer()}}t.UnsetPermissionOverrideResponse=s,s.displayName="UnsetPermissionOverrideResponse";class l extends r.Message{constructor(e){super(),r.Message.initialize(this,e,0,-1,null,null)}toObject(e){return l.toObject(e||!1,this)}static toObject(e,t){var n={personHash:r.Message.getFieldWithDefault(t,1,"")};return e&&(n.$jspbMessageInstance=t),n}static deserializeBinary(e){var t=new r.BinaryReader(e),n=new l;return l.deserializeBinaryFromReader(n,t)}static deserializeBinaryFromReader(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=t.readString();e.setPersonHash(n)}else t.skipField();return e}static serializeBinaryToWriter(e,t){var n;(n=e.getPersonHash()).length>0&&t.writeString(1,n)}serializeBinary(){var e=new r.BinaryWriter;return l.serializeBinaryToWriter(this,e),e.getResultBuffer()}getPersonHash(){return r.Message.getFieldWithDefault(this,1,"")}setPersonHash(e){r.Message.setProto3StringField(this,1,e)}}t.GetPermissionOverridesRequest=l,l.displayName="GetPermissionOverridesRequest";class c extends r.Message{constructor(e){super(),r.Message.initialize(this,e,0,-1,null,null)}toObject(e){return c.toObject(e||!1,this)}static toObject(e,t){var n,r={overridePermissionsMap:(n=t.getOverridePermissionsMap())?n.toObject(e,void 0):[]};return e&&(r.$jspbMessageInstance=t),r}static deserializeBinary(e){var t=new r.BinaryReader(e),n=new c;return c.deserializeBinaryFromReader(n,t)}static deserializeBinaryFromReader(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=e.getOverridePermissionsMap();t.readMessage(n,(function(e,t){r.Map.deserializeBinary(e,t,r.BinaryReader.prototype.readInt32,r.BinaryReader.prototype.readBool,null,0)}))}else t.skipField();return e}static serializeBinaryToWriter(e,t){var n=void 0;(n=e.getOverridePermissionsMap(!0))&&n.getLength()>0&&n.serializeBinary(1,t,r.BinaryWriter.prototype.writeInt32,r.BinaryWriter.prototype.writeBool)}serializeBinary(){var e=new r.BinaryWriter;return c.serializeBinaryToWriter(this,e),e.getResultBuffer()}getOverridePermissionsMap(e=!1){return r.Message.getMapField(this,1,e,null)}clearOverridePermissionsMap(){this.getOverridePermissionsMap().clear()}}t.GetPermissionOverridesResponse=c,c.displayName="GetPermissionOverridesResponse"},lDpI:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgramStreamManager=void 0,n("8Y7J");const r=n("qCKp"),i=n("+6wJ"),o=n("JjHu"),a=n("8Y7J");class s{constructor(e){this._ngZone=e}streamPrograms(e,t,n,a,s){let l,c,d,m,g;if("function"==typeof t?(d=t,m=n,g=a):"function"==typeof n?(c=t,d=n,m=a,g=s):c=t,d)m||(m=e=>console.error(e)),g||(g=(e,t,n)=>{});else{let e=new r.Subject;l=e.asObservable(),d=t=>{e.next(t)},m=t=>{e.error(t)},g=(t,n,r)=>{e.complete()}}let p=i.grpc.invoke(o.ProgramStreamManager.StreamPrograms,{request:e,host:window.DEFAULT_ANGULAR_GRPC_HOST||"https://"+location.hostname,metadata:c,onMessage:e=>this._ngZone.run(()=>{d(e)}),onEnd:(e,t,n)=>this._ngZone.run(()=>{if(e==i.grpc.Code.OK)g(e,t,n);else{let n=new Error(e+" "+(t||""));n.code=e,m(n)}})});return l.close=()=>(console.warn("[Angular Grpc] .close() is deprecated use .cancel() instead"),p.close()),l.cancel=()=>p.close(),l}streamProgramsControl(e,t,n){let r,a,s;"function"==typeof t?a=t:(s=t,a=n),a||(r=new Promise((e,t)=>{a=(n,r)=>{n?t(n):e(r)}}));let l=null,c=i.grpc.invoke(o.ProgramStreamManager.StreamProgramsControl,{request:e,host:window.DEFAULT_ANGULAR_GRPC_HOST||"https://"+location.hostname,metadata:s,onHeaders:e=>l=e,onMessage:e=>this._ngZone.run(()=>{a(null,e,l||new i.grpc.Metadata)}),onEnd:(e,t,n)=>this._ngZone.run(()=>{if(e!=i.grpc.Code.OK){let n=new Error(t);n.code=e,a(n)}})});return r.cancel=()=>c.close(),r}streamProgramContent(e,t,n,a,s){let l,c,d,m,g;if("function"==typeof t?(d=t,m=n,g=a):"function"==typeof n?(c=t,d=n,m=a,g=s):c=t,d)m||(m=e=>console.error(e)),g||(g=(e,t,n)=>{});else{let e=new r.Subject;l=e.asObservable(),d=t=>{e.next(t)},m=t=>{e.error(t)},g=(t,n,r)=>{e.complete()}}let p=i.grpc.invoke(o.ProgramStreamManager.StreamProgramContent,{request:e,host:window.DEFAULT_ANGULAR_GRPC_HOST||"https://"+location.hostname,metadata:c,onMessage:e=>this._ngZone.run(()=>{d(e)}),onEnd:(e,t,n)=>this._ngZone.run(()=>{if(e==i.grpc.Code.OK)g(e,t,n);else{let n=new Error(e+" "+(t||""));n.code=e,m(n)}})});return l.close=()=>(console.warn("[Angular Grpc] .close() is deprecated use .cancel() instead"),p.close()),l.cancel=()=>p.close(),l}streamProgramContentControl(e,t,n){let r,a,s;"function"==typeof t?a=t:(s=t,a=n),a||(r=new Promise((e,t)=>{a=(n,r)=>{n?t(n):e(r)}}));let l=null,c=i.grpc.invoke(o.ProgramStreamManager.StreamProgramContentControl,{request:e,host:window.DEFAULT_ANGULAR_GRPC_HOST||"https://"+location.hostname,metadata:s,onHeaders:e=>l=e,onMessage:e=>this._ngZone.run(()=>{a(null,e,l||new i.grpc.Metadata)}),onEnd:(e,t,n)=>this._ngZone.run(()=>{if(e!=i.grpc.Code.OK){let n=new Error(t);n.code=e,a(n)}})});return r.cancel=()=>c.close(),r}}t.ProgramStreamManager=s,s.\u0275fac=function(e){return new(e||s)(a.\u0275\u0275inject(a.NgZone))},s.\u0275prov=a.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"})},mXHK:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamProgramContentInfo=t.StreamProgramInfo=void 0;const r=n("hRO2"),i=n("PYFZ"),o=n("5Jf8");class a extends r.Message{constructor(e){super(),r.Message.initialize(this,e,0,-1,null,null)}toObject(e){return a.toObject(e||!1,this)}static toObject(e,t){var n,r={itemMetadata:(n=t.getItemMetadata())&&i.StreamItemMetadata.toObject(e,n),item:(n=t.getItem())&&a.StreamItem.toObject(e,n)};return e&&(r.$jspbMessageInstance=t),r}static deserializeBinary(e){var t=new r.BinaryReader(e),n=new a;return a.deserializeBinaryFromReader(n,t)}static deserializeBinaryFromReader(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=new i.StreamItemMetadata;t.readMessage(n,i.StreamItemMetadata.deserializeBinaryFromReader),e.setItemMetadata(n);break;case 2:var r=new a.StreamItem;t.readMessage(r,a.StreamItem.deserializeBinaryFromReader),e.setItem(r);break;default:t.skipField()}return e}static serializeBinaryToWriter(e,t){var n=void 0;null!=(n=e.getItemMetadata())&&t.writeMessage(1,n,i.StreamItemMetadata.serializeBinaryToWriter),null!=(n=e.getItem())&&t.writeMessage(2,n,a.StreamItem.serializeBinaryToWriter)}serializeBinary(){var e=new r.BinaryWriter;return a.serializeBinaryToWriter(this,e),e.getResultBuffer()}getItemMetadata(){return r.Message.getWrapperField(this,i.StreamItemMetadata,1)}setItemMetadata(e){r.Message.setWrapperField(this,1,e)}clearItemMetadata(){this.setItemMetadata(void 0)}hasItemMetadata(){return null!=r.Message.getField(this,1)}getItem(){return r.Message.getWrapperField(this,a.StreamItem,2)}setItem(e){r.Message.setWrapperField(this,2,e)}clearItem(){this.setItem(void 0)}hasItem(){return null!=r.Message.getField(this,2)}}t.StreamProgramInfo=a,a.displayName="StreamProgramInfo",function(e){class t extends r.Message{constructor(t){super(),r.Message.initialize(this,t,0,-1,e.StreamItem.repeatedFields_,null)}toObject(e){return t.toObject(e||!1,this)}static toObject(e,t){var n,i={title:r.Message.getFieldWithDefault(t,1,""),description:r.Message.getFieldWithDefault(t,2,""),logo:(n=t.getLogo())&&o.ImageInfo.toObject(e,n),banner:(n=t.getBanner())&&o.ImageInfo.toObject(e,n),mingaCount:r.Message.getFieldWithDefault(t,5,0),active:r.Message.getBooleanFieldWithDefault(t,6,!1),contentHash:r.Message.getFieldWithDefault(t,7,""),permittedRoleTypeList:null==(n=r.Message.getRepeatedField(t,8))?void 0:n};return e&&(i.$jspbMessageInstance=t),i}static deserializeBinary(e){var n=new r.BinaryReader(e),i=new t;return t.deserializeBinaryFromReader(i,n)}static deserializeBinaryFromReader(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setTitle(n);break;case 2:var r=t.readString();e.setDescription(r);break;case 3:var i=new o.ImageInfo;t.readMessage(i,o.ImageInfo.deserializeBinaryFromReader),e.setLogo(i);break;case 4:var a=new o.ImageInfo;t.readMessage(a,o.ImageInfo.deserializeBinaryFromReader),e.setBanner(a);break;case 5:var s=t.readInt32();e.setMingaCount(s);break;case 6:var l=t.readBool();e.setActive(l);break;case 7:var c=t.readString();e.setContentHash(c);break;case 8:var d=t.readString();e.addPermittedRoleType(d);break;default:t.skipField()}return e}static serializeBinaryToWriter(e,t){var n=void 0;(n=e.getTitle()).length>0&&t.writeString(1,n),(n=e.getDescription()).length>0&&t.writeString(2,n),null!=(n=e.getLogo())&&t.writeMessage(3,n,o.ImageInfo.serializeBinaryToWriter),null!=(n=e.getBanner())&&t.writeMessage(4,n,o.ImageInfo.serializeBinaryToWriter),0!==(n=e.getMingaCount())&&t.writeInt32(5,n),(n=e.getActive())&&t.writeBool(6,n),(n=e.getContentHash()).length>0&&t.writeString(7,n),(n=e.getPermittedRoleTypeList()).length>0&&t.writeRepeatedString(8,n)}serializeBinary(){var t=new r.BinaryWriter;return e.StreamItem.serializeBinaryToWriter(this,t),t.getResultBuffer()}getTitle(){return r.Message.getFieldWithDefault(this,1,"")}setTitle(e){r.Message.setProto3StringField(this,1,e)}getDescription(){return r.Message.getFieldWithDefault(this,2,"")}setDescription(e){r.Message.setProto3StringField(this,2,e)}getLogo(){return r.Message.getWrapperField(this,o.ImageInfo,3)}setLogo(e){r.Message.setWrapperField(this,3,e)}clearLogo(){this.setLogo(void 0)}hasLogo(){return null!=r.Message.getField(this,3)}getBanner(){return r.Message.getWrapperField(this,o.ImageInfo,4)}setBanner(e){r.Message.setWrapperField(this,4,e)}clearBanner(){this.setBanner(void 0)}hasBanner(){return null!=r.Message.getField(this,4)}getMingaCount(){return r.Message.getFieldWithDefault(this,5,0)}setMingaCount(e){r.Message.setProto3IntField(this,5,e)}getActive(){return r.Message.getBooleanFieldWithDefault(this,6,!1)}setActive(e){r.Message.setProto3BooleanField(this,6,e)}getContentHash(){return r.Message.getFieldWithDefault(this,7,"")}setContentHash(e){r.Message.setProto3StringField(this,7,e)}getPermittedRoleTypeList(){return r.Message.getRepeatedField(this,8)}setPermittedRoleTypeList(e){r.Message.setField(this,8,e||[])}addPermittedRoleType(e,t){r.Message.addToRepeatedField(this,8,e,t)}clearPermittedRoleTypeList(){this.setPermittedRoleTypeList([])}}t.displayName="StreamProgramInfo.StreamItem",t.repeatedFields_=[8],e.StreamItem=t}(a=t.StreamProgramInfo||(t.StreamProgramInfo={}));class s extends r.Message{constructor(e){super(),r.Message.initialize(this,e,0,-1,null,null)}toObject(e){return s.toObject(e||!1,this)}static toObject(e,t){var n,r={itemMetadata:(n=t.getItemMetadata())&&i.StreamItemMetadata.toObject(e,n),item:(n=t.getItem())&&s.StreamItem.toObject(e,n)};return e&&(r.$jspbMessageInstance=t),r}static deserializeBinary(e){var t=new r.BinaryReader(e),n=new s;return s.deserializeBinaryFromReader(n,t)}static deserializeBinaryFromReader(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=new i.StreamItemMetadata;t.readMessage(n,i.StreamItemMetadata.deserializeBinaryFromReader),e.setItemMetadata(n);break;case 2:var r=new s.StreamItem;t.readMessage(r,s.StreamItem.deserializeBinaryFromReader),e.setItem(r);break;default:t.skipField()}return e}static serializeBinaryToWriter(e,t){var n=void 0;null!=(n=e.getItemMetadata())&&t.writeMessage(1,n,i.StreamItemMetadata.serializeBinaryToWriter),null!=(n=e.getItem())&&t.writeMessage(2,n,s.StreamItem.serializeBinaryToWriter)}serializeBinary(){var e=new r.BinaryWriter;return s.serializeBinaryToWriter(this,e),e.getResultBuffer()}getItemMetadata(){return r.Message.getWrapperField(this,i.StreamItemMetadata,1)}setItemMetadata(e){r.Message.setWrapperField(this,1,e)}clearItemMetadata(){this.setItemMetadata(void 0)}hasItemMetadata(){return null!=r.Message.getField(this,1)}getItem(){return r.Message.getWrapperField(this,s.StreamItem,2)}setItem(e){r.Message.setWrapperField(this,2,e)}clearItem(){this.setItem(void 0)}hasItem(){return null!=r.Message.getField(this,2)}}t.StreamProgramContentInfo=s,s.displayName="StreamProgramContentInfo",function(e){class t extends r.Message{constructor(t){super(),r.Message.initialize(this,t,0,-1,null,e.StreamItem.oneofGroups_)}getOverlayImageCase(){return r.Message.computeOneofCase(this,e.StreamItem.oneofGroups_[0])}toObject(e){return t.toObject(e||!1,this)}static toObject(e,t){var n,i={contentHash:r.Message.getFieldWithDefault(t,1,""),title:r.Message.getFieldWithDefault(t,2,""),description:r.Message.getFieldWithDefault(t,3,""),imageInfo:(n=t.getImageInfo())&&o.ImageInfo.toObject(e,n),fullImage:r.Message.getBooleanFieldWithDefault(t,5,!1),lightContent:r.Message.getBooleanFieldWithDefault(t,6,!1),positionOffset:r.Message.getFieldWithDefault(t,7,0),positionRelative:r.Message.getBooleanFieldWithDefault(t,8,!1),typeString:r.Message.getFieldWithDefault(t,9,""),icon:r.Message.getFieldWithDefault(t,10,""),pollLayout:r.Message.getFieldWithDefault(t,11,0)};return e&&(i.$jspbMessageInstance=t),i}static deserializeBinary(e){var n=new r.BinaryReader(e),i=new t;return t.deserializeBinaryFromReader(i,n)}static deserializeBinaryFromReader(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setContentHash(n);break;case 2:var r=t.readString();e.setTitle(r);break;case 3:var i=t.readString();e.setDescription(i);break;case 4:var a=new o.ImageInfo;t.readMessage(a,o.ImageInfo.deserializeBinaryFromReader),e.setImageInfo(a);break;case 5:var s=t.readBool();e.setFullImage(s);break;case 6:var l=t.readBool();e.setLightContent(l);break;case 7:var c=t.readUint64();e.setPositionOffset(c);break;case 8:var d=t.readBool();e.setPositionRelative(d);break;case 9:var m=t.readString();e.setTypeString(m);break;case 10:var g=t.readString();e.setIcon(g);break;case 11:var p=t.readEnum();e.setPollLayout(p);break;default:t.skipField()}return e}static serializeBinaryToWriter(e,t){var n=void 0;(n=e.getContentHash()).length>0&&t.writeString(1,n),(n=e.getTitle()).length>0&&t.writeString(2,n),(n=e.getDescription()).length>0&&t.writeString(3,n),null!=(n=e.getImageInfo())&&t.writeMessage(4,n,o.ImageInfo.serializeBinaryToWriter),(n=e.getFullImage())&&t.writeBool(5,n),(n=e.getLightContent())&&t.writeBool(6,n),0!==(n=e.getPositionOffset())&&t.writeUint64(7,n),(n=e.getPositionRelative())&&t.writeBool(8,n),(n=e.getTypeString()).length>0&&t.writeString(9,n),(n=e.getIcon()).length>0&&t.writeString(10,n),null!=(n=r.Message.getField(e,11))&&t.writeEnum(11,n)}serializeBinary(){var t=new r.BinaryWriter;return e.StreamItem.serializeBinaryToWriter(this,t),t.getResultBuffer()}getContentHash(){return r.Message.getFieldWithDefault(this,1,"")}setContentHash(e){r.Message.setProto3StringField(this,1,e)}getTitle(){return r.Message.getFieldWithDefault(this,2,"")}setTitle(e){r.Message.setProto3StringField(this,2,e)}getDescription(){return r.Message.getFieldWithDefault(this,3,"")}setDescription(e){r.Message.setProto3StringField(this,3,e)}getImageInfo(){return r.Message.getWrapperField(this,o.ImageInfo,4)}setImageInfo(e){r.Message.setWrapperField(this,4,e)}clearImageInfo(){this.setImageInfo(void 0)}hasImageInfo(){return null!=r.Message.getField(this,4)}getFullImage(){return r.Message.getBooleanFieldWithDefault(this,5,!1)}setFullImage(e){r.Message.setProto3BooleanField(this,5,e)}getLightContent(){return r.Message.getBooleanFieldWithDefault(this,6,!1)}setLightContent(e){r.Message.setProto3BooleanField(this,6,e)}getPositionOffset(){return r.Message.getFieldWithDefault(this,7,0)}setPositionOffset(e){r.Message.setProto3IntField(this,7,e)}getPositionRelative(){return r.Message.getBooleanFieldWithDefault(this,8,!1)}setPositionRelative(e){r.Message.setProto3BooleanField(this,8,e)}getTypeString(){return r.Message.getFieldWithDefault(this,9,"")}setTypeString(e){r.Message.setProto3StringField(this,9,e)}getIcon(){return r.Message.getFieldWithDefault(this,10,"")}setIcon(e){r.Message.setProto3StringField(this,10,e)}getPollLayout(){return r.Message.getFieldWithDefault(this,11,0)}setPollLayout(t){r.Message.setOneofField(this,11,e.StreamItem.oneofGroups_[0],t)}clearPollLayout(){r.Message.setOneofField(this,11,e.StreamItem.oneofGroups_[0],void 0)}hasPollLayout(){return null!=r.Message.getField(this,11)}}t.displayName="StreamProgramContentInfo.StreamItem",t.oneofGroups_=[[11]],e.StreamItem=t}(s=t.StreamProgramContentInfo||(t.StreamProgramContentInfo={})),function(e){let t;!function(e){let t;!function(e){e[e.OVERLAY_IMAGE_NOT_SET=0]="OVERLAY_IMAGE_NOT_SET",e[e.POLL_LAYOUT=11]="POLL_LAYOUT"}(t=e.OverlayImageCase||(e.OverlayImageCase={}))}(t=e.StreamItem||(e.StreamItem={}))}(s=t.StreamProgramContentInfo||(t.StreamProgramContentInfo={}))},qsjj:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("SVse"),i=n("8Y7J"),o=n("s7LF"),a=n("pMoy"),s=n("Q2Ze"),l=n("e6WT"),c=n("TSSN"),d=n("HxU+"),m=n("7Tcv");n("85oS");let g=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[d.a,m.a,r.c,o.m,s.f,l.c,a.b,c.c]]}),e})()},s8Ph:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PermissionOverrideAdmin=void 0,n("8Y7J");const r=n("+6wJ"),i=n("wKCx"),o=n("8Y7J");class a{constructor(e){this._ngZone=e}setPermissionOverride(e,t,n){let o,a,s;"function"==typeof t?a=t:(s=t,a=n),a||(o=new Promise((e,t)=>{a=(n,r)=>{n?t(n):e(r)}}));let l=null,c=r.grpc.invoke(i.PermissionOverrideAdmin.SetPermissionOverride,{request:e,host:window.DEFAULT_ANGULAR_GRPC_HOST||"https://"+location.hostname,metadata:s,onHeaders:e=>l=e,onMessage:e=>this._ngZone.run(()=>{a(null,e,l||new r.grpc.Metadata)}),onEnd:(e,t,n)=>this._ngZone.run(()=>{if(e!=r.grpc.Code.OK){let n=new Error(t);n.code=e,a(n)}})});return o.cancel=()=>c.close(),o}unsetPermissionOverride(e,t,n){let o,a,s;"function"==typeof t?a=t:(s=t,a=n),a||(o=new Promise((e,t)=>{a=(n,r)=>{n?t(n):e(r)}}));let l=null,c=r.grpc.invoke(i.PermissionOverrideAdmin.UnsetPermissionOverride,{request:e,host:window.DEFAULT_ANGULAR_GRPC_HOST||"https://"+location.hostname,metadata:s,onHeaders:e=>l=e,onMessage:e=>this._ngZone.run(()=>{a(null,e,l||new r.grpc.Metadata)}),onEnd:(e,t,n)=>this._ngZone.run(()=>{if(e!=r.grpc.Code.OK){let n=new Error(t);n.code=e,a(n)}})});return o.cancel=()=>c.close(),o}getPermissionOverrides(e,t,n){let o,a,s;"function"==typeof t?a=t:(s=t,a=n),a||(o=new Promise((e,t)=>{a=(n,r)=>{n?t(n):e(r)}}));let l=null,c=r.grpc.invoke(i.PermissionOverrideAdmin.GetPermissionOverrides,{request:e,host:window.DEFAULT_ANGULAR_GRPC_HOST||"https://"+location.hostname,metadata:s,onHeaders:e=>l=e,onMessage:e=>this._ngZone.run(()=>{a(null,e,l||new r.grpc.Metadata)}),onEnd:(e,t,n)=>this._ngZone.run(()=>{if(e!=r.grpc.Code.OK){let n=new Error(t);n.code=e,a(n)}})});return o.cancel=()=>c.close(),o}}t.PermissionOverrideAdmin=a,a.\u0275fac=function(e){return new(e||a)(o.\u0275\u0275inject(o.NgZone))},a.\u0275prov=o.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"})},"tsE+":function(e,t,n){"use strict";n.d(t,"b",(function(){return x})),n.d(t,"c",(function(){return y})),n.d(t,"a",(function(){return O}));var r=n("8Y7J"),i=n("s7LF"),o=n("HHVM"),a=n("SVse"),s=n("pMoy"),l=n("Q2Ze"),c=n("e6WT"),d=n("ZTz/"),m=n("UhP/");function g(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",2),r["\u0275\u0275elementStart"](1,"mat-checkbox",3),r["\u0275\u0275listener"]("ngModelChange",(function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().relativeOffset=t}))("ngModelChange",(function(t){r["\u0275\u0275restoreView"](e);const n=r["\u0275\u0275nextContext"]();return n.onRelativeOffsetChange(t),n.triggerOnChange()})),r["\u0275\u0275elementStart"](2,"span"),r["\u0275\u0275text"](3,"Relative Offset"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngModel",e.relativeOffset)}}function p(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"mat-form-field",4),r["\u0275\u0275elementStart"](1,"mat-label"),r["\u0275\u0275text"](2,"Day"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"input",5),r["\u0275\u0275listener"]("ngModelChange",(function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().daySelection=t}))("ngModelChange",(function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().triggerOnChange()})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngModel",e.daySelection)}}function u(e,t){if(1&e&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275elementStart"](1,"mat-option",9),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit,n=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("value",e),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",n.getMonthText(e)," ")}}function h(e,t){if(1&e&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275elementStart"](1,"mat-option",9),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit,n=r["\u0275\u0275nextContext"](3);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("value",e),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](n.getDayText(e))}}function f(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"mat-select",10),r["\u0275\u0275listener"]("ngModelChange",(function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"](2).daySelection=t}))("ngModelChange",(function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"](2).triggerOnChange()})),r["\u0275\u0275template"](1,h,3,2,"ng-container",7),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275property"]("ngModel",e.daySelection),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",e.dayOptions)}}function v(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"mat-select",6),r["\u0275\u0275listener"]("ngModelChange",(function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().monthSelection=t}))("ngModelChange",(function(t){r["\u0275\u0275restoreView"](e);const n=r["\u0275\u0275nextContext"]();return n.onMonthSelect(t),n.triggerOnChange()})),r["\u0275\u0275template"](1,u,3,2,"ng-container",7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](2,f,2,2,"mat-select",8)}if(2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("ngModel",e.monthSelection),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",e.monthOptions),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.monthSelection)}}const C=864e5,b=C/96,P=[];for(let _=0;96>_;++_)P.push(_*b);const M={provide:i.r,useExisting:Object(r.forwardRef)(()=>O),multi:!0};function x(e){let t=o.day.utc(0);return e.month&&t.month(e.month-1),e.day&&t.date(e.day),"number"==typeof e.time&&t.millisecond(e.time),t.toDate().getTime()}function y(e,t){if(e){const e=o.day.utc(t);return{relative:!0,month:0,day:Math.floor(t/C)+1,time:e.millisecond()}}{const e=o.day.utc(t);return{relative:!1,month:e.month()+1,day:e.date(),time:e.millisecond()}}}let O=(()=>{class e{constructor(){this.relativeOffset=!1,this.relativeOffsetChange=new r.EventEmitter,this.hideRelativeOffsetToggle=!1,this.monthSelection=0,this.daySelection=0,this.timeSelection=null,this.timeOptions=[].concat(P),this.monthOptions=[1,2,3,4,5,6,7,8,9,10,11,12],this.dayOptions=[]}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}onRelativeOffsetChange(e){e&&(this.daySelection||(this.daySelection=1)),this.relativeOffsetChange.emit(e)}triggerOnChange(){this.onChange&&this.onChange(this.relativeOffset?{relative:!0,day:this.daySelection,time:this.timeSelection,month:0}:{relative:!1,day:this.daySelection,month:this.monthSelection,time:0})}resetValue(){this.relativeOffset=!1,this.monthSelection=0,this.daySelection=0}_writeValue(e){"boolean"==typeof e.relative&&(this.relativeOffset=e.relative),"number"==typeof e.month?(this.monthSelection=e.month,this.initDayOptions()):this.monthSelection=0,this.daySelection="number"==typeof e.day?e.day:0,this.timeSelection="number"==typeof e.time?this.timeOptions.sort((t,n)=>Math.abs(e.time-t)-Math.abs(e.time-n))[0]:null}writeValue(e){null===e?this.resetValue():"object"==typeof e?this._writeValue(e):console.warn("Invalid ngModel type for <mg-date-time-offset-picker>:",e)}initDayOptions(){if(this.dayOptions=[],this.daySelection=0,0!==this.monthSelection){const e=Object(o.day)().month(this.monthSelection-1).daysInMonth();for(let t=0;e>t;++t)this.dayOptions.push(t+1)}}getTimeOptionText(e){return o.day.utc(e).format("h:mm a")}onMonthSelect(e){this.initDayOptions()}getMonthText(e){return Object(o.day)().month(e-1).format("MMMM")}getDayText(e){return(""+e).padStart(2,"0")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-date-time-offset-picker"]],inputs:{relativeOffset:"relativeOffset",hideRelativeOffsetToggle:"hideRelativeOffsetToggle"},outputs:{relativeOffsetChange:"relativeOffsetChange"},features:[r["\u0275\u0275ProvidersFeature"]([M])],decls:3,vars:3,consts:[["style","padding: 8px 0",4,"ngIf"],[3,"ngIf"],[2,"padding","8px 0"],[3,"ngModel","ngModelChange"],[1,"number-input"],["matInput","","autocomplete","off","name","dayOffset","type","number","min","1",3,"ngModel","ngModelChange"],["placeholder","Month",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["placeholder","Day",3,"ngModel","ngModelChange",4,"ngIf"],[3,"value"],["placeholder","Day",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(r["\u0275\u0275template"](0,g,4,1,"div",0),r["\u0275\u0275template"](1,p,4,1,"ng-template",1),r["\u0275\u0275template"](2,v,3,3,"ng-template",1)),2&e&&(r["\u0275\u0275property"]("ngIf",!t.hideRelativeOffsetToggle),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.relativeOffset),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!t.relativeOffset))},directives:[a.o,s.a,i.t,i.w,l.d,l.h,c.b,i.y,i.d,d.a,a.n,m.m],styles:[".mat-select[_ngcontent-%COMP%]{width:120px}.number-input[_ngcontent-%COMP%]{width:120px;display:inline-block}"]}),e})()},vtEA:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a.a})),n("5xcx");var r=n("8Y7J"),i=n("s7LF");let o=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[i.m]]}),e})();var a=n("NW4y")},vxDR:function(e,t,n){"use strict";n.d(t,"b",(function(){return ce})),n.d(t,"a",(function(){return le}));var r=n("SVse"),i=n("8Y7J"),o=n("s7LF"),a=n("jMqV"),s=n("TSSN"),l=n("CO6v"),c=n("9F0b"),d=n("p+4T"),m=n("YcSX"),g=n("Ggka"),p=n("Q2Ze"),u=n("e6WT"),h=n("Tj54"),f=n("sj4O");function v(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-icon"),i["\u0275\u0275text"](1,"done"),i["\u0275\u0275elementEnd"]())}function C(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-icon"),i["\u0275\u0275text"](1,"error_outline"),i["\u0275\u0275elementEnd"]())}function b(e,t){1&e&&i["\u0275\u0275element"](0,"mg-spinner",6)}function P(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",4),i["\u0275\u0275template"](1,v,2,0,"mat-icon",3),i["\u0275\u0275template"](2,C,2,0,"mat-icon",3),i["\u0275\u0275template"](3,b,1,0,"mg-spinner",5),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.outerFormControl.valid),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.outerFormControl.invalid),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.outerFormControl.pending)}}function M(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"input.programName.error.maxlength")," "))}function x(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"input.programName.error.pattern")," "))}function y(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"input.programName.error.required")," "))}function O(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275elementContainerStart"](1,7),i["\u0275\u0275template"](2,M,3,3,"span",8),i["\u0275\u0275template"](3,x,3,3,"span",8),i["\u0275\u0275template"](4,y,3,3,"span",8),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitch",e.inputControlErrorKey),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase","maxlength"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase","pattern"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase","required")}}const _={provide:o.r,useExisting:Object(i.forwardRef)(()=>w),multi:!0},S={provide:o.q,useExisting:Object(i.forwardRef)(()=>w),multi:!0};let w=(()=>{class e{constructor(){this.value="",this.disabled=!1}validate(e){return this.inputControl.errors}ngOnInit(){this.inputControl=new o.h({value:this.value,disabled:this.disabled},[o.D.required,o.D.maxLength(50),g.a.NoSymbols]),this._formGroup=new o.k({inputControl:this.inputControl}),this.inputControl.statusChanges.subscribe(e=>{"function"==typeof this.onChange&&(this.onChange(this.value),this.onTouched(),this.outerFormControl&&(this.inputControl.pristine&&this.outerFormControl.markAsPristine(),this.inputControl.touched||this.outerFormControl.markAsUntouched()))})}get inputControlErrorKey(){return this.inputControl.errors?Object.keys(this.inputControl.errors)[0]:""}writeValue(e){null==e&&(e=""),"string"==typeof e&&e!==this.value?(this.value=e,this.inputControl.setValue(this.value)):console.warn("<mg-program-name> model tired to change to non-string value")}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}change(e){this.onChange&&(this.onChange(e),this.onTouched()),this.value=e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-program-name"]],inputs:{disabled:"disabled",outerFormControl:"outerFormControl"},features:[i["\u0275\u0275ProvidersFeature"]([_,S])],decls:9,vars:6,consts:[[1,"mg-minga-name"],["matInput","","type","text","mgFocusSelectText","",3,"formControl","ngModelChange"],["class","input-icon","mat-icon-button","","matSuffix","",4,"ngIf"],[4,"ngIf"],["mat-icon-button","","matSuffix","",1,"input-icon"],["color","primary","mode","indeterminate","diameter","25",4,"ngIf"],["color","primary","mode","indeterminate","diameter","25"],[3,"ngSwitch"],[4,"ngSwitchCase"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-form-field",0),i["\u0275\u0275elementStart"](1,"mat-label"),i["\u0275\u0275text"](2,"Program Name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"input",1),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.change(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](4,P,4,3,"div",2),i["\u0275\u0275elementStart"](5,"mat-hint"),i["\u0275\u0275text"](6),i["\u0275\u0275pipe"](7,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](8,O,5,4,"mat-error",3),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("formControl",t.inputControl),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.outerFormControl&&t.outerFormControl.touched&&t.outerFormControl.asyncValidator),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](7,4,"input.programName.hint")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.inputControlErrorKey))},directives:[p.d,p.h,u.b,o.d,o.t,o.i,r.o,p.g,p.j,h.a,f.a,p.c,r.q,r.r],pipes:[s.d],styles:[""]}),e})();var I=n("7Tcv");let E=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[I.a,r.c,o.m,o.A,h.b,p.f,u.c,s.c]]}),e})();var k=n("EBcp"),F=n("fHWq"),T=n("HxU+"),R=n("CL15"),j=n("WmLq"),D=n("mrSG"),N=n("+6wJ"),B=n("LvDl"),A=n("F5Qo"),L=n("l6At"),z=n("mI3D"),H=n("quSY"),V=n("lJxs"),W=n("iInd"),G=n("UWMR"),q=n("IPaV"),U=n("jNxq"),$=n("YTnL"),Y=n("CslP"),Q=n("lkjj"),Z=n("SYVq"),J=n("o1f5"),K=n("gjtd"),X=n("T0RT"),ee=n("WNdF"),te=n("8p1t"),ne=n("4avL"),re=n("iBVM");const ie=["form"];function oe(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",26),i["\u0275\u0275elementStart"](1,"div",27),i["\u0275\u0275element"](2,"mg-spinner",28),i["\u0275\u0275elementStart"](3,"p"),i["\u0275\u0275text"](4),i["\u0275\u0275pipe"](5,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](5,1,"loading")," "))}function ae(e,t){if(1&e&&i["\u0275\u0275element"](0,"mg-file-upload",29),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("file",e.programLogoInputFiles[0])("formControl",e.uploadIconFormControl)}}const se=function(){return{standalone:!0}};let le=(()=>{class e{constructor(e,t,n,r,i,a,s,l){this.route=e,this.router=t,this.snackBar=n,this.errorReporting=r,this.streamManager=i,this.programService=a,this.adminEvents=s,this.rolesService=l,this.loading=!0,this.editing=!1,this.fields={title:"Untitled program",body:"",active:!1,selectedRoles:[]},this.initialFields={title:"Untitled program",body:"",active:!1,selectedRoles:[]},this.address="",this.mingaHash="",this.programHash="",this._submitting=!1,this.program=null,this.programLogo="",this.programBanner="",this.programLogoInputFiles=[],this.doPreventNavigation=!0,this.initialProgramBanner="",this.initialProgramLogo="",this._roleSubscription=new H.a,this.uploadIconFormControl=new o.h,this.uploadBannerFormControl=new o.h,this.rolesService.fetchIfNeeded(),this.uploadIconFormControl.statusChanges.subscribe(e=>{"VALID"===e&&(console.log("logo form control status is valid, with value: ",this.uploadIconFormControl.value),this.programLogo=this.uploadIconFormControl.value)}),this._setupRouteParamsHandler(),this.availableProgramRoles$=this.rolesService.availableProgramManageRoles$.pipe(Object(V.a)(e=>e.map(e=>Object(j.b)(e,e.immutableProgramManagePermittable)))),this._roleSubscription=this.availableProgramRoles$.subscribe(e=>{this.editing||this.fields.selectedRoles.length||(this.fields.selectedRoles=e.map(e=>e.roleType),this.initialFields.selectedRoles=this.fields.selectedRoles)})}get hasNewLogo(){return this.programLogo!=this.initialProgramLogo}get hasNewBanner(){return this.programBanner!=this.initialProgramBanner}get hasChanges(){return!this.editing||!B.isEqual(this.fields,this.initialFields)||this.hasNewBanner||this.hasNewLogo}get invalidDescription(){return this.fields.body.length>5e3}ngOnDestroy(){this._roleSubscription.unsubscribe()}selectManageRole(e){this.fields.selectedRoles.includes(e)||this.fields.selectedRoles.push(e)}deselectManageRole(e){const t=this.fields.selectedRoles.indexOf(e);t>=0&&this.fields.selectedRoles.splice(t,1)}_setupRouteParamsHandler(){this.route.params.subscribe(e=>Object(D.a)(this,void 0,void 0,(function*(){this.loading=!0,this.mingaHash="","programHash"in e?(this.programHash=e.programHash,this.editing=!0,yield this.getProgram(e.programHash)):(this.editing=!1,this.loading=!1)})))}onBeforeUnload(e){let t=this.preventNavigation();if(t)return e.returnValue=t,t}preventNavigation(){return this.doPreventNavigation?!this.form.submitted&&this.form.dirty?"You have unsaved changes. Are you sure you want to leave?":this.form.pending?"Some of your changes are still pending. Are you sure you want to leave?":"":""}hasOverlayPrevious(){return{text:this.editing?"Edit Program":"Create Program",icon:"close"}}cancel(e){e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),this.onOverlayClose()}onOverlayClose(){return Object(D.a)(this,void 0,void 0,(function*(){return yield this.router.navigate(["",{outlets:{o:null}}]).then(()=>Object(D.a)(this,void 0,void 0,(function*(){return this.programHash&&(yield this.router.navigate(["/admin/program",this.programHash])),!0}))),!0}))}updateProgram(){return Object(D.a)(this,void 0,void 0,(function*(){const e=new L.DeltaProgramInfo;if(e.setContentHash(this.programHash),this.fields.title!=this.initialFields.title){const t=new A.StringDelta;t.setNewString(this.fields.title),e.setTitle(t)}if(this.fields.body!=this.initialFields.body){const t=new A.StringDelta;t.setNewString(this.fields.body),e.setDescription(t)}if(this.fields.active!=this.initialFields.active){const t=new A.BoolDelta;t.setNewBool(this.fields.active),e.setActive(t)}if(this.hasNewBanner){const t=new A.RepeatedStringDelta,n=new A.RepeatedStringDelta.InsertInstruction;n.setInsertString(this.programBanner),t.addInsertInstruction(n),e.setBanner(t)}if(this.hasNewLogo){const t=new A.StringDelta;t.setNewString(this.programLogo),e.setLogo(t)}return e.setPermittedRoleTypeList(this.fields.selectedRoles),this.programService.update(e)}))}createProgram(){return Object(D.a)(this,void 0,void 0,(function*(){const e=new L.ProgramInfo;return e.setTitle(this.fields.title),e.setDescription(this.fields.body),e.setActive(this.fields.active),e.setPermittedRoleTypeList(this.fields.selectedRoles),this.programLogo&&e.setLogo(this.programLogo),this.programBanner&&e.setBannerList([this.programBanner]),this.programService.new(e)}))}getProgram(e){return Object(D.a)(this,void 0,void 0,(function*(){console.log("getProgram hash:",e);let t=()=>(this.snackMessage("Error occurred while loading program"),this.onOverlayClose(),this.loading=!1,this.errorReporting.sendErrorReport("client ProgramForm.component",`getProgram() failed for hash: ${e}`,z.errorPriority.WARN),[]);try{const n=new L.ProgramInfoQuery;n.setIncludeDeleted(!0),n.setProgramHash(e);const r=yield this.programService.getInfo(n);if(r)return this.program=r,yield this.initEditProgram(this.program),this.loading=!1,this.program;console.warn("[ProgramForm]getProgram() no content found"),t()}catch(n){console.warn("[ProgramForm]getProgram() catch err: ",n),t()}}))}initEditProgram(e){return Object(D.a)(this,void 0,void 0,(function*(){if(e){this.fields.title=e.getTitle(),this.fields.body=e.getDescription(),this.fields.active=e.getActive();const t=e.getPermittedRoleTypeList();t.length&&(this.fields.selectedRoles=t);const n=e.getLogo();n&&(this.programLogo=window.MINGA_ASSET_URL_PREFIX+n,this.initialProgramLogo=this.programLogo);const r=e.getBannerList();r&&r.length&&(this.programBanner=window.MINGA_ASSET_URL_PREFIX+r[0],this.initialProgramBanner=this.programBanner),this.initialFields=B.cloneDeep(this.fields)}else yield this.errorReporting.sendErrorReport("client PersonForm.component","initEditPerson() has no person",z.errorPriority.WARN)}))}onFormKeyPress(e){13!=e.keyCode||this.editing||(e.preventDefault(),this.submit())}snackMessage(e){this.snackBar.open(e)}snackTryAgain(e="Unable to create program"){this.snackBar.open(e,"Try again?").onAction().subscribe(()=>{this.submit()})}submit(e=null){this.loading=!0;let t=()=>Object(D.a)(this,void 0,void 0,(function*(){yield this.form.form.markAsPristine(),this.loading=!1,this.hasNewBanner&&(this.initialProgramBanner=this.programBanner),this.hasNewLogo&&(this.initialProgramLogo=this.programLogo),yield this.streamManager.restartStreamIfAvailable("HomeFeed"),yield this.streamManager.restartStreamIfAvailable("AdminProgramFeed"),yield this.streamManager.restartStreamIfAvailable("AdminProgramContentFeed"),this.editing?(this.snackMessage("Program was successfully updated"),this.adminEvents.emitProgramUpdateSuccess({programHash:this.programHash}),yield this.onOverlayClose()):this.snackMessage("Program was successfully created")})),n=e=>{let t=(n=e.code,Object.keys(N.grpc.Code).find(e=>N.grpc.Code[e]==n)||n);var n;this.snackBar.open(`Could not ${this.editing?"update":"create"} program (${t})`,"Dismiss"),this.loading=!1};return this.form.invalid?(this.snackMessage("Form invalid. Cannot save Program."),void(this.loading=!1)):this.invalidDescription?(this.snackMessage("Program description is too long, must be 5000 characters or less."),void(this.loading=!1)):!this.fields.active||this.programBanner&&this.programLogo?void(this.editing?this.updateProgram().then(t,n):this.createProgram().then(e=>{const n=e.getContentHash();return n?(this.programHash=n,t().then(()=>this.onOverlayClose())):(console.warn("Didn't return a program hash, closing overlay"),t().then(()=>this.onOverlayClose()))},n)):(this.snackMessage("Program cannot be saved as active without a banner and logo."),void(this.loading=!1))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](W.a),i["\u0275\u0275directiveInject"](W.g),i["\u0275\u0275directiveInject"](G.b),i["\u0275\u0275directiveInject"](q.a),i["\u0275\u0275directiveInject"](U.a),i["\u0275\u0275directiveInject"]($.ProgramManager),i["\u0275\u0275directiveInject"](Y.a),i["\u0275\u0275directiveInject"](Q.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-program-form"]],viewQuery:function(e,t){if(1&e&&i["\u0275\u0275viewQuery"](ie,3,o.v),2&e){let e;i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.form=e.first)}},hostBindings:function(e,t){1&e&&i["\u0275\u0275listener"]("beforeunload",(function(e){return t.onBeforeUnload(e)}),!1,i["\u0275\u0275resolveWindow"])},decls:32,vars:30,consts:[[3,"component"],["class","loader",4,"ngIf"],[1,"mg-minicopy",3,"keypress","submit"],["form","ngForm"],[1,"form-block","top-row"],["labelPostion","'before'","name","active-toggle",1,"active-program-toggle","post-black","post-step-spacing","post-input",3,"ngModel","ngModelChange"],[1,"form-block"],[1,"input-margin","file-input-upload-wrap"],["required","","previewAspectRatio","16:9","customTitleText","Program Cover Image",3,"previewSize","formControl","ngModel","ngModelChange"],["fileInputUpload",""],[1,"avatar-edit-wrap","user-content","mg-centered"],[3,"overflow"],[1,"avatar-input"],[1,"current-avatar"],["mgIconCompact","",3,"multiple","customTitleText","ngModelOptions","ngModel","ngModelChange"],["fileInput",""],[3,"file","formControl",4,"ngIf"],[1,"input-wrapper"],["name","name",3,"outerFormControl","ngModel","ngModelChange"],["name","ngModel"],[1,""],[3,"roles","selectedRoles","defaultSelected","roleSelect","roleDeselect"],["name","body",3,"ngModel","placeholder","ngModelChange"],[1,"mg-minicopy","footer-button-container"],["type","text",3,"click"],["type","outline",3,"disabled"],[1,"loader"],[1,"loader-content"],["color","primary","mode","indeterminate"],[3,"file","formControl"]],template:function(e,t){if(1&e&&(i["\u0275\u0275element"](0,"mg-legacy-overlay-nav",0),i["\u0275\u0275template"](1,oe,6,3,"div",1),i["\u0275\u0275elementStart"](2,"form",2,3),i["\u0275\u0275listener"]("keypress",(function(e){return t.onFormKeyPress(e)}))("submit",(function(e){return t.submit(e)})),i["\u0275\u0275elementStart"](4,"div",4),i["\u0275\u0275elementStart"](5,"mat-slide-toggle",5),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.fields.active=e})),i["\u0275\u0275text"](6," Active "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"div",6),i["\u0275\u0275elementStart"](8,"div",7),i["\u0275\u0275elementStart"](9,"mg-file-input-upload",8,9),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.programBanner=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"div",10),i["\u0275\u0275elementStart"](12,"mg-avatar",11),i["\u0275\u0275elementStart"](13,"div",12),i["\u0275\u0275element"](14,"div",13),i["\u0275\u0275elementStart"](15,"mg-file-input",14,15),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.programLogoInputFiles=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](17,ae,1,2,"mg-file-upload",16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](18,"div",17),i["\u0275\u0275elementStart"](19,"mg-program-name",18,19),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.fields.title=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](21,"p",20),i["\u0275\u0275text"](22," Allow the following roles to add this program to their minga: "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](23,"mg-multi-select-role",21),i["\u0275\u0275listener"]("roleSelect",(function(e){return t.selectManageRole(e)}))("roleDeselect",(function(e){return t.deselectManageRole(e)})),i["\u0275\u0275pipe"](24,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](25,"mg-textarea",22),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.fields.body=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](26,"div",23),i["\u0275\u0275elementStart"](27,"mg-button",24),i["\u0275\u0275listener"]("click",(function(e){return t.cancel(e)})),i["\u0275\u0275text"](28),i["\u0275\u0275pipe"](29,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](30,"mg-button",25),i["\u0275\u0275text"](31,"Save"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275reference"](3);i["\u0275\u0275property"]("component",t),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.loading),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngModel",t.fields.active),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("previewSize",700)("formControl",t.uploadBannerFormControl)("ngModel",t.programBanner),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("overflow",!1),i["\u0275\u0275advance"](2),i["\u0275\u0275styleProp"]("background-image","url("+t.programLogo+")"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("multiple",!1)("customTitleText","Change")("ngModelOptions",i["\u0275\u0275pureFunction0"](29,se))("ngModel",t.programLogoInputFiles),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.programLogoInputFiles[0]),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("outerFormControl",e.controls.name)("ngModel",t.fields.title),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("roles",i["\u0275\u0275pipeBind1"](24,25,t.availableProgramRoles$))("selectedRoles",t.fields.selectedRoles)("defaultSelected",!t.editing),i["\u0275\u0275advance"](2),i["\u0275\u0275classProp"]("invalid",t.invalidDescription),i["\u0275\u0275property"]("ngModel",t.fields.body)("placeholder","Program Description"),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](29,27,"button.cancel")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",!t.hasChanges||e.invalid)}},directives:[Z.a,r.o,o.E,o.u,o.v,a.a,o.t,o.w,J.a,o.B,o.i,K.a,X.a,w,ee.a,te.a,ne.a,f.a,re.a],pipes:[r.b,s.d],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");.loader[_ngcontent-%COMP%]{position:absolute;z-index:2;top:0;right:0;left:0;bottom:0;background-color:hsla(0,0%,100%,.8)}.loader[_ngcontent-%COMP%]   .loader-content[_ngcontent-%COMP%]{position:absolute;top:50%;right:50%;transform:translateX(50%) translateY(-50%);text-align:center;color:#d1d1d1}.form-block[_ngcontent-%COMP%]{border-bottom:1px solid #a9a9a9;margin:24px 16px}@media (min-width:600px){.form-block[_ngcontent-%COMP%]{margin:24px 32px}.form-block[_ngcontent-%COMP%]:first-child{margin:32px}}.form-block[_ngcontent-%COMP%]:last-child{border:none}.input-wrapper[_ngcontent-%COMP%]{width:100%}.title-text[_ngcontent-%COMP%]{margin-top:0}mg-multi-select-role[_ngcontent-%COMP%]{margin-bottom:1em}.link[_ngcontent-%COMP%]{color:#93f}.link[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}.top-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.top-row[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{margin:auto 0}.active-program-toggle[_ngcontent-%COMP%]{width:auto}.active-program-toggle[_ngcontent-%COMP%]     .mat-slide-toggle-bar{left:100%}.avatar-edit-wrap[_ngcontent-%COMP%]{margin:51px 32px 41px}.avatar-edit-wrap[_ngcontent-%COMP%]   mg-spinner[_ngcontent-%COMP%]{z-index:3}.avatar-edit-wrap[_ngcontent-%COMP%]   mg-spinner[_ngcontent-%COMP%], .current-avatar[_ngcontent-%COMP%]{pointer-events:none;position:absolute;top:0;bottom:0;left:0;right:0}.current-avatar[_ngcontent-%COMP%]{z-index:1;background-size:cover;border-radius:50%}.current-display-name[_ngcontent-%COMP%]{font-family:Muli,sans-serif;line-height:1.35;margin-top:0;margin-bottom:1.8em}@media (orientation:landscape){.current-display-name[_ngcontent-%COMP%]{font-size:4.5449275362vh}}@media (orientation:portrait){.current-display-name[_ngcontent-%COMP%]{font-size:4.5449275362vw}}@media (orientation:landscape) and (max-height:414px){.current-display-name[_ngcontent-%COMP%]{font-size:18.816px}}@media (orientation:portrait) and (max-width:414px){.current-display-name[_ngcontent-%COMP%]{font-size:18.816px}}@media (min-width:439.875px){.current-display-name[_ngcontent-%COMP%]{font-size:19.992px}}mg-avatar[_ngcontent-%COMP%]{--mg-avatar-size:100px;cursor:pointer}@media (hover:hover){mg-avatar[_ngcontent-%COMP%]:hover   .avatar-input[_ngcontent-%COMP%]:before{content:"";position:absolute;z-index:2;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.35);border-radius:50%}mg-avatar[_ngcontent-%COMP%]:hover   mg-file-input[_ngcontent-%COMP%]{z-index:2}}mg-avatar.editing[_ngcontent-%COMP%]   mg-file-input[_ngcontent-%COMP%]{z-index:2}mg-avatar.editing[_ngcontent-%COMP%]   .avatar-input[_ngcontent-%COMP%]:before{content:"";position:absolute;z-index:2;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.35);border-radius:50%}.avatar-input[_ngcontent-%COMP%]   mg-file-upload[_ngcontent-%COMP%]{position:absolute;top:0;pointer-events:none;z-index:1;overflow:hidden;border-radius:50%}.avatar-input[_ngcontent-%COMP%]   mg-file-input[_ngcontent-%COMP%]{position:absolute;z-index:0;left:0;right:0;top:50%;transform:translateY(-50%)}mg-textarea.invalid[_ngcontent-%COMP%]{border-bottom:1px solid red}']}),e})(),ce=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[I.a,l.a,F.a,E,c.c,m.b,d.a,k.a,j.a,T.a,R.a,r.c,o.m,o.A,a.b,s.c]]}),e})()},wKCx:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PermissionOverrideAdminClient=t.PermissionOverrideAdmin=void 0;const r=n("jbKS");class i{}t.PermissionOverrideAdmin=i,i.serviceName="minga.permission.PermissionOverrideAdmin",i.SetPermissionOverride={methodName:"SetPermissionOverride",service:i,requestStream:!1,responseStream:!1,requestType:r.SetPermissionOverrideRequest,responseType:r.SetPermissionOverrideResponse},i.UnsetPermissionOverride={methodName:"UnsetPermissionOverride",service:i,requestStream:!1,responseStream:!1,requestType:r.UnsetPermissionOverrideRequest,responseType:r.UnsetPermissionOverrideResponse},i.GetPermissionOverrides={methodName:"GetPermissionOverrides",service:i,requestStream:!1,responseStream:!1,requestType:r.GetPermissionOverridesRequest,responseType:r.GetPermissionOverridesResponse},t.PermissionOverrideAdminClient=class{setPermissionOverride(){throw new Error("minga_protoc_gen_improbable_eng_grpc_web client methods are unimplemented")}unsetPermissionOverride(){throw new Error("minga_protoc_gen_improbable_eng_grpc_web client methods are unimplemented")}getPermissionOverrides(){throw new Error("minga_protoc_gen_improbable_eng_grpc_web client methods are unimplemented")}}},xVyk:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamProgramContextContentInfo=t.StreamProgramContextInfo=void 0;const r=n("hRO2"),i=n("PYFZ"),o=n("5Jf8");class a extends r.Message{constructor(e){super(),r.Message.initialize(this,e,0,-1,null,null)}toObject(e){return a.toObject(e||!1,this)}static toObject(e,t){var n,r={itemMetadata:(n=t.getItemMetadata())&&i.StreamItemMetadata.toObject(e,n),item:(n=t.getItem())&&a.StreamItem.toObject(e,n)};return e&&(r.$jspbMessageInstance=t),r}static deserializeBinary(e){var t=new r.BinaryReader(e),n=new a;return a.deserializeBinaryFromReader(n,t)}static deserializeBinaryFromReader(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=new i.StreamItemMetadata;t.readMessage(n,i.StreamItemMetadata.deserializeBinaryFromReader),e.setItemMetadata(n);break;case 2:var r=new a.StreamItem;t.readMessage(r,a.StreamItem.deserializeBinaryFromReader),e.setItem(r);break;default:t.skipField()}return e}static serializeBinaryToWriter(e,t){var n=void 0;null!=(n=e.getItemMetadata())&&t.writeMessage(1,n,i.StreamItemMetadata.serializeBinaryToWriter),null!=(n=e.getItem())&&t.writeMessage(2,n,a.StreamItem.serializeBinaryToWriter)}serializeBinary(){var e=new r.BinaryWriter;return a.serializeBinaryToWriter(this,e),e.getResultBuffer()}getItemMetadata(){return r.Message.getWrapperField(this,i.StreamItemMetadata,1)}setItemMetadata(e){r.Message.setWrapperField(this,1,e)}clearItemMetadata(){this.setItemMetadata(void 0)}hasItemMetadata(){return null!=r.Message.getField(this,1)}getItem(){return r.Message.getWrapperField(this,a.StreamItem,2)}setItem(e){r.Message.setWrapperField(this,2,e)}clearItem(){this.setItem(void 0)}hasItem(){return null!=r.Message.getField(this,2)}}t.StreamProgramContextInfo=a,a.displayName="StreamProgramContextInfo",function(e){class t extends r.Message{constructor(e){super(),r.Message.initialize(this,e,0,-1,null,null)}toObject(e){return t.toObject(e||!1,this)}static toObject(e,t){var n,i={title:r.Message.getFieldWithDefault(t,1,""),description:r.Message.getFieldWithDefault(t,2,""),logo:(n=t.getLogo())&&o.ImageInfo.toObject(e,n),banner:(n=t.getBanner())&&o.ImageInfo.toObject(e,n),contentHash:r.Message.getFieldWithDefault(t,5,""),programContextHash:r.Message.getFieldWithDefault(t,6,""),mingaHash:r.Message.getFieldWithDefault(t,7,"")};return e&&(i.$jspbMessageInstance=t),i}static deserializeBinary(e){var n=new r.BinaryReader(e),i=new t;return t.deserializeBinaryFromReader(i,n)}static deserializeBinaryFromReader(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setTitle(n);break;case 2:var r=t.readString();e.setDescription(r);break;case 3:var i=new o.ImageInfo;t.readMessage(i,o.ImageInfo.deserializeBinaryFromReader),e.setLogo(i);break;case 4:var a=new o.ImageInfo;t.readMessage(a,o.ImageInfo.deserializeBinaryFromReader),e.setBanner(a);break;case 5:var s=t.readString();e.setContentHash(s);break;case 6:var l=t.readString();e.setProgramContextHash(l);break;case 7:var c=t.readString();e.setMingaHash(c);break;default:t.skipField()}return e}static serializeBinaryToWriter(e,t){var n=void 0;(n=e.getTitle()).length>0&&t.writeString(1,n),(n=e.getDescription()).length>0&&t.writeString(2,n),null!=(n=e.getLogo())&&t.writeMessage(3,n,o.ImageInfo.serializeBinaryToWriter),null!=(n=e.getBanner())&&t.writeMessage(4,n,o.ImageInfo.serializeBinaryToWriter),(n=e.getContentHash()).length>0&&t.writeString(5,n),(n=e.getProgramContextHash()).length>0&&t.writeString(6,n),(n=e.getMingaHash()).length>0&&t.writeString(7,n)}serializeBinary(){var t=new r.BinaryWriter;return e.StreamItem.serializeBinaryToWriter(this,t),t.getResultBuffer()}getTitle(){return r.Message.getFieldWithDefault(this,1,"")}setTitle(e){r.Message.setProto3StringField(this,1,e)}getDescription(){return r.Message.getFieldWithDefault(this,2,"")}setDescription(e){r.Message.setProto3StringField(this,2,e)}getLogo(){return r.Message.getWrapperField(this,o.ImageInfo,3)}setLogo(e){r.Message.setWrapperField(this,3,e)}clearLogo(){this.setLogo(void 0)}hasLogo(){return null!=r.Message.getField(this,3)}getBanner(){return r.Message.getWrapperField(this,o.ImageInfo,4)}setBanner(e){r.Message.setWrapperField(this,4,e)}clearBanner(){this.setBanner(void 0)}hasBanner(){return null!=r.Message.getField(this,4)}getContentHash(){return r.Message.getFieldWithDefault(this,5,"")}setContentHash(e){r.Message.setProto3StringField(this,5,e)}getProgramContextHash(){return r.Message.getFieldWithDefault(this,6,"")}setProgramContextHash(e){r.Message.setProto3StringField(this,6,e)}getMingaHash(){return r.Message.getFieldWithDefault(this,7,"")}setMingaHash(e){r.Message.setProto3StringField(this,7,e)}}t.displayName="StreamProgramContextInfo.StreamItem",e.StreamItem=t}(a=t.StreamProgramContextInfo||(t.StreamProgramContextInfo={}));class s extends r.Message{constructor(e){super(),r.Message.initialize(this,e,0,-1,null,null)}toObject(e){return s.toObject(e||!1,this)}static toObject(e,t){var n,r={itemMetadata:(n=t.getItemMetadata())&&i.StreamItemMetadata.toObject(e,n),item:(n=t.getItem())&&s.StreamItem.toObject(e,n)};return e&&(r.$jspbMessageInstance=t),r}static deserializeBinary(e){var t=new r.BinaryReader(e),n=new s;return s.deserializeBinaryFromReader(n,t)}static deserializeBinaryFromReader(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=new i.StreamItemMetadata;t.readMessage(n,i.StreamItemMetadata.deserializeBinaryFromReader),e.setItemMetadata(n);break;case 2:var r=new s.StreamItem;t.readMessage(r,s.StreamItem.deserializeBinaryFromReader),e.setItem(r);break;default:t.skipField()}return e}static serializeBinaryToWriter(e,t){var n=void 0;null!=(n=e.getItemMetadata())&&t.writeMessage(1,n,i.StreamItemMetadata.serializeBinaryToWriter),null!=(n=e.getItem())&&t.writeMessage(2,n,s.StreamItem.serializeBinaryToWriter)}serializeBinary(){var e=new r.BinaryWriter;return s.serializeBinaryToWriter(this,e),e.getResultBuffer()}getItemMetadata(){return r.Message.getWrapperField(this,i.StreamItemMetadata,1)}setItemMetadata(e){r.Message.setWrapperField(this,1,e)}clearItemMetadata(){this.setItemMetadata(void 0)}hasItemMetadata(){return null!=r.Message.getField(this,1)}getItem(){return r.Message.getWrapperField(this,s.StreamItem,2)}setItem(e){r.Message.setWrapperField(this,2,e)}clearItem(){this.setItem(void 0)}hasItem(){return null!=r.Message.getField(this,2)}}t.StreamProgramContextContentInfo=s,s.displayName="StreamProgramContextContentInfo",function(e){class t extends r.Message{constructor(t){super(),r.Message.initialize(this,t,0,-1,null,e.StreamItem.oneofGroups_)}getOverlayImageCase(){return r.Message.computeOneofCase(this,e.StreamItem.oneofGroups_[0])}toObject(e){return t.toObject(e||!1,this)}static toObject(e,t){var n,i={contentHash:r.Message.getFieldWithDefault(t,1,""),title:r.Message.getFieldWithDefault(t,2,""),description:r.Message.getFieldWithDefault(t,3,""),imageInfo:(n=t.getImageInfo())&&o.ImageInfo.toObject(e,n),fullImage:r.Message.getBooleanFieldWithDefault(t,5,!1),lightContent:r.Message.getBooleanFieldWithDefault(t,6,!1),timestamp:r.Message.getFieldWithDefault(t,7,0),typeString:r.Message.getFieldWithDefault(t,8,""),contextHash:r.Message.getFieldWithDefault(t,9,""),icon:r.Message.getFieldWithDefault(t,10,""),pollLayout:r.Message.getFieldWithDefault(t,11,0)};return e&&(i.$jspbMessageInstance=t),i}static deserializeBinary(e){var n=new r.BinaryReader(e),i=new t;return t.deserializeBinaryFromReader(i,n)}static deserializeBinaryFromReader(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setContentHash(n);break;case 2:var r=t.readString();e.setTitle(r);break;case 3:var i=t.readString();e.setDescription(i);break;case 4:var a=new o.ImageInfo;t.readMessage(a,o.ImageInfo.deserializeBinaryFromReader),e.setImageInfo(a);break;case 5:var s=t.readBool();e.setFullImage(s);break;case 6:var l=t.readBool();e.setLightContent(l);break;case 7:var c=t.readUint64();e.setTimestamp(c);break;case 8:var d=t.readString();e.setTypeString(d);break;case 9:var m=t.readString();e.setContextHash(m);break;case 10:var g=t.readString();e.setIcon(g);break;case 11:var p=t.readEnum();e.setPollLayout(p);break;default:t.skipField()}return e}static serializeBinaryToWriter(e,t){var n=void 0;(n=e.getContentHash()).length>0&&t.writeString(1,n),(n=e.getTitle()).length>0&&t.writeString(2,n),(n=e.getDescription()).length>0&&t.writeString(3,n),null!=(n=e.getImageInfo())&&t.writeMessage(4,n,o.ImageInfo.serializeBinaryToWriter),(n=e.getFullImage())&&t.writeBool(5,n),(n=e.getLightContent())&&t.writeBool(6,n),0!==(n=e.getTimestamp())&&t.writeUint64(7,n),(n=e.getTypeString()).length>0&&t.writeString(8,n),(n=e.getContextHash()).length>0&&t.writeString(9,n),(n=e.getIcon()).length>0&&t.writeString(10,n),null!=(n=r.Message.getField(e,11))&&t.writeEnum(11,n)}serializeBinary(){var t=new r.BinaryWriter;return e.StreamItem.serializeBinaryToWriter(this,t),t.getResultBuffer()}getContentHash(){return r.Message.getFieldWithDefault(this,1,"")}setContentHash(e){r.Message.setProto3StringField(this,1,e)}getTitle(){return r.Message.getFieldWithDefault(this,2,"")}setTitle(e){r.Message.setProto3StringField(this,2,e)}getDescription(){return r.Message.getFieldWithDefault(this,3,"")}setDescription(e){r.Message.setProto3StringField(this,3,e)}getImageInfo(){return r.Message.getWrapperField(this,o.ImageInfo,4)}setImageInfo(e){r.Message.setWrapperField(this,4,e)}clearImageInfo(){this.setImageInfo(void 0)}hasImageInfo(){return null!=r.Message.getField(this,4)}getFullImage(){return r.Message.getBooleanFieldWithDefault(this,5,!1)}setFullImage(e){r.Message.setProto3BooleanField(this,5,e)}getLightContent(){return r.Message.getBooleanFieldWithDefault(this,6,!1)}setLightContent(e){r.Message.setProto3BooleanField(this,6,e)}getTimestamp(){return r.Message.getFieldWithDefault(this,7,0)}setTimestamp(e){r.Message.setProto3IntField(this,7,e)}getTypeString(){return r.Message.getFieldWithDefault(this,8,"")}setTypeString(e){r.Message.setProto3StringField(this,8,e)}getContextHash(){return r.Message.getFieldWithDefault(this,9,"")}setContextHash(e){r.Message.setProto3StringField(this,9,e)}getIcon(){return r.Message.getFieldWithDefault(this,10,"")}setIcon(e){r.Message.setProto3StringField(this,10,e)}getPollLayout(){return r.Message.getFieldWithDefault(this,11,0)}setPollLayout(t){r.Message.setOneofField(this,11,e.StreamItem.oneofGroups_[0],t)}clearPollLayout(){r.Message.setOneofField(this,11,e.StreamItem.oneofGroups_[0],void 0)}hasPollLayout(){return null!=r.Message.getField(this,11)}}t.displayName="StreamProgramContextContentInfo.StreamItem",t.oneofGroups_=[[11]],e.StreamItem=t}(s=t.StreamProgramContextContentInfo||(t.StreamProgramContextContentInfo={})),function(e){let t;!function(e){let t;!function(e){e[e.OVERLAY_IMAGE_NOT_SET=0]="OVERLAY_IMAGE_NOT_SET",e[e.POLL_LAYOUT=11]="POLL_LAYOUT"}(t=e.OverlayImageCase||(e.OverlayImageCase={}))}(t=e.StreamItem||(e.StreamItem={}))}(s=t.StreamProgramContextContentInfo||(t.StreamProgramContextContentInfo={}))}}]);
//# sourceMappingURL=default~minga-app-src-app-routes-admin-AdminRoutes-module~minga-app-src-app-routes-admin-PeopleAdmin~497d4818-es2015.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{"Fc/5":function(e,t,a){"use strict";a.r(t),a.d(t,"PageRoutingModule",(function(){return o}));var i=a("8Y7J"),n=a("iInd"),r=a("YLVZ"),s=a("Q6wb");let o=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[s.a,n.k.forChild([{path:"",component:r.a}])]]}),e})()},"I+WV":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageServiceClient=t.PageService=void 0;const i=a("e/yl");class n{}t.PageService=n,n.serviceName="PageService",n.readPage={methodName:"readPage",service:n,requestStream:!1,responseStream:!1,requestType:i.PageRequest,responseType:i.PageResponse},t.PageServiceClient=class{readPage(){throw new Error("minga_protoc_gen_improbable_eng_grpc_web client methods are unimplemented")}}},Q6wb:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var i=a("SVse"),n=a("8Y7J"),r=a("CL15"),s=a("7Tcv");a("YLVZ");let o=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[s.a,r.a,i.c]]}),e})()},YLVZ:function(e,t,a){"use strict";a.d(t,"a",(function(){return y}));var i=a("mrSG"),n=(a("mmWe"),a("8Y7J")),r=a("oAJy"),s=a("QPZY"),o=a("e/yl"),l=a("iInd"),g=a("mwiY"),c=a("cUpR"),d=a("Y9fu"),u=a("SYVq"),h=a("SVse"),p=a("sj4O");function m(e,t){if(1&e&&n["\u0275\u0275element"](0,"div",5),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275styleProp"]("margin",e.margin),n["\u0275\u0275property"]("innerHTML",e.htmlContent,n["\u0275\u0275sanitizeHtml"])}}function f(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",6),n["\u0275\u0275text"](1," Not Found "),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275styleProp"]("margin",e.margin)}}function v(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275template"](1,m,1,3,"div",3),n["\u0275\u0275template"](2,f,2,2,"div",4),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.pageData&&e.htmlContent),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!e.pageData)}}function P(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",7),n["\u0275\u0275element"](1,"mg-spinner"),n["\u0275\u0275elementEnd"]())}let y=(()=>{class e{constructor(e,t,a,i,n,r){this.route=e,this.pageService=t,this.sanitizer=a,this.router=i,this.linkOpener=n,this.element=r,this.path="",this.useCache=!0,this.margin=32,this.pageData=null,this._loading=!1,this.linkEls=[],e.params.subscribe(e=>{if(e.path){let t=this.path;this.path=e.path,this._pagePathChanged(e.path,t)}})}get loading(){return this._loading}loadPageFast(){return Object(i.a)(this,void 0,void 0,(function*(){yield r.getItem("page:"+this.path)}))}loadPage(){return Object(i.a)(this,void 0,void 0,(function*(){this._loading=!0;let e=new o.PageRequest;e.setPagePath(this.path);let t=yield this.pageService.readPage(e);if(t.getStatus()==s.StatusCode.OK&&t.hasPage()){const e=t.getPage().toObject();this.pageData=e,this.htmlContent=this.sanitizer.bypassSecurityTrustHtml(e.htmlContent),yield r.setItem("page:"+e.path,e),this.initLinkListeners(),setTimeout(()=>{this.initLinkListeners()},30)}this._loading=!1}))}initLinkListeners(){const e=document.getElementsByClassName("router-link"),t=this.element.nativeElement.getElementsByTagName("a");if(e)for(let a=0;a<e.length;++a){const t=e[a];(t.classList.contains("router-link")||t.dataset&&t.dataset.routerLinkJson)&&(t.addEventListener("click",this.onRouterLinkClick.bind(this)),this.linkEls.push(t))}if(t&&!window.MINGA_APP_BROWSER)for(let a=0;a<t.length;++a){const e=t[a];e.href.includes("mailto:")&&!e.href.includes("tel:")||e.addEventListener("click",this.onAnchorClick.bind(this))}}onAnchorClick(e){e.preventDefault(),e.stopImmediatePropagation(),this.linkOpener.open(e.target.href)}onRouterLinkClick(e){if(e&&e.target.dataset.routerLinkJson)try{const t=JSON.parse(e.target.dataset.routerLinkJson);this.router.navigate([t.path?t.path:"",{outlets:{o:t.outlets?t.outlets:null}}])}catch(t){console.error("onRouterLinkClick invalid JSON with value: "+e.target.dataset.routerLinkJson,t)}}_pagePathChanged(e,t){return Object(i.a)(this,void 0,void 0,(function*(){yield this.loadPage()}))}ngOnChanges(e){e.path&&this._pagePathChanged(e.path.currentValue,e.path.previousValue)}ngOnDestroy(){this.linkEls.forEach(e=>{e.removeEventListener("click",this.onRouterLinkClick)})}}return e.\u0275fac=function(t){return new(t||e)(n["\u0275\u0275directiveInject"](l.a),n["\u0275\u0275directiveInject"](g.PageService),n["\u0275\u0275directiveInject"](c.b),n["\u0275\u0275directiveInject"](l.g),n["\u0275\u0275directiveInject"](d.a),n["\u0275\u0275directiveInject"](n.ElementRef))},e.\u0275cmp=n["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-page"]],inputs:{path:"path",useCache:"useCache",margin:"margin"},features:[n["\u0275\u0275NgOnChangesFeature"]],decls:3,vars:3,consts:[[3,"component"],[4,"ngIf"],["class","loader",4,"ngIf"],["class","page-html-content",3,"innerHTML","margin",4,"ngIf"],["class","page-html-content",3,"margin",4,"ngIf"],[1,"page-html-content",3,"innerHTML"],[1,"page-html-content"],[1,"loader"]],template:function(e,t){1&e&&(n["\u0275\u0275element"](0,"mg-legacy-overlay-nav",0),n["\u0275\u0275template"](1,v,3,2,"div",1),n["\u0275\u0275template"](2,P,2,0,"div",2)),2&e&&(n["\u0275\u0275property"]("component",t),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.loading),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.loading))},directives:[u.a,h.o,p.a],styles:[".page-html-content[_ngcontent-%COMP%]{margin:32px}.loader[_ngcontent-%COMP%]{padding:32px;text-align:center}.innerCell[_ngcontent-%COMP%]{border-radius:8px;background-color:#fff;padding:2%;border-style:solid;border-width:1px;font-size:80%;margin:3%}.innerCell[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 .32em}.innerCell[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 .5em}"]}),e})()},"e/yl":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageStyle=t.PageResponse=t.PageRequest=t.Page=void 0;const i=a("hRO2"),n=a("QPZY");class r extends i.Message{constructor(e){super(),i.Message.initialize(this,e,0,-1,null,null)}toObject(e){return r.toObject(e||!1,this)}static toObject(e,t){var a,r={hash:(a=t.getHash())&&n.UniqueHash.toObject(e,a),path:i.Message.getFieldWithDefault(t,2,""),htmlContent:i.Message.getFieldWithDefault(t,3,""),style:i.Message.getFieldWithDefault(t,4,0)};return e&&(r.$jspbMessageInstance=t),r}static deserializeBinary(e){var t=new i.BinaryReader(e),a=new r;return r.deserializeBinaryFromReader(a,t)}static deserializeBinaryFromReader(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var a=new n.UniqueHash;t.readMessage(a,n.UniqueHash.deserializeBinaryFromReader),e.setHash(a);break;case 2:var i=t.readString();e.setPath(i);break;case 3:var r=t.readString();e.setHtmlContent(r);break;case 4:var s=t.readEnum();e.setStyle(s);break;default:t.skipField()}return e}static serializeBinaryToWriter(e,t){var a=void 0;null!=(a=e.getHash())&&t.writeMessage(1,a,n.UniqueHash.serializeBinaryToWriter),(a=e.getPath()).length>0&&t.writeString(2,a),(a=e.getHtmlContent()).length>0&&t.writeString(3,a),0!==(a=e.getStyle())&&t.writeEnum(4,a)}serializeBinary(){var e=new i.BinaryWriter;return r.serializeBinaryToWriter(this,e),e.getResultBuffer()}getHash(){return i.Message.getWrapperField(this,n.UniqueHash,1)}setHash(e){i.Message.setWrapperField(this,1,e)}clearHash(){this.setHash(void 0)}hasHash(){return null!=i.Message.getField(this,1)}getPath(){return i.Message.getFieldWithDefault(this,2,"")}setPath(e){i.Message.setProto3StringField(this,2,e)}getHtmlContent(){return i.Message.getFieldWithDefault(this,3,"")}setHtmlContent(e){i.Message.setProto3StringField(this,3,e)}getStyle(){return i.Message.getFieldWithDefault(this,4,0)}setStyle(e){i.Message.setProto3EnumField(this,4,e)}}t.Page=r,r.displayName="Page";class s extends i.Message{constructor(e){super(),i.Message.initialize(this,e,0,-1,null,null)}toObject(e){return s.toObject(e||!1,this)}static toObject(e,t){var a,r={hash:(a=t.getHash())&&n.UniqueHash.toObject(e,a),pagePath:i.Message.getFieldWithDefault(t,2,"")};return e&&(r.$jspbMessageInstance=t),r}static deserializeBinary(e){var t=new i.BinaryReader(e),a=new s;return s.deserializeBinaryFromReader(a,t)}static deserializeBinaryFromReader(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var a=new n.UniqueHash;t.readMessage(a,n.UniqueHash.deserializeBinaryFromReader),e.setHash(a);break;case 2:var i=t.readString();e.setPagePath(i);break;default:t.skipField()}return e}static serializeBinaryToWriter(e,t){var a=void 0;null!=(a=e.getHash())&&t.writeMessage(1,a,n.UniqueHash.serializeBinaryToWriter),(a=e.getPagePath()).length>0&&t.writeString(2,a)}serializeBinary(){var e=new i.BinaryWriter;return s.serializeBinaryToWriter(this,e),e.getResultBuffer()}getHash(){return i.Message.getWrapperField(this,n.UniqueHash,1)}setHash(e){i.Message.setWrapperField(this,1,e)}clearHash(){this.setHash(void 0)}hasHash(){return null!=i.Message.getField(this,1)}getPagePath(){return i.Message.getFieldWithDefault(this,2,"")}setPagePath(e){i.Message.setProto3StringField(this,2,e)}}t.PageRequest=s,s.displayName="PageRequest";class o extends i.Message{constructor(e){super(),i.Message.initialize(this,e,0,-1,null,null)}toObject(e){return o.toObject(e||!1,this)}static toObject(e,t){var a,n={status:i.Message.getFieldWithDefault(t,1,0),page:(a=t.getPage())&&r.toObject(e,a)};return e&&(n.$jspbMessageInstance=t),n}static deserializeBinary(e){var t=new i.BinaryReader(e),a=new o;return o.deserializeBinaryFromReader(a,t)}static deserializeBinaryFromReader(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var a=t.readEnum();e.setStatus(a);break;case 2:var i=new r;t.readMessage(i,r.deserializeBinaryFromReader),e.setPage(i);break;default:t.skipField()}return e}static serializeBinaryToWriter(e,t){var a=void 0;0!==(a=e.getStatus())&&t.writeEnum(1,a),null!=(a=e.getPage())&&t.writeMessage(2,a,r.serializeBinaryToWriter)}serializeBinary(){var e=new i.BinaryWriter;return o.serializeBinaryToWriter(this,e),e.getResultBuffer()}getStatus(){return i.Message.getFieldWithDefault(this,1,0)}setStatus(e){i.Message.setProto3EnumField(this,1,e)}getPage(){return i.Message.getWrapperField(this,r,2)}setPage(e){i.Message.setWrapperField(this,2,e)}clearPage(){this.setPage(void 0)}hasPage(){return null!=i.Message.getField(this,2)}}var l;t.PageResponse=o,o.displayName="PageResponse",(l=t.PageStyle||(t.PageStyle={}))[l.DRY=0]="DRY"},mwiY:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageService=void 0,a("8Y7J");const i=a("+6wJ"),n=a("I+WV"),r=a("8Y7J");class s{constructor(e){this._ngZone=e}readPage(e,t,a){let r,s,o;"function"==typeof t?s=t:(o=t,s=a),s||(r=new Promise((e,t)=>{s=(a,i)=>{a?t(a):e(i)}}));let l=null,g=i.grpc.invoke(n.PageService.readPage,{request:e,host:window.DEFAULT_ANGULAR_GRPC_HOST||"https://"+location.hostname,metadata:o,onHeaders:e=>l=e,onMessage:e=>this._ngZone.run(()=>{s(null,e,l||new i.grpc.Metadata)}),onEnd:(e,t,a)=>this._ngZone.run(()=>{if(e!=i.grpc.Code.OK){let a=new Error(t);a.code=e,s(a)}})});return r.cancel=()=>g.close(),r}}t.PageService=s,s.\u0275fac=function(e){return new(e||s)(r.\u0275\u0275inject(r.NgZone))},s.\u0275prov=r.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"})}}]);
//# sourceMappingURL=default~minga-app-src-app-overlays-AboutUs-AboutUsOverlayRouting-module~minga-app-src-app-page-PageR~85716d22-es2015.js.map
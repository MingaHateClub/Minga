!function(){function e(t,n){return(e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(t,n)}function t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,o=r(e);if(t){var a=r(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return n(this,i)}}function n(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}function o(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(p){l=!0,i=p}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */l=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(I){c=function(e,t,n){return e[t]=n}}function p(e,t,n,i){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),s=new _(i||[]);return r(a,"_invoke",{value:O(e,n,s)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(I){return{type:"throw",arg:I}}}e.wrap=p;var g={};function m(){}function d(){}function h(){}var f={};c(f,o,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,o)&&(f=b);var x=h.prototype=m.prototype=Object.create(f);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var i;r(this,"_invoke",{value:function(r,o){function a(){return new t((function(i,a){!function r(i,o,a,s){var c=u(e[i],e,o);if("throw"!==c.type){var l=c.arg,p=l.value;return p&&"object"==typeof p&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}(r,o,i,a)}))}return i=i?i.then(a,a):a()}})}function O(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return S()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function w(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=u(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,g;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,g):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,g)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=h,r(x,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:d,configurable:!0}),d.displayName=c(h,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,s,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},C(y.prototype),c(y.prototype,a,(function(){return this})),e.AsyncIterator=y,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new y(p(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(x),c(x,s,"Generator"),c(x,o,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),g}},e}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,"symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"))?o:String(o)),r)}var i,o}function u(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"/652":function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n("5JS3");var r,i=n("SVse"),o=n("8Y7J"),a=n("u9T3"),s=n("s7LF"),c=n("Q2Ze"),l=n("Tj54"),p=n("e6WT"),m=n("CO6v"),d=n("gtkb"),h=n("fHWq"),f=n("26Ds"),v=n("gU2t"),b=n("5VmK"),x=n("HxU+"),C=n("ls3q"),y=n("Vwx4"),O=((r=u((function e(){g(this,e)}))).\u0275fac=function(e){return new(e||r)},r.\u0275mod=o["\u0275\u0275defineNgModule"]({type:r}),r.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[h.a,m.a,b.a,d.a,f.a,v.a,C.a,x.a,y.b,i.c,s.m,a.a,p.c,c.f,l.b]]}),r)},"/MKM":function(e,t,n){"use strict";n.d(t,"a",(function(){return I})),n.d(t,"b",(function(){return R}));var r=n("mrSG"),i=n("8Y7J"),o=n("SxV6"),a=n("lJxs"),s=n("vcU5"),c=n("Cnb3"),p=n("BT4S"),m=n("iIBE"),d=n("iInd"),h=n("Ept+"),f=n("5j5R"),v=n("Vwx4"),b=n("/q54"),x=n("M4qg"),C=n("TUjp"),y=n("SVse"),O=n("CeZx"),w=n("Q5WP"),M=n("2FiO");function P(e,t){if(1&e&&(i["\u0275\u0275element"](0,"mg-search-content",4),i["\u0275\u0275pipe"](1,"async")),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("groupHashes",i["\u0275\u0275pipeBind1"](1,2,n.groupHash$))("query",n.searchText)}}function _(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mg-ellipsis",5),i["\u0275\u0275listener"]("click",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onGroupContextMenu(e)})),i["\u0275\u0275elementEnd"]()}}var k,S,I=((k=function(){function e(t,n,r,i,o,a,s){g(this,e),this.route=t,this.groupsFacade=n,this.groupState=r,this.router=i,this.permissions=o,this.media=a,this._peopleSelector=s,this.groupHash$=this.groupsFacade.getCurrentGroupHashObservable(),this.canEditMembers=!1,this.searchText="",this.mqAlias="",this.clusterSize=4,this.group$=this.groupsFacade.getCurrentGroup(),this.groupDetails$=this.groupsFacade.getCurrentGroupDetails()}return u(e,[{key:"onLeaveGroup",value:function(e){this.groupState.openLeaveDialog(e)}},{key:"openMemberList",value:function(){return Object(r.a)(this,void 0,void 0,l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.group$.pipe(Object(o.a)()).toPromise();case 2:return t=e.sent.hash,e.next=5,this.router.navigate(["",{outlets:{o:["groups","members",t]}}]);case 5:case"end":return e.stop()}}),e,this)})))}},{key:"onAddMembers",value:function(){return Object(r.a)(this,void 0,void 0,l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.group$.pipe(Object(o.a)()).toPromise();case 2:t=e.sent,this._peopleSelector.open("Group","add",{title:t.name,data:{groupHash:t.hash}});case 4:case"end":return e.stop()}}),e,this)})))}},{key:"onRemoveMembers",value:function(){return Object(r.a)(this,void 0,void 0,l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.group$.pipe(Object(o.a)()).toPromise();case 2:t=e.sent,this._peopleSelector.open("Group","remove",{title:t.name,data:{groupHash:t.hash}});case 4:case"end":return e.stop()}}),e,this)})))}},{key:"checkIfCanEditMembers",value:function(){return Object(r.a)(this,void 0,void 0,l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.permissions.hasPermission(c.MingaPermission.CONTENT_GROUP_MANAGE),e.next=3,this.group$.pipe(Object(o.a)()).toPromise();case 3:n=e.sent,this.canEditMembers=m.a.isOwner(n)||t;case 5:case"end":return e.stop()}}),e,this)})))}},{key:"onGroupContextMenu",value:function(e){this.groupDetailsComponent?this.groupState.onGroupContextMenu({group:this.groupDetailsComponent.group,x:e.pageX,y:e.pageY}):console.warn("groupDetailsComponent unset")}},{key:"ngOnInit",value:function(){var e=this;this.route.paramMap.pipe(Object(a.a)((function(e){return e.get("groupHash")}))).subscribe((function(t){t&&(e.groupsFacade.setCurrentGroupHash(t),e.groupsFacade.loadGroupCollectionIfMissing(t),e.groupsFacade.dispatchLoadGroupDetails(t),e.groupsFacade.dispatchMarkAsRead(t))})),this.mqAliasSubscription=this.media.asObservable().subscribe((function(t){e.mqAlias=t[0].mqAlias,e.clusterSize="xs"==e.mqAlias&&e.canEditMembers?1:4})),this.groupSubscription=this.group$.subscribe((function(t){if(e.group=t,e.group&&e.group.bannerObject&&e.group.bannerObject.hasHeadlineOptions()){var n=e.group.bannerObject.getHeadlineOptions();Object(s.a)(n.toObject())}})),this.checkIfCanEditMembers()}},{key:"ngOnDestroy",value:function(){this.groupSubscription&&this.groupSubscription.unsubscribe(),this.mqAliasSubscription&&this.mqAliasSubscription.unsubscribe(),this.groupsFacade.setCurrentGroupHash("")}},{key:"hasGroupContextMenu",value:function(){return m.a.isMember(this.group||null)||this.permissions.hasPermission(c.MingaPermission.MINGA_CONTENT_UPDATE_OTHERS)}}]),e}()).\u0275fac=function(e){return new(e||k)(i["\u0275\u0275directiveInject"](d.a),i["\u0275\u0275directiveInject"](h.a),i["\u0275\u0275directiveInject"](f.a),i["\u0275\u0275directiveInject"](d.g),i["\u0275\u0275directiveInject"](v.c),i["\u0275\u0275directiveInject"](b.g),i["\u0275\u0275directiveInject"](x.PeopleSelectorService))},k.\u0275cmp=i["\u0275\u0275defineComponent"]({type:k,selectors:[["view-group-page"]],viewQuery:function(e,t){var n;1&e&&i["\u0275\u0275viewQuery"](p.a,3),2&e&&i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.groupDetailsComponent=n.first)},decls:9,vars:16,consts:[["mgSearchArea","",3,"placeholder","searchText"],[3,"group","groupDetails","clusterSize","canEditMembers","leaveGroup","requestToJoin","cancelRequestToJoin","openMemberList","addMembers","removeMembers"],["class","group-name-suffix",3,"click",4,"ngIf"],[3,"group","groupDetails"],[3,"groupHashes","query"],[1,"group-name-suffix",3,"click"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,P,2,4,"ng-template",0),i["\u0275\u0275listener"]("searchText",(function(e){return t.searchText=e})),i["\u0275\u0275elementStart"](1,"mg-group-details",1),i["\u0275\u0275listener"]("leaveGroup",(function(e){return t.onLeaveGroup(e)}))("requestToJoin",(function(e){return t.groupsFacade.dispatchRequestToJoinGroup(e)}))("cancelRequestToJoin",(function(e){return t.groupsFacade.dispatchCancelRequestToJoinGroup(e)}))("openMemberList",(function(){return t.openMemberList()}))("addMembers",(function(){return t.onAddMembers()}))("removeMembers",(function(){return t.onRemoveMembers()})),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275pipe"](3,"async"),i["\u0275\u0275template"](4,_,1,0,"mg-ellipsis",2),i["\u0275\u0275element"](5,"mg-group-details-tabs",3),i["\u0275\u0275pipe"](6,"async"),i["\u0275\u0275pipe"](7,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](8,"router-outlet")),2&e&&(i["\u0275\u0275property"]("placeholder","Search "+(null==t.group?null:t.group.name)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("group",i["\u0275\u0275pipeBind1"](2,8,t.group$))("groupDetails",i["\u0275\u0275pipeBind1"](3,10,t.groupDetails$))("clusterSize",t.clusterSize)("canEditMembers",t.canEditMembers),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",t.hasGroupContextMenu()),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("group",i["\u0275\u0275pipeBind1"](6,12,t.group$))("groupDetails",i["\u0275\u0275pipeBind1"](7,14,t.groupDetails$)))},directives:[C.a,p.a,y.o,O.a,d.l,w.a,M.a],pipes:[y.b],styles:[""],changeDetection:0}),k),E=n("gU2t"),j=n("4SDa"),T=n("1FgE"),G=n("Ogcz"),F=n("DjdL"),L=n("HDrY"),R=((S=u((function e(){g(this,e)}))).\u0275fac=function(e){return new(e||S)},S.\u0275mod=i["\u0275\u0275defineNgModule"]({type:S}),S.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[j.a,F.d,E.a,L.a,T.a,G.b,v.b,y.c,d.k]]}),S)},"1FgE":function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n("CeZx");var r,i=n("SVse"),o=n("8Y7J"),a=n("u9T3"),s=n("iInd"),c=n("0hYQ"),l=n("Vwx4"),p=n("Ogcz"),m=((r=u((function e(){g(this,e)}))).\u0275fac=function(e){return new(e||r)},r.\u0275mod=o["\u0275\u0275defineNgModule"]({type:r}),r.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[p.b,c.a,l.b,i.c,s.k,a.a]]}),r)},"2/6D":function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n("t/nq");var r,i=n("SVse"),o=n("8Y7J"),a=n("s7LF"),s=n("07le"),c=n("WsNZ"),l=((r=u((function e(){g(this,e)}))).\u0275fac=function(e){return new(e||r)},r.\u0275mod=o["\u0275\u0275defineNgModule"]({type:r}),r.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[s.a,c.a,i.c,a.m]]}),r)},"2c+M":function(e,t,n){"use strict";n.d(t,"a",(function(){return M})),n.d(t,"b",(function(){return E}));var r=n("8Y7J"),i=n("Cnb3"),o=n("HSxi"),a=n("Vwx4"),s=n("TUjp"),c=n("SVse"),l=n("SLe5"),p=n("t/nq"),m=n("sj4O"),d=n("05dM"),h=n("TSSN"),f=["searchArea"];function v(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"mg-group-list-search",6),r["\u0275\u0275listener"]("hasItems",(function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"](),r["\u0275\u0275reference"](1).setShowingResults(e)})),r["\u0275\u0275pipe"](1,"async"),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("searchText",i.searchText)("groups",r["\u0275\u0275pipeBind1"](1,2,i.allGroups$))}}function b(e,t){1&e&&r["\u0275\u0275element"](0,"mg-spinner",7)}function x(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"p",8),r["\u0275\u0275text"](1," Showing "),r["\u0275\u0275elementStart"](2,"strong"),r["\u0275\u0275text"](3),r["\u0275\u0275pipe"](4,"async"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"]("",r["\u0275\u0275pipeBind1"](4,1,n.total$)," Groups")}}var C=function(){return[]};function y(e,t){if(1&e&&(r["\u0275\u0275element"](0,"mg-empty-state",9),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275pipe"](2,"translate")),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("title",r["\u0275\u0275pipeBind1"](1,3,"emptyState.allGroupsTitle"))("subtitle",n.canCreateGroups?r["\u0275\u0275pipeBind1"](2,5,"emptyState.allGroupsSubtitle"):"")("icons",n.canCreateGroups?n.emptyStateIcons:r["\u0275\u0275pureFunction0"](7,C))}}var O,w,M=((O=function(){function e(t,n){g(this,e),this.groupsFacadeService=t,this.permissions=n,this.total$=this.groupsFacadeService.getAllGroupsListTotal(),this.allGroups$=this.groupsFacadeService.getAllGroupsList(),this.newContentNotifications$=this.groupsFacadeService.getNewContentNotifications(),this.loading$=this.groupsFacadeService.getGroupsLoading(),this.searchText="",this.emptyStateIcons=[],this.canCreateGroups=!1,this.emptyStateIcons=[{icon:"post",sideText:"Create Group"}],this.canCreateGroups=this.permissions.hasPermission(i.MingaPermission.CONTENT_GROUP_CREATE)}return u(e,[{key:"ngOnInit",value:function(){this.groupsFacadeService.dispatchLoadAll()}}]),e}()).\u0275fac=function(e){return new(e||O)(r["\u0275\u0275directiveInject"](o.b),r["\u0275\u0275directiveInject"](a.c))},O.\u0275cmp=r["\u0275\u0275defineComponent"]({type:O,selectors:[["mg-group-list-page"]],viewQuery:function(e,t){var n;1&e&&r["\u0275\u0275viewQuery"](f,3),2&e&&r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.searchArea=n.first)},decls:11,vars:15,consts:[["mgSearchArea","","placeholder","Search All Groups",3,"searchText"],["searchArea","mgSearchArea"],["color","primary","diameter","25",4,"ngIf"],["class","group-count",4,"ngIf"],[3,"groups","newContentNotifications"],[3,"title","subtitle","icons",4,"ngIf"],[3,"searchText","groups","hasItems"],["color","primary","diameter","25"],[1,"group-count"],[3,"title","subtitle","icons"]],template:function(e,t){1&e&&(r["\u0275\u0275template"](0,v,2,4,"ng-template",0,1,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275listener"]("searchText",(function(e){return t.searchText=e})),r["\u0275\u0275template"](2,b,1,0,"mg-spinner",2),r["\u0275\u0275pipe"](3,"async"),r["\u0275\u0275template"](4,x,5,3,"p",3),r["\u0275\u0275pipe"](5,"async"),r["\u0275\u0275element"](6,"mg-group-list",4),r["\u0275\u0275pipe"](7,"async"),r["\u0275\u0275pipe"](8,"async"),r["\u0275\u0275template"](9,y,3,8,"mg-empty-state",5),r["\u0275\u0275pipe"](10,"async")),2&e&&(r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pipeBind1"](3,5,t.loading$)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pipeBind1"](5,7,t.total$)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("groups",r["\u0275\u0275pipeBind1"](7,9,t.allGroups$))("newContentNotifications",r["\u0275\u0275pipeBind1"](8,11,t.newContentNotifications$)),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",!r["\u0275\u0275pipeBind1"](10,13,t.total$)))},directives:[s.a,c.o,l.a,p.a,m.a,d.a],pipes:[c.b,h.d],styles:["mg-group-preview[_ngcontent-%COMP%]{cursor:pointer;margin:calc(var(--feed-item-margin-top, 4px) + var(--feed-item-margin-top, 4px)) var(--feed-item-margin-side,16px)}@media (min-width:600px){mg-group-preview[_ngcontent-%COMP%]{margin:calc(var(--feed-item-margin-top, 4px) + var(--feed-item-margin-top, 4px)) 0}}.group-count[_ngcontent-%COMP%]{color:#737373;font-size:80%;line-height:1.25}.group-count[_ngcontent-%COMP%], .mg-headline[_ngcontent-%COMP%]{margin-bottom:10px;margin-left:10px}.mg-headline[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{vertical-align:middle}.mg-headline[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#036}mg-empty-state[_ngcontent-%COMP%]{margin-top:16px}"],changeDetection:0}),O),P=n("NG9B"),_=n("DjdL"),k=n("7Tcv"),S=n("WsNZ"),I=n("2/6D"),E=((w=u((function e(){g(this,e)}))).\u0275fac=function(e){return new(e||w)},w.\u0275mod=r["\u0275\u0275defineNgModule"]({type:w}),w.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[_.d,k.a,S.a,I.a,P.a,a.b,c.c,h.c]]}),w)},"4SDa":function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n("BT4S");var r,i=n("SVse"),o=n("8Y7J"),a=n("u9T3"),s=n("iInd"),c=n("CO6v"),l=n("CuZz"),p=n("uRBq"),m=n("wM60"),d=n("Vwx4"),h=n("Ogcz"),f=n("RhPl"),v=n("zkd0"),b=((r=u((function e(){g(this,e)}))).\u0275fac=function(e){return new(e||r)},r.\u0275mod=o["\u0275\u0275defineNgModule"]({type:r}),r.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[c.a,h.b,l.a,f.a,d.b,m.a,p.a,v.a,i.c,a.a,s.k]]}),r)},"5JS3":function(e,t,n){"use strict";n.d(t,"a",(function(){return le}));var r=n("mrSG"),i=n("8Y7J"),o=n("YGJC"),a=n("xs9W"),s=n("vJwY"),c=n("Jaf7"),p=n("Cnb3"),m=n("2Vo4"),d=n("LRne"),h=n("PqYM"),f=n("6eBy"),v=n("UXun"),b=n("/uUt"),x=n("lJxs"),C=n("Vwx4"),y=n("GFah"),O=n("JUpl"),w=n("SVse"),M=n("VDRc"),P=n("Q2Ze"),_=n("i1AJ"),k=n("e6WT"),S=n("s7LF"),I=n("gjtd"),E=n("DobJ"),j=n("qftF"),T=n("qLpX"),G=n("4avL"),F=n("Tj54"),L=n("Fudl"),R=n("Hp2Z"),N=n("2FiO"),A=n("w8an");function B(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",14),i["\u0275\u0275element"](1,"mg-avatar",15),i["\u0275\u0275elementStart"](2,"div",16),i["\u0275\u0275element"](3,"mg-person-minimal",17),i["\u0275\u0275elementStart"](4,"mg-pill-checkbox",18),i["\u0275\u0275text"](5,"You"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"mg-pill-checkbox",19),i["\u0275\u0275text"](7,"Owner"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=t.member,r=i["\u0275\u0275nextContext"]();i["\u0275\u0275classProp"]("owner",r.isOwnerMember(n))("self",r.isCurrentMember(n)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("src",n.person.profileImageUrl)("color",n.person.badgeIconColor)("personHash",n.person.personHash),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("person",n.person),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",!0),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",!0)}}function D(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function H(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",29),i["\u0275\u0275elementStart"](1,"span",30),i["\u0275\u0275elementStart"](2,"a",31),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"](2).$implicit;return i["\u0275\u0275nextContext"](2).declineMember.emit(e)})),i["\u0275\u0275text"](3," Decline "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"mg-button",32),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"](2).$implicit;return i["\u0275\u0275nextContext"](2).acceptMember.emit(e)})),i["\u0275\u0275text"](5," Accept "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function V(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,H,6,0,"div",28),i["\u0275\u0275elementContainerEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.canUpdateMembers)}}var $=function(e){return{member:e}};function U(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",23),i["\u0275\u0275elementStart"](1,"div",24),i["\u0275\u0275template"](2,D,1,0,"ng-container",25),i["\u0275\u0275element"](3,"div",26),i["\u0275\u0275template"](4,V,2,1,"ng-container",27),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,r=i["\u0275\u0275nextContext"](2),o=i["\u0275\u0275reference"](1);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngTemplateOutlet",o)("ngTemplateOutletContext",i["\u0275\u0275pureFunction1"](3,$,n)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!r.isCurrentMember(n))}}function q(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",20),i["\u0275\u0275element"](1,"mg-date-separator",21),i["\u0275\u0275template"](2,U,5,5,"div",22),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("text",n.pendingHeadlineText),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",n.getPendingMembers())}}function z(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-icon",33),i["\u0275\u0275text"](1,"search"),i["\u0275\u0275elementEnd"]())}function J(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mg-icon",34),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().clearMemberSeach()})),i["\u0275\u0275text"](1," close "),i["\u0275\u0275elementEnd"]()}}function Y(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",35),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().exportMembers()})),i["\u0275\u0275element"](1,"mg-button-icon",36),i["\u0275\u0275elementStart"](2,"span"),i["\u0275\u0275text"](3,"Export Members"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function W(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function Q(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mg-ellipsis",42),i["\u0275\u0275listener"]("click",(function(e){i["\u0275\u0275restoreView"](n);var t=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"](4).onClickMemberRowMenu(e,t)})),i["\u0275\u0275elementEnd"]()}}function Z(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",40),i["\u0275\u0275listener"]("contextmenu",(function(e){i["\u0275\u0275restoreView"](n);var r=t.$implicit;return i["\u0275\u0275nextContext"](4).onClickMemberRowMenu(e,r)})),i["\u0275\u0275template"](1,W,1,0,"ng-container",25),i["\u0275\u0275element"](2,"div",26),i["\u0275\u0275template"](3,Q,1,0,"mg-ellipsis",41),i["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,o=i["\u0275\u0275nextContext"](4),a=i["\u0275\u0275reference"](1);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",a)("ngTemplateOutletContext",i["\u0275\u0275pureFunction1"](3,$,r)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",o.canUpdateMembers)}}function K(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275template"](1,Z,4,5,"div",39),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]().ngIf;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",n)}}function X(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,K,2,1,"div",37),i["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.ngIf;i["\u0275\u0275nextContext"]();var r=i["\u0275\u0275reference"](4);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.length>0)("ngIfElse",r)}}function ee(e,t){1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275element"](1,"mg-spinner"),i["\u0275\u0275elementStart"](2,"p"),i["\u0275\u0275text"](3,"Loading..."),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]())}function te(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"p"),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" No results for '",n.memberSearchText,"' ")}}function ne(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",43),i["\u0275\u0275template"](1,ee,4,0,"ng-container",27),i["\u0275\u0275template"](2,te,2,1,"p",27),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.memberSearchLoading),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!n.memberSearchLoading)}}function re(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,X,2,2,"ng-container",37),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275template"](3,ne,3,2,"ng-template",null,38,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementContainerEnd"]()),2&e){var n=i["\u0275\u0275reference"](4),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](2,2,r.memberSearchResults$))("ngIfElse",n)}}function ie(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function oe(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mg-ellipsis",42),i["\u0275\u0275listener"]("click",(function(e){i["\u0275\u0275restoreView"](n);var t=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"](2).onClickMemberRowMenu(e,t)})),i["\u0275\u0275elementEnd"]()}}function ae(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",40),i["\u0275\u0275listener"]("contextmenu",(function(e){i["\u0275\u0275restoreView"](n);var r=t.$implicit;return i["\u0275\u0275nextContext"](2).onClickMemberRowMenu(e,r)})),i["\u0275\u0275template"](1,ie,1,0,"ng-container",25),i["\u0275\u0275element"](2,"div",26),i["\u0275\u0275template"](3,oe,1,0,"mg-ellipsis",41),i["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,o=i["\u0275\u0275nextContext"](2),a=i["\u0275\u0275reference"](1);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",a)("ngTemplateOutletContext",i["\u0275\u0275pureFunction1"](3,$,r)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",o.canUpdateMembers)}}function se(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,ae,4,5,"div",39),i["\u0275\u0275elementContainerEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",n.getNonPendingMembers())}}var ce=function(){return{standalone:!0}},le=function(){var e=function(){function e(t,n,r,o){var a=this;g(this,e),this.permissions=t,this.rootService=n,this.changeDetectorRef=r,this.mingaGroupProto=o,this.currentMemberPersonHash="",this.canUpdateMembers=!1,this.acceptMember=new i.EventEmitter,this.declineMember=new i.EventEmitter,this.removeMember=new i.EventEmitter,this.addOwner=new i.EventEmitter,this.removeOwner=new i.EventEmitter,this.memberSearchText="",this._memberSearchText$=new m.a(""),this.memberSearchResults$=Object(d.a)([]),this.memberSearchLoading=!0,this._fuseOptions={isCaseSensitive:!1,shouldSort:!0,keys:["person.displayName","person.firstName","person.lastName"],includeMatches:!1,threshold:0},this.unsavedMemberRankings=new Map,this.memberSearchText$=this._memberSearchText$.asObservable(),this.memberSearchTextDebounced$=this.memberSearchText$.pipe(Object(f.a)((function(e){return e?Object(h.a)(300):Object(h.a)(0)})),Object(v.a)(1),Object(b.a)()),this.memberSearchResults$=this.memberSearchTextDebounced$.pipe(Object(x.a)((function(e){return e?(a.memberSearchLoading=!1,a.fuseInstance.search(e).map((function(e){return e.item}))):[]})))}return u(e,[{key:"groupName",get:function(){return this.group?this.group.name:""}},{key:"pendingHeadlineText",get:function(){return"Requests pending (".concat(this.getPendingMembers().length,")")}},{key:"ngOnInit",value:function(){this.fuseInstance=new o.a(this.getNonPendingMembers(),this._fuseOptions)}},{key:"ngOnChanges",value:function(e){e.unsavedMemberRankings&&this.changeDetectorRef.detectChanges()}},{key:"isOwnerMember",value:function(e){return this.unsavedMemberRankings&&this.unsavedMemberRankings.get(e.person.personHash)?this.unsavedMemberRankings.get(e.person.personHash)==a.b.OWNER:e.rank==c.GroupMemberInfo.Rank.OWNER}},{key:"isCurrentMember",value:function(e){return e.person.personHash==this.currentMemberPersonHash}},{key:"isOwner",value:function(){return!!this.group&&this.group.rank===a.b.OWNER}},{key:"onClickMemberRowMenu",value:function(e,t){return Object(r.a)(this,void 0,void 0,l().mark((function n(){var r,i,o=this;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.preventDefault(),e.stopImmediatePropagation(),r=[],i=this.permissions.hasPermission(p.MingaPermission.CONTENT_GROUP_MANAGE),this.isCurrentMember(t)&&!i||r.push({name:"Remove",click:function(e){return o.removeMember.emit(t)}}),this.isOwnerMember(t)?r.push({name:"Remove as owner",click:function(e){return o.removeOwner.emit(t)}}):r.push({name:"Make owner",click:function(e){return o.addOwner.emit(t)}}),n.t0=r.length>0,!n.t0){n.next=9;break}return n.next=9,this.rootService.openGlobalMenu({x:e.x,y:e.y,items:r});case 9:case"end":return n.stop()}}),n,this)})))}},{key:"getNonPendingMembers",value:function(){var e=this,t=[];return this.groupDetails&&(t=this.groupDetails.members.filter((function(t){return e.unsavedMemberRankings&&e.unsavedMemberRankings.has(t.person.personHash)?!!e.unsavedMemberRankings.get(t.person.personHash):t.rank!==c.GroupMemberInfo.Rank.PENDING}))),t.sort((function(e,t){return e.rank<t.rank?1:e.rank>t.rank?-1:e.person.displayName>t.person.displayName?1:e.person.displayName<t.person.displayName?-1:void 0})),t}},{key:"getPendingMembers",value:function(){var e=this,t=[];return this.groupDetails&&(t=this.groupDetails.members.filter((function(t){if(e.unsavedMemberRankings&&e.unsavedMemberRankings.has(t.person.personHash)){var n=e.unsavedMemberRankings.get(t.person.personHash);if(!n||n!=a.b.PENDING)return!1}return t.rank===c.GroupMemberInfo.Rank.PENDING}))),t}},{key:"onMemberSearch",value:function(e){return Object(r.a)(this,void 0,void 0,l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.memberSearchText=e,this._memberSearchText$.next(e),this.memberSearchLoading=!0;case 1:case"end":return t.stop()}}),t,this)})))}},{key:"clearMemberSeach",value:function(){return Object(r.a)(this,void 0,void 0,l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.memberSearchText="",this._memberSearchText$.next(this.memberSearchText),this.memberSearchLoading=!0;case 1:case"end":return e.stop()}}),e,this)})))}},{key:"exportMembers",value:function(){return Object(r.a)(this,void 0,void 0,l().mark((function e(){var t,n,r,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new c.ExportGroupMembersRequest).setContextHash(this.groupDetails.hash),this.getPendingMembers(),n=this.mingaGroupProto.exportGroupMembers(t),r="",i=new Uint8Array(0),e.next=6,new Promise((function(e,t){n.subscribe((function(e){if(e.hasChunk()){var t=e.getChunk_asU8(),n=new Uint8Array(i.length+t.length);n.set(i),n.set(t,i.length),i=n}else e.hasFilename()&&(r=e.getFilename())}),t,e)}));case 6:Object(s.a)(i,r);case 7:case"end":return e.stop()}}),e,this)})))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](C.c),i["\u0275\u0275directiveInject"](y.a),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](O.MingaGroup))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-group-member-list"]],inputs:{groupDetails:"groupDetails",group:"group",currentMemberPersonHash:"currentMemberPersonHash",canUpdateMembers:"canUpdateMembers",unsavedMemberRankings:"unsavedMemberRankings"},outputs:{acceptMember:"acceptMember",declineMember:"declineMember",removeMember:"removeMember",addOwner:"addOwner",removeOwner:"removeOwner"},features:[i["\u0275\u0275NgOnChangesFeature"]],decls:21,vars:14,consts:[["memInfoTmpl",""],["class","pending-member-container",4,"ngIf"],["fxLayout","row","fxLayout.xs","column","fxAlign","right","fxLayoutAlign.xs","start none","fxLayoutGap","10px","fxLayoutGap.xs","20px",1,"group-header"],["fxFlexAlign","auto","fxFlex","nogrow"],["mgFormField","",1,"search-container",3,"mgNoHintMargin","mgHideOptionalMarker"],["matInput","","type","text","autocomplete","off",3,"ngModel","ngModelOptions","ngModelChange"],["matSuffix","",4,"ngIf"],["matSuffix","",3,"click",4,"ngIf"],["class","export-btn",3,"click",4,"ngIf"],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign","start center","fxLayoutAlign.xs","start none","fxLayoutGap","10px","fxLayoutGap.xs","20px",1,"group-header"],["fxFlexAlign","auto","fxFlex","grow",1,"mg-headline2","group-name-headline"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["fxLayout","row","fxLayoutAlign","start center",1,"member-info"],[3,"src","color","personHash"],[1,"person-wrap"],[1,"no-wrap",3,"person"],["icon","",1,"small","self",3,"disabled"],["icon","","active","true",1,"small","owner",3,"disabled"],[1,"pending-member-container"],[1,"no-side-margin","title-separator",3,"text"],["fxLayout","row","fxLayoutAlign","start center","class","member-wrap",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center",1,"member-wrap"],[1,"member-wrap","pending-box"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["fxFlex",""],[4,"ngIf"],["class","member-actions user-content",4,"ngIf"],[1,"member-actions","user-content"],[1,"decline-link"],["href","javascript:;",3,"click"],["type","outline",3,"click"],["matSuffix",""],["matSuffix","",3,"click"],[1,"export-btn",3,"click"],["icon","download-o"],[4,"ngIf","ngIfElse"],["noResults",""],["class","member-wrap",3,"contextmenu",4,"ngFor","ngForOf"],[1,"member-wrap",3,"contextmenu"],[3,"click",4,"ngIf"],[3,"click"],[1,"mg-centered"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,B,8,10,"ng-template",null,0,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](2,q,3,2,"div",1),i["\u0275\u0275elementStart"](3,"div",2),i["\u0275\u0275elementStart"](4,"div",3),i["\u0275\u0275elementStart"](5,"mat-form-field",4),i["\u0275\u0275elementStart"](6,"mat-label"),i["\u0275\u0275text"](7,"Search by Name, ID, or Email"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"input",5),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.onMemberSearch(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](9,z,2,0,"mat-icon",6),i["\u0275\u0275template"](10,J,2,0,"mg-icon",7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](11,Y,4,0,"div",8),i["\u0275\u0275pipe"](12,"hasPermission"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"div",9),i["\u0275\u0275elementStart"](14,"div",10),i["\u0275\u0275text"](15),i["\u0275\u0275elementStart"](16,"span"),i["\u0275\u0275text"](17,"Group members"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerStart"](18,11),i["\u0275\u0275template"](19,re,5,4,"ng-container",12),i["\u0275\u0275template"](20,se,2,1,"ng-container",13),i["\u0275\u0275elementContainerEnd"]()),2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.getPendingMembers().length>0),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("mgNoHintMargin",!0)("mgHideOptionalMarker",!0),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngModel",t.memberSearchText)("ngModelOptions",i["\u0275\u0275pureFunction0"](13,ce)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.memberSearchText.length),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.memberSearchText),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.isOwner()||i["\u0275\u0275pipeBind1"](12,11,"CONTENT_GROUP_MANAGE")),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"](" ",t.groupName," "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngSwitch",t.memberSearchText&&"showSearch"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase","showSearch"))},directives:[w.o,M.e,M.d,M.f,M.a,M.b,P.d,_.a,P.h,k.b,S.d,S.t,S.w,w.q,w.r,w.s,I.a,E.a,j.a,T.a,w.n,w.t,G.a,F.a,P.j,L.a,R.a,N.a],pipes:[A.a,w.b],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");.member-actions[_ngcontent-%COMP%]{font-size:75%;display:flex}.member-actions[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{font-size:100%;margin-right:8px}.member-actions[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:last-child{margin-right:0}.member-actions[_ngcontent-%COMP%]   .decline-link[_ngcontent-%COMP%]{padding-top:10px;padding-right:20px}.member-info[_ngcontent-%COMP%]{--mg-avatar-size:30px;flex:1 1 90%}.member-info[_ngcontent-%COMP%]   mg-avatar[_ngcontent-%COMP%]{margin-right:8px}.member-info[_ngcontent-%COMP%]   mg-person-minimal[_ngcontent-%COMP%]{max-width:50%;display:inline-flex;align-items:center}.member-info[_ngcontent-%COMP%]   mg-pill-checkbox[_ngcontent-%COMP%]{margin-left:8px;display:none}.member-info[_ngcontent-%COMP%]   mg-pill-checkbox[_ngcontent-%COMP%]:last-child{margin-right:0}.member-info.owner[_ngcontent-%COMP%]   mg-pill-checkbox.owner[_ngcontent-%COMP%], .member-info.self[_ngcontent-%COMP%]   mg-pill-checkbox.self[_ngcontent-%COMP%]{display:inline-block}.member-info[_ngcontent-%COMP%]   .person-wrap[_ngcontent-%COMP%]{flex:1;flex-direction:row;display:flex;justify-content:flex-start;align-items:center;max-width:calc(100% - var(--mg-avatar-size))}.member-wrap[_ngcontent-%COMP%]{border-bottom:1px solid #ccc;margin:16px 0;display:flex;justify-content:space-between;align-items:center;padding-bottom:16px}.member-wrap[_ngcontent-%COMP%]:last-child{border-bottom:none}@media (orientation:landscape){.member-wrap[_ngcontent-%COMP%]{padding-right:3.125vh}}@media (orientation:portrait){.member-wrap[_ngcontent-%COMP%]{padding-right:3.125vw}}@media (orientation:landscape) and (max-height:320px){.member-wrap[_ngcontent-%COMP%]{padding-right:10px}}@media (orientation:portrait) and (max-width:320px){.member-wrap[_ngcontent-%COMP%]{padding-right:10px}}@media (min-width:640px){.member-wrap[_ngcontent-%COMP%]{padding-right:20px}}@media (orientation:landscape){.member-wrap[_ngcontent-%COMP%]{padding-left:3.125vh}}@media (orientation:portrait){.member-wrap[_ngcontent-%COMP%]{padding-left:3.125vw}}@media (orientation:landscape) and (max-height:320px){.member-wrap[_ngcontent-%COMP%]{padding-left:10px}}@media (orientation:portrait) and (max-width:320px){.member-wrap[_ngcontent-%COMP%]{padding-left:10px}}@media (min-width:640px){.member-wrap[_ngcontent-%COMP%]{padding-left:20px}}.member-wrap[_ngcontent-%COMP%]   .member-info[_ngcontent-%COMP%]{max-width:90%}.member-wrap[_ngcontent-%COMP%]   .member-info[_ngcontent-%COMP%]   .person-wrap[_ngcontent-%COMP%]   mg-person-minimal[_ngcontent-%COMP%]{flex-basis:100%}.member-wrap[_ngcontent-%COMP%]   .member-info.owner[_ngcontent-%COMP%]   .person-wrap[_ngcontent-%COMP%]   mg-person-minimal[_ngcontent-%COMP%], .member-wrap[_ngcontent-%COMP%]   .member-info.self[_ngcontent-%COMP%]   .person-wrap[_ngcontent-%COMP%]   mg-person-minimal[_ngcontent-%COMP%]{max-width:75%;flex-basis:0%}@media (min-width:375px) and (orientation:landscape){.member-wrap[_ngcontent-%COMP%]   .member-info.owner[_ngcontent-%COMP%]   .person-wrap[_ngcontent-%COMP%]   mg-person-minimal[_ngcontent-%COMP%], .member-wrap[_ngcontent-%COMP%]   .member-info.self[_ngcontent-%COMP%]   .person-wrap[_ngcontent-%COMP%]   mg-person-minimal[_ngcontent-%COMP%]{max-width:60.2666666667vh}}@media (min-width:375px) and (orientation:portrait){.member-wrap[_ngcontent-%COMP%]   .member-info.owner[_ngcontent-%COMP%]   .person-wrap[_ngcontent-%COMP%]   mg-person-minimal[_ngcontent-%COMP%], .member-wrap[_ngcontent-%COMP%]   .member-info.self[_ngcontent-%COMP%]   .person-wrap[_ngcontent-%COMP%]   mg-person-minimal[_ngcontent-%COMP%]{max-width:60.2666666667vw}}@media (min-width:375px) and (orientation:landscape) and (max-height:375px){.member-wrap[_ngcontent-%COMP%]   .member-info.owner[_ngcontent-%COMP%]   .person-wrap[_ngcontent-%COMP%]   mg-person-minimal[_ngcontent-%COMP%], .member-wrap[_ngcontent-%COMP%]   .member-info.self[_ngcontent-%COMP%]   .person-wrap[_ngcontent-%COMP%]   mg-person-minimal[_ngcontent-%COMP%]{max-width:226px}}@media (min-width:375px) and (orientation:portrait) and (max-width:375px){.member-wrap[_ngcontent-%COMP%]   .member-info.owner[_ngcontent-%COMP%]   .person-wrap[_ngcontent-%COMP%]   mg-person-minimal[_ngcontent-%COMP%], .member-wrap[_ngcontent-%COMP%]   .member-info.self[_ngcontent-%COMP%]   .person-wrap[_ngcontent-%COMP%]   mg-person-minimal[_ngcontent-%COMP%]{max-width:226px}}@media (min-width:375px) and (min-width:768px){.member-wrap[_ngcontent-%COMP%]   .member-info.owner[_ngcontent-%COMP%]   .person-wrap[_ngcontent-%COMP%]   mg-person-minimal[_ngcontent-%COMP%], .member-wrap[_ngcontent-%COMP%]   .member-info.self[_ngcontent-%COMP%]   .person-wrap[_ngcontent-%COMP%]   mg-person-minimal[_ngcontent-%COMP%]{max-width:564px}}.member-wrap[_ngcontent-%COMP%]   .member-info.owner.self[_ngcontent-%COMP%]   .person-wrap[_ngcontent-%COMP%]   mg-person-minimal[_ngcontent-%COMP%]{max-width:55%}@media (min-width:375px) and (orientation:landscape){.member-wrap[_ngcontent-%COMP%]   .member-info.owner.self[_ngcontent-%COMP%]   .person-wrap[_ngcontent-%COMP%]   mg-person-minimal[_ngcontent-%COMP%]{max-width:49.6vh}}@media (min-width:375px) and (orientation:portrait){.member-wrap[_ngcontent-%COMP%]   .member-info.owner.self[_ngcontent-%COMP%]   .person-wrap[_ngcontent-%COMP%]   mg-person-minimal[_ngcontent-%COMP%]{max-width:49.6vw}}@media (min-width:375px) and (orientation:landscape) and (max-height:375px){.member-wrap[_ngcontent-%COMP%]   .member-info.owner.self[_ngcontent-%COMP%]   .person-wrap[_ngcontent-%COMP%]   mg-person-minimal[_ngcontent-%COMP%]{max-width:186px}}@media (min-width:375px) and (orientation:portrait) and (max-width:375px){.member-wrap[_ngcontent-%COMP%]   .member-info.owner.self[_ngcontent-%COMP%]   .person-wrap[_ngcontent-%COMP%]   mg-person-minimal[_ngcontent-%COMP%]{max-width:186px}}@media (min-width:375px) and (min-width:768px){.member-wrap[_ngcontent-%COMP%]   .member-info.owner.self[_ngcontent-%COMP%]   .person-wrap[_ngcontent-%COMP%]   mg-person-minimal[_ngcontent-%COMP%]{max-width:528px}}.group-name-headline[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:400}.pending-member-container[_ngcontent-%COMP%] + .group-name-headline[_ngcontent-%COMP%]{margin-top:2em;padding-top:0}mg-person-minimal[_ngcontent-%COMP%]{font-weight:400}mg-date-separator[_ngcontent-%COMP%]{font-family:Muli,sans-serif;line-height:1.35;color:#737373;margin-bottom:0}@media (orientation:landscape){mg-date-separator[_ngcontent-%COMP%]{font-size:2.8985507246vh}}@media (orientation:portrait){mg-date-separator[_ngcontent-%COMP%]{font-size:2.8985507246vw}}@media (orientation:landscape) and (max-height:414px){mg-date-separator[_ngcontent-%COMP%]{font-size:12px}}@media (orientation:portrait) and (max-width:414px){mg-date-separator[_ngcontent-%COMP%]{font-size:12px}}@media (min-width:448.5px){mg-date-separator[_ngcontent-%COMP%]{font-size:13px}}.group-header[_ngcontent-%COMP%]{margin:1em 10px;justify-content:space-between}@media (orientation:landscape){.group-header[_ngcontent-%COMP%]{margin-right:3.125vh}}@media (orientation:portrait){.group-header[_ngcontent-%COMP%]{margin-right:3.125vw}}@media (orientation:landscape) and (max-height:320px){.group-header[_ngcontent-%COMP%]{margin-right:10px}}@media (orientation:portrait) and (max-width:320px){.group-header[_ngcontent-%COMP%]{margin-right:10px}}@media (min-width:640px){.group-header[_ngcontent-%COMP%]{margin-right:20px}}@media (orientation:landscape){.group-header[_ngcontent-%COMP%]{margin-left:3.125vh}}@media (orientation:portrait){.group-header[_ngcontent-%COMP%]{margin-left:3.125vw}}@media (orientation:landscape) and (max-height:320px){.group-header[_ngcontent-%COMP%]{margin-left:10px}}@media (orientation:portrait) and (max-width:320px){.group-header[_ngcontent-%COMP%]{margin-left:10px}}@media (min-width:640px){.group-header[_ngcontent-%COMP%]{margin-left:20px}}.search-container[_ngcontent-%COMP%]{width:300px}@media screen and (max-width:599px){.search-container[_ngcontent-%COMP%]{width:100%}}.export-btn[_ngcontent-%COMP%]{padding-left:10px;padding-top:5px;font-weight:bolder}.export-btn[_ngcontent-%COMP%]:hover{cursor:pointer}.export-btn[_ngcontent-%COMP%]:hover > span[_ngcontent-%COMP%]{text-decoration:underline}.pending-member-container[_ngcontent-%COMP%]   .member-wrap[_ngcontent-%COMP%]{padding:8px 10px;margin:0;border-bottom:none}.pending-member-container[_ngcontent-%COMP%]   .member-wrap[_ngcontent-%COMP%]   .pending-box[_ngcontent-%COMP%]{background:#f4f4f4;width:100%}.pending-member-container[_ngcontent-%COMP%]   .member-wrap[_ngcontent-%COMP%]   mg-button[_ngcontent-%COMP%]{--mg-button-border-radius:2em;--mg-button-padding-vert:10px;--mg-button-padding-horz:15px;--mg-button-background:#fff;font-size:17px}.pending-member-container[_ngcontent-%COMP%]   .member-wrap[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1c2f59;padding-bottom:10px}.pending-member-container[_ngcontent-%COMP%]{border-bottom:1px solid #ccc;padding-bottom:10px}'],changeDetection:0}),e}()},BT4S:function(e,t,n){"use strict";n.d(t,"a",(function(){return J}));var r=n("8Y7J"),i=n("LvDl"),o=n("fTqC"),a=n("HDdC"),s=n("S8Pw"),c=n("DhtX"),l=n("iIBE"),p=n("iInd"),m=n("jKai"),d=n("HSxi"),h=n("SVse"),f=n("VDRc"),v=n("QZRZ"),b=n("ura0"),x=n("kbmt"),C=n("4avL"),y=n("MBYY"),O=n("cKGL"),w=n("A7/0"),M=n("hyFq"),P=n("w8an"),_=n("Jkk8"),k=n("Tmav"),S=["groupTopElement"];function I(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",16),r["\u0275\u0275element"](1,"span",17),r["\u0275\u0275pipe"](2,"mgSafeHtml"),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("ngStyle",n.headlineStyle()),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("innerHTML",r["\u0275\u0275pipeBind1"](2,2,null==n.group?null:n.group.name),r["\u0275\u0275sanitizeHtml"])}}var E=function(){return["banner","longcardbanner"]};function j(e,t){if(1&e&&(r["\u0275\u0275element"](0,"div",18),r["\u0275\u0275pipe"](1,"mgAssetUrl")),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275styleProp"]("background-image","url("+r["\u0275\u0275pipeBind2"](1,2,n.getBannerImageInfo(),r["\u0275\u0275pureFunction0"](5,E))+")")}}function T(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"span",19),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=t.ngIf;r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"]("",n.name," | ")}}function G(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"a",20),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().openMemberList.emit()})),r["\u0275\u0275element"](1,"mg-avatar-cluster",21),r["\u0275\u0275elementStart"](2,"span"),r["\u0275\u0275text"](3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("items",i.getMemberAvatarItems()),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate2"]("",i.getMembersCount()," Member",1==i.getMembersCount()?"":"s","")}}function F(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"mg-button",22),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().addMembers.emit()})),r["\u0275\u0275text"](1,"Add Members"),r["\u0275\u0275elementEnd"]()}2&e&&r["\u0275\u0275property"]("ngClass.xs","small")}function L(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"mg-button",22),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().removeMembers.emit()})),r["\u0275\u0275text"](1,"Remove Members"),r["\u0275\u0275elementEnd"]()}2&e&&r["\u0275\u0275property"]("ngClass.xs","small")}function R(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"mg-group-join-button",23),r["\u0275\u0275listener"]("leaveGroup",(function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().onLeaveGroup()}))("requestToJoin",(function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().onRequestToJoin()}))("cancelRequestToJoin",(function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().onCancelRequestToJoin()})),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("group",i.group)}}var N=function(e){return["gallery","add","group",e]},A=function(e){return{o:e}},B=function(e){return{outlets:e}},D=function(e){return["",e]};function H(e,t){if(1&e&&r["\u0275\u0275element"](0,"mg-photo-gallery-add-photo",29),2&e){var n=r["\u0275\u0275nextContext"](2);r["\u0275\u0275property"]("routerLink",r["\u0275\u0275pureFunction1"](7,D,r["\u0275\u0275pureFunction1"](5,B,r["\u0275\u0275pureFunction1"](3,A,r["\u0275\u0275pureFunction1"](1,N,null==n.group?null:n.group.hash)))))}}function V(e,t){if(1&e&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275elementStart"](1,"p",30),r["\u0275\u0275elementStart"](2,"strong"),r["\u0275\u0275text"](3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"p",30),r["\u0275\u0275text"](5," Click on the icon to the left to add the first. "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](6,"div",31),r["\u0275\u0275elementContainerEnd"]()),2&e){var n=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"](" No images in the ",null==n.group?null:n.group.name," gallery yet! ")}}function $(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"p",30),r["\u0275\u0275elementStart"](1,"strong"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"]("No Images in the ",null==n.group?null:n.group.name," gallery yet!")}}function U(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",24),r["\u0275\u0275template"](1,H,1,9,"mg-photo-gallery-add-photo",25),r["\u0275\u0275elementStart"](2,"mg-photo-gallery-preview",26),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().gotoGroupGallery()})),r["\u0275\u0275elementStart"](3,"mg-photo-gallery-preview-empty"),r["\u0275\u0275pipe"](4,"hasPermission"),r["\u0275\u0275template"](5,V,7,1,"ng-container",27),r["\u0275\u0275template"](6,$,3,1,"ng-template",null,28,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275reference"](7),o=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("hasPermission","GALLERY_ADD_PHOTO"),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("galleryService",o.galleryService),r["\u0275\u0275advance"](1),r["\u0275\u0275classProp"]("no-add-empty",!r["\u0275\u0275pipeBind1"](4,6,"GALLERY_ADD_PHOTO")),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("hasPermission","GALLERY_ADD_PHOTO")("hasPermissionElse",i)}}var q=[[["",8,"group-name-suffix"]],[["mg-ellpsis"]],"*"],z=[".group-name-suffix","mg-ellpsis","*"],J=function(){var e=function(){function e(t,n,i){g(this,e),this.router=t,this.galleryService=n,this.groupsfacade=i,this.canEditMembers=!1,this.canRemoveMembers=!1,this.clusterSize=4,this.requestToJoin=new r.EventEmitter,this.openMemberList=new r.EventEmitter,this.addMembers=new r.EventEmitter,this.removeMembers=new r.EventEmitter,this.cancelRequestToJoin=new r.EventEmitter,this.leaveGroup=new r.EventEmitter,this.moduleKeys=s.IMingaFeatureToggleKeys,this._updateParentGroup()}return u(e,[{key:"ngOnChanges",value:function(e){e.group&&this.group&&(this._updateParentGroup(),this.galleryService.setGroupFromHash(this.group.hash))}},{key:"_updateParentGroup",value:function(){this.parentGroup$=this.group&&this.group.parentGroupHash?this.groupsfacade.getGroup(this.group.parentGroupHash):new a.a}},{key:"onLeaveGroup",value:function(){this.leaveGroup.emit(this.group)}},{key:"onRequestToJoin",value:function(){this.requestToJoin.emit(this.group)}},{key:"onCancelRequestToJoin",value:function(){this.cancelRequestToJoin.emit(this.group)}},{key:"getMembersCount",value:function(){return this.groupDetails?this.groupDetails.members.filter((function(e){return Object(c.a)(e.rank)})).length:0}},{key:"getMemberAvatarItems",value:function(){if(!this.groupDetails)return[];var e=this.groupDetails.members.filter((function(e){return Object(c.a)(e.rank)}));return i.sampleSize(e,this.clusterSize).map((function(e){return{src:e.person.profileImageUrl,color:e.person.badgeIconColor}}))}},{key:"allowedToView",value:function(){return!(!this.group||this.group.isPrivate)||!!l.a.isMember(this.group)}},{key:"hasBanner",value:function(){return this.group&&(!!this.group.banner||!!this.group.bannerObject)}},{key:"headlineStyle",value:function(){return this.group&&this.group.bannerObject&&this.group.name&&this.groupTopElement&&this.group.bannerObject.getHeadlineOptions()?Object(o.a)(this.group.name,this.group.bannerObject.getHeadlineOptions().toObject(),{maxLength:46,containerWidth:this.groupTopElement.nativeElement.clientWidth}):""}},{key:"getBannerImageInfo",value:function(){return this.hasBanner()?this.group.banner||this.group.bannerObject.getImage().toObject():""}},{key:"gotoGroupGallery",value:function(){this.router.navigate(["gallery","group",this.group.hash])}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](p.g),r["\u0275\u0275directiveInject"](m.a),r["\u0275\u0275directiveInject"](d.b))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-group-details"]],viewQuery:function(e,t){var n;(1&e&&r["\u0275\u0275viewQuery"](S,3),2&e)&&(r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.groupTopElement=n.first))},inputs:{group:"group",groupDetails:"groupDetails",canEditMembers:"canEditMembers",canRemoveMembers:"canRemoveMembers",clusterSize:"clusterSize"},outputs:{requestToJoin:"requestToJoin",openMemberList:"openMemberList",addMembers:"addMembers",removeMembers:"removeMembers",cancelRequestToJoin:"cancelRequestToJoin",leaveGroup:"leaveGroup"},features:[r["\u0275\u0275NgOnChangesFeature"]],ngContentSelectors:z,decls:25,vars:14,consts:[[1,"user-content"],[1,"group-top"],["groupTopElement",""],[1,"group-banner-container"],["class","group-banner-headline",3,"ngStyle",4,"ngIf"],["class","group-banner",3,"background-image",4,"ngIf"],[1,"group-top-content"],[1,"group-name-suffix"],[1,"group-name"],["class","group-parent-name",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between center"],["href","javascript:;","fxLayout","row","fxLayoutAlign","start center",3,"click",4,"ngIf"],[1,"row-actions-container"],["type","outline","class","mg-minicopy",3,"ngClass.xs","click",4,"ngIf"],[3,"group","leaveGroup","requestToJoin","cancelRequestToJoin",4,"ngIf"],["class","photo-gallery-preview","fxLayout","row","ngClass.xs","no-margin",4,"mgModuleEnabled"],[1,"group-banner-headline",3,"ngStyle"],[3,"innerHTML"],[1,"group-banner"],[1,"group-parent-name"],["href","javascript:;","fxLayout","row","fxLayoutAlign","start center",3,"click"],[3,"items"],["type","outline",1,"mg-minicopy",3,"ngClass.xs","click"],[3,"group","leaveGroup","requestToJoin","cancelRequestToJoin"],["fxLayout","row","ngClass.xs","no-margin",1,"photo-gallery-preview"],[3,"routerLink",4,"hasPermission"],["fxFlex","auto",3,"galleryService","click"],[4,"hasPermission","hasPermissionElse"],["noAddEmpty",""],[3,"routerLink"],[1,"mg-smallcopy"],[1,"arrow-point-left"]],template:function(e,t){1&e&&(r["\u0275\u0275projectionDef"](q),r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"div",1,2),r["\u0275\u0275elementStart"](3,"div",3),r["\u0275\u0275template"](4,I,3,4,"div",4),r["\u0275\u0275template"](5,j,2,6,"div",5),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",6),r["\u0275\u0275elementStart"](7,"span",7),r["\u0275\u0275projection"](8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"h1",8),r["\u0275\u0275template"](10,T,2,1,"span",9),r["\u0275\u0275pipe"](11,"async"),r["\u0275\u0275text"](12),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"p"),r["\u0275\u0275text"](14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](15,"div",10),r["\u0275\u0275template"](16,G,4,3,"a",11),r["\u0275\u0275pipe"](17,"hasPermission"),r["\u0275\u0275elementStart"](18,"div",12),r["\u0275\u0275template"](19,F,2,1,"mg-button",13),r["\u0275\u0275template"](20,L,2,1,"mg-button",13),r["\u0275\u0275template"](21,R,1,1,"mg-group-join-button",14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275projection"](22,1),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](23,U,8,8,"div",15),r["\u0275\u0275projection"](24,2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngIf",t.headlineStyle()),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.hasBanner()),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pipeBind1"](11,10,t.parentGroup$)),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",null==t.group?null:t.group.name," "),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](null==t.group?null:t.group.category),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.allowedToView()||r["\u0275\u0275pipeBind1"](17,12,"CONTENT_GROUP_VIEWALL")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",t.canEditMembers),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.canEditMembers),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.group&&(!t.group.rank||"PENDING"==t.group.rank)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("mgModuleEnabled",t.moduleKeys.PHOTO_GALLERY_ENABLED))},directives:[h.o,f.e,f.d,v.a,h.p,b.c,x.a,C.a,b.a,y.a,O.a,w.a,f.b,w.b,M.a,p.h],pipes:[h.b,P.a,_.a,k.a],styles:[".group-banner[_ngcontent-%COMP%]{background-position:50%;background-size:cover;padding-bottom:56.25%}.group-banner-container[_ngcontent-%COMP%]{overflow:hidden;position:relative}.group-banner-headline[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;position:absolute;z-index:1}mg-avatar-cluster[_ngcontent-%COMP%]{--mg-avatar-size:30px;margin-right:8px}.group-name[_ngcontent-%COMP%]{position:relative;width:92%}.group-name-suffix[_ngcontent-%COMP%]{float:right}.group-parent-name[_ngcontent-%COMP%]{font-weight:400}.group-top[_ngcontent-%COMP%]{position:relative;background-color:#fff;box-shadow:0 0 8px rgba(0,0,0,.16);margin-bottom:16px}@media (min-width:511px){.group-top[_ngcontent-%COMP%]{border-bottom-right-radius:8px;border-bottom-left-radius:8px}}.group-top-content[_ngcontent-%COMP%]{position:relative;padding:8px 16px}.group-top-content[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{width:80%}.group-top-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:0}.group-top-content[_ngcontent-%COMP%]   .row-actions-container[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column}.group-top-content[_ngcontent-%COMP%]   .row-actions-container[_ngcontent-%COMP%]   mg-button[_ngcontent-%COMP%] + mg-group-join-button[_ngcontent-%COMP%]{margin-left:8px}.group-top-content[_ngcontent-%COMP%]   .row-actions-container[_ngcontent-%COMP%]   mg-button[_ngcontent-%COMP%], .group-top-content[_ngcontent-%COMP%]   .row-actions-container[_ngcontent-%COMP%]   mg-group-join-button[_ngcontent-%COMP%]{margin:8px 0 0 8px}.photo-gallery-preview[_ngcontent-%COMP%]{--mg-photo-gallery-preview-empty-border:1px dashed #ccc}.photo-gallery-preview[_ngcontent-%COMP%]   mg-photo-gallery-add-photo[_ngcontent-%COMP%]{--mg-photo-gallery-preview-border-bottom-left-radius:0}.photo-gallery-preview[_ngcontent-%COMP%]   .arrow-point-left[_ngcontent-%COMP%]{background-image:url(/assets/misc/arrow-point-left.svg);height:10px;background-position:0;background-repeat:no-repeat;background-size:contain}.photo-gallery-preview[_ngcontent-%COMP%]   mg-photo-gallery-preview-empty[_ngcontent-%COMP%]{display:block;margin:7px 16px}.photo-gallery-preview[_ngcontent-%COMP%]   mg-photo-gallery-preview-empty.no-add-empty[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:row;height:var(--mg-photo-gallery-preview-row-height);margin-top:0;margin-bottom:0}.photo-gallery-preview[_ngcontent-%COMP%]   mg-photo-gallery-preview-empty[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;color:#737373;margin:2px 0}.photo-gallery-preview[_ngcontent-%COMP%]   mg-photo-gallery-preview[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),e}()},CBWo:function(e,t,n){"use strict";n.d(t,"a",(function(){return x})),n.d(t,"b",(function(){return O}));var r=n("mrSG"),i=n("8Y7J"),o=n("Cnb3"),a=n("Vwx4"),s=n("iInd"),c=n("HSxi"),p=n("M9ds"),m=n("NGeL"),d=n("SVse"),h=n("Hp2Z");function f(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"a",8),i["\u0275\u0275listener"]("click",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onCreateGroup(e)})),i["\u0275\u0275element"](1,"mg-button-icon",9),i["\u0275\u0275text"](2," Create"),i["\u0275\u0275elementStart"](3,"span",10),i["\u0275\u0275text"](4,"\xa0Group"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}var v,b,x=((v=function(){function e(t,n,r){g(this,e),this.permissions=t,this.router=n,this.groupsFacade=r,this.canCreateGroups=!1,this.initPermissions()}return u(e,[{key:"initPermissions",value:function(){return Object(r.a)(this,void 0,void 0,l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.canCreateGroups=this.permissions.hasPermission(o.MingaPermission.CONTENT_GROUP_CREATE);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"onCreateGroup",value:function(e){return Object(r.a)(this,void 0,void 0,l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.router.navigate(["",{outlets:{o:["groups","new"]}}]);case 2:case"end":return e.stop()}}),e,this)})))}}]),e}()).\u0275fac=function(e){return new(e||v)(i["\u0275\u0275directiveInject"](a.c),i["\u0275\u0275directiveInject"](s.g),i["\u0275\u0275directiveInject"](c.b))},v.\u0275cmp=i["\u0275\u0275defineComponent"]({type:v,selectors:[["mg-group-home-page"]],decls:9,vars:5,consts:[["mat-tab-nav-bar","",1,"no-inactive-tab"],["mat-tab-link","","routerLink","/groups/my~list","routerLinkActive","active"],["rlaMyGroups","routerLinkActive"],["value","My Groups",3,"strong"],["mat-tab-link","","routerLink","/groups/list","routerLinkActive","active"],["rlaAllGroups","routerLinkActive"],["value","All Groups",3,"strong"],["mat-tab-link","",3,"click",4,"ngIf"],["mat-tab-link","",3,"click"],["icon","post"],[1,"group-text"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"nav",0),i["\u0275\u0275elementStart"](1,"a",1,2),i["\u0275\u0275element"](3,"mg-toggle-strong",3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"a",4,5),i["\u0275\u0275element"](6,"mg-toggle-strong",6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](7,f,5,0,"a",7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](8,"router-outlet")),2&e){var n=i["\u0275\u0275reference"](2),r=i["\u0275\u0275reference"](5);i["\u0275\u0275classProp"]("enable-create",t.canCreateGroups),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("strong",n.isActive),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("strong",r.isActive),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.canCreateGroups)}},directives:[p.f,s.j,p.e,s.i,m.a,d.o,s.l,h.a],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");[_nghost-%COMP%]{display:block}.mat-tab-link[_ngcontent-%COMP%]{min-width:calc(100% / var(--mg-tab-count, 2));max-width:calc(100% / var(--mg-tab-count, 2));background-color:#fff;border-top:1px solid #ccc;border-bottom:1px solid #ccc;border-top-right-radius:0;border-bottom-left-radius:8px;border-bottom-right-radius:8px;border-right:1px solid #ccc;opacity:1;font-family:Muli,sans-serif;line-height:1.35;color:#036;height:48px;font-weight:400}@media (orientation:landscape){.mat-tab-link[_ngcontent-%COMP%]{font-size:3.3913043478vh}}@media (orientation:portrait){.mat-tab-link[_ngcontent-%COMP%]{font-size:3.3913043478vw}}@media (orientation:landscape) and (max-height:414px){.mat-tab-link[_ngcontent-%COMP%]{font-size:14.04px}}@media (orientation:portrait) and (max-width:414px){.mat-tab-link[_ngcontent-%COMP%]{font-size:14.04px}}@media (min-width:448.5px){.mat-tab-link[_ngcontent-%COMP%]{font-size:15.21px}}.mat-tab-link.tab-fill[_ngcontent-%COMP%]{background-color:#fff;border-top:none;pointer-events:none}.mat-tab-link.tab-fill[_ngcontent-%COMP%]:hover{cursor:default}.mat-tab-link[_ngcontent-%COMP%]:focus{background-color:#fff!important}.mat-tab-link[_ngcontent-%COMP%]:first-child{border-right:1px solid #ccc;min-width:calc(100% / (var(--mg-tab-count, 2) + 1));margin-left:0;border-top-right-radius:0;border-top-left-radius:0;border-bottom-left-radius:8px;border-bottom-right-radius:8px;border-left:none}.mat-tab-link[_ngcontent-%COMP%]:first-child.active + .mat-tab-link[_ngcontent-%COMP%], .mat-tab-link[_ngcontent-%COMP%]:first-child:focus.active + .mat-tab-link[_ngcontent-%COMP%]{border-bottom-left-radius:8px;border-bottom-right-radius:0;border-left:1px solid #ccc;border-right:1px solid #ccc}.mat-tab-link[_ngcontent-%COMP%]:first-child.active + .mat-tab-link[_ngcontent-%COMP%] + .mat-tab-link[_ngcontent-%COMP%], .mat-tab-link[_ngcontent-%COMP%]:first-child:focus.active + .mat-tab-link[_ngcontent-%COMP%] + .mat-tab-link[_ngcontent-%COMP%]{border-left:none;border-bottom-left-radius:0}@media (min-width:511px){.mat-tab-link[_ngcontent-%COMP%]:first-child{border-left:1px solid #ccc}.mat-tab-link[_ngcontent-%COMP%]:first-child.active, .mat-tab-link[_ngcontent-%COMP%]:first-child:focus.active{border-left:none}}.mat-tab-link[_ngcontent-%COMP%]:last-of-type{border-bottom-left-radius:8px;border-bottom-right-radius:8px;border-right:1px solid #ccc}.mat-tab-link.active[_ngcontent-%COMP%], .mat-tab-link[_ngcontent-%COMP%]:focus.active{background-color:#f5f5f5!important;border-bottom:1px solid #f5f5f5;font-weight:700;border-bottom-left-radius:0;border-bottom-right-radius:0;border-right:none}.mat-tab-link.active[_ngcontent-%COMP%] + .mat-tab-link[_ngcontent-%COMP%], .mat-tab-link[_ngcontent-%COMP%]:focus.active + .mat-tab-link[_ngcontent-%COMP%]{border-left:1px solid #ccc}nav[_ngcontent-%COMP%]{border-bottom:none;margin-top:0}@media (min-width:511px){nav[_ngcontent-%COMP%]:not(.no-inactive-tab){border-right:1px solid #ccc}}nav.no-inactive-tab[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]:first-child{min-width:calc(100% / var(--mg-tab-count, 2));max-width:calc(100% / var(--mg-tab-count, 2))}@media (min-width:511px){nav.no-inactive-tab[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]:last-of-type{min-width:calc((100% / var(--mg-tab-count, 2)) - 1px);max-width:calc((100% / var(--mg-tab-count, 2)) - 1px)}}[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]{--mg-tab-count:2}@media (orientation:landscape){[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]{--mg-icon-size:4.2666666667vh}}@media (orientation:portrait){[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]{--mg-icon-size:4.2666666667vw}}@media (orientation:landscape) and (max-height:375px){[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]{--mg-icon-size:16px}}@media (orientation:portrait) and (max-width:375px){[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]{--mg-icon-size:16px}}@media (min-width:562.5px){[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]{--mg-icon-size:24px}}[_nghost-%COMP%]   nav[mat-tab-nav-bar].enable-create[_ngcontent-%COMP%]{--mg-tab-count:3}@media (orientation:landscape){[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{padding-left:5vh}}@media (orientation:portrait){[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{padding-left:5vw}}@media (orientation:landscape) and (max-height:320px){[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{padding-left:16px}}@media (orientation:portrait) and (max-width:320px){[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{padding-left:16px}}@media (min-width:480px){[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{padding-left:24px}}@media (orientation:landscape){[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{padding-right:5vh}}@media (orientation:portrait){[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{padding-right:5vw}}@media (orientation:landscape) and (max-height:320px){[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{padding-right:16px}}@media (orientation:portrait) and (max-width:320px){[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{padding-right:16px}}@media (min-width:480px){[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{padding-right:24px}}[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]   .group-text[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   mg-button-icon[_ngcontent-%COMP%]{display:inline-block;margin-left:-.3em}@media (min-width:390px){[_nghost-%COMP%]   nav[mat-tab-nav-bar][_ngcontent-%COMP%]   .group-text[_ngcontent-%COMP%]{display:inline}}']}),v),C=n("CO6v"),y=n("0hYQ"),O=((b=u((function e(){g(this,e)}))).\u0275fac=function(e){return new(e||b)},b.\u0275mod=i["\u0275\u0275defineNgModule"]({type:b}),b.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[y.a,C.a,d.c,s.k,p.g]]}),b)},"CZ+w":function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n("iVxe");var r,i=n("SVse"),o=n("8Y7J"),a=n("fHWq"),s=n("5VmK"),c=n("Ogcz"),l=n("zpKa"),p=((r=u((function e(){g(this,e)}))).\u0275fac=function(e){return new(e||r)},r.\u0275mod=o["\u0275\u0275defineNgModule"]({type:r}),r.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[a.a,s.a,l.a,c.b,i.c]]}),r)},CeZx:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var r=n("mrSG"),i=n("8Y7J"),o=n("Cnb3"),a=n("iIBE"),s=n("Vwx4"),c=n("VDRc"),p=n("cKGL"),m=n("SVse"),d=n("iInd"),h=n("NGeL"),f=function(){return{exact:!0}};function v(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",11,12),i["\u0275\u0275element"](2,"mg-toggle-strong",13),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1);i["\u0275\u0275property"]("routerLinkActiveOptions",i["\u0275\u0275pureFunction0"](2,f)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("strong",n.isActive)}}function b(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",14),i["\u0275\u0275element"](1,"mg-toggle-strong",15),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](2,"div",16,17),i["\u0275\u0275element"](4,"div",18,19)),2&e){var n=i["\u0275\u0275reference"](3),r=i["\u0275\u0275reference"](5);i["\u0275\u0275classProp"]("group-tab-active",n.isActive||r.isActive),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("strong",n.isActive||r.isActive)}}function x(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",20,21),i["\u0275\u0275element"](2,"mg-toggle-strong",22),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("strong",n.isActive)}}function C(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function y(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function O(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function w(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,C,1,0,"ng-container",24),i["\u0275\u0275template"](2,y,1,0,"ng-container",24),i["\u0275\u0275template"](3,O,1,0,"ng-container",24),i["\u0275\u0275elementContainerEnd"]()),2&e){i["\u0275\u0275nextContext"](2);var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275reference"](3),o=i["\u0275\u0275reference"](5);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",n),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",r),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",o)}}function M(e,t){if(1&e&&i["\u0275\u0275template"](0,w,4,3,"ng-container",23),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngIf",n.allowedToView())}}function P(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function _(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function k(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function S(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,P,1,0,"ng-container",24),i["\u0275\u0275template"](2,_,1,0,"ng-container",24),i["\u0275\u0275template"](3,k,1,0,"ng-container",24),i["\u0275\u0275elementContainerEnd"]()),2&e){i["\u0275\u0275nextContext"]();var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275reference"](3),o=i["\u0275\u0275reference"](5);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",n),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",r),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",o)}}function I(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",25,26),i["\u0275\u0275element"](2,"mg-toggle-strong",27),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("strong",n.isActive)}}var E=function(){var e=function(){function e(t){g(this,e),this.permissions=t,this.group=null,this.groupDetails=null,this.showPollTab=!1}return u(e,[{key:"ngOnChanges",value:function(e){e.group&&this.initPollTab()}},{key:"allowedToView",value:function(){return!!a.a.isMember(this.group)}},{key:"isOwner",value:function(){return!!a.a.isOwner(this.group)}},{key:"initPollTab",value:function(){return Object(r.a)(this,void 0,void 0,l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.a.isMember(this.group)){e.next=2;break}return e.abrupt("return",void(this.showPollTab=!1));case 2:t=this.permissions.hasPermission(o.MingaPermission.CONTENT_POLL_CREATE),this.showPollTab=!!t||!!this.isOwner();case 4:case"end":return e.stop()}}),e,this)})))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](s.c))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-group-details-tabs"]],inputs:{group:"group",groupDetails:"groupDetails"},features:[i["\u0275\u0275NgOnChangesFeature"]],decls:15,vars:4,consts:[["feedTab",""],["eventsTab",""],["filesTab",""],["fxLayout","row","fxLayoutAlign","start stretch",1,"group-tabs"],["groupOwnerOnlyTabs",""],[4,"hasPermission","hasPermissionElse"],["class","group-tab","routerLink","polls","routerLinkActive","group-tab-active",4,"ngIf"],["routerLink","about","routerLinkActive","group-tab-active",1,"group-tab"],["rlaAbout","routerLinkActive"],["value","About",3,"strong"],[1,"group-tab","placeholder"],["routerLink",".","routerLinkActive","group-tab-active",1,"group-tab",3,"routerLinkActiveOptions"],["rlaFeed","routerLinkActive"],["value","Group Feed",3,"strong"],["routerLink","events/schedule",1,"group-tab"],["value","Events",3,"strong"],["routerLinkActive","","routerLinkActive","group-tab-active","routerLink","events/calendar",1,"hidden-route"],["calendaarActive","routerLinkActive"],["routerLinkActive","","routerLinkActive","group-tab-active","routerLink","events/schedule",1,"hidden-route"],["scheduleActive","routerLinkActive"],["routerLink","files","routerLinkActive","group-tab-active",1,"group-tab"],["rlaFiles","routerLinkActive"],["value","Files",3,"strong"],[4,"ngIf"],[4,"ngTemplateOutlet"],["routerLink","polls","routerLinkActive","group-tab-active",1,"group-tab"],["rlaPolls","routerLinkActive"],["value","Polls",3,"strong"]],template:function(e,t){if(1&e&&(i["\u0275\u0275template"](0,v,3,3,"ng-template",null,0,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](2,b,6,3,"ng-template",null,1,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](4,x,3,1,"ng-template",null,2,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementStart"](6,"div",3),i["\u0275\u0275template"](7,M,1,1,"ng-template",null,4,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](9,S,4,3,"ng-container",5),i["\u0275\u0275template"](10,I,3,1,"div",6),i["\u0275\u0275elementStart"](11,"div",7,8),i["\u0275\u0275element"](13,"mg-toggle-strong",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](14,"div",10),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](8),r=i["\u0275\u0275reference"](12);i["\u0275\u0275advance"](9),i["\u0275\u0275property"]("hasPermission","CONTENT_GROUP_VIEWALL")("hasPermissionElse",n),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.showPollTab),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("strong",r.isActive)}},directives:[c.e,c.d,p.a,m.o,d.h,d.i,h.a,m.t],styles:[".group-tabs[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;position:relative;border-top:1px solid #ccc}.group-tabs[_ngcontent-%COMP%]   .hidden-route[_ngcontent-%COMP%]{display:none}.group-tabs[_ngcontent-%COMP%]   .group-tab[_ngcontent-%COMP%]{cursor:pointer;box-sizing:border-box;background-color:#fff;border-right:1px solid #ccc;padding:16px 8px;outline:none}@media (min-width:511px){.group-tabs[_ngcontent-%COMP%]   .group-tab[_ngcontent-%COMP%]:first-child{border-bottom-left-radius:8px}}.group-tabs[_ngcontent-%COMP%]   .group-tab.group-tab-active[_ngcontent-%COMP%]{border:none;background-color:var(--mg-background-color);border-radius:0;padding-bottom:32px;margin-bottom:-16px}.group-tabs[_ngcontent-%COMP%]   .group-tab.group-tab-active[_ngcontent-%COMP%] + .group-tab[_ngcontent-%COMP%]{border-left:1px solid #ccc}.group-tabs[_ngcontent-%COMP%]   .group-tab.group-tab-active[_ngcontent-%COMP%]:first-child{margin-left:-16px;padding-left:24px}.group-tabs[_ngcontent-%COMP%]   .group-tab.placeholder[_ngcontent-%COMP%]{padding:0}.group-tabs[_ngcontent-%COMP%]   .group-tab.placeholder[_ngcontent-%COMP%]:last-child{border-right:none}"]}),e}()},DuJC:function(e,t,n){"use strict";n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return F}));var r=n("8Y7J"),i=n("itXk"),s=n("lJxs"),c=n("HSxi"),l=n("3qIc"),p=n("TUjp"),m=n("SVse"),d=n("SLe5"),h=n("t/nq"),f=n("sj4O"),v=n("05dM"),b=n("TSSN"),x=["searchArea"];function C(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"mg-group-list-search",6),r["\u0275\u0275listener"]("hasItems",(function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"](),r["\u0275\u0275reference"](1).setShowingResults(e)})),r["\u0275\u0275pipe"](1,"async"),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("searchText",i.searchText)("groups",r["\u0275\u0275pipeBind1"](1,2,i.myGroups$))}}function y(e,t){1&e&&r["\u0275\u0275element"](0,"mg-spinner",7)}function O(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"p",8),r["\u0275\u0275text"](1," Showing "),r["\u0275\u0275elementStart"](2,"strong"),r["\u0275\u0275text"](3),r["\u0275\u0275pipe"](4,"async"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"]("",r["\u0275\u0275pipeBind1"](4,1,n.total$)," Groups")}}function w(e,t){1&e&&(r["\u0275\u0275element"](0,"mg-empty-state",9),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275pipe"](2,"translate")),2&e&&r["\u0275\u0275property"]("title",r["\u0275\u0275pipeBind1"](1,2,"emptyState.myGroupsTitle"))("subtitle",r["\u0275\u0275pipeBind1"](2,4,"emptyState.myGroupsSubtitle"))}function M(e,t){return e.isParent&&t.isParent?0:e.isParent&&!t.isParent?-1:1}function P(e,t){return e.parentGroupHash&&t.parentGroupHash?0:e.parentGroupHash&&!t.parentGroupHash?-1:1}var _,k,S=((_=function(){function e(t,n){g(this,e),this.groupsFacadeService=t,this.mingaStore=n,this.total$=this.groupsFacadeService.getTotalMyGroupsCount(),this.newContentNotifications$=this.groupsFacadeService.getNewContentNotifications(),this.loading$=this.groupsFacadeService.getGroupsLoading(),this.searchText="",this.myGroups$=Object(i.b)([this.groupsFacadeService.getMyGroups(),this.mingaStore.observeDistrictFeatureEnabled()]).pipe(Object(s.a)((function(e){var t=a(e,2),n=t[0];if(t[1]){if(n.length<=1)return n;n.sort(M);for(var r=-1,i=0;i<n.length;i++)if(!n[i].isParent){r=i;break}return r<0?n:[].concat(o(n.slice(0,r)),o(n.slice(r,n.length).sort(P)))}return n})))}return u(e,[{key:"ngOnInit",value:function(){this.groupsFacadeService.dispatchLoadAll()}}]),e}()).\u0275fac=function(e){return new(e||_)(r["\u0275\u0275directiveInject"](c.b),r["\u0275\u0275directiveInject"](l.b))},_.\u0275cmp=r["\u0275\u0275defineComponent"]({type:_,selectors:[["mg-my-group-list-page"]],viewQuery:function(e,t){var n;1&e&&r["\u0275\u0275viewQuery"](x,3),2&e&&r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.searchArea=n.first)},decls:11,vars:15,consts:[["mgSearchArea","","placeholder","Search My Groups",3,"searchText"],["searchArea","mgSearchArea"],["color","primary","diameter","25",4,"ngIf"],["class","group-count",4,"ngIf"],[3,"groups","newContentNotifications"],[3,"title","subtitle",4,"ngIf"],[3,"searchText","groups","hasItems"],["color","primary","diameter","25"],[1,"group-count"],[3,"title","subtitle"]],template:function(e,t){1&e&&(r["\u0275\u0275template"](0,C,2,4,"ng-template",0,1,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275listener"]("searchText",(function(e){return t.searchText=e})),r["\u0275\u0275template"](2,y,1,0,"mg-spinner",2),r["\u0275\u0275pipe"](3,"async"),r["\u0275\u0275template"](4,O,5,3,"p",3),r["\u0275\u0275pipe"](5,"async"),r["\u0275\u0275element"](6,"mg-group-list",4),r["\u0275\u0275pipe"](7,"async"),r["\u0275\u0275pipe"](8,"async"),r["\u0275\u0275template"](9,w,3,6,"mg-empty-state",5),r["\u0275\u0275pipe"](10,"async")),2&e&&(r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pipeBind1"](3,5,t.loading$)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pipeBind1"](5,7,t.total$)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("groups",r["\u0275\u0275pipeBind1"](7,9,t.myGroups$))("newContentNotifications",r["\u0275\u0275pipeBind1"](8,11,t.newContentNotifications$)),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",!r["\u0275\u0275pipeBind1"](10,13,t.total$)))},directives:[p.a,m.o,d.a,h.a,f.a,v.a],pipes:[m.b,b.d],styles:["mg-group-preview[_ngcontent-%COMP%]{cursor:pointer;margin:calc(var(--feed-item-margin-top, 4px) + var(--feed-item-margin-top, 4px)) var(--feed-item-margin-side,16px)}@media (min-width:600px){mg-group-preview[_ngcontent-%COMP%]{margin:calc(var(--feed-item-margin-top, 4px) + var(--feed-item-margin-top, 4px)) 0}}.group-count[_ngcontent-%COMP%]{color:#737373;font-size:80%;line-height:1.25}.group-count[_ngcontent-%COMP%], .mg-headline[_ngcontent-%COMP%]{margin-bottom:10px;margin-left:10px}.mg-headline[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{vertical-align:middle}.mg-headline[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#036}mg-empty-state[_ngcontent-%COMP%]{margin-top:16px}"],changeDetection:0}),_),I=n("NG9B"),E=n("DjdL"),j=n("7Tcv"),T=n("WsNZ"),G=n("2/6D"),F=((k=u((function e(){g(this,e)}))).\u0275fac=function(e){return new(e||k)},k.\u0275mod=r["\u0275\u0275defineNgModule"]({type:k}),k.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[E.d,T.a,G.a,j.a,I.a,m.c,b.c]]}),k)},"J+65":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("8Y7J"),i=n("SVse"),o=n("VDRc"),a=n("gjtd"),s=n("DobJ");function c(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",1),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](n);var e=t.$implicit;return r["\u0275\u0275nextContext"]().clickMember(e)})),r["\u0275\u0275element"](1,"mg-avatar",2),r["\u0275\u0275element"](2,"mg-person-minimal",3),r["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,o=r["\u0275\u0275nextContext"]();r["\u0275\u0275classProp"]("mg-selected",(null==o.selectedMember?null:o.selectedMember.person.personHash)==i.person.personHash),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("src",null==i||null==i.person?null:i.person.profileImageUrl)("color",null==i||null==i.person?null:i.person.badgeIconColor),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("person",i.person)}}var l=function(){var e=function(){function e(){g(this,e),this.members=[],this.memberSelect=new r.EventEmitter}return u(e,[{key:"clickMember",value:function(e){this.selectedMember=e,this.memberSelect.emit(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-group-member-select"]],inputs:{members:"members"},outputs:{memberSelect:"memberSelect"},decls:1,vars:1,consts:[["class","member-select-item","fxLayout","row","fxLayoutAlign","start center",3,"mg-selected","click",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center",1,"member-select-item",3,"click"],[3,"src","color"],[3,"person"]],template:function(e,t){1&e&&r["\u0275\u0275template"](0,c,3,5,"div",0),2&e&&r["\u0275\u0275property"]("ngForOf",t.members)},directives:[i.n,o.e,o.d,a.a,s.a],styles:[".member-select-item[_ngcontent-%COMP%]{cursor:pointer;--mg-avatar-size:30px;padding:8px;border-radius:3px}.member-select-item[_ngcontent-%COMP%]   mg-avatar[_ngcontent-%COMP%]{margin-right:8px}.member-select-item[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.1)}.member-select-item.mg-selected[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.3)}"]}),e}()},LYTB:function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return M}));var r,i,o=n("mrSG"),a=n("8Y7J"),s=n("Cnb3"),c=n("lJxs"),p=n("SxV6"),m=n("xs9W"),d=n("HSxi"),h=n("SVse"),f=n("Vwx4"),v=n("JF7H"),b=n("zc8W"),x=n("SYVq"),C=n("5JS3"),y=((r=function(){function e(t,n,r,i,o){var a=this;g(this,e),this.groupsFacade=t,this._location=n,this.permissions=r,this.group$=this.groupsFacade.getCurrentGroup(),this.groupDetails$=this.groupsFacade.getCurrentGroupDetails(),this.memberUpdateMap=new Map,this.canUpdateMembers=!1,this.checkIfCanUdateMembers(),this.groupsFacade.getCurrentGroupHashObservable().subscribe((function(e){return a.groupsFacade.dispatchLoadGroupDetails(e)})),this.currentMemberPersonHash$=o.authPerson$.pipe(Object(c.a)((function(e){return(null==e?void 0:e.hash)||""})))}return u(e,[{key:"ngAfterViewInit",value:function(){this._checkNextDisabled()}},{key:"registerOnOverlayPreviousUpdate",value:function(e){this.onOverlayPreviousUpdate=e}},{key:"registerOnOverlayNextUpdate",value:function(e){this.onOverlayNextUpdate=e,this._updateNextStep()}},{key:"_updateNextStep",value:function(){this.onOverlayNextUpdate&&this.onOverlayNextUpdate(!0)}},{key:"checkIfCanUdateMembers",value:function(){return Object(o.a)(this,void 0,void 0,l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.permissions.hasPermission(s.MingaPermission.CONTENT_GROUP_MANAGE),e.next=3,this.group$.pipe(Object(p.a)()).toPromise();case 3:n=e.sent,this.canUpdateMembers=m.a.isOwner(n)||t,this._updateNextStep();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"onAcceptMember",value:function(e){return Object(o.a)(this,void 0,void 0,l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.memberUpdateMap.set(e.person.personHash,m.b.MEMBER),this._checkNextDisabled();case 1:case"end":return t.stop()}}),t,this)})))}},{key:"onDeclineMember",value:function(e){return Object(o.a)(this,void 0,void 0,l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.memberUpdateMap.set(e.person.personHash,null),this._checkNextDisabled();case 1:case"end":return t.stop()}}),t,this)})))}},{key:"onRemoveMember",value:function(e){return Object(o.a)(this,void 0,void 0,l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.memberUpdateMap.set(e.person.personHash,null),this._checkNextDisabled();case 1:case"end":return t.stop()}}),t,this)})))}},{key:"onAddOwner",value:function(e){this.memberUpdateMap.set(e.person.personHash,m.b.OWNER),this._checkNextDisabled()}},{key:"onRemoveOwner",value:function(e){this.memberUpdateMap.set(e.person.personHash,m.b.MEMBER),this._checkNextDisabled()}},{key:"confirmRemove",value:function(){return Object(o.a)(this,void 0,void 0,l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))}},{key:"onOverlayClose",value:function(){return Object(o.a)(this,void 0,void 0,l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this._location.back(),!0));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"overlayPrevious",get:function(){return{icon:"close",text:""}}},{key:"hasOverlayPrevious",value:function(){return this.overlayPrevious}},{key:"hasOverlayNext",value:function(){return!!this.canUpdateMembers&&{text:"Save Changes",icon:"publish-o"}}},{key:"onOverlayPrevious",value:function(){return Object(o.a)(this,void 0,void 0,l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.onOverlayClose();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"onOverlayNext",value:function(){return Object(o.a)(this,void 0,void 0,l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.onOverlayNextDisabled(!0),e.next=3,this.submit();case 3:this.onOverlayNextDisabled(!1);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"_checkNextDisabled",value:function(){this.onOverlayNextDisabled&&this.onOverlayNextDisabled(!this.memberUpdateMap.size)}},{key:"registerOnOverlayNextDisabled",value:function(e){this.onOverlayNextDisabled=e,this._checkNextDisabled()}},{key:"registerOnOverlayPreviousDisabled",value:function(e){this.onOverlayPreviousDisabled=e}},{key:"submit",value:function(){return Object(o.a)(this,void 0,void 0,l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.group$.pipe(Object(p.a)()).toPromise();case 2:return t=e.sent,e.next=5,this.groupsFacade.dispatchUpdateGroupMembers(t.hash,this.memberUpdateMap);case 5:case"end":return e.stop()}}),e,this)})))}}]),e}()).\u0275fac=function(e){return new(e||r)(a["\u0275\u0275directiveInject"](d.b),a["\u0275\u0275directiveInject"](h.k),a["\u0275\u0275directiveInject"](f.c),a["\u0275\u0275directiveInject"](v.a),a["\u0275\u0275directiveInject"](b.a))},r.\u0275cmp=a["\u0275\u0275defineComponent"]({type:r,selectors:[["mg-group-member-list-overlay"]],decls:5,vars:12,consts:[[3,"component"],[3,"groupDetails","group","currentMemberPersonHash","canUpdateMembers","unsavedMemberRankings","acceptMember","declineMember","removeMember","addOwner","removeOwner"]],template:function(e,t){1&e&&(a["\u0275\u0275element"](0,"mg-legacy-overlay-nav",0),a["\u0275\u0275elementStart"](1,"mg-group-member-list",1),a["\u0275\u0275listener"]("acceptMember",(function(e){return t.onAcceptMember(e)}))("declineMember",(function(e){return t.onDeclineMember(e)}))("removeMember",(function(e){return t.onRemoveMember(e)}))("addOwner",(function(e){return t.onAddOwner(e)}))("removeOwner",(function(e){return t.onRemoveOwner(e)})),a["\u0275\u0275pipe"](2,"async"),a["\u0275\u0275pipe"](3,"async"),a["\u0275\u0275pipe"](4,"async"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("component",t),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("groupDetails",a["\u0275\u0275pipeBind1"](2,6,t.groupDetails$))("group",a["\u0275\u0275pipeBind1"](3,8,t.group$))("currentMemberPersonHash",a["\u0275\u0275pipeBind1"](4,10,t.currentMemberPersonHash$))("canUpdateMembers",t.canUpdateMembers)("unsavedMemberRankings",t.memberUpdateMap))},directives:[x.a,C.a],pipes:[h.b],styles:["[_nghost-%COMP%]{display:block;margin:0}"]}),r),O=n("/652"),w=n("CL15"),M=((i=u((function e(){g(this,e)}))).\u0275fac=function(e){return new(e||i)},i.\u0275mod=a["\u0275\u0275defineNgModule"]({type:i}),i.\u0275inj=a["\u0275\u0275defineInjector"]({imports:[[O.a,w.a,h.c]]}),i)},SE99:function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var r,i,o=n("8Y7J"),a=n("CZ+w"),s=(n("mrSG"),n("5km/"),n("oTGS"),n("LRne"),n("2Vo4"),n("itXk"),n("Kj3r"),n("UXun"),n("/uUt"),n("eIep"),n("lJxs"),n("SxV6"),n("HSxi"),n("JF7H"),n("SVse")),c=(n("+/Hu"),n("iELJ"),n("/q54"),n("SYVq"),n("ura0"),n("Q2Ze")),l=(n("i1AJ"),n("e6WT")),p=n("s7LF"),m=n("Tj54"),d=(n("Fudl"),n("sj4O"),n("gjtd"),n("4avL"),n("TSSN")),h=n("u9T3"),f=n("CO6v"),v=n("fHWq"),b=n("HxU+"),x=n("ls3q"),C=n("CL15"),y=n("7Tcv"),O=((r=u((function e(){g(this,e)}))).\u0275fac=function(e){return new(e||r)},r.\u0275mod=o["\u0275\u0275defineNgModule"]({type:r}),r.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[x.a,y.a,f.a,v.a,b.a,C.a,s.c,p.m,m.b,l.c,c.f,h.a,d.c]]}),r),w=n("4SDa"),M=n("1FgE"),P=n("rUp2"),_=n("xjLp"),k=n("nB6J"),S=n("RhPl"),I=n("/652"),E=n("y8Ey"),j=n("hMBy"),T=((i=u((function e(){g(this,e)}))).\u0275fac=function(e){return new(e||i)},i.\u0275mod=o["\u0275\u0275defineNgModule"]({type:i}),i.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[a.a,O,w.a,M.a,P.b,_.a,k.a,S.a,I.a,E.a,j.b]}),i)},"UdS/":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("8Y7J"),i=n("1Ell"),o=n("Q2Ze"),a=n("i1AJ"),s=n("ZTz/"),c=n("s7LF"),l=n("UhP/"),p=function(){return{standalone:!0}},m=function(){var e=function(){function e(){g(this,e),this._quickFilter=i.EventStatus.NONE,this.eventStatuses=i.EventStatus,this.quickFilterChange=new r.EventEmitter}return u(e,[{key:"quickFilter",get:function(){return this._quickFilter},set:function(e){this._quickFilter=e}},{key:"onQuickFilterChange",value:function(){this.quickFilterChange.emit(this.quickFilter)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-calendar-quick-filter"]],inputs:{quickFilter:"quickFilter"},outputs:{quickFilterChange:"quickFilterChange"},decls:16,vars:13,consts:[["mgFormField","","appearance","legacy","floatLabel","never",1,"filter-select",3,"mgHideOptionalMarker","mgNoHintMargin","mgResponsiveHeight","mgNoFloatTop"],["placeholder","Quick Filter","panelClass","rounded-dropdown",3,"ngModel","ngModelOptions","ngModelChange"],[3,"value"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-form-field",0),r["\u0275\u0275elementStart"](1,"mat-label"),r["\u0275\u0275text"](2,"Quick Filter"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"mat-select",1),r["\u0275\u0275listener"]("ngModelChange",(function(e){return t.quickFilter=e}))("ngModelChange",(function(){return t.onQuickFilterChange()})),r["\u0275\u0275elementStart"](4,"mat-option",2),r["\u0275\u0275text"](5,"All Events"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"mat-option",2),r["\u0275\u0275text"](7,"My Events"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"mat-option",2),r["\u0275\u0275text"](9,"- Invited to"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"mat-option",2),r["\u0275\u0275text"](11,"- Maybe"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"mat-option",2),r["\u0275\u0275text"](13,"- Going"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"mat-option",2),r["\u0275\u0275text"](15,"- Can't Go"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275property"]("mgHideOptionalMarker",!0)("mgNoHintMargin",!0)("mgResponsiveHeight",!0)("mgNoFloatTop",!0),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngModel",t.quickFilter)("ngModelOptions",r["\u0275\u0275pureFunction0"](12,p)),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("value",t.eventStatuses.NONE),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("value","My Events"),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("value",t.eventStatuses.INVITED),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("value",t.eventStatuses.INTERESTED),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("value",t.eventStatuses.GOING),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("value",t.eventStatuses.NOT_GOING))},directives:[o.d,a.a,o.h,s.a,c.t,c.w,l.m],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");.filter-select[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:6px;padding:0 2px 0 6px}'],changeDetection:0}),e}()},Wg9c:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return m}));var r,i,o=n("8Y7J"),a=n("HSxi"),s=n("iVxe"),c=n("SVse"),l=((r=u((function e(t){g(this,e),this.groupsFacade=t,this.group$=this.groupsFacade.getCurrentGroup(),this.groupDetails$=this.groupsFacade.getCurrentGroupDetails()}))).\u0275fac=function(e){return new(e||r)(o["\u0275\u0275directiveInject"](a.b))},r.\u0275cmp=o["\u0275\u0275defineComponent"]({type:r,selectors:[["mg-view-group-about-page"]],inputs:{group$:"group$",groupDetails$:"groupDetails$"},decls:3,vars:6,consts:[[3,"group","groupDetails"]],template:function(e,t){1&e&&(o["\u0275\u0275element"](0,"mg-group-about",0),o["\u0275\u0275pipe"](1,"async"),o["\u0275\u0275pipe"](2,"async")),2&e&&o["\u0275\u0275property"]("group",o["\u0275\u0275pipeBind1"](1,2,t.group$))("groupDetails",o["\u0275\u0275pipeBind1"](2,4,t.groupDetails$))},directives:[s.a],pipes:[c.b],styles:[""]}),r),p=n("CZ+w"),m=((i=u((function e(){g(this,e)}))).\u0275fac=function(e){return new(e||i)},i.\u0275mod=o["\u0275\u0275defineNgModule"]({type:i}),i.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[p.a,c.c]]}),i)},XIjf:function(e,t,n){"use strict";n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return L}));var r=n("8Y7J"),i=n("Cnb3"),o=n("/jon"),a=n("iInd"),s=n("HSxi"),c=n("Vwx4"),l=n("TUjp"),p=n("2nPA"),m=n("HQAS"),d=n("0cKA"),h=n("05dM"),f=n("Q5WP"),v=n("5/J/"),b=n("zDft"),x=n("SVse"),C=n("TSSN");function y(e,t){if(1&e&&(r["\u0275\u0275element"](0,"mg-search-content",5),r["\u0275\u0275pipe"](1,"async")),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("groupHashes",r["\u0275\u0275pipeBind1"](1,2,n.groupHash$))("query",n.searchText)}}function O(e,t){if(1&e&&r["\u0275\u0275element"](0,"mg-poll-mini-card",6),2&e){var n=t.$implicit,i=t.itemId;r["\u0275\u0275property"]("showVotes",!1)("context",i)("content",n)("mgContentLink",i)}}var w,M,P=function(e){return{groupHashes:e}},_=function(){return[]},k=((w=function(){function e(t,n,r,i){g(this,e),this.poll=t,this.route=n,this.groupsFacade=r,this.permissions=i,this.isGroupOwner=!1,this.filter={},this.searchText="",this.emptyStateIcons=[{icon:"post",text:"Add"},{icon:"polls-o",text:"Poll"}],this.groupHash$=this.groupsFacade.getCurrentGroupHashObservable(),this.group$=this.groupsFacade.getCurrentGroup()}return u(e,[{key:"canPostPolls",value:function(e){return!!e&&this.groupsFacade.canPostContentTypeToGroup(e,i.MingaPermission.GROUP_CONTENT_POLL_CREATE)}}]),e}()).\u0275fac=function(e){return new(e||w)(r["\u0275\u0275directiveInject"](o.Poll),r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](s.b),r["\u0275\u0275directiveInject"](c.c))},w.\u0275cmp=r["\u0275\u0275defineComponent"]({type:w,selectors:[["mg-view-group-pollss-page"]],decls:11,vars:21,consts:[["mgSearchArea","",3,"placeholder","searchText"],[1,"feed-items"],["rpcStream","streamPollsV2","mgStreamControl","viewGroupPollFeed","rpcControl","streamPollsV2Control",3,"filter","service"],["mgStreamItem",""],["mg-stream-empty","",3,"title","subtitle","icons"],["contentType","POLL",3,"groupHashes","query"],[3,"showVotes","context","content","mgContentLink"]],template:function(e,t){var n;(1&e&&(r["\u0275\u0275template"](0,y,2,4,"ng-template",0),r["\u0275\u0275pipe"](1,"async"),r["\u0275\u0275listener"]("searchText",(function(e){return t.searchText=e})),r["\u0275\u0275elementStart"](2,"div",1),r["\u0275\u0275elementStart"](3,"mg-stream-scroller",2),r["\u0275\u0275pipe"](4,"async"),r["\u0275\u0275template"](5,O,1,4,"ng-template",3),r["\u0275\u0275element"](6,"mg-empty-state",4),r["\u0275\u0275pipe"](7,"translate"),r["\u0275\u0275pipe"](8,"async"),r["\u0275\u0275pipe"](9,"translate"),r["\u0275\u0275pipe"](10,"async"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e)&&(r["\u0275\u0275property"]("placeholder","Search "+(null==(n=r["\u0275\u0275pipeBind1"](1,6,t.group$))?null:n.name)+" Polls"),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("filter",r["\u0275\u0275pureFunction1"](18,P,r["\u0275\u0275pipeBind1"](4,8,t.groupHash$)))("service",t.poll),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("title",r["\u0275\u0275pipeBind1"](7,10,"emptyState.managePollsTitle"))("subtitle",t.canPostPolls(r["\u0275\u0275pipeBind1"](8,12,t.group$))?r["\u0275\u0275pipeBind1"](9,14,"emptyState.managePollsSubtitle"):"")("icons",t.canPostPolls(r["\u0275\u0275pipeBind1"](10,16,t.group$))?t.emptyStateIcons:r["\u0275\u0275pureFunction0"](20,_)))},directives:[l.a,p.a,m.a,d.a,h.a,f.a,v.a,b.a],pipes:[x.b,C.d],styles:["[_nghost-%COMP%]{display:block}.feed-items[_ngcontent-%COMP%]{margin-bottom:32px}"]}),w),S=n("u9T3"),I=n("NG9B"),E=n("m9yI"),j=n("PRFu"),T=n("xvu2"),G=n("DjdL"),F=n("HDrY"),L=((M=u((function e(){g(this,e)}))).\u0275fac=function(e){return new(e||M)},M.\u0275mod=r["\u0275\u0275defineNgModule"]({type:M}),M.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[E.b,T.a,j.a,F.a,G.d,I.a,x.c,S.a,C.c]]}),M)},bZiG:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("8Y7J"),i=n("SVse"),o=n("sj4O"),a=n("WNdF");function s(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",4),r["\u0275\u0275elementStart"](1,"p"),r["\u0275\u0275text"](2,"Loading available roles..."),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](3,"mg-spinner"),r["\u0275\u0275elementEnd"]())}function c(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"mg-multi-select-role",5),r["\u0275\u0275listener"]("selectedRolesChange",(function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().onRolesChange(e)})),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("roles",i.roles)("selectedRoles",i.selectedRoles)("defaultSelected",!1)}}var l=function(){var e=function(){function e(){g(this,e),this.feedName="",this.selectedRoles=[],this.roles=[],this.selectedRolesChange=new r.EventEmitter}return u(e,[{key:"onRolesChange",value:function(e){this.selectedRolesChange.emit(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-feed-permittable-roles"]],inputs:{feedName:"feedName",selectedRoles:"selectedRoles",roles:"roles"},outputs:{selectedRolesChange:"selectedRolesChange"},decls:7,vars:3,consts:[[1,"feed-permittable-roles"],[1,"title"],["class","roles-loading-container",4,"ngIf"],[3,"roles","selectedRoles","defaultSelected","selectedRolesChange",4,"ngIf"],[1,"roles-loading-container"],[3,"roles","selectedRoles","defaultSelected","selectedRolesChange"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"p",1),r["\u0275\u0275text"](2,"Posting Permissions"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"p"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](5,s,4,0,"div",2),r["\u0275\u0275template"](6,c,1,3,"mg-multi-select-role",3),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate1"]("Allow the following roles to post to the ",t.feedName," feed:"),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!t.roles.length),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.roles.length))},directives:[i.o,o.a,a.a],styles:["[_nghost-%COMP%]{display:block;font-size:inherit}.feed-permittable-roles[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:inherit;font-size:inherit}.feed-permittable-roles[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;margin-bottom:8px}.feed-permittable-roles[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%] + p[_ngcontent-%COMP%]{margin-top:8px}.roles-loading-container[_ngcontent-%COMP%]{width:100%;text-align:center}"],changeDetection:0}),e}()},bo7O:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n("xiiZ");var r,i=n("SVse"),o=n("8Y7J"),a=n("ugqS"),s=n("Ogcz"),c=((r=u((function e(){g(this,e)}))).\u0275fac=function(e){return new(e||r)},r.\u0275mod=o["\u0275\u0275defineNgModule"]({type:r}),r.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[a.a,s.b,i.c]]}),r)},c0o2:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("8Y7J"),i=n("lJxs"),o=n("DO6O"),a=n("VDRc"),s=n("SVse"),c=n("UdS/"),l=n("Fudl"),p=n("iInd");function m(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",7),r["\u0275\u0275text"](1," Calendar "),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("routerLink",n.calendarPath)}}function d(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",7),r["\u0275\u0275text"](1," List "),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("routerLink",n.schedulePath)}}var h=function(){var e=function(){function e(t){g(this,e),this.calendarService=t,this.calendarScheduleOptionsOpened=!1,this.calendarPath="",this.schedulePath="",this.clickOptions=new r.EventEmitter,this.settings$=t.settings$.pipe(Object(i.a)((function(e){return Object.assign({},e)})))}return u(e,[{key:"openCalendarOptions",value:function(){this.calendarScheduleOptionsOpened=!this.calendarScheduleOptionsOpened}},{key:"onClickOptions",value:function(){this.openCalendarOptions(),this.clickOptions.emit()}},{key:"onQuickFilterChange",value:function(e){this.calendarService.setQuickFilter(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](o.a))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-calendar-schedule-nav"]],inputs:{calendarPath:"calendarPath",schedulePath:"schedulePath"},outputs:{clickOptions:"clickOptions"},decls:10,vars:7,consts:[["fxLayout","row","fxLayoutAlign","center center",1,"calendar-nav"],["class","calendar-nav-btn","routerLinkActive","active",3,"routerLink",4,"ngIf"],["fxFlex","auto"],[3,"quickFilter","quickFilterChange"],[1,"cog-wrapper",3,"click"],[1,"calendar-options-btn"],[1,"calendar-schedule-options-top-border"],["routerLinkActive","active",1,"calendar-nav-btn",3,"routerLink"]],template:function(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275template"](1,m,2,1,"div",1),r["\u0275\u0275template"](2,d,2,1,"div",1),r["\u0275\u0275element"](3,"div",2),r["\u0275\u0275elementStart"](4,"mg-calendar-quick-filter",3),r["\u0275\u0275listener"]("quickFilterChange",(function(e){return t.onQuickFilterChange(e)})),r["\u0275\u0275pipe"](5,"async"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",4),r["\u0275\u0275listener"]("click",(function(){return t.onClickOptions()})),r["\u0275\u0275elementStart"](7,"mg-icon",5),r["\u0275\u0275text"](8,"settings-active"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](9,"div",6)),2&e){var n;r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.calendarPath),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.schedulePath),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("quickFilter",null==(n=r["\u0275\u0275pipeBind1"](5,5,t.settings$))?null:n.quickFilter),r["\u0275\u0275advance"](3),r["\u0275\u0275classProp"]("options-opened",t.calendarScheduleOptionsOpened)}},directives:[a.e,a.d,s.o,a.b,c.a,l.a,p.i,p.h],pipes:[s.b],styles:["[_nghost-%COMP%]{display:block}@media (max-width:510px){[_nghost-%COMP%]{background-color:#fff}}.calendar-nav[_ngcontent-%COMP%]{margin:0;padding-top:4px;box-sizing:border-box}.calendar-nav[_ngcontent-%COMP%]   .cog-wrapper[_ngcontent-%COMP%]{padding:0 8px 2px}.calendar-nav-btn[_ngcontent-%COMP%]{color:#2f2f2f;font-size:14px;font-weight:700;cursor:pointer;padding:14px;margin:0;border-bottom:3px solid transparent;outline:none;box-sizing:border-box;flex-basis:20%;flex-grow:0;text-align:center}.calendar-nav-btn.active[_ngcontent-%COMP%]{color:#70b2d7;border-bottom:3px solid #70b2d7;border-left:1px solid #f0f0f0;border-right:1px solid #f0f0f0}.calendar-options-btn[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;cursor:pointer;transform:rotate(0deg);transition:transform .1s ease,color .1s ease;color:#2f2f2f;display:inline-block}.calendar-options-btn.options-opened[_ngcontent-%COMP%]{color:#036;transform:rotate(45deg)}.calendar-schedule-options-top-border[_ngcontent-%COMP%]{border-top:1px solid #ccc;box-shadow:0 0 16px rgba(0,0,0,.4)}mg-calendar-quick-filter[_ngcontent-%COMP%]{font-size:14px;max-width:38%}"],changeDetection:0}),e}()},cPHN:function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n("c0o2");var r=n("SVse"),i=n("8Y7J"),o=n("u9T3"),a=n("iInd"),s=n("s7LF"),c=n("Q2Ze"),l=n("ZTz/"),p=n("HxU+");n("UdS/");var m,d,h=((m=u((function e(){g(this,e)}))).\u0275fac=function(e){return new(e||m)},m.\u0275mod=i["\u0275\u0275defineNgModule"]({type:m}),m.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[p.a,l.b,r.c,o.a,s.m,c.f]]}),m),f=n("ls3q"),v=((d=u((function e(){g(this,e)}))).\u0275fac=function(e){return new(e||d)},d.\u0275mod=i["\u0275\u0275defineNgModule"]({type:d}),d.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[f.a,h,r.c,a.k,o.a]]}),d)},eflX:function(e,t,n){"use strict";n.d(t,"a",(function(){return P})),n.d(t,"b",(function(){return E}));var r=n("8Y7J"),o=n("iIBE"),a=n("TxG7"),s=n("Cnb3"),c=n("HSxi"),l=n("iInd"),p=n("Vwx4"),m=n("SVse"),d=n("2nPA"),h=n("HQAS"),f=n("0cKA"),v=n("05dM"),b=n("dc+t"),x=n("TSSN");function C(e,t){if(1&e&&r["\u0275\u0275element"](0,"mg-content-feed-item",5),2&e){var n=t.$implicit;r["\u0275\u0275property"]("context",t.itemId)("content",n)}}var y=function(e){return{groupHashes:e}};function O(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",1),r["\u0275\u0275elementStart"](1,"mg-stream-scroller",2),r["\u0275\u0275pipe"](2,"async"),r["\u0275\u0275template"](3,C,1,2,"ng-template",3),r["\u0275\u0275element"](4,"mg-empty-state",4),r["\u0275\u0275pipe"](5,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("filter",r["\u0275\u0275pureFunction1"](8,y,r["\u0275\u0275pipeBind1"](2,4,n.groupHash$)))("service",n.contentFeed)("mgTrimmed",!0),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("title",r["\u0275\u0275pipeBind1"](5,6,"emptyState.nothingGroupFeed"))}}var w,M,P=((w=function(){function e(t,n,r,i){g(this,e),this.groupsFacade=t,this.route=n,this.contentFeed=r,this.permissions=i,this.ContentFeed=a.ContentFeed,this.emptyStateIcons=[],this.groupHash$=this.groupsFacade.getCurrentGroupHashObservable(),this.group$=this.groupsFacade.getCurrentGroup()}return u(e,[{key:"getEmptyStateIcons",value:function(e){if(e){var t=o.a.isOwner(e)||this.permissions.hasPermission(s.MingaPermission.SUPERADMIN);if(!t&&o.a.isMember(e)&&e.allowedRoleTypes){var n,r=i(e.allowedRoleTypes);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(this.permissions.hasRoleType(a)){t=!0;break}}}catch(c){r.e(c)}finally{r.f()}}if(t)return[{icon:"post",text:"Add"}]}return[]}}]),e}()).\u0275fac=function(e){return new(e||w)(r["\u0275\u0275directiveInject"](c.b),r["\u0275\u0275directiveInject"](l.a),r["\u0275\u0275directiveInject"](a.ContentFeed),r["\u0275\u0275directiveInject"](p.c))},w.\u0275cmp=r["\u0275\u0275defineComponent"]({type:w,selectors:[["mg-view-group-feed-page"]],decls:2,vars:3,consts:[["class","feed-items",4,"ngIf"],[1,"feed-items"],["mgStreamControl","viewGroupFeed","rpcStream","streamContentFeed","rpcControl","streamContentFeedControl",3,"filter","service","mgTrimmed"],["mgStreamItem",""],["mg-stream-empty","",3,"title"],[3,"context","content"]],template:function(e,t){1&e&&(r["\u0275\u0275template"](0,O,6,10,"div",0),r["\u0275\u0275pipe"](1,"async")),2&e&&r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pipeBind1"](1,1,t.groupHash$))},directives:[m.o,d.a,h.a,f.a,v.a,b.a],pipes:[m.b,x.d],styles:["[_nghost-%COMP%]{display:block}.feed-items[_ngcontent-%COMP%]{margin-bottom:32px}"]}),w),_=n("u9T3"),k=n("NG9B"),S=n("m9yI"),I=n("5uzz"),E=((M=u((function e(){g(this,e)}))).\u0275fac=function(e){return new(e||M)},M.\u0275mod=r["\u0275\u0275defineNgModule"]({type:M}),M.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[S.b,I.a,k.a,m.c,_.a,x.c]]}),M)},gtkb:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("SVse"),i=n("8Y7J"),o=n("s7LF"),a=n("Tj54");n("qftF");var s,c=((s=u((function e(){g(this,e)}))).\u0275fac=function(e){return new(e||s)},s.\u0275mod=i["\u0275\u0275defineNgModule"]({type:s}),s.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[o.m,r.c,a.b]]}),s)},iVxe:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("8Y7J"),i=n("Jaf7"),o=n("SVse"),a=n("gjtd"),s=n("DobJ"),c=n("Jkk8"),l=n("rK0i");function p(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",4),r["\u0275\u0275element"](1,"mg-avatar",5),r["\u0275\u0275element"](2,"mg-person-minimal",6),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("src",null==n.groupOwner?null:n.groupOwner.profileImageUrl)("color",null==n.groupOwner?null:n.groupOwner.badgeIconColor)("personHash",null==n.groupOwner?null:n.groupOwner.personHash),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("person",n.groupOwner)}}function m(e,t){if(1&e&&(r["\u0275\u0275element"](0,"p",7),r["\u0275\u0275pipe"](1,"mgSafeHtml"),r["\u0275\u0275pipe"](2,"ugcLinksContent")),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("innerHTML",r["\u0275\u0275pipeBind1"](1,1,r["\u0275\u0275pipeBind1"](2,3,null==n.group?null:n.group.description)),r["\u0275\u0275sanitizeHtml"])}}function d(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"p"),r["\u0275\u0275text"](1,"No description"),r["\u0275\u0275elementEnd"]())}var h=function(){var e=function(){function e(){g(this,e)}return u(e,[{key:"groupOwner",get:function(){if(!this.groupDetails)return null;var e=i.GroupMemberInfo.Rank.OWNER,t=this.groupDetails.members.find((function(t){return t.rank==e}));return t&&t.person||null}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-group-about"]],inputs:{group:"group",groupDetails:"groupDetails"},decls:6,vars:4,consts:[[1,"user-content"],["class","group-owner-details","fxLayout","row","fxLayoutAlign","start center",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center",1,"group-owner-details"],[3,"src","color","personHash"],[3,"person"],[3,"innerHTML"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"h1"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](3,p,3,4,"div",1),r["\u0275\u0275template"](4,m,3,5,"p",2),r["\u0275\u0275template"](5,d,2,0,"p",3),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"]("About ",null==t.group?null:t.group.name,""),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.groupOwner),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",null==t.group?null:t.group.description),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!(null!=t.group&&t.group.description)))},directives:[o.o,a.a,s.a],pipes:[c.a,l.a],styles:["[_nghost-%COMP%]{position:relative;z-index:1;display:block;border-radius:8px;background-color:#fff;box-shadow:0 0 6px rgba(0,0,0,.16);padding:16px}.user-content[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:first-child{margin-top:0}.user-content[_ngcontent-%COMP%]     blockquote, .user-content[_ngcontent-%COMP%]     li, .user-content[_ngcontent-%COMP%]     ol, .user-content[_ngcontent-%COMP%]     p, .user-content[_ngcontent-%COMP%]     ul{color:#737373}.user-content[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:last-child{margin-bottom:0!important}.leave-group[_ngcontent-%COMP%]{font-size:65%}.group-owner-details[_ngcontent-%COMP%]{--mg-avatar-size:25px}.group-owner-details[_ngcontent-%COMP%]   mg-person-minimal[_ngcontent-%COMP%]{margin-left:8px}"]}),e}()},jKai:function(n,r,i){"use strict";i.d(r,"a",(function(){return x}));var o,a=i("mrSG"),s=i("8Y7J"),c=i("86jm"),p=i("B8CN"),m=i("2Vo4"),d=i("eIep"),h=i("SxV6"),f=i("lHZB"),v=i("Eh7J"),b=i("HSxi"),x=((o=function(n){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&e(t,n)}(i,n);var r=t(i);function i(e,t,n){var o;return g(this,i),(o=r.call(this,e,t)).mingaGalleryProto=e,o.reportService=t,o.groupsFacade=n,o.groupHashSubj=new m.a(""),o.setGroupFromHash(""),o.groupHash$=o.groupHashSubj.asObservable(),o._group$=o.groupHash$.pipe(Object(d.a)((function(e){return o.groupsFacade.getGroup(e)}))),o}return u(i,[{key:"setGroupFromHash",value:function(e){return Object(a.a)(this,void 0,void 0,l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.groupHashSubj.next(e);case 1:case"end":return t.stop()}}),t,this)})))}},{key:"_getGroup",value:function(){return Object(a.a)(this,void 0,void 0,l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._group$){e.next=2;break}throw new Error("GroupGalleryService called without a group");case 2:return e.next=4,this._group$.pipe(Object(h.a)()).toPromise();case 4:if(!(t=e.sent)){e.next=7;break}return e.abrupt("return",t);case 7:throw new Error("GroupGalleryService could not find group from the given group hash");case 8:case"end":return e.stop()}}),e,this)})))}},{key:"fetchSummary",value:function(){return Object(a.a)(this,void 0,void 0,l().mark((function e(){var t=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._group$&&this._group$.pipe(Object(h.a)((function(e){return null!=e&&null!=e.hash}))).subscribe((function(e){t._fetchSummary()}));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"_fetchSummary",value:function(){return Object(a.a)(this,void 0,void 0,l().mark((function e(){var t,n,r,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getGroup();case 2:return t=e.sent,n=new p.MingaGallerySummaryRequest,r=this._loading.getValue(),n.setGroupHash(t.hash),e.prev=6,r||this._loading.next(!0),e.next=10,this.mingaGalleryProto.summary(n);case 10:i=e.sent,this._summary.next(i.toObject());case 12:return e.prev=12,r||this._loading.next(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[6,,12,15]])})))}},{key:"getSearchPhotoTotal",value:function(e){return Object(a.a)(this,void 0,void 0,l().mark((function t(){var n,r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._getGroup();case 2:return n=t.sent,(r=new p.MingaGalleryGetPhotoTotalRequest).setSearchQuery(e),r.setGroupHash(n.hash),t.next=8,this.mingaGalleryProto.getPhotoTotal(r);case 8:return t.abrupt("return",t.sent.getPhotoTotal());case 9:case"end":return t.stop()}}),t,this)})))}},{key:"addPhoto",value:function(e){return Object(a.a)(this,void 0,void 0,l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._addPhoto(this._summary,e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"deletePhoto",value:function(e){return Object(a.a)(this,void 0,void 0,l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._deletePhoto(this._summary,e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"resolvePhoto",value:function(e){return Object(a.a)(this,void 0,void 0,l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._resolvePhoto(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))}}]),i}(c.a)).\u0275fac=function(e){return new(e||o)(s["\u0275\u0275inject"](f.MingaGallery),s["\u0275\u0275inject"](v.a),s["\u0275\u0275inject"](b.b))},o.\u0275prov=s["\u0275\u0275defineInjectable"]({token:o,factory:o.\u0275fac,providedIn:"root"}),o)},jnbT:function(e,t,n){"use strict";n.d(t,"a",(function(){return P})),n.d(t,"b",(function(){return S}));var r,i,o=n("mrSG"),a=n("8Y7J"),s=n("s7LF"),c=n("LvDl"),p=n("5km/"),m=n("B3cG"),d=n("SxV6"),h=n("HSxi"),f=n("JF7H"),v=n("SVse"),b=n("GFah"),x=n("iELJ"),C=n("WH00"),y=n("UWMR"),O=n("SYVq"),w=n("2dIi"),M=["form"],P=((r=function(){function e(t,n,r,i,o,a,s,c,l,p){g(this,e),this.groupsFacade=t,this.auth=n,this._location=r,this.rootService=i,this.groupService=o,this.dialog=a,this.contentEvents=s,this.fileUploadManager=c,this.snackBar=l,this.url=p,this.groupHash$=this.groupsFacade.getCurrentGroupHashObservable(),this.groupAsset="",this.FileUploadStatus=m.e,this.uploadItems=[],this.pendingFiles=[],this.enableUploading=!1}return u(e,[{key:"ngAfterViewInit",value:function(){this.initPendingFiles(),this.onOverlayNextDisabled(!0)}},{key:"onStatusChange",value:function(e){this.onOverlayNextDisabled(!e)}},{key:"onFilesChange",value:function(e){this.uploadItems=e}},{key:"initPendingFiles",value:function(){return Object(o.a)(this,void 0,void 0,l().mark((function e(){var t,n,r,i,o=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){o.snackBar.open("No files available to upload, select files and try again"),o.onOverlayClose()},e.next=3,this.groupHash$.pipe(Object(d.a)()).toPromise();case 3:if(n=e.sent){e.next=6;break}return e.abrupt("return",(console.error("In group context, but no group hash found"),void t()));case 6:r="groupFiles_".concat(n),(i=this.fileUploadManager.getPendingFiles(r))&&i.length?(this.pendingFiles=c.clone(i),this.fileUploadManager.clearPendingFiles(r)):t();case 8:case"end":return e.stop()}}),e,this)})))}},{key:"onCancel",value:function(e){this.onOverlayClose()}},{key:"onOverlayClose",value:function(){return Object(o.a)(this,void 0,void 0,l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this._location.back(),!0));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"hasOverlayNext",value:function(){return{text:"Upload",icon:"upload-o"}}},{key:"onOverlayNext",value:function(){return Object(o.a)(this,void 0,void 0,l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.onOverlayNextDisabled(!0),this.enableUploading=!0,this.onOverlayNextDisabled(!1);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"overlayPrevious",get:function(){return{icon:"close",text:"Cancel"}}},{key:"getUploadItemKey",value:function(e){return e.file?e.file.name:e.link}},{key:"onFilesUploaded",value:function(e){e&&e.length&&this.submit(e)}},{key:"hasOverlayPrevious",value:function(){return this.overlayPrevious}},{key:"onOverlayPrevious",value:function(){return Object(o.a)(this,void 0,void 0,l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.onOverlayClose();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"registerOnOverlayNextDisabled",value:function(e){this.onOverlayNextDisabled=e}},{key:"registerOnOverlayPreviousDisabled",value:function(e){this.onOverlayPreviousDisabled=e}},{key:"submit",value:function(e){this.rootService.addLoadingPromise(this._submit(e))}},{key:"_submit",value:function(e){return Object(o.a)(this,void 0,void 0,l().mark((function t(){var n,r,i=this;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.groupHash$.pipe(Object(d.a)()).toPromise();case 2:return n=t.sent,t.next=5,this.groupService.addGroupFiles(n,e).catch((function(e){console.error("group file upload error: ",e),i.snackBar.open("an error occurred while saving files."),i.onOverlayNextDisabled(!1)}));case 5:if(!(r=t.sent)){t.next=8;break}return t.abrupt("return",(this.dialog.open(p.k,{data:{text:(this.uploadItems.length>1?"Files":"File")+" Successfully Uploaded"}}),this.contentEvents.emitFileUpdateEvent({groupHash:n,files:r.files}),new Promise((function(e,t){setTimeout((function(){i.onOverlayClose(),e(null)}),1500)}))));case 8:case"end":return t.stop()}}),t,this)})))}}]),e}()).\u0275fac=function(e){return new(e||r)(a["\u0275\u0275directiveInject"](h.b),a["\u0275\u0275directiveInject"](f.a),a["\u0275\u0275directiveInject"](v.k),a["\u0275\u0275directiveInject"](b.a),a["\u0275\u0275directiveInject"](h.c),a["\u0275\u0275directiveInject"](x.b),a["\u0275\u0275directiveInject"](C.a),a["\u0275\u0275directiveInject"](m.d),a["\u0275\u0275directiveInject"](y.b),a["\u0275\u0275directiveInject"](v.l))},r.\u0275cmp=a["\u0275\u0275defineComponent"]({type:r,selectors:[["mg-group-file-upload-overlay"]],viewQuery:function(e,t){var n;1&e&&a["\u0275\u0275viewQuery"](M,3,s.v),2&e&&a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.form=n.first)},decls:2,vars:3,consts:[[3,"component"],[3,"initialFiles","uploadFileAssets","valid","pendingFiles","filesUploaded","cancel"]],template:function(e,t){1&e&&(a["\u0275\u0275element"](0,"mg-legacy-overlay-nav",0),a["\u0275\u0275elementStart"](1,"mg-bulk-file-upload",1),a["\u0275\u0275listener"]("valid",(function(e){return t.onStatusChange(e)}))("pendingFiles",(function(e){return t.onFilesChange(e)}))("filesUploaded",(function(e){return t.onFilesUploaded(e)}))("cancel",(function(e){return t.onCancel(e)})),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("component",t),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("initialFiles",t.pendingFiles)("uploadFileAssets",t.enableUploading))},directives:[O.a,w.a],styles:["[_nghost-%COMP%]{display:block}.disabled[_ngcontent-%COMP%]{pointer-events:none;cursor:not-allowed}.disabled.delete-icon-wrapper[_ngcontent-%COMP%], .disabled.input-action[_ngcontent-%COMP%]{opacity:.6}.title-input[_ngcontent-%COMP%]{border-top:none;border-bottom:1px solid #ccc}.input-wrapper.link-input[_ngcontent-%COMP%]{padding:16px 20px calc(16px - .5em)}.input-wrapper.link-input[_ngcontent-%COMP%]   .input-action[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:.4em}.file-input-wrap[_ngcontent-%COMP%]{font-size:10px;position:relative;border-bottom:1px solid #ccc}.file-input-wrap[_ngcontent-%COMP%]   mg-file-input[_ngcontent-%COMP%]{font-size:inherit}.file-input-wrap[_ngcontent-%COMP%]   mg-file-input[_ngcontent-%COMP%]     .drop-area{transition:opacity .3s cubic-bezier(.55,0,.55,.2);opacity:1}.file-input-wrap[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%], .file-input-wrap[_ngcontent-%COMP%]   mg-file-input[_ngcontent-%COMP%]     .drop-area .user-content h2.text{color:#737373;font-size:1.4em;font-weight:400;text-align:center}.file-input-wrap[_ngcontent-%COMP%]   .uploading-loading-container[_ngcontent-%COMP%]{position:absolute;z-index:1;top:0;left:0;right:0;padding:18px 16px 16px}@media (orientation:landscape){.file-input-wrap[_ngcontent-%COMP%]   .uploading-loading-container[_ngcontent-%COMP%]{padding-top:1.25vh}}@media (orientation:portrait){.file-input-wrap[_ngcontent-%COMP%]   .uploading-loading-container[_ngcontent-%COMP%]{padding-top:1.25vw}}@media (orientation:landscape) and (max-height:320px){.file-input-wrap[_ngcontent-%COMP%]   .uploading-loading-container[_ngcontent-%COMP%]{padding-top:4px}}@media (orientation:portrait) and (max-width:320px){.file-input-wrap[_ngcontent-%COMP%]   .uploading-loading-container[_ngcontent-%COMP%]{padding-top:4px}}@media (min-width:1440px){.file-input-wrap[_ngcontent-%COMP%]   .uploading-loading-container[_ngcontent-%COMP%]{padding-top:18px}}.file-input-wrap.loading[_ngcontent-%COMP%]   mg-file-input[_ngcontent-%COMP%]     .drop-area{transition:opacity .3s cubic-bezier(.55,0,.55,.2);opacity:0}.file-input-wrap.loading[_ngcontent-%COMP%]   mg-file-input[_ngcontent-%COMP%]     .drop-area .user-content h2.text{opacity:0}.input-action[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}.input-action[_ngcontent-%COMP%]:hover{cursor:pointer;color:#93f}.input-action[_ngcontent-%COMP%]:last-child{padding-right:0}.input-action-icon[_ngcontent-%COMP%]{position:relative;width:2em;height:1em;display:inline-block}.input-action-icon[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{position:absolute;left:0;bottom:-.2em;width:12px;height:12px}.input-action-icon[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]     mat-icon svg{vertical-align:top}.files-list[_ngcontent-%COMP%]{padding:0}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{border-bottom:1px solid #ccc;display:flex;justify-content:flex-start;align-items:stretch;padding:0 20px}@media (orientation:landscape){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{padding-left:1.5625vh}}@media (orientation:portrait){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{padding-left:1.5625vw}}@media (orientation:landscape) and (max-height:320px){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{padding-left:5px}}@media (orientation:portrait) and (max-width:320px){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{padding-left:5px}}@media (min-width:1280px){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{padding-left:20px}}@media (orientation:landscape){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{padding-right:1.5625vh}}@media (orientation:portrait){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{padding-right:1.5625vw}}@media (orientation:landscape) and (max-height:320px){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{padding-right:5px}}@media (orientation:portrait) and (max-width:320px){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{padding-right:5px}}@media (min-width:1280px){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{padding-right:20px}}.files-list[_ngcontent-%COMP%]   .file-row.disabled[_ngcontent-%COMP%]{pointer-events:none;cursor:not-allowed}@media (min-width:600px){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]:last-child{border-bottom:none}}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .file-upload-wrapper[_ngcontent-%COMP%], .files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-wrapper.file-name[_ngcontent-%COMP%]{padding:20px 0}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .file-upload-wrapper[_ngcontent-%COMP%]{margin-right:10px;height:50px;width:50px;position:relative;flex:0 0 auto}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .file-upload-wrapper[_ngcontent-%COMP%]   mg-file-upload[_ngcontent-%COMP%]{position:absolute;bottom:20px;left:0;font-size:60%;display:none;border-radius:6px;overflow:hidden;height:50px;width:50px}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .file-upload-wrapper[_ngcontent-%COMP%]   mg-file-upload.nonImage[_ngcontent-%COMP%]{opacity:.9}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .file-upload-wrapper[_ngcontent-%COMP%]   mg-file-upload.show[_ngcontent-%COMP%]{display:block}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .file-upload-wrapper[_ngcontent-%COMP%]   mg-file-extension-box[_ngcontent-%COMP%]{width:100%}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .file-upload-wrapper[_ngcontent-%COMP%]   mg-file-extension-box.hide[_ngcontent-%COMP%]{display:none}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-actions[_ngcontent-%COMP%]:not(.input-action){margin-top:20px}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-action[_ngcontent-%COMP%]{padding:20px 10px 6px}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-action[_ngcontent-%COMP%]:hover{cursor:pointer;color:#93f}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-action[_ngcontent-%COMP%]:last-child{padding-right:0}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-wrapper.file-name[_ngcontent-%COMP%]{flex-basis:85%;color:#737373;align-items:center;display:flex;flex-direction:column;align-items:flex-start;justify-content:space-around;max-width:197px;padding-top:10px}@media (min-width:375px) and (orientation:landscape){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-wrapper.file-name[_ngcontent-%COMP%]{max-width:70.6666666667vh}}@media (min-width:375px) and (orientation:portrait){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-wrapper.file-name[_ngcontent-%COMP%]{max-width:70.6666666667vw}}@media (min-width:375px) and (orientation:landscape) and (max-height:375px){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-wrapper.file-name[_ngcontent-%COMP%]{max-width:265px}}@media (min-width:375px) and (orientation:portrait) and (max-width:375px){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-wrapper.file-name[_ngcontent-%COMP%]{max-width:265px}}@media (min-width:375px) and (min-width:847.641509434){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-wrapper.file-name[_ngcontent-%COMP%]{max-width:599}}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-wrapper.file-name[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin-bottom:-.7em}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-wrapper.file-name[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:100%}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-wrapper.file-name[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{margin-bottom:.1em}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-wrapper.file-name[_ngcontent-%COMP%]   .file-rename[_ngcontent-%COMP%]{margin-bottom:.2em}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-wrapper.file-name[_ngcontent-%COMP%]   .file-rename[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .file-rename[_ngcontent-%COMP%]{color:#93f;font-size:70%}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .delete-icon-wrapper[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:20px 0 20px 20px;flex-basis:5%;flex:1 0 auto;justify-content:flex-end}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .delete-icon-wrapper[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{height:18px;width:18px;color:#737373}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .delete-icon-wrapper[_ngcontent-%COMP%]:hover{cursor:pointer}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .delete-icon-wrapper[_ngcontent-%COMP%]:hover   mg-icon[_ngcontent-%COMP%]{color:#de1717}"]}),r),_=n("/yIH"),k=n("CL15"),S=((i=u((function e(){g(this,e)}))).\u0275fac=function(e){return new(e||i)},i.\u0275mod=a["\u0275\u0275defineNgModule"]({type:i}),i.\u0275inj=a["\u0275\u0275defineInjector"]({imports:[[_.a,k.a]]}),i)},kxWE:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("8Y7J"),i=n("lJxs"),o=n("HSxi"),a=n("DO6O"),s=n("c0o2"),c=n("SVse"),l=n("GOup");function p(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"h1",8),r["\u0275\u0275text"](1," Calendar Settings "),r["\u0275\u0275elementEnd"]())}function m(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"h1",8),r["\u0275\u0275text"](1," Events List Settings "),r["\u0275\u0275elementEnd"]())}function d(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",4),r["\u0275\u0275template"](1,p,2,0,"h1",5),r["\u0275\u0275template"](2,m,2,0,"h1",5),r["\u0275\u0275elementStart"](3,"mg-calendar-schedule-options",6,7),r["\u0275\u0275listener"]("groupHashesChange",(function(e){r["\u0275\u0275restoreView"](n);var i=t.ngIf;return r["\u0275\u0275nextContext"](2)._onGroupSelectChange(i,e)}))("eventCategoryChange",(function(e){r["\u0275\u0275restoreView"](n);var i=t.ngIf;return r["\u0275\u0275nextContext"](2)._onCategorySelectChange(i,e)}))("submit",(function(e){r["\u0275\u0275restoreView"](n);var i=t.ngIf;return r["\u0275\u0275nextContext"](2).applyOptions(e,i)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var i=t.ngIf;r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",i.showCalendarSettings),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!i.showCalendarSettings),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("includeWeekends",!i.excludeWeekend)("calendarView",i.calendarView)("groupHashes",i.groupHashes)("selectedCategory",i.category)("showPastEvents",i.showPastEvents)("showCalendarSettings",i.showCalendarSettings)}}function h(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",2),r["\u0275\u0275template"](1,d,5,8,"div",3),r["\u0275\u0275pipe"](2,"async"),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pipeBind1"](2,1,n.settings$))}}var f=function(){var e=function(){function e(t,n){g(this,e),this.eventCalendarService=n,this.searchText="",this.calendarScheduleOptionsOpened=!1,this.settings$=n.settings$.pipe(Object(i.a)((function(e){return Object.assign({},e)}))),this.groups$=t.groups$}return u(e,[{key:"openCalendarOptions",value:function(){this.calendarScheduleOptionsOpened=!this.calendarScheduleOptionsOpened}},{key:"applyOptions",value:function(e,t){var n=Object.assign(Object.assign({},t),{excludeWeekend:!e.includeWeekends,calendarView:e.calendarView,showPastEvents:e.showPastEvents,showCalendarSettings:e.showCalendarSettings});this.eventCalendarService.updateSettings(n,!0),this.calendarScheduleOptionsOpened=!1}},{key:"_onGroupSelectChange",value:function(e,t){t?e.groupHashes=[t]:delete e.groupHashes}},{key:"_onCategorySelectChange",value:function(e,t){t?e.category=t:delete e.category}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](o.b),r["\u0275\u0275directiveInject"](a.a))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-events-home"]],decls:2,vars:3,consts:[[3,"calendarPath","schedulePath","clickOptions"],["class","calendar-schedule-options-container",4,"ngIf"],[1,"calendar-schedule-options-container"],["class","calendar-schedule-options",4,"ngIf"],[1,"calendar-schedule-options"],["class","calendar-settings-title",4,"ngIf"],[3,"includeWeekends","calendarView","groupHashes","selectedCategory","showPastEvents","showCalendarSettings","groupHashesChange","eventCategoryChange","submit"],["calendarScheduleOptions",""],[1,"calendar-settings-title"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mg-calendar-schedule-nav",0),r["\u0275\u0275listener"]("clickOptions",(function(){return t.openCalendarOptions()})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](1,h,3,3,"div",1)),2&e&&(r["\u0275\u0275property"]("calendarPath","./calendar")("schedulePath","./schedule"),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.calendarScheduleOptionsOpened))},directives:[s.a,c.o,l.a],pipes:[c.b],styles:["[_nghost-%COMP%]{position:relative;display:block}@keyframes options-slide-in{0%{transform:translateY(-100%)}to{transform:translateY(0)}}.calendar-options-btn[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;cursor:pointer;transform:rotate(0deg);transition:transform .1s ease,color .1s ease;color:#2f2f2f}.calendar-options-btn.options-opened[_ngcontent-%COMP%]{color:#036;transform:rotate(45deg)}.calendar-schedule-options-container[_ngcontent-%COMP%]{overflow:hidden;margin:0 8px;border-bottom:1px solid #ccc}.calendar-schedule-options-container[_ngcontent-%COMP%]   .calendar-schedule-options[_ngcontent-%COMP%]{max-width:350px;padding:8px;margin:8px auto;transform:translateY(-100%);animation:options-slide-in .15s ease;animation-iteration-count:1;animation-fill-mode:forwards}.calendar-settings-title[_ngcontent-%COMP%]{text-transform:uppercase;font-size:12px;font-weight:700;text-align:center;margin:0 0 8px;color:#737373}"],changeDetection:0}),e}()},"m+aQ":function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r=n("8Y7J"),i=n("jnbT"),o=n("u7X7"),a=n("CBWo"),s=n("LYTB"),c=n("iELJ");n("J+65"),n("4avL");var l,p,m=n("CO6v"),d=n("/652"),h=n("y8Ey"),f=((l=u((function e(){g(this,e)}))).\u0275fac=function(e){return new(e||l)},l.\u0275mod=r["\u0275\u0275defineNgModule"]({type:l}),l.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[m.a,d.a,h.a,c.f]]}),l),v=n("WsNZ"),b=n("2c+M"),x=n("2/6D"),C=n("DuJC"),y=n("/MKM"),O=n("Wg9c"),w=n("urJB"),M=n("eflX"),P=n("pnCU"),_=n("XIjf"),k=((p=u((function e(){g(this,e)}))).\u0275fac=function(e){return new(e||p)},p.\u0275mod=r["\u0275\u0275defineNgModule"]({type:p}),p.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[i.b,o.b,a.b,s.b,f,v.a,b.b,x.a,C.b,y.b,O.b,w.b,M.b,P.b,_.b]}),p)},nB6J:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n("vXul");var r,i=n("8Y7J"),o=n("u9T3"),a=n("ls3q"),s=n("zkd0"),c=n("mF6c"),l=n("ACDe"),p=((r=u((function e(){g(this,e)}))).\u0275fac=function(e){return new(e||r)},r.\u0275mod=i["\u0275\u0275defineNgModule"]({type:r}),r.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[a.a,l.a,s.a,c.a,o.a]]}),r)},p47V:function(e,t,n){"use strict";n.d(t,"a",(function(){return oe}));var r=n("mrSG"),o=n("8Y7J"),s=n("LvDl"),c=n("fTqC"),p=n("V0rs"),m=n("Fawd"),d=n("Jaf7"),h=n("Cnb3"),f=n("2Vo4"),v=n("itXk"),b=n("lJxs"),x=n("vkgz"),C=n("SxV6"),y=n("UCUv"),O=n("SVse"),w=n("iELJ"),M=n("lkjj"),P=n("Vwx4"),_=n("3qIc"),k=n("s7LF"),S=n("VDRc"),I=n("jMqV"),E=n("4avL"),j=n("bZiG"),T=n("WNdF"),G=n("Q2Ze"),F=n("i1AJ"),L=n("Fudl"),R=n("e6WT"),N=n("Kyc/"),A=n("T0RT"),B=n("tkC3"),D=n("9sQ6"),H=n("ura0"),V=n("iBVM"),$=n("ZTz/"),U=n("UhP/"),q=n("w8an"),z=n("Jkk8"),J=n("Tmav"),Y=["form"];function W(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",32),o["\u0275\u0275element"](1,"span",33),o["\u0275\u0275pipe"](2,"mgSafeHtml"),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("ngStyle",n.headlineStyle(n.groupName)),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("innerHTML",o["\u0275\u0275pipeBind1"](2,2,n.groupName),o["\u0275\u0275sanitizeHtml"])}}function Q(e,t){if(1&e&&(o["\u0275\u0275element"](0,"div",34),o["\u0275\u0275pipe"](1,"mgAssetUrl")),2&e){var n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275styleProp"]("background-image","url("+o["\u0275\u0275pipeBind1"](1,2,n.groupBannerAsset)+")")}}function Z(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"mg-file-upload",35),o["\u0275\u0275listener"]("ngModelChange",(function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).groupBannerAsset=e}))("previewUrlOutput",(function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).customImagePreviewUrl=e})),o["\u0275\u0275elementEnd"]()}if(2&e){var r=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("previewAspectRatio",9/16)("previewSize",600)("file",r.customImage[0])("ngModel",r.groupBannerAsset)}}function K(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",28),o["\u0275\u0275template"](1,W,3,4,"div",29),o["\u0275\u0275template"](2,Q,2,4,"div",30),o["\u0275\u0275template"](3,Z,1,4,"mg-file-upload",31),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.groupBanner&&n.groupBanner.headlineOptions),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.groupBannerAsset&&(!n.customImage||0==n.customImage.length)),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n.customImage&&n.customImage.length>0)}}function X(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"mat-option",39),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;o["\u0275\u0275property"]("value",n),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function ee(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",24),o["\u0275\u0275elementStart"](1,"mat-form-field",13),o["\u0275\u0275elementStart"](2,"mat-label"),o["\u0275\u0275text"](3,"School"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"mat-select",37),o["\u0275\u0275listener"]("ngModelChange",(function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).parentGroup=e})),o["\u0275\u0275template"](5,X,2,2,"mat-option",38),o["\u0275\u0275elementStart"](6,"mat-option",39),o["\u0275\u0275text"](7,"None"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var r=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("compareWith",r.groupIsSame)("ngModel",r.parentGroup),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",r.availableParentGroups)}}function te(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,ee,8,3,"div",36),o["\u0275\u0275elementContainerEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!n.automaticallyPickParentGroup)}}var ne=function(e){return[e]},re=function(){return{standalone:!0}},ie={disabled:!0,name:"Group Owner",roleType:y.b,tooltip:""},oe=function(){var e=function(){function e(t,n,r,i,s,c,l){var p=this;g(this,e),this._location=t,this.changeDetectorRef=n,this.matDialog=r,this.elementRef=i,this.rolesService=s,this.permissions=c,this.mingaStore=l,this.Banner=m.Banner,this.groupBanner=null,this._intialBannerAsset="",this._rawBannerAsset="",this.allowOwnerSelect=!1,this.groupPrivate=!1,this.groupName="",this.groupDescription="",this.groupBannerAsset="",this.groupBannerHash="",this.groupCategoryId=0,this.allowedGroupRolesTypes=[],this.allowedCommentingRolesTypes=null,this.inputsSubmit=new o.EventEmitter,this.availableParentGroups=[],this.parentGroup=null,this.groupCategory=null,this.bannerSelectionActive=!1,this.customImage=[],this.commentRolesSubj=new f.a([]),this.group=null,this.dirtyCommentRoles=!1,this.groupIsSame=function(e,t){return null==e&&null==t||(null==e?void 0:e.hash)==(null==t?void 0:t.hash)},this.rolesService.fetchIfNeeded(),this.districtFeatureEnabled$=l.observeDistrictFeatureEnabled(),this.postingRoles$=s.availableFeedPermitableRoles$.pipe(Object(b.a)((function(e){var t=e.map((function(e){return{disabled:e.immutableGroupFeedPermittable,name:e.name,roleType:e.roleType,get tooltip(){var t=e.capabilitiesDescription;return t&&t+" to the group feed"}}}));return t.length&&t.unshift(ie),t}))),this.availableCommentRoles$=s.availableCommentPermitableRoles$.pipe(Object(b.a)((function(e){return e.map((function(e){return{disabled:e.immutableCommentPermittable,name:e.name,roleType:e.roleType,get tooltip(){return e.name+" will be allowed to comment on content in this group"}}}))}))),this.defaultCommentRoles$=this.rolesService.commentPermitableRoles$.pipe(Object(b.a)((function(e){return e.map((function(e){return e.roleType}))}))),this.commentRoles$=this.commentRolesSubj.asObservable(),this.selectedCommentRoles$=Object(v.b)(this.availableCommentRoles$,this.defaultCommentRoles$,this.commentRoles$).pipe(Object(b.a)((function(e){var t=a(e,3),n=(t[0],t[1]),r=t[2];return r.length>0?r:n})),Object(x.a)((function(e){return p.allowedCommentingRolesTypes=e})))}return u(e,[{key:"cancel",value:function(){this.onOverlayClose()}},{key:"onOverlayClose",value:function(){return Object(r.a)(this,void 0,void 0,l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this._location.back(),!0));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"showBannerPreview",get:function(){return this.groupBannerAsset||this.customImage.length>0}},{key:"automaticallyPickParentGroup",get:function(){if(!this.groupCategory)return!0;if(this.groupCategory.autoParent)return!0;var e=this.permissions.hasPermission(h.MingaPermission.GROUP_ALLOW_ANY_PARENT_GROUP);return this.availableParentGroups.length<2&&!e}},{key:"ngOnChanges",value:function(e){e.availableParentGroups&&this.initParentGroup()}},{key:"reset",value:function(){this.form.control.reset()}},{key:"initParentGroup",value:function(){var e;if(null===(e=this.group)||void 0===e?void 0:e.parentGroupHash){var t,n=i(this.availableParentGroups);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.group.parentGroupHash==r.hash){this.parentGroup=r;break}}}catch(o){n.e(o)}finally{n.f()}this.groupCategoryId=this.group.categoryId}}},{key:"resetGroupFields",value:function(e){var t=this;this.group=e,this.groupName=e.name,this.groupDescription=e.description,this.groupPrivate=e.isPrivate,this.groupCategoryId=e.categoryId,this.initParentGroup(),e.allowedRoleTypes&&(this.allowedGroupRolesTypes=e.allowedRoleTypes,this.allowedGroupRolesTypes.push(y.b)),e.allowedCommentingRoleTypes&&(this.commentRolesSubj.next(e.allowedCommentingRoleTypes),this.allowedCommentingRolesTypes=e.allowedCommentingRoleTypes),e.bannerHash&&(this.groupBannerHash=e.bannerHash),e.banner&&(this.groupBannerAsset=Object(p.c)(e.banner.toObject(),"cardbanner"),this._rawBannerAsset=Object(p.c)(e.banner.toObject(),"raw"),this._intialBannerAsset=this.groupBannerAsset),e.bannerObject&&(this.groupBanner=e.bannerObject.toObject(),this.groupBannerHash=this.groupBanner.bannerHash,e.bannerObject.hasImage()&&(this.groupBannerAsset=Object(p.c)(e.bannerObject.getImage().toObject(),"cardbanner"),this._rawBannerAsset=Object(p.c)(e.bannerObject.getImage().toObject(),"raw"),this._intialBannerAsset=this.groupBannerAsset)),this.changeDetectorRef.markForCheck(),requestAnimationFrame((function(){t.form.control.markAsPristine()}))}},{key:"resetGroupDetailsFields",value:function(e){}},{key:"onBannerAssetChange",value:function(e){this.groupBannerHash="",this.changeDetectorRef.detectChanges()}},{key:"onSelectedBannerChange",value:function(e){if(e){var t=Object(p.c)(e.image,"raw");this.groupBannerAsset=t,this.groupBanner=e,this.groupBannerHash=e.bannerHash,this.customImage=[],this.customImagePreviewUrl="",this.bannerSelectionActive=!1}else this.groupBannerHash="";this.changeDetectorRef.detectChanges()}},{key:"onSelectedRolesChange",value:function(e){this.allowedGroupRolesTypes=e}},{key:"onSelectedCommentingRolesChange",value:function(e){this.allowedCommentingRolesTypes.includes(e)||(this.allowedCommentingRolesTypes.push(e),this.dirtyCommentRoles=!0)}},{key:"onDeselectCommentRole",value:function(e){var t=this.allowedCommentingRolesTypes.indexOf(e);t>=0&&(this.allowedCommentingRolesTypes.splice(t,1),this.dirtyCommentRoles=!0)}},{key:"onCustomImageChange",value:function(e){e&&e.length>0&&(this.bannerSelectionActive=!1,this.groupBannerAsset="",this.groupBanner=null,this.groupBannerHash="")}},{key:"getOwnerName",value:function(){var e="";return this._ownerPersonView&&(e=this._ownerPersonView.displayName),e}},{key:"headlineStyle",value:function(e){return this.groupBanner&&e&&this.elementRef.nativeElement.children.length&&this.groupBanner.headlineOptions?Object(c.a)(e,this.groupBanner.headlineOptions,{maxLength:46,containerWidth:this.elementRef.nativeElement.children[0].clientWidth}):""}},{key:"onGroupNameChange",value:function(e){!this.bannerSelectionActive&&e.length>2&&!this.groupBannerAsset&&(this.bannerSelectionActive=!0)}},{key:"onSubmit",value:function(){var e,t;return Object(r.a)(this,void 0,void 0,l().mark((function n(){var r,i,o;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(r=new d.GroupInputs).setName(this.groupName),r.setDescription(this.groupDescription),r.setPrivate(this.groupPrivate),r.setCategoryId(this.groupCategoryId),i=!1,this.groupCategory&&this.groupCategory.autoParent&&(i=!0),n.next=6,this.mingaStore.hasDistrictFeatureEnabled();case 6:if(n.t0=n.sent,!n.t0){n.next=9;break}n.t0=!i;case 9:if(n.t1=n.t0,!n.t1){n.next=12;break}r.setParentGroupHash(this.automaticallyPickParentGroup?(null===(e=this.availableParentGroups[0])||void 0===e?void 0:e.hash)||"":(null===(t=this.parentGroup)||void 0===t?void 0:t.hash)||"");case 12:return this.allowedGroupRolesTypes.length&&r.setAllowedRoleTypesList(this.allowedGroupRolesTypes.filter((function(e){return e!=y.b}))),n.next=15,this.defaultCommentRoles$.pipe(Object(C.a)()).toPromise();case 15:o=n.sent,this.allowedCommentingRolesTypes&&(s.isEqual(o.sort(),this.allowedCommentingRolesTypes.sort())&&!this.dirtyCommentRoles||r.setAllowedCommentingRoleTypesList(this.allowedCommentingRolesTypes)),this.groupBannerHash?r.setBannerHash(this.groupBannerHash):(this.groupBannerAsset==this._intialBannerAsset&&(this.groupBannerAsset=this._rawBannerAsset),r.setBannerAsset(this.groupBannerAsset)),this.inputsSubmit.emit(r);case 17:case"end":return n.stop()}}),n,this)})))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](O.k),o["\u0275\u0275directiveInject"](o.ChangeDetectorRef),o["\u0275\u0275directiveInject"](w.b),o["\u0275\u0275directiveInject"](o.ElementRef),o["\u0275\u0275directiveInject"](M.a),o["\u0275\u0275directiveInject"](P.c),o["\u0275\u0275directiveInject"](_.b))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-group-form"]],viewQuery:function(e,t){var n;(1&e&&o["\u0275\u0275viewQuery"](Y,3),2&e)&&(o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.form=n.first))},inputs:{allowOwnerSelect:"allowOwnerSelect",groupPrivate:"groupPrivate",groupName:"groupName",groupDescription:"groupDescription",groupBannerAsset:"groupBannerAsset",groupBannerHash:"groupBannerHash",groupCategoryId:"groupCategoryId",allowedGroupRolesTypes:"allowedGroupRolesTypes",allowedCommentingRolesTypes:"allowedCommentingRolesTypes",availableParentGroups:"availableParentGroups",parentGroup:"parentGroup"},outputs:{inputsSubmit:"inputsSubmit"},features:[o["\u0275\u0275NgOnChangesFeature"]],decls:46,vars:41,consts:[["autocomplete","off",1,"mg-minicopy",3,"submit"],["form","ngForm"],["fxLayout","row","fxLayoutAlign","start center",1,"form-input-spacing"],[1,"private-toggle-text"],["name","groupPrivate",1,"no-mg",3,"ngModel","ngModelChange"],["fxFlex",""],["href","javascript:;",1,"cancel-btn",3,"click"],["type","outline",3,"disabled"],[1,"form-input-spacing","role-permissions"],[1,"mg-minicopy",3,"feedName","roles","selectedRoles","selectedRolesChange"],[3,"roles","selectedRoles","roleSelect","roleDeselect"],["class","file-input-wrap form-input-container-border",4,"ngIf"],[1,"form-input-container","group-name-input-wrap"],["mgFormField",""],["matSuffix","",1,"camera-icon",3,"click"],["matInput","","name","groupName","required","","minlength","3","maxlength","80","autocomplete","off","placeholder","Group name",3,"ngModel","ngModelChange"],[1,"banner-edit-wrap"],[1,"banner-select-wrap"],[1,"banner-select-fade-left"],["name","groupBanner",3,"categories","query","ngModel","ngModelOptions","ngModelChange","selectedBannerChange"],[1,"banner-select-fade-right"],["fxLayout","column",1,"mg-centered","user-content"],["customTitleText","Upload Custom Image","displayStyle","BUTTON",1,"mg-minicopy",3,"multiple","ngModelOptions","ngModel","ngModelChange"],["type","clear",1,"mg-minicopy",3,"click"],[1,"form-input-container"],["name","groupCategory","required","","categoryType","MINGA_GROUP","placeholder","Select a Group category",3,"ngModel","ngModelChange","categorySelected"],[4,"ngIf"],["placeholder","Say something about this group","name","groupDescription",3,"maxlength","richContent","ngModel","ngModelChange"],[1,"file-input-wrap","form-input-container-border"],["class","preview-banner-headline",3,"ngStyle",4,"ngIf"],["class","banner-preview-image",3,"backgroundImage",4,"ngIf"],["name","customImageUpload",3,"previewAspectRatio","previewSize","file","ngModel","ngModelChange","previewUrlOutput",4,"ngIf"],[1,"preview-banner-headline",3,"ngStyle"],[3,"innerHTML"],[1,"banner-preview-image"],["name","customImageUpload",3,"previewAspectRatio","previewSize","file","ngModel","ngModelChange","previewUrlOutput"],["class","form-input-container",4,"ngIf"],["name","parentGroup",3,"compareWith","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"form",0,1),o["\u0275\u0275listener"]("submit",(function(){return t.onSubmit()})),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275elementStart"](3,"div",3),o["\u0275\u0275text"](4,"Private"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div"),o["\u0275\u0275elementStart"](6,"mat-slide-toggle",4),o["\u0275\u0275listener"]("ngModelChange",(function(e){return t.groupPrivate=e})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](7,"div",5),o["\u0275\u0275elementStart"](8,"div"),o["\u0275\u0275elementStart"](9,"a",6),o["\u0275\u0275listener"]("click",(function(){return t.cancel()})),o["\u0275\u0275text"](10,"Cancel"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"mg-button",7),o["\u0275\u0275text"](12,"Save Group"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"div",8),o["\u0275\u0275elementStart"](14,"mg-feed-permittable-roles",9),o["\u0275\u0275listener"]("selectedRolesChange",(function(e){return t.onSelectedRolesChange(e)})),o["\u0275\u0275pipe"](15,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"div",8),o["\u0275\u0275elementStart"](17,"p"),o["\u0275\u0275text"](18,"Allow the following roles to comment on content in this group:"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](19,"mg-multi-select-role",10),o["\u0275\u0275listener"]("roleSelect",(function(e){return t.onSelectedCommentingRolesChange(e)}))("roleDeselect",(function(e){return t.onDeselectCommentRole(e)})),o["\u0275\u0275pipe"](20,"async"),o["\u0275\u0275pipe"](21,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](22,K,4,3,"div",11),o["\u0275\u0275elementStart"](23,"div",12),o["\u0275\u0275elementStart"](24,"mat-form-field",13),o["\u0275\u0275elementStart"](25,"mg-icon",14),o["\u0275\u0275listener"]("click",(function(){return t.bannerSelectionActive=!t.bannerSelectionActive})),o["\u0275\u0275text"](26,"camera"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](27,"input",15),o["\u0275\u0275listener"]("ngModelChange",(function(e){return t.groupName=e}))("ngModelChange",(function(e){return t.onGroupNameChange(e)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](28,"div",16),o["\u0275\u0275elementStart"](29,"div",17),o["\u0275\u0275element"](30,"div",18),o["\u0275\u0275elementStart"](31,"mg-banner-select2",19),o["\u0275\u0275listener"]("ngModelChange",(function(e){return t.groupBannerHash=e}))("selectedBannerChange",(function(e){return t.onSelectedBannerChange(e)})),o["\u0275\u0275text"](32,"> "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](33,"div",20),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](34,"div",21),o["\u0275\u0275elementStart"](35,"mg-file-input",22),o["\u0275\u0275listener"]("ngModelChange",(function(e){return t.customImage=e}))("ngModelChange",(function(e){return t.onCustomImageChange(e)})),o["\u0275\u0275text"](36,"Upload Custom Image"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](37,"mg-button",23),o["\u0275\u0275listener"]("click",(function(){return t.bannerSelectionActive=!1})),o["\u0275\u0275text"](38,"Cancel"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](39,"div",24),o["\u0275\u0275elementStart"](40,"mg-category-select",25),o["\u0275\u0275listener"]("ngModelChange",(function(e){return t.groupCategoryId=e}))("categorySelected",(function(e){return t.groupCategory=e})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](41,te,2,1,"ng-container",26),o["\u0275\u0275pipe"](42,"async"),o["\u0275\u0275elementStart"](43,"div",24),o["\u0275\u0275elementStart"](44,"mg-body-input",27),o["\u0275\u0275listener"]("ngModelChange",(function(e){return t.groupDescription=e})),o["\u0275\u0275pipe"](45,"hasPermission"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275reference"](1);o["\u0275\u0275advance"](6),o["\u0275\u0275property"]("ngModel",t.groupPrivate),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("disabled",n.invalid||!t.groupBannerHash&&!t.groupBannerAsset),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("feedName","group")("roles",o["\u0275\u0275pipeBind1"](15,27,t.postingRoles$))("selectedRoles",t.allowedGroupRolesTypes),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("roles",o["\u0275\u0275pipeBind1"](20,29,t.availableCommentRoles$))("selectedRoles",o["\u0275\u0275pipeBind1"](21,31,t.selectedCommentRoles$)),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",t.showBannerPreview),o["\u0275\u0275advance"](1),o["\u0275\u0275classProp"]("pad-input-top",t.showBannerPreview)("form-input-container-border",t.showBannerPreview),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngModel",t.groupName),o["\u0275\u0275advance"](1),o["\u0275\u0275classProp"]("banner-edit-hidden",!t.bannerSelectionActive),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("categories",o["\u0275\u0275pureFunction1"](37,ne,t.Banner.Category.GROUP))("query",t.groupName)("ngModel",t.groupBannerHash)("ngModelOptions",o["\u0275\u0275pureFunction0"](39,re)),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("multiple",!1)("ngModelOptions",o["\u0275\u0275pureFunction0"](40,re))("ngModel",t.customImage),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngModel",t.groupCategoryId),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](42,33,t.districtFeatureEnabled$)),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("maxlength",5e3)("richContent",o["\u0275\u0275pipeBind1"](45,35,"CONTENT_HTML_INCLUDE"))("ngModel",t.groupDescription)}},directives:[k.E,k.u,k.v,S.e,S.d,I.a,k.t,k.w,S.b,E.a,j.a,T.a,O.o,G.d,F.a,L.a,G.j,R.b,k.d,k.B,k.o,k.n,N.a,A.a,B.a,D.a,O.p,H.c,V.a,G.h,$.a,O.n,U.m],pipes:[O.b,q.a,z.a,J.a],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");.role-permissions[_ngcontent-%COMP%], mat-checkbox[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{color:#737373;box-sizing:border-box}.role-permissions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#737373}.role-permissions[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;margin-bottom:8px}.role-permissions[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%] + p[_ngcontent-%COMP%]{margin-top:8px}.role-permissions[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{position:relative;flex-basis:50%}mg-file-input-upload[_ngcontent-%COMP%]{margin-bottom:16px}.owner-selection-wrap[_ngcontent-%COMP%]{padding-top:16px;padding-bottom:16px}.camera-icon[_ngcontent-%COMP%]{cursor:pointer}a[_ngcontent-%COMP%]{color:#93f;text-decoration:none}.preview-banner-headline[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;position:absolute;z-index:3}.cancel-btn[_ngcontent-%COMP%], .private-toggle-text[_ngcontent-%COMP%]{margin-right:8px}.file-input-wrap[_ngcontent-%COMP%]{overflow:hidden;--file-upload-bgcolor:transparent;background-color:#f5f5f5;position:relative}.pad-input-top[_ngcontent-%COMP%]{padding-top:16px}.form-input-container-border[_ngcontent-%COMP%]{border-top:1px solid #e2e2e2}.form-input-spacing[_ngcontent-%COMP%]{margin:16px}.form-input-container[_ngcontent-%COMP%]{line-height:16px;padding-left:16px;padding-right:16px}.form-input-container[_ngcontent-%COMP%]:first-child{border-top:none}.banner-choice-msg[_ngcontent-%COMP%]{padding-top:8px}.banner-preview-image[_ngcontent-%COMP%]{overflow:hidden;position:relative;padding-bottom:56.25%;background-size:cover;background-position:50%}.group-name-input-wrap[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-family:Muli,sans-serif;font-weight:700;line-height:1}@media (orientation:landscape){.group-name-input-wrap[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:5.0724637681vh}}@media (orientation:portrait){.group-name-input-wrap[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:5.0724637681vw}}@media (orientation:landscape) and (max-height:414px){.group-name-input-wrap[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:21px}}@media (orientation:portrait) and (max-width:414px){.group-name-input-wrap[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:21px}}@media (min-width:433.7142857143px){.group-name-input-wrap[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:22px}}.banner-edit-hidden[_ngcontent-%COMP%]{display:none}.banner-edit-wrap[_ngcontent-%COMP%]{margin:0 16px}.banner-select-wrap[_ngcontent-%COMP%]{position:relative;overflow:hidden;margin-bottom:16px}.banner-select-wrap[_ngcontent-%COMP%]   mg-banner-select2[_ngcontent-%COMP%]{display:block}.banner-select-wrap[_ngcontent-%COMP%]   .banner-select-fade-left[_ngcontent-%COMP%]{position:absolute;z-index:1;top:0;left:0;bottom:0;width:20px;background:linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.banner-select-wrap[_ngcontent-%COMP%]   .banner-select-fade-right[_ngcontent-%COMP%]{position:absolute;z-index:1;top:0;right:0;bottom:0;width:20px;background:linear-gradient(270deg,#fff,hsla(0,0%,100%,0))}'],changeDetection:0}),e}()},p58v:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n("kxWE");var r,i=n("SVse"),o=n("8Y7J"),a=n("u9T3"),s=n("s7LF"),c=n("ZTz/"),l=n("cPHN"),p=n("DWt7"),m=n("HxU+"),d=n("ls3q"),h=((r=u((function e(){g(this,e)}))).\u0275fac=function(e){return new(e||r)},r.\u0275mod=o["\u0275\u0275defineNgModule"]({type:r}),r.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[c.b,p.a,m.a,d.a,l.a,i.c,a.a,s.m]]}),r)},pnCU:function(e,t,n){"use strict";n.d(t,"a",(function(){return M})),n.d(t,"b",(function(){return I}));var r=n("mrSG"),i=(n("mmWe"),n("8Y7J")),o=n("LvDl"),a=n("DwZP"),s=n("Cnb3"),c=n("SxV6"),p=n("xs9W"),m=n("HSxi"),d=n("UWMR"),h=n("Vwx4"),f=n("TUjp"),v=n("uT/y"),b=n("vXul"),x=n("Q5WP"),C=n("SVse");function y(e,t){if(1&e&&(i["\u0275\u0275element"](0,"mg-search-content",3),i["\u0275\u0275pipe"](1,"async")),2&e){var n,r=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("groupHashes",null==(n=i["\u0275\u0275pipeBind1"](1,2,r.group$))?null:n.hash)("query",r.searchText)}}var O,w,M=((O=function(){function e(t,n,r,o,c){g(this,e),this.groupsFacade=t,this.groupService=n,this.cdr=r,this.snackBar=o,this.permission=c,this.group$=this.groupsFacade.getCurrentGroup(),this.searchText="",this.groupFiles=[],this.canManage=!1,this.loadingFiles=!0,this.fileListStyle=a.b.CARDS,this.openImagebox=new i.EventEmitter,this.files=[],this.canManage=c.hasPermission(s.MingaPermission.CONTENT_GROUP_MANAGE)}return u(e,[{key:"ngOnInit",value:function(){var e=this;this.groupSubscription=this.group$.subscribe((function(t){e.retrieveGroupFiles(t),e.canManage||(e.canManage=p.a.isOwner(t))}))}},{key:"ngOnDestroy",value:function(){this.groupSubscription&&this.groupSubscription.unsubscribe()}},{key:"retrieveGroupFiles",value:function(e){return Object(r.a)(this,void 0,void 0,l().mark((function t(){var n,r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",(console.error("retrieveGroupFiles() group undefined ",e),null));case 2:return n=e.hash,t.next=5,this.groupService.getGroupFiles(n);case 5:r=t.sent,this.groupFiles=r,this.loadingFiles=!1,this.cdr.detectChanges();case 7:case"end":return t.stop()}}),t,this)})))}},{key:"_removeFile",value:function(e,t){return Object(r.a)(this,void 0,void 0,l().mark((function n(){var r,i=this;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.groupFiles.splice(t,1),this.groupFiles=o.clone(this.groupFiles),this.cdr.detectChanges(),n.next=3,this.group$.pipe(Object(c.a)()).toPromise();case 3:return r=n.sent.hash,n.next=6,this.groupService.removeGroupFile(r,e.hash).then((function(e){i.groupFiles=e,i.cdr.detectChanges()})).catch((function(t){console.error("onFileIndexDelete() removeGroupFile error: ",t),i.groupFiles.push({file:e}),i.groupFiles=o.clone(i.groupFiles),i.cdr.detectChanges(),i.snackBar.open("uh oh, an error occurred, please try again later")}));case 6:case"end":return n.stop()}}),n,this)})))}},{key:"onFileDelete",value:function(e){this._removeFile(e.file,e.index)}}]),e}()).\u0275fac=function(e){return new(e||O)(i["\u0275\u0275directiveInject"](m.b),i["\u0275\u0275directiveInject"](m.c),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](d.b),i["\u0275\u0275directiveInject"](h.c))},O.\u0275cmp=i["\u0275\u0275defineComponent"]({type:O,selectors:[["mg-view-group-files-page"]],inputs:{group$:"group$"},decls:5,vars:11,consts:[["mgSearchArea","",3,"placeholder","searchText"],[3,"files","enableFileManagement","enableCreateURL","listStyle","groupHash","fileDelete"],[3,"openLightbox"],["contentType","FILE",3,"groupHashes","query"]],template:function(e,t){var n,r;(1&e&&(i["\u0275\u0275template"](0,y,2,4,"ng-template",0),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275listener"]("searchText",(function(e){return t.searchText=e})),i["\u0275\u0275elementStart"](2,"mg-file-list-container",1),i["\u0275\u0275listener"]("fileDelete",(function(e){return t.onFileDelete(e)})),i["\u0275\u0275pipe"](3,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"mg-group-image-lightbox",2)),2&e)&&(i["\u0275\u0275property"]("placeholder","Search "+(null==(n=i["\u0275\u0275pipeBind1"](1,7,t.group$))?null:n.name)+" Files"),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("files",t.groupFiles)("enableFileManagement",t.canManage)("enableCreateURL",t.canManage)("listStyle",t.fileListStyle)("groupHash",null==(r=i["\u0275\u0275pipeBind1"](3,9,t.group$))?null:r.hash),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("openLightbox",t.openImagebox))},directives:[f.a,v.a,b.a,x.a],pipes:[C.b],styles:["mg-file-list[_ngcontent-%COMP%]{margin-bottom:16px;--mg-file-list-side-padding:0}@media (orientation:landscape){mg-file-list[_ngcontent-%COMP%]{margin-top:5.0724637681vh}}@media (orientation:portrait){mg-file-list[_ngcontent-%COMP%]{margin-top:5.0724637681vw}}@media (orientation:landscape) and (max-height:414px){mg-file-list[_ngcontent-%COMP%]{margin-top:21px}}@media (orientation:portrait) and (max-width:414px){mg-file-list[_ngcontent-%COMP%]{margin-top:21px}}@media (min-width:433.7142857143px){mg-file-list[_ngcontent-%COMP%]{margin-top:22px}}@media (max-width:599px){mg-file-list[_ngcontent-%COMP%]{--mg-file-list-side-padding:16px}}"]}),O),P=n("Z+Q6"),_=n("nB6J"),k=n("DjdL"),S=n("HDrY"),I=((w=u((function e(){g(this,e)}))).\u0275fac=function(e){return new(e||w)},w.\u0275mod=i["\u0275\u0275defineNgModule"]({type:w}),w.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[_.a,k.d,S.a,P.a,h.b,C.c]]}),w)},qftF:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("8Y7J"),i=n("s7LF"),o=n("Tj54"),a=["pillCheckmark"],s=["*"],c={provide:i.r,useExisting:Object(r.forwardRef)((function(){return l})),multi:!0},l=function(){var e=function(){function e(){g(this,e),this.tabindex="0",this.icon="check",this.disabled=!1,this._value=!1}return u(e,[{key:"hasIcon",get:function(){return!!this.icon}},{key:"checked",get:function(){return this._value}},{key:"unchecked",get:function(){return!this._value}},{key:"onClick",value:function(e){this.disabled||(this._value=!this._value,this._onChange&&this._onChange(this._value))}},{key:"onKeypress",value:function(e){this.disabled||"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this._value=!this._value,this._onChange&&this._onChange(this._value))}},{key:"writeValue",value:function(e){this._value=!!e}},{key:"registerOnChange",value:function(e){this._onChange=e}},{key:"registerOnTouched",value:function(e){this._onTouched=e}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-pill-checkbox"]],viewQuery:function(e,t){var n;(1&e&&r["\u0275\u0275viewQuery"](a,3),2&e)&&(r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.pillCheckmark=n.first))},hostVars:9,hostBindings:function(e,t){1&e&&r["\u0275\u0275listener"]("click",(function(e){return t.onClick(e)}))("keypress",(function(e){return t.onKeypress(e)})),2&e&&(r["\u0275\u0275attribute"]("tabindex",t.tabindex),r["\u0275\u0275classProp"]("mg-pill-checkmark-disabled",t.disabled)("mg-pill-checkmark-has-icon",t.hasIcon)("mg-pill-checkmark-checked",t.checked)("mg-pill-checkmark-unchecked",t.unchecked))},inputs:{icon:"icon",disabled:"disabled"},features:[r["\u0275\u0275ProvidersFeature"]([c])],ngContentSelectors:s,decls:7,vars:1,consts:[[1,"mg-pill-checkbox"],[1,"mg-pill-checkbox-content"],[1,"mg-pill-checkbox-checkmark"],["pillCheckmark",""]],template:function(e,t){1&e&&(r["\u0275\u0275projectionDef"](),r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275projection"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"div",2,3),r["\u0275\u0275elementStart"](5,"mat-icon"),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](6),r["\u0275\u0275textInterpolate"](t.icon))},directives:[o.a],styles:[".mg-pill-checkbox[_ngcontent-%COMP%]{min-height:1em;min-width:1em;overflow:hidden;border-width:1px;border-style:solid;position:relative;padding:var(--mg-pillcheckbox-padding,.35em .7em);border-radius:1.35em;transition:background-color .3s ease;margin:var(--mg-pillcheckbox-margin,0);font-size:var(--mg-pillcheckbox-font-size,16px)}.mg-pill-checkbox[_ngcontent-%COMP%]   .mg-pill-checkbox-content[_ngcontent-%COMP%]{padding-right:0;transition:padding-right .3s ease}.mg-pill-checkbox[_ngcontent-%COMP%]   .mg-pill-checkbox-checkmark[_ngcontent-%COMP%]{position:absolute;right:0;top:0;bottom:0;transform:translateX(100%);opacity:0;transition:transform .3s ease,opacity .3s ease}.mg-pill-checkbox[_ngcontent-%COMP%]   .mg-pill-checkbox-checkmark[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:0 .35em;position:relative;top:50%;transform:translateY(-50%);color:currentColor;width:1em;height:1em;line-height:1em;font-size:1em}[_nghost-%COMP%]{display:inline-block;cursor:pointer;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]:focus{outline:none}.mg-pill-checkmark-checked.mg-pill-checkmark-has-icon[_nghost-%COMP%]   .mg-pill-checkbox[_ngcontent-%COMP%]   .mg-pill-checkbox-checkmark[_ngcontent-%COMP%]{transform:translateX(0);opacity:1}.mg-pill-checkmark-checked.mg-pill-checkmark-has-icon[_nghost-%COMP%]   .mg-pill-checkbox[_ngcontent-%COMP%]   .mg-pill-checkbox-content[_ngcontent-%COMP%]{padding-right:1em}.mg-pill-checkmark-disabled[_nghost-%COMP%]{pointer-events:none}.small[_nghost-%COMP%]{font-size:10px}.small[_nghost-%COMP%]   .mg-pill-checkbox[_ngcontent-%COMP%]{padding-top:.05em;padding-bottom:.05em}.large[_nghost-%COMP%]   .mg-pill-checkbox[_ngcontent-%COMP%]{padding-top:.7em;padding-bottom:.7em}.bold[_nghost-%COMP%]   .mg-pill-checkbox[_ngcontent-%COMP%]{font-weight:700;border-width:2px}"]}),e}()},rUp2:function(e,t,n){"use strict";n.d(t,"a",(function(){return V})),n.d(t,"b",(function(){return J}));var r=n("mrSG"),i=(n("mmWe"),n("8Y7J")),o=n("s7LF"),a=n("5km/"),s=n("B3cG"),c=n("Ggka"),p=n("SxV6"),m=n("HSxi"),d=n("JF7H"),h=n("SVse"),f=n("GFah"),v=n("iELJ"),b=n("WH00"),x=n("UWMR"),C=n("SYVq"),y=n("Q2Ze"),O=n("i1AJ"),w=n("e6WT"),M=n("/oii"),P=n("VsVn"),_=n("Fudl"),k=n("TSSN"),S=["form"];function I(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"input.mingaLinkUrl.error.maxlength")," "))}function E(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"input.mingaLinkUrl.error.pattern")," "))}function j(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"input.mingaLinkUrl.error.required")," "))}function T(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275elementContainerStart"](1,8),i["\u0275\u0275template"](2,I,3,3,"span",9),i["\u0275\u0275template"](3,E,3,3,"span",9),i["\u0275\u0275template"](4,j,3,3,"span",10),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitch",n.getLinkInputErrorKey()),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase","maxlength"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase","pattern")}}function G(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",16),i["\u0275\u0275elementStart"](1,"mg-icon",17),i["\u0275\u0275listener"]("click",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).cancelTitleChange(e)})),i["\u0275\u0275text"](2,"close-thin"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function F(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"input.fileName.error.maxlength")," "))}function L(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"input.fileName.error.pattern")," "))}function R(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"input.fileName.error.required")," "))}function N(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275elementContainerStart"](1,8),i["\u0275\u0275template"](2,F,3,3,"span",9),i["\u0275\u0275template"](3,L,3,3,"span",9),i["\u0275\u0275template"](4,R,3,3,"span",10),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitch",n.getTitleInputErrorKey()),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase","maxlength"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase","pattern")}}function A(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-hint",18),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("",n.linkTitleText.length," / 255")}}function B(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",11),i["\u0275\u0275elementStart"](1,"mat-form-field",12),i["\u0275\u0275template"](2,G,3,0,"div",13),i["\u0275\u0275elementStart"](3,"input",14),i["\u0275\u0275listener"]("focus",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onLinkTitleInputFocus()}))("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().linkTitleText=e}))("keydown",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onLinkTitleInputKeyDown(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](4,N,5,3,"mat-error",6),i["\u0275\u0275template"](5,A,2,1,"mat-hint",15),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var r=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("mgNoFloatTop",!0),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",r.linkTitleEditing),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("pattern",r.linkTitlePattern)("ngModel",r.linkTitleText),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",r.getTitleInputHasError()),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",r.linkTitleText)}}var D,H,V=((D=function(){function e(t,n,r,i,o,a,l,p){g(this,e),this.groupsFacade=t,this.auth=n,this._location=r,this.rootService=i,this.groupService=o,this.dialog=a,this.contentEvents=l,this.snackBar=p,this.groupHash$=this.groupsFacade.getCurrentGroupHashObservable(),this.groupAsset="",this.FileUploadStatus=s.e,this.linkInputPattern=c.a.WebsiteUrlRegex,this.linkTitlePattern=c.a.NoSymbolsRegex,this.linkInputText="",this.linkInputFocussed=!1,this.linkTitleText="",this.linkTitleEditing=!1,this.submitting=!1}return u(e,[{key:"spinnerDiameter",get:function(){return window.innerWidth>599?65:window.innerWidth>411?45:38}},{key:"linkInputPlaceholder",get:function(){return this.linkInputFocussed?"input.mingaLinkUrl.placeholderFocussed":"input.mingaLinkUrl.placeholderIdle"}},{key:"ngAfterViewInit",value:function(){var e=this;this.form.statusChanges.subscribe((function(t){e._checkNextDisabled()}))}},{key:"onOverlayClose",value:function(){return Object(r.a)(this,void 0,void 0,l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this._location.back(),!0));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"hasOverlayNext",value:function(){return{text:"Save",icon:"save-o"}}},{key:"onOverlayNext",value:function(){return Object(r.a)(this,void 0,void 0,l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.onOverlayNextDisabled(!0),this.submit(),this.onOverlayNextDisabled(!1);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"overlayPrevious",get:function(){return{icon:"close",text:"Cancel"}}},{key:"hasOverlayPrevious",value:function(){return this.overlayPrevious}},{key:"onOverlayPrevious",value:function(){return Object(r.a)(this,void 0,void 0,l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.onOverlayClose();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"_checkNextDisabled",value:function(){this.onOverlayNextDisabled&&this.form&&this.onOverlayNextDisabled("VALID"!==this.form.status)}},{key:"registerOnOverlayNextDisabled",value:function(e){this.onOverlayNextDisabled=e,this._checkNextDisabled()}},{key:"registerOnOverlayPreviousDisabled",value:function(e){this.onOverlayPreviousDisabled=e}},{key:"_stopEvent",value:function(e){e&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())}},{key:"onSaveLinkTitle",value:function(e){this._stopEvent(e),this.linkTitleEditing=!1,this._checkNextDisabled()}},{key:"getLinkTitleFromUrl",value:function(e){var t=e.lastIndexOf("."),n=e.lastIndexOf("/")+1,r=e.length;r==n&&r--;for(var i=e.length-1;n==e.length&&(i=n=e.substr(0,i).lastIndexOf("/")+1,!(n<=0)););return t>n?e.substring(n,t):n<=0?e:e.substring(n,r)}},{key:"cancelTitleChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._stopEvent(e),this.linkTitleText="",this.linkTitleEditing=!1,this._checkNextDisabled()}},{key:"onLinkInputKeyDown",value:function(e){"Enter"===e.key&&(this._stopEvent(event),this.linkTitleText="")}},{key:"onLinkTitleInputKeyDown",value:function(e){"Enter"===e.key&&this.onSaveLinkTitle(e)}},{key:"onLinkTitleInputFocus",value:function(){this.linkTitleText||(this.linkTitleText=this.getLinkTitleFromUrl(this.linkInputText)),this.linkTitleEditing=!0}},{key:"getLinkInputHasError",value:function(){return this._getInputErrorStatus("linkInput")}},{key:"getTitleInputHasError",value:function(){return this._getInputErrorStatus("linkTitle")}},{key:"_getInputErrorStatus",value:function(e){if(!this.form||!this.form.controls[e])return!1;var t=this.form.controls[e];return t.invalid&&(t.dirty||t.touched||this.form.submitted)}},{key:"getLinkInputErrorKey",value:function(){return this._getInputErrorKey("linkInput")}},{key:"getTitleInputErrorKey",value:function(){return this._getInputErrorKey("linkTitle")}},{key:"_getInputErrorKey",value:function(e){if(!this.form||!this.form.controls[e])return"";var t=this.form.controls[e];return t&&t.errors?Object.keys(t.errors)[0]:""}},{key:"submit",value:function(){this.rootService.addLoadingPromise(this._submit())}},{key:"_submit",value:function(){return Object(r.a)(this,void 0,void 0,l().mark((function e(){var t,n,r,i=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.groupHash$.pipe(Object(p.a)()).toPromise();case 2:return t=e.sent,n={title:this.linkTitleText||this.getLinkTitleFromUrl(this.linkInputText),url:this.linkInputText},e.next=6,this.groupService.addGroupFiles(t,[n]).catch((function(e){console.error("group url upload error: ",e),i.snackBar.open("an error occurred while saving URLs."),i.onOverlayNextDisabled(!1)}));case 6:if(!(r=e.sent)){e.next=9;break}return e.abrupt("return",(this.dialog.open(a.k,{data:{text:"URL Successfully Saved"}}),this.contentEvents.emitFileUpdateEvent({groupHash:t,files:r.files}),new Promise((function(e,t){setTimeout((function(){i.onOverlayClose(),e(null)}),1500)}))));case 9:case"end":return e.stop()}}),e,this)})))}}]),e}()).\u0275fac=function(e){return new(e||D)(i["\u0275\u0275directiveInject"](m.b),i["\u0275\u0275directiveInject"](d.a),i["\u0275\u0275directiveInject"](h.k),i["\u0275\u0275directiveInject"](f.a),i["\u0275\u0275directiveInject"](m.c),i["\u0275\u0275directiveInject"](v.b),i["\u0275\u0275directiveInject"](b.a),i["\u0275\u0275directiveInject"](x.b))},D.\u0275cmp=i["\u0275\u0275defineComponent"]({type:D,selectors:[["mg-group-file-upload-overlay"]],viewQuery:function(e,t){var n;1&e&&i["\u0275\u0275viewQuery"](S,3,o.v),2&e&&i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.form=n.first)},decls:9,vars:9,consts:[[3,"component"],[1,"upload-group-file-form"],["form","ngForm"],[1,"input-wrapper","link-input"],["floatLabel","never","mgFormField","",1,"display-name-field","no-float-top","no-material","show-mat-error","no-required-asterisk",3,"mgNoFloatTop"],["name","linkInput","matInput","","mgFocusSelectText","","mgAutofocus","true","required","","maxlength","255","autocomplete","off","autocapitalize","none",3,"placeholder","pattern","ngModel","keydown","focus","ngModelChange"],[4,"ngIf"],["class","input-wrapper file-name",4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"input-wrapper","file-name"],["floatLabel","never","mgFormField","",1,"display-name-field","no-float-top","no-material","show-mat-error",3,"mgNoFloatTop"],["matSuffix","","class","input-actions",4,"ngIf"],["name","linkTitle","matInput","","placeholder","Title (optional)","mgFocusSelectText","","maxlength","255","minlength","1","autocomplete","off",3,"pattern","ngModel","focus","ngModelChange","keydown"],["align","end",4,"ngIf"],["matSuffix","",1,"input-actions"],[1,"input-action",3,"click"],["align","end"]],template:function(e,t){1&e&&(i["\u0275\u0275element"](0,"mg-legacy-overlay-nav",0),i["\u0275\u0275elementStart"](1,"form",1,2),i["\u0275\u0275elementStart"](3,"div",3),i["\u0275\u0275elementStart"](4,"mat-form-field",4),i["\u0275\u0275elementStart"](5,"input",5),i["\u0275\u0275listener"]("keydown",(function(e){return t.onLinkInputKeyDown(e)}))("focus",(function(){return t.linkInputFocussed=!0}))("ngModelChange",(function(e){return t.linkInputText=e})),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](7,T,5,3,"mat-error",6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](8,B,6,6,"div",7),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("component",t),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("mgNoFloatTop",!0),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](6,7,"input.mingaLinkUrl.placeholderFocussed")),i["\u0275\u0275property"]("pattern",t.linkInputPattern)("ngModel",t.linkInputText),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.getLinkInputHasError()),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.linkInputText&&!t.getLinkInputHasError()))},directives:[C.a,o.E,o.u,o.v,y.d,O.a,w.b,M.a,o.d,P.a,o.B,o.n,o.z,o.t,o.w,h.o,y.c,h.q,h.r,h.s,o.o,y.j,_.a,y.g],pipes:[k.d],styles:["[_nghost-%COMP%]{display:block}.disabled[_ngcontent-%COMP%]{pointer-events:none;cursor:not-allowed}.title-input[_ngcontent-%COMP%]{border-top:none}.input-wrapper[_ngcontent-%COMP%], .title-input[_ngcontent-%COMP%]{border-bottom:1px solid #ccc}.input-wrapper[_ngcontent-%COMP%]{padding:10px 20px calc(16px - .5em)}.input-wrapper[_ngcontent-%COMP%]:first-child{padding-top:16px}@media (min-width:600px){.input-wrapper[_ngcontent-%COMP%]:last-child{border-bottom:none}}"]}),D),$=n("zkd0"),U=n("HxU+"),q=n("ls3q"),z=n("CL15"),J=((H=u((function e(){g(this,e)}))).\u0275fac=function(e){return new(e||H)},H.\u0275mod=i["\u0275\u0275defineNgModule"]({type:H}),H.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[$.a,q.a,U.a,z.a,h.c,o.m,y.f,w.c,k.c]]}),H)},"t/nq":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("8Y7J"),i=n("YGJC"),o=n("2An8"),a=n("s7LF"),s=n("SLe5"),c=n("SVse");function l(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",4),r["\u0275\u0275text"](1," No results\n"),r["\u0275\u0275elementEnd"]())}function p(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",4),r["\u0275\u0275text"](1," End of results\n"),r["\u0275\u0275elementEnd"]())}var m=function(){return{standalone:!0}},d=function(){var e=function(){function e(){g(this,e),this.filteredGroups=[],this.filterCategories=[],this.searchText="",this.groups=[],this.newContentNotifications=[],this.hasItems=new r.EventEmitter(!1)}return u(e,[{key:"_doSearch",value:function(e,t){var n=this.groups.filter((function(e){return!(t.length>0)||t.includes(e.categoryId)}));if(e){var r=new i.a(n,{threshold:.4,isCaseSensitive:!1,shouldSort:!0,keys:["name","description"]});this.filteredGroups=r.search(e).map((function(e){return e.item}))}else this.filteredGroups=t.length>0?n:[];this.hasItems.emit(this.filteredGroups.length>0)}},{key:"ngOnChanges",value:function(e){(e.groups||e.searchText)&&this._doSearch(this.searchText,this.filterCategories)}},{key:"onFilterCategoriesChange",value:function(){this._doSearch(this.searchText,this.filterCategories)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-group-list-search"]],inputs:{searchText:"searchText",groups:"groups",newContentNotifications:"newContentNotifications"},outputs:{hasItems:"hasItems"},features:[r["\u0275\u0275NgOnChangesFeature"]],decls:5,vars:9,consts:[["categoryType","MINGA_GROUP",3,"multiple","ngModelOptions","ngModel","ngModelChange"],["categoryType","MINGA_GROUP",1,"placeholder",3,"multiple"],[3,"groups","newContentNotifications"],["class","mg-centered",4,"ngIf"],[1,"mg-centered"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mg-category-horizontal-select",0),r["\u0275\u0275listener"]("ngModelChange",(function(e){return t.filterCategories=e}))("ngModelChange",(function(){return t.onFilterCategoriesChange()})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](1,"mg-category-horizontal-select",1),r["\u0275\u0275element"](2,"mg-group-list",2),r["\u0275\u0275template"](3,l,2,0,"div",3),r["\u0275\u0275template"](4,p,2,0,"div",3)),2&e&&(r["\u0275\u0275property"]("multiple",!0)("ngModelOptions",r["\u0275\u0275pureFunction0"](8,m))("ngModel",t.filterCategories),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("multiple",!0),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("groups",t.filteredGroups)("newContentNotifications",t.newContentNotifications),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.searchText&&0==t.filteredGroups.length),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.filteredGroups.length>0))},directives:[o.a,a.t,a.w,s.a,c.o],styles:["@keyframes slide-down{0%{transform:translateY(-100%)}to{transform:transateY(0)}}mg-category-horizontal-select[_ngcontent-%COMP%]{display:block;position:fixed;top:var(--top-navbar-height);left:0;right:0;animation:slide-down .3s ease;margin-bottom:12px;background-color:#f5f5f5}mg-category-horizontal-select.placeholder[_ngcontent-%COMP%]{position:relative;opacity:0;-webkit-user-select:none;user-select:none}"],changeDetection:0}),e}()},u7X7:function(e,t,n){"use strict";n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return j}));var r,i,o=n("mrSG"),s=n("8Y7J"),c=n("PLeU"),p=n("Cnb3"),m=n("quSY"),d=n("itXk"),h=n("LRne"),f=n("lJxs"),v=n("eIep"),b=n("pLZG"),x=n("UCUv"),C=n("iInd"),y=n("GFah"),O=n("HSxi"),w=n("Vwx4"),M=n("SYVq"),P=n("p47V"),_=n("SVse"),k=["groupForm"],S=((r=function(){function e(t,n,r,i,o){var s=this;g(this,e),this.router=t,this.route=n,this.rootService=r,this.groupsFacade=i,this.permissionsService=o,this.sub=new m.a,this.groupDetails=null,this.group=null,this.groupHash="",this.parentGroup=null,this.privateGroup=!0,this.allowedGroupRoleTypes=x.a,this.groupHash$=this.route.paramMap.pipe(Object(f.a)((function(e){return e.get("groupHash")||""}))),this.group$=this.groupHash$.pipe(Object(v.a)((function(e){return s.groupsFacade.getGroup(e)}))),this.groupDetails$=this.groupHash$.pipe(Object(v.a)((function(e){return s.groupsFacade.getGroupDetails(e)})));var c=this.permissionsService.observePermission(p.MingaPermission.GROUP_ALLOW_PARENT_GROUP),l=this.permissionsService.observePermission(p.MingaPermission.GROUP_ALLOW_ANY_PARENT_GROUP);this.availableParentGroups$=Object(d.b)([c,l]).pipe(Object(v.a)((function(e){var t=a(e,2),n=t[0];return t[1]?s.groupsFacade.getParentGroups():n?s.groupsFacade.getMyParentGroups():Object(h.a)([])})))}return u(e,[{key:"onBeforeUnload",value:function(e){var t=this.preventNavigation();if(t)return e.returnValue=t,t}},{key:"preventNavigation",value:function(){var e="";return this.groupForm.form.dirty&&(e="Are you sure you want to leave? Your changes will be lost."),e}},{key:"ngOnInit",value:function(){var e=this;this.groupDetails$.subscribe((function(t){e.groupDetails=t})),this.group$.pipe(Object(b.a)((function(e){return!!e}))).subscribe((function(t){t&&(e.groupHash=t.hash,t.allowedRoleTypes&&(e.allowedGroupRoleTypes=t.allowedRoleTypes),e.privateGroup=t.isPrivate,e.groupForm.resetGroupFields(t))})),this.sub.add(this.rootService.addLoadingObservable(this.groupsFacade.groupFormLoading$))}},{key:"onSubmit",value:function(e){return Object(o.a)(this,void 0,void 0,l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.groupForm.form.control.markAsPristine(),!this.groupHash){t.next=5;break}this.groupsFacade.dispatchUpdateGroup(this.groupHash,e),t.next=8;break;case 5:return this.groupsFacade.dispatchCreateGroup(e),t.next=8,this.router.navigate(["groups",{outlets:{o:null}}]);case 8:case"end":return t.stop()}}),t,this)})))}},{key:"ngOnDestroy",value:function(){this.sub.unsubscribe()}},{key:"ngAfterViewInit",value:function(){}},{key:"onOverlayPrevious",value:function(){return Object(o.a)(this,void 0,void 0,l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._closeOverlay();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"hasOverlayPrevious",value:function(){return{text:"Close",icon:"close"}}},{key:"_closeOverlay",value:function(){return Object(o.a)(this,void 0,void 0,l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.a)(this.router);case 2:return e.abrupt("return",!0);case 3:case"end":return e.stop()}}),e,this)})))}},{key:"onOverlayClose",value:function(){return!0}},{key:"registerOnOverlayConfig",value:function(e){e({})}}]),e}()).\u0275fac=function(e){return new(e||r)(s["\u0275\u0275directiveInject"](C.g),s["\u0275\u0275directiveInject"](C.a),s["\u0275\u0275directiveInject"](y.a),s["\u0275\u0275directiveInject"](O.b),s["\u0275\u0275directiveInject"](w.c))},r.\u0275cmp=s["\u0275\u0275defineComponent"]({type:r,selectors:[["ng-component"]],viewQuery:function(e,t){var n;1&e&&s["\u0275\u0275viewQuery"](k,3),2&e&&s["\u0275\u0275queryRefresh"](n=s["\u0275\u0275loadQuery"]())&&(t.groupForm=n.first)},hostBindings:function(e,t){1&e&&s["\u0275\u0275listener"]("beforeunload",(function(e){return t.onBeforeUnload(e)}),!1,s["\u0275\u0275resolveWindow"])},decls:4,vars:8,consts:[[3,"component"],[3,"parentGroup","availableParentGroups","allowOwnerSelect","groupPrivate","allowedGroupRolesTypes","parentGroupChange","inputsSubmit","overlayClose"],["groupForm",""]],template:function(e,t){1&e&&(s["\u0275\u0275element"](0,"mg-legacy-overlay-nav",0),s["\u0275\u0275elementStart"](1,"mg-group-form",1,2),s["\u0275\u0275listener"]("parentGroupChange",(function(e){return t.parentGroup=e}))("inputsSubmit",(function(e){return t.onSubmit(e)}))("overlayClose",(function(){return t.onOverlayClose()})),s["\u0275\u0275pipe"](3,"async"),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275property"]("component",t),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("parentGroup",t.parentGroup)("availableParentGroups",s["\u0275\u0275pipeBind1"](3,6,t.availableParentGroups$))("allowOwnerSelect",!!t.groupHash)("groupPrivate",t.privateGroup)("allowedGroupRolesTypes",t.allowedGroupRoleTypes))},directives:[M.a,P.a],pipes:[_.b],encapsulation:2}),r),I=n("CL15"),E=n("xjLp"),j=((i=u((function e(){g(this,e)}))).\u0275fac=function(e){return new(e||i)},i.\u0275mod=s["\u0275\u0275defineNgModule"]({type:i}),i.\u0275inj=s["\u0275\u0275defineInjector"]({imports:[[E.a,I.a,_.c]]}),i)},urJB:function(e,t,n){"use strict";n.d(t,"a",(function(){return P})),n.d(t,"b",(function(){return B}));var r=n("mrSG"),o=n("8Y7J"),a=n("TxG7"),s=n("Cnb3"),c=n("lJxs"),p=n("xs9W"),m=n("HSxi"),d=n("Vwx4"),h=n("zeEq"),f=n("DO6O"),v=n("TUjp"),b=n("kxWE"),x=n("iInd"),C=n("Q5WP"),y=n("SVse");function O(e,t){if(1&e&&(o["\u0275\u0275element"](0,"mg-search-content",1),o["\u0275\u0275pipe"](1,"async")),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("groupHashes",o["\u0275\u0275pipeBind1"](1,2,n.groupHash$))("query",n.searchText)}}var w,M,P=((w=function(){function e(t,n,r,i,o){var s=this;g(this,e),this.groupsFacade=t,this.contentFeed=n,this.permissions=r,this.feedEventManager=i,this.eventCalendarService=o,this.ContentFeed=a.ContentFeed,this.calendarScheduleOptionsOpened=!1,this.searchText="",this.initializedSettings=!1,this.groupHash$=this.groupsFacade.getCurrentGroupHashObservable(),this.group$=this.groupsFacade.getCurrentGroup(),this.currentGroupHash="",this.settings$=o.settings$.pipe(Object(c.a)((function(e){return Object.assign({},e)}))),this.groupHashSub=this.groupHash$.subscribe((function(e){e&&(s.currentGroupHash=e,s.initializedSettings||s.initGroupCalendarSettings(e))}))}return u(e,[{key:"ngOnDestroy",value:function(){this.groupHashSub.unsubscribe();var e=this.eventCalendarService.getCurrentSettingsValue(),t=Object.assign({},e);t.groupHashes=[],this.eventCalendarService.updateSettings(t,!1,!0)}},{key:"getEmptyStateIcons",value:function(e){if(e){var t=p.a.isOwner(e)||this.permissions.hasPermission(s.MingaPermission.SUPERADMIN);if(!t&&p.a.isMember(e)&&e.allowedRoleTypes&&this.permissions.hasPermission(s.MingaPermission.GROUP_CONTENT_EVENTS_CREATE)){var n,r=i(e.allowedRoleTypes);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(this.permissions.hasRoleType(o)){t=!0;break}}}catch(a){r.e(a)}finally{r.f()}}if(t)return[{icon:"post",text:"Add"},{icon:"calendar",text:"Event"}]}return[]}},{key:"initGroupCalendarSettings",value:function(e){return Object(r.a)(this,void 0,void 0,l().mark((function t(){var n,r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.eventCalendarService.getCurrentSettingsValue(),(r=Object.assign({},n)).groupHashes=[e],t.next=4,this.eventCalendarService.updateSettings(r);case 4:this.initializedSettings=!0;case 5:case"end":return t.stop()}}),t,this)})))}}]),e}()).\u0275fac=function(e){return new(e||w)(o["\u0275\u0275directiveInject"](m.b),o["\u0275\u0275directiveInject"](a.ContentFeed),o["\u0275\u0275directiveInject"](d.c),o["\u0275\u0275directiveInject"](h.FeedEventManager),o["\u0275\u0275directiveInject"](f.a))},w.\u0275cmp=o["\u0275\u0275defineComponent"]({type:w,selectors:[["mg-view-group-events-page"]],decls:4,vars:3,consts:[["mgSearchArea","",3,"placeholder","searchText"],["contentType","EVENT",3,"groupHashes","query"]],template:function(e,t){var n;(1&e&&(o["\u0275\u0275template"](0,O,2,4,"ng-template",0),o["\u0275\u0275pipe"](1,"async"),o["\u0275\u0275listener"]("searchText",(function(e){return t.searchText=e})),o["\u0275\u0275element"](2,"mg-events-home"),o["\u0275\u0275element"](3,"router-outlet")),2&e)&&o["\u0275\u0275property"]("placeholder","Search "+(null==(n=o["\u0275\u0275pipeBind1"](1,1,t.group$))?null:n.name)+" Events")},directives:[v.a,b.a,x.l,C.a],pipes:[y.b],styles:["[_nghost-%COMP%]{display:block}.feed-items[_ngcontent-%COMP%]{margin-bottom:32px}.calendar-options-nav[_ngcontent-%COMP%]{display:flex;margin:8px;justify-content:flex-end}.calendar-schedule-options-container[_ngcontent-%COMP%]{overflow:hidden}@keyframes options-slide-in{0%{transform:translateY(-100%)}to{transform:translateY(0)}}.calendar-schedule-options[_ngcontent-%COMP%]{max-width:350px;padding:8px;margin:8px auto;transform:translateY(-100%);animation:options-slide-in .15s ease;animation-iteration-count:1;animation-fill-mode:forwards}.calendar-schedule-options[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;column-gap:8px;align-items:center;justify-content:flex-start}.calendar-settings-title[_ngcontent-%COMP%]{text-transform:uppercase;font-size:12px;font-weight:700;text-align:center;margin:0 0 8px;color:#737373}"]}),w),_=n("u9T3"),k=n("s7LF"),S=n("pMoy"),I=n("Q2Ze"),E=n("TSSN"),j=n("CO6v"),T=n("cPHN"),G=n("DWt7"),F=n("NG9B"),L=n("p58v"),R=n("ls3q"),N=n("DjdL"),A=n("HDrY"),B=((M=u((function e(){g(this,e)}))).\u0275fac=function(e){return new(e||M)},M.\u0275mod=o["\u0275\u0275defineNgModule"]({type:M}),M.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[A.a,N.d,F.a,G.a,R.a,j.a,T.a,L.a,y.c,x.k,_.a,E.c,I.f,k.m,S.b]]}),M)},vXul:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("8Y7J"),i=n("jaBy"),o=n("+3nk"),a=n("YgQ7"),s=n("VDRc"),c=n("Fudl"),l=n("65ez"),p=n("ah9P"),m=n("Mjc8"),d=["imageLightBox"];function h(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",1),r["\u0275\u0275elementStart"](1,"div",2),r["\u0275\u0275elementStart"](2,"mg-icon",3),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().closeLightBox()})),r["\u0275\u0275text"](3,"close"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](4,"div",4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"mg-swipe-container",5,6),r["\u0275\u0275elementStart"](7,"div",7),r["\u0275\u0275element"](8,"div",8),r["\u0275\u0275element"](9,"mg-progressive-image",9),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("spaceBetween",20),r["\u0275\u0275advance"](2),r["\u0275\u0275styleProp"]("background-image","url("+i.lightBoxImage.url+")")("width",i.lightBoxImageWidth(i.lightBoxImage),"px")("height",i.lightBoxImageHeight(i.lightBoxImage),"px"),r["\u0275\u0275advance"](1),r["\u0275\u0275styleProp"]("background-image","url("+i.lightBoxImage.url+")"),r["\u0275\u0275classProp"]("img-loading",i.lightBoxImage.loading),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("images",i.lightBoxImage.progressiveUrls)}}var f=function(){var e=function(){function e(t){g(this,e),this.modal=t}return u(e,[{key:"onResize",value:function(e){this._setLightBoxImageDimensions(null)}},{key:"ngOnInit",value:function(){var e=this;this.openLightbox&&this.openLightbox.subscribe((function(t){e.openImageLightBox(t)}))}},{key:"ngOnDestroy",value:function(){this.openLightbox&&this.openLightbox.unsubscribe()}},{key:"_setLightBoxImageDimensions",value:function(e){if(!e&&this.lightBoxImageInfo&&(e=this.lightBoxImageInfo),e){this.lightBoxImageInfo=e;var t={};e.sizeMap.forEach((function(e){t[e[0]]=e[1]}));var n=[],r=t.longcardbanner||t.cardbanner||t.raw;t.blurloading1&&n.push(t.blurloading1.path),n.push(r.path),this.lightBoxImage={index:0,progressiveUrls:n.map((function(e){return Object(i.b)(e)})),url:Object(i.b)(r.path),width:r.width,height:r.height,loading:!1}}}},{key:"_lightBoxContainerSize",value:function(){return{height:innerHeight-Math.max(100,.15*innerHeight),width:innerWidth-Math.max(50,.1*innerWidth)}}},{key:"lightBoxImageWidth",value:function(e){return Object(o.a)(e,this._lightBoxContainerSize()).width}},{key:"lightBoxImageHeight",value:function(e){return Object(o.a)(e,this._lightBoxContainerSize()).height}},{key:"openImageLightBox",value:function(e){this._setLightBoxImageDimensions(e),this._lightBoxModal=this.modal.open(this.imageLightBox,{full:!0,animation:"fade",backgroundColor:"#000000"})}},{key:"closeLightBox",value:function(){this._lightBoxModal&&this._lightBoxModal.close()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](a.b))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-group-image-lightbox"]],viewQuery:function(e,t){var n;(1&e&&r["\u0275\u0275viewQuery"](d,3),2&e)&&(r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.imageLightBox=n.first))},hostBindings:function(e,t){1&e&&r["\u0275\u0275listener"]("resize",(function(e){return t.onResize(e)}),!1,r["\u0275\u0275resolveWindow"])},inputs:{openLightbox:"openLightbox"},decls:2,vars:0,consts:[["imageLightBox",""],["fxLayout","column",1,"image-light-box"],["fxLayout","row"],[3,"click"],["fxFlex",""],["fxFlex","",1,"images","image-light-box-swipe-container",3,"spaceBetween"],["lightBoxSwipeContainer","mgSwipeContainer"],["mgPinchZoom","",1,"img-src"],[1,"img-src-blurry"],["mode","sequential",3,"images"]],template:function(e,t){1&e&&r["\u0275\u0275template"](0,h,10,12,"ng-template",null,0,r["\u0275\u0275templateRefExtractor"])},directives:[s.e,c.a,s.b,l.a,p.a,m.a],styles:[""]}),e}()},vcU5:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("mrSG"),i=n("A75Z");function o(e){return Object(r.a)(this,void 0,void 0,l().mark((function t(){var n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.fontFamily){t.next=2;break}return t.abrupt("return",!1);case 2:return n=e.fontFamily,t.abrupt("return",(e.fontWeight&&(n+=":"+e.fontWeight),Object(i.a)(n)));case 4:case"end":return t.stop()}}),t)})))}},xiiZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("8Y7J"),i=n("vcU5"),o=n("fTqC"),a=n("jcBT"),s=n("SVse"),c=n("StFh");function l(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",2),r["\u0275\u0275text"](1," Aa "),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("ngStyle",n.headlineStyle(null==n.banner?null:n.banner.headlineOptions))}}var p=function(){return["blurloading1","bannerlibpreview"]},m=function(){var e=function(){function e(){g(this,e),this.banner=null,this.disableBannerHeadlines=!1}return u(e,[{key:"headlineStyle",value:function(e){return e?(Object(i.a)(e),Object(o.a)("Aa",Object.assign(Object.assign({},e),{maxFontSize:18,minFontSize:18}),{maxLength:2,containerWidth:128})):{}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-banner-preview"]],inputs:{banner:"banner",disableBannerHeadlines:"disableBannerHeadlines"},decls:3,vars:6,consts:[[1,"mg-banner-preview",3,"srcs"],["class","mg-banner-headline-preview",3,"ngStyle",4,"ngIf"],[1,"mg-banner-headline-preview",3,"ngStyle"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mg-image",0),r["\u0275\u0275pipe"](1,"mgImageUrls"),r["\u0275\u0275template"](2,l,2,1,"div",1),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275property"]("srcs",r["\u0275\u0275pipeBind2"](1,2,null==t.banner?null:t.banner.image,r["\u0275\u0275pureFunction0"](5,p))),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",(null==t.banner?null:t.banner.headlineOptions)&&!t.disableBannerHeadlines))},directives:[a.a,s.o,s.p],pipes:[c.a],styles:[".mg-banner-preview[_ngcontent-%COMP%], [_nghost-%COMP%]{display:inline-block}.mg-banner-preview[_ngcontent-%COMP%]{position:relative;width:128px;height:72px;background-color:#ccc;border:1px solid #ccc;box-shadow:0 0 2px rgba(0,0,0,.16);cursor:pointer;background-size:cover;background-position:50%}.mg-banner-headline-preview[_ngcontent-%COMP%]{position:absolute;-webkit-user-select:none;user-select:none}[banner-selected][_nghost-%COMP%]   .mg-banner-preview[_ngcontent-%COMP%]{border:1px solid #3cf}[no-style][_nghost-%COMP%]   .mg-banner-preview[_ngcontent-%COMP%]{margin:0;border-radius:0;box-shadow:none;border:none}.ios-radius[_nghost-%COMP%]   .mg-banner-preview[_ngcontent-%COMP%]{border-radius:8px}.banner-selected.ios-radius[_nghost-%COMP%]   .mg-banner-preview[_ngcontent-%COMP%], [banner-selected].ios-radius[_nghost-%COMP%]   .mg-banner-preview[_ngcontent-%COMP%]{border-radius:4px}"],changeDetection:0}),e}()},xjLp:function(e,t,n){"use strict";n.d(t,"a",(function(){return E})),n("p47V");var r,i,o=n("SVse"),a=n("8Y7J"),s=n("u9T3"),c=n("s7LF"),l=n("pMoy"),p=n("Q2Ze"),m=n("e6WT"),d=n("ZTz/"),h=n("jMqV"),f=n("CO6v"),v=n("07le"),b=n("5Ynh"),x=n("9F0b"),C=n("YcSX"),y=n("HxU+"),O=n("ls3q"),w=n("ppIK"),M=n("Vwx4"),P=n("Ogcz"),_=n("WmLq"),k=(n("bZiG"),n("TSSN")),S=n("7Tcv"),I=((i=u((function e(){g(this,e)}))).\u0275fac=function(e){return new(e||i)},i.\u0275mod=a["\u0275\u0275defineNgModule"]({type:i}),i.\u0275inj=a["\u0275\u0275defineInjector"]({imports:[[S.a,_.a,o.c,c.m,l.b,k.c]]}),i),E=((r=u((function e(){g(this,e)}))).\u0275fac=function(e){return new(e||r)},r.\u0275mod=a["\u0275\u0275defineNgModule"]({type:r}),r.\u0275inj=a["\u0275\u0275defineInjector"]({imports:[[f.a,O.a,P.b,y.a,w.a,v.a,b.a,x.c,C.b,M.b,_.a,I,o.c,c.m,s.a,p.f,m.c,d.b,h.b,l.b]]}),r)},y8Ey:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n("J+65");var r,i=n("8Y7J"),o=n("SVse"),a=n("u9T3"),s=n("fHWq"),c=n("5VmK"),l=((r=u((function e(){g(this,e)}))).\u0275fac=function(e){return new(e||r)},r.\u0275mod=i["\u0275\u0275defineNgModule"]({type:r}),r.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[s.a,c.a,o.c,a.a]]}),r)}}])}();
//# sourceMappingURL=default~minga-app-src-app-groups-groups-overlays-module~minga-app-src-app-groups-groups-routing-module-es5.js.map
!function(){function e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=a.call(n)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(c){u=!0,r=c}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw r}}return s}}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(){return(t="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var r=n(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:i):a.value}}).apply(this,arguments)}function n(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}function i(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}function a(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function s(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */s=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),s=new D(r||[]);return i(o,"_invoke",{value:M(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(P){return{type:"throw",arg:P}}}e.wrap=c;var g={};function f(){}function p(){}function h(){}var v={};u(v,a,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(S([])));y&&y!==t&&n.call(y,a)&&(v=y);var b=h.prototype=f.prototype=Object.create(v);function C(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var r;i(this,"_invoke",{value:function(i,a){function o(){return new t((function(r,o){!function i(r,a,o,s){var l=d(e[r],e,a);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==typeof c&&n.call(c,"__await")?t.resolve(c.__await).then((function(e){i("next",e,o,s)}),(function(e){i("throw",e,o,s)})):t.resolve(c).then((function(e){u.value=e,o(u)}),(function(e){return i("throw",e,o,s)}))}s(l.arg)}(i,a,r,o)}))}return r=r?r.then(o,o):o()}})}function M(e,t,n){var i="suspendedStart";return function(r,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw a;return F()}for(n.method=r,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=d(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}function w(e,t){var n=t.method,i=e.iterator[n];if(void 0===i)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var r=d(i,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,g;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,g):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,g)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function S(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:F}}function F(){return{value:void 0,done:!0}}return p.prototype=h,i(b,"constructor",{value:h,configurable:!0}),i(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},C(k.prototype),u(k.prototype,o,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,i,r,a){void 0===a&&(a=Promise);var o=new k(c(t,n,i,r),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},C(b),u(b,l,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},e.values=S,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){return o.type="throw",o.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],o=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;x(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),g}},e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,d(i.key),i)}}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=m(e);if(t){var r=m(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h(this,n)}}function h(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{"3JiK":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.cloudflareUrlMetaDecode=t.cloudflareUrlMetaEncode=void 0;var i=n("tpqs"),r=globalThis.btoa||function(t){return e.from(t).toString("base64")},a=globalThis.atob||function(t){return e.from(t,"base64").toString()};t.cloudflareUrlMetaEncode=function(e,t){var n=i.extname(e),a=i.basename(e,n),o=function(e){var t=Object.assign({c:e.country,e:e.environment,v:e.clientVersion},e);return delete t.country,delete t.environment,delete t.clientVersion,t}(t);return a+"--"+r(JSON.stringify(o))+n},t.cloudflareUrlMetaDecode=function(e){var t,n,r=i.extname(e),o=i.basename(e,r),s=o.substr(o.lastIndexOf("--")+2);return t=JSON.parse(a(s)),delete(n=Object.assign({country:t.c,environment:t.e,clientVersion:t.v},t)).c,delete n.e,delete n.v,n}}).call(this,n("HDXh").Buffer)},"3wAF":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeltaSmsMessageInfo=t.SmsMessageInfo=void 0;var i=n("hRO2"),r=n("bHfG"),a=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,null,null),r}return c(n,[{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getMessage",value:function(){return i.Message.getFieldWithDefault(this,1,"")}},{key:"setMessage",value:function(e){i.Message.setProto3StringField(this,1,e)}}],[{key:"toObject",value:function(e,t){var n={message:i.Message.getFieldWithDefault(t,1,"")};return e&&(n.$jspbMessageInstance=t),n}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=t.readString();e.setMessage(n)}else t.skipField();return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n;(n=e.getMessage()).length>0&&t.writeString(1,n)}}]),n}(i.Message);t.SmsMessageInfo=a,a.displayName="SmsMessageInfo";var o=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,null,null),r}return c(n,[{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getContentHash",value:function(){return i.Message.getFieldWithDefault(this,1,"")}},{key:"setContentHash",value:function(e){i.Message.setProto3StringField(this,1,e)}},{key:"getMessage",value:function(){return i.Message.getWrapperField(this,r.StringDelta,2)}},{key:"setMessage",value:function(e){i.Message.setWrapperField(this,2,e)}},{key:"clearMessage",value:function(){this.setMessage(void 0)}},{key:"hasMessage",value:function(){return null!=i.Message.getField(this,2)}}],[{key:"toObject",value:function(e,t){var n,a={contentHash:i.Message.getFieldWithDefault(t,1,""),message:(n=t.getMessage())&&r.StringDelta.toObject(e,n)};return e&&(a.$jspbMessageInstance=t),a}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setContentHash(n);break;case 2:var i=new r.StringDelta;t.readMessage(i,r.StringDelta.deserializeBinaryFromReader),e.setMessage(i);break;default:t.skipField()}return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n=void 0;(n=e.getContentHash()).length>0&&t.writeString(1,n),null!=(n=e.getMessage())&&t.writeMessage(2,n,r.StringDelta.serializeBinaryToWriter)}}]),n}(i.Message);t.DeltaSmsMessageInfo=o,o.displayName="DeltaSmsMessageInfo"},"6bpZ":function(n,a,o){"use strict";o.r(a),o.d(a,"contentRoutes",(function(){return Xa})),o.d(a,"ContentModule",(function(){return no}));var u,f,h=o("SVse"),v=o("8Y7J"),y=o("iInd"),b=o("TSSN"),C=o("03Y+"),k=o("9jR1"),M=o("oTGS"),w=o("CL15"),O=o("Cnb3"),x=o("mrSG"),D=o("o4Yh"),S=o("qvb8"),F=o.n(S),P=o("XNiG"),I=o("gEWx"),_=o("9iN8"),T=o("w3KL"),E=o("WFJ2"),B=o("+dib"),j=o("F5Qo"),R=o("f16K"),z=o("joVo"),N=o("l6At"),V=o("4Zvv"),W=o("2Vo4"),L=o("5km/"),U=o("LvDl"),A=function(){function e(t,n,i,r){l(this,e),this.userStorage=t,this.permissions=n,this._memDraft=null,this._initMemDraft=null,this._saveTimeoutResolves=[],this._cachedDirtyStatus={},this._storagePrefix=i,this._contentHash=r}return c(e,[{key:"storageKey",get:function(){return"CID~"+this._storagePrefix+"~"+this._contentHash}},{key:"contentHash",get:function(){return this._contentHash}},{key:"hasImageContent",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})))}},{key:"hasTextContent",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})))}},{key:"hasMemDraftFields",value:function(){return!!this._memDraft&&Object.keys(this._memDraft).length>0}},{key:"setInitialDraft",value:function(e){this._initMemDraft=e,this._cachedDirtyStatus={}}},{key:"initialDraftDifference",value:function(){var e=this._initMemDraft||{};return U.omitBy(this._memDraft||{},(function(t,n){return U.isEqual(e[n],t)}))}},{key:"isFieldDirty",value:function(e){if(e in this._cachedDirtyStatus)return this._cachedDirtyStatus[e];var t=this._memDraft||{};if(!(e in t))return!1;var n=!U.isEqual((this._initMemDraft||{})[e],t[e]);return this._memDraft&&this._initMemDraft&&(this._cachedDirtyStatus[e]=n),n}},{key:"getStoredDraft",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.userStorage.getItem(this.storageKey);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))}},{key:"getDraft",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.createEmptyDraft(),this._memDraft){e.next=6;break}return e.next=4,this.getStoredDraft();case 4:(n=e.sent)&&(this._memDraft=n.data);case 6:return e.abrupt("return",U.merge(t,U.cloneDeep(this._memDraft||{})));case 7:case"end":return e.stop()}}),e,this)})))}},{key:"fetchInitialDraftInfoIfNeeded",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._initMemDraft,e.t0){e.next=4;break}return e.next=4,this.fetchInitialDraftInfo();case 4:case"end":return e.stop()}}),e,this)})))}},{key:"cloneDraftMergedWithInitialFetchIfNeeded",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchInitialDraftInfoIfNeeded();case 2:return e.abrupt("return",this.cloneDraftMergedWithInitial());case 3:case"end":return e.stop()}}),e,this)})))}},{key:"cloneDraftMergedWithInitial",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t,n,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.createEmptyDraft(),e.next=3,this.getDraft();case 3:return n=this._memDraft||{},i=this._initMemDraft||[],e.abrupt("return",U.mergeWith({},U.cloneDeep(t),U.cloneDeep(i),U.cloneDeep(n),(function(e,t){if(Array.isArray(e)&&Array.isArray(t))return t})));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"saveToDraft",value:function(e,t){return Object(x.a)(this,void 0,void 0,s().mark((function n(){var i,r=this;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this._memDraft){n.next=5;break}return n.next=3,this.getStoredDraft();case 3:i=n.sent,this._memDraft||(this._memDraft=i?i.data:{});case 5:return this._memDraft[e]=t,delete this._cachedDirtyStatus[e],clearTimeout(this._saveTimeout),n.next=10,new Promise((function(e){r._saveTimeoutResolves.push(e),r._saveTimeout=setTimeout((function(){r.userStorage.setItem(r.storageKey,{lastUpdated:Date.now(),data:r._memDraft})}),300),r._saveTimeoutResolves.forEach((function(e){return e()})),r._saveTimeoutResolves=[]}));case 10:case"end":return n.stop()}}),n,this)})))}},{key:"clearDraft",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.userStorage.setItem(this.storageKey,null);case 2:this._memDraft=null,this._initMemDraft=null,this._cachedDirtyStatus={};case 5:case"end":return e.stop()}}),e,this)})))}},{key:"bodyAsPreviewHtml",value:function(e){return Object(x.a)(this,void 0,void 0,s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.permissions.hasPermission(O.MingaPermission.CONTENT_HTML_INCLUDE)?e:Object(O.nl2p)(e));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"submitDraft",value:function(){return this.contentHash?this.submitDraftUpdate():this.submitDraftNew()}},{key:"previewComponentBackgroundColor",value:function(e){return""}},{key:"getStyleImageAsset",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","");case 1:case"end":return e.stop()}}),e)})))}},{key:"makeRepeatedStringDelta",value:function(e){return Object(x.a)(this,void 0,void 0,s().mark((function t(){var n,i,a,o,l,u,c,d,g,f,p,h,v,m,y,b,C,k,M,w,O,x,D,S,F,P;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new j.RepeatedStringDelta,t.next=3,this.cloneDraftMergedWithInitialFetchIfNeeded();case 3:if(t.t0=e,i=t.sent[t.t0],a=[],o=[],l=[],Array.isArray(i)){t.next=10;break}throw new Error("Info draft key '".concat(e,"' is not an array"));case 10:if(u=this._initMemDraft[e]||[],Array.isArray(u)){t.next=13;break}throw new Error("Info draft key '".concat(e,"' is not an array"));case 13:for(a=u,o=U.difference(i,a),l=U.difference(a,i),c=Math.max(i.length,a.length),d=0;c>d;++d)g=a[d],i[d]!=g&&(-1===(f=i.indexOf(g))?void 0===g?(p=o.shift(),(h=new j.RepeatedStringDelta.InsertInstruction).setInsertOffset(d),h.setInsertString(p),n.addInsertInstruction(h)):(v=l.shift(),(m=new j.RepeatedStringDelta.EraseInstruction).setEraseOffset(d),m.setEraseString(v),n.addEraseInstruction(m)):((y=new j.RepeatedStringDelta.EraseInstruction).setEraseOffset(d),y.setEraseString(g),n.addEraseInstruction(y),(b=new j.RepeatedStringDelta.InsertInstruction).setInsertOffset(f),b.setInsertString(g),n.addInsertInstruction(b)));C=r(o);try{for(C.s();!(k=C.n()).done;)M=k.value,w=i.indexOf(M),(O=new j.RepeatedStringDelta.InsertInstruction).setInsertOffset(w),O.setInsertString(M),n.addInsertInstruction(O)}catch(s){C.e(s)}finally{C.f()}x=r(l);try{for(x.s();!(D=x.n()).done;)S=D.value,F=a.indexOf(S),(P=new j.RepeatedStringDelta.EraseInstruction).setEraseOffset(F),P.setEraseString(S),n.addEraseInstruction(P)}catch(s){x.e(s)}finally{x.f()}return t.abrupt("return",n);case 21:case"end":return t.stop()}}),t,this)})))}},{key:"_getInitialDraftInfo",value:function(){return U.cloneDeep(this._initMemDraft)}},{key:"_draftFieldIs",value:function(e,t){var n=this._memDraft||{},i=this._initMemDraft||{},r=this.createEmptyDraft();return U.has(n,e)?U.isEqual(U.get(n,e),t):U.has(i,e)?U.isEqual(U.get(i,e),t):U.isEqual(U.get(r,e),t)}}]),e}(),G=o("iELJ"),H=o("UWMR"),q=o("HSxi"),$=((f=function(){function e(t,n,i,r,a){var o=this;l(this,e),this.route=t,this.router=n,this.matDialog=i,this.snackBar=r,this.groupsFacadeService=a,this.context=null,this._skipPreventNav=!1,this.enabledNextStepSubject=new W.a(!0),this.enablePreviousStepSubject=new W.a(!0),this.overlayConfigSubject=new W.a({}),this._groupHashSub=this.groupsFacadeService.getCurrentGroupHashObservable().subscribe((function(e){o._groupHash=e})),t.url.subscribe((function(e){var t;switch(e[0].path){case"m":t="minga";break;case"p":t="program";break;case"g":t="group"}t?o.context?o.context.type=t:o.context={type:t}:o.context=null})),t.params.subscribe((function(e){e.programHash?o.context&&"program"===o.context.type&&(o.context.hash=e.programHash):e.contentContextHash?(o.context&&"minga"===o.context.type&&(o.context.hash=e.contentContextHash),o.context&&"group"===o.context.type&&(o.context.hash=e.contentContextHash)):o.context&&delete o.context.hash})),this.route.data.subscribe((function(e){if(!e.contentInfoDraft)throw new Error("Router data 'contentInfoDraft' must be provided must inherit ContentInfoDraft");var t=e.contentInfoDraft;if(!(t instanceof A))throw new Error("Router data 'contentInfoDraft' must inherit ContentInfoDraft");o._contentInfoDraft=t,o.mgContentInfoDraftReady()}))}return c(e,[{key:"groupHash",get:function(){return this._groupHash}},{key:"contentHash",get:function(){return this.contentInfoDraft.contentHash}},{key:"nextEnabled",get:function(){return this.enabledNextStepSubject.value}},{key:"previousEnabled",get:function(){return this.enablePreviousStepSubject.value}},{key:"onEnableNextStepChange",get:function(){return this.enabledNextStepSubject.asObservable()}},{key:"onEnablePreviousStepChange",get:function(){return this.enablePreviousStepSubject.asObservable()}},{key:"onOverlayConfigChange",get:function(){return this.overlayConfigSubject.asObservable()}},{key:"contentInfoDraft",get:function(){return this._contentInfoDraft}},{key:"ngOnDestroy",value:function(){this._groupHashSub&&this._groupHashSub.unsubscribe()}},{key:"navigateBackWithoutPrevent",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._skipPreventNav=!0,history.back(),e.next=4,new Promise((function(e){var n=t.router.events.subscribe((function(){e(),n.unsubscribe()}))}));case 4:this._skipPreventNav=!1;case 5:case"end":return e.stop()}}),e,this)})))}},{key:"preventNavigation",value:function(e,t,n){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t,i,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.url.includes("(o:content/")){e.next=2;break}return e.abrupt("return","");case 2:if(!this._skipPreventNav){e.next=4;break}return e.abrupt("return","");case 4:if(this.contentInfoDraft.hasMemDraftFields()){e.next=6;break}return e.abrupt("return","");case 6:if(t=this.contentInfoDraft.initialDraftDifference(),0!==Object.keys(t).length){e.next=11;break}return e.next=10,this.contentInfoDraft.clearDraft();case 10:return e.abrupt("return","");case 11:return i=this.matDialog.open(L.g),e.next=14,i.beforeClosed().toPromise();case 14:if("keep"!==(r=e.sent)){e.next=17;break}return e.abrupt("return","");case 17:if("discard"!==r){e.next=21;break}return e.next=20,this.contentInfoDraft.clearDraft();case 20:return e.abrupt("return","");case 21:throw new Error("User abort");case 22:case"end":return e.stop()}}),e,this)})))}},{key:"navigate",value:function(e){return Object(x.a)(this,void 0,void 0,s().mark((function t(){var n,r,a,o=this;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=[],r=[],!this.context){t.next=11;break}t.t0=this.context.type,t.next="minga"===t.t0?5:"program"===t.t0?7:"group"===t.t0?9:10;break;case 5:return n.push("m"),t.abrupt("break",10);case 7:return n.push("p"),t.abrupt("break",10);case 9:n.push("g");case 10:this.context.hash&&r.push(this.context.hash);case 11:return this._skipPreventNav=!0,t.next=14,this.router.navigate(["",{outlets:{o:["content"].concat(n,i(e),r)}}]).catch((function(e){throw o._skipPreventNav=!1,e}));case 14:return a=t.sent,t.abrupt("return",(this._skipPreventNav=!1,a));case 16:case"end":return t.stop()}}),t,this)})))}},{key:"exitDraft",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(x.a)(this,void 0,void 0,s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e&&(this._skipPreventNav=!0),t.prev=1,t.next=4,this.router.navigate(["",{outlets:{o:null}}]);case 4:return t.prev=4,e&&(this._skipPreventNav=!1),t.finish(4);case 7:case"end":return t.stop()}}),t,this,[[1,,4,7]])})))}},{key:"navigateToPreview",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=["preview",this.contentInfoDraft.type],this.contentHash&&t.push(this.contentHash),e.next=4,this.navigate(t);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"enableNextStep",value:function(){this.enabledNextStepSubject.next(!0)}},{key:"disableNextStep",value:function(){this.enabledNextStepSubject.next(!1)}},{key:"enablePreviousStep",value:function(){this.enablePreviousStepSubject.next(!0)}},{key:"disablePreviousStep",value:function(){this.enablePreviousStepSubject.next(!1)}},{key:"setOverlayConfig",value:function(e){this.overlayConfigSubject.next(e)}},{key:"getNextStep",value:function(){return null}},{key:"getPreviousStep",value:function(){return null}}]),e}()).\u0275fac=function(e){return new(e||f)(v["\u0275\u0275directiveInject"](y.a),v["\u0275\u0275directiveInject"](y.g),v["\u0275\u0275directiveInject"](G.b),v["\u0275\u0275directiveInject"](H.b),v["\u0275\u0275directiveInject"](q.b))},f.\u0275cmp=v["\u0275\u0275defineComponent"]({type:f,selectors:[["ng-component"]],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),f),Q=((u=function(){function e(){l(this,e),this._onMetaDataUpdateFromRemoteSubscription=null,this._onContentMetadataSaved=new P.a}return c(e,[{key:"onContentMetadataSaved",value:function(){return this._onContentMetadataSaved.asObservable()}},{key:"saveContentMetadata",value:function(e,t){if(!this.contentMetadataKeys.includes(e))throw new Error("ContentPreviewControl does not include key '".concat(e,"' in contentMetadataKeys."));this._onContentMetadataSaved.next(function(e,t,n){return(t=d(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,t))}},{key:"registerMetadataObservable",value:function(e){var t=this;this._onMetaDataUpdateFromRemoteSubscription=e.asObservable().subscribe((function(e){t.mgDraftReady(e)}))}},{key:"ngOnDestroy",value:function(){this._onMetaDataUpdateFromRemoteSubscription&&this._onMetaDataUpdateFromRemoteSubscription.unsubscribe()}}],[{key:"_setContentInfoDraft",value:function(e,t){e.contentInfoDraft=t}}]),e}()).\u0275fac=function(e){return new(e||u)},u.\u0275cmp=v["\u0275\u0275defineComponent"]({type:u,selectors:[["ng-component"]],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),u),K=o("GFah"),Y=o("YTnL"),Z=o("YgQ7"),J=o("jNxq"),X=o("LTMa"),ee=o("H2Qt"),te=o("Vwx4"),ne=o("WH00"),ie=o("6fNz"),re=o("/q54"),ae=o("Tcc+"),oe=o("tqRt"),se=o("xH8m"),le=o("NU8R"),ue=o("s7LF"),ce=o("cRkC"),de=["previewView"],ge=["successOverlayTemplate"],fe=["previewControlsForm"],pe=["expansionAccordion"];function he(e,t){}function ve(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"mat-expansion-panel",8),v["\u0275\u0275elementStart"](1,"mat-expansion-panel-header"),v["\u0275\u0275elementStart"](2,"mat-panel-title"),v["\u0275\u0275elementStart"](3,"strong"),v["\u0275\u0275text"](4),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](5,he,0,0,"ng-template",9),v["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=v["\u0275\u0275nextContext"](2);v["\u0275\u0275classProp"]("bordered",(null==i.previewControlsData?null:i.previewControlsData.length)>1||"xs"==i.mqAlias),v["\u0275\u0275property"]("expanded",i.initiallyExpanded),v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate"](null==n.compRef?null:n.compRef.instance.displayTitle)}}function me(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"form",3,4),v["\u0275\u0275elementStart"](2,"mat-accordion",5,6),v["\u0275\u0275template"](4,ve,6,4,"mat-expansion-panel",7),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){var n=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("ngForOf",n.previewControlsData)}}function ye(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"div",10),v["\u0275\u0275elementStart"](1,"div",11),v["\u0275\u0275element"](2,"mg-success-checkmark"),v["\u0275\u0275elementStart"](3,"div",12),v["\u0275\u0275text"](4,"Success!"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]())}var be,Ce,ke,Me=((be=function(e){g(n,e);var t=p(n);function n(e,i,r,a,o,s,u,c,d,g,f,p,h,v,m,y,b,C,k,M){var w;return l(this,n),(w=t.call(this,e,i,u,p,y)).route=e,w.router=i,w.rootService=r,w.programManager=a,w.mgModal=o,w.streamManager=s,w.matDialog=u,w.componentFactoryResolver=c,w.injector=d,w.mingaContent=g,w.mingaGroupContent=f,w.snackBar=p,w.permissions=h,w.contentEvents=v,w.contentMetadataService=m,w.groupsFacadeService=y,w.media=b,w.analytics=C,w.store=k,w.commentHandler=M,w.mqAlias="",w.previewControlsData=[],w.loadingPreview=!1,w.metadataInited=!1,w.initiallyExpanded=window.MINGA_APP_BROWSER,w.contentPreviewMetadata={programContentOffset:null,mingaContentPublishDate:null,mingaContentUnpublishDate:null,mingaContentPinEndDate:null,emailContent:!1,emailContentRoles:[],emailContentIncludeUnregistered:!1,commentRoleTypes:null},w.metadataUpdated=new P.a,w.expansionPanelCleanup=function(){},w.route.data.subscribe((function(e){return w.rootService.addLoadingPromise(w._handleRouteData(e))})),b.asObservable().subscribe((function(e){w.mqAlias=e[0].mqAlias})),w}return c(n,[{key:"_handleRouteData",value:function(e){return Object(x.a)(this,void 0,void 0,s().mark((function t(){var n,i,a,o,l,u,c,d,g,f,p,h,v,m,y,b,C,k,M,w;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.previewControlsData=[],!Array.isArray(e.previewControls)){t.next=83;break}n=e.previewControls,i=r(n),t.prev=3,i.s();case 5:if((a=i.n()).done){t.next=75;break}if(o=a.value,l=this.componentFactoryResolver.resolveComponentFactory(o.component),!o.permissions){t.next=72;break}if(!o.permissions.atLeastOne){t.next=30;break}u=o.permissions.atLeastOne.map((function(e){return Object(I.$enum)(O.MingaPermission).asValueOrThrow(e)})),c=!0,d=r(u),t.prev=12,d.s();case 14:if((g=d.n()).done){t.next=20;break}if(f=g.value,!(c=this.permissions.hasPermission(f))){t.next=18;break}return t.abrupt("break",20);case 18:t.next=14;break;case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(12),d.e(t.t0);case 25:return t.prev=25,d.f(),t.finish(25);case 28:if(c){t.next=30;break}return t.abrupt("continue",73);case 30:if(!Array.isArray(o.permissions.only)){t.next=51;break}p=o.permissions.only.map((function(e){return Object(I.$enum)(O.MingaPermission).asValueOrThrow(e)})),h=!0,v=r(p),t.prev=33,v.s();case 35:if((m=v.n()).done){t.next=41;break}if(y=m.value,h=this.permissions.hasPermission(y)){t.next=39;break}return t.abrupt("break",41);case 39:t.next=35;break;case 41:t.next=46;break;case 43:t.prev=43,t.t1=t.catch(33),v.e(t.t1);case 46:return t.prev=46,v.f(),t.finish(46);case 49:if(h){t.next=51;break}return t.abrupt("continue",73);case 51:if(!o.permissions.except){t.next=72;break}b=o.permissions.except.map((function(e){return Object(I.$enum)(O.MingaPermission).asValueOrThrow(e)})),C=!1,k=r(b),t.prev=54,k.s();case 56:if((M=k.n()).done){t.next=62;break}if(w=M.value,!(C=this.permissions.hasPermission(w))){t.next=60;break}return t.abrupt("break",62);case 60:t.next=56;break;case 62:t.next=67;break;case 64:t.prev=64,t.t2=t.catch(54),k.e(t.t2);case 67:return t.prev=67,k.f(),t.finish(67);case 70:if(!C){t.next=72;break}return t.abrupt("continue",73);case 72:this.previewControlsData.push({compFactory:l,cleanupFn:function(){}});case 73:t.next=5;break;case 75:t.next=80;break;case 77:t.prev=77,t.t3=t.catch(3),i.e(t.t3);case 80:return t.prev=80,i.f(),t.finish(80);case 83:return t.next=85,this.initContentMetadata();case 85:return t.next=87,this.initPreview();case 87:case"end":return t.stop()}}),t,this,[[3,77,80,83],[12,22,25,28],[33,43,46,49],[54,64,67,70]])})))}},{key:"initContentMetadata",value:function(){var e,t,n,i,r;return Object(x.a)(this,void 0,void 0,s().mark((function a(){var o,l,u,c,d,g;return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(null===(e=this.context)||void 0===e?void 0:e.hash)||"group"!==(null===(t=this.context)||void 0===t?void 0:t.type)){a.next=4;break}o={contentContextHash:this.context.hash,contentHash:this.contentHash},a.next=11;break;case 4:if(!(null===(n=this.context)||void 0===n?void 0:n.hash)||"minga"!==(null===(i=this.context)||void 0===i?void 0:i.type)){a.next=8;break}o={contentContextHash:this.context.hash,contentHash:this.contentHash},a.next=11;break;case 8:if("program"===(null===(r=this.context)||void 0===r?void 0:r.type)&&this.contentHash){a.next=10;break}return a.abrupt("return");case 10:o={contentHash:this.contentHash},this.contentHash&&(this.previewControlsData=[]);case 11:return a.next=13,this.contentMetadataService.getContentMetadata(o);case 13:l=a.sent,u=l.publishTimestamp,c=l.unpublishTimestamp,d=l.pinEndTimestamp,g=l.allowedCommentingRoleTypesList,u&&(this.contentPreviewMetadata.mingaContentPublishDate=new Date(u)),c&&(this.contentPreviewMetadata.mingaContentUnpublishDate=new Date(c)),d&&(this.contentPreviewMetadata.mingaContentPinEndDate=new Date(d)),g&&g.length>0&&(this.contentPreviewMetadata.commentRoleTypes=g),this.metadataInited=!0,this.metadataUpdated.next(this.contentPreviewMetadata);case 19:case"end":return a.stop()}}),a,this)})))}},{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){this.expansionPanelCleanup()}},{key:"_updateBgColor",value:function(){var e=this.previewComponentRef;"function"==typeof e.instance.mgCheckStyleChanges&&e.instance.mgCheckStyleChanges();var t=this.contentInfoDraft.previewComponentBackgroundColor(e);this.setOverlayConfig({background:t})}},{key:"_handleExpansionPanels",value:function(){var e=this;this.expansionPanelCleanup();var t=[];this.expansionPanels.forEach((function(n,i){t.push(n.expandedChange.subscribe((function(){clearTimeout(e._resizeTimeout),e._resizeTimeout=setTimeout((function(){window.dispatchEvent(new CustomEvent("resize"))}),1e3)})))}));var n=[];this.previewExpansionPanels.forEach((function(t,a){var o=e.previewControlsData[a];if(o.compFactory){o&&o.cleanupFn(),t.clear(),o.compRef=t.createComponent(o.compFactory);var l,u=o.compRef.instance,c=u.contentMetadataKeys,d=r(c);try{for(d.s();!(l=d.n()).done;){var g=l.value;if(n.includes(g))return t.clear(),void console.error("[ContentDraftPreviewComponent] key '".concat(g,"' is already used by another ContentPreviewControl. Skipping this content preview control"))}}catch(h){d.e(h)}finally{d.f()}n.push.apply(n,i(c));var f=u.onChanges().subscribe((function(){return Object(x.a)(e,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.previewComponentRef,!e.t0){e.next=5;break}return e.next=4,this.contentInfoDraft.updatePreviewComponent(this.previewComponentRef);case 4:this._updateBgColor();case 5:case"end":return e.stop()}}),e,this)})))})),p=u.onContentMetadataSaved().subscribe((function(t){(e.metadataInited||e.context)&&(e.contentPreviewMetadata=Object.assign(e.contentPreviewMetadata,t))}));u.registerMetadataObservable(e.metadataUpdated),Q._setContentInfoDraft(u,e.contentInfoDraft),u.mgDraftReady(e.contentPreviewMetadata),o.cleanupFn=function(){f.unsubscribe(),p.unsubscribe()}}})),this.expansionPanelCleanup=function(){t.forEach((function(e){return e.unsubscribe()}))}}},{key:"ngAfterViewInit",value:function(){var e=this;this.previewExpansionPanels.changes.subscribe((function(){e._handleExpansionPanels()})),this._handleExpansionPanels()}},{key:"getNextStep",value:function(){return this.contentInfoDraft.contentHash?{name:"Save",icon:"publish-o"}:{name:"Publish",icon:"publish-o"}}},{key:"getPreviousStep",value:function(){return{name:"Back",icon:"back"}}},{key:"previousStep",value:function(){return this.navigateBackWithoutPrevent()}},{key:"nextStep",value:function(){return this.submitPreview()}},{key:"initPreview",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingPreview=!0,e.next=3,this._initPreview().catch((function(e){throw t.loadingPreview=!1,e}));case 3:this.loadingPreview=!1;case 4:case"end":return e.stop()}}),e,this)})))}},{key:"mgContentInfoDraftReady",value:function(){}},{key:"_initPreview",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t,n,i=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.previewComponentRef=null,e.next=3,this.contentInfoDraft.createPreviewComponent();case 3:return t=e.sent,this.previewComponentRef=t,"registerOnOverlayConfig"in t.instance&&(n=!1,t.instance.registerOnOverlayConfig((function(e){if(n)throw new Error("Cannot call OnOverlayConfig on destroyed content view");i.setOverlayConfig(e)})),t.onDestroy((function(){return n=!0}))),e.next=7,this.calcStyleDefaults().catch((function(e){console.error(e)}));case 7:this.previewView.insert(t.hostView),this._updateBgColor();case 9:case"end":return e.stop()}}),e,this)})))}},{key:"calcStyleDefaults",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t,n,i,r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contentInfoDraft.getStyleImageAsset();case 2:if(t=e.sent,n=window.MINGA_ASSET_URL_PREFIX+t,t){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,F()(n,{ignore:["rgb(255,255,255)","rgb(0,0,0)"]}).catch((function(e){return console.error(e),[]}));case 8:return i=e.sent,r=0==i.length?"rgb(0,0,0)":i[0].color,a=new E.a(r),e.next=13,this.contentInfoDraft.saveToDraft("backgroundColor",r.toString());case 13:return e.next=15,this.contentInfoDraft.saveToDraft("lightContent",a.isDark());case 15:return e.next=17,this.contentInfoDraft.saveToDraft("gradientOverlap",!0);case 17:if(e.t0=this.previewComponentRef,!e.t0){e.next=22;break}return e.next=21,this.contentInfoDraft.updatePreviewComponent(this.previewComponentRef);case 21:this._updateBgColor();case 22:case"end":return e.stop()}}),e,this)})))}},{key:"_addToProgram",value:function(e,t){return Object(x.a)(this,void 0,void 0,s().mark((function n(){var i,r,a;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=new N.ProgramContentPosition,this.contentPreviewMetadata.programContentOffset&&(r=this.contentPreviewMetadata.programContentOffset,i.setOffset(Object(_.b)(r)),i.setRelativeOffset(r.relative)),(a=new N.ProgramAddContent).setContentHash(e),a.setProgramHash(t),a.setContentStartPosition(i),n.next=8,this.programManager.addContent(a);case 8:return n.abrupt("return",n.sent);case 9:case"end":return n.stop()}}),n,this)})))}},{key:"_addToMinga",value:function(e){return Object(x.a)(this,void 0,void 0,s().mark((function t(){var n,i,r,a;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new z.MingaAddContent).setContentHash(e),this.contentPreviewMetadata.mingaContentPublishDate&&(i=Object(B.e)(this.contentPreviewMetadata.mingaContentPublishDate),n.setContentStartDateTime(i)),this.contentPreviewMetadata.mingaContentUnpublishDate&&(r=Object(B.e)(this.contentPreviewMetadata.mingaContentUnpublishDate),n.setContentEndDateTime(r)),this.contentPreviewMetadata.mingaContentPinEndDate&&(a=Object(B.e)(this.contentPreviewMetadata.mingaContentPinEndDate),n.setContentPinEndDateTime(a)),t.next=6,this.mingaContent.addContent(n);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})))}},{key:"_addToGroup",value:function(e,t){return Object(x.a)(this,void 0,void 0,s().mark((function n(){var i,r,a,o;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(i=new R.MingaGroupAddContent).setContentHash(e),i.setMingaGroupHash(t),this.contentPreviewMetadata.mingaContentPublishDate&&(r=Object(B.e)(this.contentPreviewMetadata.mingaContentPublishDate),i.setContentStartDateTime(r)),this.contentPreviewMetadata.mingaContentUnpublishDate&&(a=Object(B.e)(this.contentPreviewMetadata.mingaContentUnpublishDate),i.setContentEndDateTime(a)),this.contentPreviewMetadata.mingaContentPinEndDate&&(o=Object(B.e)(this.contentPreviewMetadata.mingaContentPinEndDate),i.setContentPinEndDateTime(o)),n.next=6,this.mingaGroupContent.addContent(i);case 6:return n.abrupt("return",n.sent);case 7:case"end":return n.stop()}}),n,this)})))}},{key:"_moveGroupContent",value:function(e){return Object(x.a)(this,void 0,void 0,s().mark((function t(){var n,i,r,a,o,l,u,c,d;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=new R.MingaGroupMoveContent).setContentContextHash(e),i=this.groupHash,t.t0=i,t.t0){t.next=8;break}return t.next=7,this.contentMetadataService.getContentMetadata({contentContextHash:e});case 7:i=t.sent.ownerGroupHash;case 8:if(n.setMingaGroupHash(i),!this.contentPreviewMetadata.mingaContentPublishDate){t.next=12;break}r=this.contentPreviewMetadata.mingaContentPublishDate,(a=new j.DateTimeDelta).setNewDateTime(Object(B.g)(r)),n.setContentStartDateTime(a);case 12:return o=new j.DateTimeDelta,this.contentPreviewMetadata.mingaContentUnpublishDate&&(l=this.contentPreviewMetadata.mingaContentUnpublishDate,o.setNewDateTime(Object(B.g)(l))),n.setContentEndDateTime(o),this.contentPreviewMetadata.mingaContentPinEndDate?(u=this.contentPreviewMetadata.mingaContentPinEndDate,(c=new j.DateTimeDelta).setNewDateTime(Object(B.g)(u)),n.setContentPinEndDateTime(c)):n.setContentPinEndDateTime(new j.DateTimeDelta),t.next=17,this.mingaGroupContent.moveContent(n);case 17:return d=t.sent,t.abrupt("return",(this.contentMetadataService.clearContentMetadata(e),d));case 19:case"end":return t.stop()}}),t,this)})))}},{key:"_moveMingaContent",value:function(e){return Object(x.a)(this,void 0,void 0,s().mark((function t(){var n,i,r,a,o,l,u,c;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new z.MingaMoveContent).setContentContextHash(e),this.contentPreviewMetadata.mingaContentPublishDate&&(i=this.contentPreviewMetadata.mingaContentPublishDate,(r=new j.DateTimeDelta).setNewDateTime(Object(B.g)(i)),n.setContentStartDateTime(r)),a=new j.DateTimeDelta,this.contentPreviewMetadata.mingaContentUnpublishDate&&(o=this.contentPreviewMetadata.mingaContentUnpublishDate,a.setNewDateTime(Object(B.g)(o))),n.setContentEndDateTime(a),this.contentPreviewMetadata.mingaContentPinEndDate?(l=this.contentPreviewMetadata.mingaContentPinEndDate,(u=new j.DateTimeDelta).setNewDateTime(Object(B.g)(l)),n.setContentPinEndDateTime(u)):n.setContentPinEndDateTime(new j.DateTimeDelta),t.next=7,this.mingaContent.moveContent(n);case 7:return c=t.sent,t.abrupt("return",(this.contentMetadataService.clearContentMetadata(e),c));case 9:case"end":return t.stop()}}),t,this)})))}},{key:"_moderationFailDialog",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return Object(x.a)(this,void 0,void 0,s().mark((function o(){return s().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return this.contentEvents.emitFailedModeration({contentHash:e,contextHash:t,textFailed:r&&!n.allTextContentPassed,imageFailed:a&&!n.allImageContentPassed,imageTextFailed:a&&!n.allImageTextContentPassed&&n.allImageContentPassed,imageAndTextFailed:a&&!n.allImageTextContentPassed&&!n.allImageContentPassed,tags:n.tags,imageTags:n.imageTags,emailContentSend:i}),o.next=3,new Promise((function(e){return setTimeout(e,300)}));case 3:return o.next=5,this.exitDraft(!0);case 5:case"end":return o.stop()}}),o,this)})))}},{key:"_successDialog",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.mgModal.open(this.successOverlayTemplate,{full:!0,animation:"fade"}),setTimeout((function(){return t.close()}),2e3),e.next=4,new Promise((function(e){return setTimeout(e,1e3)}));case 4:return e.next=6,this.exitDraft(!0);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"isProgramContent",value:function(){return this.context&&"program"===this.context.type}},{key:"isMingaContent",value:function(){return this.context&&"minga"===this.context.type}},{key:"isGroupContent",value:function(){return this.context&&"group"===this.context.type}},{key:"_add",value:function(e){return Object(x.a)(this,void 0,void 0,s().mark((function t(){var n,i,r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.contentHash,delete(r=Object.assign({},e,{contentHash:e.contentHash})).moderation,!this.isProgramContent()){t.next=11;break}if(t.t0=this.contentHash,t.t0){t.next=9;break}return t.next=8,this._addToProgram(n,this.context.hash);case 8:i=t.sent;case 9:t.next=38;break;case 11:if(!this.isMingaContent()){t.next=24;break}if(!this.contentHash){t.next=18;break}return t.next=15,this._moveMingaContent(this.context.hash);case 15:t.t1=t.sent,t.next=21;break;case 18:return t.next=20,this._addToMinga(n);case 20:t.t1=t.sent;case 21:i=t.t1,t.next=38;break;case 24:if(!this.isGroupContent()){t.next=37;break}if(!this.contentHash){t.next=31;break}return t.next=28,this._moveGroupContent(this.context.hash);case 28:t.t2=t.sent,t.next=34;break;case 31:return t.next=33,this._addToGroup(n,this.groupHash);case 33:t.t2=t.sent;case 34:i=t.t2,t.next=38;break;case 37:console.warn("ContentDraftPreview._add unhandled context:",this.context);case 38:return i&&(i.hasModerationResult()&&(r.moderation=V.ModerationResultMapper.toIModerationResult(i.getModerationResult())),i.getContentContextHash&&(r.contentContextHash=i.getContentContextHash())),t.abrupt("return",r);case 40:case"end":return t.stop()}}),t,this)})))}},{key:"submitPreview",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t,n,i,r,a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isProgramContent()||this.contentPreviewMetadata.programContentOffset||this.contentHash){e.next=2;break}return e.abrupt("return",void this.snackBar.open("Cannot publish program content, no date values provided!"));case 2:if(!(this.contentPreviewMetadata.mingaContentUnpublishDate&&this.contentPreviewMetadata.mingaContentPublishDate&&this.contentPreviewMetadata.mingaContentUnpublishDate.getTime()<this.contentPreviewMetadata.mingaContentPublishDate.getTime())){e.next=4;break}return e.abrupt("return",void this.snackBar.open("Cannot publish with unpublish date before a publish date!"));case 4:return t=this.getSendEmailOptions(),e.next=7,this.rootService.addLoadingPromise(this.contentInfoDraft.submitDraft());case 7:if(!(n=e.sent).moderation||n.moderation.allPassed){e.next=34;break}return e.next=11,this.contentInfoDraft.clearDraft();case 11:return e.next=13,this.streamManager.restartStreamIfAvailable("MingaReportFeed");case 13:return e.next=15,this.streamManager.restartStreamIfAvailable("MingaGlobalReportFeed");case 15:return e.prev=15,e.next=18,this.rootService.addLoadingPromise(this._add(n));case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(15),console.warn("Moderation failed on create. Ignoring error on add:",e.t0);case 23:return e.next=25,this.contentInfoDraft.hasTextContent();case 25:return i=e.sent,e.next=28,this.contentInfoDraft.hasImageContent();case 28:return r=e.sent,this.analytics.sendContentBlockedEvent({type:n.type}),e.next=32,this._moderationFailDialog(n.contentHash,n.contentContextHash,n.moderation,t,i,r);case 32:e.next=74;break;case 34:return e.prev=34,e.next=37,this.rootService.addLoadingPromise(this._add(n));case 37:n=e.sent,e.next=43;break;case 40:throw e.prev=40,e.t1=e.catch(34),e.t1.message&&this.snackBar.open(e.t1.message),e.t1;case 43:if(!n.moderation||n.moderation.allPassed){e.next=61;break}return e.next=46,this.contentInfoDraft.hasTextContent();case 46:return a=e.sent,e.next=49,this.contentInfoDraft.hasImageContent();case 49:return o=e.sent,this.analytics.sendContentBlockedEvent({type:n.type}),e.next=53,this.contentInfoDraft.clearDraft();case 53:return e.next=55,this._moderationFailDialog(n.contentHash,n.contentContextHash,n.moderation,t,a,o);case 55:return e.next=57,this.streamManager.restartStreamIfAvailable("MingaReportFeed");case 57:return e.next=59,this.streamManager.restartStreamIfAvailable("MingaGlobalReportFeed");case 59:e.next=74;break;case 61:return this.contentHash||this.analytics.sendContentCreatedEvent({type:n.type,success:!0}),this.isMingaContent()&&this.contentEvents.emitPostCreateSuccess({typeString:n.type,date:n.date,endDate:n.endDate}),this.contentEvents.emitContentFeedsUpdate(),t&&this.sendEmailContent(n.contentHash,t),this.contentPreviewMetadata.commentRoleTypes&&this.commentHandler.sendCommentRolesRequest(n.contentHash,this.contentPreviewMetadata.commentRoleTypes),e.next=68,this.contentMetadataService.clearContentMetadata(n.contentHash);case 68:return e.next=70,this.rootService.addLoadingPromise(new Promise((function(e){return setTimeout(e,300)})));case 70:return e.next=72,this.contentInfoDraft.clearDraft();case 72:return e.next=74,this._successDialog();case 74:case"end":return e.stop()}}),e,this,[[15,20],[34,40]])})))}},{key:"getSendEmailOptions",value:function(){return this.contentPreviewMetadata.emailContent?{includeUnregistered:this.contentPreviewMetadata.emailContentIncludeUnregistered,roleTypes:this.contentPreviewMetadata.emailContentRoles}:null}},{key:"sendEmailContent",value:function(e,t){return Object(x.a)(this,void 0,void 0,s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.store.dispatch(Object(T.a)({contentHash:e,options:t}));case 1:case"end":return n.stop()}}),n,this)})))}}]),n}($)).\u0275fac=function(e){return new(e||be)(v["\u0275\u0275directiveInject"](y.a),v["\u0275\u0275directiveInject"](y.g),v["\u0275\u0275directiveInject"](K.a),v["\u0275\u0275directiveInject"](Y.ProgramManager),v["\u0275\u0275directiveInject"](Z.b),v["\u0275\u0275directiveInject"](J.a),v["\u0275\u0275directiveInject"](G.b),v["\u0275\u0275directiveInject"](v.ComponentFactoryResolver),v["\u0275\u0275directiveInject"](v.Injector),v["\u0275\u0275directiveInject"](X.MingaContent),v["\u0275\u0275directiveInject"](ee.MingaGroupContent),v["\u0275\u0275directiveInject"](H.b),v["\u0275\u0275directiveInject"](te.c),v["\u0275\u0275directiveInject"](ne.a),v["\u0275\u0275directiveInject"](ie.a),v["\u0275\u0275directiveInject"](q.b),v["\u0275\u0275directiveInject"](re.g),v["\u0275\u0275directiveInject"](ae.a),v["\u0275\u0275directiveInject"](oe.i),v["\u0275\u0275directiveInject"](se.a))},be.\u0275cmp=v["\u0275\u0275defineComponent"]({type:be,selectors:[["mg-content-draft-preview"]],viewQuery:function(e,t){var n;1&e&&(v["\u0275\u0275viewQuery"](de,3,v.ViewContainerRef),v["\u0275\u0275viewQuery"](ge,3),v["\u0275\u0275viewQuery"](fe,3,v.ElementRef),v["\u0275\u0275viewQuery"](pe,3),v["\u0275\u0275viewQuery"](D.d,1,v.ViewContainerRef),v["\u0275\u0275viewQuery"](D.c,1)),2&e&&(v["\u0275\u0275queryRefresh"](n=v["\u0275\u0275loadQuery"]())&&(t.previewView=n.first),v["\u0275\u0275queryRefresh"](n=v["\u0275\u0275loadQuery"]())&&(t.successOverlayTemplate=n.first),v["\u0275\u0275queryRefresh"](n=v["\u0275\u0275loadQuery"]())&&(t.previewControlsForm=n.first),v["\u0275\u0275queryRefresh"](n=v["\u0275\u0275loadQuery"]())&&(t.expansionAccordion=n.first),v["\u0275\u0275queryRefresh"](n=v["\u0275\u0275loadQuery"]())&&(t.previewExpansionPanels=n),v["\u0275\u0275queryRefresh"](n=v["\u0275\u0275loadQuery"]())&&(t.expansionPanels=n))},features:[v["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:1,consts:[["previewView",""],["class","preview-controls-form",4,"mgFixed"],["successOverlayTemplate",""],[1,"preview-controls-form"],["previewControlsForm",""],[1,"controls-accordion"],["expansionAccordion",""],[3,"expanded","bordered",4,"ngFor","ngForOf"],[3,"expanded"],["matExpansionPanelContent",""],[1,"success-overlay"],[1,"checkmark-wrap"],[1,"mg-bodycopy"]],template:function(e,t){1&e&&(v["\u0275\u0275element"](0,"div",null,0),v["\u0275\u0275template"](2,me,5,1,"form",1),v["\u0275\u0275template"](3,ye,5,0,"ng-template",null,2,v["\u0275\u0275templateRefExtractor"])),2&e&&(v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("mgFixed","bottom"))},directives:[le.a,ue.E,ue.u,ue.v,D.a,h.n,D.c,D.f,D.g,D.d,ce.a],styles:[".preview-controls-form[_ngcontent-%COMP%]{left:0;right:0;padding:0;box-shadow:0 0 16px rgba(0,0,0,.17);background-color:#fff;max-height:100vh;overflow:auto}.controls-accordion[_ngcontent-%COMP%]{display:block;max-width:740px;margin:auto}.success-overlay[_ngcontent-%COMP%]{height:100%;text-align:center;position:relative}.success-overlay[_ngcontent-%COMP%]   .checkmark-wrap[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%)}.mat-expansion-panel.bordered[_ngcontent-%COMP%]{border-top:none}"]}),be),we=o("eJkR"),Oe=o("zkd0"),xe=((Ce=c((function e(){l(this,e)}))).\u0275fac=function(e){return new(e||Ce)},Ce.\u0275mod=v["\u0275\u0275defineNgModule"]({type:Ce}),Ce.\u0275inj=v["\u0275\u0275defineInjector"]({imports:[[Oe.a,we.a,h.c,ue.m,D.b]]}),Ce),De=o("YLbN"),Se=o("SYVq"),Fe=["routerOutlet"],Pe=((ke=function(){function e(t){l(this,e),this.contentBuilder=t}return c(e,[{key:"onOverlayClose",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.contentBuilder.emitDraftExit(),!0));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"onOverlayNext",value:function(){if(this.activeDraftStep)return this.activeDraftStep.nextStep()}},{key:"onOverlayPrevious",value:function(){if(this.activeDraftStep)return this.activeDraftStep.previousStep()}},{key:"hasOverlayNext",value:function(){if(!this.activeDraftStep)return!1;var e=this.activeDraftStep.getNextStep();return!!e&&{disabled:!this.activeDraftStep.nextEnabled,icon:e.icon,text:e.name}}},{key:"hasOverlayPrevious",value:function(){if(!this.activeDraftStep)return!1;var e=this.activeDraftStep.getPreviousStep();return!!e&&{disabled:!this.activeDraftStep.previousEnabled,icon:e.icon,text:e.name}}},{key:"registerOnOverlayNextUpdate",value:function(e){this.onOverlayNextUpdate=e}},{key:"registerOnOverlayPreviousUpdate",value:function(e){this.onOverlayPreviousUpdate=e}},{key:"registerOnOverlayNextDisabled",value:function(e){this.onOverlayNextDisabled=e}},{key:"registerOnOverlayPreviousDisabled",value:function(e){this.onOverlayPreviousDisabled=e}},{key:"registerOnOverlayConfig",value:function(e){this.onOverlayConfig=e}},{key:"registerOnOverlayNavRefresh",value:function(e){this.refreshNav=e,this.initActiveDraftStep()}},{key:"initActiveDraftStep",value:function(){var e=this;this.onOverlayNextUpdate&&this.activeDraftStep&&(this.refreshNav&&this.refreshNav(),this.onOverlayNextUpdate(!0),this.onOverlayPreviousUpdate(!0),this.onOverlayConfig({background:""}),this.onEnableNextStepChange||(this.onEnableNextStepChange=this.activeDraftStep.onEnableNextStepChange.subscribe((function(){e.activeDraftStep&&e.onOverlayNextDisabled(!e.activeDraftStep.nextEnabled)}))),this.onEnablePreviousStepChange||(this.onEnablePreviousStepChange=this.activeDraftStep.onEnablePreviousStepChange.subscribe((function(){e.onOverlayPreviousDisabled(!e.activeDraftStep.previousEnabled)}))),this.onOverlayConfigChange||(this.onOverlayConfigChange=this.activeDraftStep.onOverlayConfigChange.subscribe((function(t){e.onOverlayConfig(t)}))),this._cleanupActiveDraftStep=function(){e.onEnablePreviousStepChange&&e.onEnablePreviousStepChange.unsubscribe(),e.onEnableNextStepChange&&e.onEnableNextStepChange.unsubscribe(),e.onOverlayConfigChange&&e.onOverlayConfigChange.unsubscribe()},this.activeDraftStep.refreshNav=this.refreshNav)}},{key:"onRouterActivate",value:function(e){var t=this;e instanceof $?(this.activeDraftStep=e,setTimeout((function(){return t.initActiveDraftStep()}),0)):delete this.activeDraftStep}},{key:"onRouterDeactivate",value:function(e){delete this.activeDraftStep,this._cleanupActiveDraftStep&&this._cleanupActiveDraftStep()}}]),e}()).\u0275fac=function(e){return new(e||ke)(v["\u0275\u0275directiveInject"](De.a))},ke.\u0275cmp=v["\u0275\u0275defineComponent"]({type:ke,selectors:[["mg-module-content-root"]],viewQuery:function(e,t){var n;1&e&&v["\u0275\u0275viewQuery"](Fe,3),2&e&&v["\u0275\u0275queryRefresh"](n=v["\u0275\u0275loadQuery"]())&&(t.routerOutlet=n.first)},decls:3,vars:1,consts:[["mode","override",3,"component"],[3,"activate","deactivate"],["routerOutlet",""]],template:function(e,t){1&e&&(v["\u0275\u0275element"](0,"mg-legacy-overlay-nav",0),v["\u0275\u0275elementStart"](1,"router-outlet",1,2),v["\u0275\u0275listener"]("activate",(function(e){return t.onRouterActivate(e)}))("deactivate",(function(e){return t.onRouterDeactivate(e)})),v["\u0275\u0275elementEnd"]()),2&e&&v["\u0275\u0275property"]("component",t)},directives:[Se.a,y.l],encapsulation:2}),ke),Ie=o("Q2Ze"),_e=o("i1AJ"),Te=o("8p1t"),Ee=o("QSFu"),Be=o("9sQ6"),je=o("w8an"),Re=["form"];function ze(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"mat-error"),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](2,1,"input.generic.error.tooLong")))}function Ne(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"mat-error"),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](2,1,"input.title.error.required")))}function Ve(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"mat-hint",8),v["\u0275\u0275text"](1),v["\u0275\u0275elementEnd"]()),2&e){var n=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"]("",n.announcementTitle.length," / 255")}}var We,Le,Ue=((We=function(e){g(n,e);var t=p(n);function n(e,i,r,a,o){var s;return l(this,n),(s=t.call(this,e,i,r,a,o)).route=e,s.router=i,s.matDialog=r,s.snackBar=a,s.groupsFacadeService=o,s.announcementTitle="",s.announcementBody="",s}return c(n,[{key:"isAnnouncementTitleDirty",value:function(){return this.contentInfoDraft.isFieldDirty("title")}},{key:"ngAfterViewInit",value:function(){var e=this;this.form&&this.form.statusChanges&&this.form.statusChanges.subscribe((function(t){"VALID"===t?e.enableNextStep():e.disableNextStep()}))}},{key:"getPreviousStep",value:function(){return{name:"Cancel",icon:"close"}}},{key:"previousStep",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.exitDraft();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"getNextStep",value:function(){return{name:"Preview",icon:"forward"}}},{key:"nextStep",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.navigateToPreview();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"mgContentInfoDraftReady",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contentInfoDraft.cloneDraftMergedWithInitialFetchIfNeeded();case 2:t=e.sent,this.announcementBody=t.body,this.announcementTitle=t.title;case 4:case"end":return e.stop()}}),e,this)})))}},{key:"isBodyDirty",value:function(){return this.contentInfoDraft.isFieldDirty("body")}},{key:"onAnnouncementTitleChange",value:function(e){this.contentInfoDraft.saveToDraft("title",e)}},{key:"onAnnouncementBodyChange",value:function(e){this.contentInfoDraft.saveToDraft("body",e)}}]),n}($)).\u0275fac=function(e){return new(e||We)(v["\u0275\u0275directiveInject"](y.a),v["\u0275\u0275directiveInject"](y.g),v["\u0275\u0275directiveInject"](G.b),v["\u0275\u0275directiveInject"](H.b),v["\u0275\u0275directiveInject"](q.b))},We.\u0275cmp=v["\u0275\u0275defineComponent"]({type:We,selectors:[["mg-create-announcement"]],viewQuery:function(e,t){var n;1&e&&v["\u0275\u0275viewQuery"](Re,3),2&e&&v["\u0275\u0275queryRefresh"](n=v["\u0275\u0275loadQuery"]())&&(t.form=n.first)},features:[v["\u0275\u0275InheritDefinitionFeature"]],decls:13,vars:17,consts:[["form","ngForm"],[1,"title-input"],["mgFormField","",1,"form-input-hpadding"],["mgMentionable2","inline","allowedTags","mg-mention","name","announcementTitle","autocomplete","off",3,"required","multiline","maxlength","ngModel","ngModelChange"],["announcementHeadlineInput","ngModel"],[4,"ngIf"],["align","end",4,"ngIf"],["name","announcementBody","placeholder","Tell people a bit more... ",1,"form-input-hpadding",3,"richContent","customToolbar","maxlength","ngModel","ngModelChange"],["align","end"]],template:function(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"form",null,0),v["\u0275\u0275elementStart"](2,"div",1),v["\u0275\u0275elementStart"](3,"mat-form-field",2),v["\u0275\u0275elementStart"](4,"mat-label"),v["\u0275\u0275text"](5,"Headline"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](6,"mg-textarea",3,4),v["\u0275\u0275listener"]("ngModelChange",(function(e){return t.announcementTitle=e}))("ngModelChange",(function(e){return t.onAnnouncementTitleChange(e)})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](8,ze,3,3,"mat-error",5),v["\u0275\u0275template"](9,Ne,3,3,"mat-error",5),v["\u0275\u0275template"](10,Ve,2,1,"mat-hint",6),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](11,"mg-body-input",7),v["\u0275\u0275listener"]("ngModelChange",(function(e){return t.announcementBody=e}))("ngModelChange",(function(e){return t.onAnnouncementBodyChange(e)})),v["\u0275\u0275pipe"](12,"hasPermission"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){var n=v["\u0275\u0275reference"](7);v["\u0275\u0275advance"](6),v["\u0275\u0275classProp"]("mg-draft-dirty",t.isAnnouncementTitleDirty()),v["\u0275\u0275property"]("required",!0)("multiline",!1)("maxlength",255)("ngModel",t.announcementTitle),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",null==n.control||null==n.control.errors?null:n.control.errors.maxlength),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",(null==n.control?null:n.control.touched)&&(null==n.control||null==n.control.errors?null:n.control.errors.required)),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",t.announcementTitle),v["\u0275\u0275advance"](1),v["\u0275\u0275classProp"]("mg-draft-dirty",t.isBodyDirty()),v["\u0275\u0275property"]("richContent",v["\u0275\u0275pipeBind1"](12,15,"CONTENT_HTML_INCLUDE"))("customToolbar",!1)("maxlength",5e3)("ngModel",t.announcementBody)}},directives:[ue.E,ue.u,ue.v,Ie.d,_e.a,Ie.h,Te.a,Ee.a,ue.B,ue.n,ue.t,ue.w,h.o,Be.a,Ie.c,Ie.g],pipes:[je.a,b.d],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");mat-form-field[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{color:#737373}mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-family:Muli,sans-serif;line-height:1.35;box-sizing:border-box}@media (orientation:landscape){mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-size:3.1400966184vh}}@media (orientation:portrait){mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-size:3.1400966184vw}}@media (orientation:landscape) and (max-height:414px){mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-size:13px}}@media (orientation:portrait) and (max-width:414px){mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-size:13px}}@media (min-width:445.8461538462px){mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-size:14px}}.form-input-hpadding[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px}.pseudo-mg-input[_ngcontent-%COMP%]{color:#737373;border-bottom:1px solid #ccc}.pseudo-mg-input[_ngcontent-%COMP%]     .textarea-placeholder{color:#2f2f2f}.input-margin[_ngcontent-%COMP%]{margin:8px}.input-group[_ngcontent-%COMP%]{margin:16px;--mg-form-field-margin:4px 0}.input-group.vmargin-only[_ngcontent-%COMP%]{margin:16px 0}.input-group[_ngcontent-%COMP%] > .input-group[_ngcontent-%COMP%]{padding:0;margin:16px 0}mat-form-field[mgFormField][_ngcontent-%COMP%] + .input-group[_ngcontent-%COMP%]{margin-top:0}.input-hpadding[_ngcontent-%COMP%]{padding-left:14px;padding-right:14px}.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-family:Muli,sans-serif;font-weight:700;line-height:1.35}@media (orientation:landscape){.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:3.8647342995vh}}@media (orientation:portrait){.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:3.8647342995vw}}@media (orientation:landscape) and (max-height:414px){.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:16px}}@media (orientation:portrait) and (max-width:414px){.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:16px}}@media (min-width:439.875px){.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:17px}}.mg-draft-dirty[_ngcontent-%COMP%]{color:#036}.text-input[_ngcontent-%COMP%]{padding:16px;border-top:1px solid #e2e2e2}.text-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border:none;color:#737373;font-size:16px;font-weight:400;font-family:Muli,sans-serif}.text-input[_ngcontent-%COMP%]   input.mg-draft-dirty[_ngcontent-%COMP%]{color:#036}.text-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.input-padding[_ngcontent-%COMP%]{padding:16px}.body-input[_ngcontent-%COMP%]{border-top:1px solid #e2e2e2;color:#737373}.body-input.mg-draft-dirty[_ngcontent-%COMP%], .mg-label[_ngcontent-%COMP%]{color:#2f2f2f}.mg-label[_ngcontent-%COMP%]{margin-top:8px}mat-slide-toggle.toggle-with-subtext[_ngcontent-%COMP%]{margin-left:0;margin-bottom:14px}mat-slide-toggle.toggle-with-subtext[_ngcontent-%COMP%]:first-child{margin-top:0;margin-bottom:14px}mat-slide-toggle.toggle-with-subtext[_ngcontent-%COMP%]     .mat-slide-toggle-label{align-items:flex-start}mat-slide-toggle.toggle-with-subtext[_ngcontent-%COMP%]     .mat-slide-toggle-label .mat-slide-toggle-content{text-align:left;padding-bottom:.5em}mat-slide-toggle.toggle-with-subtext[_ngcontent-%COMP%]     .mat-slide-toggle-label .mat-slide-toggle-content .toggle-subtext{display:block;white-space:normal;margin-top:1em}form[_ngcontent-%COMP%]{padding-top:16px}']}),We),Ae=o("EBcp"),Ge=o("HxU+"),He=o("ppIK"),qe=o("+/Hu"),$e=o("Ogcz"),Qe=((Le=c((function e(){l(this,e)}))).\u0275fac=function(e){return new(e||Le)},Le.\u0275mod=v["\u0275\u0275defineNgModule"]({type:Le}),Le.\u0275inj=v["\u0275\u0275defineInjector"]({imports:[[He.a,Ae.a,$e.b,Ge.a,te.b,qe.a,h.c,ue.m,Ie.f,b.c]]}),Le);function Ke(e,t){var n=Object.assign(Object.assign({},t),{contentHash:e.getContentHash(),contentContextHash:e.getContentContextHash()});delete n.moderation;var i=e.getModerationResult();return i&&(n.moderation=V.ModerationResultMapper.toIModerationResult(i)),n}var Ye,Ze,Je=o("6sqc"),Xe=o("4doY"),et=o("wXoJ"),tt=new Set,nt=new Map,it=function(){function e(t,n){if(l(this,e),this.userStorage=t,this._storagePrefix=n,!n)throw new Error("ContentInfoDraft storage key may not be empty");if(tt.has(n))throw new Error("ContentInfoDraft storage key '".concat(n,"' already created. Cannot create multiple with same storage key. Check to make sure you dont have an injectable service as a provider in multiple sibbling modules."));tt.add(n)}return c(e,[{key:"storagePrefix",get:function(){return this._storagePrefix}},{key:"ensureInfoDraftInstance",value:function(e){var t=this.storagePrefix+e;return nt.has(t)||nt.set(t,this.createInfoDraftInstance(e)),nt.get(t)}}]),e}(),rt=o("orC8"),at=o("PmRf"),ot=o("JF7H"),st=((Ye=function(e){g(n,e);var t=p(n);function n(e,i,r,a,o,s){var u;return l(this,n),(u=t.call(this,e,"AnnouncementContent")).componentResolver=i,u.injector=r,u.announcement=a,u.auth=o,u.permissions=s,u}return c(n,[{key:"createInfoDraftInstance",value:function(e){return new lt(this.userStorage,this.componentResolver,this.auth,this.injector,this.announcement,this.storagePrefix,e,this.permissions)}}]),n}(it)).\u0275fac=function(e){return new(e||Ye)(v["\u0275\u0275inject"](rt.a),v["\u0275\u0275inject"](v.ComponentFactoryResolver),v["\u0275\u0275inject"](v.Injector),v["\u0275\u0275inject"](at.Announcement),v["\u0275\u0275inject"](ot.a),v["\u0275\u0275inject"](te.c))},Ye.\u0275prov=v["\u0275\u0275defineInjectable"]({token:Ye,factory:Ye.\u0275fac}),Ye),lt=function(e){g(n,e);var t=p(n);function n(e,i,r,a,o,s,u,c){var d;return l(this,n),(d=t.call(this,e,c,s,u)).auth=r,d.injector=a,d.announcement=o,d.permissions=c,d.componentFactory=i.resolveComponentFactory(C.a),d}return c(n,[{key:"type",get:function(){return"announcement"}},{key:"contentType",get:function(){return"ANNOUNCEMENT"}},{key:"fetchInitialDraftInfo",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.contentHash){e.next=2;break}return e.abrupt("return");case 2:return(t=new Xe.ContentInfoQuery).setContentHash(this.contentHash),e.next=6,this.announcement.getInfo(t);case 6:n=e.sent,this.setInitialDraft({body:n.getBody(),title:n.getTitle()});case 8:case"end":return e.stop()}}),e,this)})))}},{key:"hasImageContent",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})))}},{key:"hasTextContent",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDraft();case 2:return t=e.sent,e.abrupt("return",!!t.body||!!t.title);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"createEmptyDraft",value:function(){return{title:"",body:""}}},{key:"submitDraftNew",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cloneDraftMergedWithInitialFetchIfNeeded();case 2:return t=e.sent,(n=new Je.AnnouncementInfo).setBody(t.body),n.setTitle(t.title),e.t0=Ke,e.next=9,this.announcement.new(n);case 9:return e.t1=e.sent,e.t2={type:this.type},e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 12:case"end":return e.stop()}}),e,this)})))}},{key:"submitDraftUpdate",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t,n,i,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initialDraftDifference();case 2:return t=e.sent,(n=new Je.DeltaAnnouncementInfo).setContentHash(this.contentHash),"body"in t&&((i=new j.StringDelta).setNewString(t.body),n.setBody(i)),"title"in t&&((r=new j.StringDelta).setNewString(t.title),n.setTitle(r)),e.t0=Ke,e.next=9,this.announcement.update(n);case 9:return e.t1=e.sent,e.t2={type:this.type},e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 12:case"end":return e.stop()}}),e,this)})))}},{key:"createPreviewComponent",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.componentFactory.create(this.injector),e.next=3,this.updatePreviewComponent(t);case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"updatePreviewComponent",value:function(e){return Object(x.a)(this,void 0,void 0,s().mark((function t(){var n,i;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.cloneDraftMergedWithInitialFetchIfNeeded();case 2:return n=t.sent,i=Object(et.b)(n.body),e.instance.disableActions=!1,e.instance.contentHash="",e.instance.contextHash="",t.next=9,this.bodyAsPreviewHtml(i);case 9:t.t0=t.sent,t.t1=n.title,e.instance.content={body:t.t0,title:t.t1};case 12:case"end":return t.stop()}}),t,this)})))}}]),n}(A),ut=function(){function e(){l(this,e)}return c(e,[{key:"resolve",value:function(e,t){return Object(x.a)(this,void 0,void 0,s().mark((function t(){var n,i,r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.params.contentHash)||"string"==typeof n){t.next=3;break}throw new Error("Wrong type for 'contentHash' param in ContentInfoDraftServiceResolver. Must be string");case 3:r=null,t.t0=e.url[0].path,t.next="m"===t.t0?7:"p"===t.t0?9:10;break;case 7:return i="minga",t.abrupt("break",10);case 9:i="program";case 10:return t.abrupt("return",(i?(r={type:i},"program"===i&&(r.hash=e.params.programHash)):r=null,this.resolveFromContentHash(n||"",r)));case 11:case"end":return t.stop()}}),t,this)})))}}]),e}(),ct=((Ze=function(e){g(n,e);var t=p(n);function n(e){var i;return l(this,n),(i=t.call(this)).announcementInfoDraftService=e,i}return c(n,[{key:"resolveFromContentHash",value:function(e){return this.announcementInfoDraftService.ensureInfoDraftInstance(e)}}]),n}(ut)).\u0275fac=function(e){return new(e||Ze)(v["\u0275\u0275inject"](st))},Ze.\u0275prov=v["\u0275\u0275defineInjectable"]({token:Ze,factory:Ze.\u0275fac}),Ze),dt=o("jaBy"),gt=o("oAJy").createInstance({name:"mgBannerHeadlineInfo"});function ft(e){return Object(x.a)(this,void 0,void 0,s().mark((function t(){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=gt.getItem(e)){t.next=3;break}throw new Error("call storeBannerHeadlineOptions before calling loadBannerHeadlineOptions");case 3:return t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))}function pt(e,t){return Object(x.a)(this,void 0,void 0,s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,gt.setItem(e,t);case 2:case"end":return n.stop()}}),n)})))}var ht=o("TNy8"),vt=o("VE1M"),mt=o("quSY"),yt=o("sK7p"),bt=o("vaq4"),Ct=o("Fudl"),kt=o("Kyc/"),Mt=o("nbn/"),wt=o("VDRc"),Ot=o("T0RT"),xt=o("jMqV"),Dt=o("e6WT"),St=o("ZTz/"),Ft=o("ura0"),Pt=o("iBVM"),It=o("9PXH"),_t=o("rs8O"),Tt=o("UhP/"),Et=o("ifhk"),Bt=["imageUploadControl"],jt=["form"],Rt=["titleField"],zt=["bannerPreviewWrap"],Nt=["ticketPriceInput"];function Vt(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",49,50),v["\u0275\u0275elementStart"](2,"mg-file-upload",51,52),v["\u0275\u0275listener"]("ngModelChange",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().eventImageAsset=e}))("mgModelStatusChanges",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().onFileUploadStatusChange(e)}))("previewUrlOutput",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().customImagePreviewUrl=e})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){var i=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("previewAspectRatio",9/16)("previewSize",600)("file",i.customImage[0])("ngModel",i.eventImageAsset)}}function Wt(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"mat-error"),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](2,1,"input.generic.error.tooLong")))}function Lt(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"mat-error"),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](2,1,"input.title.error.required")))}function Ut(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"mat-hint",53),v["\u0275\u0275text"](1),v["\u0275\u0275elementEnd"]()),2&e){var n=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate2"]("",n.eventTitle.length," / ",n.titleMaxLength,"")}}function At(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"mat-error",54),v["\u0275\u0275elementStart"](1,"strong"),v["\u0275\u0275elementStart"](2,"u"),v["\u0275\u0275text"](3,"Banner selection is required."),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]())}function Gt(e,t){1&e&&v["\u0275\u0275element"](0,"div",37)}var Ht=function(){return{value:"Ticket URL"}};function qt(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"mat-error"),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind2"](2,1,"input.generic.error.required",v["\u0275\u0275pureFunction0"](4,Ht))," "))}function $t(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"mat-error"),v["\u0275\u0275text"](1," Instructions are required "),v["\u0275\u0275elementEnd"]())}function Qt(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"mat-hint"),v["\u0275\u0275text"](1),v["\u0275\u0275elementEnd"]()),2&e){var n=v["\u0275\u0275nextContext"](2);v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"](" ",n.ticketInfo.length," / 100 ")}}function Kt(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"mat-error"),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind2"](2,1,"input.generic.error.required",v["\u0275\u0275pureFunction0"](4,Ht))," "))}function Yt(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275elementStart"](1,"div",55),v["\u0275\u0275elementStart"](2,"div",56),v["\u0275\u0275listener"]("click",(function(){v["\u0275\u0275restoreView"](n);var e=v["\u0275\u0275nextContext"]();return e.enableTicketUrl=!e.enableTicketUrl})),v["\u0275\u0275text"](3," Buy tickets online? "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"div",26),v["\u0275\u0275listener"]("click",(function(){v["\u0275\u0275restoreView"](n);var e=v["\u0275\u0275nextContext"]();return e.enableTicketUrl=!e.enableTicketUrl})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](5,"mat-slide-toggle",57),v["\u0275\u0275listener"]("ngModelChange",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().enableTicketUrl=e})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](6,"div",28),v["\u0275\u0275elementStart"](7,"mat-form-field",29),v["\u0275\u0275elementStart"](8,"mat-label"),v["\u0275\u0275text"](9,"URL"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](10,"input",58,59),v["\u0275\u0275listener"]("ngModelChange",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().ticketUrl=e}))("ngModelChange",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().onTicketUrlChange(e)})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](12,qt,3,5,"mat-error",8),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](13,"div",55),v["\u0275\u0275elementStart"](14,"div",56),v["\u0275\u0275listener"]("click",(function(){v["\u0275\u0275restoreView"](n);var e=v["\u0275\u0275nextContext"]();return e.enableTicketInfo=!e.enableTicketInfo})),v["\u0275\u0275text"](15," Buy tickets in person? "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](16,"div",26),v["\u0275\u0275listener"]("click",(function(){v["\u0275\u0275restoreView"](n);var e=v["\u0275\u0275nextContext"]();return e.enableTicketInfo=!e.enableTicketInfo})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](17,"mat-slide-toggle",60),v["\u0275\u0275listener"]("ngModelChange",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().enableTicketInfo=e})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](18,"div",28),v["\u0275\u0275elementStart"](19,"mat-form-field",29),v["\u0275\u0275elementStart"](20,"mat-label"),v["\u0275\u0275text"](21,"Instructions (100 character count)"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](22,"mg-textarea",61,62),v["\u0275\u0275listener"]("ngModelChange",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().ticketInfo=e}))("ngModelChange",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().onTicketInfoChange(e)})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](24,$t,2,0,"mat-error",8),v["\u0275\u0275template"](25,Qt,2,1,"mat-hint",8),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](26,"mat-form-field",29),v["\u0275\u0275elementStart"](27,"span",63),v["\u0275\u0275text"](28,"$\xa0"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](29,"mat-label"),v["\u0275\u0275text"](30,"Ticket Price"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](31,"input",64,65),v["\u0275\u0275listener"]("ngModelChange",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().onTicketPriceChange(e)})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](33,Kt,3,5,"mat-error",8),v["\u0275\u0275elementEnd"](),v["\u0275\u0275element"](34,"div",37),v["\u0275\u0275elementContainerEnd"]()}if(2&e){var i=v["\u0275\u0275reference"](11),r=v["\u0275\u0275reference"](23),a=v["\u0275\u0275reference"](32),o=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](5),v["\u0275\u0275property"]("ngModel",o.enableTicketUrl),v["\u0275\u0275advance"](1),v["\u0275\u0275classProp"]("expand",o.enableTicketUrl),v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("ngModel",o.ticketUrl)("required",o.enableTicketUrl),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",null==i.control||null==i.control.errors?null:i.control.errors.required),v["\u0275\u0275advance"](5),v["\u0275\u0275property"]("ngModel",o.enableTicketInfo),v["\u0275\u0275advance"](1),v["\u0275\u0275classProp"]("expand",o.enableTicketInfo),v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("ngModel",o.ticketInfo)("required",o.enableTicketInfo),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",(null==r.control?null:r.control.touched)&&(null==r.control||null==r.control.errors?null:r.control.errors.required)),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",o.ticketInfo.length),v["\u0275\u0275advance"](6),v["\u0275\u0275property"]("ngModel",o.ticketPriceString),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",null==a.control||null==a.control.errors?null:a.control.errors.required)}}function Zt(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"mat-error"),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](2,1,"input.generic.error.tooLong")))}function Jt(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"mat-hint",53),v["\u0275\u0275text"](1),v["\u0275\u0275elementEnd"]()),2&e){var n=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"]("",n.eventHostedBy.length," / 255")}}function Xt(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"mat-error"),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](2,1,"input.generic.error.tooLong")))}function en(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"mat-hint",53),v["\u0275\u0275text"](1),v["\u0275\u0275elementEnd"]()),2&e){var n=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"]("",n.eventLocation.length," / 255")}}function tn(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"mg-points-selector",66),v["\u0275\u0275listener"]("pointsClick",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().onPointsChange(e)})),v["\u0275\u0275elementEnd"]()}if(2&e){var i=v["\u0275\u0275nextContext"]();v["\u0275\u0275property"]("title","Points awarded to people who attend this event")("selectedPoints",i.points)}}function nn(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"mat-option",67),v["\u0275\u0275element"](1,"span",68),v["\u0275\u0275text"](2),v["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=v["\u0275\u0275nextContext"]();v["\u0275\u0275property"]("value",n),v["\u0275\u0275advance"](1),v["\u0275\u0275styleProp"]("background-color",i.getEventCategoryColor(n)),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"]("",i.getEventCategoryPrettyString(n)," ")}}function rn(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"mat-error"),v["\u0275\u0275text"](1,"Event category is required"),v["\u0275\u0275elementEnd"]())}function an(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"mg-icon",76),v["\u0275\u0275listener"]("click",(function(){v["\u0275\u0275restoreView"](n);var e=v["\u0275\u0275nextContext"]().index;return v["\u0275\u0275nextContext"]().removeEventDay(e)})),v["\u0275\u0275text"](1,"minus-icon-o"),v["\u0275\u0275elementEnd"]()}}function on(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"mat-expansion-panel",69),v["\u0275\u0275elementStart"](1,"mat-expansion-panel-header"),v["\u0275\u0275elementStart"](2,"mat-panel-title",42),v["\u0275\u0275elementStart"](3,"span"),v["\u0275\u0275text"](4),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](5,an,2,0,"mg-icon",70),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](6,"div",43),v["\u0275\u0275elementStart"](7,"div",71),v["\u0275\u0275elementStart"](8,"div",72),v["\u0275\u0275listener"]("click",(function(){v["\u0275\u0275restoreView"](n);var e=t.index;return v["\u0275\u0275nextContext"]().toggleAllDay(e)})),v["\u0275\u0275text"](9," All day event? "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](10,"div",26),v["\u0275\u0275listener"]("click",(function(){v["\u0275\u0275restoreView"](n);var e=t.index;return v["\u0275\u0275nextContext"]().toggleAllDay(e)})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](11,"mat-slide-toggle",73),v["\u0275\u0275listener"]("ngModelChange",(function(e){return t.$implicit.allDay=e}))("ngModelChange",(function(e){v["\u0275\u0275restoreView"](n);var i=t.index;return v["\u0275\u0275nextContext"]().onAllDayChange(i,e)})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](12,"mg-date-time-picker",74),v["\u0275\u0275listener"]("ngModelChange",(function(e){return t.$implicit.startDate=e}))("ngModelChange",(function(e){v["\u0275\u0275restoreView"](n);var i=t.index;return v["\u0275\u0275nextContext"]().onStartDateChange(i,e)})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](13,"mg-date-time-picker",75),v["\u0275\u0275listener"]("ngModelChange",(function(e){return t.$implicit.endDate=e}))("ngModelChange",(function(e){v["\u0275\u0275restoreView"](n);var i=t.index;return v["\u0275\u0275nextContext"]().onEndDateChange(i,e)})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=t.index,a=v["\u0275\u0275nextContext"]();v["\u0275\u0275property"]("ngClass.xs","mobile")("expanded",a.showLatestAddedEventDay?r==a.eventDays.length-1:0==r),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngClass",(null==a.eventDays[r]?null:a.eventDays[r].error)&&"required-error"),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate2"]("DAY ",r+1," ",null!=a.eventDays[r]&&a.eventDays[r].error?"(Dates missing or invalid)":"",""),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",r>0&&!a.contentHash),v["\u0275\u0275advance"](6),v["\u0275\u0275propertyInterpolate1"]("name","allDay_",r,""),v["\u0275\u0275property"]("ngModel",i.allDay),v["\u0275\u0275advance"](1),v["\u0275\u0275propertyInterpolate1"]("name","eventStartDate_",r,""),v["\u0275\u0275property"]("required",!0)("stackInputs",a.mobileInputs)("ngModel",i.startDate)("dateOnly",i.allDay)("dateError",null==i?null:i.error),v["\u0275\u0275advance"](1),v["\u0275\u0275propertyInterpolate1"]("name","eventEndDate_",r,""),v["\u0275\u0275property"]("required",!i.allDay)("stackInputs",a.mobileInputs)("minDate",i.startDate)("ngModel",i.endDate)("canReset",!0)("dateOnly",i.allDay)}}function sn(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",77),v["\u0275\u0275listener"]("click",(function(){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().addEventDay()})),v["\u0275\u0275elementStart"](1,"mg-icon"),v["\u0275\u0275text"](2,"post"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](3,"span"),v["\u0275\u0275text"](4,"Add Additional day"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}}var ln,un,cn,dn,gn,fn,pn,hn,vn,mn=function(){return{standalone:!0}},yn=((ln=function(e){g(n,e);var t=p(n);function n(e,i,r,a,o,s,u){var c;return l(this,n),(c=t.call(this,e,i,r,a,o)).route=e,c.router=i,c.matDialog=r,c.snackBar=a,c.groupsFacadeService=o,c.eventService=s,c.pointsManager=u,c.MAX_TICKET_PRICE=99999999999.99,c.bannerSearchQuery="",c.titleMaxLength=70,c.eventCategoryKeys=Object.keys(vt.EventCategoryEnum),c.BannerLibrary=ht.BannerLibrary,c._imageUploadControlSub=null,c.filterCategories=[],c.selectedBannerHash="",c.eventTitle="",c.eventBody="",c.eventImageAsset="",c.eventLocation="",c.eventHostedBy="",c.ticketed=!1,c.enableTicketUrl=!1,c.enableTicketInfo=!1,c.ticketUrl="",c.ticketInfo="",c.ticketPriceString="",c.ticketPrice=0,c.bannerHeadlineOptions=null,c._bannerSelectionActive=!0,c.draftReadyFinish=!1,c.eventCode="",c.allowGoing=!0,c.enableEventCode=!1,c.mobileInputs=!1,c.points=0,c.bannerCategories=[],c.eventDays=[{allDay:!1}],c.showLatestAddedEventDay=!1,c.debounceEventTitle="",c.customImage=[],c.canAllocateContentPoints$=c.pointsManager.getCanCurrentUserAllocatePointsObs(),c}return c(n,[{key:"imageUploadControl",set:function(e){var t=this;if(this._imageUploadControlSub&&(this._imageUploadControlSub.unsubscribe(),this._imageUploadControlSub=null),e){var n=new mt.a;n.add(e.statusChanges.subscribe((function(e){"VALID"===e&&t.hasCustomImage&&t.saveEventImage()}))),this._imageUploadControlSub=n}}},{key:"onResize",value:function(e){this.initInputSizes()}},{key:"hasCustomImage",get:function(){return this.customImage&&this.customImage.length>0}},{key:"bannerSelectionActive",get:function(){return this._bannerSelectionActive},set:function(e){this._bannerSelectionActive=e,this.checkStatus()}},{key:"bannerPreviewWrapOffsetTop",get:function(){return this.bannerPreviewWrap?this.bannerPreviewWrap.nativeElement.offsetTop:0}},{key:"bannerPreviewWrapHeight",get:function(){return this.bannerPreviewWrap?this.bannerPreviewWrap.nativeElement.clientHeight:0}},{key:"bannerPreviewWrapWidth",get:function(){return this.bannerPreviewWrap?this.bannerPreviewWrap.nativeElement.clientWidth:0}},{key:"showBannerPreview",get:function(){return this.eventImageAsset||this.customImage.length>0}},{key:"ngOnInit",value:function(){this.initInputSizes()}},{key:"initInputSizes",value:function(){var e=window.innerWidth;this.mobileInputs=e<415}},{key:"_getEventCategoryKey",value:function(e){return Object(I.$enum)(vt.EventCategoryEnum).asValueOrDefault(e,vt.EventCategoryEnum.OTHER)}},{key:"getEventCategoryColor",value:function(e){var t=this._getEventCategoryKey(e);return Object(vt.eventCategoryColor)(t)}},{key:"getEventCategoryPrettyString",value:function(e){var t=this._getEventCategoryKey(e);return Object(vt.eventCategoryPrettyText)(t)}},{key:"onCustomImageChange",value:function(e){e&&e.length>0&&(this.selectedBannerHash="",this.selectedBanner=null,this.eventImageAsset="",this.bannerHeadlineOptions=null,this.bannerSelectionActive=!1)}},{key:"onBannerSelected",value:function(e){e&&(this.selectedBanner=e,this.bannerSelectionActive=!1,this.bannerHeadlineOptions=e.headlineOptions,this.eventImageAsset=Object(dt.c)(e.image),this.titleInput&&this.titleInput.focus(),this.saveEventImage())}},{key:"ngAfterViewInit",value:function(){var e=this;this.form.statusChanges.subscribe((function(){e.checkStatus()}))}},{key:"checkStatus",value:function(){this.nextStepEnabled?this.enableNextStep():this.disableNextStep(),this.refreshNav&&this.refreshNav()}},{key:"nextStepEnabled",get:function(){return!0}},{key:"validPrice",get:function(){return!(this.ticketPrice&&this.ticketPrice>this.MAX_TICKET_PRICE)}},{key:"getPreviousStep",value:function(){return{name:"Cancel",icon:"close"}}},{key:"previousStep",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.exitDraft();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"getNextStep",value:function(){return{name:"Preview",icon:"forward"}}},{key:"validateForm",value:function(){var e,t,n,i=this.form.controls,a=!0;this.eventCategory||(i.eventCategory.markAsTouched(),a=!1),this.eventTitle||(i.eventTitle.markAsTouched(),a=!1),this.validPrice||(a=!1),i.eventBanner.value||(null===(e=i.customImageUpload)||void 0===e?void 0:e.value)||(i.eventBanner.markAsTouched(),a=!1);var o,s=0,l=r(this.eventDays);try{for(l.s();!(o=l.n()).done;){var u=o.value;u.allDay&&u.startDate?u.error=!1:(u.startDate||(u.error=!0,i["eventStartDate_".concat(s)].markAsTouched()),u.endDate||(u.error=!0,i["eventEndDate_".concat(s)].markAsTouched()),(null===(t=u.startDate)||void 0===t?void 0:t.getTime())>=(null===(n=u.endDate)||void 0===n?void 0:n.getTime())||this._hasDuplicateEventDays()?(u.error=!0,a=!1):u.startDate&&u.endDate&&(u.error=!1),s++)}}catch(c){l.e(c)}finally{l.f()}return this.enableEventCode&&!this.eventCode&&(i.eventCode.markAsTouched(),a=!1),"VALID"!==this.form.status&&(a=!1),a}},{key:"nextStep",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.validateForm(),!e.t0){e.next=4;break}return e.next=4,this.navigateToPreview();case 4:case"end":return e.stop()}}),e,this)})))}},{key:"mgContentInfoDraftReady",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t,n,i,r,a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contentInfoDraft.cloneDraftMergedWithInitialFetchIfNeeded();case 2:if(t=e.sent,this.eventTitle=t.title,this.debounceEventTitle=t.title,this.eventBody=t.body,this.eventImageAsset=t.bannerAsset,this.allowGoing=t.allowGoing,this.eventCode=t.eventCode,this.enableEventCode=!!t.eventCode,this.eventHostedBy=t.hostedBy,this.eventLocation=t.location,this.selectedBannerHash=t.banner,this.points=t.points,this.ticketUrl=t.ticketUrl,this.ticketInfo=t.ticketInfo,this.ticketed=t.hasTickets,this.enableTicketInfo=!!t.ticketInfo,this.enableTicketUrl=!!t.ticketUrl,t.ticketPrice&&(this.ticketPrice=t.ticketPrice,n=new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),this.ticketPriceString=n.format(this.ticketPrice)),t.eventCategory&&(this.eventCategory=this._getEventCategoryKey(t.eventCategory)),this.eventDays=[],i={allDay:t.allDay},t.startDate&&(i.startDate=new Date(t.startDate)),t.endDate&&(i.endDate=new Date(t.endDate)),this.eventDays.push(i),!t.additionalDates.length){e.next=16;break}r=0;case 8:if(!(r<t.additionalDates.length)){e.next=16;break}if(0!=r){e.next=11;break}return e.abrupt("continue",13);case 11:a=t.additionalDates[r],o={allDay:a.allDay},a.startDate&&(o.startDate=new Date(a.startDate)),a.endDate&&(o.endDate=new Date(a.endDate)),a.contentId&&(o.contentId=a.contentId),this.eventDays.push(o);case 13:r++,e.next=8;break;case 16:if(!t.bannerHeadlineOptions){e.next=22;break}return this.bannerHeadlineOptions=t.bannerHeadlineOptions,e.next=20,pt(this.eventImageAsset,this.bannerHeadlineOptions);case 20:e.next=27;break;case 22:if(e.t0=this.eventImageAsset,!e.t0){e.next=27;break}return e.next=26,ft(this.eventImageAsset);case 26:this.bannerHeadlineOptions=e.sent;case 27:this.draftReadyFinish=!0;case 28:case"end":return e.stop()}}),e,this)})))}},{key:"categoryToggle",value:function(e,t){if(t)this.filterCategories.push(e);else{var n=this.filterCategories.indexOf(e);n>-1&&this.filterCategories.splice(n,1)}}},{key:"onEventTitleChange",value:function(e){var t=this;this.contentInfoDraft.saveToDraft("title",e),clearTimeout(this.debounceEventTitleTimeout),this.debounceEventTitleTimeout=setTimeout((function(){t.debounceEventTitle=t.eventTitle}),600)}},{key:"toggleTicked",value:function(){this.ticketed=!this.ticketed,this.contentInfoDraft.saveToDraft("hasTickets",this.ticketed),this.ticketed||(this.ticketUrl="",this.onTicketUrlChange(this.ticketUrl))}},{key:"toggleAllDay",value:function(e){this.eventDays.length>e&&(this.eventDays[e].allDay=!this.eventDays[e].allDay)}},{key:"formatPrice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.ticketPriceString;if((e=(e=e.replace(/[^\d]/gim,"")).replace(/^0+(?!$)/gim,"")).length){var t=e.replace(".",""),n=t.substring(-2,t.length-2);n.length||(n="0");var i=t.substring(t.length-2,t.length);this.ticketPriceString=n+"."+i}else this.ticketPriceString="";this.ticketPriceInput&&this.ticketPriceInput.value!=this.ticketPriceString&&this.ticketPriceInput.control.setValue(this.ticketPriceString)}},{key:"onEventHostedByChange",value:function(e){this.contentInfoDraft.saveToDraft("hostedBy",e)}},{key:"onEventLocationChange",value:function(e){this.contentInfoDraft.saveToDraft("location",e)}},{key:"onTicketUrlChange",value:function(e){this.contentInfoDraft.saveToDraft("ticketUrl",e)}},{key:"onTicketInfoChange",value:function(e){this.contentInfoDraft.saveToDraft("ticketInfo",e)}},{key:"onTicketPriceChange",value:function(e){this.formatPrice(e),this.ticketPriceString&&(this.ticketPrice=parseFloat(this.ticketPriceString),this.validPrice?this.contentInfoDraft.saveToDraft("ticketPrice",this.ticketPrice):this.snackBar.open("Too high a ticket price, use a lower price and try again."))}},{key:"onEventCategoryChange",value:function(e){this.contentInfoDraft.saveToDraft("eventCategory",e)}},{key:"onEventBodyChange",value:function(e){this.contentInfoDraft.saveToDraft("body",e)}},{key:"addEventDay",value:function(){var e,t,n={allDay:!1};(null===(e=this.eventDays[0])||void 0===e?void 0:e.startDate)&&(n.startDate=null===(t=this.eventDays[0])||void 0===t?void 0:t.startDate),this.eventDays.push(n),this.showLatestAddedEventDay=!0}},{key:"removeEventDay",value:function(e){this.eventDays[e]&&this.eventDays.splice(e,1)}},{key:"onStartDateChange",value:function(e,t){var n=this.eventDays[e];n&&n.startDate&&(n.allDay&&(t.setHours(0),t.setMinutes(0)),0==e?this.contentInfoDraft.saveToDraft("startDate",t.getTime()):this.contentInfoDraft.saveToDraft("additionalDates",this.eventDays),!n.endDate||n.endDate&&n.startDate>=n.endDate?this._updateEndDateFromStart(e):n.allDay?this._updateEndDateToEndofTheDay(e):this.checkStatus())}},{key:"_hasDuplicateEventDays",value:function(){for(var e,t,n,i,r=0;r<this.eventDays.length;r++)for(var a=this.eventDays[r],o=r+1;o<this.eventDays.length;o++){var s=this.eventDays[o],l=null===(e=a.startDate)||void 0===e?void 0:e.getTime(),u=null===(t=s.startDate)||void 0===t?void 0:t.getTime(),c=null===(n=a.endDate)||void 0===n?void 0:n.getTime(),d=null===(i=s.endDate)||void 0===i?void 0:i.getTime();if(l==u&&c==d)return!0}return!1}},{key:"onEndDateChange",value:function(e,t){if(t){var n=this.eventDays[e];n&&t&&(n.allDay&&(t.setDate(t.getDate()+1),t.setHours(0),t.setMinutes(0)),this.eventDays[e].endDate=t,n.startDate&&t.getTime()<=n.startDate.getTime()&&this.snackBar.open("The end date for this event must be after the start date."),this._hasDuplicateEventDays()&&this.snackBar.open("Cannot have matching start and end times for recurring events."),0==e?this.contentInfoDraft.saveToDraft("endDate",t.getTime()):this.contentInfoDraft.saveToDraft("additionalDates",this.eventDays),this.checkStatus())}}},{key:"onAllowGoingChange",value:function(e){this.contentInfoDraft.saveToDraft("allowGoing",e)}},{key:"onEnableEventCodeChange",value:function(){this.enableEventCode||(this.eventCode="",this.onEventCodeChange(""))}},{key:"onEventCodeChange",value:function(e){this.contentInfoDraft.saveToDraft("eventCode",e)}},{key:"onAllDayChange",value:function(e,t){this.eventDays[e]&&(this.eventDays[e].allDay=t,0==e?this.contentInfoDraft.saveToDraft("allDay",t):this.contentInfoDraft.saveToDraft("additionalDates",this.eventDays),this.eventDays[e].startDate&&this.onStartDateChange(e,this.eventDays[e].startDate),this._updateEndDateFromStart(e))}},{key:"onPointsChange",value:function(e){this.contentInfoDraft.saveToDraft("points",e)}},{key:"saveEventImage",value:function(){pt(this.eventImageAsset,this.bannerHeadlineOptions),this.contentInfoDraft.saveToDraft("bannerHeadlineOptions",this.bannerHeadlineOptions),this.contentInfoDraft.saveToDraft("banner",this.selectedBannerHash),this.contentInfoDraft.saveToDraft("bannerAsset",this.eventImageAsset)}},{key:"onFileUploadStatusChange",value:function(e){"VALID"===e&&this.saveEventImage()}},{key:"isTitleDirty",value:function(){return this.contentInfoDraft.isFieldDirty("title")}},{key:"isLocationDirty",value:function(){return this.contentInfoDraft.isFieldDirty("location")}},{key:"isHostedByDirty",value:function(){return this.contentInfoDraft.isFieldDirty("hostedBy")}},{key:"isRecurringEditOrCreate",value:function(){return this.eventDays.length>1&&this.contentHash||!this.contentHash}},{key:"_updateEndDateFromStart",value:function(e){var t;(null===(t=this.eventDays[e])||void 0===t?void 0:t.startDate)&&(this.eventDays[e].endDate=new Date(this.eventDays[e].startDate.getTime()+36e5),this.onEndDateChange(e,this.eventDays[e].endDate))}},{key:"_updateEndDateToEndofTheDay",value:function(e){var t=this.eventDays[e];if(t&&t.startDate){var n=new Date(t.startDate.getTime());n.setHours(23),n.setMinutes(59),this.eventDays[e].endDate=n,this.onEndDateChange(e,this.eventDays[e].endDate)}}}]),n}($)).\u0275fac=function(e){return new(e||ln)(v["\u0275\u0275directiveInject"](y.a),v["\u0275\u0275directiveInject"](y.g),v["\u0275\u0275directiveInject"](G.b),v["\u0275\u0275directiveInject"](H.b),v["\u0275\u0275directiveInject"](q.b),v["\u0275\u0275directiveInject"](yt.Event),v["\u0275\u0275directiveInject"](bt.b))},ln.\u0275cmp=v["\u0275\u0275defineComponent"]({type:ln,selectors:[["mg-create-event"]],viewQuery:function(e,t){var n;1&e&&(v["\u0275\u0275viewQuery"](Bt,3),v["\u0275\u0275viewQuery"](jt,3),v["\u0275\u0275viewQuery"](Rt,3),v["\u0275\u0275viewQuery"](zt,1),v["\u0275\u0275viewQuery"](Nt,1)),2&e&&(v["\u0275\u0275queryRefresh"](n=v["\u0275\u0275loadQuery"]())&&(t.imageUploadControl=n.first),v["\u0275\u0275queryRefresh"](n=v["\u0275\u0275loadQuery"]())&&(t.form=n.first),v["\u0275\u0275queryRefresh"](n=v["\u0275\u0275loadQuery"]())&&(t.titleInput=n.first),v["\u0275\u0275queryRefresh"](n=v["\u0275\u0275loadQuery"]())&&(t.bannerPreviewWrap=n.first),v["\u0275\u0275queryRefresh"](n=v["\u0275\u0275loadQuery"]())&&(t.ticketPriceInput=n.first))},hostBindings:function(e,t){1&e&&v["\u0275\u0275listener"]("resize",(function(e){return t.onResize(e)}),!1,v["\u0275\u0275resolveWindow"])},features:[v["\u0275\u0275InheritDefinitionFeature"]],decls:85,vars:72,consts:[[1,"create-event-form"],["form","ngForm"],["class","file-input-wrap form-input-container-border",4,"ngIf"],[1,"title-input"],["mgFormField","","mgHideOptionalMarker","",1,"form-input-hpadding"],["matSuffix","",1,"camera-icon",3,"click"],["mgMentionable2","inline","allowedTags","mg-mention","name","eventTitle","required","","autocomplete","off",3,"multiline","maxlength","ngModel","ngModelChange"],["titleInput","ngModel","titleField",""],[4,"ngIf"],["align","end",4,"ngIf"],[1,"banner-edit-wrap"],[1,"banner-select-wrap"],[1,"banner-select-fade-left"],["name","eventBanner",3,"categories","query","ngModel","ngModelChange","selectedBannerChange"],[1,"banner-select-fade-right"],[1,"mg-minicopy","filter-text"],[1,"mg-centered",3,"allowDeselect","ngModelOptions","ngModel","ngModelChange"],["fxLayout","column",1,"mg-centered"],[1,"mg-minicopy"],["customTitleText","Upload Custom Image","displayStyle","BUTTON",1,"mg-minicopy",3,"multiple","ngModelOptions","ngModel","ngModelChange"],["class","banner-error",4,"ngIf"],["name","eventBody","placeholder","Event description...",1,"form-input-hpadding",3,"richContent","maxlength","ngModel","ngModelChange"],["class","divider",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center",1,"all-day-toggle-container","form-input-hpadding"],[1,"ticket-toggle-text","mg-minicopy",3,"click"],["src","assets/ticket-events-icon.png"],["fxFlex","",3,"click"],["name","ticketed",1,"no-mg",3,"ngModel","ngModelChange"],[1,"ticket-url-container"],["mgFormField","",1,"form-input-hpadding"],["mgMentionable2","inline","allowedTags","mg-mention","name","eventHostedBy",3,"multiline","maxlength","ngModel","ngModelChange"],["hostedByInput","ngModel"],["matInput","","autocomplete","off","maxlength","255","minlength","2","name","eventLocation",3,"ngModel","ngModelChange"],["locationInput","ngModel"],[3,"title","selectedPoints","pointsClick",4,"ngIf"],["name","eventCategory",1,"event-category-select",3,"ngModel","required","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"divider"],[1,"section-padding","mg-bodycopy-bold"],["class","post-input no-material bordered inner-panel",3,"ngClass.xs","expanded",4,"ngFor","ngForOf"],["class","section-padding add-day-row",3,"click",4,"ngIf"],[1,"post-input","no-material","bordered",3,"ngClass.xs"],[1,"mg-bodycopy-bold",3,"ngClass"],[1,"post-event-panel-body","mg-minicopy"],["labelPostion","'before'","name","allowGoingToggle",1,"post-event-going-toggle","post-black","post-step-spacing","post-input","input-group","toggle-with-subtext",3,"ngModel","ngModelChange"],[1,"toggle-subtext","mg-microtext"],["mat-suffix","","labelPostion","'before'","name","enableEventCodeToggle",1,"post-event-code-toggle","post-black","post-step-spacing","post-input","input-group","toggle-with-subtext",3,"ngModel","disabled","ngModelChange"],["mgFormField","",1,"input-group","event-code-wrapper"],["matInput","","name","eventCode","autocomplete","off","autocapitalize","none",3,"ngModel","required","disabled","ngModelChange"],[1,"file-input-wrap","form-input-container-border"],["bannerPreviewWrap",""],["name","customImageUpload",3,"previewAspectRatio","previewSize","file","ngModel","ngModelChange","mgModelStatusChanges","previewUrlOutput"],["imageUploadControl","ngModel"],["align","end"],[1,"banner-error"],["fxLayout","row","fxLayoutAlign","center center",1,"form-input-hpadding","toggle-container"],[1,"ticket-toggle-text","sub-toggle","mg-minicopy",3,"click"],["name","enableTicketUrl",1,"no-mg",3,"ngModel","ngModelChange"],["matInput","","autocomplete","off","name","ticketUrlInput",3,"ngModel","required","ngModelChange"],["ticketUrlInput","ngModel"],["name","enableTicketInfo",1,"no-mg",3,"ngModel","ngModelChange"],["autocomplete","off","name","ticketInfoInput","maxlength","100","mgMentionable2","inline","allowedTags","mg-mention","type","text",3,"ngModel","required","ngModelChange"],["ticketInfoInput","ngModel"],["matPrefix",""],["matInput","","autocomplete","off","name","ticketPriceInput",3,"ngModel","ngModelChange"],["ticketPriceInput","ngModel"],[3,"title","selectedPoints","pointsClick"],[3,"value"],[1,"event-category-circle"],[1,"post-input","no-material","bordered","inner-panel",3,"ngClass.xs","expanded"],[3,"click",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center",1,"all-day-toggle-container"],[1,"all-day-toggle-text","mg-minicopy",3,"click"],[1,"no-mg",3,"name","ngModel","ngModelChange"],["datePlaceholder","Start date","timePlaceholder","Start time",1,"input-body-color",3,"required","stackInputs","name","ngModel","dateOnly","dateError","ngModelChange"],["datePlaceholder","End date","timePlaceholder","End time",1,"input-body-color",3,"required","stackInputs","minDate","name","ngModel","canReset","dateOnly","ngModelChange"],[3,"click"],[1,"section-padding","add-day-row",3,"click"]],template:function(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"form",0,1),v["\u0275\u0275template"](2,Vt,4,4,"div",2),v["\u0275\u0275elementStart"](3,"div",3),v["\u0275\u0275elementStart"](4,"mat-form-field",4),v["\u0275\u0275elementStart"](5,"mat-label"),v["\u0275\u0275text"](6,"Event Title"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](7,"mg-icon",5),v["\u0275\u0275listener"]("click",(function(){return t.bannerSelectionActive=!t.bannerSelectionActive})),v["\u0275\u0275text"](8,"camera"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](9,"mg-textarea",6,7),v["\u0275\u0275listener"]("ngModelChange",(function(e){return t.eventTitle=e}))("ngModelChange",(function(e){return t.onEventTitleChange(e)})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](12,Wt,3,3,"mat-error",8),v["\u0275\u0275template"](13,Lt,3,3,"mat-error",8),v["\u0275\u0275template"](14,Ut,2,2,"mat-hint",9),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](15,"div",10),v["\u0275\u0275elementStart"](16,"div",11),v["\u0275\u0275element"](17,"div",12),v["\u0275\u0275elementStart"](18,"mg-banner-select2",13),v["\u0275\u0275listener"]("ngModelChange",(function(e){return t.selectedBannerHash=e}))("selectedBannerChange",(function(e){return t.onBannerSelected(e)})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275element"](19,"div",14),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](20,"p",15),v["\u0275\u0275text"](21,"Filter banner images by event theme"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](22,"mg-banner-category-select",16),v["\u0275\u0275listener"]("ngModelChange",(function(e){return t.bannerCategories=e})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](23,"div",17),v["\u0275\u0275elementStart"](24,"p",18),v["\u0275\u0275text"](25,"or"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](26,"mg-file-input",19),v["\u0275\u0275listener"]("ngModelChange",(function(e){return t.customImage=e}))("ngModelChange",(function(e){return t.onCustomImageChange(e)})),v["\u0275\u0275text"](27,"Upload Custom Image"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](28,At,4,0,"mat-error",20),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](29,"mg-body-input",21),v["\u0275\u0275listener"]("ngModelChange",(function(e){return t.eventBody=e}))("ngModelChange",(function(e){return t.onEventBodyChange(e)})),v["\u0275\u0275pipe"](30,"hasPermission"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](31,Gt,1,0,"div",22),v["\u0275\u0275elementStart"](32,"div",23),v["\u0275\u0275elementStart"](33,"div",24),v["\u0275\u0275listener"]("click",(function(){return t.toggleTicked()})),v["\u0275\u0275element"](34,"img",25),v["\u0275\u0275text"](35," This is a ticketed event "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](36,"div",26),v["\u0275\u0275listener"]("click",(function(){return t.toggleTicked()})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](37,"mat-slide-toggle",27),v["\u0275\u0275listener"]("ngModelChange",(function(){return t.toggleTicked()}))("ngModelChange",(function(e){return t.ticketed=e})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](38,"div",28),v["\u0275\u0275template"](39,Yt,35,15,"ng-container",8),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](40,"mat-form-field",29),v["\u0275\u0275elementStart"](41,"mat-label"),v["\u0275\u0275text"](42,"Hosted by"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](43,"mg-textarea",30,31),v["\u0275\u0275listener"]("ngModelChange",(function(e){return t.eventHostedBy=e}))("ngModelChange",(function(e){return t.onEventHostedByChange(e)})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](45,Zt,3,3,"mat-error",8),v["\u0275\u0275template"](46,Jt,2,1,"mat-hint",9),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](47,"mat-form-field",29),v["\u0275\u0275elementStart"](48,"mat-label"),v["\u0275\u0275text"](49,"Location"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](50,"input",32,33),v["\u0275\u0275listener"]("ngModelChange",(function(e){return t.eventLocation=e}))("ngModelChange",(function(e){return t.onEventLocationChange(e)})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](52,Xt,3,3,"mat-error",8),v["\u0275\u0275template"](53,en,2,1,"mat-hint",9),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](54,tn,1,2,"mg-points-selector",34),v["\u0275\u0275pipe"](55,"async"),v["\u0275\u0275elementStart"](56,"mat-form-field",29),v["\u0275\u0275elementStart"](57,"mat-label"),v["\u0275\u0275text"](58,"Event Category"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](59,"mat-select",35),v["\u0275\u0275listener"]("ngModelChange",(function(e){return t.eventCategory=e}))("ngModelChange",(function(e){return t.onEventCategoryChange(e)})),v["\u0275\u0275template"](60,nn,3,4,"mat-option",36),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](61,rn,2,0,"mat-error",8),v["\u0275\u0275elementEnd"](),v["\u0275\u0275element"](62,"div",37),v["\u0275\u0275elementStart"](63,"p",38),v["\u0275\u0275text"](64,"Select Event Day"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](65,on,14,21,"mat-expansion-panel",39),v["\u0275\u0275template"](66,sn,5,0,"div",40),v["\u0275\u0275elementStart"](67,"div"),v["\u0275\u0275elementStart"](68,"mat-expansion-panel",41),v["\u0275\u0275elementStart"](69,"mat-expansion-panel-header"),v["\u0275\u0275elementStart"](70,"mat-panel-title",42),v["\u0275\u0275text"](71," Event Settings "),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](72,"div",43),v["\u0275\u0275elementStart"](73,"mat-slide-toggle",44),v["\u0275\u0275listener"]("ngModelChange",(function(e){return t.allowGoing=e}))("ngModelChange",(function(e){return t.onAllowGoingChange(e)})),v["\u0275\u0275text"](74," Track event engagement? "),v["\u0275\u0275elementStart"](75,"span",45),v["\u0275\u0275text"](76,'(this will allow members to show their intention to "go" to an event and check in to an event)'),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](77,"mat-slide-toggle",46),v["\u0275\u0275listener"]("ngModelChange",(function(e){return t.enableEventCode=e}))("ngModelChange",(function(){return t.onEnableEventCodeChange()})),v["\u0275\u0275text"](78," Require code for check in? "),v["\u0275\u0275elementStart"](79,"span",45),v["\u0275\u0275text"](80,"(members will have to enter code to successfully check in to an event)"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](81,"mat-form-field",47),v["\u0275\u0275elementStart"](82,"mat-label"),v["\u0275\u0275text"](83,"Enter Check In Code"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](84,"input",48),v["\u0275\u0275listener"]("ngModelChange",(function(e){return t.eventCode=e}))("ngModelChange",(function(e){return t.onEventCodeChange(e)})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){var n=v["\u0275\u0275reference"](1),i=v["\u0275\u0275reference"](10),r=v["\u0275\u0275reference"](44),a=v["\u0275\u0275reference"](51);v["\u0275\u0275classProp"]("form-pad-top",!t.showBannerPreview),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",t.showBannerPreview),v["\u0275\u0275advance"](2),v["\u0275\u0275classProp"]("pad-input-top",t.showBannerPreview),v["\u0275\u0275advance"](5),v["\u0275\u0275classProp"]("mg-draft-dirty",t.isTitleDirty()),v["\u0275\u0275property"]("multiline",!1)("maxlength",t.titleMaxLength)("ngModel",t.eventTitle),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngIf",null==i.control||null==i.control.errors?null:i.control.errors.maxlength),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",(null==i.control?null:i.control.touched)&&(null==i.control||null==i.control.errors?null:i.control.errors.required)),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",t.eventTitle),v["\u0275\u0275advance"](1),v["\u0275\u0275classProp"]("banner-edit-hidden",!t.bannerSelectionActive),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("categories",t.bannerCategories)("query",t.eventTitle)("ngModel",t.selectedBannerHash),v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("allowDeselect",!0)("ngModelOptions",v["\u0275\u0275pureFunction0"](70,mn))("ngModel",t.bannerCategories),v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("multiple",!1)("ngModelOptions",v["\u0275\u0275pureFunction0"](71,mn))("ngModel",t.customImage),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",(null==n.controls||null==n.controls.eventBanner?null:n.controls.eventBanner.touched)&&!t.eventImageAsset),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("richContent",v["\u0275\u0275pipeBind1"](30,66,"CONTENT_HTML_INCLUDE"))("maxlength",5e3)("ngModel",t.eventBody),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",t.ticketed),v["\u0275\u0275advance"](1),v["\u0275\u0275classProp"]("non-ticketed",!t.ticketed),v["\u0275\u0275advance"](5),v["\u0275\u0275property"]("ngModel",t.ticketed),v["\u0275\u0275advance"](1),v["\u0275\u0275classProp"]("expand",t.ticketed),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",t.ticketed),v["\u0275\u0275advance"](4),v["\u0275\u0275classProp"]("mg-draft-dirty",t.isHostedByDirty()),v["\u0275\u0275property"]("multiline",!1)("maxlength",255)("ngModel",t.eventHostedBy),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",null==r.control||null==r.control.errors?null:r.control.errors.maxlength),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",t.eventHostedBy),v["\u0275\u0275advance"](4),v["\u0275\u0275classProp"]("mg-draft-dirty",t.isLocationDirty()),v["\u0275\u0275property"]("ngModel",t.eventLocation),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",null==a.control||null==a.control.errors?null:a.control.errors.maxlength),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",t.eventLocation),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",v["\u0275\u0275pipeBind1"](55,68,t.canAllocateContentPoints$)),v["\u0275\u0275advance"](5),v["\u0275\u0275property"]("ngModel",t.eventCategory)("required",!0),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngForOf",t.eventCategoryKeys),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",!t.eventCategory),v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("ngForOf",t.eventDays),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",t.isRecurringEditOrCreate()),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngClass.xs","mobile"),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngClass",(null==n.controls||null==n.controls.eventCode?null:n.controls.eventCode.touched)&&t.enableEventCode&&!t.eventCode&&"required-error"),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngModel",t.allowGoing),v["\u0275\u0275advance"](4),v["\u0275\u0275classProp"]("code-enabled",t.enableEventCode),v["\u0275\u0275property"]("ngModel",t.enableEventCode)("disabled",!t.allowGoing),v["\u0275\u0275advance"](4),v["\u0275\u0275classProp"]("show",t.enableEventCode),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngModel",t.eventCode)("required",!0)("disabled",!t.enableEventCode||!t.allowGoing)}},directives:[ue.E,ue.u,ue.v,h.o,Ie.d,_e.a,Ie.h,Ct.a,Ie.j,Te.a,Ee.a,ue.B,ue.n,ue.t,ue.w,kt.a,Mt.a,wt.e,Ot.a,Be.a,wt.d,wt.b,xt.a,Dt.b,ue.d,ue.o,St.a,h.n,D.c,Ft.a,D.f,D.g,h.m,Pt.a,It.a,Ie.c,Ie.g,Ie.i,_t.a,Tt.m,Et.a],pipes:[je.a,h.b,b.d],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");mat-form-field[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{color:#737373}mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-family:Muli,sans-serif;line-height:1.35;box-sizing:border-box}@media (orientation:landscape){mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-size:3.1400966184vh}}@media (orientation:portrait){mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-size:3.1400966184vw}}@media (orientation:landscape) and (max-height:414px){mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-size:13px}}@media (orientation:portrait) and (max-width:414px){mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-size:13px}}@media (min-width:445.8461538462px){mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-size:14px}}.form-input-hpadding[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px}.pseudo-mg-input[_ngcontent-%COMP%]{color:#737373;border-bottom:1px solid #ccc}.pseudo-mg-input[_ngcontent-%COMP%]     .textarea-placeholder{color:#2f2f2f}.input-margin[_ngcontent-%COMP%]{margin:8px}.input-group[_ngcontent-%COMP%]{margin:16px;--mg-form-field-margin:4px 0}.input-group.vmargin-only[_ngcontent-%COMP%]{margin:16px 0}.input-group[_ngcontent-%COMP%] > .input-group[_ngcontent-%COMP%]{padding:0;margin:16px 0}mat-form-field[mgFormField][_ngcontent-%COMP%] + .input-group[_ngcontent-%COMP%]{margin-top:0}.input-hpadding[_ngcontent-%COMP%]{padding-left:14px;padding-right:14px}.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-family:Muli,sans-serif;font-weight:700;line-height:1.35}@media (orientation:landscape){.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:3.8647342995vh}}@media (orientation:portrait){.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:3.8647342995vw}}@media (orientation:landscape) and (max-height:414px){.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:16px}}@media (orientation:portrait) and (max-width:414px){.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:16px}}@media (min-width:439.875px){.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:17px}}.mg-draft-dirty[_ngcontent-%COMP%]{color:#036}.text-input[_ngcontent-%COMP%]{padding:16px;border-top:1px solid #e2e2e2}.text-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border:none;color:#737373;font-size:16px;font-weight:400;font-family:Muli,sans-serif}.text-input[_ngcontent-%COMP%]   input.mg-draft-dirty[_ngcontent-%COMP%]{color:#036}.text-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.input-padding[_ngcontent-%COMP%]{padding:16px}.body-input[_ngcontent-%COMP%]{border-top:1px solid #e2e2e2;color:#737373}.body-input.mg-draft-dirty[_ngcontent-%COMP%], .mg-label[_ngcontent-%COMP%]{color:#2f2f2f}.mg-label[_ngcontent-%COMP%]{margin-top:8px}mat-slide-toggle.toggle-with-subtext[_ngcontent-%COMP%]{margin-left:0;margin-bottom:14px}mat-slide-toggle.toggle-with-subtext[_ngcontent-%COMP%]:first-child{margin-top:0;margin-bottom:14px}mat-slide-toggle.toggle-with-subtext[_ngcontent-%COMP%]     .mat-slide-toggle-label{align-items:flex-start}mat-slide-toggle.toggle-with-subtext[_ngcontent-%COMP%]     .mat-slide-toggle-label .mat-slide-toggle-content{text-align:left;padding-bottom:.5em}mat-slide-toggle.toggle-with-subtext[_ngcontent-%COMP%]     .mat-slide-toggle-label .mat-slide-toggle-content .toggle-subtext{display:block;white-space:normal;margin-top:1em}[_nghost-%COMP%]   .footer-button-container[_ngcontent-%COMP%]{margin-top:16px;display:none}@media (max-width:599px){[_nghost-%COMP%]   .footer-button-container[_ngcontent-%COMP%]{display:block}}form.form-pad-top[_ngcontent-%COMP%]{padding-top:16px}.form-footer[_ngcontent-%COMP%]{padding-bottom:20px}.all-day-toggle-text[_ngcontent-%COMP%]{margin-right:8px}.ticket-toggle-text[_ngcontent-%COMP%]{font-size:14px;color:#036;font-weight:700;display:inline-flex;align-items:center}.ticket-toggle-text[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:32px;margin-right:12px}.ticket-toggle-text.sub-toggle[_ngcontent-%COMP%]{color:#737373;font-weight:400}mat-form-field[_ngcontent-%COMP%]{box-sizing:border-box}mat-accordion[_ngcontent-%COMP%]{display:block;border-top:1px solid #ccc;border-bottom:1px solid #ccc}.event-category-circle[_ngcontent-%COMP%]{width:25px;height:25px;display:inline-block;vertical-align:middle;border-radius:50%;margin-right:9px}.toggle-container[_ngcontent-%COMP%]{margin-bottom:20px}.required-error[_ngcontent-%COMP%]{color:#de1717}.all-day-toggle-container[_ngcontent-%COMP%]{margin:8px 4px 20px;color:#737373;position:relative;z-index:0}.all-day-toggle-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(mat-slide-toggle){cursor:pointer}.all-day-toggle-container[_ngcontent-%COMP%] > div[fxFlex][_ngcontent-%COMP%]{height:1em}.all-day-toggle-container.non-ticketed[_ngcontent-%COMP%]{margin-top:0}mg-body-input[_ngcontent-%COMP%]{position:relative;z-index:1}.divider[_ngcontent-%COMP%]{border-top:1px solid #ccc}.section-padding[_ngcontent-%COMP%]{padding:0 24px}.add-day-row[_ngcontent-%COMP%]{display:flex;align-items:center;margin:1em 0}.add-day-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#ccc;margin-left:8px}.add-day-row[_ngcontent-%COMP%]:hover{cursor:pointer}.add-day-row[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{color:#036}.inner-panel[_ngcontent-%COMP%]{margin:0 12px;border-radius:0;border-bottom:none}.inner-panel[_ngcontent-%COMP%] + .inner-panel[_ngcontent-%COMP%]{border-top:1px solid #ccc}.inner-panel[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]{justify-content:space-between}.inner-panel[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{color:#de1717;cursor:pointer;opacity:.5;padding-left:30px}.inner-panel[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]:hover{opacity:1}.event-code-wrapper[_ngcontent-%COMP%]{max-height:0;transition:max-height .5s cubic-bezier(.55,0,.55,.2),border-color .5s cubic-bezier(.55,0,.55,.2),padding-bottom .5s cubic-bezier(.55,0,.55,.2);overflow:hidden;padding:16px;margin-top:0;margin-left:0;margin-right:0}.event-code-wrapper[_ngcontent-%COMP%]:not(.show){border-color:transparent;padding-bottom:0;margin-top:0;margin-bottom:0}.event-code-wrapper.show[_ngcontent-%COMP%]{max-height:100px}.ticket-url-container[_ngcontent-%COMP%]{max-height:0;transition:max-height .5s cubic-bezier(.55,0,.55,.2),padding-top .5s cubic-bezier(.55,0,.55,.2),margin-bottom .5s cubic-bezier(.55,0,.55,.2);overflow:hidden;padding-top:0}.ticket-url-container.expand[_ngcontent-%COMP%]{max-height:500px;padding-top:4px;margin-bottom:calc(var(--hint-height, 14px) + 16px)}.ticket-url-container[_ngcontent-%COMP%]   .ticket-url-container[_ngcontent-%COMP%], .ticket-url-container[_ngcontent-%COMP%]   .ticket-url-container.expand[_ngcontent-%COMP%]{margin-bottom:0}.post-event-panel-header[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0;padding:0}.post-event-panel-body[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{color:#737373}.post-event-panel-body[_ngcontent-%COMP%]{text-align:center}.post-event-panel-body[_ngcontent-%COMP%] > mat-expansion-panel[_ngcontent-%COMP%]{margin:auto;width:calc(100% - 32px);border-bottom:1px solid #ccc}.post-event-panel-body[_ngcontent-%COMP%] > mat-expansion-panel[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .post-event-panel-body[_ngcontent-%COMP%] > mat-expansion-panel[_ngcontent-%COMP%] > mat-expansion-panel-header[_ngcontent-%COMP%]{text-align:left}.banner-edit-wrap[_ngcontent-%COMP%]{margin:0 16px 32px}.banner-edit-wrap[_ngcontent-%COMP%]   p.mg-minicopy[_ngcontent-%COMP%]{color:#737373}.banner-edit-wrap[_ngcontent-%COMP%]   p.mg-minicopy.filter-text[_ngcontent-%COMP%]{margin-bottom:.5em}.banner-select-wrap[_ngcontent-%COMP%]{position:relative;overflow:hidden;margin-bottom:16px}.banner-select-wrap[_ngcontent-%COMP%]   mg-banner-select2[_ngcontent-%COMP%]{display:block}.banner-select-wrap[_ngcontent-%COMP%]   .banner-select-fade-left[_ngcontent-%COMP%]{position:absolute;z-index:1;top:0;left:0;bottom:0;width:20px;background:linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.banner-select-wrap[_ngcontent-%COMP%]   .banner-select-fade-right[_ngcontent-%COMP%]{position:absolute;z-index:1;top:0;right:0;bottom:0;width:20px;background:linear-gradient(270deg,#fff,hsla(0,0%,100%,0))}.camera-icon[_ngcontent-%COMP%]{cursor:pointer}.file-input-wrap[_ngcontent-%COMP%]{--file-upload-bgcolor:transparent;background-color:#f5f5f5;position:relative;margin-bottom:16px}.banner-preview-image[_ngcontent-%COMP%]{overflow:hidden;position:relative;padding-bottom:56.25%;margin-bottom:16px;background-size:cover;background-position:50%}mg-banner-category-select[_ngcontent-%COMP%]{font-size:12px}.banner-edit-hidden[_ngcontent-%COMP%]{display:none}.cancel-link[_ngcontent-%COMP%]{padding-bottom:20px;margin-left:15px}.cancel-link[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{cursor:pointer}mg-points-selector[_ngcontent-%COMP%]{width:100%;display:inline-block;padding-left:16px;margin-bottom:30px}.banner-error[_ngcontent-%COMP%]{margin-top:10px}']}),ln),bn=o("u9T3"),Cn=o("CO6v"),kn=o("07le"),Mn=o("+0Zl"),wn=o("5Ynh"),On=o("9F0b"),xn=o("YcSX"),Dn=o("pu9B"),Sn=o("SOT1"),Fn=o("Ruz7"),Pn=o("ls3q"),In=((un=c((function e(){l(this,e)}))).\u0275fac=function(e){return new(e||un)},un.\u0275mod=v["\u0275\u0275defineNgModule"]({type:un}),un.\u0275inj=v["\u0275\u0275defineInjector"]({imports:[[Ae.a,xn.b,wn.a,kn.a,He.a,Sn.a,Ge.a,Cn.a,$e.b,ue.m,Pn.a,Mn.a,On.c,Fn.a,te.b,qe.a,Dn.a,h.c,Ie.f,Dt.c,xt.b,D.b,St.b,b.c,bn.a]]}),un),_n=o("+V+6"),Tn=o("V0rs"),En=o("biMj"),Bn=o("Fawd"),jn=((cn=function(e){g(n,e);var t=p(n);function n(e,i,r,a,o,s,u){var c;return l(this,n),(c=t.call(this,e,"EventContent")).componentResolver=i,c.injector=r,c.eventService=a,c.auth=o,c.bannerService=s,c.permissions=u,c}return c(n,[{key:"createInfoDraftInstance",value:function(e){return new Rn(this.userStorage,this.componentResolver,this.auth,this.injector,this.eventService,this.storagePrefix,e,this.bannerService,this.permissions)}}]),n}(it)).\u0275fac=function(e){return new(e||cn)(v["\u0275\u0275inject"](rt.a),v["\u0275\u0275inject"](v.ComponentFactoryResolver),v["\u0275\u0275inject"](v.Injector),v["\u0275\u0275inject"](yt.Event),v["\u0275\u0275inject"](ot.a),v["\u0275\u0275inject"](ht.BannerLibrary),v["\u0275\u0275inject"](te.c))},cn.\u0275prov=v["\u0275\u0275defineInjectable"]({token:cn,factory:cn.\u0275fac}),cn),Rn=function(e){g(n,e);var t=p(n);function n(e,i,r,a,o,s,u,c,d){var g;return l(this,n),(g=t.call(this,e,d,s,u)).auth=r,g.injector=a,g.eventService=o,g.bannerService=c,g.permissions=d,g.componentFactory=i.resolveComponentFactory(_n.a),g}return c(n,[{key:"type",get:function(){return"event"}},{key:"contentType",get:function(){return"EVENT"}},{key:"fetchInitialDraftInfo",value:function(){var e,t,n,i;return Object(x.a)(this,void 0,void 0,s().mark((function a(){var o,l,u,c,d,g,f,p,h,v,m,y,b,C,k;return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(this.contentHash){a.next=2;break}return a.abrupt("return");case 2:return(o=new Xe.ContentInfoQuery).setContentHash(this.contentHash),a.next=6,this.eventService.getInfo(o);case 6:if(l=a.sent,u={allDay:l.getAllDayEvent(),allowGoing:l.getAllowGoing(),bannerAsset:l.getEventBannerAsset(),body:l.getDescription(),hostedBy:l.getEventHost(),location:l.getEventLocation(),title:l.getTitle(),eventCode:l.getEventCode(),banner:l.getEventBannerHash(),points:l.getPoints(),ticketUrl:l.getTicketUrl(),hasTickets:l.getHasTickets(),ticketInfo:l.getTicketInfo(),ticketPrice:l.getTicketPrice(),additionalDates:[],eventCategory:Object(I.$enum)(vt.EventCategoryEnum).asValueOrDefault(l.getEventCategory(),vt.EventCategoryEnum.OTHER)},!l.hasEventBannerHash()){a.next=17;break}return(c=new Bn.BannerLibraryGet).setBannerHash(l.getEventBannerHash()),a.next=13,this.bannerService.get(c);case 13:(d=a.sent).hasHeadlineOptions()&&(u.bannerHeadlineOptions=d.getHeadlineOptions().toObject()),(g=d.getImage().getSizeMap().get("raw"))&&(u.bannerAsset=g.getPath());case 17:if(p=(f=function(e,t,n,i){var r={allDay:n};if(e){var a=Object(B.f)(e),o=6e4*a.getTimezoneOffset();r.startDate=new Date(a.getTime()-o)}if(t){var s=Object(B.f)(t),l=6e4*s.getTimezoneOffset();r.endDate=new Date(s.getTime()-l)}return i&&(r.contentId=i),r})(l.getEventStart(),l.getEventEnd(),l.getAllDayEvent()),u.startDate=null===(e=p.startDate)||void 0===e?void 0:e.getTime(),u.endDate=null===(t=p.endDate)||void 0===t?void 0:t.getTime(),null===(n=u.additionalDates)||void 0===n||n.push(p),(h=l.getAdditionalDatesList()).length){v=r(h);try{for(v.s();!(m=v.n()).done;)y=m.value,b=y.getAllDayEvent(),C=y.getEventEnd(),k=f(y.getEventStart(),C,b,y.getContentId()),null===(i=u.additionalDates)||void 0===i||i.push(k)}catch(s){v.e(s)}finally{v.f()}}this.setInitialDraft(u);case 22:case"end":return a.stop()}}),a,this)})))}},{key:"hasImageContent",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDraft();case 2:return e.abrupt("return",!!e.sent.bannerAsset);case 3:case"end":return e.stop()}}),e,this)})))}},{key:"hasTextContent",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDraft();case 2:return t=e.sent,e.abrupt("return",!!(t.body||t.title||t.location||t.hostedBy));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"createEmptyDraft",value:function(){return{title:"",banner:"",body:"",hostedBy:"",location:"",allDay:!1,endDate:null,startDate:null,allowGoing:!0,bannerAsset:"",bannerHeadlineOptions:null,bannerChoiceLocked:!1,eventCode:"",points:0,ticketUrl:"",eventCategory:"",hasTickets:!1,additionalDates:[{allDay:!1}],ticketInfo:"",ticketPrice:0}}},{key:"submitDraftNew",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t,n,i,r,a,o,l,u,c,d,g,f;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDraft();case 2:t=e.sent,(n=new En.EventInfo).setTitle(t.title),n.setDescription(t.body),t.banner?n.setEventBannerHash(t.banner):n.setEventBannerAsset(t.bannerAsset),n.setAllDayEvent(t.allDay),n.setEventHost(t.hostedBy),n.setEventLocation(t.location),n.setAllowGoing(t.allowGoing),n.setEventCode(t.eventCode),n.setPoints(t.points),n.setTicketUrl(t.ticketUrl),n.setEventCategory(t.eventCategory),n.setHasTickets(t.hasTickets),n.setTicketInfo(t.ticketInfo),n.setTicketPrice(t.ticketPrice),i=0;case 6:if(!(i<t.additionalDates.length)){e.next=16;break}if(0!=i){e.next=9;break}return e.abrupt("continue",13);case 9:r=t.additionalDates[i],(a=new En.AdditionalDate).setAllDayEvent(r.allDay),r.startDate&&(o=Object(B.e)(r.startDate),a.setEventStart(o)),r.endDate&&(l=Object(B.e)(r.endDate),a.setEventEnd(l)),n.addAdditionalDates(a);case 13:i++,e.next=6;break;case 16:return t.startDate&&(u=new Date(t.startDate),c=Object(B.e)(u),n.setEventStart(c)),t.endDate&&(d=new Date(t.endDate),g=Object(B.e)(d),n.setEventEnd(g)),e.t0=Ke,e.next=21,this.eventService.new(n);case 21:return e.t1=e.sent,e.t2={type:this.type},f=(0,e.t0)(e.t1,e.t2),e.abrupt("return",(f.moderation&&f.moderation.allPassed&&(t.startDate&&(f.date=new Date(t.startDate)),t.endDate&&(f.endDate=new Date(t.endDate))),f));case 25:case"end":return e.stop()}}),e,this)})))}},{key:"submitDraftUpdate",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t,n,i,r,a,o,l,u,c,d,g,f,p,h,v,m,y,b,C,k,M,w,O,x,D;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchInitialDraftInfo();case 2:return e.next=4,this.initialDraftDifference();case 4:if(t=e.sent,(n=new En.DeltaEventInfo).setContentHash(this.contentHash),"title"in t&&((i=new j.StringDelta).setNewString(t.title),n.setTitle(i)),"body"in t&&((r=new j.StringDelta).setNewString(t.body),n.setDescription(r)),"hostedBy"in t&&((a=new j.StringDelta).setNewString(t.hostedBy),n.setEventHost(a)),"location"in t&&((o=new j.StringDelta).setNewString(t.location),n.setEventLocation(o)),"startDate"in t&&(l=new j.DateTimeDelta,u=Object(B.e)(new Date(t.startDate)),l.setNewDateTime(u),n.setEventStart(l)),"endDate"in t&&(c=new j.DateTimeDelta,d=Object(B.e)(new Date(t.endDate)),c.setNewDateTime(d),n.setEventEnd(c)),"allowGoing"in t&&((g=new j.BoolDelta).setNewBool(t.allowGoing),n.setAllowGoing(g)),("banner"in t||"bannerAsset"in t)&&(t.banner?((f=new j.StringDelta).setNewString(t.banner),n.setEventBannerHash(f)):t.bannerAsset&&((p=new j.StringDelta).setNewString(t.bannerAsset),n.setEventBannerAsset(p),n.setEventBannerHash(new j.StringDelta))),"allDay"in t&&((h=new j.BoolDelta).setNewBool(t.allDay),n.setAllDayEvent(h)),"eventCode"in t&&((v=new j.StringDelta).setNewString(t.eventCode),n.setEventCode(v)),"points"in t&&((m=new j.Int32Delta).setNewInt32(t.points),n.setPoints(m)),"ticketUrl"in t&&((y=new j.StringDelta).setNewString(t.ticketUrl),n.setTicketUrl(y)),"eventCategory"in t&&(b=new j.StringDelta,C=Object(I.$enum)(vt.EventCategoryEnum).asValueOrDefault(t.eventCategory,vt.EventCategoryEnum.OTHER),b.setNewString(C),n.setEventCategory(b)),"hasTickets"in t&&((k=new j.BoolDelta).setNewBool(t.hasTickets),n.setHasTickets(k)),"ticketInfo"in t&&((M=new j.StringDelta).setNewString(t.ticketInfo||""),n.setTicketInfo(M)),"ticketPrice"in t&&((w=new j.FloatDelta).setNewFloat(t.ticketPrice||0),n.setTicketPrice(w)),!t.additionalDates){e.next=32;break}O=0;case 24:if(!(O<t.additionalDates.length)){e.next=32;break}if(0!=O){e.next=27;break}return e.abrupt("continue",29);case 27:x=t.additionalDates[O],(D=new En.AdditionalDate).setAllDayEvent(x.allDay),x.contentId&&D.setContentId(x.contentId),x.endDate&&D.setEventEnd(Object(B.e)(x.endDate)),x.startDate&&D.setEventStart(Object(B.e)(x.startDate)),n.addAdditionalDates(D);case 29:O++,e.next=24;break;case 32:return e.t0=Ke,e.next=35,this.eventService.update(n);case 35:return e.t1=e.sent,e.t2={type:this.type},e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 38:case"end":return e.stop()}}),e,this)})))}},{key:"createPreviewComponent",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.componentFactory.create(this.injector),e.next=3,this.updatePreviewComponent(t);case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"updatePreviewComponent",value:function(e){return Object(x.a)(this,void 0,void 0,s().mark((function t(){var n,i,r,a,o,l,u,c;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.auth.getPersonViewMinimalFromCurrentPerson(),t.next=3,this.cloneDraftMergedWithInitialFetchIfNeeded();case 3:return i=t.sent,r=Object(dt.b)(i.bannerAsset),a=null,t.next=8,ft(i.bannerAsset);case 8:if(o=t.sent,!r){t.next=16;break}return t.next=12,Object(Tn.d)(r);case 12:l=t.sent,u=l.width,c=l.height,a={sizeMap:[["raw",{width:u,height:c,path:i.bannerAsset}]]};case 16:return e.instance.disableActions=!1,e.instance.contentHash="",e.instance.contextHash="",t.t0=i.allDay,t.t1=i.allowGoing,t.t2="Hosted by "+i.hostedBy,t.t3=i.location,t.t4=n.toObject(),t.next=26,this.bodyAsPreviewHtml(i.body);case 26:t.t5=t.sent,t.t6=i.title,t.t7=i.startDate||0,t.t8=i.endDate||0,t.t9=!1,t.t10=a,t.t11={archived:!1,bannerHash:"",categoryList:[],keywordList:[],headlineOptions:o,image:a},t.t12=[],t.t13=Date.now(),t.t14=!1,t.t15=!1,t.t16=i.ticketUrl||"",t.t17=i.eventCategory||"",t.t18=i.hasTickets||!1,t.t19=i.ticketInfo||"",t.t20=i.ticketPrice||0,e.instance.content={allDay:t.t0,allowGoing:t.t1,hostedBy:t.t2,location:t.t3,authorPersonView:t.t4,fullBody:t.t5,title:t.t6,startTimestamp:t.t7,endTimestamp:t.t8,hasCode:t.t9,image:t.t10,banner:t.t11,commentCount:0,commentList:t.t12,commentListPage:0,likeCount:0,timestamp:t.t13,totalCommentCount:0,lightContent:t.t14,gradientOverlap:t.t15,backgroundColor:"",goingCount:0,gradientSize:0,ticketUrl:t.t16,category:t.t17,hasTickets:t.t18,ticketInfo:t.t19,ticketPrice:t.t20},e.instance.disableEventPhotoGallery=!0;case 44:case"end":return t.stop()}}),t,this)})))}}]),n}(A),zn=((dn=function(e){g(n,e);var t=p(n);function n(e){var i;return l(this,n),(i=t.call(this)).eventInfoDraftService=e,i}return c(n,[{key:"resolveFromContentHash",value:function(e){return this.eventInfoDraftService.ensureInfoDraftInstance(e)}}]),n}(ut)).\u0275fac=function(e){return new(e||dn)(v["\u0275\u0275inject"](jn))},dn.\u0275prov=v["\u0275\u0275defineInjectable"]({token:dn,factory:dn.\u0275fac}),dn),Nn=o("o1f5"),Vn=((gn=function(e){g(n,e);var t=p(n);function n(e,i,r,a,o){var s;return l(this,n),(s=t.call(this,e,i,r,a,o)).route=e,s.router=i,s.matDialog=r,s.snackBar=a,s.groupsFacadeService=o,s._initDraft(),s}return c(n,[{key:"mgContentInfoDraftReady",value:function(){}},{key:"getPreviousStep",value:function(){return{name:"Cancel",icon:"close"}}},{key:"previousStep",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.exitDraft();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"getNextStep",value:function(){return{name:"Preview",icon:"forward"}}},{key:"nextStep",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.navigateToPreview();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"_initDraft",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contentInfoDraft.getDraft();case 2:(t=e.sent)?(this.imageAsset=t.asset,this.imageAsset?this.enableNextStep():this.disableNextStep()):this.disableNextStep();case 4:case"end":return e.stop()}}),e,this)})))}},{key:"onImageAssetChange",value:function(e){this.contentInfoDraft.saveToDraft("asset",e),e&&this.enableNextStep()}}]),n}($)).\u0275fac=function(e){return new(e||gn)(v["\u0275\u0275directiveInject"](y.a),v["\u0275\u0275directiveInject"](y.g),v["\u0275\u0275directiveInject"](G.b),v["\u0275\u0275directiveInject"](H.b),v["\u0275\u0275directiveInject"](q.b))},gn.\u0275cmp=v["\u0275\u0275defineComponent"]({type:gn,selectors:[["mg-create-full-graphic"]],features:[v["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:2,consts:[["required","","name","image","previewAspectRatio","3:4",3,"previewSize","ngModel","ngModelChange"]],template:function(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"form"),v["\u0275\u0275elementStart"](1,"mg-file-input-upload",0),v["\u0275\u0275listener"]("ngModelChange",(function(e){return t.imageAsset=e}))("ngModelChange",(function(e){return t.onImageAssetChange(e)})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("previewSize",700)("ngModel",t.imageAsset))},directives:[ue.E,ue.u,ue.v,Nn.a,ue.B,ue.t,ue.w],styles:["[_nghost-%COMP%]{display:block}mg-file-input-upload[_ngcontent-%COMP%]{max-width:414px;margin:16px auto}@media (max-width:599px){mg-file-input-upload[_ngcontent-%COMP%]{margin:8px auto;font-size:75%;max-width:300px}}"]}),gn),Wn=o("p+4T"),Ln=((fn=c((function e(){l(this,e)}))).\u0275fac=function(e){return new(e||fn)},fn.\u0275mod=v["\u0275\u0275defineNgModule"]({type:fn}),fn.\u0275inj=v["\u0275\u0275defineInjector"]({imports:[[Wn.a,ue.m]]}),fn),Un=o("sH97"),An=o("8slR"),Gn=((pn=function(e){g(n,e);var t=p(n);function n(e,i,r,a,o){var s;return l(this,n),(s=t.call(this,e,"FullGraphicContent")).componentResolver=i,s.fullGraphic=r,s.injector=a,s.permissions=o,s}return c(n,[{key:"createInfoDraftInstance",value:function(e){return new Hn(this.userStorage,this.componentResolver,this.fullGraphic,this.injector,this.storagePrefix,e,this.permissions)}}]),n}(it)).\u0275fac=function(e){return new(e||pn)(v["\u0275\u0275inject"](rt.a),v["\u0275\u0275inject"](v.ComponentFactoryResolver),v["\u0275\u0275inject"](An.FullGraphic),v["\u0275\u0275inject"](v.Injector),v["\u0275\u0275inject"](te.c))},pn.\u0275prov=v["\u0275\u0275defineInjectable"]({token:pn,factory:pn.\u0275fac}),pn),Hn=function(e){g(n,e);var t=p(n);function n(e,i,r,a,o,s,u){var c;return l(this,n),(c=t.call(this,e,u,o,s)).fullGraphic=r,c.injector=a,c.permissions=u,c.componentFactory=i.resolveComponentFactory(C.c),c}return c(n,[{key:"type",get:function(){return"fullGraphic"}},{key:"contentType",get:function(){return"INSPIRATION"}},{key:"createEmptyDraft",value:function(){return{asset:"",backgroundColor:"",lightContent:!1,gradientOverlap:!1,gradientSize:.6}}},{key:"fetchInitialDraftInfo",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.contentHash){e.next=2;break}return e.abrupt("return");case 2:return(t=new Xe.ContentInfoQuery).setContentHash(this.contentHash),e.next=6,this.fullGraphic.getInfo(t);case 6:n=e.sent,this.setInitialDraft({asset:n.getFullGraphicAsset(),backgroundColor:n.getStyleBackgroundColor(),gradientOverlap:n.getStyleGradientOverlap(),lightContent:n.getStyleLightContent(),gradientSize:n.getStyleGradientSize()});case 8:case"end":return e.stop()}}),e,this)})))}},{key:"hasImageContent",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDraft();case 2:return e.abrupt("return",!!e.sent.asset);case 3:case"end":return e.stop()}}),e,this)})))}},{key:"hasTextContent",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})))}},{key:"submitDraftNew",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDraft();case 2:return t=e.sent,(n=new Un.FullGraphicInfo).setFullGraphicAsset(t.asset),n.setStyleBackgroundColor(t.backgroundColor),n.setStyleGradientOverlap(t.gradientOverlap),n.setStyleLightContent(t.lightContent),n.setStyleGradientSize(t.gradientSize),e.t0=Ke,e.next=12,this.fullGraphic.new(n);case 12:return e.t1=e.sent,e.t2={type:this.type},e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 15:case"end":return e.stop()}}),e,this)})))}},{key:"submitDraftUpdate",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t,n,i,r,a,o,l,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.contentHash,n=this.initialDraftDifference(),(i=new Un.DeltaFullGraphicInfo).setContentHash(t),"asset"in n&&((r=new j.StringDelta).setNewString(n.asset),i.setFullGraphicAsset(r)),"backgroundColor"in n&&((a=new j.StringDelta).setNewString(n.backgroundColor),i.setStyleBackgroundColor(a)),"gradientOverlap"in n&&((o=new j.BoolDelta).setNewBool(n.gradientOverlap),i.setStyleGradientOverlap(o)),"lightContent"in n&&((l=new j.BoolDelta).setNewBool(n.lightContent),i.setStyleLightContent(l)),"gradientSize"in n&&((u=new j.FloatDelta).setNewFloat(n.gradientSize),i.setStyleGradientSize(u)),e.t0=Ke,e.next=9,this.fullGraphic.update(i);case 9:return e.t1=e.sent,e.t2={type:this.type},e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 12:case"end":return e.stop()}}),e,this)})))}},{key:"getStyleImageAsset",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDraft();case 2:return e.abrupt("return",e.sent.asset);case 3:case"end":return e.stop()}}),e,this)})))}},{key:"updatePreviewComponent",value:function(e){return Object(x.a)(this,void 0,void 0,s().mark((function t(){var n,i,r,a,o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.cloneDraftMergedWithInitialFetchIfNeeded();case 2:if(n=t.sent,i=0,r=0,!n.asset){t.next=10;break}return a=window.MINGA_ASSET_URL_PREFIX+n.asset,t.next=8,Object(Tn.d)(a);case 8:o=t.sent,i=o.width,r=o.height;case 10:e.instance.disableActions=!1,e.instance.contentHash="",e.instance.contextHash="",e.instance.content={gradientSize:n.gradientSize,backgroundColor:n.backgroundColor,gradientOverlap:n.gradientOverlap,lightContent:n.lightContent,commentCount:0,commentList:[],commentListPage:0,likeCount:0,timestamp:Date.now(),image:{url:"",height:0,width:0,sizeMap:[["raw",{height:r,width:i,path:n.asset}]]},title:"",totalCommentCount:0};case 11:case"end":return t.stop()}}),t,this)})))}},{key:"createPreviewComponent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.injector;return Object(x.a)(this,void 0,void 0,s().mark((function t(){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.componentFactory.create(e),t.next=3,this.updatePreviewComponent(n);case 3:return t.abrupt("return",n);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"previewComponentBackgroundColor",value:function(e){return e.instance.content.backgroundColor}}]),n}(A),qn=((hn=function(e){g(n,e);var t=p(n);function n(e){var i;return l(this,n),(i=t.call(this)).fullGraphicInfoDraftService=e,i}return c(n,[{key:"resolveFromContentHash",value:function(e){return this.fullGraphicInfoDraftService.ensureInfoDraftInstance(e)}}]),n}(ut)).\u0275fac=function(e){return new(e||hn)(v["\u0275\u0275inject"](Gn))},hn.\u0275prov=v["\u0275\u0275defineInjectable"]({token:hn,factory:hn.\u0275fac}),hn),$n=o("FHm2"),Qn=o("+Iyi"),Kn=o("0/Ay"),Yn=o("62mg"),Zn=o("oFih"),Jn=o("/jon"),Xn=o("P4MA"),ei=function(e){return e.UNSET="",e.LIST="LIST",e.EMOTIVE="EMOTIVE",e}({}),ti=((vn=function(e){g(n,e);var t=p(n);function n(e,i,r,a,o,s,u){var c;return l(this,n),(c=t.call(this,e,"PollContent")).componentResolver=i,c.pollService=r,c.pollStyleLibrary=a,c.injector=o,c.auth=s,c.permissions=u,c}return c(n,[{key:"createInfoDraftInstance",value:function(e){return new ni(this.userStorage,this.componentResolver,this.pollService,this.pollStyleLibrary,this.auth,this.injector,this.storagePrefix,e,this.permissions)}}]),n}(it)).\u0275fac=function(e){return new(e||vn)(v["\u0275\u0275inject"](rt.a),v["\u0275\u0275inject"](v.ComponentFactoryResolver),v["\u0275\u0275inject"](Jn.Poll),v["\u0275\u0275inject"](Xn.PollStyleLibrary),v["\u0275\u0275inject"](v.Injector),v["\u0275\u0275inject"](ot.a),v["\u0275\u0275inject"](te.c))},vn.\u0275prov=v["\u0275\u0275defineInjectable"]({token:vn,factory:vn.\u0275fac}),vn),ni=function(e){g(n,e);var t=p(n);function n(e,i,r,a,o,s,u,c,d){var g;return l(this,n),(g=t.call(this,e,d,u,c)).pollService=r,g.pollStyleLibrary=a,g.auth=o,g.injector=s,g.permissions=d,g.componentFactory=i.resolveComponentFactory(Kn.a),g}return c(n,[{key:"type",get:function(){return"poll"}},{key:"contentType",get:function(){return"POLL"}},{key:"isListPoll",value:function(e){return e?e.pollType===ei.LIST:this._draftFieldIs("pollType",ei.LIST)}},{key:"isEmotivePoll",value:function(e){return e?e.pollType===ei.EMOTIVE:this._draftFieldIs("pollType",ei.EMOTIVE)}},{key:"createEmptyDraft",value:function(){return{question:"",pollStyleId:0,pollType:ei.LIST,listPollChoices:[{choiceId:0,choiceText:""},{choiceId:0,choiceText:""}],showResults:!0,closed:!1,points:0}}},{key:"fetchInitialDraftInfo",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t,n,i,r,a,o,l,u,c,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.contentHash){e.next=2;break}return e.abrupt("return");case 2:return(t=new Xe.ContentInfoQuery).setContentHash(this.contentHash),e.next=6,this.pollService.getInfo(t);case 6:n=e.sent,i=n.getQuestion(),r=n.getPollStyleId(),a=n.getShowResults(),o=n.getCloseDate(),l=n.getClosed(),u=n.getPoints(),c=o?Object(B.b)(o).getTime():0,n.hasListPollChoices()?(d=n.getListPollChoices().getChoiceList(),this.setInitialDraft({pollType:ei.LIST,listPollChoices:d.map((function(e){return e.toObject()})),question:i,closeOnDate:c,closed:l,pollStyleId:r,showResults:a,points:u})):n.hasEmotivePollChoices()&&this.setInitialDraft({pollType:ei.EMOTIVE,question:i,closeOnDate:c,closed:l,pollStyleId:r,showResults:a,points:u});case 15:case"end":return e.stop()}}),e,this)})))}},{key:"_fillInEmotivePollDraft",value:function(e,t){var n=new Yn.PollInfo.EmotivePollChoices;e.setEmotivePollChoices(n)}},{key:"_fillInListPollDraft",value:function(e,t){var n,i=new Yn.PollInfo.ListPollChoices,a=r(t.listPollChoices||[]);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=new Yn.PollInfo.ListPollChoices.Choice;s.setChoiceId(o.choiceId),s.setChoiceText(o.choiceText),i.addChoice(s)}}catch(l){a.e(l)}finally{a.f()}e.setListPollChoices(i)}},{key:"submitDraftNew",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t,n,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDraft();case 2:t=e.sent,(n=new Yn.PollInfo).setQuestion(t.question),n.setPollStyleId(t.pollStyleId),n.setShowResults(t.showResults),n.setClosed(t.closed),n.setPoints(t.points),t.closeOnDate&&(i=Object(B.e)(new Date(t.closeOnDate)),n.setCloseDate(i)),e.t0=t.pollType,e.next=e.t0===ei.EMOTIVE?8:e.t0===ei.LIST?10:11;break;case 8:return this._fillInEmotivePollDraft(n,t),e.abrupt("break",11);case 10:this._fillInListPollDraft(n,t);case 11:return e.t1=Ke,e.next=14,this.pollService.new(n);case 14:return e.t2=e.sent,e.t3={type:this.type},e.abrupt("return",(0,e.t1)(e.t2,e.t3));case 17:case"end":return e.stop()}}),e,this)})))}},{key:"submitDraftUpdate",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t,n,i,a,o,l,u,c,d,g,f,p,h,v,m,y;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchInitialDraftInfo();case 2:return e.next=4,this.initialDraftDifference();case 4:if(t=e.sent,(n=new Yn.DeltaPollInfo).setContentHash(this.contentHash),"question"in t&&((i=new j.StringDelta).setNewString(t.question),n.setQuestion(i)),"pollStyleId"in t&&((a=new j.Uint32Delta).setNewUint32(t.pollStyleId),n.setPollStyleId(a)),"showResults"in t&&((o=new j.BoolDelta).setNewBool(t.showResults),n.setShowResults(o)),"closeOnDate"in t&&(l=new j.DateDelta,t.closeOnDate&&(u=new Date(t.closeOnDate),l.setNewDate(Object(B.e)(u))),n.setCloseDate(l)),"closed"in t&&((c=new j.BoolDelta).setNewBool(t.closed),n.setClosed(c)),"points"in t&&((d=new j.Int32Delta).setNewInt32(t.points),n.setPoints(d)),this.isListPoll()){if("listPollChoices"in t){g=t.listPollChoices||[],f=new Yn.PollInfo.ListPollChoices,p=r(g);try{for(p.s();!(h=p.n()).done;)v=h.value,(m=new Yn.PollInfo.ListPollChoices.Choice).setChoiceId(v.choiceId),m.setChoiceText(v.choiceText),f.addChoice(m)}catch(s){p.e(s)}finally{p.f()}n.setListPollChoices(f)}}else this.isEmotivePoll()&&(y=new Yn.PollInfo.EmotivePollChoices,n.setEmotivePollChoices(y));return e.t0=Ke,e.next=16,this.pollService.update(n);case 16:return e.t1=e.sent,e.t2={type:this.type},e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 19:case"end":return e.stop()}}),e,this)})))}},{key:"getPollStyle",value:function(e){return Object(x.a)(this,void 0,void 0,s().mark((function t(){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new Qn.PollStyleLibraryGet).setPollStyleId(e),t.next=4,this.pollStyleLibrary.get(n);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"updatePreviewComponent",value:function(e){return Object(x.a)(this,void 0,void 0,s().mark((function t(){var n,i,r,a,o,l;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.auth.getPersonViewMinimalFromCurrentPerson(),t.next=3,this.cloneDraftMergedWithInitialFetchIfNeeded();case 3:return i=t.sent,a=[],t.next=7,this.getPollStyle(i.pollStyleId);case 7:if(o=t.sent,!this.isListPoll(i)){t.next=12;break}r=Zn.PollLayout.PL_LIST,a=(i.listPollChoices||[]).map((function(e){return{text:e.choiceText,icon:"",count:0,choiceId:e.choiceId}})),t.next=15;break;case 12:if(this.isEmotivePoll(i)){t.next=14;break}throw new Error("Unhandled poll type:"+i.pollType);case 14:r=Zn.PollLayout.PL_GRID,a.push({text:"",icon:"sad",count:0,choiceId:0}),a.push({text:"",icon:"meh",count:0,choiceId:0}),a.push({text:"",icon:"happy",count:0,choiceId:0});case 15:l=0,i.closeOnDate&&(l=i.closeOnDate),e.instance.ignorePermissions=!0,e.instance.content={question:i.question,showResults:i.showResults,choiceList:a,authorPersonView:n.toObject(),contentHash:"",closeTimestamp:l,pollBgImage:Object(dt.b)(o.getPollStyleAsset()),timestamp:Date.now(),totalChoiceCount:0,pollLayout:r,pollClosed:i.closed,ownerGroupHash:"",points:i.points,hasResponded:-1,hasLiked:!1};case 17:case"end":return t.stop()}}),t,this)})))}},{key:"createPreviewComponent",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.componentFactory.create(this.injector),e.next=3,this.updatePreviewComponent(t);case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})))}}]),n}(A),ii=o("//iD"),ri=o("bN3Y"),ai=o("Tmav"),oi=["form"];function si(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",5),v["\u0275\u0275elementStart"](1,"div",6),v["\u0275\u0275text"](2,"Choose poll type"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](3,"div",5),v["\u0275\u0275elementStart"](4,"mg-box-select",7),v["\u0275\u0275listener"]("ngModelChange",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().pollType=e}))("ngModelChange",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().onPollTypeChange(e)})),v["\u0275\u0275elementStart"](5,"mg-box-select-option",8),v["\u0275\u0275element"](6,"div",9),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](7,"mg-box-select-option",8),v["\u0275\u0275element"](8,"div",10),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){var i=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("ngModel",i.pollType),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("value",i.PollType.LIST),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("value",i.PollType.EMOTIVE)}}function li(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"mg-box-select-option",8),v["\u0275\u0275element"](1,"div",13),v["\u0275\u0275pipe"](2,"mgAssetUrl"),v["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;v["\u0275\u0275property"]("value",n.pollStyleId),v["\u0275\u0275advance"](1),v["\u0275\u0275styleProp"]("background-image","url("+v["\u0275\u0275pipeBind1"](2,3,n.pollStyleAsset)+")")}}function ui(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",5),v["\u0275\u0275elementStart"](1,"div",6),v["\u0275\u0275text"](2,"Choose poll background"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](3,"div",5),v["\u0275\u0275elementStart"](4,"mg-box-select",11),v["\u0275\u0275listener"]("ngModelChange",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().pollStyleId=e}))("ngModelChange",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().onPollStyleIdChange(e)})),v["\u0275\u0275template"](5,li,3,5,"mg-box-select-option",12),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){var i=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("ngModel",i.pollStyleId),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngForOf",i.pollStyles)}}function ci(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"mat-error"),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](2,1,"input.generic.error.tooLong")))}var di=function(){return{value:"Question"}};function gi(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"mat-error"),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind2"](2,1,"input.generic.error.required",v["\u0275\u0275pureFunction0"](4,di))))}function fi(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"mat-hint",21),v["\u0275\u0275text"](1),v["\u0275\u0275elementEnd"]()),2&e){var n=v["\u0275\u0275nextContext"](2);v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"]("",n.question.length," / 255")}}function pi(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"div",27),v["\u0275\u0275elementStart"](1,"mg-icon"),v["\u0275\u0275text"](2,"delete"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]())}function hi(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"mat-error"),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](2,1,"input.generic.error.tooLong")))}var vi=function(){return{value:"Choice"}};function mi(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"mat-error"),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind2"](2,1,"input.generic.error.required",v["\u0275\u0275pureFunction0"](4,vi))))}function yi(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"mat-hint",21),v["\u0275\u0275text"](1),v["\u0275\u0275elementEnd"]()),2&e){var n=v["\u0275\u0275nextContext"]().$implicit;v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"]("",n.choiceText.length," / 255")}}function bi(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275elementStart"](1,"mat-form-field",22),v["\u0275\u0275elementStart"](2,"span",23),v["\u0275\u0275listener"]("click",(function(){v["\u0275\u0275restoreView"](n);var e=t.index;return v["\u0275\u0275nextContext"](2).removeChoice(e)})),v["\u0275\u0275template"](3,pi,3,0,"div",24),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"mat-label"),v["\u0275\u0275text"](5),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](6,"mg-textarea",25,26),v["\u0275\u0275listener"]("ngModelChange",(function(e){return t.$implicit.choiceText=e}))("ngModelChange",(function(e){v["\u0275\u0275restoreView"](n);var i=t.index;return v["\u0275\u0275nextContext"](2).onPollChoiceChange(e,i)})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](8,hi,3,3,"mat-error",17),v["\u0275\u0275template"](9,mi,3,5,"mat-error",17),v["\u0275\u0275template"](10,yi,2,1,"mat-hint",18),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementContainerEnd"]()}if(2&e){var i=t.$implicit,r=t.index,a=v["\u0275\u0275reference"](7),o=v["\u0275\u0275nextContext"](2);v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("mgHideOptionalMarker",!0),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",o.pollChoices.length>2),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"]("Enter ",o.ordinal(r+1)," choice..."),v["\u0275\u0275advance"](1),v["\u0275\u0275propertyInterpolate1"]("name","pollChoice_",r,""),v["\u0275\u0275property"]("required",!0)("multiline",!1)("maxlength",255)("ngModel",i.choiceText),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",null==a.control||null==a.control.errors?null:a.control.errors.maxlength),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",(null==a.control?null:a.control.touched)&&(null==a.control||null==a.control.errors?null:a.control.errors.required)),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",i.choiceText)}}function Ci(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",28),v["\u0275\u0275elementStart"](1,"div",29),v["\u0275\u0275listener"]("click",(function(){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"](2).addPollChoice()})),v["\u0275\u0275elementStart"](2,"mg-icon"),v["\u0275\u0275text"](3,"post"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"span"),v["\u0275\u0275text"](5,"Add another choice"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275element"](6,"div",30),v["\u0275\u0275elementEnd"]()}}function ki(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275elementStart"](1,"div",5),v["\u0275\u0275elementStart"](2,"div",6),v["\u0275\u0275text"](3,"Poll question & choices"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"div",5),v["\u0275\u0275elementStart"](5,"mat-form-field",14),v["\u0275\u0275elementStart"](6,"mat-label"),v["\u0275\u0275text"](7,"Enter your question..."),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](8,"mg-textarea",15,16),v["\u0275\u0275listener"]("ngModelChange",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().question=e}))("ngModelChange",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().onQuestionChange(e)})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](10,ci,3,3,"mat-error",17),v["\u0275\u0275template"](11,gi,3,5,"mat-error",17),v["\u0275\u0275template"](12,fi,2,1,"mat-hint",18),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](13,bi,11,11,"ng-container",19),v["\u0275\u0275template"](14,Ci,7,0,"div",20),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementContainerEnd"]()}if(2&e){var i=v["\u0275\u0275reference"](9),r=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](8),v["\u0275\u0275property"]("multiline",!1)("maxlength",255)("required",!0)("ngModel",r.question),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",null==i.control||null==i.control.errors?null:i.control.errors.maxlength),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",(null==i.control?null:i.control.touched)&&(null==i.control||null==i.control.errors?null:i.control.errors.required)),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",r.question),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngForOf",r.pollChoices),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",r.pollChoices.length<10)}}function Mi(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"mat-error"),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](2,1,"input.generic.error.tooLong")))}function wi(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"mat-error"),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind2"](2,1,"input.generic.error.required",v["\u0275\u0275pureFunction0"](4,di))))}function Oi(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"mat-hint",21),v["\u0275\u0275text"](1),v["\u0275\u0275elementEnd"]()),2&e){var n=v["\u0275\u0275nextContext"](2);v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"]("",n.question.length," / 255")}}function xi(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275elementStart"](1,"div",5),v["\u0275\u0275elementStart"](2,"div",6),v["\u0275\u0275text"](3,"Poll question"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"mat-form-field",31),v["\u0275\u0275elementStart"](5,"mat-label"),v["\u0275\u0275text"](6,"Enter your question..."),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](7,"mg-textarea",32,33),v["\u0275\u0275listener"]("ngModelChange",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().question=e}))("ngModelChange",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().onQuestionChange(e)})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](9,Mi,3,3,"mat-error",17),v["\u0275\u0275template"](10,wi,3,5,"mat-error",17),v["\u0275\u0275template"](11,Oi,2,1,"mat-hint",18),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementContainerEnd"]()}if(2&e){var i=v["\u0275\u0275reference"](8),r=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](7),v["\u0275\u0275property"]("multiline",!1)("required",!0)("maxlength",255)("ngModel",r.question),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",null==i.control||null==i.control.errors?null:i.control.errors.maxlength),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",(null==i.control?null:i.control.touched)&&(null==i.control||null==i.control.errors?null:i.control.errors.required)),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",r.question)}}function Di(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"mg-points-selector",34),v["\u0275\u0275listener"]("pointsClick",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().onPointsChange(e)})),v["\u0275\u0275elementEnd"]()}if(2&e){var i=v["\u0275\u0275nextContext"]();v["\u0275\u0275property"]("title","Points awarded to people who respond to this poll")("selectedPoints",i.points)}}var Si,Fi,Pi,Ii=((Si=function(e){g(n,e);var t=p(n);function n(e,i,r,a,o,s,u,c){var d;return l(this,n),(d=t.call(this,e,i,r,s,u)).route=e,d.router=i,d.matDialog=r,d.pollStyleLibrary=a,d.rootService=o,d.snackBar=s,d.groupsFacadeService=u,d.pointsManager=c,d.question="",d.pollChoices=[{choiceId:0,choiceText:""},{choiceId:0,choiceText:""}],d.pollType=ei.LIST,d.pollStyleId=0,d.pollStyles=[],d.points=0,d.PollType=ei,d.rootService.addLoadingPromise(d._initStyleList()),d.canAllocateContentPoints$=d.pointsManager.getCanCurrentUserAllocatePointsObs(),d}return c(n,[{key:"_initStyleList",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new Qn.PollStyleLibraryList).setCount(10),t.setOffset(0),e.next=4,this.pollStyleLibrary.list(t);case 4:n=e.sent.getPollStyleList(),this.pollStyles=n.map((function(e){return e.toObject()})),!this.pollStyleId&&this.pollStyles.length>0&&(this.pollStyleId=this.pollStyles[0].pollStyleId);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"ngAfterViewInit",value:function(){var e=this;this.form.statusChanges.subscribe((function(t){"VALID"===t?e.enableNextStep():e.disableNextStep()}))}},{key:"addPollChoice",value:function(){this.pollChoices.push({choiceId:0,choiceText:""}),this._updatePollChoices()}},{key:"removeChoice",value:function(e){this.pollChoices.splice(e,1),this.pollChoices=this.pollChoices.map((function(e){return Object.assign({},e)})),this._updatePollChoices()}},{key:"mgContentInfoDraftReady",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.contentInfoDraft,e.next=3,t.cloneDraftMergedWithInitialFetchIfNeeded();case 3:n=e.sent,t.isListPoll(n)?this.pollChoices=n.listPollChoices||[]:t.isEmotivePoll(n),this.question=n.question,this.pollType=n.pollType,this.pollStyleId=n.pollStyleId,this.points=n.points;case 5:case"end":return e.stop()}}),e,this)})))}},{key:"getPreviousStep",value:function(){return{name:"Cancel",icon:"close"}}},{key:"previousStep",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.exitDraft();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"getNextStep",value:function(){return{name:"Preview",icon:"forward"}}},{key:"nextStep",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contentInfoDraft.saveToDraft("pollStyleId",this.pollStyleId);case 2:return e.next=4,this.navigateToPreview();case 4:case"end":return e.stop()}}),e,this)})))}},{key:"_updatePollChoices",value:function(){this.contentInfoDraft.isListPoll()&&this.contentInfoDraft.saveToDraft("listPollChoices",this.pollChoices)}},{key:"onQuestionChange",value:function(e){this.contentInfoDraft.saveToDraft("question",e)}},{key:"onPollTypeChange",value:function(e){this.contentInfoDraft.saveToDraft("pollType",e),this._updatePollChoices()}},{key:"onPollChoiceChange",value:function(e,t){this._updatePollChoices()}},{key:"onPollStyleIdChange",value:function(e){this.contentInfoDraft.saveToDraft("pollStyleId",e)}},{key:"onPointsChange",value:function(e){this.contentInfoDraft.saveToDraft("points",e)}},{key:"ordinal",value:function(e){return Object($n.a)(e).format("0o")}}]),n}($)).\u0275fac=function(e){return new(e||Si)(v["\u0275\u0275directiveInject"](y.a),v["\u0275\u0275directiveInject"](y.g),v["\u0275\u0275directiveInject"](G.b),v["\u0275\u0275directiveInject"](Xn.PollStyleLibrary),v["\u0275\u0275directiveInject"](K.a),v["\u0275\u0275directiveInject"](H.b),v["\u0275\u0275directiveInject"](q.b),v["\u0275\u0275directiveInject"](bt.b))},Si.\u0275cmp=v["\u0275\u0275defineComponent"]({type:Si,selectors:[["mg-create-poll"]],viewQuery:function(e,t){var n;1&e&&v["\u0275\u0275viewQuery"](oi,3),2&e&&v["\u0275\u0275queryRefresh"](n=v["\u0275\u0275loadQuery"]())&&(t.form=n.first)},features:[v["\u0275\u0275InheritDefinitionFeature"]],decls:9,vars:8,consts:[["form","ngForm"],["class","input-group",4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"title","selectedPoints","pointsClick",4,"ngIf"],[1,"input-group"],[1,"mg-bodycopy"],["name","pollType","required","",3,"ngModel","ngModelChange"],[3,"value"],[1,"list-poll-bg-img","bg-img"],[1,"emotive-poll-bg-img","bg-img"],["required","","minlength","1","maxlength","255","name","pollStyleId",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"bg-img"],["mgFormField","","hideRequiredMarker",""],["matInput","","mgMentionable2","inline","allowedTags","mg-mention","autocomplete","off","name","pollQuestion",3,"multiline","maxlength","required","ngModel","ngModelChange"],["pollQuestionInput","ngModel"],[4,"ngIf"],["align","end",4,"ngIf"],[4,"ngFor","ngForOf"],["class","input-group","fxLayout","row","fxLayoutAlign","start center",4,"ngIf"],["align","end"],["mgFormField","","hideRequiredMarker","",3,"mgHideOptionalMarker"],["matSuffix","",3,"click"],["class","remove-choice-icon",4,"ngIf"],["matInput","","autocomplete","off",3,"required","multiline","maxlength","name","ngModel","ngModelChange"],["choiceTextInput","ngModel"],[1,"remove-choice-icon"],["fxLayout","row","fxLayoutAlign","start center",1,"input-group"],["fxLayout","row","fxLayoutAlign","start center",1,"add-poll-choice-btn",3,"click"],["fxFlex",""],["mgFormField","","hideRequiredMarker","",1,"form-input-hpadding"],["mgMentionable2","inline","allowedTags","mg-mention","autocomplete","off","name","pollQuestion",3,"multiline","required","maxlength","ngModel","ngModelChange"],["emotiveQuestionInput","ngModel"],[3,"title","selectedPoints","pointsClick"]],template:function(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"form",null,0),v["\u0275\u0275template"](2,si,9,3,"div",1),v["\u0275\u0275template"](3,ui,6,2,"div",1),v["\u0275\u0275elementContainerStart"](4,2),v["\u0275\u0275template"](5,ki,15,9,"ng-container",3),v["\u0275\u0275template"](6,xi,12,7,"ng-container",3),v["\u0275\u0275elementContainerEnd"](),v["\u0275\u0275template"](7,Di,1,2,"mg-points-selector",4),v["\u0275\u0275pipe"](8,"async"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",!t.contentHash),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",t.pollType),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngSwitch",t.pollType),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngSwitchCase",t.PollType.LIST),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngSwitchCase",t.PollType.EMOTIVE),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",v["\u0275\u0275pipeBind1"](8,6,t.canAllocateContentPoints$)))},directives:[ue.E,ue.u,ue.v,h.o,h.q,h.r,ii.a,ue.B,ue.t,ue.w,ri.a,ue.o,ue.n,h.n,Ie.d,_e.a,Ie.h,Te.a,Ee.a,Ie.c,Ie.g,Ie.j,Ct.a,_t.a],pipes:[h.b,ai.a,b.d],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");mat-form-field[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{color:#737373}mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-family:Muli,sans-serif;line-height:1.35;box-sizing:border-box}@media (orientation:landscape){mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-size:3.1400966184vh}}@media (orientation:portrait){mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-size:3.1400966184vw}}@media (orientation:landscape) and (max-height:414px){mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-size:13px}}@media (orientation:portrait) and (max-width:414px){mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-size:13px}}@media (min-width:445.8461538462px){mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-size:14px}}.form-input-hpadding[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px}.pseudo-mg-input[_ngcontent-%COMP%]{color:#737373;border-bottom:1px solid #ccc}.pseudo-mg-input[_ngcontent-%COMP%]     .textarea-placeholder{color:#2f2f2f}.input-margin[_ngcontent-%COMP%]{margin:8px}.input-group[_ngcontent-%COMP%]{margin:16px;--mg-form-field-margin:4px 0}.input-group.vmargin-only[_ngcontent-%COMP%]{margin:16px 0}.input-group[_ngcontent-%COMP%] > .input-group[_ngcontent-%COMP%]{padding:0;margin:16px 0}mat-form-field[mgFormField][_ngcontent-%COMP%] + .input-group[_ngcontent-%COMP%]{margin-top:0}.input-hpadding[_ngcontent-%COMP%]{padding-left:14px;padding-right:14px}.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-family:Muli,sans-serif;font-weight:700;line-height:1.35}@media (orientation:landscape){.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:3.8647342995vh}}@media (orientation:portrait){.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:3.8647342995vw}}@media (orientation:landscape) and (max-height:414px){.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:16px}}@media (orientation:portrait) and (max-width:414px){.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:16px}}@media (min-width:439.875px){.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:17px}}.mg-draft-dirty[_ngcontent-%COMP%]{color:#036}.text-input[_ngcontent-%COMP%]{padding:16px;border-top:1px solid #e2e2e2}.text-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border:none;color:#737373;font-size:16px;font-weight:400;font-family:Muli,sans-serif}.text-input[_ngcontent-%COMP%]   input.mg-draft-dirty[_ngcontent-%COMP%]{color:#036}.text-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.input-padding[_ngcontent-%COMP%]{padding:16px}.body-input[_ngcontent-%COMP%]{border-top:1px solid #e2e2e2;color:#737373}.body-input.mg-draft-dirty[_ngcontent-%COMP%], .mg-label[_ngcontent-%COMP%]{color:#2f2f2f}.mg-label[_ngcontent-%COMP%]{margin-top:8px}mat-slide-toggle.toggle-with-subtext[_ngcontent-%COMP%]{margin-left:0;margin-bottom:14px}mat-slide-toggle.toggle-with-subtext[_ngcontent-%COMP%]:first-child{margin-top:0;margin-bottom:14px}mat-slide-toggle.toggle-with-subtext[_ngcontent-%COMP%]     .mat-slide-toggle-label{align-items:flex-start}mat-slide-toggle.toggle-with-subtext[_ngcontent-%COMP%]     .mat-slide-toggle-label .mat-slide-toggle-content{text-align:left;padding-bottom:.5em}mat-slide-toggle.toggle-with-subtext[_ngcontent-%COMP%]     .mat-slide-toggle-label .mat-slide-toggle-content .toggle-subtext{display:block;white-space:normal;margin-top:1em}[_nghost-%COMP%]{overflow:hidden;display:block}.pollBg1[_ngcontent-%COMP%]{background-color:purple}.pollBg2[_ngcontent-%COMP%]{background-color:#00f}.pollBg3[_ngcontent-%COMP%]{background-color:#d3d3d3}.bg-img[_ngcontent-%COMP%]{background-position:50%;background-size:cover;background-repeat:no-repeat;position:absolute;top:0;left:0;right:0;bottom:0}.remove-choice-icon[_ngcontent-%COMP%]{width:16px;cursor:pointer}.emotive-poll-bg-img[_ngcontent-%COMP%]{background-size:85%;background-image:url(/assets/content/emotive_poll_icon.svg)}.list-poll-bg-img[_ngcontent-%COMP%]{background-size:85%;background-image:url(/assets/content/list_poll_icon.svg)}.add-poll-choice-btn[_ngcontent-%COMP%]{cursor:pointer}.add-poll-choice-btn[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{display:inline-block;margin-right:16px}mg-points-selector[_ngcontent-%COMP%]{width:100%;display:inline-block;margin:0 0 16px 16px}']}),Si),_i=o("436P"),Ti=((Pi=c((function e(){l(this,e)}))).\u0275fac=function(e){return new(e||Pi)},Pi.\u0275mod=v["\u0275\u0275defineNgModule"]({type:Pi}),Pi.\u0275inj=v["\u0275\u0275defineInjector"]({imports:[[Ae.a,Pn.a,Ge.a,$e.b,_i.a,qe.a,Dn.a,h.c,ue.m,Ie.f,Dt.c,b.c]]}),Pi),Ei=((Fi=function(e){g(n,e);var t=p(n);function n(e){var i;return l(this,n),(i=t.call(this)).pollInfoDraftService=e,i}return c(n,[{key:"resolveFromContentHash",value:function(e){return this.pollInfoDraftService.ensureInfoDraftInstance(e)}}]),n}(ut)).\u0275fac=function(e){return new(e||Fi)(v["\u0275\u0275inject"](ti))},Fi.\u0275prov=v["\u0275\u0275defineInjectable"]({token:Fi,factory:Fi.\u0275fac}),Fi),Bi=o("cKGL"),ji=o("cEQe"),Ri=["form"];function zi(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"div",10),v["\u0275\u0275text"](1),v["\u0275\u0275elementEnd"]()),2&e){var n=v["\u0275\u0275nextContext"](2);v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"](" +",n.imageAssets.length-1," ")}}function Ni(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",5),v["\u0275\u0275listener"]("click",(function(){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().showSingleImage=!1})),v["\u0275\u0275elementStart"](1,"div",6),v["\u0275\u0275elementStart"](2,"mg-icon"),v["\u0275\u0275text"](3,"camera-o"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"div"),v["\u0275\u0275text"](5,"Change / Remove / Add Images"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275element"](6,"div",7),v["\u0275\u0275element"](7,"div",8),v["\u0275\u0275template"](8,zi,2,1,"div",9),v["\u0275\u0275elementEnd"]()}if(2&e){var i=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](7),v["\u0275\u0275styleProp"]("background-image","url("+i.getSingleImagePreviewUrl()+")"),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",i.imageAssets.length>1)}}function Vi(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",11),v["\u0275\u0275elementStart"](1,"mg-file-input-upload-many",12),v["\u0275\u0275listener"]("ngModelChange",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().imageAssets=e}))("ngModelChange",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().onImageAssetsChange(e)}))("mgModelStatusChanges",(function(){v["\u0275\u0275restoreView"](n);var e=v["\u0275\u0275nextContext"]();return e.onImageAssetsChange(e.imageAssets)})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){var i=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("required",!i.title&&!i.body)("ngModel",i.imageAssets)}}function Wi(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"mat-error"),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](2,1,"input.title.error.required")))}function Li(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"mat-hint",19),v["\u0275\u0275text"](1),v["\u0275\u0275elementEnd"]()),2&e){var n=v["\u0275\u0275nextContext"](2);v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"]("",n.title.length," / 255")}}var Ui=function(){return{standalone:!0}};function Ai(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",13),v["\u0275\u0275elementStart"](1,"mat-form-field",14),v["\u0275\u0275elementStart"](2,"mat-label"),v["\u0275\u0275text"](3,"Headline"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"mg-textarea",15,16),v["\u0275\u0275listener"]("ngModelChange",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().title=e}))("ngModelChange",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().onTitleChange(e)})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](6,Wi,3,3,"mat-error",17),v["\u0275\u0275template"](7,Li,2,1,"mat-hint",18),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){var i=v["\u0275\u0275reference"](5),r=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](4),v["\u0275\u0275classProp"]("mg-draft-dirty",r.isTitleDirty()),v["\u0275\u0275property"]("multiline",!1)("required",!r.body&&!r.imageAssets)("ngModel",r.title)("ngModelOptions",v["\u0275\u0275pureFunction0"](8,Ui)),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",null==i.control||null==i.control.errors?null:i.control.errors.required),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",r.title)}}var Gi,Hi,qi,$i,Qi=((Gi=function(e){g(n,e);var t=p(n);function n(e,i,r,a,o){var s;return l(this,n),(s=t.call(this,e,i,r,a,o)).route=e,s.router=i,s.matDialog=r,s.snackBar=a,s.groupsFacadeService=o,s.title="",s.body="",s.imageAssets=[],s.showSingleImage=!1,s}return c(n,[{key:"mgContentInfoDraftReady",value:function(){this._initDraft()}},{key:"ngOnInit",value:function(){var e=this;this.checkNextStep(),this.form&&this.form.statusChanges&&this.form.statusChanges.subscribe((function(t){e.checkNextStep()}))}},{key:"_initDraft",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contentInfoDraft.cloneDraftMergedWithInitialFetchIfNeeded();case 2:t=e.sent,this.imageAssets=t.assets.filter((function(e){return!!e})),this.title=t.title,this.body=t.body,this.showSingleImage=!!(this.contentHash&&this.imageAssets.length>0),this.checkNextStep();case 4:case"end":return e.stop()}}),e,this)})))}},{key:"getSingleImagePreviewUrl",value:function(){if(this.imageAssets.length>0){var e=this.imageAssets[0];return Object(dt.b)(e)}return""}},{key:"checkNextStep",value:function(){this.form&&this.form.valid&&(this.title||this.body||this.imageAssets.length>0)?this.enableNextStep():this.disableNextStep()}},{key:"onImageAssetsChange",value:function(e){"VALID"===this.form.controls.imageAssets.status&&(this.contentInfoDraft.saveToDraft("assets",e),this.checkNextStep())}},{key:"getPreviousStep",value:function(){return{name:"Cancel",icon:"close"}}},{key:"previousStep",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.exitDraft();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"getNextStep",value:function(){return{name:"Preview",icon:"forward"}}},{key:"nextStep",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.navigateToPreview();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"isTitleDirty",value:function(){return this.contentInfoDraft.isFieldDirty("title")}},{key:"isBodyDirty",value:function(){return this.contentInfoDraft.isFieldDirty("body")}},{key:"onTitleChange",value:function(e){this.contentInfoDraft.saveToDraft("title",e),this.checkNextStep()}},{key:"onBodyChange",value:function(e){this.contentInfoDraft.saveToDraft("body",e),this.checkNextStep()}}]),n}($)).\u0275fac=function(e){return new(e||Gi)(v["\u0275\u0275directiveInject"](y.a),v["\u0275\u0275directiveInject"](y.g),v["\u0275\u0275directiveInject"](G.b),v["\u0275\u0275directiveInject"](H.b),v["\u0275\u0275directiveInject"](q.b))},Gi.\u0275cmp=v["\u0275\u0275defineComponent"]({type:Gi,selectors:[["mg-create-post"]],viewQuery:function(e,t){var n;1&e&&v["\u0275\u0275viewQuery"](Ri,3),2&e&&v["\u0275\u0275queryRefresh"](n=v["\u0275\u0275loadQuery"]())&&(t.form=n.first)},features:[v["\u0275\u0275InheritDefinitionFeature"]],decls:7,vars:11,consts:[["form","ngForm"],["class","single-image-preview",3,"click",4,"ngIf"],["class","file-input-upload-many-wrap",4,"ngIf"],["class","title-input",4,"hasPermission"],["name","body","placeholder","Share your thoughts...",1,"form-input-hpadding",3,"required","ngModel","maxlength","richContent","ngModelChange"],[1,"single-image-preview",3,"click"],[1,"single-image-preview-overlay-info"],[1,"single-image-preview-overlay"],[1,"single-image-preview-image"],["class","other-images-count",4,"ngIf"],[1,"other-images-count"],[1,"file-input-upload-many-wrap"],["name","imageAssets",3,"required","ngModel","ngModelChange","mgModelStatusChanges"],[1,"title-input"],["mgFormField","",1,"form-input-hpadding"],["mgMentionable2","inline","allowedTags","mg-mention","name","title","autocomplete","off","maxlength","255","type","text",3,"multiline","required","ngModel","ngModelOptions","ngModelChange"],["titleInput","ngModel"],[4,"ngIf"],["align","end",4,"ngIf"],["align","end"]],template:function(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"form",null,0),v["\u0275\u0275template"](2,Ni,9,3,"div",1),v["\u0275\u0275template"](3,Vi,2,2,"div",2),v["\u0275\u0275template"](4,Ai,8,9,"div",3),v["\u0275\u0275elementStart"](5,"mg-body-input",4),v["\u0275\u0275listener"]("ngModelChange",(function(e){return t.body=e}))("ngModelChange",(function(e){return t.onBodyChange(e)})),v["\u0275\u0275pipe"](6,"hasPermission"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",t.showSingleImage),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",!t.showSingleImage),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("hasPermission","CONTENT_POST_SET_TITLE"),v["\u0275\u0275advance"](1),v["\u0275\u0275classProp"]("mg-draft-dirty",t.isBodyDirty()),v["\u0275\u0275property"]("required",!t.title&&!t.imageAssets)("ngModel",t.body)("maxlength",5e3)("richContent",v["\u0275\u0275pipeBind1"](6,9,"CONTENT_HTML_INCLUDE")))},directives:[ue.E,ue.u,ue.v,h.o,Bi.a,Be.a,ue.B,ue.t,ue.w,ue.n,Ct.a,ji.a,It.a,Ie.d,_e.a,Ie.h,Te.a,Ee.a,Ie.c,Ie.g],pipes:[je.a,b.d],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");mat-form-field[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{color:#737373}mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-family:Muli,sans-serif;line-height:1.35;box-sizing:border-box}@media (orientation:landscape){mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-size:3.1400966184vh}}@media (orientation:portrait){mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-size:3.1400966184vw}}@media (orientation:landscape) and (max-height:414px){mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-size:13px}}@media (orientation:portrait) and (max-width:414px){mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-size:13px}}@media (min-width:445.8461538462px){mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-size:14px}}.form-input-hpadding[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px}.pseudo-mg-input[_ngcontent-%COMP%]{color:#737373;border-bottom:1px solid #ccc}.pseudo-mg-input[_ngcontent-%COMP%]     .textarea-placeholder{color:#2f2f2f}.input-margin[_ngcontent-%COMP%]{margin:8px}.input-group[_ngcontent-%COMP%]{margin:16px;--mg-form-field-margin:4px 0}.input-group.vmargin-only[_ngcontent-%COMP%]{margin:16px 0}.input-group[_ngcontent-%COMP%] > .input-group[_ngcontent-%COMP%]{padding:0;margin:16px 0}mat-form-field[mgFormField][_ngcontent-%COMP%] + .input-group[_ngcontent-%COMP%]{margin-top:0}.input-hpadding[_ngcontent-%COMP%]{padding-left:14px;padding-right:14px}.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-family:Muli,sans-serif;font-weight:700;line-height:1.35}@media (orientation:landscape){.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:3.8647342995vh}}@media (orientation:portrait){.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:3.8647342995vw}}@media (orientation:landscape) and (max-height:414px){.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:16px}}@media (orientation:portrait) and (max-width:414px){.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:16px}}@media (min-width:439.875px){.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:17px}}.mg-draft-dirty[_ngcontent-%COMP%]{color:#036}.text-input[_ngcontent-%COMP%]{padding:16px;border-top:1px solid #e2e2e2}.text-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border:none;color:#737373;font-size:16px;font-weight:400;font-family:Muli,sans-serif}.text-input[_ngcontent-%COMP%]   input.mg-draft-dirty[_ngcontent-%COMP%]{color:#036}.text-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.input-padding[_ngcontent-%COMP%]{padding:16px}.body-input[_ngcontent-%COMP%]{border-top:1px solid #e2e2e2;color:#737373}.body-input.mg-draft-dirty[_ngcontent-%COMP%], .mg-label[_ngcontent-%COMP%]{color:#2f2f2f}.mg-label[_ngcontent-%COMP%]{margin-top:8px}mat-slide-toggle.toggle-with-subtext[_ngcontent-%COMP%]{margin-left:0;margin-bottom:14px}mat-slide-toggle.toggle-with-subtext[_ngcontent-%COMP%]:first-child{margin-top:0;margin-bottom:14px}mat-slide-toggle.toggle-with-subtext[_ngcontent-%COMP%]     .mat-slide-toggle-label{align-items:flex-start}mat-slide-toggle.toggle-with-subtext[_ngcontent-%COMP%]     .mat-slide-toggle-label .mat-slide-toggle-content{text-align:left;padding-bottom:.5em}mat-slide-toggle.toggle-with-subtext[_ngcontent-%COMP%]     .mat-slide-toggle-label .mat-slide-toggle-content .toggle-subtext{display:block;white-space:normal;margin-top:1em}.single-image-preview[_ngcontent-%COMP%]{margin-bottom:16px;position:relative;padding-bottom:56.25%;cursor:pointer;overflow:hidden;background-color:#000;border-top-left-radius:var(--overlay-border-radius);border-top-right-radius:var(--overlay-border-radius)}.single-image-preview[_ngcontent-%COMP%]   .single-image-preview-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.5);z-index:2}.single-image-preview[_ngcontent-%COMP%]   .single-image-preview-image[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;background-position:50%;background-size:contain;background-repeat:no-repeat;z-index:1}.single-image-preview[_ngcontent-%COMP%]   .single-image-preview-overlay-info[_ngcontent-%COMP%]{position:absolute;top:50%;left:0;right:0;z-index:3;text-align:center;transform:translateY(-50%);color:#e2e2e2}.single-image-preview[_ngcontent-%COMP%]   .single-image-preview-overlay-info[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{height:64px;width:64px}.single-image-preview[_ngcontent-%COMP%]   .other-images-count[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;padding:8px 16px;margin:8px;color:#e2e2e2;z-index:4}.file-input-upload-many-wrap[_ngcontent-%COMP%]{overflow:hidden;border-top-left-radius:var(--overlay-border-radius);border-top-right-radius:var(--overlay-border-radius)}']}),Gi),Ki=o("yUAh"),Yi=((Hi=c((function e(){l(this,e)}))).\u0275fac=function(e){return new(e||Hi)},Hi.\u0275mod=v["\u0275\u0275defineNgModule"]({type:Hi}),Hi.\u0275inj=v["\u0275\u0275defineInjector"]({imports:[[Pn.a,Ae.a,$e.b,Fn.a,Ge.a,Ki.a,He.a,te.b,qe.a,h.c,ue.m,Ie.f,b.c]]}),Hi),Zi=o("DSt7"),Ji=o("3PcW"),Xi=((qi=function(e){g(n,e);var t=p(n);function n(e,i,r,a,o,s){var u;return l(this,n),(u=t.call(this,e,"PostContent")).componentResolver=i,u.postService=r,u.injector=a,u.auth=o,u.permissions=s,u}return c(n,[{key:"createInfoDraftInstance",value:function(e){return new er(this.userStorage,this.componentResolver,this.postService,this.auth,this.injector,this.storagePrefix,e,this.permissions)}}]),n}(it)).\u0275fac=function(e){return new(e||qi)(v["\u0275\u0275inject"](rt.a),v["\u0275\u0275inject"](v.ComponentFactoryResolver),v["\u0275\u0275inject"](Ji.Post),v["\u0275\u0275inject"](v.Injector),v["\u0275\u0275inject"](ot.a),v["\u0275\u0275inject"](te.c))},qi.\u0275prov=v["\u0275\u0275defineInjectable"]({token:qi,factory:qi.\u0275fac}),qi),er=function(e){g(n,e);var t=p(n);function n(e,i,r,a,o,s,u,c){var d;return l(this,n),(d=t.call(this,e,c,s,u)).postService=r,d.auth=a,d.injector=o,d.permissions=c,d.componentFactory=i.resolveComponentFactory(C.d),d}return c(n,[{key:"type",get:function(){return"post"}},{key:"contentType",get:function(){return"POST"}},{key:"createEmptyDraft",value:function(){return{assets:[],body:"",title:""}}},{key:"fetchInitialDraftInfo",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.contentHash){e.next=2;break}return e.abrupt("return");case 2:return(t=new Xe.ContentInfoQuery).setContentHash(this.contentHash),e.next=6,this.postService.getInfo(t);case 6:n=e.sent,this.setInitialDraft({assets:n.getAssetList(),body:n.getBody(),title:n.getTitle()});case 8:case"end":return e.stop()}}),e,this)})))}},{key:"hasImageContent",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDraft();case 2:return e.t0=e.sent.assets.length,e.abrupt("return",e.t0>0);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"hasTextContent",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDraft();case 2:return t=e.sent,e.abrupt("return",!!t.body||!!t.title);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"submitDraftNew",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDraft();case 2:return t=e.sent,(n=new Zi.PostInfo).setAssetList(t.assets),n.setBody(t.body),n.setTitle(t.title),e.t0=Ke,e.next=10,this.postService.new(n);case 10:return e.t1=e.sent,e.t2={type:this.type},e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 13:case"end":return e.stop()}}),e,this)})))}},{key:"submitDraftUpdate",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t,n,i,r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchInitialDraftInfo();case 2:return e.next=4,this.initialDraftDifference();case 4:return t=e.sent,(n=new Zi.DeltaPostInfo).setContentHash(this.contentHash),"body"in t&&((i=new j.StringDelta).setNewString(t.body),n.setBody(i)),"title"in t&&((r=new j.StringDelta).setNewString(t.title),n.setTitle(r)),e.next=10,this.makeRepeatedStringDelta("assets");case 10:return a=e.sent,n.setAssetList(a),e.t0=Ke,e.next=15,this.postService.update(n);case 15:return e.t1=e.sent,e.t2={type:this.type},e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 18:case"end":return e.stop()}}),e,this)})))}},{key:"updatePreviewComponent",value:function(e){return Object(x.a)(this,void 0,void 0,s().mark((function t(){var n,i,a,o,l,u,c,d,g,f,p;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.auth.getPersonViewMinimalFromCurrentPerson(),t.next=3,this.cloneDraftMergedWithInitialFetchIfNeeded();case 3:i=t.sent,a=[],o=r(i.assets),t.prev=6,o.s();case 8:if((l=o.n()).done){t.next=20;break}return u=l.value,c=[],d=window.MINGA_ASSET_URL_PREFIX+u,t.next=14,Object(Tn.d)(d);case 14:g=t.sent,f=g.width,p=g.height,c.push(["raw",{width:f,height:p,path:u}]),a.push({sizeMap:c});case 18:t.next=8;break;case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(6),o.e(t.t0);case 25:return t.prev=25,o.f(),t.finish(25);case 28:return e.instance.disableActions=!1,e.instance.contentHash="",e.instance.contextHash="",t.t1=i.title,t.next=34,this.bodyAsPreviewHtml(i.body);case 34:t.t2=t.sent,t.t3=Date.now(),t.t4=a,t.t5=[],t.t6=n.toObject(),t.t7=!1,t.t8=!1,t.t9=!1,e.instance.content={title:t.t1,fullBody:t.t2,authorDisplayName:"",authorAvatarUrl:"",timestamp:t.t3,imageList:t.t4,videoUrl:"",likeCount:0,commentCount:0,totalCommentCount:0,commentList:t.t5,commentListPage:0,authorIconUrl:"",authorIconColor:"",authorRoleName:"",authorPersonView:t.t6,mediaWidth:0,mediaHeight:0,lightContent:t.t7,gradientOverlap:t.t8,backgroundColor:"",disableActions:t.t9,gradientSize:0};case 43:case"end":return t.stop()}}),t,this,[[6,22,25,28]])})))}},{key:"createPreviewComponent",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.componentFactory.create(this.injector),e.next=3,this.updatePreviewComponent(t);case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})))}}]),n}(A),tr=(($i=function(e){g(n,e);var t=p(n);function n(e){var i;return l(this,n),(i=t.call(this)).postInfoDraftService=e,i}return c(n,[{key:"resolveFromContentHash",value:function(e){return this.postInfoDraftService.ensureInfoDraftInstance(e)}}]),n}(ut)).\u0275fac=function(e){return new(e||$i)(v["\u0275\u0275inject"](Xi))},$i.\u0275prov=v["\u0275\u0275defineInjectable"]({token:$i,factory:$i.\u0275fac}),$i),nr=o("8sFK"),ir=["form"];function rr(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"mat-hint",7),v["\u0275\u0275text"](1),v["\u0275\u0275elementEnd"]()),2&e){var n=v["\u0275\u0275nextContext"]();v["\u0275\u0275property"]("align","end"),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate2"](" ",n.message.length,"/",n.maxLength," ")}}var ar,or,sr,lr,ur,cr,dr=((ar=function(e){g(n,e);var t=p(n);function n(e,i,r,a,o,s){var u;return l(this,n),(u=t.call(this,e,i,r,a,o)).route=e,u.router=i,u.matDialog=r,u.snackBar=a,u.groupsFacadeService=o,u._cdr=s,u.message="",u.maxLength=135,u}return c(n,[{key:"mgContentInfoDraftReady",value:function(){this._initDraft()}},{key:"ngOnInit",value:function(){this.checkNextStep()}},{key:"checkNextStep",value:function(){return this.form&&this.form.valid&&this.message?(this.enableNextStep(),!0):(this.disableNextStep(),!1)}},{key:"getPreviousStep",value:function(){return{name:"Cancel",icon:"close"}}},{key:"previousStep",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.exitDraft();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"getNextStep",value:function(){return{name:"Preview",icon:"forward"}}},{key:"nextStep",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contentInfoDraft.saveToDraft("message",this.message);case 2:return e.next=4,this.navigateToPreview();case 4:case"end":return e.stop()}}),e,this)})))}},{key:"onFormSubmit",value:function(e){e.preventDefault(),this.checkNextStep()&&this.nextStep()}},{key:"onTextareaChange",value:function(){this.contentInfoDraft.saveToDraft("message",this.message),this.checkNextStep()}},{key:"_initDraft",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contentInfoDraft.cloneDraftMergedWithInitialFetchIfNeeded();case 2:t=e.sent,this.message=t.message,this.checkNextStep(),this._cdr.markForCheck();case 4:case"end":return e.stop()}}),e,this)})))}}]),n}($)).\u0275fac=function(e){return new(e||ar)(v["\u0275\u0275directiveInject"](y.a),v["\u0275\u0275directiveInject"](y.g),v["\u0275\u0275directiveInject"](G.b),v["\u0275\u0275directiveInject"](H.b),v["\u0275\u0275directiveInject"](q.b),v["\u0275\u0275directiveInject"](v.ChangeDetectorRef))},ar.\u0275cmp=v["\u0275\u0275defineComponent"]({type:ar,selectors:[["mg-create-sms-message"]],viewQuery:function(e,t){var n;1&e&&v["\u0275\u0275viewQuery"](ir,3),2&e&&v["\u0275\u0275queryRefresh"](n=v["\u0275\u0275loadQuery"]())&&(t.form=n.first)},features:[v["\u0275\u0275InheritDefinitionFeature"]],decls:9,vars:4,consts:[[1,"mg-centered"],[1,"sms-image"],[3,"submit"],["form","ngForm"],["mgFormField",""],["matInput","","required","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","autocomplete","off","name","smsMessage",3,"placeholder","maxLength","ngModel","ngModelChange"],[3,"align",4,"ngIf"],[3,"align"]],template:function(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"div",0),v["\u0275\u0275element"](1,"div",1),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](2,"form",2,3),v["\u0275\u0275listener"]("submit",(function(e){return t.onFormSubmit(e)})),v["\u0275\u0275elementStart"](4,"mat-form-field",4),v["\u0275\u0275elementStart"](5,"mat-label"),v["\u0275\u0275text"](6,"SMS Message"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](7,"textarea",5),v["\u0275\u0275listener"]("ngModelChange",(function(e){return t.message=e}))("ngModelChange",(function(){return t.onTextareaChange()})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](8,rr,2,3,"mat-hint",6),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](7),v["\u0275\u0275propertyInterpolate1"]("placeholder","Send a text message. Max. ",t.maxLength," characters"),v["\u0275\u0275property"]("maxLength",t.maxLength)("ngModel",t.message),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",t.message.length>10))},directives:[ue.E,ue.u,ue.v,Ie.d,_e.a,Ie.h,Dt.b,nr.b,ue.d,ue.B,ue.t,ue.w,h.o,Ie.g],styles:[".sms-image[_ngcontent-%COMP%]{background-image:url(/assets/settings/settings_sms.png);width:90px;height:90px;background-size:contain;background-position:50%;background-repeat:no-repeat}.sms-image[_ngcontent-%COMP%], form[_ngcontent-%COMP%]{margin:16px auto}form[_ngcontent-%COMP%]{display:block;padding:0 16px;max-width:550px}"],changeDetection:0}),ar),gr=o("buRW"),fr=((or=c((function e(){l(this,e)}))).\u0275fac=function(e){return new(e||or)},or.\u0275mod=v["\u0275\u0275defineNgModule"]({type:or}),or.\u0275inj=v["\u0275\u0275defineInjector"]({imports:[[gr.b,Ge.a,h.c,Ie.f,Dt.c,ue.m,bn.a],gr.b]}),or),pr=o("3wAF"),hr=o("9XD7"),vr=((sr=function(e){g(n,e);var t=p(n);function n(e,i,r,a,o,s){var u;return l(this,n),(u=t.call(this,e,"SmsMessageContent")).componentResolver=i,u.smsMessageContent=r,u.injector=a,u.auth=o,u.permissions=s,u}return c(n,[{key:"createInfoDraftInstance",value:function(e){return new mr(this.userStorage,this.componentResolver,this.smsMessageContent,this.auth,this.injector,this.storagePrefix,e,this.permissions)}}]),n}(it)).\u0275fac=function(e){return new(e||sr)(v["\u0275\u0275inject"](rt.a),v["\u0275\u0275inject"](v.ComponentFactoryResolver),v["\u0275\u0275inject"](hr.SmsMessageContent),v["\u0275\u0275inject"](v.Injector),v["\u0275\u0275inject"](ot.a),v["\u0275\u0275inject"](te.c))},sr.\u0275prov=v["\u0275\u0275defineInjectable"]({token:sr,factory:sr.\u0275fac}),sr),mr=function(e){g(n,e);var t=p(n);function n(e,i,r,a,o,s,u,c){var d;return l(this,n),(d=t.call(this,e,c,s,u)).smsMessageContent=r,d.auth=a,d.injector=o,d.permissions=c,d.componentFactory=i.resolveComponentFactory(gr.a),d}return c(n,[{key:"type",get:function(){return"sms_message"}},{key:"contentType",get:function(){return"SMS_MESSAGE"}},{key:"createEmptyDraft",value:function(){return{message:""}}},{key:"fetchInitialDraftInfo",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.contentHash){e.next=2;break}return e.abrupt("return");case 2:return(t=new Xe.ContentInfoQuery).setContentHash(this.contentHash),e.next=6,this.smsMessageContent.getInfo(t);case 6:n=e.sent,this.setInitialDraft({message:n.getMessage()});case 8:case"end":return e.stop()}}),e,this)})))}},{key:"hasImageContent",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})))}},{key:"hasTextContent",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})))}},{key:"submitDraftNew",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDraft();case 2:return t=e.sent,(n=new pr.SmsMessageInfo).setMessage(t.message),e.t0=Ke,e.next=8,this.smsMessageContent.new(n);case 8:return e.t1=e.sent,e.t2={type:this.type},e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 11:case"end":return e.stop()}}),e,this)})))}},{key:"submitDraftUpdate",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t,n,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchInitialDraftInfo();case 2:return e.next=4,this.initialDraftDifference();case 4:return t=e.sent,(n=new pr.DeltaSmsMessageInfo).setContentHash(this.contentHash),"message"in t&&((i=new j.StringDelta).setNewString(t.message||""),n.setMessage(i)),e.t0=Ke,e.next=10,this.smsMessageContent.update(n);case 10:return e.t1=e.sent,e.t2={type:this.type},e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 13:case"end":return e.stop()}}),e,this)})))}},{key:"updatePreviewComponent",value:function(e){return Object(x.a)(this,void 0,void 0,s().mark((function t(){var n,i;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.auth.getPersonViewMinimalFromCurrentPerson(),t.next=3,this.cloneDraftMergedWithInitialFetchIfNeeded();case 3:i=t.sent,e.instance.contentHash="",e.instance.contextHash="",e.instance.content=(new Zn.LongSmsMessageCardView).toObject(),e.instance.content.message=i.message||"",e.instance.content.authorPersonView=n.toObject();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"createPreviewComponent",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.componentFactory.create(this.injector),e.next=3,this.updatePreviewComponent(t);case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})))}}]),n}(A),yr=((lr=function(e){g(n,e);var t=p(n);function n(e){var i;return l(this,n),(i=t.call(this)).smsMessageInfoDraftService=e,i}return c(n,[{key:"resolveFromContentHash",value:function(e){return this.smsMessageInfoDraftService.ensureInfoDraftInstance(e)}}]),n}(ut)).\u0275fac=function(e){return new(e||lr)(v["\u0275\u0275inject"](vr))},lr.\u0275prov=v["\u0275\u0275defineInjectable"]({token:lr,factory:lr.\u0275fac,providedIn:"root"}),lr),br=o("LRne"),Cr=o("JX91"),kr=o("lJxs"),Mr=o("eHba"),wr=o("IheW"),Or=o("jXzp"),xr=o("3JiK"),Dr=o("Cfvw"),Sr=o("eIep"),Fr=o("w1tV"),Pr=o("3E0/"),Ir=o("/d8p"),_r=o("GJmQ"),Tr=o("1G5W"),Er=o("pLZG"),Br=o("0Pi8"),jr=o("Pfbz"),Rr=o("5lxJ"),zr=((cr=function(){function e(t,n,i){l(this,e),this.videoRpc=t,this.http=n,this.appConfig=i}return c(e,[{key:"trackVideoStatus",value:function(e,t){var n=this;return Object(br.a)(e).pipe(Object(Sr.a)((function(e){return Object(Dr.a)(n.getVideoStatus(e))})),Object(Fr.a)(),Object(Pr.a)(3e3),Object(Ir.a)(),Object(_r.a)((function(e){return e.pctComplete<100}),!0),Object(Tr.a)(t))}},{key:"uploadVideo",value:function(e,t){var n=this,i=[wr.d.UploadProgress];return Object(Dr.a)(this.getMetaForFile()).pipe(Object(Sr.a)((function(i){return n._uploadVideo(e,t,i)})),Object(Fr.a)(),Object(Er.a)((function(e){return i.includes(e.type)})),Object(kr.a)((function(e){return{progress:e.loaded/e.total*.98}})),Object(Br.a)({progress:1}))}},{key:"getMetaForFile",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.appConfig.getAppCountry();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0="";case 5:return e.t1=e.t0,e.next=8,this.appConfig.getEnvironment();case 8:return e.t2=e.sent,e.t3=this.appConfig.getAppVersion(),e.abrupt("return",{country:e.t1,environment:e.t2,clientVersion:e.t3});case 11:case"end":return e.stop()}}),e,this)})))}},{key:"getClientUploadUrl",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Or.ClouldflareUploadUrlRequest,e.next=3,this.videoRpc.newCloudflareUploadUrl(t);case 3:return n=e.sent,e.abrupt("return",{url:n.getUploadUrl(),uid:n.getUid(),signedToken:n.getSignedToken()});case 5:case"end":return e.stop()}}),e,this)})))}},{key:"getVideoStatus",value:function(e){return Object(x.a)(this,void 0,void 0,s().mark((function t(){var n,i;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new Or.GetCloudflareVideoStatusRequest).setUid(e),t.next=4,this.videoRpc.getCloudflareVideoStatus(n);case 4:return i=t.sent,t.abrupt("return",{pctComplete:i.getPctComplete(),thumbnail:i.getThumbnail()});case 6:case"end":return t.stop()}}),t,this)})))}},{key:"_uploadVideo",value:function(e,t,n){var i=new FormData,r=Object(xr.cloudflareUrlMetaEncode)(e.name,n);i.append("file",e,r);var a=new URL(t.url);return a.searchParams.append("ngsw-bypass","true"),this.http.post(a.href,i,{observe:"events",reportProgress:!0})}}]),e}()).\u0275fac=function(e){return new(e||cr)(v["\u0275\u0275inject"](jr.Video),v["\u0275\u0275inject"](wr.a),v["\u0275\u0275inject"](Rr.a))},cr.\u0275prov=v["\u0275\u0275defineInjectable"]({token:cr,factory:cr.\u0275fac}),cr),Nr=((ur=c((function e(){l(this,e)}))).\u0275fac=function(e){return new(e||ur)},ur.\u0275mod=v["\u0275\u0275defineNgModule"]({type:ur}),ur.\u0275inj=v["\u0275\u0275defineInjector"]({providers:[zr],imports:[[h.c]]}),ur),Vr=o("/oii"),Wr=["form"];function Lr(e,t){1&e&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275elementStart"](1,"div",10),v["\u0275\u0275element"](2,"div",11),v["\u0275\u0275elementStart"](3,"p"),v["\u0275\u0275text"](4,"Video upload in progress"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementContainerEnd"]())}function Ur(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"mg-file-input-upload",12),v["\u0275\u0275listener"]("ngModelChange",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"](2).videoThumbnail=e}))("mgModelStatusChanges",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"](2).onVideoThumbnailStatusChange(e)})),v["\u0275\u0275elementEnd"]()}if(2&e){var i=v["\u0275\u0275nextContext"](2);v["\u0275\u0275property"]("previewSize",740)("changeText","Change preview image")("ngModel",i.videoThumbnail)("fallback",i.customThumbnail?i.defaultCloudflareThumbnail:i.getVideoDataThumbnailUrl())}}function Ar(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"div",5),v["\u0275\u0275template"](1,Lr,5,0,"ng-container",6),v["\u0275\u0275template"](2,Ur,1,4,"ng-template",null,7,v["\u0275\u0275templateRefExtractor"]),v["\u0275\u0275elementStart"](4,"div",8),v["\u0275\u0275element"](5,"div",9),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){var n=t.ngIf,i=v["\u0275\u0275reference"](3);v["\u0275\u0275property"]("ngClass","upload-status-"+n.status),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf","uploading"===n.status)("ngIfElse",i),v["\u0275\u0275advance"](4),v["\u0275\u0275styleProp"]("transform","scaleX("+n.progress+")")}}function Gr(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",22),v["\u0275\u0275elementStart"](1,"mg-file-input-upload",12),v["\u0275\u0275listener"]("ngModelChange",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"](2).videoThumbnail=e}))("mgModelStatusChanges",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"](2).onVideoThumbnailStatusChange(e)})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){var i=v["\u0275\u0275nextContext"](2);v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("previewSize",740)("changeText","Change preview image")("ngModel",i.videoThumbnail)("fallback",i.getVideoDataThumbnailUrl())}}var Hr=function(){return{standalone:!0}};function qr(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"mg-file-input",27),v["\u0275\u0275listener"]("ngModelChange",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"](4).videoInputFiles=e}))("ngModelChange",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"](4).onFileInput(e)})),v["\u0275\u0275elementEnd"]()}if(2&e){var i=v["\u0275\u0275nextContext"](4);v["\u0275\u0275property"]("ngModel",i.videoInputFiles)("ngModelOptions",v["\u0275\u0275pureFunction0"](2,Hr))}}function $r(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"div",24),v["\u0275\u0275template"](1,qr,1,3,"mg-file-input",25),v["\u0275\u0275pipe"](2,"async"),v["\u0275\u0275elementStart"](3,"p",26),v["\u0275\u0275text"](4,"Or"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){var n=v["\u0275\u0275nextContext"](3);v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",!v["\u0275\u0275pipeBind1"](2,1,n.videoUploadInfo$))}}function Qr(e,t){1&e&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275template"](1,$r,5,3,"div",23),v["\u0275\u0275elementContainerEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("hasPermission","VIDEO_UPLOAD"))}function Kr(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"mg-icon",28),v["\u0275\u0275text"](1,"vimeo"),v["\u0275\u0275elementEnd"]())}function Yr(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"mg-icon",29),v["\u0275\u0275text"](1,"yt"),v["\u0275\u0275elementEnd"]())}function Zr(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"span",30),v["\u0275\u0275listener"]("click",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"](2).invalidUrlClick(e)})),v["\u0275\u0275text"](1,"?"),v["\u0275\u0275elementEnd"]()}}function Jr(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"mat-error"),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](2,1,"input.youtubeUrl.error.required")))}function Xr(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275template"](0,Gr,2,4,"div",13),v["\u0275\u0275template"](1,Qr,2,1,"ng-container",14),v["\u0275\u0275elementStart"](2,"mat-form-field",15),v["\u0275\u0275elementStart"](3,"mat-label"),v["\u0275\u0275text"](4,"Enter/paste YouTube or Vimeo URL"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](5,"input",16,17),v["\u0275\u0275listener"]("ngModelChange",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().videoUrl=e}))("ngModelChange",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().onVideoUrlChange(e)})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementContainerStart"](7,18),v["\u0275\u0275template"](8,Kr,2,0,"mg-icon",19),v["\u0275\u0275template"](9,Yr,2,0,"mg-icon",20),v["\u0275\u0275template"](10,Zr,2,0,"span",21),v["\u0275\u0275elementContainerEnd"](),v["\u0275\u0275template"](11,Jr,3,3,"mat-error",14),v["\u0275\u0275elementEnd"]()}if(2&e){var i=v["\u0275\u0275reference"](6),r=v["\u0275\u0275nextContext"]();v["\u0275\u0275property"]("ngIf",r.videoData||r.videoInputPreview),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",!((r.assetThumbnailPath||r.customThumbnail)&&r.videoUrl)),v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("ngModel",r.videoUrl),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngSwitch",r.urlIcon),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngSwitchCase","vimeo"),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngSwitchCase","yt"),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngSwitchCase",!0),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",null==i.control||null==i.control.errors?null:i.control.errors.required)}}function ea(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"mat-error"),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](2,1,"input.generic.error.tooLong")))}function ta(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"mat-error"),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](2,1,"input.title.error.required")))}function na(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"mat-hint",36),v["\u0275\u0275text"](1),v["\u0275\u0275elementEnd"]()),2&e){var n=v["\u0275\u0275nextContext"](2);v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"]("",n.title.length," / 255")}}function ia(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",31),v["\u0275\u0275elementStart"](1,"mat-form-field",32),v["\u0275\u0275elementStart"](2,"mat-label"),v["\u0275\u0275text"](3,"Title"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"mg-textarea",33,34),v["\u0275\u0275listener"]("ngModelChange",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().title=e}))("blur",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().onTitleBlur(e)}))("ngModelChange",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().onTitleChange(e)})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](6,ea,3,3,"mat-error",14),v["\u0275\u0275template"](7,ta,3,3,"mat-error",14),v["\u0275\u0275template"](8,na,2,1,"mat-hint",35),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){var i=v["\u0275\u0275reference"](5),r=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](4),v["\u0275\u0275classProp"]("edited",r.titleTouched)("mg-draft-dirty",r.isTitleDirty()),v["\u0275\u0275property"]("multiline",!1)("required",!0)("ngModel",r.title),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",null==i.control||null==i.control.errors?null:i.control.errors.maxlength),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",(null==i.control?null:i.control.touched)&&(null==i.control||null==i.control.errors?null:i.control.errors.required)),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",r.title)}}var ra,aa,oa,sa,la=((oa=function(e){g(i,e);var n=p(i);function i(e,t,r,a,o,s,u,c,d){var g;return l(this,i),(g=n.call(this,t,r,a,o,s)).videoService=e,g.route=t,g.router=r,g.matDialog=a,g.snackBar=o,g.groupsFacadeService=s,g.cloudflare=u,g.videoRpc=c,g.cdr=d,g.videoData=null,g.videoUrl="",g.videoThumbnail="",g.title="",g.body="",g.cloudflareUploadUrl=null,g.titleTouched=!1,g.customThumbnail=!1,g.assetThumbnailPath="",g.videoInputFiles=[],g.videoInputPreview="",g}return c(i,[{key:"defaultCloudflareThumbnail",get:function(){return this.cloudflareUploadUrl?"https://videodelivery.net/".concat(this.cloudflareUploadUrl.signedToken,"/thumbnails/thumbnail.jpg"):""}},{key:"urlIcon",get:function(){return!this.videoData||U.isEmpty(this.videoData)?!!this.videoUrl||null:this.videoData.vimeoId?"vimeo":"yt"}},{key:"isNonCustomAssetCloudflare",get:function(){return!this.videoUrl&&this.cloudflareUploadUrl&&this.cloudflareUploadUrl.uid&&!this.customThumbnail&&!this.assetThumbnailPath}},{key:"onFileInput",value:function(e){return Object(x.a)(this,void 0,void 0,s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e[0].size>=2e8)){t.next=2;break}return t.abrupt("return",(this.snackBar.open("Video file too big, can be up to 200mb"),void(this.videoInputFiles=[])));case 2:return t.next=4,this.uploadVideoToCloudflare(this.videoInputFiles[0]);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"mgContentInfoDraftReady",value:function(){this._initDraft()}},{key:"ngOnInit",value:function(){var e=this;if(!this.form||!this.form.statusChanges)throw new Error("form unset");this.form.statusChanges.subscribe((function(t){return e.onFormStatusChanges(t)}))}},{key:"ngOnDestroy",value:function(){}},{key:"uploadVideoToCloudflare",value:function(e){return Object(x.a)(this,void 0,void 0,s().mark((function t(){var n,i=this;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.clearVideoUrl(),this.videoUploadInfo$=Object(br.a)({status:"uploading",progress:0}),t.next=3,this.cloudflare.getClientUploadUrl();case 3:n=t.sent,this.videoUploadInfo$=this.cloudflare.uploadVideo(e,n).pipe(Object(Cr.a)({progress:0}),Object(kr.a)((function(e){return{progress:e.progress,status:e.progress>=1?"done":"uploading"}}))),this.videoUploadInfo$.subscribe(null,(function(e){return i.onUploadError(e)}),(function(){i.cloudflareUploadUrl=n,i.contentInfoDraft.saveToDraft("cloudflareUploadUrl",n),i.videoThumbnail=i.defaultCloudflareThumbnail,i.checkNextStep()})),this.checkNextStep();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"onUploadError",value:function(e){delete this.videoUploadInfo$,console.error("Video upload error:",e),this.snackBar.open("An error occurred while uploading video, please try again.")}},{key:"onVideoThumbnailStatusChange",value:function(e){return Object(x.a)(this,void 0,void 0,s().mark((function t(){var n,i=this;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=function(){return Object(x.a)(i,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contentInfoDraft.saveToDraft("videoThumbnail","");case 2:if(e.t0=this.defaultCloudflareThumbnail===this.videoThumbnail,!e.t0){e.next=6;break}return e.next=6,this.contentInfoDraft.saveToDraft("cloudflareThumbnail",this.defaultCloudflareThumbnail);case 6:case"end":return e.stop()}}),e,this)})))},"VALID"!==e){t.next=10;break}if(!this.isDefaultThumbnail()){t.next=6;break}n(),t.next=10;break;case 6:if(!this.assetThumbnailPath||(this.videoThumbnail===this.defaultCloudflareThumbnail&&(this.customThumbnail=!1),this.assetThumbnailPath="",!this.isDefaultThumbnail())){t.next=8;break}return t.abrupt("return",void n());case 8:return t.next=10,this.contentInfoDraft.saveToDraft("videoThumbnail",this.videoThumbnail);case 10:this.checkNextStep();case 11:case"end":return t.stop()}}),t,this)})))}},{key:"onFormStatusChanges",value:function(e){this.checkNextStep()}},{key:"_initDraft",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contentInfoDraft.cloneDraftMergedWithInitialFetchIfNeeded();case 2:return t=e.sent,this.videoUrl=t.videoUrl,this.title=t.title,this.videoThumbnail=t.videoThumbnail,this.cloudflareUploadUrl=t.cloudflareUploadUrl,this.customThumbnail=!!t.customThumbnail,t.assetThumbnail&&t.videoThumbnail&&(this.assetThumbnailPath=this.videoThumbnail),e.next=11,this.fetchVideoData();case 11:if(this.body=t.description,t.title&&(this.title=t.title),t.videoThumbnail&&t.assetThumbnail&&(this.videoThumbnail=t.videoThumbnail),!t.cloudflareUploadUrl||!t.cloudflareUploadUrl.uid){e.next=17;break}n={status:"done",progress:1},this.videoUploadInfo$=Object(br.a)(n),this.videoThumbnail||(this.videoThumbnail=this.defaultCloudflareThumbnail);case 17:this.checkNextStep();case 18:case"end":return e.stop()}}),e,this)})))}},{key:"checkNextStep",value:function(){this.form&&this.form.valid&&(this.videoUrl||this.cloudflareUploadUrl)?this.enableNextStep():this.disableNextStep()}},{key:"getVideoDataThumbnailUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.videoData;if(this.videoThumbnail&&this.assetThumbnailPath&&!this.customThumbnail)return this.videoThumbnail;if(this.isNonCustomAssetCloudflare)return this.defaultCloudflareThumbnail;if(!e&&!this.videoInputPreview)return"";if(this.videoInputPreview&&!e)return this.videoInputPreview;var t=e.thumbnails[0];return t?t.url:""}},{key:"preventNavigation",value:function(e,n,r){var a=this,o=Object.create(null,{preventNavigation:{get:function(){return t(m(i.prototype),"preventNavigation",a)}}});return Object(x.a)(this,void 0,void 0,s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.preventNavigation.call(this,e,n,r);case 2:return t.abrupt("return","");case 3:case"end":return t.stop()}}),t,this)})))}},{key:"isDefaultThumbnail",value:function(){if(this.isNonCustomAssetCloudflare)return this.videoThumbnail===this.defaultCloudflareThumbnail;if(this.assetThumbnailPath)return this.videoThumbnail===this.assetThumbnailPath;var e=this.getVideoDataThumbnailUrl(this.videoData);return this.videoThumbnail===e}},{key:"isVideoDataTitle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.videoData;return!!e&&this.title==e.title}},{key:"fetchVideoData",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.videoData=null,!this.videoUrl){e.next=12;break}return t=null,e.prev=2,e.next=5,this.videoService.getVideoDataFromUrl(this.videoUrl);case 5:(t=e.sent)&&(t.url||(t.url=this.videoUrl),this.assetThumbnailPath||(this.videoThumbnail=this.getVideoDataThumbnailUrl(t)),this.title=t.title),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:this.videoData=t;case 12:case"end":return e.stop()}}),e,this,[[2,9]])})))}},{key:"getPreviousStep",value:function(){return{name:"Cancel",icon:"close"}}},{key:"previousStep",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.exitDraft();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"getNextStep",value:function(){return{name:"Preview",icon:"forward"}}},{key:"nextStep",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.navigateToPreview();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"onTitleFocus",value:function(e){var t=this.title;if(e){this.titleTouched=!0;var n=e.target;!this.title&&this.videoData&&(this.title=t=this.videoData.title),n.setSelectionRange(0,t.length)}}},{key:"onTitleBlur",value:function(e){!this.isVideoDataTitle()&&this.title||(this.titleTouched=!1,!this.title&&this.videoData&&(this.title=this.videoData.title))}},{key:"onVideoUrlChange",value:function(e){this.videoThumbnail="",this.fetchVideoData(),this.contentInfoDraft.saveToDraft("videoUrl",e),this.checkNextStep()}},{key:"onTitleChange",value:function(e){this.contentInfoDraft.saveToDraft("title",e),this.checkNextStep()}},{key:"onBodyChange",value:function(e){this.contentInfoDraft.saveToDraft("description",e),this.checkNextStep()}},{key:"invalidUrlClick",value:function(e){e&&e.preventDefault(),this.snackBar.open("Unable to load the video from the provided URL")}},{key:"isTitleDirty",value:function(){return!this.isVideoDataTitle()||this.contentInfoDraft.isFieldDirty("title")}},{key:"clearVideoUrl",value:function(){this.videoUrl="",this.videoData=null,this.contentInfoDraft.saveToDraft("videoUrl","")}}]),i}($)).\u0275fac=function(e){return new(e||oa)(v["\u0275\u0275directiveInject"](Mr.d),v["\u0275\u0275directiveInject"](y.a),v["\u0275\u0275directiveInject"](y.g),v["\u0275\u0275directiveInject"](G.b),v["\u0275\u0275directiveInject"](H.b),v["\u0275\u0275directiveInject"](q.b),v["\u0275\u0275directiveInject"](zr),v["\u0275\u0275directiveInject"](jr.Video),v["\u0275\u0275directiveInject"](v.ChangeDetectorRef))},oa.\u0275cmp=v["\u0275\u0275defineComponent"]({type:oa,selectors:[["mg-create-video"]],viewQuery:function(e,t){var n;1&e&&v["\u0275\u0275viewQuery"](Wr,3),2&e&&v["\u0275\u0275queryRefresh"](n=v["\u0275\u0275loadQuery"]())&&(t.form=n.first)},features:[v["\u0275\u0275InheritDefinitionFeature"]],decls:9,vars:10,consts:[["form","ngForm"],["class","video-status-container",3,"ngClass",4,"ngIf","ngIfElse"],["notUploading",""],["class","title-input",4,"hasPermission"],["name","body","placeholder","Description...",1,"form-input-hpadding",3,"richContent","ngModel","maxlength","ngModelChange"],[1,"video-status-container",3,"ngClass"],[4,"ngIf","ngIfElse"],["uploadDone",""],[1,"progress-bar-container"],[1,"progress-bar"],[1,"upload-processing-container"],[1,"placeholder-image"],["required","","name","videoThumbnail","previewAspectRatio","16:9",3,"previewSize","changeText","ngModel","fallback","ngModelChange","mgModelStatusChanges"],["class","video-thumbnail",4,"ngIf"],[4,"ngIf"],["mgFormField","","hideRequiredMarker","",1,"form-input-hpadding","url-input"],["matInput","","name","videoUrl","autocomplete","off","type","text","mgFocusSelectText","","name","videoUrl",1,"video-url",3,"ngModel","ngModelChange"],["videoUrlInput","ngModel"],["matSuffix","",3,"ngSwitch"],["class","vimeo-icon",4,"ngSwitchCase"],["class","yt-icon",4,"ngSwitchCase"],["title","Invalid URL","class","invalid-url",3,"click",4,"ngSwitchCase"],[1,"video-thumbnail"],["class","custom-video-input-container",4,"hasPermission"],[1,"custom-video-input-container"],["customTitleText","Upload a Video","icon","upload-o","fileDetailText","Webm, MP4, AVI, limit 200mb","accept","video/mp4,video/x-m4v,video/*",3,"ngModel","ngModelOptions","ngModelChange",4,"ngIf"],[1,"mg-smallcopy"],["customTitleText","Upload a Video","icon","upload-o","fileDetailText","Webm, MP4, AVI, limit 200mb","accept","video/mp4,video/x-m4v,video/*",3,"ngModel","ngModelOptions","ngModelChange"],[1,"vimeo-icon"],[1,"yt-icon"],["title","Invalid URL",1,"invalid-url",3,"click"],[1,"title-input"],["mgFormField","","hideRequiredMarker","",1,"form-input-hpadding"],["mgMentionable2","inline","allowedTags","mg-mention","name","titleInput","autocomplete","off","type","text","maxlength","255",3,"multiline","required","ngModel","ngModelChange","blur"],["videoTitleInput","ngModel"],["align","end",4,"ngIf"],["align","end"]],template:function(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"form",null,0),v["\u0275\u0275template"](2,Ar,6,5,"div",1),v["\u0275\u0275pipe"](3,"async"),v["\u0275\u0275template"](4,Xr,12,8,"ng-template",null,2,v["\u0275\u0275templateRefExtractor"]),v["\u0275\u0275template"](6,ia,9,10,"div",3),v["\u0275\u0275elementStart"](7,"mg-body-input",4),v["\u0275\u0275listener"]("ngModelChange",(function(e){return t.body=e}))("ngModelChange",(function(e){return t.onBodyChange(e)})),v["\u0275\u0275pipe"](8,"hasPermission"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){var n=v["\u0275\u0275reference"](5);v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",v["\u0275\u0275pipeBind1"](3,6,t.videoUploadInfo$))("ngIfElse",n),v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("hasPermission","CONTENT_POST_SET_TITLE"),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("richContent",v["\u0275\u0275pipeBind1"](8,8,"CONTENT_HTML_INCLUDE"))("ngModel",t.body)("maxlength",5e3)}},directives:[ue.E,ue.u,ue.v,h.o,Bi.a,Be.a,ue.t,ue.w,ue.n,h.m,Nn.a,ue.B,It.a,Ie.d,_e.a,Ie.h,Dt.b,Vr.a,ue.d,Ie.j,h.q,h.r,Ot.a,Ct.a,Ie.c,Te.a,Ee.a,Ie.g],pipes:[h.b,je.a,b.d],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");mat-form-field[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{color:#737373}mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-family:Muli,sans-serif;line-height:1.35;box-sizing:border-box}@media (orientation:landscape){mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-size:3.1400966184vh}}@media (orientation:portrait){mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-size:3.1400966184vw}}@media (orientation:landscape) and (max-height:414px){mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-size:13px}}@media (orientation:portrait) and (max-width:414px){mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-size:13px}}@media (min-width:445.8461538462px){mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-size:14px}}.form-input-hpadding[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px}.pseudo-mg-input[_ngcontent-%COMP%]{color:#737373;border-bottom:1px solid #ccc}.pseudo-mg-input[_ngcontent-%COMP%]     .textarea-placeholder{color:#2f2f2f}.input-margin[_ngcontent-%COMP%]{margin:8px}.input-group[_ngcontent-%COMP%]{margin:16px;--mg-form-field-margin:4px 0}.input-group.vmargin-only[_ngcontent-%COMP%]{margin:16px 0}.input-group[_ngcontent-%COMP%] > .input-group[_ngcontent-%COMP%]{padding:0;margin:16px 0}mat-form-field[mgFormField][_ngcontent-%COMP%] + .input-group[_ngcontent-%COMP%]{margin-top:0}.input-hpadding[_ngcontent-%COMP%]{padding-left:14px;padding-right:14px}.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-family:Muli,sans-serif;font-weight:700;line-height:1.35}@media (orientation:landscape){.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:3.8647342995vh}}@media (orientation:portrait){.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:3.8647342995vw}}@media (orientation:landscape) and (max-height:414px){.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:16px}}@media (orientation:portrait) and (max-width:414px){.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:16px}}@media (min-width:439.875px){.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:17px}}.mg-draft-dirty[_ngcontent-%COMP%]{color:#036}.text-input[_ngcontent-%COMP%]{padding:16px;border-top:1px solid #e2e2e2}.text-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border:none;color:#737373;font-size:16px;font-weight:400;font-family:Muli,sans-serif}.text-input[_ngcontent-%COMP%]   input.mg-draft-dirty[_ngcontent-%COMP%]{color:#036}.text-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.input-padding[_ngcontent-%COMP%]{padding:16px}.body-input[_ngcontent-%COMP%]{border-top:1px solid #e2e2e2;color:#737373}.body-input.mg-draft-dirty[_ngcontent-%COMP%], .mg-label[_ngcontent-%COMP%]{color:#2f2f2f}.mg-label[_ngcontent-%COMP%]{margin-top:8px}mat-slide-toggle.toggle-with-subtext[_ngcontent-%COMP%]{margin-left:0;margin-bottom:14px}mat-slide-toggle.toggle-with-subtext[_ngcontent-%COMP%]:first-child{margin-top:0;margin-bottom:14px}mat-slide-toggle.toggle-with-subtext[_ngcontent-%COMP%]     .mat-slide-toggle-label{align-items:flex-start}mat-slide-toggle.toggle-with-subtext[_ngcontent-%COMP%]     .mat-slide-toggle-label .mat-slide-toggle-content{text-align:left;padding-bottom:.5em}mat-slide-toggle.toggle-with-subtext[_ngcontent-%COMP%]     .mat-slide-toggle-label .mat-slide-toggle-content .toggle-subtext{display:block;white-space:normal;margin-top:1em}.video-url-container[_ngcontent-%COMP%]   .invalid-url[_ngcontent-%COMP%], .video-url-container[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{flex-grow:0;margin-left:8px}.video-url-container[_ngcontent-%COMP%]   .invalid-url[_ngcontent-%COMP%]{padding-left:30px}.yt-icon[_ngcontent-%COMP%]{color:red}.vimeo-icon[_ngcontent-%COMP%]{color:#1ab7ea}.video-thumbnail[_ngcontent-%COMP%]{display:block;margin-bottom:16px}.video-thumbnail.show[_ngcontent-%COMP%]{display:block}.video-thumbnail.show[_ngcontent-%COMP%]   mat-form-field.url-input[_ngcontent-%COMP%]{margin-top:0}.mg-draft-dirty[_ngcontent-%COMP%]{color:#737373}.mg-draft-dirty.edited[_ngcontent-%COMP%], .mg-draft-dirty.mg-focus-select-dirty[_ngcontent-%COMP%]{color:#036}.custom-video-input-container[_ngcontent-%COMP%], mat-form-field.url-input[_ngcontent-%COMP%]{margin-top:16px}.custom-video-input-container[_ngcontent-%COMP%] + mat-form-field.url-input[_ngcontent-%COMP%]{margin-top:0}form[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{color:#737373;text-align:center}mg-file-input[_ngcontent-%COMP%]{border-radius:6px;border:1px solid #ccc;margin-left:16px;margin-right:16px;display:block;color:#737373;--mg-file-input-icon-size-mobile:24px;--mg-file-input-icon-size-desktop:24px}.video-status-container[_ngcontent-%COMP%]{position:relative;margin-bottom:24px}.video-status-container[_ngcontent-%COMP%]   .upload-processing-container[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:30px 30px 56px}.video-status-container[_ngcontent-%COMP%]   .upload-processing-container[_ngcontent-%COMP%]   .placeholder-image[_ngcontent-%COMP%]{background-image:url(/assets/video_frame.svg);height:106px;width:106px;margin-left:auto;margin-right:auto}.video-status-container[_ngcontent-%COMP%]   .upload-processing-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#737373;margin:0}.video-status-container[_ngcontent-%COMP%]   .progress-bar-container[_ngcontent-%COMP%]{position:absolute;background-color:#fff;z-index:10;bottom:0;left:0;right:0;height:24px;border-top:1px solid #ccc;border-bottom:1px solid #ccc;transition:opacity .3s ease}.video-status-container[_ngcontent-%COMP%]   .progress-bar-container[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{margin:-1px 0;transition:transform .3s ease;transform-origin:left;transform:scaleX(0);height:26px;background-color:#1dce4d}.video-status-container.upload-status-processing[_ngcontent-%COMP%]   .progress-bar-container[_ngcontent-%COMP%], .video-status-container.upload-status-uploading[_ngcontent-%COMP%]   .progress-bar-container[_ngcontent-%COMP%]{opacity:1}.video-status-container.upload-status-done[_ngcontent-%COMP%]   .progress-bar-container[_ngcontent-%COMP%]{opacity:0;pointer-events:none}']}),oa),ua=((aa=c((function e(){l(this,e)}))).\u0275fac=function(e){return new(e||aa)},aa.\u0275mod=v["\u0275\u0275defineNgModule"]({type:aa}),aa.\u0275inj=v["\u0275\u0275defineInjector"]({imports:[[Ge.a,Pn.a,Ae.a,Oe.a,$e.b,Wn.a,He.a,Fn.a,te.b,qe.a,On.c,Nr,h.c,ue.m,Ie.f,Dt.c,b.c]]}),aa),ca=((ra=function(e){g(n,e);var t=p(n);function n(e,i,r,a,o,s,u,c){var d;return l(this,n),(d=t.call(this,e,"VideoContent")).componentResolver=i,d.postService=r,d.injector=a,d.auth=o,d.videoService=s,d.video=u,d.permissions=c,d}return c(n,[{key:"createInfoDraftInstance",value:function(e){return new da(this.userStorage,this.componentResolver,this.postService,this.auth,this.injector,this.videoService,this.video,this.storagePrefix,e,this.permissions)}}]),n}(it)).\u0275fac=function(e){return new(e||ra)(v["\u0275\u0275inject"](rt.a),v["\u0275\u0275inject"](v.ComponentFactoryResolver),v["\u0275\u0275inject"](Ji.Post),v["\u0275\u0275inject"](v.Injector),v["\u0275\u0275inject"](ot.a),v["\u0275\u0275inject"](Mr.d),v["\u0275\u0275inject"](jr.Video),v["\u0275\u0275inject"](te.c))},ra.\u0275prov=v["\u0275\u0275defineInjectable"]({token:ra,factory:ra.\u0275fac}),ra),da=function(e){g(n,e);var t=p(n);function n(e,i,r,a,o,s,u,c,d,g){var f;return l(this,n),(f=t.call(this,e,g,c,d)).postService=r,f.auth=a,f.injector=o,f.videoService=s,f.video=u,f.permissions=g,f.componentFactory=i.resolveComponentFactory(C.d),f}return c(n,[{key:"type",get:function(){return"video"}},{key:"contentType",get:function(){return"VIDEO"}},{key:"fetchInitialDraftInfo",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.contentHash){e.next=2;break}return e.abrupt("return");case 2:return(t=new Xe.ContentInfoQuery).setContentHash(this.contentHash),e.next=6,this.video.getInfo(t);case 6:n=e.sent,this.setInitialDraft({title:n.getTitle(),description:n.getDescription(),videoUrl:n.getVideoUrl(),videoThumbnail:n.getVideoThumbnail(),customThumbnail:n.getCustomThumbnail(),assetThumbnail:!0,cloudflareUploadUrl:{url:"",uid:n.getCloudflareUid(),signedToken:n.getCloudflareSignedToken()}});case 8:case"end":return e.stop()}}),e,this)})))}},{key:"hasImageContent",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDraft();case 2:return e.abrupt("return",!!e.sent.videoThumbnail);case 3:case"end":return e.stop()}}),e,this)})))}},{key:"hasTextContent",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDraft();case 2:return t=e.sent,e.abrupt("return",!!t.description||!!t.title);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"submitDraftUpdate",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t,n,i,r,a,o,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchInitialDraftInfo();case 2:return e.next=4,this.initialDraftDifference();case 4:return t=e.sent,(n=new Or.DeltaVideoInfo).setContentHash(this.contentHash),"description"in t&&((i=new j.StringDelta).setNewString(t.description),n.setDescription(i)),"title"in t&&((r=new j.StringDelta).setNewString(t.title),n.setTitle(r)),"videoUrl"in t&&((a=new j.StringDelta).setNewString(t.videoUrl),n.setVideoUrl(a)),"videoThumbnail"in t&&((o=new j.StringDelta).setNewString(t.videoThumbnail),n.setVideoThumbnail(o)),t.cloudflareUploadUrl&&((l=new j.StringDelta).setNewString(t.cloudflareUploadUrl.uid),n.setCloudflareUid(l)),e.t0=Ke,e.next=14,this.video.update(n);case 14:return e.t1=e.sent,e.t2={type:this.type},e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 17:case"end":return e.stop()}}),e,this)})))}},{key:"submitDraftNew",value:function(){var e;return Object(x.a)(this,void 0,void 0,s().mark((function t(){var n,i;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getDraft();case 2:return n=t.sent,(i=new Or.VideoInfo).setTitle(n.title),i.setDescription(n.description),i.setVideoUrl(n.videoUrl),i.setVideoThumbnail(n.videoThumbnail),i.setCloudflareUid((null===(e=n.cloudflareUploadUrl)||void 0===e?void 0:e.uid)||""),t.t0=Ke,t.next=12,this.video.new(i);case 12:return t.t1=t.sent,t.t2={type:this.type},t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 15:case"end":return t.stop()}}),t,this)})))}},{key:"createEmptyDraft",value:function(){return{videoUrl:"",videoThumbnail:"",description:"",title:"",cloudflareUploadUrl:null}}},{key:"updatePreviewComponent",value:function(e){return Object(x.a)(this,void 0,void 0,s().mark((function t(){var n,i,r,a,o,l,u,c,d,g,f,p,h,v,m,y,b;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.auth.getPersonViewMinimalFromCurrentPerson(),t.next=3,this.cloneDraftMergedWithInitialFetchIfNeeded();case 3:if(i=t.sent,r=[],a=null,o=null,t.t0=i.cloudflareUploadUrl&&i.cloudflareUploadUrl&&i.cloudflareUploadUrl.uid,t.t0){t.next=11;break}return t.next=10,this.videoService.getVideoDataFromUrl(i.videoUrl);case 10:a=t.sent;case 11:l=i.videoThumbnail||i.cloudflareThumbnail,u=0,c=[l];case 13:if(!(u<c.length)){t.next=30;break}if(d=c[u],g=[],f="",p=Mr.b,h=Mr.a,d||(v=null==a?void 0:a.thumbnails[0])&&(v.custom?d=v.url:(f=v.url,p=v.width,h=v.height)),!d){t.next=26;break}return f=Object(dt.b)(d),t.next=22,Object(Tn.d)(f);case 22:m=t.sent,y=m.width,b=m.height,p=y,h=b;case 26:o={width:p,height:h,url:i.videoUrl,title:i.title,body:i.description,thumbnails:[{custom:!0,width:p,height:h,url:f}]},g.push(["raw",{width:p,height:h,path:f}]),r.push({sizeMap:g});case 27:u++,t.next=13;break;case 30:return e.instance.disableActions=!1,e.instance.noVideoAutoPlay=!0,e.instance.videoData=o,e.instance.contentHash="",e.instance.contextHash="",e.instance.videoProcessingText="Your video is being processed, but you may publish at any time.",t.t1=i.title||(null==a?void 0:a.title)||"",t.next=39,this.bodyAsPreviewHtml(i.description);case 39:t.t2=t.sent,t.t3=Date.now(),t.t4=r,t.t5=i.videoUrl,t.t6=[],t.t7=n.toObject(),t.t8=o.width||0,t.t9=o.height||0,t.t10=!1,t.t11=!1,t.t12=!1,t.t13=i.cloudflareUploadUrl&&i.cloudflareUploadUrl.uid?i.cloudflareUploadUrl.signedToken||i.cloudflareUploadUrl.uid:"",t.t14=i.cloudflareUploadUrl?i.cloudflareUploadUrl.url:"",t.t15=!!i.assetThumbnail,e.instance.content={title:t.t1,fullBody:t.t2,authorDisplayName:"",authorAvatarUrl:"",timestamp:t.t3,imageList:t.t4,videoUrl:t.t5,likeCount:0,commentCount:0,totalCommentCount:0,commentList:t.t6,commentListPage:0,authorIconUrl:"",authorIconColor:"",authorRoleName:"",authorPersonView:t.t7,mediaWidth:t.t8,mediaHeight:t.t9,lightContent:t.t10,gradientOverlap:t.t11,backgroundColor:"",disableActions:t.t12,gradientSize:0,cloudflareUid:t.t13,cloudflareVideoUrl:t.t14,cloudflareReady:t.t15};case 54:case"end":return t.stop()}}),t,this)})))}},{key:"createPreviewComponent",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.componentFactory.create(this.injector),e.next=3,this.updatePreviewComponent(t);case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})))}}]),n}(A),ga=((sa=function(e){g(n,e);var t=p(n);function n(e){var i;return l(this,n),(i=t.call(this)).videoInfoDraftService=e,i}return c(n,[{key:"resolveFromContentHash",value:function(e){return this.videoInfoDraftService.ensureInfoDraftInstance(e)}}]),n}(ut)).\u0275fac=function(e){return new(e||sa)(v["\u0275\u0275inject"](ca))},sa.\u0275prov=v["\u0275\u0275defineInjectable"]({token:sa,factory:sa.\u0275fac}),sa),fa=o("jtHE"),pa=o("itXk"),ha=o("SxV6"),va=o("xs9W"),ma=o("HHVM"),ya=o("hUj8"),ba=o("lkjj"),Ca=o("4BGm");function ka(e){return{name:e.name,roleType:e.roleType,tooltip:"",disabled:!1}}var Ma,wa,Oa=((Ma=function(n){g(r,n);var i=p(r);function r(t,n,a,o,s,u){var c;l(this,r),(c=i.call(this)).commentHandler=s,c._cdr=u,c._destroyed$=new fa.a(1),c.displayTitle="Advanced Publish Settings",c.displayPreview="",c.contentMetadataKeys=["mingaContentPublishDate","mingaContentUnpublishDate","mingaContentPinEndDate","emailContent","emailContentRoles","emailContentIncludeUnregistered","commentRoleTypes"],c.publishDate=null,c.unpublishDate=null,c.initiallyPinned=!1,c.initialPinEndDate=null,c.pinned=!1,c.pinDays=0,c.endPinDate=null,c.mobileInputs=!1,c.emailContent=!1,c.emailContentIncludeUnregistered=!1,c.emailContentRoles=[],c.allowedCommentingRoleTypes=null;var d=Object(pa.b)([n.observePermission(O.MingaPermission.EMAIL_CONTENT),n.observePermission(O.MingaPermission.EMAIL_CONTENT_AS_GROUP_OWNER)]).pipe(Object(Sr.a)((function(t){var n=e(t,2),i=n[0],r=n[1];return i?Object(br.a)(!0):r?a.getCurrentGroupIfSet().pipe(Object(kr.a)((function(e){return!!e&&e.rank===va.b.OWNER}))):Object(br.a)(!1)})));return c.allowedEmailContentTypes$=t.observeAllowedContentTypes(),c.enableEmailContentOption$=d.pipe(Object(Er.a)((function(e){return e})),Object(Sr.a)((function(){return c.allowedEmailContentTypes$})),Object(kr.a)((function(e){var t;return e.includes((null===(t=c.contentInfoDraft)||void 0===t?void 0:t.contentType)||"")}))),c._changesSubject=new P.a,c.emailContentRoleOptions$=c.enableEmailContentOption$.pipe(Object(Er.a)((function(e){return e})),Object(Sr.a)((function(){return Object(Dr.a)(o.fetchIfNeeded())})),Object(Sr.a)((function(){return o.roles$})),Object(kr.a)((function(e){return e.map(ka)}))),c}return c(r,[{key:"onResize",value:function(){this.initInputSizes()}},{key:"ngOnInit",value:function(){this.initInputSizes()}},{key:"initInputSizes",value:function(){var e=window.innerWidth;this.mobileInputs=e<415}},{key:"pinRemainingTime",value:function(e){if(!e)return"";var t=ma.day.duration(e.getTime()-Date.now()).days()||1;return"".concat(t," ").concat(1==t?"day":"days"," remaining")}},{key:"onPinnedChange",value:function(e){if(e){this.pinDays=this.pinDays||1,this.endPinDate=new Date,this.endPinDate.setHours(23),this.endPinDate.setMinutes(59),this.endPinDate.setSeconds(0),this.endPinDate.setMilliseconds(0);var t=this.endPinDate.getTime()+864e5*this.pinDays;this.endPinDate=new Date(t)}else this.endPinDate=null;this.saveContentMetadata("mingaContentPinEndDate",this.endPinDate)}},{key:"onChanges",value:function(){return this._changesSubject.asObservable()}},{key:"mgDraftReady",value:function(e){var t=this;if(e.mingaContentPinEndDate){var n=Date.now();this.initialPinEndDate=e.mingaContentPinEndDate;var i=e.mingaContentPinEndDate.getTime();i>n?(this.pinned=!0,this.pinDays=Math.round((i-n)/864e5)):this.pinned=!0}else this.pinned=!1;this.initiallyPinned=this.pinned,this.publishDate=e.mingaContentPublishDate?e.mingaContentPublishDate:null,this.unpublishDate=e.mingaContentUnpublishDate?e.mingaContentUnpublishDate:null,this.emailContentRoleOptions$.pipe(Object(ha.a)(),Object(kr.a)((function(e){return e.map((function(e){return e.roleType}))}))).toPromise().then((function(e){t.emailContentRoles.length||(t.emailContentRoles=e.filter((function(e){return e!=O.MingaRoleType.STUDENT&&e!=O.MingaRoleType.STUDENT_LEADER})))})),this.emailContent=e.emailContent,this.emailContentIncludeUnregistered=e.emailContentIncludeUnregistered,e.commentRoleTypes?this.allowedCommentingRoleTypes=e.commentRoleTypes:this.commentHandler.getDefaultCommentableRoles().pipe(Object(ha.a)()).toPromise().then((function(e){t.allowedCommentingRoleTypes||(t.allowedCommentingRoleTypes=e)}))}},{key:"onUnpublishDateChange",value:function(e){this.saveContentMetadata("mingaContentUnpublishDate",e)}},{key:"onPublishDateChange",value:function(e){this.saveContentMetadata("mingaContentPublishDate",e)}},{key:"onEmailContentChange",value:function(e){this.saveContentMetadata("emailContent",e)}},{key:"onEmailContentRoles",value:function(e){this.saveContentMetadata("emailContentRoles",e)}},{key:"onEmailContentIncludeUnregistered",value:function(e){this.saveContentMetadata("emailContentIncludeUnregistered",e)}},{key:"onCommentRoleTypes",value:function(e){e&&this.saveContentMetadata("commentRoleTypes",e)}},{key:"ngOnDestroy",value:function(){t(m(r.prototype),"ngOnDestroy",this).call(this),this._destroyed$.next(),this._destroyed$.complete()}}]),r}(Q)).\u0275fac=function(e){return new(e||Ma)(v["\u0275\u0275directiveInject"](ya.a),v["\u0275\u0275directiveInject"](te.c),v["\u0275\u0275directiveInject"](q.b),v["\u0275\u0275directiveInject"](ba.a),v["\u0275\u0275directiveInject"](se.a),v["\u0275\u0275directiveInject"](v.ChangeDetectorRef))},Ma.\u0275cmp=v["\u0275\u0275defineComponent"]({type:Ma,selectors:[["mg-content-control"]],hostBindings:function(e,t){1&e&&v["\u0275\u0275listener"]("resize",(function(){return t.onResize()}),!1,v["\u0275\u0275resolveWindow"])},features:[v["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:17,consts:[[3,"publishDate","unpublishDate","pinned","pinDays","endPinDate","readonlyPinDays","stackInputs","enableEmailContentOption","emailContent","emailContentRoleOptions","emailContentRoles","emailContentIncludeUnregistered","commentingRoles","publishDateChange","unpublishDateChange","pinnedChange","pinDaysChange","endPinDateChange","emailContentChange","emailContentRolesChange","emailContentIncludeUnregisteredChange","commentingRolesChange"]],template:function(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"mg-content-publish-controls",0),v["\u0275\u0275listener"]("publishDateChange",(function(e){return t.publishDate=e}))("publishDateChange",(function(e){return t.onPublishDateChange(e)}))("unpublishDateChange",(function(e){return t.unpublishDate=e}))("unpublishDateChange",(function(e){return t.onUnpublishDateChange(e)}))("pinnedChange",(function(e){return t.pinned=e}))("pinnedChange",(function(e){return t.onPinnedChange(e)}))("pinDaysChange",(function(e){return t.pinDays=e}))("endPinDateChange",(function(e){return t.endPinDate=e}))("emailContentChange",(function(e){return t.emailContent=e}))("emailContentChange",(function(e){return t.onEmailContentChange(e)}))("emailContentRolesChange",(function(e){return t.emailContentRoles=e}))("emailContentRolesChange",(function(e){return t.onEmailContentRoles(e)}))("emailContentIncludeUnregisteredChange",(function(e){return t.emailContentIncludeUnregistered=e}))("emailContentIncludeUnregisteredChange",(function(e){return t.onEmailContentIncludeUnregistered(e)}))("commentingRolesChange",(function(e){return t.allowedCommentingRoleTypes=e}))("commentingRolesChange",(function(e){return t.onCommentRoleTypes(e)})),v["\u0275\u0275pipe"](1,"async"),v["\u0275\u0275pipe"](2,"async"),v["\u0275\u0275elementEnd"]()),2&e&&v["\u0275\u0275property"]("publishDate",t.publishDate)("unpublishDate",t.unpublishDate)("pinned",t.pinned)("pinDays",t.pinDays)("endPinDate",t.endPinDate)("readonlyPinDays",t.initiallyPinned)("stackInputs",t.mobileInputs)("enableEmailContentOption",v["\u0275\u0275pipeBind1"](1,13,t.enableEmailContentOption$))("emailContent",t.emailContent)("emailContentRoleOptions",v["\u0275\u0275pipeBind1"](2,15,t.emailContentRoleOptions$))("emailContentRoles",t.emailContentRoles)("emailContentIncludeUnregistered",t.emailContentIncludeUnregistered)("commentingRoles",t.allowedCommentingRoleTypes)},directives:[Ca.a],pipes:[h.b],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");mat-form-field[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{color:#737373}mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-family:Muli,sans-serif;line-height:1.35;box-sizing:border-box}@media (orientation:landscape){mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-size:3.1400966184vh}}@media (orientation:portrait){mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-size:3.1400966184vw}}@media (orientation:landscape) and (max-height:414px){mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-size:13px}}@media (orientation:portrait) and (max-width:414px){mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-size:13px}}@media (min-width:445.8461538462px){mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-size:14px}}.form-input-hpadding[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px}.pseudo-mg-input[_ngcontent-%COMP%]{color:#737373;border-bottom:1px solid #ccc}.pseudo-mg-input[_ngcontent-%COMP%]     .textarea-placeholder{color:#2f2f2f}.input-margin[_ngcontent-%COMP%]{margin:8px}.input-group[_ngcontent-%COMP%]{margin:16px;--mg-form-field-margin:4px 0}.input-group.vmargin-only[_ngcontent-%COMP%]{margin:16px 0}.input-group[_ngcontent-%COMP%] > .input-group[_ngcontent-%COMP%]{padding:0;margin:16px 0}mat-form-field[mgFormField][_ngcontent-%COMP%] + .input-group[_ngcontent-%COMP%]{margin-top:0}.input-hpadding[_ngcontent-%COMP%]{padding-left:14px;padding-right:14px}.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-family:Muli,sans-serif;font-weight:700;line-height:1.35}@media (orientation:landscape){.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:3.8647342995vh}}@media (orientation:portrait){.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:3.8647342995vw}}@media (orientation:landscape) and (max-height:414px){.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:16px}}@media (orientation:portrait) and (max-width:414px){.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:16px}}@media (min-width:439.875px){.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:17px}}.mg-draft-dirty[_ngcontent-%COMP%]{color:#036}.text-input[_ngcontent-%COMP%]{padding:16px;border-top:1px solid #e2e2e2}.text-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border:none;color:#737373;font-size:16px;font-weight:400;font-family:Muli,sans-serif}.text-input[_ngcontent-%COMP%]   input.mg-draft-dirty[_ngcontent-%COMP%]{color:#036}.text-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.input-padding[_ngcontent-%COMP%]{padding:16px}.body-input[_ngcontent-%COMP%]{border-top:1px solid #e2e2e2;color:#737373}.body-input.mg-draft-dirty[_ngcontent-%COMP%], .mg-label[_ngcontent-%COMP%]{color:#2f2f2f}.mg-label[_ngcontent-%COMP%]{margin-top:8px}mat-slide-toggle.toggle-with-subtext[_ngcontent-%COMP%]{margin-left:0;margin-bottom:14px}mat-slide-toggle.toggle-with-subtext[_ngcontent-%COMP%]:first-child{margin-top:0;margin-bottom:14px}mat-slide-toggle.toggle-with-subtext[_ngcontent-%COMP%]     .mat-slide-toggle-label{align-items:flex-start}mat-slide-toggle.toggle-with-subtext[_ngcontent-%COMP%]     .mat-slide-toggle-label .mat-slide-toggle-content{text-align:left;padding-bottom:.5em}mat-slide-toggle.toggle-with-subtext[_ngcontent-%COMP%]     .mat-slide-toggle-label .mat-slide-toggle-content .toggle-subtext{display:block;white-space:normal;margin-top:1em}.input-group[_ngcontent-%COMP%]{color:#737373}']}),Ma),xa=o("Ji8J"),Da=((wa=c((function e(){l(this,e)}))).\u0275fac=function(e){return new(e||wa)},wa.\u0275mod=v["\u0275\u0275defineNgModule"]({type:wa}),wa.\u0275inj=v["\u0275\u0275defineInjector"]({imports:[[Sn.a,Ge.a,te.b,xa.a,h.c,ue.m,Ie.f,St.b,xt.b]]}),wa),Sa=o("pzvA");function Fa(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"mg-date-time-picker",5),v["\u0275\u0275listener"]("ngModelChange",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().closeOnDate=e}))("ngModelChange",(function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().onCloseOnDateChange(e)})),v["\u0275\u0275elementEnd"]()}if(2&e){var i=v["\u0275\u0275nextContext"]();v["\u0275\u0275property"]("dateOnly",!0)("hasCustomHeader",!0)("canReset",!0)("ngModel",i.closeOnDate)}}function Pa(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"span"),v["\u0275\u0275text"](1,"Close Poll"),v["\u0275\u0275elementEnd"]())}function Ia(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"span"),v["\u0275\u0275text"](1,"Re-Open Poll"),v["\u0275\u0275elementEnd"]())}function _a(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",6),v["\u0275\u0275elementStart"](1,"mg-button-outline",7),v["\u0275\u0275listener"]("click",(function(){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().clickCloseNow()})),v["\u0275\u0275template"](2,Pa,2,0,"span",8),v["\u0275\u0275template"](3,Ia,2,0,"span",8),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){var i=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",!i.closed),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",i.closed)}}var Ta,Ea,Ba,ja,Ra,za,Na,Va,Wa=((Ea=function(e){g(i,e);var n=p(i);function i(){var e;return l(this,i),(e=n.call(this)).displayTitle="Advanced Poll Settings",e.displayPreview="",e.contentMetadataKeys=[],e.showResults=!1,e.closed=!1,e._changesSubject=new P.a,e}return c(i,[{key:"contentHash",get:function(){return this.contentInfoDraft.contentHash}},{key:"onChanges",value:function(){return this._changesSubject.asObservable()}},{key:"mgDraftReady",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contentInfoDraft.cloneDraftMergedWithInitialFetchIfNeeded();case 2:t=e.sent,this.showResults=!!t.showResults,this.closed=!!t.closed,t.closeOnDate&&(this.closeOnDate=new Date(t.closeOnDate));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"onShowResultsChange",value:function(e){this.contentInfoDraft.saveToDraft("showResults",e),this._changesSubject.next()}},{key:"onCloseOnDateChange",value:function(e){var t=e?e.getTime():null;this.contentInfoDraft.saveToDraft("closeOnDate",t),this._changesSubject.next()}},{key:"clickCloseNow",value:function(){this.contentInfoDraft.contentHash&&(this.closed=!this.closed,this.contentInfoDraft.saveToDraft("closed",this.closed),this.closed||(this.closeOnDate=null,this.contentInfoDraft.saveToDraft("closeOnDate",this.closeOnDate)),this._changesSubject.next())}},{key:"ngOnDestroy",value:function(){t(m(i.prototype),"ngOnDestroy",this).call(this)}}]),i}(Q)).\u0275fac=function(e){return new(e||Ea)},Ea.\u0275cmp=v["\u0275\u0275defineComponent"]({type:Ea,selectors:[["mg-poll-control"]],features:[v["\u0275\u0275InheritDefinitionFeature"]],decls:7,vars:3,consts:[[1,"input-group","vmargin-only"],["name","publishDate","datePlaceholder","Close poll date",3,"dateOnly","hasCustomHeader","canReset","ngModel","ngModelChange",4,"ngIf"],[1,"input-group","toggle-with-subtext",3,"ngModel","ngModelChange"],[1,"toggle-subtext","mg-microtext"],["class","user-content input-group close-poll-btn",4,"ngIf"],["name","publishDate","datePlaceholder","Close poll date",3,"dateOnly","hasCustomHeader","canReset","ngModel","ngModelChange"],[1,"user-content","input-group","close-poll-btn"],[3,"click"],[4,"ngIf"]],template:function(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"div",0),v["\u0275\u0275template"](1,Fa,1,4,"mg-date-time-picker",1),v["\u0275\u0275elementStart"](2,"mat-slide-toggle",2),v["\u0275\u0275listener"]("ngModelChange",(function(e){return t.showResults=e}))("ngModelChange",(function(e){return t.onShowResultsChange(e)})),v["\u0275\u0275text"](3," Show poll results in feed? "),v["\u0275\u0275elementStart"](4,"span",3),v["\u0275\u0275text"](5,"(this will allow members to see results once they have answered or the poll is closed)"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](6,_a,4,2,"div",4),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",!t.closed),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngModel",t.showResults),v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("ngIf",t.contentHash))},directives:[h.o,xt.a,ue.t,ue.w,Et.a,Sa.a],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");mat-form-field[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{color:#737373}mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-family:Muli,sans-serif;line-height:1.35;box-sizing:border-box}@media (orientation:landscape){mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-size:3.1400966184vh}}@media (orientation:portrait){mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-size:3.1400966184vw}}@media (orientation:landscape) and (max-height:414px){mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-size:13px}}@media (orientation:portrait) and (max-width:414px){mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-size:13px}}@media (min-width:445.8461538462px){mat-form-field[_ngcontent-%COMP%], mg-body-input[_ngcontent-%COMP%], mg-date-time-picker[_ngcontent-%COMP%]{font-size:14px}}.form-input-hpadding[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px}.pseudo-mg-input[_ngcontent-%COMP%]{color:#737373;border-bottom:1px solid #ccc}.pseudo-mg-input[_ngcontent-%COMP%]     .textarea-placeholder{color:#2f2f2f}.input-margin[_ngcontent-%COMP%]{margin:8px}.input-group[_ngcontent-%COMP%]{margin:16px;--mg-form-field-margin:4px 0}.input-group.vmargin-only[_ngcontent-%COMP%]{margin:16px 0}.input-group[_ngcontent-%COMP%] > .input-group[_ngcontent-%COMP%]{padding:0;margin:16px 0}mat-form-field[mgFormField][_ngcontent-%COMP%] + .input-group[_ngcontent-%COMP%]{margin-top:0}.input-hpadding[_ngcontent-%COMP%]{padding-left:14px;padding-right:14px}.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-family:Muli,sans-serif;font-weight:700;line-height:1.35}@media (orientation:landscape){.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:3.8647342995vh}}@media (orientation:portrait){.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:3.8647342995vw}}@media (orientation:landscape) and (max-height:414px){.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:16px}}@media (orientation:portrait) and (max-width:414px){.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:16px}}@media (min-width:439.875px){.title-input[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{font-size:17px}}.mg-draft-dirty[_ngcontent-%COMP%]{color:#036}.text-input[_ngcontent-%COMP%]{padding:16px;border-top:1px solid #e2e2e2}.text-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border:none;color:#737373;font-size:16px;font-weight:400;font-family:Muli,sans-serif}.text-input[_ngcontent-%COMP%]   input.mg-draft-dirty[_ngcontent-%COMP%]{color:#036}.text-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.input-padding[_ngcontent-%COMP%]{padding:16px}.body-input[_ngcontent-%COMP%]{border-top:1px solid #e2e2e2;color:#737373}.body-input.mg-draft-dirty[_ngcontent-%COMP%], .mg-label[_ngcontent-%COMP%]{color:#2f2f2f}.mg-label[_ngcontent-%COMP%]{margin-top:8px}mat-slide-toggle.toggle-with-subtext[_ngcontent-%COMP%]{margin-left:0;margin-bottom:14px}mat-slide-toggle.toggle-with-subtext[_ngcontent-%COMP%]:first-child{margin-top:0;margin-bottom:14px}mat-slide-toggle.toggle-with-subtext[_ngcontent-%COMP%]     .mat-slide-toggle-label{align-items:flex-start}mat-slide-toggle.toggle-with-subtext[_ngcontent-%COMP%]     .mat-slide-toggle-label .mat-slide-toggle-content{text-align:left;padding-bottom:.5em}mat-slide-toggle.toggle-with-subtext[_ngcontent-%COMP%]     .mat-slide-toggle-label .mat-slide-toggle-content .toggle-subtext{display:block;white-space:normal;margin-top:1em}mat-slide-toggle[_ngcontent-%COMP%]{color:#737373}mat-slide-toggle[_ngcontent-%COMP%]     .mat-slide-toggle-bar{margin-right:0}.close-poll-btn[_ngcontent-%COMP%]{text-align:center}']}),Ea),La=((Ta=c((function e(){l(this,e)}))).\u0275fac=function(e){return new(e||Ta)},Ta.\u0275mod=v["\u0275\u0275defineNgModule"]({type:Ta}),Ta.\u0275inj=v["\u0275\u0275defineInjector"]({imports:[[Sn.a,Cn.a,h.c,ue.m,xt.b]]}),Ta),Ua=o("tsE+"),Aa=((ja=function(e){g(i,e);var n=p(i);function i(){var e;return l(this,i),(e=n.call(this)).contentMetadataKeys=["programContentOffset"],e.displayTitle="Program Content Controls",e.displayPreview="",e.programContentOffset=null,e._changesSubject=new P.a,e}return c(i,[{key:"programContentOffsetChange",value:function(e){this.saveContentMetadata("programContentOffset",e)}},{key:"onChanges",value:function(){return this._changesSubject.asObservable()}},{key:"mgDraftReady",value:function(){this.saveContentMetadata("programContentOffset",this.programContentOffset)}},{key:"ngOnDestroy",value:function(){t(m(i.prototype),"ngOnDestroy",this).call(this)}}]),i}(Q)).\u0275fac=function(e){return new(e||ja)},ja.\u0275cmp=v["\u0275\u0275defineComponent"]({type:ja,selectors:[["mg-program-content-control"]],features:[v["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:1,consts:[["name","programContentOffset",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"mg-date-time-offset-picker",0),v["\u0275\u0275listener"]("ngModelChange",(function(e){return t.programContentOffset=e}))("ngModelChange",(function(e){return t.programContentOffsetChange(e)})),v["\u0275\u0275elementEnd"]()),2&e&&v["\u0275\u0275property"]("ngModel",t.programContentOffset)},directives:[Ua.a,ue.t,ue.w],styles:[""]}),ja),Ga=((Ba=c((function e(){l(this,e)}))).\u0275fac=function(e){return new(e||Ba)},Ba.\u0275mod=v["\u0275\u0275defineNgModule"]({type:Ba}),Ba.\u0275inj=v["\u0275\u0275defineInjector"]({imports:[[_.a,ue.m]]}),Ba),Ha=o("VRyK"),qa=o("mPVK"),$a=o("E4Uz"),Qa=function(){return{standalone:!0}},Ka=((Va=function(e){g(i,e);var n=p(i);function i(){var e;return l(this,i),(e=n.call(this)).contentMetadataKeys=[],e.displayTitle="Styling",e.displayPreview="",e.lightContent=!1,e.gradientOverlap=!1,e.backgroundColor="",e.gradientSize=.6,e.backgroundColorChange=new v.EventEmitter,e.gradientOverlapChange=new v.EventEmitter,e.lightContentChange=new v.EventEmitter,e.gradientSizeChange=new v.EventEmitter,e}return c(i,[{key:"lightContentChanged",value:function(e){this.contentInfoDraft.saveToDraft("lightContent",e),this.lightContentChange.emit(e)}},{key:"gradientOverlapChanged",value:function(e){this.contentInfoDraft.saveToDraft("gradientOverlap",e),this.gradientOverlapChange.emit(e)}},{key:"backgroundColorChanged",value:function(e){this.contentInfoDraft.saveToDraft("backgroundColor",e),this.backgroundColorChange.emit(e)}},{key:"gradientSizeChanged",value:function(e){this.contentInfoDraft.saveToDraft("gradientSize",e),this.gradientSizeChange.emit(e)}},{key:"onChanges",value:function(){return Object(Ha.a)(this.lightContentChange,this.gradientOverlapChange,this.backgroundColorChange,this.gradientSizeChange)}},{key:"mgDraftReady",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contentInfoDraft.cloneDraftMergedWithInitialFetchIfNeeded();case 2:t=e.sent,this.backgroundColor=t.backgroundColor||"",this.lightContent=!!t.lightContent,this.gradientOverlap=!!t.gradientOverlap,this.gradientSize=t.gradientSize||.6;case 4:case"end":return e.stop()}}),e,this)})))}},{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){t(m(i.prototype),"ngOnDestroy",this).call(this)}}]),i}(Q)).\u0275fac=function(e){return new(e||Va)},Va.\u0275cmp=v["\u0275\u0275defineComponent"]({type:Va,selectors:[["mg-stylish-control"]],inputs:{lightContent:"lightContent",gradientOverlap:"gradientOverlap",backgroundColor:"backgroundColor",gradientSize:"gradientSize"},outputs:{backgroundColorChange:"backgroundColorChange",gradientOverlapChange:"gradientOverlapChange",lightContentChange:"lightContentChange",gradientSizeChange:"gradientSizeChange"},features:[v["\u0275\u0275InheritDefinitionFeature"]],decls:25,vars:14,consts:[["fxLayout","row","fxLayout.xs","column"],["fxFlex",""],["fxLayout","row","fxLayoutAlign","center center",1,"publish-control-pane"],[1,"publish-control-pane-title"],[3,"ngModelOptions","ngModel","ngModelChange"],[3,"disabled","ngModelOptions","ngModel","ngModelChange"],["min","0","max","1","step","0.01",3,"ngModel","ngModelChange"],["fxFlex","","fxLayout","row",1,"publish-control-pane"],[1,"color-input-wrap"],["tabindex","-1","cpOutputFormat","hex","cpDialogDisplay","inline",1,"color-input","mg-hidden",3,"colorPicker","cpToggle","cpPosition","ngModelOptions","ngModel","colorPickerChange","ngModelChange"],["fxFlex","","fxHide.gt-xs",""]],template:function(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"div",0),v["\u0275\u0275elementStart"](1,"div",1),v["\u0275\u0275elementStart"](2,"div",2),v["\u0275\u0275elementStart"](3,"div",3),v["\u0275\u0275text"](4,"Light Content"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275element"](5,"div",1),v["\u0275\u0275elementStart"](6,"div"),v["\u0275\u0275elementStart"](7,"mat-slide-toggle",4),v["\u0275\u0275listener"]("ngModelChange",(function(e){return t.lightContentChanged(e)}))("ngModelChange",(function(e){return t.lightContent=e})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](8,"div",2),v["\u0275\u0275elementStart"](9,"div",3),v["\u0275\u0275text"](10,"Gradient Overlap"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275element"](11,"div",1),v["\u0275\u0275elementStart"](12,"div"),v["\u0275\u0275elementStart"](13,"mat-slide-toggle",5),v["\u0275\u0275listener"]("ngModelChange",(function(e){return t.gradientOverlapChanged(e)}))("ngModelChange",(function(e){return t.gradientOverlap=e})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](14,"div",2),v["\u0275\u0275elementStart"](15,"div",3),v["\u0275\u0275text"](16,"Gradient Size"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275element"](17,"div",1),v["\u0275\u0275elementStart"](18,"div"),v["\u0275\u0275elementStart"](19,"mat-slider",6),v["\u0275\u0275listener"]("ngModelChange",(function(e){return t.gradientSize=e}))("ngModelChange",(function(e){return t.gradientSizeChanged(e)})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](20,"div",7),v["\u0275\u0275element"](21,"div",1),v["\u0275\u0275elementStart"](22,"div",8),v["\u0275\u0275elementStart"](23,"input",9),v["\u0275\u0275listener"]("colorPickerChange",(function(e){return t.backgroundColor=e}))("ngModelChange",(function(e){return t.backgroundColor=e}))("colorPickerChange",(function(e){return t.backgroundColorChanged(e)}))("ngModelChange",(function(e){return t.backgroundColorChanged(e)})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275element"](24,"div",10),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](7),v["\u0275\u0275property"]("ngModelOptions",v["\u0275\u0275pureFunction0"](11,Qa))("ngModel",t.lightContent),v["\u0275\u0275advance"](6),v["\u0275\u0275property"]("disabled",!t.backgroundColor)("ngModelOptions",v["\u0275\u0275pureFunction0"](12,Qa))("ngModel",t.gradientOverlap),v["\u0275\u0275advance"](6),v["\u0275\u0275property"]("ngModel",t.gradientSize),v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("colorPicker",t.backgroundColor)("cpToggle",!0)("cpPosition","bottom")("ngModelOptions",v["\u0275\u0275pureFunction0"](13,Qa))("ngModel",t.backgroundColor))},directives:[wt.e,wt.b,wt.d,xt.a,ue.t,ue.w,qa.a,ue.d,$a.a,Ft.b],styles:[".color-input[_ngcontent-%COMP%]{position:absolute}.publish-control-pane[_ngcontent-%COMP%]{padding:8px}"]}),Va),Ya=((Na=c((function e(){l(this,e)}))).\u0275fac=function(e){return new(e||Na)},Na.\u0275mod=v["\u0275\u0275defineNgModule"]({type:Na}),Na.\u0275inj=v["\u0275\u0275defineInjector"]({imports:[[h.c,ue.m,bn.a,qa.b,xt.b,$a.b]]}),Na),Za=((za=function(e){g(n,e);var t=p(n);function n(e,i,r,a,o){var s;return l(this,n),(s=t.call(this,e,i,r,a,o)).route=e,s.router=i,s.matDialog=r,s.snackBar=a,s.groupsFacadeService=o,s}return c(n,[{key:"mgContentInfoDraftReady",value:function(){this.initDraft()}},{key:"initDraft",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contentInfoDraft.fetchInitialDraftInfo();case 2:return e.next=4,this.contentInfoDraft.cloneDraftMergedWithInitial();case 4:t=e.sent,this.imageAsset=t.asset;case 6:case"end":return e.stop()}}),e,this)})))}},{key:"onImageAssetChange",value:function(e){this.contentInfoDraft.saveToDraft("asset",e)}},{key:"getPreviousStep",value:function(){return{icon:"close",name:"Back"}}},{key:"previousStep",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.exitDraft();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"nextStep",value:function(){return Object(x.a)(this,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.navigateToPreview();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"getNextStep",value:function(){return{name:"Preview",icon:"forward"}}}]),n}($)).\u0275fac=function(e){return new(e||za)(v["\u0275\u0275directiveInject"](y.a),v["\u0275\u0275directiveInject"](y.g),v["\u0275\u0275directiveInject"](G.b),v["\u0275\u0275directiveInject"](H.b),v["\u0275\u0275directiveInject"](q.b))},za.\u0275cmp=v["\u0275\u0275defineComponent"]({type:za,selectors:[["mg-update-full-graphic"]],features:[v["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:2,consts:[["required","","name","image","previewAspectRatio","3:4",3,"previewSize","ngModel","ngModelChange"]],template:function(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"form"),v["\u0275\u0275elementStart"](1,"mg-file-input-upload",0),v["\u0275\u0275listener"]("ngModelChange",(function(e){return t.imageAsset=e}))("ngModelChange",(function(e){return t.onImageAssetChange(e)})),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("previewSize",700)("ngModel",t.imageAsset))},directives:[ue.E,ue.u,ue.v,Nn.a,ue.B,ue.t,ue.w],styles:["[_nghost-%COMP%]{display:block}mg-file-input-upload[_ngcontent-%COMP%]{max-width:414px;margin:16px auto}@media (max-width:599px){mg-file-input-upload[_ngcontent-%COMP%]{margin:8px auto;font-size:75%;max-width:300px}}"]}),za),Ja=((Ra=c((function e(){l(this,e)}))).\u0275fac=function(e){return new(e||Ra)},Ra.\u0275mod=v["\u0275\u0275defineNgModule"]({type:Ra}),Ra.\u0275inj=v["\u0275\u0275defineInjector"]({imports:[[Wn.a,ue.m]]}),Ra);function Xa(e,t){return[{path:"create/"+e,component:t.createComponentType,canDeactivate:[M.c],resolve:{contentInfoDraft:t.infoDraftResolver}},{path:"m/create/"+e,component:t.createComponentType,canDeactivate:[M.c],data:{context:{type:"minga"}},resolve:{contentInfoDraft:t.infoDraftResolver}},{path:"p/create/"+e+"/:programHash",component:t.createComponentType,canDeactivate:[M.c],data:{context:{type:"program"}},resolve:{contentInfoDraft:t.infoDraftResolver}},{path:"g/create/"+e,component:t.createComponentType,canDeactivate:[M.c],data:{context:{type:"group"}},resolve:{contentInfoDraft:t.infoDraftResolver}},{path:"edit/"+e+"/:contentHash",component:t.editComponentType,canDeactivate:[M.c],resolve:{contentInfoDraft:t.infoDraftResolver}},{path:"m/edit/"+e+"/:contentHash/:contentContextHash",component:t.editComponentType,canDeactivate:[M.c],resolve:{contentInfoDraft:t.infoDraftResolver}},{path:"p/edit/"+e+"/:contentHash/:programHash",component:t.editComponentType,canDeactivate:[M.c],resolve:{contentInfoDraft:t.infoDraftResolver}},{path:"g/edit/"+e+"/:contentHash/:contentContextHash",component:t.editComponentType,canDeactivate:[M.c],resolve:{contentInfoDraft:t.infoDraftResolver}},{path:"preview/"+e,component:Me,canDeactivate:[M.c],resolve:{contentInfoDraft:t.infoDraftResolver},data:{previewControls:t.previewControls}},{path:"m/preview/"+e,component:Me,canDeactivate:[M.c],resolve:{contentInfoDraft:t.infoDraftResolver},data:{context:{type:"minga"},previewControls:[].concat(i(t.previewControls),[{component:Oa,permissions:{atLeastOne:[O.MingaPermission.CONTENT_PUBLISH_DATES_SET,O.MingaPermission.MINGA_CONTENT_PIN,O.MingaPermission.EMAIL_CONTENT_AS_GROUP_OWNER,O.MingaPermission.EMAIL_CONTENT]}}])}},{path:"p/preview/"+e+"/:programHash",component:Me,canDeactivate:[M.c],resolve:{contentInfoDraft:t.infoDraftResolver},data:{context:{type:"program"},previewControls:[].concat(i(t.previewControls),[{component:Aa}])}},{path:"g/preview/"+e,component:Me,canDeactivate:[M.c],resolve:{contentInfoDraft:t.infoDraftResolver},data:{context:{type:"group"},previewControls:[].concat(i(t.previewControls),[{component:Oa,permissions:{atLeastOne:[O.MingaPermission.CONTENT_PUBLISH_DATES_SET,O.MingaPermission.MINGA_CONTENT_PIN,O.MingaPermission.EMAIL_CONTENT_AS_GROUP_OWNER,O.MingaPermission.EMAIL_CONTENT]}}])}},{path:"preview/"+e+"/:contentHash",canDeactivate:[M.c],component:Me,resolve:{contentInfoDraft:t.infoDraftResolver},data:{previewControls:t.previewControls}},{path:"m/preview/"+e+"/:contentHash/:contentContextHash",canDeactivate:[M.c],component:Me,resolve:{contentInfoDraft:t.infoDraftResolver},data:{context:{type:"minga"},previewControls:[].concat(i(t.previewControls),[{component:Oa,permissions:{atLeastOne:[O.MingaPermission.CONTENT_PUBLISH_DATES_SET,O.MingaPermission.MINGA_CONTENT_PIN,O.MingaPermission.EMAIL_CONTENT_AS_GROUP_OWNER,O.MingaPermission.EMAIL_CONTENT]}}])}},{path:"g/preview/"+e+"/:contentHash/:contentContextHash",canDeactivate:[M.c],component:Me,resolve:{contentInfoDraft:t.infoDraftResolver},data:{context:{type:"minga"},previewControls:[].concat(i(t.previewControls),[{component:Oa,permissions:{atLeastOne:[O.MingaPermission.CONTENT_PUBLISH_DATES_SET,O.MingaPermission.MINGA_CONTENT_PIN,O.MingaPermission.EMAIL_CONTENT_AS_GROUP_OWNER,O.MingaPermission.EMAIL_CONTENT]}}])}},{path:"p/preview/"+e+"/:contentHash/:programHash",canDeactivate:[M.c],component:Me,resolve:{contentInfoDraft:t.infoDraftResolver},data:{context:{type:"program"},previewControls:[].concat(i(t.previewControls),[{component:Aa}])}}]}var eo,to=[{path:"",component:Pe,children:[{path:"",pathMatch:"full",redirectTo:"/"}].concat(i(Xa("post",{createComponentType:Qi,editComponentType:Qi,infoDraftResolver:tr,previewControls:[]})),i(Xa("fullGraphic",{createComponentType:Vn,editComponentType:Za,infoDraftResolver:qn,previewControls:[{component:Ka,permissions:{only:[O.MingaPermission.CONTENT_FULL_GRAPHIC_CREATE]}}]})),i(Xa("video",{createComponentType:la,editComponentType:la,infoDraftResolver:ga,previewControls:[]})),i(Xa("announcement",{createComponentType:Ue,editComponentType:Ue,infoDraftResolver:ct,previewControls:[]})),i(Xa("event",{createComponentType:yn,editComponentType:yn,infoDraftResolver:zn,previewControls:[]})),i(Xa("poll",{createComponentType:Ii,editComponentType:Ii,infoDraftResolver:Ei,previewControls:[{component:Wa}]})),i(Xa("sms_message",{createComponentType:dr,editComponentType:dr,infoDraftResolver:yr,previewControls:[]})))}],no=((eo=c((function e(){l(this,e)}))).\u0275fac=function(e){return new(e||eo)},eo.\u0275mod=v["\u0275\u0275defineNgModule"]({type:eo}),eo.\u0275inj=v["\u0275\u0275defineInjector"]({providers:[Gn,qn,Xi,tr,ca,ga,st,ct,jn,zn,ti,Ei,vr,yr],imports:[[C.b,xe,Qe,In,Ln,Ti,Yi,ua,fr,Ja,Da,La,Ga,Ya,k.a,M.a,w.a,h.c,b.c.forChild(),y.k.forChild(to)]]}),eo)},"6sqc":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeltaAnnouncementInfo=t.AnnouncementInfo=void 0;var i=n("hRO2"),r=n("F5Qo"),a=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,null,null),r}return c(n,[{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getTitle",value:function(){return i.Message.getFieldWithDefault(this,1,"")}},{key:"setTitle",value:function(e){i.Message.setProto3StringField(this,1,e)}},{key:"getBody",value:function(){return i.Message.getFieldWithDefault(this,2,"")}},{key:"setBody",value:function(e){i.Message.setProto3StringField(this,2,e)}}],[{key:"toObject",value:function(e,t){var n={title:i.Message.getFieldWithDefault(t,1,""),body:i.Message.getFieldWithDefault(t,2,"")};return e&&(n.$jspbMessageInstance=t),n}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setTitle(n);break;case 2:var i=t.readString();e.setBody(i);break;default:t.skipField()}return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n=void 0;(n=e.getTitle()).length>0&&t.writeString(1,n),(n=e.getBody()).length>0&&t.writeString(2,n)}}]),n}(i.Message);t.AnnouncementInfo=a,a.displayName="AnnouncementInfo";var o=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,null,null),r}return c(n,[{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getContentHash",value:function(){return i.Message.getFieldWithDefault(this,1,"")}},{key:"setContentHash",value:function(e){i.Message.setProto3StringField(this,1,e)}},{key:"getTitle",value:function(){return i.Message.getWrapperField(this,r.StringDelta,2)}},{key:"setTitle",value:function(e){i.Message.setWrapperField(this,2,e)}},{key:"clearTitle",value:function(){this.setTitle(void 0)}},{key:"hasTitle",value:function(){return null!=i.Message.getField(this,2)}},{key:"getBody",value:function(){return i.Message.getWrapperField(this,r.StringDelta,3)}},{key:"setBody",value:function(e){i.Message.setWrapperField(this,3,e)}},{key:"clearBody",value:function(){this.setBody(void 0)}},{key:"hasBody",value:function(){return null!=i.Message.getField(this,3)}}],[{key:"toObject",value:function(e,t){var n,a={contentHash:i.Message.getFieldWithDefault(t,1,""),title:(n=t.getTitle())&&r.StringDelta.toObject(e,n),body:(n=t.getBody())&&r.StringDelta.toObject(e,n)};return e&&(a.$jspbMessageInstance=t),a}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setContentHash(n);break;case 2:var i=new r.StringDelta;t.readMessage(i,r.StringDelta.deserializeBinaryFromReader),e.setTitle(i);break;case 3:var a=new r.StringDelta;t.readMessage(a,r.StringDelta.deserializeBinaryFromReader),e.setBody(a);break;default:t.skipField()}return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n=void 0;(n=e.getContentHash()).length>0&&t.writeString(1,n),null!=(n=e.getTitle())&&t.writeMessage(2,n,r.StringDelta.serializeBinaryToWriter),null!=(n=e.getBody())&&t.writeMessage(3,n,r.StringDelta.serializeBinaryToWriter)}}]),n}(i.Message);t.DeltaAnnouncementInfo=o,o.displayName="DeltaAnnouncementInfo"},"8slR":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FullGraphic=void 0,n("8Y7J");var i=n("+6wJ"),r=n("nfLS"),a=n("8Y7J"),o=function(){function e(t){l(this,e),this._ngZone=t}return c(e,[{key:"new",value:function(e,t,n){var a,o,s,l=this;"function"==typeof t?o=t:(s=t,o=n),o||(a=new Promise((function(e,t){o=function(n,i){n?t(n):e(i)}})));var u=null,c=i.grpc.invoke(r.FullGraphic.New,{request:e,host:window.DEFAULT_ANGULAR_GRPC_HOST||"https://"+location.hostname,metadata:s,onHeaders:function(e){return u=e},onMessage:function(e){return l._ngZone.run((function(){o(null,e,u||new i.grpc.Metadata)}))},onEnd:function(e,t,n){return l._ngZone.run((function(){if(e!=i.grpc.Code.OK){var n=new Error(t);n.code=e,o(n)}}))}});return a.cancel=function(){return c.close()},a}},{key:"update",value:function(e,t,n){var a,o,s,l=this;"function"==typeof t?o=t:(s=t,o=n),o||(a=new Promise((function(e,t){o=function(n,i){n?t(n):e(i)}})));var u=null,c=i.grpc.invoke(r.FullGraphic.Update,{request:e,host:window.DEFAULT_ANGULAR_GRPC_HOST||"https://"+location.hostname,metadata:s,onHeaders:function(e){return u=e},onMessage:function(e){return l._ngZone.run((function(){o(null,e,u||new i.grpc.Metadata)}))},onEnd:function(e,t,n){return l._ngZone.run((function(){if(e!=i.grpc.Code.OK){var n=new Error(t);n.code=e,o(n)}}))}});return a.cancel=function(){return c.close()},a}},{key:"getInfo",value:function(e,t,n){var a,o,s,l=this;"function"==typeof t?o=t:(s=t,o=n),o||(a=new Promise((function(e,t){o=function(n,i){n?t(n):e(i)}})));var u=null,c=i.grpc.invoke(r.FullGraphic.GetInfo,{request:e,host:window.DEFAULT_ANGULAR_GRPC_HOST||"https://"+location.hostname,metadata:s,onHeaders:function(e){return u=e},onMessage:function(e){return l._ngZone.run((function(){o(null,e,u||new i.grpc.Metadata)}))},onEnd:function(e,t,n){return l._ngZone.run((function(){if(e!=i.grpc.Code.OK){var n=new Error(t);n.code=e,o(n)}}))}});return a.cancel=function(){return c.close()},a}}]),e}();t.FullGraphic=o,o.\u0275fac=function(e){return new(e||o)(a.\u0275\u0275inject(a.NgZone))},o.\u0275prov=a.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"})},"9XD7":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmsMessageContent=void 0,n("8Y7J");var i=n("+6wJ"),r=n("Oyg3"),a=n("8Y7J"),o=function(){function e(t){l(this,e),this._ngZone=t}return c(e,[{key:"new",value:function(e,t,n){var a,o,s,l=this;"function"==typeof t?o=t:(s=t,o=n),o||(a=new Promise((function(e,t){o=function(n,i){n?t(n):e(i)}})));var u=null,c=i.grpc.invoke(r.SmsMessageContent.New,{request:e,host:window.DEFAULT_ANGULAR_GRPC_HOST||"https://"+location.hostname,metadata:s,onHeaders:function(e){return u=e},onMessage:function(e){return l._ngZone.run((function(){o(null,e,u||new i.grpc.Metadata)}))},onEnd:function(e,t,n){return l._ngZone.run((function(){if(e!=i.grpc.Code.OK){var n=new Error(t);n.code=e,o(n)}}))}});return a.cancel=function(){return c.close()},a}},{key:"update",value:function(e,t,n){var a,o,s,l=this;"function"==typeof t?o=t:(s=t,o=n),o||(a=new Promise((function(e,t){o=function(n,i){n?t(n):e(i)}})));var u=null,c=i.grpc.invoke(r.SmsMessageContent.Update,{request:e,host:window.DEFAULT_ANGULAR_GRPC_HOST||"https://"+location.hostname,metadata:s,onHeaders:function(e){return u=e},onMessage:function(e){return l._ngZone.run((function(){o(null,e,u||new i.grpc.Metadata)}))},onEnd:function(e,t,n){return l._ngZone.run((function(){if(e!=i.grpc.Code.OK){var n=new Error(t);n.code=e,o(n)}}))}});return a.cancel=function(){return c.close()},a}},{key:"getInfo",value:function(e,t,n){var a,o,s,l=this;"function"==typeof t?o=t:(s=t,o=n),o||(a=new Promise((function(e,t){o=function(n,i){n?t(n):e(i)}})));var u=null,c=i.grpc.invoke(r.SmsMessageContent.GetInfo,{request:e,host:window.DEFAULT_ANGULAR_GRPC_HOST||"https://"+location.hostname,metadata:s,onHeaders:function(e){return u=e},onMessage:function(e){return l._ngZone.run((function(){o(null,e,u||new i.grpc.Metadata)}))},onEnd:function(e,t,n){return l._ngZone.run((function(){if(e!=i.grpc.Code.OK){var n=new Error(t);n.code=e,o(n)}}))}});return a.cancel=function(){return c.close()},a}}]),e}();t.SmsMessageContent=o,o.\u0275fac=function(e){return new(e||o)(a.\u0275\u0275inject(a.NgZone))},o.\u0275prov=a.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"})},"9iN8":function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f.b})),n.d(t,"c",(function(){return f.c}));var i,r=n("SVse"),a=n("8Y7J"),o=n("s7LF"),s=n("pMoy"),u=n("Q2Ze"),d=n("e6WT"),g=n("ZTz/"),f=n("tsE+"),p=((i=c((function e(){l(this,e)}))).\u0275fac=function(e){return new(e||i)},i.\u0275mod=a["\u0275\u0275defineNgModule"]({type:i}),i.\u0275inj=a["\u0275\u0275defineInjector"]({imports:[[r.c,o.m,s.b,g.b,u.f,d.c]]}),i)},Oyg3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmsMessageContentClient=t.SmsMessageContent=void 0;var i=n("3wAF"),r=n("yJXV"),a=c((function e(){l(this,e)}));t.SmsMessageContent=a,a.serviceName="minga.content.SmsMessageContent",a.New={methodName:"New",service:a,requestStream:!1,responseStream:!1,requestType:i.SmsMessageInfo,responseType:r.ContentSaveResult},a.Update={methodName:"Update",service:a,requestStream:!1,responseStream:!1,requestType:i.DeltaSmsMessageInfo,responseType:r.ContentSaveResult},a.GetInfo={methodName:"GetInfo",service:a,requestStream:!1,responseStream:!1,requestType:r.ContentInfoQuery,responseType:i.SmsMessageInfo},t.SmsMessageContentClient=function(){function e(){l(this,e)}return c(e,[{key:"new",value:function(){throw new Error("minga_protoc_gen_improbable_eng_grpc_web client methods are unimplemented")}},{key:"update",value:function(){throw new Error("minga_protoc_gen_improbable_eng_grpc_web client methods are unimplemented")}},{key:"getInfo",value:function(){throw new Error("minga_protoc_gen_improbable_eng_grpc_web client methods are unimplemented")}}]),e}()},Pfbz:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Video=void 0,n("8Y7J");var i=n("+6wJ"),r=n("kOX6"),a=n("8Y7J"),o=function(){function e(t){l(this,e),this._ngZone=t}return c(e,[{key:"new",value:function(e,t,n){var a,o,s,l=this;"function"==typeof t?o=t:(s=t,o=n),o||(a=new Promise((function(e,t){o=function(n,i){n?t(n):e(i)}})));var u=null,c=i.grpc.invoke(r.Video.New,{request:e,host:window.DEFAULT_ANGULAR_GRPC_HOST||"https://"+location.hostname,metadata:s,onHeaders:function(e){return u=e},onMessage:function(e){return l._ngZone.run((function(){o(null,e,u||new i.grpc.Metadata)}))},onEnd:function(e,t,n){return l._ngZone.run((function(){if(e!=i.grpc.Code.OK){var n=new Error(t);n.code=e,o(n)}}))}});return a.cancel=function(){return c.close()},a}},{key:"update",value:function(e,t,n){var a,o,s,l=this;"function"==typeof t?o=t:(s=t,o=n),o||(a=new Promise((function(e,t){o=function(n,i){n?t(n):e(i)}})));var u=null,c=i.grpc.invoke(r.Video.Update,{request:e,host:window.DEFAULT_ANGULAR_GRPC_HOST||"https://"+location.hostname,metadata:s,onHeaders:function(e){return u=e},onMessage:function(e){return l._ngZone.run((function(){o(null,e,u||new i.grpc.Metadata)}))},onEnd:function(e,t,n){return l._ngZone.run((function(){if(e!=i.grpc.Code.OK){var n=new Error(t);n.code=e,o(n)}}))}});return a.cancel=function(){return c.close()},a}},{key:"getInfo",value:function(e,t,n){var a,o,s,l=this;"function"==typeof t?o=t:(s=t,o=n),o||(a=new Promise((function(e,t){o=function(n,i){n?t(n):e(i)}})));var u=null,c=i.grpc.invoke(r.Video.GetInfo,{request:e,host:window.DEFAULT_ANGULAR_GRPC_HOST||"https://"+location.hostname,metadata:s,onHeaders:function(e){return u=e},onMessage:function(e){return l._ngZone.run((function(){o(null,e,u||new i.grpc.Metadata)}))},onEnd:function(e,t,n){return l._ngZone.run((function(){if(e!=i.grpc.Code.OK){var n=new Error(t);n.code=e,o(n)}}))}});return a.cancel=function(){return c.close()},a}},{key:"newCloudflareUploadUrl",value:function(e,t,n){var a,o,s,l=this;"function"==typeof t?o=t:(s=t,o=n),o||(a=new Promise((function(e,t){o=function(n,i){n?t(n):e(i)}})));var u=null,c=i.grpc.invoke(r.Video.NewCloudflareUploadUrl,{request:e,host:window.DEFAULT_ANGULAR_GRPC_HOST||"https://"+location.hostname,metadata:s,onHeaders:function(e){return u=e},onMessage:function(e){return l._ngZone.run((function(){o(null,e,u||new i.grpc.Metadata)}))},onEnd:function(e,t,n){return l._ngZone.run((function(){if(e!=i.grpc.Code.OK){var n=new Error(t);n.code=e,o(n)}}))}});return a.cancel=function(){return c.close()},a}},{key:"getCloudflareVideoStatus",value:function(e,t,n){var a,o,s,l=this;"function"==typeof t?o=t:(s=t,o=n),o||(a=new Promise((function(e,t){o=function(n,i){n?t(n):e(i)}})));var u=null,c=i.grpc.invoke(r.Video.GetCloudflareVideoStatus,{request:e,host:window.DEFAULT_ANGULAR_GRPC_HOST||"https://"+location.hostname,metadata:s,onHeaders:function(e){return u=e},onMessage:function(e){return l._ngZone.run((function(){o(null,e,u||new i.grpc.Metadata)}))},onEnd:function(e,t,n){return l._ngZone.run((function(){if(e!=i.grpc.Code.OK){var n=new Error(t);n.code=e,o(n)}}))}});return a.cancel=function(){return c.close()},a}}]),e}();t.Video=o,o.\u0275fac=function(e){return new(e||o)(a.\u0275\u0275inject(a.NgZone))},o.\u0275prov=a.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"})},PmRf:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Announcement=void 0,n("8Y7J");var i=n("+6wJ"),r=n("mEJt"),a=n("8Y7J"),o=function(){function e(t){l(this,e),this._ngZone=t}return c(e,[{key:"new",value:function(e,t,n){var a,o,s,l=this;"function"==typeof t?o=t:(s=t,o=n),o||(a=new Promise((function(e,t){o=function(n,i){n?t(n):e(i)}})));var u=null,c=i.grpc.invoke(r.Announcement.New,{request:e,host:window.DEFAULT_ANGULAR_GRPC_HOST||"https://"+location.hostname,metadata:s,onHeaders:function(e){return u=e},onMessage:function(e){return l._ngZone.run((function(){o(null,e,u||new i.grpc.Metadata)}))},onEnd:function(e,t,n){return l._ngZone.run((function(){if(e!=i.grpc.Code.OK){var n=new Error(t);n.code=e,o(n)}}))}});return a.cancel=function(){return c.close()},a}},{key:"update",value:function(e,t,n){var a,o,s,l=this;"function"==typeof t?o=t:(s=t,o=n),o||(a=new Promise((function(e,t){o=function(n,i){n?t(n):e(i)}})));var u=null,c=i.grpc.invoke(r.Announcement.Update,{request:e,host:window.DEFAULT_ANGULAR_GRPC_HOST||"https://"+location.hostname,metadata:s,onHeaders:function(e){return u=e},onMessage:function(e){return l._ngZone.run((function(){o(null,e,u||new i.grpc.Metadata)}))},onEnd:function(e,t,n){return l._ngZone.run((function(){if(e!=i.grpc.Code.OK){var n=new Error(t);n.code=e,o(n)}}))}});return a.cancel=function(){return c.close()},a}},{key:"getInfo",value:function(e,t,n){var a,o,s,l=this;"function"==typeof t?o=t:(s=t,o=n),o||(a=new Promise((function(e,t){o=function(n,i){n?t(n):e(i)}})));var u=null,c=i.grpc.invoke(r.Announcement.GetInfo,{request:e,host:window.DEFAULT_ANGULAR_GRPC_HOST||"https://"+location.hostname,metadata:s,onHeaders:function(e){return u=e},onMessage:function(e){return l._ngZone.run((function(){o(null,e,u||new i.grpc.Metadata)}))},onEnd:function(e,t,n){return l._ngZone.run((function(){if(e!=i.grpc.Code.OK){var n=new Error(t);n.code=e,o(n)}}))}});return a.cancel=function(){return c.close()},a}}]),e}();t.Announcement=o,o.\u0275fac=function(e){return new(e||o)(a.\u0275\u0275inject(a.NgZone))},o.\u0275prov=a.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"})},ZAf1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DateTime=t.Date=void 0;var i=n("hRO2"),r=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,null,null),r}return c(n,[{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getYear",value:function(){return i.Message.getFieldWithDefault(this,1,0)}},{key:"setYear",value:function(e){i.Message.setProto3IntField(this,1,e)}},{key:"getMonth",value:function(){return i.Message.getFieldWithDefault(this,2,0)}},{key:"setMonth",value:function(e){i.Message.setProto3IntField(this,2,e)}},{key:"getDay",value:function(){return i.Message.getFieldWithDefault(this,3,0)}},{key:"setDay",value:function(e){i.Message.setProto3IntField(this,3,e)}}],[{key:"toObject",value:function(e,t){var n={year:i.Message.getFieldWithDefault(t,1,0),month:i.Message.getFieldWithDefault(t,2,0),day:i.Message.getFieldWithDefault(t,3,0)};return e&&(n.$jspbMessageInstance=t),n}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readInt32();e.setYear(n);break;case 2:var i=t.readInt32();e.setMonth(i);break;case 3:var r=t.readInt32();e.setDay(r);break;default:t.skipField()}return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n=void 0;0!==(n=e.getYear())&&t.writeInt32(1,n),0!==(n=e.getMonth())&&t.writeInt32(2,n),0!==(n=e.getDay())&&t.writeInt32(3,n)}}]),n}(i.Message);t.Date=r,r.displayName="Date";var a=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,null,null),r}return c(n,[{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getYear",value:function(){return i.Message.getFieldWithDefault(this,1,0)}},{key:"setYear",value:function(e){i.Message.setProto3IntField(this,1,e)}},{key:"getMonth",value:function(){return i.Message.getFieldWithDefault(this,2,0)}},{key:"setMonth",value:function(e){i.Message.setProto3IntField(this,2,e)}},{key:"getDay",value:function(){return i.Message.getFieldWithDefault(this,3,0)}},{key:"setDay",value:function(e){i.Message.setProto3IntField(this,3,e)}},{key:"getSeconds",value:function(){return i.Message.getFieldWithDefault(this,4,0)}},{key:"setSeconds",value:function(e){i.Message.setProto3IntField(this,4,e)}}],[{key:"toObject",value:function(e,t){var n={year:i.Message.getFieldWithDefault(t,1,0),month:i.Message.getFieldWithDefault(t,2,0),day:i.Message.getFieldWithDefault(t,3,0),seconds:i.Message.getFieldWithDefault(t,4,0)};return e&&(n.$jspbMessageInstance=t),n}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readInt32();e.setYear(n);break;case 2:var i=t.readInt32();e.setMonth(i);break;case 3:var r=t.readInt32();e.setDay(r);break;case 4:var a=t.readInt32();e.setSeconds(a);break;default:t.skipField()}return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n=void 0;0!==(n=e.getYear())&&t.writeInt32(1,n),0!==(n=e.getMonth())&&t.writeInt32(2,n),0!==(n=e.getDay())&&t.writeInt32(3,n),0!==(n=e.getSeconds())&&t.writeInt32(4,n)}}]),n}(i.Message);t.DateTime=a,a.displayName="DateTime"},bHfG:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DateTimeDelta=t.DateDelta=t.RepeatedStringDelta=t.DoubleDelta=t.FloatDelta=t.Uint64Delta=t.Int64Delta=t.Uint32Delta=t.Int32Delta=t.BoolDelta=t.StringDelta=void 0;var i=n("hRO2"),r=n("ZAf1"),a=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,null,null),r}return c(n,[{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getNewString",value:function(){return i.Message.getFieldWithDefault(this,1,"")}},{key:"setNewString",value:function(e){i.Message.setProto3StringField(this,1,e)}}],[{key:"toObject",value:function(e,t){var n={newString:i.Message.getFieldWithDefault(t,1,"")};return e&&(n.$jspbMessageInstance=t),n}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=t.readString();e.setNewString(n)}else t.skipField();return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n;(n=e.getNewString()).length>0&&t.writeString(1,n)}}]),n}(i.Message);t.StringDelta=a,a.displayName="StringDelta";var o=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,null,null),r}return c(n,[{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getNewBool",value:function(){return i.Message.getBooleanFieldWithDefault(this,1,!1)}},{key:"setNewBool",value:function(e){i.Message.setProto3BooleanField(this,1,e)}}],[{key:"toObject",value:function(e,t){var n={newBool:i.Message.getBooleanFieldWithDefault(t,1,!1)};return e&&(n.$jspbMessageInstance=t),n}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=t.readBool();e.setNewBool(n)}else t.skipField();return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n;(n=e.getNewBool())&&t.writeBool(1,n)}}]),n}(i.Message);t.BoolDelta=o,o.displayName="BoolDelta";var s=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,null,null),r}return c(n,[{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getNewInt32",value:function(){return i.Message.getFieldWithDefault(this,1,0)}},{key:"setNewInt32",value:function(e){i.Message.setProto3IntField(this,1,e)}}],[{key:"toObject",value:function(e,t){var n={newInt32:i.Message.getFieldWithDefault(t,1,0)};return e&&(n.$jspbMessageInstance=t),n}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=t.readInt32();e.setNewInt32(n)}else t.skipField();return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n;0!==(n=e.getNewInt32())&&t.writeInt32(1,n)}}]),n}(i.Message);t.Int32Delta=s,s.displayName="Int32Delta";var u=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,null,null),r}return c(n,[{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getNewUint32",value:function(){return i.Message.getFieldWithDefault(this,1,0)}},{key:"setNewUint32",value:function(e){i.Message.setProto3IntField(this,1,e)}}],[{key:"toObject",value:function(e,t){var n={newUint32:i.Message.getFieldWithDefault(t,1,0)};return e&&(n.$jspbMessageInstance=t),n}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=t.readUint32();e.setNewUint32(n)}else t.skipField();return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n;0!==(n=e.getNewUint32())&&t.writeUint32(1,n)}}]),n}(i.Message);t.Uint32Delta=u,u.displayName="Uint32Delta";var d=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,null,null),r}return c(n,[{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getNewInt64",value:function(){return i.Message.getFieldWithDefault(this,1,0)}},{key:"setNewInt64",value:function(e){i.Message.setProto3IntField(this,1,e)}}],[{key:"toObject",value:function(e,t){var n={newInt64:i.Message.getFieldWithDefault(t,1,0)};return e&&(n.$jspbMessageInstance=t),n}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=t.readInt64();e.setNewInt64(n)}else t.skipField();return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n;0!==(n=e.getNewInt64())&&t.writeInt64(1,n)}}]),n}(i.Message);t.Int64Delta=d,d.displayName="Int64Delta";var f=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,null,null),r}return c(n,[{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getNewUint64",value:function(){return i.Message.getFieldWithDefault(this,1,0)}},{key:"setNewUint64",value:function(e){i.Message.setProto3IntField(this,1,e)}}],[{key:"toObject",value:function(e,t){var n={newUint64:i.Message.getFieldWithDefault(t,1,0)};return e&&(n.$jspbMessageInstance=t),n}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=t.readUint64();e.setNewUint64(n)}else t.skipField();return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n;0!==(n=e.getNewUint64())&&t.writeUint64(1,n)}}]),n}(i.Message);t.Uint64Delta=f,f.displayName="Uint64Delta";var h=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,null,null),r}return c(n,[{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getNewFloat",value:function(){return i.Message.getFloatingPointFieldWithDefault(this,1,0)}},{key:"setNewFloat",value:function(e){i.Message.setProto3FloatField(this,1,e)}}],[{key:"toObject",value:function(e,t){var n={newFloat:i.Message.getFloatingPointFieldWithDefault(t,1,0)};return e&&(n.$jspbMessageInstance=t),n}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=t.readFloat();e.setNewFloat(n)}else t.skipField();return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n;0!==(n=e.getNewFloat())&&t.writeFloat(1,n)}}]),n}(i.Message);t.FloatDelta=h,h.displayName="FloatDelta";var m=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,null,null),r}return c(n,[{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getNewDouble",value:function(){return i.Message.getFloatingPointFieldWithDefault(this,1,0)}},{key:"setNewDouble",value:function(e){i.Message.setProto3FloatField(this,1,e)}}],[{key:"toObject",value:function(e,t){var n={newDouble:i.Message.getFloatingPointFieldWithDefault(t,1,0)};return e&&(n.$jspbMessageInstance=t),n}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=t.readDouble();e.setNewDouble(n)}else t.skipField();return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n;0!==(n=e.getNewDouble())&&t.writeDouble(1,n)}}]),n}(i.Message);t.DoubleDelta=m,m.displayName="DoubleDelta";var y=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,n.repeatedFields_,null),r}return c(n,[{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getEraseInstructionList",value:function(){return i.Message.getRepeatedWrapperField(this,n.EraseInstruction,1)}},{key:"setEraseInstructionList",value:function(e){i.Message.setRepeatedWrapperField(this,1,e)}},{key:"addEraseInstruction",value:function(e,t){return i.Message.addToRepeatedWrapperField(this,1,e,n.EraseInstruction,t)}},{key:"clearEraseInstructionList",value:function(){this.setEraseInstructionList([])}},{key:"getInsertInstructionList",value:function(){return i.Message.getRepeatedWrapperField(this,n.InsertInstruction,2)}},{key:"setInsertInstructionList",value:function(e){i.Message.setRepeatedWrapperField(this,2,e)}},{key:"addInsertInstruction",value:function(e,t){return i.Message.addToRepeatedWrapperField(this,2,e,n.InsertInstruction,t)}},{key:"clearInsertInstructionList",value:function(){this.setInsertInstructionList([])}}],[{key:"toObject",value:function(e,t){var r={eraseInstructionList:i.Message.toObjectList(t.getEraseInstructionList(),n.EraseInstruction.toObject,e),insertInstructionList:i.Message.toObjectList(t.getInsertInstructionList(),n.InsertInstruction.toObject,e)};return e&&(r.$jspbMessageInstance=t),r}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new n.EraseInstruction;t.readMessage(i,n.EraseInstruction.deserializeBinaryFromReader),e.addEraseInstruction(i);break;case 2:var r=new n.InsertInstruction;t.readMessage(r,n.InsertInstruction.deserializeBinaryFromReader),e.addInsertInstruction(r);break;default:t.skipField()}return e}},{key:"serializeBinaryToWriter",value:function(e,t){var i=void 0;(i=e.getEraseInstructionList()).length>0&&t.writeRepeatedMessage(1,i,n.EraseInstruction.serializeBinaryToWriter),(i=e.getInsertInstructionList()).length>0&&t.writeRepeatedMessage(2,i,n.InsertInstruction.serializeBinaryToWriter)}}]),n}(i.Message);t.RepeatedStringDelta=y,y.displayName="RepeatedStringDelta",y.repeatedFields_=[1,2],function(e){var t=function(t){g(r,t);var n=p(r);function r(e){var t;return l(this,r),t=n.call(this),i.Message.initialize(v(t),e,0,-1,null,null),t}return c(r,[{key:"toObject",value:function(e){return r.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var t=new i.BinaryWriter;return e.EraseInstruction.serializeBinaryToWriter(this,t),t.getResultBuffer()}},{key:"getEraseOffset",value:function(){return i.Message.getFieldWithDefault(this,1,0)}},{key:"setEraseOffset",value:function(e){i.Message.setProto3IntField(this,1,e)}},{key:"getEraseString",value:function(){return i.Message.getFieldWithDefault(this,2,"")}},{key:"setEraseString",value:function(e){i.Message.setProto3StringField(this,2,e)}}],[{key:"toObject",value:function(e,t){var n={eraseOffset:i.Message.getFieldWithDefault(t,1,0),eraseString:i.Message.getFieldWithDefault(t,2,"")};return e&&(n.$jspbMessageInstance=t),n}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),n=new r;return r.deserializeBinaryFromReader(n,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readUint64();e.setEraseOffset(n);break;case 2:var i=t.readString();e.setEraseString(i);break;default:t.skipField()}return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n=void 0;0!==(n=e.getEraseOffset())&&t.writeUint64(1,n),(n=e.getEraseString()).length>0&&t.writeString(2,n)}}]),r}(i.Message);t.displayName="RepeatedStringDelta.EraseInstruction",e.EraseInstruction=t}(y=t.RepeatedStringDelta||(t.RepeatedStringDelta={})),function(e){var t=function(t){g(r,t);var n=p(r);function r(e){var t;return l(this,r),t=n.call(this),i.Message.initialize(v(t),e,0,-1,null,null),t}return c(r,[{key:"toObject",value:function(e){return r.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var t=new i.BinaryWriter;return e.InsertInstruction.serializeBinaryToWriter(this,t),t.getResultBuffer()}},{key:"getInsertOffset",value:function(){return i.Message.getFieldWithDefault(this,1,0)}},{key:"setInsertOffset",value:function(e){i.Message.setProto3IntField(this,1,e)}},{key:"getInsertString",value:function(){return i.Message.getFieldWithDefault(this,2,"")}},{key:"setInsertString",value:function(e){i.Message.setProto3StringField(this,2,e)}}],[{key:"toObject",value:function(e,t){var n={insertOffset:i.Message.getFieldWithDefault(t,1,0),insertString:i.Message.getFieldWithDefault(t,2,"")};return e&&(n.$jspbMessageInstance=t),n}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),n=new r;return r.deserializeBinaryFromReader(n,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readUint64();e.setInsertOffset(n);break;case 2:var i=t.readString();e.setInsertString(i);break;default:t.skipField()}return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n=void 0;0!==(n=e.getInsertOffset())&&t.writeUint64(1,n),(n=e.getInsertString()).length>0&&t.writeString(2,n)}}]),r}(i.Message);t.displayName="RepeatedStringDelta.InsertInstruction",e.InsertInstruction=t}(y=t.RepeatedStringDelta||(t.RepeatedStringDelta={}));var b=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,null,null),r}return c(n,[{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getNewDate",value:function(){return i.Message.getWrapperField(this,r.Date,1)}},{key:"setNewDate",value:function(e){i.Message.setWrapperField(this,1,e)}},{key:"clearNewDate",value:function(){this.setNewDate(void 0)}},{key:"hasNewDate",value:function(){return null!=i.Message.getField(this,1)}}],[{key:"toObject",value:function(e,t){var n,i={newDate:(n=t.getNewDate())&&r.Date.toObject(e,n)};return e&&(i.$jspbMessageInstance=t),i}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=new r.Date;t.readMessage(n,r.Date.deserializeBinaryFromReader),e.setNewDate(n)}else t.skipField();return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n;null!=(n=e.getNewDate())&&t.writeMessage(1,n,r.Date.serializeBinaryToWriter)}}]),n}(i.Message);t.DateDelta=b,b.displayName="DateDelta";var C=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,null,null),r}return c(n,[{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getNewDateTime",value:function(){return i.Message.getWrapperField(this,r.DateTime,1)}},{key:"setNewDateTime",value:function(e){i.Message.setWrapperField(this,1,e)}},{key:"clearNewDateTime",value:function(){this.setNewDateTime(void 0)}},{key:"hasNewDateTime",value:function(){return null!=i.Message.getField(this,1)}}],[{key:"toObject",value:function(e,t){var n,i={newDateTime:(n=t.getNewDateTime())&&r.DateTime.toObject(e,n)};return e&&(i.$jspbMessageInstance=t),i}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=new r.DateTime;t.readMessage(n,r.DateTime.deserializeBinaryFromReader),e.setNewDateTime(n)}else t.skipField();return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n;null!=(n=e.getNewDateTime())&&t.writeMessage(1,n,r.DateTime.serializeBinaryToWriter)}}]),n}(i.Message);t.DateTimeDelta=C,C.displayName="DateTimeDelta"},gzPw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamDetailedModerationResult=t.DetailedModerationResult=t.ModerationResult=void 0;var i=n("hRO2"),r=n("mpOZ"),a=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,n.repeatedFields_,null),r}return c(n,[{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getAllPassed",value:function(){return i.Message.getBooleanFieldWithDefault(this,1,!1)}},{key:"setAllPassed",value:function(e){i.Message.setProto3BooleanField(this,1,e)}},{key:"getAllTextContentPassed",value:function(){return i.Message.getBooleanFieldWithDefault(this,2,!1)}},{key:"setAllTextContentPassed",value:function(e){i.Message.setProto3BooleanField(this,2,e)}},{key:"getAllImageContentPassed",value:function(){return i.Message.getBooleanFieldWithDefault(this,3,!1)}},{key:"setAllImageContentPassed",value:function(e){i.Message.setProto3BooleanField(this,3,e)}},{key:"getAllImageTextContentPassed",value:function(){return i.Message.getBooleanFieldWithDefault(this,4,!1)}},{key:"setAllImageTextContentPassed",value:function(e){i.Message.setProto3BooleanField(this,4,e)}},{key:"getDetailsList",value:function(){return i.Message.getRepeatedWrapperField(this,o.ProviderDetails,5)}},{key:"setDetailsList",value:function(e){i.Message.setRepeatedWrapperField(this,5,e)}},{key:"addDetails",value:function(e,t){return i.Message.addToRepeatedWrapperField(this,5,e,o.ProviderDetails,t)}},{key:"clearDetailsList",value:function(){this.setDetailsList([])}}],[{key:"toObject",value:function(e,t){var n={allPassed:i.Message.getBooleanFieldWithDefault(t,1,!1),allTextContentPassed:i.Message.getBooleanFieldWithDefault(t,2,!1),allImageContentPassed:i.Message.getBooleanFieldWithDefault(t,3,!1),allImageTextContentPassed:i.Message.getBooleanFieldWithDefault(t,4,!1),detailsList:i.Message.toObjectList(t.getDetailsList(),o.ProviderDetails.toObject,e)};return e&&(n.$jspbMessageInstance=t),n}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readBool();e.setAllPassed(n);break;case 2:var i=t.readBool();e.setAllTextContentPassed(i);break;case 3:var r=t.readBool();e.setAllImageContentPassed(r);break;case 4:var a=t.readBool();e.setAllImageTextContentPassed(a);break;case 5:var s=new o.ProviderDetails;t.readMessage(s,o.ProviderDetails.deserializeBinaryFromReader),e.addDetails(s);break;default:t.skipField()}return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n=void 0;(n=e.getAllPassed())&&t.writeBool(1,n),(n=e.getAllTextContentPassed())&&t.writeBool(2,n),(n=e.getAllImageContentPassed())&&t.writeBool(3,n),(n=e.getAllImageTextContentPassed())&&t.writeBool(4,n),(n=e.getDetailsList()).length>0&&t.writeRepeatedMessage(5,n,o.ProviderDetails.serializeBinaryToWriter)}}]),n}(i.Message);t.ModerationResult=a,a.displayName="ModerationResult",a.repeatedFields_=[5];var o=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,n.repeatedFields_,null),r}return c(n,[{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getTitle",value:function(){return i.Message.getFieldWithDefault(this,1,"")}},{key:"setTitle",value:function(e){i.Message.setProto3StringField(this,1,e)}},{key:"getParentContextHash",value:function(){return i.Message.getFieldWithDefault(this,2,"")}},{key:"setParentContextHash",value:function(e){i.Message.setProto3StringField(this,2,e)}},{key:"getContentContextHash",value:function(){return i.Message.getFieldWithDefault(this,3,"")}},{key:"setContentContextHash",value:function(e){i.Message.setProto3StringField(this,3,e)}},{key:"getMingaHash",value:function(){return i.Message.getFieldWithDefault(this,4,"")}},{key:"setMingaHash",value:function(e){i.Message.setProto3StringField(this,4,e)}},{key:"getMingaName",value:function(){return i.Message.getFieldWithDefault(this,5,"")}},{key:"setMingaName",value:function(e){i.Message.setProto3StringField(this,5,e)}},{key:"getContentAuthorHash",value:function(){return i.Message.getFieldWithDefault(this,6,"")}},{key:"setContentAuthorHash",value:function(e){i.Message.setProto3StringField(this,6,e)}},{key:"getTimestamp",value:function(){return i.Message.getFieldWithDefault(this,7,0)}},{key:"setTimestamp",value:function(e){i.Message.setProto3IntField(this,7,e)}},{key:"getContentAuthorFirstName",value:function(){return i.Message.getFieldWithDefault(this,8,"")}},{key:"setContentAuthorFirstName",value:function(e){i.Message.setProto3StringField(this,8,e)}},{key:"getContentAuthorLastName",value:function(){return i.Message.getFieldWithDefault(this,9,"")}},{key:"setContentAuthorLastName",value:function(e){i.Message.setProto3StringField(this,9,e)}},{key:"getContentType",value:function(){return i.Message.getFieldWithDefault(this,10,"")}},{key:"setContentType",value:function(e){i.Message.setProto3StringField(this,10,e)}},{key:"getContentHistoryList",value:function(){return i.Message.getRepeatedWrapperField(this,n.ContentHistory,11)}},{key:"setContentHistoryList",value:function(e){i.Message.setRepeatedWrapperField(this,11,e)}},{key:"addContentHistory",value:function(e,t){return i.Message.addToRepeatedWrapperField(this,11,e,n.ContentHistory,t)}},{key:"clearContentHistoryList",value:function(){this.setContentHistoryList([])}},{key:"getStatus",value:function(){return i.Message.getFieldWithDefault(this,12,"")}},{key:"setStatus",value:function(e){i.Message.setProto3StringField(this,12,e)}},{key:"getActionContextHash",value:function(){return i.Message.getFieldWithDefault(this,13,"")}},{key:"setActionContextHash",value:function(e){i.Message.setProto3StringField(this,13,e)}},{key:"getGalleryPhotoUuid",value:function(){return i.Message.getFieldWithDefault(this,14,"")}},{key:"setGalleryPhotoUuid",value:function(e){i.Message.setProto3StringField(this,14,e)}}],[{key:"toObject",value:function(e,t){var r={title:i.Message.getFieldWithDefault(t,1,""),parentContextHash:i.Message.getFieldWithDefault(t,2,""),contentContextHash:i.Message.getFieldWithDefault(t,3,""),mingaHash:i.Message.getFieldWithDefault(t,4,""),mingaName:i.Message.getFieldWithDefault(t,5,""),contentAuthorHash:i.Message.getFieldWithDefault(t,6,""),timestamp:i.Message.getFieldWithDefault(t,7,0),contentAuthorFirstName:i.Message.getFieldWithDefault(t,8,""),contentAuthorLastName:i.Message.getFieldWithDefault(t,9,""),contentType:i.Message.getFieldWithDefault(t,10,""),contentHistoryList:i.Message.toObjectList(t.getContentHistoryList(),n.ContentHistory.toObject,e),status:i.Message.getFieldWithDefault(t,12,""),actionContextHash:i.Message.getFieldWithDefault(t,13,""),galleryPhotoUuid:i.Message.getFieldWithDefault(t,14,"")};return e&&(r.$jspbMessageInstance=t),r}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=t.readString();e.setTitle(i);break;case 2:var r=t.readString();e.setParentContextHash(r);break;case 3:var a=t.readString();e.setContentContextHash(a);break;case 4:var o=t.readString();e.setMingaHash(o);break;case 5:var s=t.readString();e.setMingaName(s);break;case 6:var l=t.readString();e.setContentAuthorHash(l);break;case 7:var u=t.readUint64();e.setTimestamp(u);break;case 8:var c=t.readString();e.setContentAuthorFirstName(c);break;case 9:var d=t.readString();e.setContentAuthorLastName(d);break;case 10:var g=t.readString();e.setContentType(g);break;case 11:var f=new n.ContentHistory;t.readMessage(f,n.ContentHistory.deserializeBinaryFromReader),e.addContentHistory(f);break;case 12:var p=t.readString();e.setStatus(p);break;case 13:var h=t.readString();e.setActionContextHash(h);break;case 14:var v=t.readString();e.setGalleryPhotoUuid(v);break;default:t.skipField()}return e}},{key:"serializeBinaryToWriter",value:function(e,t){var i=void 0;(i=e.getTitle()).length>0&&t.writeString(1,i),(i=e.getParentContextHash()).length>0&&t.writeString(2,i),(i=e.getContentContextHash()).length>0&&t.writeString(3,i),(i=e.getMingaHash()).length>0&&t.writeString(4,i),(i=e.getMingaName()).length>0&&t.writeString(5,i),(i=e.getContentAuthorHash()).length>0&&t.writeString(6,i),0!==(i=e.getTimestamp())&&t.writeUint64(7,i),(i=e.getContentAuthorFirstName()).length>0&&t.writeString(8,i),(i=e.getContentAuthorLastName()).length>0&&t.writeString(9,i),(i=e.getContentType()).length>0&&t.writeString(10,i),(i=e.getContentHistoryList()).length>0&&t.writeRepeatedMessage(11,i,n.ContentHistory.serializeBinaryToWriter),(i=e.getStatus()).length>0&&t.writeString(12,i),(i=e.getActionContextHash()).length>0&&t.writeString(13,i),(i=e.getGalleryPhotoUuid()).length>0&&t.writeString(14,i)}}]),n}(i.Message);t.DetailedModerationResult=o,o.displayName="DetailedModerationResult",o.repeatedFields_=[11],function(e){var t=function(t){g(r,t);var n=p(r);function r(e){var t;return l(this,r),t=n.call(this),i.Message.initialize(v(t),e,0,-1,null,null),t}return c(r,[{key:"toObject",value:function(e){return r.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var t=new i.BinaryWriter;return e.Pair.serializeBinaryToWriter(this,t),t.getResultBuffer()}},{key:"getKey",value:function(){return i.Message.getFieldWithDefault(this,1,"")}},{key:"setKey",value:function(e){i.Message.setProto3StringField(this,1,e)}},{key:"getValue",value:function(){return i.Message.getFieldWithDefault(this,2,"")}},{key:"setValue",value:function(e){i.Message.setProto3StringField(this,2,e)}}],[{key:"toObject",value:function(e,t){var n={key:i.Message.getFieldWithDefault(t,1,""),value:i.Message.getFieldWithDefault(t,2,"")};return e&&(n.$jspbMessageInstance=t),n}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),n=new r;return r.deserializeBinaryFromReader(n,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setKey(n);break;case 2:var i=t.readString();e.setValue(i);break;default:t.skipField()}return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n=void 0;(n=e.getKey()).length>0&&t.writeString(1,n),(n=e.getValue()).length>0&&t.writeString(2,n)}}]),r}(i.Message);t.displayName="DetailedModerationResult.Pair",e.Pair=t}(o=t.DetailedModerationResult||(t.DetailedModerationResult={})),function(e){var t=function(t){g(r,t);var n=p(r);function r(t){var a;return l(this,r),a=n.call(this),i.Message.initialize(v(a),t,0,-1,e.ContentHistory.repeatedFields_,null),a}return c(r,[{key:"toObject",value:function(e){return r.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var t=new i.BinaryWriter;return e.ContentHistory.serializeBinaryToWriter(this,t),t.getResultBuffer()}},{key:"getPersonid",value:function(){return i.Message.getFieldWithDefault(this,1,0)}},{key:"setPersonid",value:function(e){i.Message.setProto3IntField(this,1,e)}},{key:"getTimestamp",value:function(){return i.Message.getFieldWithDefault(this,2,0)}},{key:"setTimestamp",value:function(e){i.Message.setProto3IntField(this,2,e)}},{key:"getPersonDisplayName",value:function(){return i.Message.getFieldWithDefault(this,3,"")}},{key:"setPersonDisplayName",value:function(e){i.Message.setProto3StringField(this,3,e)}},{key:"getReasonindex",value:function(){return i.Message.getFieldWithDefault(this,4,0)}},{key:"setReasonindex",value:function(e){i.Message.setProto3IntField(this,4,e)}},{key:"getStatus",value:function(){return i.Message.getFieldWithDefault(this,5,"")}},{key:"setStatus",value:function(e){i.Message.setProto3StringField(this,5,e)}},{key:"getDetailsList",value:function(){return i.Message.getRepeatedWrapperField(this,e.ProviderDetails,6)}},{key:"setDetailsList",value:function(e){i.Message.setRepeatedWrapperField(this,6,e)}},{key:"addDetails",value:function(t,n){return i.Message.addToRepeatedWrapperField(this,6,t,e.ProviderDetails,n)}},{key:"clearDetailsList",value:function(){this.setDetailsList([])}}],[{key:"toObject",value:function(t,n){var r={personid:i.Message.getFieldWithDefault(n,1,0),timestamp:i.Message.getFieldWithDefault(n,2,0),personDisplayName:i.Message.getFieldWithDefault(n,3,""),reasonindex:i.Message.getFieldWithDefault(n,4,0),status:i.Message.getFieldWithDefault(n,5,""),detailsList:i.Message.toObjectList(n.getDetailsList(),e.ProviderDetails.toObject,t)};return t&&(r.$jspbMessageInstance=n),r}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),n=new r;return r.deserializeBinaryFromReader(n,t)}},{key:"deserializeBinaryFromReader",value:function(t,n){for(;n.nextField()&&!n.isEndGroup();)switch(n.getFieldNumber()){case 1:var i=n.readUint32();t.setPersonid(i);break;case 2:var r=n.readUint64();t.setTimestamp(r);break;case 3:var a=n.readString();t.setPersonDisplayName(a);break;case 4:var o=n.readSint32();t.setReasonindex(o);break;case 5:var s=n.readString();t.setStatus(s);break;case 6:var l=new e.ProviderDetails;n.readMessage(l,e.ProviderDetails.deserializeBinaryFromReader),t.addDetails(l);break;default:n.skipField()}return t}},{key:"serializeBinaryToWriter",value:function(t,n){var i=void 0;0!==(i=t.getPersonid())&&n.writeUint32(1,i),0!==(i=t.getTimestamp())&&n.writeUint64(2,i),(i=t.getPersonDisplayName()).length>0&&n.writeString(3,i),0!==(i=t.getReasonindex())&&n.writeSint32(4,i),(i=t.getStatus()).length>0&&n.writeString(5,i),(i=t.getDetailsList()).length>0&&n.writeRepeatedMessage(6,i,e.ProviderDetails.serializeBinaryToWriter)}}]),r}(i.Message);t.displayName="DetailedModerationResult.ContentHistory",t.repeatedFields_=[6],e.ContentHistory=t}(o=t.DetailedModerationResult||(t.DetailedModerationResult={})),function(e){var t=function(t){g(r,t);var n=p(r);function r(t){var a;return l(this,r),a=n.call(this),i.Message.initialize(v(a),t,0,-1,e.ProviderDetails.repeatedFields_,null),a}return c(r,[{key:"toObject",value:function(e){return r.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var t=new i.BinaryWriter;return e.ProviderDetails.serializeBinaryToWriter(this,t),t.getResultBuffer()}},{key:"getTagsList",value:function(){return i.Message.getRepeatedWrapperField(this,e.Pair,1)}},{key:"setTagsList",value:function(e){i.Message.setRepeatedWrapperField(this,1,e)}},{key:"addTags",value:function(t,n){return i.Message.addToRepeatedWrapperField(this,1,t,e.Pair,n)}},{key:"clearTagsList",value:function(){this.setTagsList([])}},{key:"getFileurl",value:function(){return i.Message.getFieldWithDefault(this,2,"")}},{key:"setFileurl",value:function(e){i.Message.setProto3StringField(this,2,e)}},{key:"getIndex",value:function(){return i.Message.getFieldWithDefault(this,3,0)}},{key:"setIndex",value:function(e){i.Message.setProto3IntField(this,3,e)}},{key:"getImageTagsList",value:function(){return i.Message.getRepeatedWrapperField(this,e.Pair,4)}},{key:"setImageTagsList",value:function(e){i.Message.setRepeatedWrapperField(this,4,e)}},{key:"addImageTags",value:function(t,n){return i.Message.addToRepeatedWrapperField(this,4,t,e.Pair,n)}},{key:"clearImageTagsList",value:function(){this.setImageTagsList([])}},{key:"getReasonIndex",value:function(){return i.Message.getFieldWithDefault(this,5,0)}},{key:"setReasonIndex",value:function(e){i.Message.setProto3IntField(this,5,e)}}],[{key:"toObject",value:function(t,n){var r={tagsList:i.Message.toObjectList(n.getTagsList(),e.Pair.toObject,t),fileurl:i.Message.getFieldWithDefault(n,2,""),index:i.Message.getFieldWithDefault(n,3,0),imageTagsList:i.Message.toObjectList(n.getImageTagsList(),e.Pair.toObject,t),reasonIndex:i.Message.getFieldWithDefault(n,5,0)};return t&&(r.$jspbMessageInstance=n),r}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),n=new r;return r.deserializeBinaryFromReader(n,t)}},{key:"deserializeBinaryFromReader",value:function(t,n){for(;n.nextField()&&!n.isEndGroup();)switch(n.getFieldNumber()){case 1:var i=new e.Pair;n.readMessage(i,e.Pair.deserializeBinaryFromReader),t.addTags(i);break;case 2:var r=n.readString();t.setFileurl(r);break;case 3:var a=n.readSint32();t.setIndex(a);break;case 4:var o=new e.Pair;n.readMessage(o,e.Pair.deserializeBinaryFromReader),t.addImageTags(o);break;case 5:var s=n.readInt32();t.setReasonIndex(s);break;default:n.skipField()}return t}},{key:"serializeBinaryToWriter",value:function(t,n){var i=void 0;(i=t.getTagsList()).length>0&&n.writeRepeatedMessage(1,i,e.Pair.serializeBinaryToWriter),(i=t.getFileurl()).length>0&&n.writeString(2,i),0!==(i=t.getIndex())&&n.writeSint32(3,i),(i=t.getImageTagsList()).length>0&&n.writeRepeatedMessage(4,i,e.Pair.serializeBinaryToWriter),0!==(i=t.getReasonIndex())&&n.writeInt32(5,i)}}]),r}(i.Message);t.displayName="DetailedModerationResult.ProviderDetails",t.repeatedFields_=[1,4],e.ProviderDetails=t}(o=t.DetailedModerationResult||(t.DetailedModerationResult={}));var s=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,null,null),r}return c(n,[{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getItemMetadata",value:function(){return i.Message.getWrapperField(this,r.StreamItemMetadata,1)}},{key:"setItemMetadata",value:function(e){i.Message.setWrapperField(this,1,e)}},{key:"clearItemMetadata",value:function(){this.setItemMetadata(void 0)}},{key:"hasItemMetadata",value:function(){return null!=i.Message.getField(this,1)}},{key:"getItem",value:function(){return i.Message.getWrapperField(this,o,2)}},{key:"setItem",value:function(e){i.Message.setWrapperField(this,2,e)}},{key:"clearItem",value:function(){this.setItem(void 0)}},{key:"hasItem",value:function(){return null!=i.Message.getField(this,2)}}],[{key:"toObject",value:function(e,t){var n,i={itemMetadata:(n=t.getItemMetadata())&&r.StreamItemMetadata.toObject(e,n),item:(n=t.getItem())&&o.toObject(e,n)};return e&&(i.$jspbMessageInstance=t),i}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=new r.StreamItemMetadata;t.readMessage(n,r.StreamItemMetadata.deserializeBinaryFromReader),e.setItemMetadata(n);break;case 2:var i=new o;t.readMessage(i,o.deserializeBinaryFromReader),e.setItem(i);break;default:t.skipField()}return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n=void 0;null!=(n=e.getItemMetadata())&&t.writeMessage(1,n,r.StreamItemMetadata.serializeBinaryToWriter),null!=(n=e.getItem())&&t.writeMessage(2,n,o.serializeBinaryToWriter)}}]),n}(i.Message);t.StreamDetailedModerationResult=s,s.displayName="StreamDetailedModerationResult"},jXzp:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetCloudflareVideoStatusResponse=t.GetCloudflareVideoStatusRequest=t.ClouldflareUploadUrlResponse=t.ClouldflareUploadUrlRequest=t.DeltaVideoInfo=t.VideoInfo=void 0;var i=n("hRO2"),r=n("F5Qo"),a=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,null,null),r}return c(n,[{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getVideoUrl",value:function(){return i.Message.getFieldWithDefault(this,1,"")}},{key:"setVideoUrl",value:function(e){i.Message.setProto3StringField(this,1,e)}},{key:"getTitle",value:function(){return i.Message.getFieldWithDefault(this,2,"")}},{key:"setTitle",value:function(e){i.Message.setProto3StringField(this,2,e)}},{key:"getDescription",value:function(){return i.Message.getFieldWithDefault(this,3,"")}},{key:"setDescription",value:function(e){i.Message.setProto3StringField(this,3,e)}},{key:"getVideoThumbnail",value:function(){return i.Message.getFieldWithDefault(this,4,"")}},{key:"setVideoThumbnail",value:function(e){i.Message.setProto3StringField(this,4,e)}},{key:"getCloudflareUid",value:function(){return i.Message.getFieldWithDefault(this,5,"")}},{key:"setCloudflareUid",value:function(e){i.Message.setProto3StringField(this,5,e)}},{key:"getCloudflareSignedToken",value:function(){return i.Message.getFieldWithDefault(this,6,"")}},{key:"setCloudflareSignedToken",value:function(e){i.Message.setProto3StringField(this,6,e)}},{key:"getCustomThumbnail",value:function(){return i.Message.getBooleanFieldWithDefault(this,7,!1)}},{key:"setCustomThumbnail",value:function(e){i.Message.setProto3BooleanField(this,7,e)}}],[{key:"toObject",value:function(e,t){var n={videoUrl:i.Message.getFieldWithDefault(t,1,""),title:i.Message.getFieldWithDefault(t,2,""),description:i.Message.getFieldWithDefault(t,3,""),videoThumbnail:i.Message.getFieldWithDefault(t,4,""),cloudflareUid:i.Message.getFieldWithDefault(t,5,""),cloudflareSignedToken:i.Message.getFieldWithDefault(t,6,""),customThumbnail:i.Message.getBooleanFieldWithDefault(t,7,!1)};return e&&(n.$jspbMessageInstance=t),n}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setVideoUrl(n);break;case 2:var i=t.readString();e.setTitle(i);break;case 3:var r=t.readString();e.setDescription(r);break;case 4:var a=t.readString();e.setVideoThumbnail(a);break;case 5:var o=t.readString();e.setCloudflareUid(o);break;case 6:var s=t.readString();e.setCloudflareSignedToken(s);break;case 7:var l=t.readBool();e.setCustomThumbnail(l);break;default:t.skipField()}return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n=void 0;(n=e.getVideoUrl()).length>0&&t.writeString(1,n),(n=e.getTitle()).length>0&&t.writeString(2,n),(n=e.getDescription()).length>0&&t.writeString(3,n),(n=e.getVideoThumbnail()).length>0&&t.writeString(4,n),(n=e.getCloudflareUid()).length>0&&t.writeString(5,n),(n=e.getCloudflareSignedToken()).length>0&&t.writeString(6,n),(n=e.getCustomThumbnail())&&t.writeBool(7,n)}}]),n}(i.Message);t.VideoInfo=a,a.displayName="VideoInfo";var o=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,null,null),r}return c(n,[{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getContentHash",value:function(){return i.Message.getFieldWithDefault(this,1,"")}},{key:"setContentHash",value:function(e){i.Message.setProto3StringField(this,1,e)}},{key:"getVideoUrl",value:function(){return i.Message.getWrapperField(this,r.StringDelta,2)}},{key:"setVideoUrl",value:function(e){i.Message.setWrapperField(this,2,e)}},{key:"clearVideoUrl",value:function(){this.setVideoUrl(void 0)}},{key:"hasVideoUrl",value:function(){return null!=i.Message.getField(this,2)}},{key:"getTitle",value:function(){return i.Message.getWrapperField(this,r.StringDelta,3)}},{key:"setTitle",value:function(e){i.Message.setWrapperField(this,3,e)}},{key:"clearTitle",value:function(){this.setTitle(void 0)}},{key:"hasTitle",value:function(){return null!=i.Message.getField(this,3)}},{key:"getDescription",value:function(){return i.Message.getWrapperField(this,r.StringDelta,4)}},{key:"setDescription",value:function(e){i.Message.setWrapperField(this,4,e)}},{key:"clearDescription",value:function(){this.setDescription(void 0)}},{key:"hasDescription",value:function(){return null!=i.Message.getField(this,4)}},{key:"getVideoThumbnail",value:function(){return i.Message.getWrapperField(this,r.StringDelta,5)}},{key:"setVideoThumbnail",value:function(e){i.Message.setWrapperField(this,5,e)}},{key:"clearVideoThumbnail",value:function(){this.setVideoThumbnail(void 0)}},{key:"hasVideoThumbnail",value:function(){return null!=i.Message.getField(this,5)}},{key:"getCloudflareUid",value:function(){return i.Message.getWrapperField(this,r.StringDelta,6)}},{key:"setCloudflareUid",value:function(e){i.Message.setWrapperField(this,6,e)}},{key:"clearCloudflareUid",value:function(){this.setCloudflareUid(void 0)}},{key:"hasCloudflareUid",value:function(){return null!=i.Message.getField(this,6)}}],[{key:"toObject",value:function(e,t){var n,a={contentHash:i.Message.getFieldWithDefault(t,1,""),videoUrl:(n=t.getVideoUrl())&&r.StringDelta.toObject(e,n),title:(n=t.getTitle())&&r.StringDelta.toObject(e,n),description:(n=t.getDescription())&&r.StringDelta.toObject(e,n),videoThumbnail:(n=t.getVideoThumbnail())&&r.StringDelta.toObject(e,n),cloudflareUid:(n=t.getCloudflareUid())&&r.StringDelta.toObject(e,n)};return e&&(a.$jspbMessageInstance=t),a}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setContentHash(n);break;case 2:var i=new r.StringDelta;t.readMessage(i,r.StringDelta.deserializeBinaryFromReader),e.setVideoUrl(i);break;case 3:var a=new r.StringDelta;t.readMessage(a,r.StringDelta.deserializeBinaryFromReader),e.setTitle(a);break;case 4:var o=new r.StringDelta;t.readMessage(o,r.StringDelta.deserializeBinaryFromReader),e.setDescription(o);break;case 5:var s=new r.StringDelta;t.readMessage(s,r.StringDelta.deserializeBinaryFromReader),e.setVideoThumbnail(s);break;case 6:var l=new r.StringDelta;t.readMessage(l,r.StringDelta.deserializeBinaryFromReader),e.setCloudflareUid(l);break;default:t.skipField()}return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n=void 0;(n=e.getContentHash()).length>0&&t.writeString(1,n),null!=(n=e.getVideoUrl())&&t.writeMessage(2,n,r.StringDelta.serializeBinaryToWriter),null!=(n=e.getTitle())&&t.writeMessage(3,n,r.StringDelta.serializeBinaryToWriter),null!=(n=e.getDescription())&&t.writeMessage(4,n,r.StringDelta.serializeBinaryToWriter),null!=(n=e.getVideoThumbnail())&&t.writeMessage(5,n,r.StringDelta.serializeBinaryToWriter),null!=(n=e.getCloudflareUid())&&t.writeMessage(6,n,r.StringDelta.serializeBinaryToWriter)}}]),n}(i.Message);t.DeltaVideoInfo=o,o.displayName="DeltaVideoInfo";var s=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,null,null),r}return c(n,[{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}}],[{key:"toObject",value:function(e,t){var n={};return e&&(n.$jspbMessageInstance=t),n}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e}},{key:"serializeBinaryToWriter",value:function(e,t){}}]),n}(i.Message);t.ClouldflareUploadUrlRequest=s,s.displayName="ClouldflareUploadUrlRequest";var u=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,null,null),r}return c(n,[{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getUploadUrl",value:function(){return i.Message.getFieldWithDefault(this,1,"")}},{key:"setUploadUrl",value:function(e){i.Message.setProto3StringField(this,1,e)}},{key:"getUid",value:function(){return i.Message.getFieldWithDefault(this,2,"")}},{key:"setUid",value:function(e){i.Message.setProto3StringField(this,2,e)}},{key:"getSignedToken",value:function(){return i.Message.getFieldWithDefault(this,3,"")}},{key:"setSignedToken",value:function(e){i.Message.setProto3StringField(this,3,e)}}],[{key:"toObject",value:function(e,t){var n={uploadUrl:i.Message.getFieldWithDefault(t,1,""),uid:i.Message.getFieldWithDefault(t,2,""),signedToken:i.Message.getFieldWithDefault(t,3,"")};return e&&(n.$jspbMessageInstance=t),n}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setUploadUrl(n);break;case 2:var i=t.readString();e.setUid(i);break;case 3:var r=t.readString();e.setSignedToken(r);break;default:t.skipField()}return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n=void 0;(n=e.getUploadUrl()).length>0&&t.writeString(1,n),(n=e.getUid()).length>0&&t.writeString(2,n),(n=e.getSignedToken()).length>0&&t.writeString(3,n)}}]),n}(i.Message);t.ClouldflareUploadUrlResponse=u,u.displayName="ClouldflareUploadUrlResponse";var d=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,null,null),r}return c(n,[{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getUid",value:function(){return i.Message.getFieldWithDefault(this,1,"")}},{key:"setUid",value:function(e){i.Message.setProto3StringField(this,1,e)}}],[{key:"toObject",value:function(e,t){var n={uid:i.Message.getFieldWithDefault(t,1,"")};return e&&(n.$jspbMessageInstance=t),n}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=t.readString();e.setUid(n)}else t.skipField();return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n;(n=e.getUid()).length>0&&t.writeString(1,n)}}]),n}(i.Message);t.GetCloudflareVideoStatusRequest=d,d.displayName="GetCloudflareVideoStatusRequest";var f=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,null,null),r}return c(n,[{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getThumbnail",value:function(){return i.Message.getFieldWithDefault(this,1,"")}},{key:"setThumbnail",value:function(e){i.Message.setProto3StringField(this,1,e)}},{key:"getPctComplete",value:function(){return i.Message.getFieldWithDefault(this,3,0)}},{key:"setPctComplete",value:function(e){i.Message.setProto3IntField(this,3,e)}}],[{key:"toObject",value:function(e,t){var n={thumbnail:i.Message.getFieldWithDefault(t,1,""),pctComplete:i.Message.getFieldWithDefault(t,3,0)};return e&&(n.$jspbMessageInstance=t),n}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setThumbnail(n);break;case 3:var i=t.readInt32();e.setPctComplete(i);break;default:t.skipField()}return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n=void 0;(n=e.getThumbnail()).length>0&&t.writeString(1,n),0!==(n=e.getPctComplete())&&t.writeInt32(3,n)}}]),n}(i.Message);t.GetCloudflareVideoStatusResponse=f,f.displayName="GetCloudflareVideoStatusResponse"},kOX6:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoClient=t.Video=void 0;var i=n("jXzp"),r=n("4doY"),a=c((function e(){l(this,e)}));t.Video=a,a.serviceName="minga.content.Video",a.New={methodName:"New",service:a,requestStream:!1,responseStream:!1,requestType:i.VideoInfo,responseType:r.ContentSaveResult},a.Update={methodName:"Update",service:a,requestStream:!1,responseStream:!1,requestType:i.DeltaVideoInfo,responseType:r.ContentSaveResult},a.GetInfo={methodName:"GetInfo",service:a,requestStream:!1,responseStream:!1,requestType:r.ContentInfoQuery,responseType:i.VideoInfo},a.NewCloudflareUploadUrl={methodName:"NewCloudflareUploadUrl",service:a,requestStream:!1,responseStream:!1,requestType:i.ClouldflareUploadUrlRequest,responseType:i.ClouldflareUploadUrlResponse},a.GetCloudflareVideoStatus={methodName:"GetCloudflareVideoStatus",service:a,requestStream:!1,responseStream:!1,requestType:i.GetCloudflareVideoStatusRequest,responseType:i.GetCloudflareVideoStatusResponse},t.VideoClient=function(){function e(){l(this,e)}return c(e,[{key:"new",value:function(){throw new Error("minga_protoc_gen_improbable_eng_grpc_web client methods are unimplemented")}},{key:"update",value:function(){throw new Error("minga_protoc_gen_improbable_eng_grpc_web client methods are unimplemented")}},{key:"getInfo",value:function(){throw new Error("minga_protoc_gen_improbable_eng_grpc_web client methods are unimplemented")}},{key:"newCloudflareUploadUrl",value:function(){throw new Error("minga_protoc_gen_improbable_eng_grpc_web client methods are unimplemented")}},{key:"getCloudflareVideoStatus",value:function(){throw new Error("minga_protoc_gen_improbable_eng_grpc_web client methods are unimplemented")}}]),e}()},mEJt:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnnouncementClient=t.Announcement=void 0;var i=n("6sqc"),r=n("4doY"),a=c((function e(){l(this,e)}));t.Announcement=a,a.serviceName="minga.content.Announcement",a.New={methodName:"New",service:a,requestStream:!1,responseStream:!1,requestType:i.AnnouncementInfo,responseType:r.ContentSaveResult},a.Update={methodName:"Update",service:a,requestStream:!1,responseStream:!1,requestType:i.DeltaAnnouncementInfo,responseType:r.ContentSaveResult},a.GetInfo={methodName:"GetInfo",service:a,requestStream:!1,responseStream:!1,requestType:r.ContentInfoQuery,responseType:i.AnnouncementInfo},t.AnnouncementClient=function(){function e(){l(this,e)}return c(e,[{key:"new",value:function(){throw new Error("minga_protoc_gen_improbable_eng_grpc_web client methods are unimplemented")}},{key:"update",value:function(){throw new Error("minga_protoc_gen_improbable_eng_grpc_web client methods are unimplemented")}},{key:"getInfo",value:function(){throw new Error("minga_protoc_gen_improbable_eng_grpc_web client methods are unimplemented")}}]),e}()},mpOZ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamItemPosition=t.StreamAction=t.StreamStatus=t.StreamControlResponse=t.StreamControl=t.StreamFilter=t.StreamFilterType=t.StreamFilterOp=t.StreamItemMetadata=t.StreamID=void 0;var i=n("hRO2"),r=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,null,null),r}return c(n,[{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getId",value:function(){return i.Message.getFieldWithDefault(this,1,0)}},{key:"setId",value:function(e){i.Message.setProto3IntField(this,1,e)}}],[{key:"toObject",value:function(e,t){var n={id:i.Message.getFieldWithDefault(t,1,0)};return e&&(n.$jspbMessageInstance=t),n}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=t.readInt32();e.setId(n)}else t.skipField();return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n;0!==(n=e.getId())&&t.writeInt32(1,n)}}]),n}(i.Message);t.StreamID=r,r.displayName="StreamID";var a=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,null,null),r}return c(n,[{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getIndex",value:function(){return i.Message.getFieldWithDefault(this,1,0)}},{key:"setIndex",value:function(e){i.Message.setProto3IntField(this,1,e)}},{key:"getPosition",value:function(){return i.Message.getFieldWithDefault(this,2,0)}},{key:"setPosition",value:function(e){i.Message.setProto3EnumField(this,2,e)}},{key:"getId",value:function(){return i.Message.getFieldWithDefault(this,3,"")}},{key:"setId",value:function(e){i.Message.setProto3StringField(this,3,e)}},{key:"getPlaceholder",value:function(){return i.Message.getBooleanFieldWithDefault(this,4,!1)}},{key:"setPlaceholder",value:function(e){i.Message.setProto3BooleanField(this,4,e)}}],[{key:"toObject",value:function(e,t){var n={index:i.Message.getFieldWithDefault(t,1,0),position:i.Message.getFieldWithDefault(t,2,0),id:i.Message.getFieldWithDefault(t,3,""),placeholder:i.Message.getBooleanFieldWithDefault(t,4,!1)};return e&&(n.$jspbMessageInstance=t),n}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readInt32();e.setIndex(n);break;case 2:var i=t.readEnum();e.setPosition(i);break;case 3:var r=t.readString();e.setId(r);break;case 4:var a=t.readBool();e.setPlaceholder(a);break;default:t.skipField()}return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n=void 0;0!==(n=e.getIndex())&&t.writeInt32(1,n),0!==(n=e.getPosition())&&t.writeEnum(2,n),(n=e.getId()).length>0&&t.writeString(3,n),(n=e.getPlaceholder())&&t.writeBool(4,n)}}]),n}(i.Message);t.StreamItemMetadata=a,a.displayName="StreamItemMetadata";var o=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,null,n.oneofGroups_),r}return c(n,[{key:"getOpCase",value:function(){return i.Message.computeOneofCase(this,n.oneofGroups_[0])}},{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getLtNow",value:function(){return i.Message.getWrapperField(this,n.LtNow,1)}},{key:"setLtNow",value:function(e){i.Message.setOneofWrapperField(this,1,n.oneofGroups_[0],e)}},{key:"clearLtNow",value:function(){this.setLtNow(void 0)}},{key:"hasLtNow",value:function(){return null!=i.Message.getField(this,1)}},{key:"getLteNow",value:function(){return i.Message.getWrapperField(this,n.LteNow,2)}},{key:"setLteNow",value:function(e){i.Message.setOneofWrapperField(this,2,n.oneofGroups_[0],e)}},{key:"clearLteNow",value:function(){this.setLteNow(void 0)}},{key:"hasLteNow",value:function(){return null!=i.Message.getField(this,2)}},{key:"getGtNow",value:function(){return i.Message.getWrapperField(this,n.GtNow,3)}},{key:"setGtNow",value:function(e){i.Message.setOneofWrapperField(this,3,n.oneofGroups_[0],e)}},{key:"clearGtNow",value:function(){this.setGtNow(void 0)}},{key:"hasGtNow",value:function(){return null!=i.Message.getField(this,3)}},{key:"getGteNow",value:function(){return i.Message.getWrapperField(this,n.GteNow,4)}},{key:"setGteNow",value:function(e){i.Message.setOneofWrapperField(this,4,n.oneofGroups_[0],e)}},{key:"clearGteNow",value:function(){this.setGteNow(void 0)}},{key:"hasGteNow",value:function(){return null!=i.Message.getField(this,4)}},{key:"getFalsyOrLteNow",value:function(){return i.Message.getWrapperField(this,n.FalsyOrLteNow,5)}},{key:"setFalsyOrLteNow",value:function(e){i.Message.setOneofWrapperField(this,5,n.oneofGroups_[0],e)}},{key:"clearFalsyOrLteNow",value:function(){this.setFalsyOrLteNow(void 0)}},{key:"hasFalsyOrLteNow",value:function(){return null!=i.Message.getField(this,5)}},{key:"getFalsyOrLtNow",value:function(){return i.Message.getWrapperField(this,n.FalsyOrLtNow,6)}},{key:"setFalsyOrLtNow",value:function(e){i.Message.setOneofWrapperField(this,6,n.oneofGroups_[0],e)}},{key:"clearFalsyOrLtNow",value:function(){this.setFalsyOrLtNow(void 0)}},{key:"hasFalsyOrLtNow",value:function(){return null!=i.Message.getField(this,6)}},{key:"getFalsyOrGteNow",value:function(){return i.Message.getWrapperField(this,n.FalsyOrGteNow,7)}},{key:"setFalsyOrGteNow",value:function(e){i.Message.setOneofWrapperField(this,7,n.oneofGroups_[0],e)}},{key:"clearFalsyOrGteNow",value:function(){this.setFalsyOrGteNow(void 0)}},{key:"hasFalsyOrGteNow",value:function(){return null!=i.Message.getField(this,7)}},{key:"getFalsyOrGtNow",value:function(){return i.Message.getWrapperField(this,n.FalsyOrGtNow,8)}},{key:"setFalsyOrGtNow",value:function(e){i.Message.setOneofWrapperField(this,8,n.oneofGroups_[0],e)}},{key:"clearFalsyOrGtNow",value:function(){this.setFalsyOrGtNow(void 0)}},{key:"hasFalsyOrGtNow",value:function(){return null!=i.Message.getField(this,8)}},{key:"getIncludes",value:function(){return i.Message.getWrapperField(this,n.Includes,9)}},{key:"setIncludes",value:function(e){i.Message.setOneofWrapperField(this,9,n.oneofGroups_[0],e)}},{key:"clearIncludes",value:function(){this.setIncludes(void 0)}},{key:"hasIncludes",value:function(){return null!=i.Message.getField(this,9)}},{key:"getGteValue",value:function(){return i.Message.getWrapperField(this,n.GteValue,10)}},{key:"setGteValue",value:function(e){i.Message.setOneofWrapperField(this,10,n.oneofGroups_[0],e)}},{key:"clearGteValue",value:function(){this.setGteValue(void 0)}},{key:"hasGteValue",value:function(){return null!=i.Message.getField(this,10)}},{key:"getGtValue",value:function(){return i.Message.getWrapperField(this,n.GtValue,11)}},{key:"setGtValue",value:function(e){i.Message.setOneofWrapperField(this,11,n.oneofGroups_[0],e)}},{key:"clearGtValue",value:function(){this.setGtValue(void 0)}},{key:"hasGtValue",value:function(){return null!=i.Message.getField(this,11)}},{key:"getLteValue",value:function(){return i.Message.getWrapperField(this,n.LteValue,12)}},{key:"setLteValue",value:function(e){i.Message.setOneofWrapperField(this,12,n.oneofGroups_[0],e)}},{key:"clearLteValue",value:function(){this.setLteValue(void 0)}},{key:"hasLteValue",value:function(){return null!=i.Message.getField(this,12)}},{key:"getLtValue",value:function(){return i.Message.getWrapperField(this,n.LtValue,13)}},{key:"setLtValue",value:function(e){i.Message.setOneofWrapperField(this,13,n.oneofGroups_[0],e)}},{key:"clearLtValue",value:function(){this.setLtValue(void 0)}},{key:"hasLtValue",value:function(){return null!=i.Message.getField(this,13)}},{key:"getFalsyOrGteValue",value:function(){return i.Message.getWrapperField(this,n.FalsyOrGteValue,14)}},{key:"setFalsyOrGteValue",value:function(e){i.Message.setOneofWrapperField(this,14,n.oneofGroups_[0],e)}},{key:"clearFalsyOrGteValue",value:function(){this.setFalsyOrGteValue(void 0)}},{key:"hasFalsyOrGteValue",value:function(){return null!=i.Message.getField(this,14)}},{key:"getFalsyOrGtValue",value:function(){return i.Message.getWrapperField(this,n.FalsyOrGtValue,15)}},{key:"setFalsyOrGtValue",value:function(e){i.Message.setOneofWrapperField(this,15,n.oneofGroups_[0],e)}},{key:"clearFalsyOrGtValue",value:function(){this.setFalsyOrGtValue(void 0)}},{key:"hasFalsyOrGtValue",value:function(){return null!=i.Message.getField(this,15)}},{key:"getFalsyOrLteValue",value:function(){return i.Message.getWrapperField(this,n.FalsyOrLteValue,16)}},{key:"setFalsyOrLteValue",value:function(e){i.Message.setOneofWrapperField(this,16,n.oneofGroups_[0],e)}},{key:"clearFalsyOrLteValue",value:function(){this.setFalsyOrLteValue(void 0)}},{key:"hasFalsyOrLteValue",value:function(){return null!=i.Message.getField(this,16)}},{key:"getFalsyOrLtValue",value:function(){return i.Message.getWrapperField(this,n.FalsyOrLtValue,17)}},{key:"setFalsyOrLtValue",value:function(e){i.Message.setOneofWrapperField(this,17,n.oneofGroups_[0],e)}},{key:"clearFalsyOrLtValue",value:function(){this.setFalsyOrLtValue(void 0)}},{key:"hasFalsyOrLtValue",value:function(){return null!=i.Message.getField(this,17)}},{key:"getWithinInclusiveValue",value:function(){return i.Message.getWrapperField(this,n.WithinInclusiveValue,18)}},{key:"setWithinInclusiveValue",value:function(e){i.Message.setOneofWrapperField(this,18,n.oneofGroups_[0],e)}},{key:"clearWithinInclusiveValue",value:function(){this.setWithinInclusiveValue(void 0)}},{key:"hasWithinInclusiveValue",value:function(){return null!=i.Message.getField(this,18)}}],[{key:"toObject",value:function(e,t){var i,r={ltNow:(i=t.getLtNow())&&n.LtNow.toObject(e,i),lteNow:(i=t.getLteNow())&&n.LteNow.toObject(e,i),gtNow:(i=t.getGtNow())&&n.GtNow.toObject(e,i),gteNow:(i=t.getGteNow())&&n.GteNow.toObject(e,i),falsyOrLteNow:(i=t.getFalsyOrLteNow())&&n.FalsyOrLteNow.toObject(e,i),falsyOrLtNow:(i=t.getFalsyOrLtNow())&&n.FalsyOrLtNow.toObject(e,i),falsyOrGteNow:(i=t.getFalsyOrGteNow())&&n.FalsyOrGteNow.toObject(e,i),falsyOrGtNow:(i=t.getFalsyOrGtNow())&&n.FalsyOrGtNow.toObject(e,i),includes:(i=t.getIncludes())&&n.Includes.toObject(e,i),gteValue:(i=t.getGteValue())&&n.GteValue.toObject(e,i),gtValue:(i=t.getGtValue())&&n.GtValue.toObject(e,i),lteValue:(i=t.getLteValue())&&n.LteValue.toObject(e,i),ltValue:(i=t.getLtValue())&&n.LtValue.toObject(e,i),falsyOrGteValue:(i=t.getFalsyOrGteValue())&&n.FalsyOrGteValue.toObject(e,i),falsyOrGtValue:(i=t.getFalsyOrGtValue())&&n.FalsyOrGtValue.toObject(e,i),falsyOrLteValue:(i=t.getFalsyOrLteValue())&&n.FalsyOrLteValue.toObject(e,i),falsyOrLtValue:(i=t.getFalsyOrLtValue())&&n.FalsyOrLtValue.toObject(e,i),withinInclusiveValue:(i=t.getWithinInclusiveValue())&&n.WithinInclusiveValue.toObject(e,i)};return e&&(r.$jspbMessageInstance=t),r}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var i=new n.LtNow;t.readMessage(i,n.LtNow.deserializeBinaryFromReader),e.setLtNow(i);break;case 2:var r=new n.LteNow;t.readMessage(r,n.LteNow.deserializeBinaryFromReader),e.setLteNow(r);break;case 3:var a=new n.GtNow;t.readMessage(a,n.GtNow.deserializeBinaryFromReader),e.setGtNow(a);break;case 4:var o=new n.GteNow;t.readMessage(o,n.GteNow.deserializeBinaryFromReader),e.setGteNow(o);break;case 5:var s=new n.FalsyOrLteNow;t.readMessage(s,n.FalsyOrLteNow.deserializeBinaryFromReader),e.setFalsyOrLteNow(s);break;case 6:var l=new n.FalsyOrLtNow;t.readMessage(l,n.FalsyOrLtNow.deserializeBinaryFromReader),e.setFalsyOrLtNow(l);break;case 7:var u=new n.FalsyOrGteNow;t.readMessage(u,n.FalsyOrGteNow.deserializeBinaryFromReader),e.setFalsyOrGteNow(u);break;case 8:var c=new n.FalsyOrGtNow;t.readMessage(c,n.FalsyOrGtNow.deserializeBinaryFromReader),e.setFalsyOrGtNow(c);break;case 9:var d=new n.Includes;t.readMessage(d,n.Includes.deserializeBinaryFromReader),e.setIncludes(d);break;case 10:var g=new n.GteValue;t.readMessage(g,n.GteValue.deserializeBinaryFromReader),e.setGteValue(g);break;case 11:var f=new n.GtValue;t.readMessage(f,n.GtValue.deserializeBinaryFromReader),e.setGtValue(f);break;case 12:var p=new n.LteValue;t.readMessage(p,n.LteValue.deserializeBinaryFromReader),e.setLteValue(p);break;case 13:var h=new n.LtValue;t.readMessage(h,n.LtValue.deserializeBinaryFromReader),e.setLtValue(h);break;case 14:var v=new n.FalsyOrGteValue;t.readMessage(v,n.FalsyOrGteValue.deserializeBinaryFromReader),e.setFalsyOrGteValue(v);break;case 15:var m=new n.FalsyOrGtValue;t.readMessage(m,n.FalsyOrGtValue.deserializeBinaryFromReader),e.setFalsyOrGtValue(m);break;case 16:var y=new n.FalsyOrLteValue;t.readMessage(y,n.FalsyOrLteValue.deserializeBinaryFromReader),e.setFalsyOrLteValue(y);break;case 17:var b=new n.FalsyOrLtValue;t.readMessage(b,n.FalsyOrLtValue.deserializeBinaryFromReader),e.setFalsyOrLtValue(b);break;case 18:var C=new n.WithinInclusiveValue;t.readMessage(C,n.WithinInclusiveValue.deserializeBinaryFromReader),e.setWithinInclusiveValue(C);break;default:t.skipField()}return e}},{key:"serializeBinaryToWriter",value:function(e,t){var i=void 0;null!=(i=e.getLtNow())&&t.writeMessage(1,i,n.LtNow.serializeBinaryToWriter),null!=(i=e.getLteNow())&&t.writeMessage(2,i,n.LteNow.serializeBinaryToWriter),null!=(i=e.getGtNow())&&t.writeMessage(3,i,n.GtNow.serializeBinaryToWriter),null!=(i=e.getGteNow())&&t.writeMessage(4,i,n.GteNow.serializeBinaryToWriter),null!=(i=e.getFalsyOrLteNow())&&t.writeMessage(5,i,n.FalsyOrLteNow.serializeBinaryToWriter),null!=(i=e.getFalsyOrLtNow())&&t.writeMessage(6,i,n.FalsyOrLtNow.serializeBinaryToWriter),null!=(i=e.getFalsyOrGteNow())&&t.writeMessage(7,i,n.FalsyOrGteNow.serializeBinaryToWriter),null!=(i=e.getFalsyOrGtNow())&&t.writeMessage(8,i,n.FalsyOrGtNow.serializeBinaryToWriter),null!=(i=e.getIncludes())&&t.writeMessage(9,i,n.Includes.serializeBinaryToWriter),null!=(i=e.getGteValue())&&t.writeMessage(10,i,n.GteValue.serializeBinaryToWriter),null!=(i=e.getGtValue())&&t.writeMessage(11,i,n.GtValue.serializeBinaryToWriter),null!=(i=e.getLteValue())&&t.writeMessage(12,i,n.LteValue.serializeBinaryToWriter),null!=(i=e.getLtValue())&&t.writeMessage(13,i,n.LtValue.serializeBinaryToWriter),null!=(i=e.getFalsyOrGteValue())&&t.writeMessage(14,i,n.FalsyOrGteValue.serializeBinaryToWriter),null!=(i=e.getFalsyOrGtValue())&&t.writeMessage(15,i,n.FalsyOrGtValue.serializeBinaryToWriter),null!=(i=e.getFalsyOrLteValue())&&t.writeMessage(16,i,n.FalsyOrLteValue.serializeBinaryToWriter),null!=(i=e.getFalsyOrLtValue())&&t.writeMessage(17,i,n.FalsyOrLtValue.serializeBinaryToWriter),null!=(i=e.getWithinInclusiveValue())&&t.writeMessage(18,i,n.WithinInclusiveValue.serializeBinaryToWriter)}}]),n}(i.Message);t.StreamFilterOp=o,o.displayName="StreamFilterOp",o.oneofGroups_=[[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]],function(e){!function(e){e[e.OP_NOT_SET=0]="OP_NOT_SET",e[e.LT_NOW=1]="LT_NOW",e[e.LTE_NOW=2]="LTE_NOW",e[e.GT_NOW=3]="GT_NOW",e[e.GTE_NOW=4]="GTE_NOW",e[e.FALSY_OR_LTE_NOW=5]="FALSY_OR_LTE_NOW",e[e.FALSY_OR_LT_NOW=6]="FALSY_OR_LT_NOW",e[e.FALSY_OR_GTE_NOW=7]="FALSY_OR_GTE_NOW",e[e.FALSY_OR_GT_NOW=8]="FALSY_OR_GT_NOW",e[e.INCLUDES=9]="INCLUDES",e[e.GTE_VALUE=10]="GTE_VALUE",e[e.GT_VALUE=11]="GT_VALUE",e[e.LTE_VALUE=12]="LTE_VALUE",e[e.LT_VALUE=13]="LT_VALUE",e[e.FALSY_OR_GTE_VALUE=14]="FALSY_OR_GTE_VALUE",e[e.FALSY_OR_GT_VALUE=15]="FALSY_OR_GT_VALUE",e[e.FALSY_OR_LTE_VALUE=16]="FALSY_OR_LTE_VALUE",e[e.FALSY_OR_LT_VALUE=17]="FALSY_OR_LT_VALUE",e[e.WITHIN_INCLUSIVE_VALUE=18]="WITHIN_INCLUSIVE_VALUE"}(e.OpCase||(e.OpCase={}))}(o=t.StreamFilterOp||(t.StreamFilterOp={})),function(e){var t=function(t){g(r,t);var n=p(r);function r(t){var a;return l(this,r),a=n.call(this),i.Message.initialize(v(a),t,0,-1,null,e.Value.oneofGroups_),a}return c(r,[{key:"getValueCase",value:function(){return i.Message.computeOneofCase(this,e.Value.oneofGroups_[0])}},{key:"toObject",value:function(e){return r.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var t=new i.BinaryWriter;return e.Value.serializeBinaryToWriter(this,t),t.getResultBuffer()}},{key:"getDoubleValue",value:function(){return i.Message.getFloatingPointFieldWithDefault(this,1,0)}},{key:"setDoubleValue",value:function(t){i.Message.setOneofField(this,1,e.Value.oneofGroups_[0],t)}},{key:"clearDoubleValue",value:function(){i.Message.setOneofField(this,1,e.Value.oneofGroups_[0],void 0)}},{key:"hasDoubleValue",value:function(){return null!=i.Message.getField(this,1)}},{key:"getFloatValue",value:function(){return i.Message.getFloatingPointFieldWithDefault(this,2,0)}},{key:"setFloatValue",value:function(t){i.Message.setOneofField(this,2,e.Value.oneofGroups_[0],t)}},{key:"clearFloatValue",value:function(){i.Message.setOneofField(this,2,e.Value.oneofGroups_[0],void 0)}},{key:"hasFloatValue",value:function(){return null!=i.Message.getField(this,2)}},{key:"getInt32Value",value:function(){return i.Message.getFieldWithDefault(this,3,0)}},{key:"setInt32Value",value:function(t){i.Message.setOneofField(this,3,e.Value.oneofGroups_[0],t)}},{key:"clearInt32Value",value:function(){i.Message.setOneofField(this,3,e.Value.oneofGroups_[0],void 0)}},{key:"hasInt32Value",value:function(){return null!=i.Message.getField(this,3)}},{key:"getUint32Value",value:function(){return i.Message.getFieldWithDefault(this,4,0)}},{key:"setUint32Value",value:function(t){i.Message.setOneofField(this,4,e.Value.oneofGroups_[0],t)}},{key:"clearUint32Value",value:function(){i.Message.setOneofField(this,4,e.Value.oneofGroups_[0],void 0)}},{key:"hasUint32Value",value:function(){return null!=i.Message.getField(this,4)}},{key:"getBoolValue",value:function(){return i.Message.getBooleanFieldWithDefault(this,5,!1)}},{key:"setBoolValue",value:function(t){i.Message.setOneofField(this,5,e.Value.oneofGroups_[0],t)}},{key:"clearBoolValue",value:function(){i.Message.setOneofField(this,5,e.Value.oneofGroups_[0],void 0)}},{key:"hasBoolValue",value:function(){return null!=i.Message.getField(this,5)}},{key:"getStringValue",value:function(){return i.Message.getFieldWithDefault(this,6,"")}},{key:"setStringValue",value:function(t){i.Message.setOneofField(this,6,e.Value.oneofGroups_[0],t)}},{key:"clearStringValue",value:function(){i.Message.setOneofField(this,6,e.Value.oneofGroups_[0],void 0)}},{key:"hasStringValue",value:function(){return null!=i.Message.getField(this,6)}},{key:"getUint64Value",value:function(){return i.Message.getFieldWithDefault(this,7,0)}},{key:"setUint64Value",value:function(t){i.Message.setOneofField(this,7,e.Value.oneofGroups_[0],t)}},{key:"clearUint64Value",value:function(){i.Message.setOneofField(this,7,e.Value.oneofGroups_[0],void 0)}},{key:"hasUint64Value",value:function(){return null!=i.Message.getField(this,7)}}],[{key:"toObject",value:function(e,t){var n={doubleValue:i.Message.getFloatingPointFieldWithDefault(t,1,0),floatValue:i.Message.getFloatingPointFieldWithDefault(t,2,0),int32Value:i.Message.getFieldWithDefault(t,3,0),uint32Value:i.Message.getFieldWithDefault(t,4,0),boolValue:i.Message.getBooleanFieldWithDefault(t,5,!1),stringValue:i.Message.getFieldWithDefault(t,6,""),uint64Value:i.Message.getFieldWithDefault(t,7,0)};return e&&(n.$jspbMessageInstance=t),n}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),n=new r;return r.deserializeBinaryFromReader(n,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readDouble();e.setDoubleValue(n);break;case 2:var i=t.readFloat();e.setFloatValue(i);break;case 3:var r=t.readInt32();e.setInt32Value(r);break;case 4:var a=t.readUint32();e.setUint32Value(a);break;case 5:var o=t.readBool();e.setBoolValue(o);break;case 6:var s=t.readString();e.setStringValue(s);break;case 7:var l=t.readUint64();e.setUint64Value(l);break;default:t.skipField()}return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n=void 0;null!=(n=i.Message.getField(e,1))&&t.writeDouble(1,n),null!=(n=i.Message.getField(e,2))&&t.writeFloat(2,n),null!=(n=i.Message.getField(e,3))&&t.writeInt32(3,n),null!=(n=i.Message.getField(e,4))&&t.writeUint32(4,n),null!=(n=i.Message.getField(e,5))&&t.writeBool(5,n),null!=(n=i.Message.getField(e,6))&&t.writeString(6,n),null!=(n=i.Message.getField(e,7))&&t.writeUint64(7,n)}}]),r}(i.Message);t.displayName="StreamFilterOp.Value",t.oneofGroups_=[[1,2,3,4,5,6,7]],e.Value=t}(o=t.StreamFilterOp||(t.StreamFilterOp={})),function(e){!function(e){!function(e){e[e.VALUE_NOT_SET=0]="VALUE_NOT_SET",e[e.DOUBLE_VALUE=1]="DOUBLE_VALUE",e[e.FLOAT_VALUE=2]="FLOAT_VALUE",e[e.INT32_VALUE=3]="INT32_VALUE",e[e.UINT32_VALUE=4]="UINT32_VALUE",e[e.BOOL_VALUE=5]="BOOL_VALUE",e[e.STRING_VALUE=6]="STRING_VALUE",e[e.UINT64_VALUE=7]="UINT64_VALUE"}(e.ValueCase||(e.ValueCase={}))}(e.Value||(e.Value={}))}(o=t.StreamFilterOp||(t.StreamFilterOp={})),function(e){var t=function(t){g(r,t);var n=p(r);function r(e){var t;return l(this,r),t=n.call(this),i.Message.initialize(v(t),e,0,-1,null,null),t}return c(r,[{key:"toObject",value:function(e){return r.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var t=new i.BinaryWriter;return e.LtNow.serializeBinaryToWriter(this,t),t.getResultBuffer()}}],[{key:"toObject",value:function(e,t){var n={};return e&&(n.$jspbMessageInstance=t),n}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),n=new r;return r.deserializeBinaryFromReader(n,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e}},{key:"serializeBinaryToWriter",value:function(e,t){}}]),r}(i.Message);t.displayName="StreamFilterOp.LtNow",e.LtNow=t}(o=t.StreamFilterOp||(t.StreamFilterOp={})),function(e){var t=function(t){g(r,t);var n=p(r);function r(e){var t;return l(this,r),t=n.call(this),i.Message.initialize(v(t),e,0,-1,null,null),t}return c(r,[{key:"toObject",value:function(e){return r.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var t=new i.BinaryWriter;return e.LteNow.serializeBinaryToWriter(this,t),t.getResultBuffer()}}],[{key:"toObject",value:function(e,t){var n={};return e&&(n.$jspbMessageInstance=t),n}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),n=new r;return r.deserializeBinaryFromReader(n,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e}},{key:"serializeBinaryToWriter",value:function(e,t){}}]),r}(i.Message);t.displayName="StreamFilterOp.LteNow",e.LteNow=t}(o=t.StreamFilterOp||(t.StreamFilterOp={})),function(e){var t=function(t){g(r,t);var n=p(r);function r(e){var t;return l(this,r),t=n.call(this),i.Message.initialize(v(t),e,0,-1,null,null),t}return c(r,[{key:"toObject",value:function(e){return r.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var t=new i.BinaryWriter;return e.GtNow.serializeBinaryToWriter(this,t),t.getResultBuffer()}}],[{key:"toObject",value:function(e,t){var n={};return e&&(n.$jspbMessageInstance=t),n}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),n=new r;return r.deserializeBinaryFromReader(n,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e}},{key:"serializeBinaryToWriter",value:function(e,t){}}]),r}(i.Message);t.displayName="StreamFilterOp.GtNow",e.GtNow=t}(o=t.StreamFilterOp||(t.StreamFilterOp={})),function(e){var t=function(t){g(r,t);var n=p(r);function r(e){var t;return l(this,r),t=n.call(this),i.Message.initialize(v(t),e,0,-1,null,null),t}return c(r,[{key:"toObject",value:function(e){return r.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var t=new i.BinaryWriter;return e.GteNow.serializeBinaryToWriter(this,t),t.getResultBuffer()}}],[{key:"toObject",value:function(e,t){var n={};return e&&(n.$jspbMessageInstance=t),n}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),n=new r;return r.deserializeBinaryFromReader(n,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e}},{key:"serializeBinaryToWriter",value:function(e,t){}}]),r}(i.Message);t.displayName="StreamFilterOp.GteNow",e.GteNow=t}(o=t.StreamFilterOp||(t.StreamFilterOp={})),function(e){var t=function(t){g(r,t);var n=p(r);function r(e){var t;return l(this,r),t=n.call(this),i.Message.initialize(v(t),e,0,-1,null,null),t}return c(r,[{key:"toObject",value:function(e){return r.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var t=new i.BinaryWriter;return e.FalsyOrLteNow.serializeBinaryToWriter(this,t),t.getResultBuffer()}}],[{key:"toObject",value:function(e,t){var n={};return e&&(n.$jspbMessageInstance=t),n}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),n=new r;return r.deserializeBinaryFromReader(n,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e}},{key:"serializeBinaryToWriter",value:function(e,t){}}]),r}(i.Message);t.displayName="StreamFilterOp.FalsyOrLteNow",e.FalsyOrLteNow=t}(o=t.StreamFilterOp||(t.StreamFilterOp={})),function(e){var t=function(t){g(r,t);var n=p(r);function r(e){var t;return l(this,r),t=n.call(this),i.Message.initialize(v(t),e,0,-1,null,null),t}return c(r,[{key:"toObject",value:function(e){return r.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var t=new i.BinaryWriter;return e.FalsyOrLtNow.serializeBinaryToWriter(this,t),t.getResultBuffer()}}],[{key:"toObject",value:function(e,t){var n={};return e&&(n.$jspbMessageInstance=t),n}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),n=new r;return r.deserializeBinaryFromReader(n,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e}},{key:"serializeBinaryToWriter",value:function(e,t){}}]),r}(i.Message);t.displayName="StreamFilterOp.FalsyOrLtNow",e.FalsyOrLtNow=t}(o=t.StreamFilterOp||(t.StreamFilterOp={})),function(e){var t=function(t){g(r,t);var n=p(r);function r(e){var t;return l(this,r),t=n.call(this),i.Message.initialize(v(t),e,0,-1,null,null),t}return c(r,[{key:"toObject",value:function(e){return r.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var t=new i.BinaryWriter;return e.FalsyOrGteNow.serializeBinaryToWriter(this,t),t.getResultBuffer()}}],[{key:"toObject",value:function(e,t){var n={};return e&&(n.$jspbMessageInstance=t),n}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),n=new r;return r.deserializeBinaryFromReader(n,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e}},{key:"serializeBinaryToWriter",value:function(e,t){}}]),r}(i.Message);t.displayName="StreamFilterOp.FalsyOrGteNow",e.FalsyOrGteNow=t}(o=t.StreamFilterOp||(t.StreamFilterOp={})),function(e){var t=function(t){g(r,t);var n=p(r);function r(e){var t;return l(this,r),t=n.call(this),i.Message.initialize(v(t),e,0,-1,null,null),t}return c(r,[{key:"toObject",value:function(e){return r.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var t=new i.BinaryWriter;return e.FalsyOrGtNow.serializeBinaryToWriter(this,t),t.getResultBuffer()}}],[{key:"toObject",value:function(e,t){var n={};return e&&(n.$jspbMessageInstance=t),n}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),n=new r;return r.deserializeBinaryFromReader(n,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e}},{key:"serializeBinaryToWriter",value:function(e,t){}}]),r}(i.Message);t.displayName="StreamFilterOp.FalsyOrGtNow",e.FalsyOrGtNow=t}(o=t.StreamFilterOp||(t.StreamFilterOp={})),function(e){var t=function(t){g(r,t);var n=p(r);function r(t){var a;return l(this,r),a=n.call(this),i.Message.initialize(v(a),t,0,-1,e.Includes.repeatedFields_,null),a}return c(r,[{key:"toObject",value:function(e){return r.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var t=new i.BinaryWriter;return e.Includes.serializeBinaryToWriter(this,t),t.getResultBuffer()}},{key:"getValueList",value:function(){return i.Message.getRepeatedWrapperField(this,e.Value,1)}},{key:"setValueList",value:function(e){i.Message.setRepeatedWrapperField(this,1,e)}},{key:"addValue",value:function(t,n){return i.Message.addToRepeatedWrapperField(this,1,t,e.Value,n)}},{key:"clearValueList",value:function(){this.setValueList([])}}],[{key:"toObject",value:function(t,n){var r={valueList:i.Message.toObjectList(n.getValueList(),e.Value.toObject,t)};return t&&(r.$jspbMessageInstance=n),r}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),n=new r;return r.deserializeBinaryFromReader(n,t)}},{key:"deserializeBinaryFromReader",value:function(t,n){for(;n.nextField()&&!n.isEndGroup();)if(1===n.getFieldNumber()){var i=new e.Value;n.readMessage(i,e.Value.deserializeBinaryFromReader),t.addValue(i)}else n.skipField();return t}},{key:"serializeBinaryToWriter",value:function(t,n){var i;(i=t.getValueList()).length>0&&n.writeRepeatedMessage(1,i,e.Value.serializeBinaryToWriter)}}]),r}(i.Message);t.displayName="StreamFilterOp.Includes",t.repeatedFields_=[1],e.Includes=t}(o=t.StreamFilterOp||(t.StreamFilterOp={})),function(e){var t=function(t){g(r,t);var n=p(r);function r(e){var t;return l(this,r),t=n.call(this),i.Message.initialize(v(t),e,0,-1,null,null),t}return c(r,[{key:"toObject",value:function(e){return r.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var t=new i.BinaryWriter;return e.GteValue.serializeBinaryToWriter(this,t),t.getResultBuffer()}},{key:"getValue",value:function(){return i.Message.getWrapperField(this,e.Value,1)}},{key:"setValue",value:function(e){i.Message.setWrapperField(this,1,e)}},{key:"clearValue",value:function(){this.setValue(void 0)}},{key:"hasValue",value:function(){return null!=i.Message.getField(this,1)}}],[{key:"toObject",value:function(t,n){var i,r={value:(i=n.getValue())&&e.Value.toObject(t,i)};return t&&(r.$jspbMessageInstance=n),r}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),n=new r;return r.deserializeBinaryFromReader(n,t)}},{key:"deserializeBinaryFromReader",value:function(t,n){for(;n.nextField()&&!n.isEndGroup();)if(1===n.getFieldNumber()){var i=new e.Value;n.readMessage(i,e.Value.deserializeBinaryFromReader),t.setValue(i)}else n.skipField();return t}},{key:"serializeBinaryToWriter",value:function(t,n){var i;null!=(i=t.getValue())&&n.writeMessage(1,i,e.Value.serializeBinaryToWriter)}}]),r}(i.Message);t.displayName="StreamFilterOp.GteValue",e.GteValue=t}(o=t.StreamFilterOp||(t.StreamFilterOp={})),function(e){var t=function(t){g(r,t);var n=p(r);function r(e){var t;return l(this,r),t=n.call(this),i.Message.initialize(v(t),e,0,-1,null,null),t}return c(r,[{key:"toObject",value:function(e){return r.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var t=new i.BinaryWriter;return e.GtValue.serializeBinaryToWriter(this,t),t.getResultBuffer()}},{key:"getValue",value:function(){return i.Message.getWrapperField(this,e.Value,1)}},{key:"setValue",value:function(e){i.Message.setWrapperField(this,1,e)}},{key:"clearValue",value:function(){this.setValue(void 0)}},{key:"hasValue",value:function(){return null!=i.Message.getField(this,1)}}],[{key:"toObject",value:function(t,n){var i,r={value:(i=n.getValue())&&e.Value.toObject(t,i)};return t&&(r.$jspbMessageInstance=n),r}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),n=new r;return r.deserializeBinaryFromReader(n,t)}},{key:"deserializeBinaryFromReader",value:function(t,n){for(;n.nextField()&&!n.isEndGroup();)if(1===n.getFieldNumber()){var i=new e.Value;n.readMessage(i,e.Value.deserializeBinaryFromReader),t.setValue(i)}else n.skipField();return t}},{key:"serializeBinaryToWriter",value:function(t,n){var i;null!=(i=t.getValue())&&n.writeMessage(1,i,e.Value.serializeBinaryToWriter)}}]),r}(i.Message);t.displayName="StreamFilterOp.GtValue",e.GtValue=t}(o=t.StreamFilterOp||(t.StreamFilterOp={})),function(e){var t=function(t){g(r,t);var n=p(r);function r(e){var t;return l(this,r),t=n.call(this),i.Message.initialize(v(t),e,0,-1,null,null),t}return c(r,[{key:"toObject",value:function(e){return r.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var t=new i.BinaryWriter;return e.LteValue.serializeBinaryToWriter(this,t),t.getResultBuffer()}},{key:"getValue",value:function(){return i.Message.getWrapperField(this,e.Value,1)}},{key:"setValue",value:function(e){i.Message.setWrapperField(this,1,e)}},{key:"clearValue",value:function(){this.setValue(void 0)}},{key:"hasValue",value:function(){return null!=i.Message.getField(this,1)}}],[{key:"toObject",value:function(t,n){var i,r={value:(i=n.getValue())&&e.Value.toObject(t,i)};return t&&(r.$jspbMessageInstance=n),r}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),n=new r;return r.deserializeBinaryFromReader(n,t)}},{key:"deserializeBinaryFromReader",value:function(t,n){for(;n.nextField()&&!n.isEndGroup();)if(1===n.getFieldNumber()){var i=new e.Value;n.readMessage(i,e.Value.deserializeBinaryFromReader),t.setValue(i)}else n.skipField();return t}},{key:"serializeBinaryToWriter",value:function(t,n){var i;null!=(i=t.getValue())&&n.writeMessage(1,i,e.Value.serializeBinaryToWriter)}}]),r}(i.Message);t.displayName="StreamFilterOp.LteValue",e.LteValue=t}(o=t.StreamFilterOp||(t.StreamFilterOp={})),function(e){var t=function(t){g(r,t);var n=p(r);function r(e){var t;return l(this,r),t=n.call(this),i.Message.initialize(v(t),e,0,-1,null,null),t}return c(r,[{key:"toObject",value:function(e){return r.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var t=new i.BinaryWriter;return e.LtValue.serializeBinaryToWriter(this,t),t.getResultBuffer()}},{key:"getValue",value:function(){return i.Message.getWrapperField(this,e.Value,1)}},{key:"setValue",value:function(e){i.Message.setWrapperField(this,1,e)}},{key:"clearValue",value:function(){this.setValue(void 0)}},{key:"hasValue",value:function(){return null!=i.Message.getField(this,1)}}],[{key:"toObject",value:function(t,n){var i,r={value:(i=n.getValue())&&e.Value.toObject(t,i)};return t&&(r.$jspbMessageInstance=n),r}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),n=new r;return r.deserializeBinaryFromReader(n,t)}},{key:"deserializeBinaryFromReader",value:function(t,n){for(;n.nextField()&&!n.isEndGroup();)if(1===n.getFieldNumber()){var i=new e.Value;n.readMessage(i,e.Value.deserializeBinaryFromReader),t.setValue(i)}else n.skipField();return t}},{key:"serializeBinaryToWriter",value:function(t,n){var i;null!=(i=t.getValue())&&n.writeMessage(1,i,e.Value.serializeBinaryToWriter)}}]),r}(i.Message);t.displayName="StreamFilterOp.LtValue",e.LtValue=t}(o=t.StreamFilterOp||(t.StreamFilterOp={})),function(e){var t=function(t){g(r,t);var n=p(r);function r(e){var t;return l(this,r),t=n.call(this),i.Message.initialize(v(t),e,0,-1,null,null),t}return c(r,[{key:"toObject",value:function(e){return r.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var t=new i.BinaryWriter;return e.FalsyOrGteValue.serializeBinaryToWriter(this,t),t.getResultBuffer()}},{key:"getValue",value:function(){return i.Message.getWrapperField(this,e.Value,1)}},{key:"setValue",value:function(e){i.Message.setWrapperField(this,1,e)}},{key:"clearValue",value:function(){this.setValue(void 0)}},{key:"hasValue",value:function(){return null!=i.Message.getField(this,1)}}],[{key:"toObject",value:function(t,n){var i,r={value:(i=n.getValue())&&e.Value.toObject(t,i)};return t&&(r.$jspbMessageInstance=n),r}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),n=new r;return r.deserializeBinaryFromReader(n,t)}},{key:"deserializeBinaryFromReader",value:function(t,n){for(;n.nextField()&&!n.isEndGroup();)if(1===n.getFieldNumber()){var i=new e.Value;n.readMessage(i,e.Value.deserializeBinaryFromReader),t.setValue(i)}else n.skipField();return t}},{key:"serializeBinaryToWriter",value:function(t,n){var i;null!=(i=t.getValue())&&n.writeMessage(1,i,e.Value.serializeBinaryToWriter)}}]),r}(i.Message);t.displayName="StreamFilterOp.FalsyOrGteValue",e.FalsyOrGteValue=t}(o=t.StreamFilterOp||(t.StreamFilterOp={})),function(e){var t=function(t){g(r,t);var n=p(r);function r(e){var t;return l(this,r),t=n.call(this),i.Message.initialize(v(t),e,0,-1,null,null),t}return c(r,[{key:"toObject",value:function(e){return r.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var t=new i.BinaryWriter;return e.FalsyOrGtValue.serializeBinaryToWriter(this,t),t.getResultBuffer()}},{key:"getValue",value:function(){return i.Message.getWrapperField(this,e.Value,1)}},{key:"setValue",value:function(e){i.Message.setWrapperField(this,1,e)}},{key:"clearValue",value:function(){this.setValue(void 0)}},{key:"hasValue",value:function(){return null!=i.Message.getField(this,1)}}],[{key:"toObject",value:function(t,n){var i,r={value:(i=n.getValue())&&e.Value.toObject(t,i)};return t&&(r.$jspbMessageInstance=n),r}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),n=new r;return r.deserializeBinaryFromReader(n,t)}},{key:"deserializeBinaryFromReader",value:function(t,n){for(;n.nextField()&&!n.isEndGroup();)if(1===n.getFieldNumber()){var i=new e.Value;n.readMessage(i,e.Value.deserializeBinaryFromReader),t.setValue(i)}else n.skipField();return t}},{key:"serializeBinaryToWriter",value:function(t,n){var i;null!=(i=t.getValue())&&n.writeMessage(1,i,e.Value.serializeBinaryToWriter)}}]),r}(i.Message);t.displayName="StreamFilterOp.FalsyOrGtValue",e.FalsyOrGtValue=t}(o=t.StreamFilterOp||(t.StreamFilterOp={})),function(e){var t=function(t){g(r,t);var n=p(r);function r(e){var t;return l(this,r),t=n.call(this),i.Message.initialize(v(t),e,0,-1,null,null),t}return c(r,[{key:"toObject",value:function(e){return r.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var t=new i.BinaryWriter;return e.FalsyOrLteValue.serializeBinaryToWriter(this,t),t.getResultBuffer()}},{key:"getValue",value:function(){return i.Message.getWrapperField(this,e.Value,1)}},{key:"setValue",value:function(e){i.Message.setWrapperField(this,1,e)}},{key:"clearValue",value:function(){this.setValue(void 0)}},{key:"hasValue",value:function(){return null!=i.Message.getField(this,1)}}],[{key:"toObject",value:function(t,n){var i,r={value:(i=n.getValue())&&e.Value.toObject(t,i)};return t&&(r.$jspbMessageInstance=n),r}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),n=new r;return r.deserializeBinaryFromReader(n,t)}},{key:"deserializeBinaryFromReader",value:function(t,n){for(;n.nextField()&&!n.isEndGroup();)if(1===n.getFieldNumber()){var i=new e.Value;n.readMessage(i,e.Value.deserializeBinaryFromReader),t.setValue(i)}else n.skipField();return t}},{key:"serializeBinaryToWriter",value:function(t,n){var i;null!=(i=t.getValue())&&n.writeMessage(1,i,e.Value.serializeBinaryToWriter)}}]),r}(i.Message);t.displayName="StreamFilterOp.FalsyOrLteValue",e.FalsyOrLteValue=t}(o=t.StreamFilterOp||(t.StreamFilterOp={})),function(e){var t=function(t){g(r,t);var n=p(r);function r(e){var t;return l(this,r),t=n.call(this),i.Message.initialize(v(t),e,0,-1,null,null),t}return c(r,[{key:"toObject",value:function(e){return r.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var t=new i.BinaryWriter;return e.FalsyOrLtValue.serializeBinaryToWriter(this,t),t.getResultBuffer()}},{key:"getValue",value:function(){return i.Message.getWrapperField(this,e.Value,1)}},{key:"setValue",value:function(e){i.Message.setWrapperField(this,1,e)}},{key:"clearValue",value:function(){this.setValue(void 0)}},{key:"hasValue",value:function(){return null!=i.Message.getField(this,1)}}],[{key:"toObject",value:function(t,n){var i,r={value:(i=n.getValue())&&e.Value.toObject(t,i)};return t&&(r.$jspbMessageInstance=n),r}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),n=new r;return r.deserializeBinaryFromReader(n,t)}},{key:"deserializeBinaryFromReader",value:function(t,n){for(;n.nextField()&&!n.isEndGroup();)if(1===n.getFieldNumber()){var i=new e.Value;n.readMessage(i,e.Value.deserializeBinaryFromReader),t.setValue(i)}else n.skipField();return t}},{key:"serializeBinaryToWriter",value:function(t,n){var i;null!=(i=t.getValue())&&n.writeMessage(1,i,e.Value.serializeBinaryToWriter)}}]),r}(i.Message);t.displayName="StreamFilterOp.FalsyOrLtValue",e.FalsyOrLtValue=t}(o=t.StreamFilterOp||(t.StreamFilterOp={})),function(e){var t=function(t){g(r,t);var n=p(r);function r(e){var t;return l(this,r),t=n.call(this),i.Message.initialize(v(t),e,0,-1,null,null),t}return c(r,[{key:"toObject",value:function(e){return r.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var t=new i.BinaryWriter;return e.WithinInclusiveValue.serializeBinaryToWriter(this,t),t.getResultBuffer()}},{key:"getStartValue",value:function(){return i.Message.getWrapperField(this,e.Value,1)}},{key:"setStartValue",value:function(e){i.Message.setWrapperField(this,1,e)}},{key:"clearStartValue",value:function(){this.setStartValue(void 0)}},{key:"hasStartValue",value:function(){return null!=i.Message.getField(this,1)}},{key:"getEndValue",value:function(){return i.Message.getWrapperField(this,e.Value,2)}},{key:"setEndValue",value:function(e){i.Message.setWrapperField(this,2,e)}},{key:"clearEndValue",value:function(){this.setEndValue(void 0)}},{key:"hasEndValue",value:function(){return null!=i.Message.getField(this,2)}}],[{key:"toObject",value:function(t,n){var i,r={startValue:(i=n.getStartValue())&&e.Value.toObject(t,i),endValue:(i=n.getEndValue())&&e.Value.toObject(t,i)};return t&&(r.$jspbMessageInstance=n),r}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),n=new r;return r.deserializeBinaryFromReader(n,t)}},{key:"deserializeBinaryFromReader",value:function(t,n){for(;n.nextField()&&!n.isEndGroup();)switch(n.getFieldNumber()){case 1:var i=new e.Value;n.readMessage(i,e.Value.deserializeBinaryFromReader),t.setStartValue(i);break;case 2:var r=new e.Value;n.readMessage(r,e.Value.deserializeBinaryFromReader),t.setEndValue(r);break;default:n.skipField()}return t}},{key:"serializeBinaryToWriter",value:function(t,n){var i=void 0;null!=(i=t.getStartValue())&&n.writeMessage(1,i,e.Value.serializeBinaryToWriter),null!=(i=t.getEndValue())&&n.writeMessage(2,i,e.Value.serializeBinaryToWriter)}}]),r}(i.Message);t.displayName="StreamFilterOp.WithinInclusiveValue",e.WithinInclusiveValue=t}(o=t.StreamFilterOp||(t.StreamFilterOp={}));var s=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,null,n.oneofGroups_),r}return c(n,[{key:"getValuesCase",value:function(){return i.Message.computeOneofCase(this,n.oneofGroups_[0])}},{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getDoubleValue",value:function(){return i.Message.getFloatingPointFieldWithDefault(this,1,0)}},{key:"setDoubleValue",value:function(e){i.Message.setOneofField(this,1,n.oneofGroups_[0],e)}},{key:"clearDoubleValue",value:function(){i.Message.setOneofField(this,1,n.oneofGroups_[0],void 0)}},{key:"hasDoubleValue",value:function(){return null!=i.Message.getField(this,1)}},{key:"getFloatValue",value:function(){return i.Message.getFloatingPointFieldWithDefault(this,2,0)}},{key:"setFloatValue",value:function(e){i.Message.setOneofField(this,2,n.oneofGroups_[0],e)}},{key:"clearFloatValue",value:function(){i.Message.setOneofField(this,2,n.oneofGroups_[0],void 0)}},{key:"hasFloatValue",value:function(){return null!=i.Message.getField(this,2)}},{key:"getInt32Value",value:function(){return i.Message.getFieldWithDefault(this,3,0)}},{key:"setInt32Value",value:function(e){i.Message.setOneofField(this,3,n.oneofGroups_[0],e)}},{key:"clearInt32Value",value:function(){i.Message.setOneofField(this,3,n.oneofGroups_[0],void 0)}},{key:"hasInt32Value",value:function(){return null!=i.Message.getField(this,3)}},{key:"getUint32Value",value:function(){return i.Message.getFieldWithDefault(this,4,0)}},{key:"setUint32Value",value:function(e){i.Message.setOneofField(this,4,n.oneofGroups_[0],e)}},{key:"clearUint32Value",value:function(){i.Message.setOneofField(this,4,n.oneofGroups_[0],void 0)}},{key:"hasUint32Value",value:function(){return null!=i.Message.getField(this,4)}},{key:"getBoolValue",value:function(){return i.Message.getBooleanFieldWithDefault(this,5,!1)}},{key:"setBoolValue",value:function(e){i.Message.setOneofField(this,5,n.oneofGroups_[0],e)}},{key:"clearBoolValue",value:function(){i.Message.setOneofField(this,5,n.oneofGroups_[0],void 0)}},{key:"hasBoolValue",value:function(){return null!=i.Message.getField(this,5)}},{key:"getStringValue",value:function(){return i.Message.getFieldWithDefault(this,6,"")}},{key:"setStringValue",value:function(e){i.Message.setOneofField(this,6,n.oneofGroups_[0],e)}},{key:"clearStringValue",value:function(){i.Message.setOneofField(this,6,n.oneofGroups_[0],void 0)}},{key:"hasStringValue",value:function(){return null!=i.Message.getField(this,6)}},{key:"getOp",value:function(){return i.Message.getWrapperField(this,o,7)}},{key:"setOp",value:function(e){i.Message.setOneofWrapperField(this,7,n.oneofGroups_[0],e)}},{key:"clearOp",value:function(){this.setOp(void 0)}},{key:"hasOp",value:function(){return null!=i.Message.getField(this,7)}}],[{key:"toObject",value:function(e,t){var n,r={doubleValue:i.Message.getFloatingPointFieldWithDefault(t,1,0),floatValue:i.Message.getFloatingPointFieldWithDefault(t,2,0),int32Value:i.Message.getFieldWithDefault(t,3,0),uint32Value:i.Message.getFieldWithDefault(t,4,0),boolValue:i.Message.getBooleanFieldWithDefault(t,5,!1),stringValue:i.Message.getFieldWithDefault(t,6,""),op:(n=t.getOp())&&o.toObject(e,n)};return e&&(r.$jspbMessageInstance=t),r}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readDouble();e.setDoubleValue(n);break;case 2:var i=t.readFloat();e.setFloatValue(i);break;case 3:var r=t.readInt32();e.setInt32Value(r);break;case 4:var a=t.readUint32();e.setUint32Value(a);break;case 5:var s=t.readBool();e.setBoolValue(s);break;case 6:var l=t.readString();e.setStringValue(l);break;case 7:var u=new o;t.readMessage(u,o.deserializeBinaryFromReader),e.setOp(u);break;default:t.skipField()}return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n=void 0;null!=(n=i.Message.getField(e,1))&&t.writeDouble(1,n),null!=(n=i.Message.getField(e,2))&&t.writeFloat(2,n),null!=(n=i.Message.getField(e,3))&&t.writeInt32(3,n),null!=(n=i.Message.getField(e,4))&&t.writeUint32(4,n),null!=(n=i.Message.getField(e,5))&&t.writeBool(5,n),null!=(n=i.Message.getField(e,6))&&t.writeString(6,n),null!=(n=e.getOp())&&t.writeMessage(7,n,o.serializeBinaryToWriter)}}]),n}(i.Message);t.StreamFilterType=s,s.displayName="StreamFilterType",s.oneofGroups_=[[1,2,3,4,5,6,7]],function(e){!function(e){e[e.VALUES_NOT_SET=0]="VALUES_NOT_SET",e[e.DOUBLE_VALUE=1]="DOUBLE_VALUE",e[e.FLOAT_VALUE=2]="FLOAT_VALUE",e[e.INT32_VALUE=3]="INT32_VALUE",e[e.UINT32_VALUE=4]="UINT32_VALUE",e[e.BOOL_VALUE=5]="BOOL_VALUE",e[e.STRING_VALUE=6]="STRING_VALUE",e[e.OP=7]="OP"}(e.ValuesCase||(e.ValuesCase={}))}(s=t.StreamFilterType||(t.StreamFilterType={}));var u=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,null,null),r}return c(n,[{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getKeyValuesMap",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return i.Message.getMapField(this,1,e,s)}},{key:"clearKeyValuesMap",value:function(){this.getKeyValuesMap().clear()}}],[{key:"toObject",value:function(e,t){var n,i={keyValuesMap:(n=t.getKeyValuesMap())?n.toObject(e,s.toObject):[]};return e&&(i.$jspbMessageInstance=t),i}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=e.getKeyValuesMap();t.readMessage(n,(function(e,t){i.Map.deserializeBinary(e,t,i.BinaryReader.prototype.readString,i.BinaryReader.prototype.readMessage,s.deserializeBinaryFromReader,"")}))}else t.skipField();return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n=void 0;(n=e.getKeyValuesMap(!0))&&n.getLength()>0&&n.serializeBinary(1,t,i.BinaryWriter.prototype.writeString,i.BinaryWriter.prototype.writeMessage,s.serializeBinaryToWriter)}}]),n}(i.Message);t.StreamFilter=u,u.displayName="StreamFilter";var d=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,null,n.oneofGroups_),r}return c(n,[{key:"getInfoCase",value:function(){return i.Message.computeOneofCase(this,n.oneofGroups_[0])}},{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getAction",value:function(){return i.Message.getFieldWithDefault(this,1,0)}},{key:"setAction",value:function(e){i.Message.setProto3EnumField(this,1,e)}},{key:"getStreamId",value:function(){return i.Message.getWrapperField(this,r,2)}},{key:"setStreamId",value:function(e){i.Message.setOneofWrapperField(this,2,n.oneofGroups_[0],e)}},{key:"clearStreamId",value:function(){this.setStreamId(void 0)}},{key:"hasStreamId",value:function(){return null!=i.Message.getField(this,2)}},{key:"getStreamFilter",value:function(){return i.Message.getWrapperField(this,u,3)}},{key:"setStreamFilter",value:function(e){i.Message.setOneofWrapperField(this,3,n.oneofGroups_[0],e)}},{key:"clearStreamFilter",value:function(){this.setStreamFilter(void 0)}},{key:"hasStreamFilter",value:function(){return null!=i.Message.getField(this,3)}}],[{key:"toObject",value:function(e,t){var n,a={action:i.Message.getFieldWithDefault(t,1,0),streamId:(n=t.getStreamId())&&r.toObject(e,n),streamFilter:(n=t.getStreamFilter())&&u.toObject(e,n)};return e&&(a.$jspbMessageInstance=t),a}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readEnum();e.setAction(n);break;case 2:var i=new r;t.readMessage(i,r.deserializeBinaryFromReader),e.setStreamId(i);break;case 3:var a=new u;t.readMessage(a,u.deserializeBinaryFromReader),e.setStreamFilter(a);break;default:t.skipField()}return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n=void 0;0!==(n=e.getAction())&&t.writeEnum(1,n),null!=(n=e.getStreamId())&&t.writeMessage(2,n,r.serializeBinaryToWriter),null!=(n=e.getStreamFilter())&&t.writeMessage(3,n,u.serializeBinaryToWriter)}}]),n}(i.Message);t.StreamControl=d,d.displayName="StreamControl",d.oneofGroups_=[[2,3]],function(e){!function(e){e[e.INFO_NOT_SET=0]="INFO_NOT_SET",e[e.STREAM_ID=2]="STREAM_ID",e[e.STREAM_FILTER=3]="STREAM_FILTER"}(e.InfoCase||(e.InfoCase={}))}(d=t.StreamControl||(t.StreamControl={}));var f,h,m,y=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,null,null),r}return c(n,[{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getStatus",value:function(){return i.Message.getFieldWithDefault(this,1,0)}},{key:"setStatus",value:function(e){i.Message.setProto3EnumField(this,1,e)}},{key:"getStreamStatus",value:function(){return i.Message.getFieldWithDefault(this,3,0)}},{key:"setStreamStatus",value:function(e){i.Message.setProto3EnumField(this,3,e)}},{key:"getStreamId",value:function(){return i.Message.getWrapperField(this,r,2)}},{key:"setStreamId",value:function(e){i.Message.setWrapperField(this,2,e)}},{key:"clearStreamId",value:function(){this.setStreamId(void 0)}},{key:"hasStreamId",value:function(){return null!=i.Message.getField(this,2)}}],[{key:"toObject",value:function(e,t){var n,a={status:i.Message.getFieldWithDefault(t,1,0),streamStatus:i.Message.getFieldWithDefault(t,3,0),streamId:(n=t.getStreamId())&&r.toObject(e,n)};return e&&(a.$jspbMessageInstance=t),a}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readEnum();e.setStatus(n);break;case 3:var i=t.readEnum();e.setStreamStatus(i);break;case 2:var a=new r;t.readMessage(a,r.deserializeBinaryFromReader),e.setStreamId(a);break;default:t.skipField()}return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n=void 0;0!==(n=e.getStatus())&&t.writeEnum(1,n),0!==(n=e.getStreamStatus())&&t.writeEnum(3,n),null!=(n=e.getStreamId())&&t.writeMessage(2,n,r.serializeBinaryToWriter)}}]),n}(i.Message);t.StreamControlResponse=y,y.displayName="StreamControlResponse",(m=t.StreamStatus||(t.StreamStatus={}))[m.STREAM_OK=0]="STREAM_OK",m[m.STREAM_EXHAUSTED=1]="STREAM_EXHAUSTED",m[m.STREAM_EXHAUSTED_FRONT=2]="STREAM_EXHAUSTED_FRONT",m[m.STREAM_EXHAUSTED_BACK=3]="STREAM_EXHAUSTED_BACK",(h=t.StreamAction||(t.StreamAction={}))[h.NOOP=0]="NOOP",h[h.SEEK_FRONT=1]="SEEK_FRONT",h[h.SEEK_BACK=2]="SEEK_BACK",h[h.PAUSE=3]="PAUSE",h[h.RESUME=4]="RESUME",h[h.CANCEL=5]="CANCEL",h[h.SEEK_ANY=6]="SEEK_ANY",h[h.COUNT=7]="COUNT",h[h.RESTART=8]="RESTART",(f=t.StreamItemPosition||(t.StreamItemPosition={}))[f.NONE=0]="NONE",f[f.UPSERT=1]="UPSERT",f[f.PUSH_FRONT=2]="PUSH_FRONT",f[f.PUSH_BACK=3]="PUSH_BACK"},nfLS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FullGraphicClient=t.FullGraphic=void 0;var i=n("sH97"),r=n("4doY"),a=c((function e(){l(this,e)}));t.FullGraphic=a,a.serviceName="minga.content.FullGraphic",a.New={methodName:"New",service:a,requestStream:!1,responseStream:!1,requestType:i.FullGraphicInfo,responseType:r.ContentSaveResult},a.Update={methodName:"Update",service:a,requestStream:!1,responseStream:!1,requestType:i.DeltaFullGraphicInfo,responseType:r.ContentSaveResult},a.GetInfo={methodName:"GetInfo",service:a,requestStream:!1,responseStream:!1,requestType:r.ContentInfoQuery,responseType:i.FullGraphicInfo},t.FullGraphicClient=function(){function e(){l(this,e)}return c(e,[{key:"new",value:function(){throw new Error("minga_protoc_gen_improbable_eng_grpc_web client methods are unimplemented")}},{key:"update",value:function(){throw new Error("minga_protoc_gen_improbable_eng_grpc_web client methods are unimplemented")}},{key:"getInfo",value:function(){throw new Error("minga_protoc_gen_improbable_eng_grpc_web client methods are unimplemented")}}]),e}()},qvb8:function(e,t,n){var i,r;e.exports=(i=function(e,t){void 0===t&&(t=1);var n=new Image;return e.startsWith("data")||(n.crossOrigin="Anonymous"),new Promise((function(i,r){n.onload=function(){var e=n.width*t,r=n.height*t,a=function(e,t){var n=document.createElement("canvas");return n.setAttribute("width",e),n.setAttribute("height",t),n.getContext("2d")}(e,r);a.drawImage(n,0,0,e,r);var o=a.getImageData(0,0,e,r);i(o.data)};var a=function(){return r(new Error("An error occurred attempting to load image"))};n.onerror=a,n.onabort=a,n.src=e}))},r={ignore:[],scale:1},function(e,t){void 0===t&&(t=r);try{var n=(t=Object.assign({},r,t)).ignore,a=t.scale;return(a>1||a<=0)&&console.warn("You set scale to "+a+", which isn't between 0-1. This is either pointless (> 1) or a no-op (\u2264 0)"),Promise.resolve(i(e,a)).then((function(e){return function(e,t){for(var n={},i=0;i<e.length;i+=4){var r=e[i+3];if(0!==r){var a=Array.from(e.subarray(i,i+3));if(-1===a.indexOf(void 0)){var o=r&&255!==r?"rgba("+a.concat([r]).join(",")+")":"rgb("+a.join(",")+")";-1===t.indexOf(o)&&(n[o]?n[o].count++:n[o]={color:o,count:1})}}}return Object.values(n).sort((function(e,t){return t.count-e.count}))}(e,n)}))}catch(i){return Promise.reject(i)}})},sH97:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeltaFullGraphicInfo=t.FullGraphicInfo=void 0;var i=n("hRO2"),r=n("F5Qo"),a=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,null,null),r}return c(n,[{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getFullGraphicAsset",value:function(){return i.Message.getFieldWithDefault(this,1,"")}},{key:"setFullGraphicAsset",value:function(e){i.Message.setProto3StringField(this,1,e)}},{key:"getStyleBackgroundColor",value:function(){return i.Message.getFieldWithDefault(this,2,"")}},{key:"setStyleBackgroundColor",value:function(e){i.Message.setProto3StringField(this,2,e)}},{key:"getStyleGradientOverlap",value:function(){return i.Message.getBooleanFieldWithDefault(this,3,!1)}},{key:"setStyleGradientOverlap",value:function(e){i.Message.setProto3BooleanField(this,3,e)}},{key:"getStyleLightContent",value:function(){return i.Message.getBooleanFieldWithDefault(this,4,!1)}},{key:"setStyleLightContent",value:function(e){i.Message.setProto3BooleanField(this,4,e)}},{key:"getStyleGradientSize",value:function(){return i.Message.getFloatingPointFieldWithDefault(this,5,0)}},{key:"setStyleGradientSize",value:function(e){i.Message.setProto3FloatField(this,5,e)}}],[{key:"toObject",value:function(e,t){var n={fullGraphicAsset:i.Message.getFieldWithDefault(t,1,""),styleBackgroundColor:i.Message.getFieldWithDefault(t,2,""),styleGradientOverlap:i.Message.getBooleanFieldWithDefault(t,3,!1),styleLightContent:i.Message.getBooleanFieldWithDefault(t,4,!1),styleGradientSize:i.Message.getFloatingPointFieldWithDefault(t,5,0)};return e&&(n.$jspbMessageInstance=t),n}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setFullGraphicAsset(n);break;case 2:var i=t.readString();e.setStyleBackgroundColor(i);break;case 3:var r=t.readBool();e.setStyleGradientOverlap(r);break;case 4:var a=t.readBool();e.setStyleLightContent(a);break;case 5:var o=t.readFloat();e.setStyleGradientSize(o);break;default:t.skipField()}return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n=void 0;(n=e.getFullGraphicAsset()).length>0&&t.writeString(1,n),(n=e.getStyleBackgroundColor()).length>0&&t.writeString(2,n),(n=e.getStyleGradientOverlap())&&t.writeBool(3,n),(n=e.getStyleLightContent())&&t.writeBool(4,n),0!==(n=e.getStyleGradientSize())&&t.writeFloat(5,n)}}]),n}(i.Message);t.FullGraphicInfo=a,a.displayName="FullGraphicInfo";var o=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,null,null),r}return c(n,[{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getContentHash",value:function(){return i.Message.getFieldWithDefault(this,1,"")}},{key:"setContentHash",value:function(e){i.Message.setProto3StringField(this,1,e)}},{key:"getFullGraphicAsset",value:function(){return i.Message.getWrapperField(this,r.StringDelta,2)}},{key:"setFullGraphicAsset",value:function(e){i.Message.setWrapperField(this,2,e)}},{key:"clearFullGraphicAsset",value:function(){this.setFullGraphicAsset(void 0)}},{key:"hasFullGraphicAsset",value:function(){return null!=i.Message.getField(this,2)}},{key:"getStyleBackgroundColor",value:function(){return i.Message.getWrapperField(this,r.StringDelta,3)}},{key:"setStyleBackgroundColor",value:function(e){i.Message.setWrapperField(this,3,e)}},{key:"clearStyleBackgroundColor",value:function(){this.setStyleBackgroundColor(void 0)}},{key:"hasStyleBackgroundColor",value:function(){return null!=i.Message.getField(this,3)}},{key:"getStyleGradientOverlap",value:function(){return i.Message.getWrapperField(this,r.BoolDelta,4)}},{key:"setStyleGradientOverlap",value:function(e){i.Message.setWrapperField(this,4,e)}},{key:"clearStyleGradientOverlap",value:function(){this.setStyleGradientOverlap(void 0)}},{key:"hasStyleGradientOverlap",value:function(){return null!=i.Message.getField(this,4)}},{key:"getStyleLightContent",value:function(){return i.Message.getWrapperField(this,r.BoolDelta,5)}},{key:"setStyleLightContent",value:function(e){i.Message.setWrapperField(this,5,e)}},{key:"clearStyleLightContent",value:function(){this.setStyleLightContent(void 0)}},{key:"hasStyleLightContent",value:function(){return null!=i.Message.getField(this,5)}},{key:"getStyleGradientSize",value:function(){return i.Message.getWrapperField(this,r.FloatDelta,6)}},{key:"setStyleGradientSize",value:function(e){i.Message.setWrapperField(this,6,e)}},{key:"clearStyleGradientSize",value:function(){this.setStyleGradientSize(void 0)}},{key:"hasStyleGradientSize",value:function(){return null!=i.Message.getField(this,6)}}],[{key:"toObject",value:function(e,t){var n,a={contentHash:i.Message.getFieldWithDefault(t,1,""),fullGraphicAsset:(n=t.getFullGraphicAsset())&&r.StringDelta.toObject(e,n),styleBackgroundColor:(n=t.getStyleBackgroundColor())&&r.StringDelta.toObject(e,n),styleGradientOverlap:(n=t.getStyleGradientOverlap())&&r.BoolDelta.toObject(e,n),styleLightContent:(n=t.getStyleLightContent())&&r.BoolDelta.toObject(e,n),styleGradientSize:(n=t.getStyleGradientSize())&&r.FloatDelta.toObject(e,n)};return e&&(a.$jspbMessageInstance=t),a}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setContentHash(n);break;case 2:var i=new r.StringDelta;t.readMessage(i,r.StringDelta.deserializeBinaryFromReader),e.setFullGraphicAsset(i);break;case 3:var a=new r.StringDelta;t.readMessage(a,r.StringDelta.deserializeBinaryFromReader),e.setStyleBackgroundColor(a);break;case 4:var o=new r.BoolDelta;t.readMessage(o,r.BoolDelta.deserializeBinaryFromReader),e.setStyleGradientOverlap(o);break;case 5:var s=new r.BoolDelta;t.readMessage(s,r.BoolDelta.deserializeBinaryFromReader),e.setStyleLightContent(s);break;case 6:var l=new r.FloatDelta;t.readMessage(l,r.FloatDelta.deserializeBinaryFromReader),e.setStyleGradientSize(l);break;default:t.skipField()}return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n=void 0;(n=e.getContentHash()).length>0&&t.writeString(1,n),null!=(n=e.getFullGraphicAsset())&&t.writeMessage(2,n,r.StringDelta.serializeBinaryToWriter),null!=(n=e.getStyleBackgroundColor())&&t.writeMessage(3,n,r.StringDelta.serializeBinaryToWriter),null!=(n=e.getStyleGradientOverlap())&&t.writeMessage(4,n,r.BoolDelta.serializeBinaryToWriter),null!=(n=e.getStyleLightContent())&&t.writeMessage(5,n,r.BoolDelta.serializeBinaryToWriter),null!=(n=e.getStyleGradientSize())&&t.writeMessage(6,n,r.FloatDelta.serializeBinaryToWriter)}}]),n}(i.Message);t.DeltaFullGraphicInfo=o,o.displayName="DeltaFullGraphicInfo"},"tsE+":function(e,t,n){"use strict";n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return x})),n.d(t,"a",(function(){return D}));var i=n("8Y7J"),r=n("s7LF"),a=n("HHVM"),o=n("SVse"),s=n("pMoy"),u=n("Q2Ze"),d=n("e6WT"),g=n("ZTz/"),f=n("UhP/");function p(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",2),i["\u0275\u0275elementStart"](1,"mat-checkbox",3),i["\u0275\u0275listener"]("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().relativeOffset=e}))("ngModelChange",(function(e){i["\u0275\u0275restoreView"](n);var t=i["\u0275\u0275nextContext"]();return t.onRelativeOffsetChange(e),t.triggerOnChange()})),i["\u0275\u0275elementStart"](2,"span"),i["\u0275\u0275text"](3,"Relative Offset"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var r=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",r.relativeOffset)}}function h(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-form-field",4),i["\u0275\u0275elementStart"](1,"mat-label"),i["\u0275\u0275text"](2,"Day"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"input",5),i["\u0275\u0275listener"]("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().daySelection=e}))("ngModelChange",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().triggerOnChange()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var r=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngModel",r.daySelection)}}function v(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"mat-option",9),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit,r=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",r.getMonthText(n)," ")}}function m(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"mat-option",9),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit,r=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](r.getDayText(n))}}function y(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-select",10),i["\u0275\u0275listener"]("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).daySelection=e}))("ngModelChange",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).triggerOnChange()})),i["\u0275\u0275template"](1,m,3,2,"ng-container",7),i["\u0275\u0275elementEnd"]()}if(2&e){var r=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("ngModel",r.daySelection),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",r.dayOptions)}}function b(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-select",6),i["\u0275\u0275listener"]("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().monthSelection=e}))("ngModelChange",(function(e){i["\u0275\u0275restoreView"](n);var t=i["\u0275\u0275nextContext"]();return t.onMonthSelect(e),t.triggerOnChange()})),i["\u0275\u0275template"](1,v,3,2,"ng-container",7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](2,y,2,2,"mat-select",8)}if(2&e){var r=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngModel",r.monthSelection),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",r.monthOptions),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",r.monthSelection)}}for(var C=864e5,k=[],M=0;96>M;++M)k.push(9e5*M);var w={provide:r.r,useExisting:Object(i.forwardRef)((function(){return D})),multi:!0};function O(e){var t=a.day.utc(0);return e.month&&t.month(e.month-1),e.day&&t.date(e.day),"number"==typeof e.time&&t.millisecond(e.time),t.toDate().getTime()}function x(e,t){if(e){var n=a.day.utc(t);return{relative:!0,month:0,day:Math.floor(t/C)+1,time:n.millisecond()}}var i=a.day.utc(t);return{relative:!1,month:i.month()+1,day:i.date(),time:i.millisecond()}}var D=function(){var e=function(){function e(){l(this,e),this.relativeOffset=!1,this.relativeOffsetChange=new i.EventEmitter,this.hideRelativeOffsetToggle=!1,this.monthSelection=0,this.daySelection=0,this.timeSelection=null,this.timeOptions=[].concat(k),this.monthOptions=[1,2,3,4,5,6,7,8,9,10,11,12],this.dayOptions=[]}return c(e,[{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"onRelativeOffsetChange",value:function(e){e&&(this.daySelection||(this.daySelection=1)),this.relativeOffsetChange.emit(e)}},{key:"triggerOnChange",value:function(){this.onChange&&this.onChange(this.relativeOffset?{relative:!0,day:this.daySelection,time:this.timeSelection,month:0}:{relative:!1,day:this.daySelection,month:this.monthSelection,time:0})}},{key:"resetValue",value:function(){this.relativeOffset=!1,this.monthSelection=0,this.daySelection=0}},{key:"_writeValue",value:function(e){"boolean"==typeof e.relative&&(this.relativeOffset=e.relative),"number"==typeof e.month?(this.monthSelection=e.month,this.initDayOptions()):this.monthSelection=0,this.daySelection="number"==typeof e.day?e.day:0,this.timeSelection="number"==typeof e.time?this.timeOptions.sort((function(t,n){return Math.abs(e.time-t)-Math.abs(e.time-n)}))[0]:null}},{key:"writeValue",value:function(e){null===e?this.resetValue():"object"==typeof e?this._writeValue(e):console.warn("Invalid ngModel type for <mg-date-time-offset-picker>:",e)}},{key:"initDayOptions",value:function(){if(this.dayOptions=[],this.daySelection=0,0!==this.monthSelection)for(var e=Object(a.day)().month(this.monthSelection-1).daysInMonth(),t=0;e>t;++t)this.dayOptions.push(t+1)}},{key:"getTimeOptionText",value:function(e){return a.day.utc(e).format("h:mm a")}},{key:"onMonthSelect",value:function(e){this.initDayOptions()}},{key:"getMonthText",value:function(e){return Object(a.day)().month(e-1).format("MMMM")}},{key:"getDayText",value:function(e){return(""+e).padStart(2,"0")}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-date-time-offset-picker"]],inputs:{relativeOffset:"relativeOffset",hideRelativeOffsetToggle:"hideRelativeOffsetToggle"},outputs:{relativeOffsetChange:"relativeOffsetChange"},features:[i["\u0275\u0275ProvidersFeature"]([w])],decls:3,vars:3,consts:[["style","padding: 8px 0",4,"ngIf"],[3,"ngIf"],[2,"padding","8px 0"],[3,"ngModel","ngModelChange"],[1,"number-input"],["matInput","","autocomplete","off","name","dayOffset","type","number","min","1",3,"ngModel","ngModelChange"],["placeholder","Month",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["placeholder","Day",3,"ngModel","ngModelChange",4,"ngIf"],[3,"value"],["placeholder","Day",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,p,4,1,"div",0),i["\u0275\u0275template"](1,h,4,1,"ng-template",1),i["\u0275\u0275template"](2,b,3,3,"ng-template",1)),2&e&&(i["\u0275\u0275property"]("ngIf",!t.hideRelativeOffsetToggle),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.relativeOffset),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.relativeOffset))},directives:[o.o,s.a,r.t,r.w,u.d,u.h,d.b,r.y,r.d,g.a,o.n,f.m],styles:[".mat-select[_ngcontent-%COMP%]{width:120px}.number-input[_ngcontent-%COMP%]{width:120px;display:inline-block}"]}),e}()},yJXV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogoAnchor=t.LogoAnchorDelta=t.CommonContentInfo=t.ContentInfoQuery=t.ContentSaveResult=void 0;var i=n("hRO2"),r=n("gzPw"),a=n("ZAf1"),o=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,null,null),r}return c(n,[{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getContentHash",value:function(){return i.Message.getFieldWithDefault(this,1,"")}},{key:"setContentHash",value:function(e){i.Message.setProto3StringField(this,1,e)}},{key:"getContentContextHash",value:function(){return i.Message.getFieldWithDefault(this,2,"")}},{key:"setContentContextHash",value:function(e){i.Message.setProto3StringField(this,2,e)}},{key:"getModerationResult",value:function(){return i.Message.getWrapperField(this,r.ModerationResult,3)}},{key:"setModerationResult",value:function(e){i.Message.setWrapperField(this,3,e)}},{key:"clearModerationResult",value:function(){this.setModerationResult(void 0)}},{key:"hasModerationResult",value:function(){return null!=i.Message.getField(this,3)}}],[{key:"toObject",value:function(e,t){var n,a={contentHash:i.Message.getFieldWithDefault(t,1,""),contentContextHash:i.Message.getFieldWithDefault(t,2,""),moderationResult:(n=t.getModerationResult())&&r.ModerationResult.toObject(e,n)};return e&&(a.$jspbMessageInstance=t),a}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setContentHash(n);break;case 2:var i=t.readString();e.setContentContextHash(i);break;case 3:var a=new r.ModerationResult;t.readMessage(a,r.ModerationResult.deserializeBinaryFromReader),e.setModerationResult(a);break;default:t.skipField()}return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n=void 0;(n=e.getContentHash()).length>0&&t.writeString(1,n),(n=e.getContentContextHash()).length>0&&t.writeString(2,n),null!=(n=e.getModerationResult())&&t.writeMessage(3,n,r.ModerationResult.serializeBinaryToWriter)}}]),n}(i.Message);t.ContentSaveResult=o,o.displayName="ContentSaveResult";var s=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,null,n.oneofGroups_),r}return c(n,[{key:"getQueryCase",value:function(){return i.Message.computeOneofCase(this,n.oneofGroups_[0])}},{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getIncludeDeleted",value:function(){return i.Message.getBooleanFieldWithDefault(this,1,!1)}},{key:"setIncludeDeleted",value:function(e){i.Message.setProto3BooleanField(this,1,e)}},{key:"getContentHash",value:function(){return i.Message.getFieldWithDefault(this,2,"")}},{key:"setContentHash",value:function(e){i.Message.setOneofField(this,2,n.oneofGroups_[0],e)}},{key:"clearContentHash",value:function(){i.Message.setOneofField(this,2,n.oneofGroups_[0],void 0)}},{key:"hasContentHash",value:function(){return null!=i.Message.getField(this,2)}},{key:"getContentContextHash",value:function(){return i.Message.getFieldWithDefault(this,3,"")}},{key:"setContentContextHash",value:function(e){i.Message.setOneofField(this,3,n.oneofGroups_[0],e)}},{key:"clearContentContextHash",value:function(){i.Message.setOneofField(this,3,n.oneofGroups_[0],void 0)}},{key:"hasContentContextHash",value:function(){return null!=i.Message.getField(this,3)}}],[{key:"toObject",value:function(e,t){var n={includeDeleted:i.Message.getBooleanFieldWithDefault(t,1,!1),contentHash:i.Message.getFieldWithDefault(t,2,""),contentContextHash:i.Message.getFieldWithDefault(t,3,"")};return e&&(n.$jspbMessageInstance=t),n}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readBool();e.setIncludeDeleted(n);break;case 2:var i=t.readString();e.setContentHash(i);break;case 3:var r=t.readString();e.setContentContextHash(r);break;default:t.skipField()}return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n=void 0;(n=e.getIncludeDeleted())&&t.writeBool(1,n),null!=(n=i.Message.getField(e,2))&&t.writeString(2,n),null!=(n=i.Message.getField(e,3))&&t.writeString(3,n)}}]),n}(i.Message);t.ContentInfoQuery=s,s.displayName="ContentInfoQuery",s.oneofGroups_=[[2,3]],function(e){!function(e){e[e.QUERY_NOT_SET=0]="QUERY_NOT_SET",e[e.CONTENT_HASH=2]="CONTENT_HASH",e[e.CONTENT_CONTEXT_HASH=3]="CONTENT_CONTEXT_HASH"}(e.QueryCase||(e.QueryCase={}))}(s=t.ContentInfoQuery||(t.ContentInfoQuery={}));var u=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,null,null),r}return c(n,[{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getTitle",value:function(){return i.Message.getFieldWithDefault(this,1,"")}},{key:"setTitle",value:function(e){i.Message.setProto3StringField(this,1,e)}},{key:"getDescription",value:function(){return i.Message.getFieldWithDefault(this,2,"")}},{key:"setDescription",value:function(e){i.Message.setProto3StringField(this,2,e)}},{key:"getActive",value:function(){return i.Message.getBooleanFieldWithDefault(this,3,!1)}},{key:"setActive",value:function(e){i.Message.setProto3BooleanField(this,3,e)}},{key:"getPublishDateTime",value:function(){return i.Message.getWrapperField(this,a.DateTime,4)}},{key:"setPublishDateTime",value:function(e){i.Message.setWrapperField(this,4,e)}},{key:"clearPublishDateTime",value:function(){this.setPublishDateTime(void 0)}},{key:"hasPublishDateTime",value:function(){return null!=i.Message.getField(this,4)}},{key:"getUnpublishDateTime",value:function(){return i.Message.getWrapperField(this,a.DateTime,5)}},{key:"setUnpublishDateTime",value:function(e){i.Message.setWrapperField(this,5,e)}},{key:"clearUnpublishDateTime",value:function(){this.setUnpublishDateTime(void 0)}},{key:"hasUnpublishDateTime",value:function(){return null!=i.Message.getField(this,5)}}],[{key:"toObject",value:function(e,t){var n,r={title:i.Message.getFieldWithDefault(t,1,""),description:i.Message.getFieldWithDefault(t,2,""),active:i.Message.getBooleanFieldWithDefault(t,3,!1),publishDateTime:(n=t.getPublishDateTime())&&a.DateTime.toObject(e,n),unpublishDateTime:(n=t.getUnpublishDateTime())&&a.DateTime.toObject(e,n)};return e&&(r.$jspbMessageInstance=t),r}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var n=t.readString();e.setTitle(n);break;case 2:var i=t.readString();e.setDescription(i);break;case 3:var r=t.readBool();e.setActive(r);break;case 4:var o=new a.DateTime;t.readMessage(o,a.DateTime.deserializeBinaryFromReader),e.setPublishDateTime(o);break;case 5:var s=new a.DateTime;t.readMessage(s,a.DateTime.deserializeBinaryFromReader),e.setUnpublishDateTime(s);break;default:t.skipField()}return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n=void 0;(n=e.getTitle()).length>0&&t.writeString(1,n),(n=e.getDescription()).length>0&&t.writeString(2,n),(n=e.getActive())&&t.writeBool(3,n),null!=(n=e.getPublishDateTime())&&t.writeMessage(4,n,a.DateTime.serializeBinaryToWriter),null!=(n=e.getUnpublishDateTime())&&t.writeMessage(5,n,a.DateTime.serializeBinaryToWriter)}}]),n}(i.Message);t.CommonContentInfo=u,u.displayName="CommonContentInfo";var d,f=function(e){g(n,e);var t=p(n);function n(e){var r;return l(this,n),r=t.call(this),i.Message.initialize(v(r),e,0,-1,null,null),r}return c(n,[{key:"toObject",value:function(e){return n.toObject(e||!1,this)}},{key:"serializeBinary",value:function(){var e=new i.BinaryWriter;return n.serializeBinaryToWriter(this,e),e.getResultBuffer()}},{key:"getNewLogoAnchor",value:function(){return i.Message.getFieldWithDefault(this,1,0)}},{key:"setNewLogoAnchor",value:function(e){i.Message.setProto3EnumField(this,1,e)}}],[{key:"toObject",value:function(e,t){var n={newLogoAnchor:i.Message.getFieldWithDefault(t,1,0)};return e&&(n.$jspbMessageInstance=t),n}},{key:"deserializeBinary",value:function(e){var t=new i.BinaryReader(e),r=new n;return n.deserializeBinaryFromReader(r,t)}},{key:"deserializeBinaryFromReader",value:function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var n=t.readEnum();e.setNewLogoAnchor(n)}else t.skipField();return e}},{key:"serializeBinaryToWriter",value:function(e,t){var n;0!==(n=e.getNewLogoAnchor())&&t.writeEnum(1,n)}}]),n}(i.Message);t.LogoAnchorDelta=f,f.displayName="LogoAnchorDelta",(d=t.LogoAnchor||(t.LogoAnchor={}))[d.LA_NONE=0]="LA_NONE",d[d.LA_TOP_LEFT=1]="LA_TOP_LEFT",d[d.LA_TOP_CENTER=2]="LA_TOP_CENTER",d[d.LA_TOP_RIGHT=3]="LA_TOP_RIGHT",d[d.LA_MID_LEFT=4]="LA_MID_LEFT",d[d.LA_MID_CENTER=5]="LA_MID_CENTER",d[d.LA_MID_RIGHT=6]="LA_MID_RIGHT",d[d.LA_BTM_LEFT=7]="LA_BTM_LEFT",d[d.LA_BTM_CENTER=8]="LA_BTM_CENTER",d[d.LA_BTM_RIGHT=9]="LA_BTM_RIGHT"}}])}();
//# sourceMappingURL=minga-app-src-app-content-Content-module-es5.js.map
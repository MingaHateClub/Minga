!function(){function t(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t=function(){return e};var e={},i=Object.prototype,r=i.hasOwnProperty,n=Object.defineProperty||function(t,e,i){t[e]=i.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function h(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(P){h=function(t,e,i){return t[e]=i}}function p(t,e,i,r){var o=e&&e.prototype instanceof g?e:g,a=Object.create(o.prototype),s=new z(r||[]);return n(a,"_invoke",{value:A(t,i,s)}),a}function l(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(P){return{type:"throw",arg:P}}}e.wrap=p;var u={};function g(){}function d(){}function m(){}var f={};h(f,a,(function(){return this}));var v=Object.getPrototypeOf,x=v&&v(v(R([])));x&&x!==i&&r.call(x,a)&&(f=x);var y=m.prototype=g.prototype=Object.create(f);function M(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){var i;n(this,"_invoke",{value:function(n,o){function a(){return new e((function(i,a){!function i(n,o,a,s){var c=l(t[n],t,o);if("throw"!==c.type){var h=c.arg,p=h.value;return p&&"object"==typeof p&&r.call(p,"__await")?e.resolve(p.__await).then((function(t){i("next",t,a,s)}),(function(t){i("throw",t,a,s)})):e.resolve(p).then((function(t){h.value=t,a(h)}),(function(t){return i("throw",t,a,s)}))}s(c.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function A(t,e,i){var r="suspendedStart";return function(n,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===n)throw o;return I()}for(i.method=n,i.arg=o;;){var a=i.delegate;if(a){var s=S(a,i);if(s){if(s===u)continue;return s}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===r)throw r="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r="executing";var c=l(t,e,i);if("normal"===c.type){if(r=i.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(r="completed",i.method="throw",i.arg=c.arg)}}}function S(t,e){var i=e.method,r=t.iterator[i];if(void 0===r)return e.delegate=null,"throw"===i&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==i&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+i+"' method")),u;var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function z(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function R(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,n=function e(){for(;++i<t.length;)if(r.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=m,n(y,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:d,configurable:!0}),d.displayName=h(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,h(t,c,"GeneratorFunction")),t.prototype=Object.create(y),t},e.awrap=function(t){return{__await:t}},M(w.prototype),h(w.prototype,s,(function(){return this})),e.AsyncIterator=w,e.async=function(t,i,r,n,o){void 0===o&&(o=Promise);var a=new w(p(t,i,r,n),o);return e.isGeneratorFunction(i)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},M(y),h(y,c,"Generator"),h(y,a,(function(){return this})),h(y,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),i=[];for(var r in e)i.push(r);return i.reverse(),function t(){for(;i.length;){var r=i.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=R,z.prototype={constructor:z,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(i,r){return a.type="throw",a.arg=t,e.next=i,r&&(e.method="next",e.arg=void 0),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),b(i),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var r=i.completion;if("throw"===r.type){var n=r.arg;b(i)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:R(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=void 0),u}},e}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(n=r.key,o=void 0,"symbol"==typeof(o=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"))?o:String(o)),r)}var n,o}function r(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"+RMD":function(i,n,o){"use strict";o.d(n,"a",(function(){return h}));var a=o("mrSG"),s=o("8Y7J"),c=o("V0rs"),h=function(){var i=function(){function i(t){e(this,i),this._cdr=t,this.file=null,this.previewSize=150,this.filePreviewUrl=""}return r(i,[{key:"ngOnChanges",value:function(e){return Object(a.a)(this,void 0,void 0,t().mark((function i(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.file,!t.t0){t.next=6;break}return t.next=4,this.getfilePreviewUrl();case 4:this.filePreviewUrl=t.sent,this._cdr.markForCheck();case 6:case"end":return t.stop()}}),i,this)})))}},{key:"getfilePreviewUrl",value:function(){return Object(a.a)(this,void 0,void 0,t().mark((function e(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",!this.file||this.previewSize<=0?"":Object(c.e)(this.file,this.previewSize));case 1:case"end":return t.stop()}}),e,this)})))}}]),i}();return i.\u0275fac=function(t){return new(t||i)(s["\u0275\u0275directiveInject"](s.ChangeDetectorRef))},i.\u0275cmp=s["\u0275\u0275defineComponent"]({type:i,selectors:[["mg-file-preview"]],inputs:{file:"file",previewSize:"previewSize"},features:[s["\u0275\u0275NgOnChangesFeature"]],decls:1,vars:1,consts:[[3,"src"]],template:function(t,e){1&t&&s["\u0275\u0275element"](0,"img",0),2&t&&s["\u0275\u0275property"]("src",e.filePreviewUrl,s["\u0275\u0275sanitizeUrl"])},styles:["img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;image-orientation:from-image}"],changeDetection:0}),i}()},"YD+O":function(i,n,o){"use strict";o.d(n,"a",(function(){return M})),o.d(n,"b",(function(){return w})),o.d(n,"c",(function(){return A}));var a=o("8Y7J"),s=o("phxv"),c=o("SVse"),h=o("cUpR"),p=["wrapper"],l=["sourceImage"];function u(t,e){if(1&t){var i=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"img",4,5),a["\u0275\u0275listener"]("load",(function(){return a["\u0275\u0275restoreView"](i),a["\u0275\u0275nextContext"]().imageLoadedInView()})),a["\u0275\u0275elementEnd"]()}if(2&t){var r=a["\u0275\u0275nextContext"]();a["\u0275\u0275styleProp"]("visibility",r.imageVisible?"visible":"hidden")("transform",r.safeTransformStyle),a["\u0275\u0275property"]("src",r.safeImgDataUrl,a["\u0275\u0275sanitizeUrl"])}}function g(t,e){if(1&t){var i=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementContainerStart"](0),a["\u0275\u0275elementStart"](1,"span",9),a["\u0275\u0275listener"]("mousedown",(function(t){a["\u0275\u0275restoreView"](i);var e=a["\u0275\u0275nextContext"](2);return e.startMove(t,e.moveTypes.Resize,"topleft")}))("touchstart",(function(t){a["\u0275\u0275restoreView"](i);var e=a["\u0275\u0275nextContext"](2);return e.startMove(t,e.moveTypes.Resize,"topleft")})),a["\u0275\u0275element"](2,"span",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"span",11),a["\u0275\u0275element"](4,"span",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"span",12),a["\u0275\u0275listener"]("mousedown",(function(t){a["\u0275\u0275restoreView"](i);var e=a["\u0275\u0275nextContext"](2);return e.startMove(t,e.moveTypes.Resize,"topright")}))("touchstart",(function(t){a["\u0275\u0275restoreView"](i);var e=a["\u0275\u0275nextContext"](2);return e.startMove(t,e.moveTypes.Resize,"topright")})),a["\u0275\u0275element"](6,"span",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"span",13),a["\u0275\u0275element"](8,"span",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"span",14),a["\u0275\u0275listener"]("mousedown",(function(t){a["\u0275\u0275restoreView"](i);var e=a["\u0275\u0275nextContext"](2);return e.startMove(t,e.moveTypes.Resize,"bottomright")}))("touchstart",(function(t){a["\u0275\u0275restoreView"](i);var e=a["\u0275\u0275nextContext"](2);return e.startMove(t,e.moveTypes.Resize,"bottomright")})),a["\u0275\u0275element"](10,"span",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"span",15),a["\u0275\u0275element"](12,"span",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](13,"span",16),a["\u0275\u0275listener"]("mousedown",(function(t){a["\u0275\u0275restoreView"](i);var e=a["\u0275\u0275nextContext"](2);return e.startMove(t,e.moveTypes.Resize,"bottomleft")}))("touchstart",(function(t){a["\u0275\u0275restoreView"](i);var e=a["\u0275\u0275nextContext"](2);return e.startMove(t,e.moveTypes.Resize,"bottomleft")})),a["\u0275\u0275element"](14,"span",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](15,"span",17),a["\u0275\u0275element"](16,"span",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"span",18),a["\u0275\u0275listener"]("mousedown",(function(t){a["\u0275\u0275restoreView"](i);var e=a["\u0275\u0275nextContext"](2);return e.startMove(t,e.moveTypes.Resize,"top")}))("touchstart",(function(t){a["\u0275\u0275restoreView"](i);var e=a["\u0275\u0275nextContext"](2);return e.startMove(t,e.moveTypes.Resize,"top")})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](18,"span",19),a["\u0275\u0275listener"]("mousedown",(function(t){a["\u0275\u0275restoreView"](i);var e=a["\u0275\u0275nextContext"](2);return e.startMove(t,e.moveTypes.Resize,"right")}))("touchstart",(function(t){a["\u0275\u0275restoreView"](i);var e=a["\u0275\u0275nextContext"](2);return e.startMove(t,e.moveTypes.Resize,"right")})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"span",20),a["\u0275\u0275listener"]("mousedown",(function(t){a["\u0275\u0275restoreView"](i);var e=a["\u0275\u0275nextContext"](2);return e.startMove(t,e.moveTypes.Resize,"bottom")}))("touchstart",(function(t){a["\u0275\u0275restoreView"](i);var e=a["\u0275\u0275nextContext"](2);return e.startMove(t,e.moveTypes.Resize,"bottom")})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](20,"span",21),a["\u0275\u0275listener"]("mousedown",(function(t){a["\u0275\u0275restoreView"](i);var e=a["\u0275\u0275nextContext"](2);return e.startMove(t,e.moveTypes.Resize,"left")}))("touchstart",(function(t){a["\u0275\u0275restoreView"](i);var e=a["\u0275\u0275nextContext"](2);return e.startMove(t,e.moveTypes.Resize,"left")})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementContainerEnd"]()}}function d(t,e){if(1&t){var i=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",6),a["\u0275\u0275listener"]("keydown",(function(t){return a["\u0275\u0275restoreView"](i),a["\u0275\u0275nextContext"]().keyboardAccess(t)})),a["\u0275\u0275elementStart"](1,"div",7),a["\u0275\u0275listener"]("mousedown",(function(t){a["\u0275\u0275restoreView"](i);var e=a["\u0275\u0275nextContext"]();return e.startMove(t,e.moveTypes.Move)}))("touchstart",(function(t){a["\u0275\u0275restoreView"](i);var e=a["\u0275\u0275nextContext"]();return e.startMove(t,e.moveTypes.Move)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](2,g,21,0,"ng-container",8),a["\u0275\u0275elementEnd"]()}if(2&t){var r=a["\u0275\u0275nextContext"]();a["\u0275\u0275styleProp"]("top",r.cropper.y1,"px")("left",r.cropper.x1,"px")("width",r.cropper.x2-r.cropper.x1,"px")("height",r.cropper.y2-r.cropper.y1,"px")("margin-left","center"===r.alignImage?r.marginLeft:null)("visibility",r.imageVisible?"visible":"hidden"),a["\u0275\u0275classProp"]("rounded",r.roundCropper),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!r.hideResizeSquares)}}var m={Move:"move",Resize:"resize",Pinch:"pinch"},f=function(){var t=function(){function t(){e(this,t)}return r(t,[{key:"crop",value:function(t,e,i,r){var n=this.getImagePosition(t,e,i,r),o=n.x2-n.x1,a=n.y2-n.y1,s=document.createElement("canvas");s.width=o,s.height=a;var c=s.getContext("2d");if(c){null!=r.backgroundColor&&(c.fillStyle=r.backgroundColor,c.fillRect(0,0,o,a));var h=(r.transform.scale||1)*(r.transform.flipH?-1:1),p=(r.transform.scale||1)*(r.transform.flipV?-1:1),l=e.transformed;c.setTransform(h,0,0,p,l.size.width/2,l.size.height/2),c.translate(-n.x1/h,-n.y1/p),c.rotate((r.transform.rotate||0)*Math.PI/180),c.drawImage(l.image,-l.size.width/2,-l.size.height/2);var u={width:o,height:a,imagePosition:n,cropperPosition:Object.assign({},i)};r.containWithinAspectRatio&&(u.offsetImagePosition=this.getOffsetImagePosition(t,e,i,r));var g=this.getResizeRatio(o,a,r);return 1!==g&&(u.width=Math.round(o*g),u.height=r.maintainAspectRatio?Math.round(u.width/r.aspectRatio):Math.round(a*g),function(t,e,i){var r=t.width,n=t.height,o=r/(e=Math.round(e)),a=n/(i=Math.round(i)),s=Math.ceil(o/2),c=Math.ceil(a/2),h=t.getContext("2d");if(h){for(var p=h.getImageData(0,0,r,n),l=h.createImageData(e,i),u=p.data,g=l.data,d=0;d<i;d++)for(var m=0;m<e;m++){var f=4*(m+d*e),v=d*a,x=0,y=0,M=0,w=0,A=0,S=0,C=0,b=Math.floor(m*o),z=Math.floor(d*a),R=Math.ceil((m+1)*o),I=Math.ceil((d+1)*a);R=Math.min(R,r),I=Math.min(I,n);for(var P=z;P<I;P++)for(var E=Math.abs(v-P)/c,k=m*o,O=E*E,_=b;_<R;_++){var W=Math.abs(k-_)/s,H=Math.sqrt(O+W*W);if(!(H>=1)){var B=4*(_+P*r);C+=(x=2*H*H*H-3*H*H+1)*u[B+3],M+=x,u[B+3]<255&&(x=x*u[B+3]/250),w+=x*u[B],A+=x*u[B+1],S+=x*u[B+2],y+=x}}g[f]=w/y,g[f+1]=A/y,g[f+2]=S/y,g[f+3]=C/M}t.width=e,t.height=i,h.putImageData(l,0,0)}}(s,u.width,u.height)),u.base64=s.toDataURL("image/"+r.format,this.getQuality(r)),u}}},{key:"getImagePosition",value:function(t,e,i,r){var n=e.transformed.size.width/t.nativeElement.offsetWidth,o={x1:Math.round(i.x1*n),y1:Math.round(i.y1*n),x2:Math.round(i.x2*n),y2:Math.round(i.y2*n)};return r.containWithinAspectRatio||(o.x1=Math.max(o.x1,0),o.y1=Math.max(o.y1,0),o.x2=Math.min(o.x2,e.transformed.size.width),o.y2=Math.min(o.y2,e.transformed.size.height)),o}},{key:"getOffsetImagePosition",value:function(t,e,i,r){var n,o,a=e.transformed.size.width/t.nativeElement.offsetWidth;(r.canvasRotation+e.exifTransform.rotate)%2?(n=(e.transformed.size.width-e.original.size.height)/2,o=(e.transformed.size.height-e.original.size.width)/2):(n=(e.transformed.size.width-e.original.size.width)/2,o=(e.transformed.size.height-e.original.size.height)/2);var s={x1:Math.round(i.x1*a)-n,y1:Math.round(i.y1*a)-o,x2:Math.round(i.x2*a)-n,y2:Math.round(i.y2*a)-o};return r.containWithinAspectRatio||(s.x1=Math.max(s.x1,0),s.y1=Math.max(s.y1,0),s.x2=Math.min(s.x2,e.transformed.size.width),s.y2=Math.min(s.y2,e.transformed.size.height)),s}},{key:"getResizeRatio",value:function(t,e,i){var r=i.resizeToWidth/t,n=i.resizeToHeight/e,o=new Array;i.resizeToWidth>0&&o.push(r),i.resizeToHeight>0&&o.push(n);var a=0===o.length?1:Math.min.apply(Math,o);return a>1&&!i.onlyScaleDown?a:Math.min(a,1)}},{key:"getQuality",value:function(t){return Math.min(1,Math.max(0,t.imageQuality/100))}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(a["\u0275\u0275defineInjectable"])({factory:function(){return new t},token:t,providedIn:"root"}),t}(),v=function(){function t(){e(this,t),this.format="png",this.maintainAspectRatio=!0,this.transform={},this.aspectRatio=1,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.cropperMaxHeight=0,this.cropperMaxWidth=0,this.cropperStaticWidth=0,this.cropperStaticHeight=0,this.canvasRotation=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.backgroundColor=void 0,this.containWithinAspectRatio=!1,this.hideResizeSquares=!1,this.alignImage="center",this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.cropperScaledMaxWidth=20,this.cropperScaledMaxHeight=20,this.stepSize=this.initialStepSize}return r(t,[{key:"setOptions",value:function(t){var e=this;Object.keys(t).filter((function(t){return t in e})).forEach((function(i){return e[i]=t[i]})),this.validateOptions()}},{key:"setOptionsFromChanges",value:function(t){var e=this;Object.keys(t).filter((function(t){return t in e})).forEach((function(i){return e[i]=t[i].currentValue})),this.validateOptions()}},{key:"validateOptions",value:function(){if(this.maintainAspectRatio&&!this.aspectRatio)throw new Error("`aspectRatio` should > 0 when `maintainAspectRatio` is enabled")}}]),t}(),x=function(){var i=function(){function i(){e(this,i),this.autoRotateSupported=new Promise((function(t){var e=new Image;e.onload=function(){t(1===e.width&&2===e.height)},e.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q=="}))}return r(i,[{key:"loadImageFile",value:function(t,e){var i=this;return new Promise((function(r,n){var o=new FileReader;o.onload=function(o){i.loadImage(o.target.result,t.type,e).then(r).catch(n)},o.readAsDataURL(t)}))}},{key:"loadImage",value:function(t,e,i){return this.isValidImageType(e)?this.loadBase64Image(t,i):Promise.reject(new Error("Invalid image type"))}},{key:"isValidImageType",value:function(t){return/image\/(png|jpg|jpeg|bmp|gif|tiff|webp)/.test(t)}},{key:"loadImageFromURL",value:function(t,e){var i=this;return new Promise((function(r,n){var o=new Image;o.onerror=function(){return n},o.onload=function(){var t=document.createElement("canvas"),n=t.getContext("2d");t.width=o.width,t.height=o.height,n.drawImage(o,0,0),i.loadBase64Image(t.toDataURL(),e).then(r)},o.crossOrigin="anonymous",o.src=t}))}},{key:"loadBase64Image",value:function(t,e){var i=this;return new Promise((function(e,i){var r=new Image;r.onload=function(){return e({originalImage:r,originalBase64:t})},r.onerror=i,r.src=t})).then((function(t){return i.transformImageBase64(t,e)}))}},{key:"transformImageBase64",value:function(e,i){return Object(s.a)(this,void 0,void 0,t().mark((function r(){var n,o;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.autoRotateSupported;case 2:return n=t.sent,t.next=5,function(t){switch("string"==typeof t&&(t=function(t){var e=new DataView(function(t){t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var e=atob(t),i=e.length,r=new Uint8Array(i),n=0;n<i;n++)r[n]=e.charCodeAt(n);return r.buffer}(t));if(65496!=e.getUint16(0,!1))return-2;for(var i=e.byteLength,r=2;r<i;){if(e.getUint16(r+2,!1)<=8)return-1;var n=e.getUint16(r,!1);if(r+=2,65505==n){if(1165519206!=e.getUint32(r+=2,!1))return-1;var o=18761==e.getUint16(r+=6,!1);r+=e.getUint32(r+4,o);var a=e.getUint16(r,o);r+=2;for(var s=0;s<a;s++)if(274==e.getUint16(r+12*s,o))return e.getUint16(r+12*s+8,o)}else{if(65280!=(65280&n))break;r+=e.getUint16(r,!1)}}return-1}(t)),t){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}(n?-1:e.originalBase64);case 5:return o=t.sent,t.abrupt("return",e.originalImage&&e.originalImage.complete?this.transformLoadedImage({original:{base64:e.originalBase64,image:e.originalImage,size:{width:e.originalImage.naturalWidth,height:e.originalImage.naturalHeight}},exifTransform:o},i):Promise.reject(new Error("No image loaded")));case 7:case"end":return t.stop()}}),r,this)})))}},{key:"transformLoadedImage",value:function(e,i){return Object(s.a)(this,void 0,void 0,t().mark((function r(){var n,o,a,s,c,h,p;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.canvasRotation+e.exifTransform.rotate,o={width:e.original.image.naturalWidth,height:e.original.image.naturalHeight},0!==n||e.exifTransform.flip||i.containWithinAspectRatio){t.next=3;break}return t.abrupt("return",{original:{base64:e.original.base64,image:e.original.image,size:Object.assign({},o)},transformed:{base64:e.original.base64,image:e.original.image,size:Object.assign({},o)},exifTransform:e.exifTransform});case 3:return a=this.getTransformedSize(o,e.exifTransform,i),(s=document.createElement("canvas")).width=a.width,s.height=a.height,(c=s.getContext("2d")).setTransform(e.exifTransform.flip?-1:1,0,0,1,s.width/2,s.height/2),c.rotate(Math.PI*(n/2)),c.drawImage(e.original.image,-o.width/2,-o.height/2),h=s.toDataURL(),t.next=10,this.loadImageFromBase64(h);case 10:return p=t.sent,t.abrupt("return",{original:{base64:e.original.base64,image:e.original.image,size:Object.assign({},o)},transformed:{base64:h,image:p,size:{width:p.width,height:p.height}},exifTransform:e.exifTransform});case 12:case"end":return t.stop()}}),r,this)})))}},{key:"loadImageFromBase64",value:function(t){return new Promise((function(e,i){var r=new Image;r.onload=function(){return e(r)},r.onerror=i,r.src=t}))}},{key:"getTransformedSize",value:function(t,e,i){var r=i.canvasRotation+e.rotate;if(i.containWithinAspectRatio){if(r%2){var n=t.height/i.aspectRatio;return{width:Math.max(t.height,t.width*i.aspectRatio),height:Math.max(t.width,n)}}var o=t.width/i.aspectRatio;return{width:Math.max(t.width,t.height*i.aspectRatio),height:Math.max(t.height,o)}}return r%2?{height:t.width,width:t.height}:{width:t.width,height:t.height}}}]),i}();return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Object(a["\u0275\u0275defineInjectable"])({factory:function(){return new i},token:i,providedIn:"root"}),i}(),y=function(){var t=function(){function t(){e(this,t)}return r(t,[{key:"resetCropperPosition",value:function(t,e,i){var r=t.nativeElement;if(i.cropperStaticHeight&&i.cropperStaticWidth)e.x1=0,e.x2=r.offsetWidth>i.cropperStaticWidth?i.cropperStaticWidth:r.offsetWidth,e.y1=0,e.y2=r.offsetHeight>i.cropperStaticHeight?i.cropperStaticHeight:r.offsetHeight;else{var n=Math.min(i.cropperScaledMaxWidth,r.offsetWidth),o=Math.min(i.cropperScaledMaxHeight,r.offsetHeight);if(i.maintainAspectRatio)if(n/i.aspectRatio<o){e.x1=0,e.x2=n;var a=n/i.aspectRatio;e.y1=(r.offsetHeight-a)/2,e.y2=e.y1+a}else{e.y1=0,e.y2=o;var s=o*i.aspectRatio;e.x1=(r.offsetWidth-s)/2,e.x2=e.x1+s}else e.x1=0,e.x2=n,e.y1=0,e.y2=o}}},{key:"move",value:function(t,e,i){var r=this.getClientX(t)-e.clientX,n=this.getClientY(t)-e.clientY;i.x1=e.x1+r,i.y1=e.y1+n,i.x2=e.x2+r,i.y2=e.y2+n}},{key:"resize",value:function(t,e,i,r,n){var o=this.getClientX(t)-e.clientX,a=this.getClientY(t)-e.clientY;switch(e.position){case"left":i.x1=Math.min(Math.max(e.x1+o,i.x2-n.cropperScaledMaxWidth),i.x2-n.cropperScaledMinWidth);break;case"topleft":i.x1=Math.min(Math.max(e.x1+o,i.x2-n.cropperScaledMaxWidth),i.x2-n.cropperScaledMinWidth),i.y1=Math.min(Math.max(e.y1+a,i.y2-n.cropperScaledMaxHeight),i.y2-n.cropperScaledMinHeight);break;case"top":i.y1=Math.min(Math.max(e.y1+a,i.y2-n.cropperScaledMaxHeight),i.y2-n.cropperScaledMinHeight);break;case"topright":i.x2=Math.max(Math.min(e.x2+o,i.x1+n.cropperScaledMaxWidth),i.x1+n.cropperScaledMinWidth),i.y1=Math.min(Math.max(e.y1+a,i.y2-n.cropperScaledMaxHeight),i.y2-n.cropperScaledMinHeight);break;case"right":i.x2=Math.max(Math.min(e.x2+o,i.x1+n.cropperScaledMaxWidth),i.x1+n.cropperScaledMinWidth);break;case"bottomright":i.x2=Math.max(Math.min(e.x2+o,i.x1+n.cropperScaledMaxWidth),i.x1+n.cropperScaledMinWidth),i.y2=Math.max(Math.min(e.y2+a,i.y1+n.cropperScaledMaxHeight),i.y1+n.cropperScaledMinHeight);break;case"bottom":i.y2=Math.max(Math.min(e.y2+a,i.y1+n.cropperScaledMaxHeight),i.y1+n.cropperScaledMinHeight);break;case"bottomleft":i.x1=Math.min(Math.max(e.x1+o,i.x2-n.cropperScaledMaxWidth),i.x2-n.cropperScaledMinWidth),i.y2=Math.max(Math.min(e.y2+a,i.y1+n.cropperScaledMaxHeight),i.y1+n.cropperScaledMinHeight);break;case"center":var s=t.scale,c=Math.min(Math.max(n.cropperScaledMinWidth,Math.abs(e.x2-e.x1)*s),n.cropperScaledMaxWidth),h=Math.min(Math.max(n.cropperScaledMinHeight,Math.abs(e.y2-e.y1)*s),n.cropperScaledMaxHeight);i.x1=e.clientX-c/2,i.x2=e.clientX+c/2,i.y1=e.clientY-h/2,i.y2=e.clientY+h/2,i.x1<0?(i.x2-=i.x1,i.x1=0):i.x2>r.width&&(i.x1-=i.x2-r.width,i.x2=r.width),i.y1<0?(i.y2-=i.y1,i.y1=0):i.y2>r.height&&(i.y1-=i.y2-r.height,i.y2=r.height)}n.maintainAspectRatio&&this.checkAspectRatio(e.position,i,r,n)}},{key:"checkAspectRatio",value:function(t,e,i,r){var n=0,o=0;switch(t){case"top":e.x2=e.x1+(e.y2-e.y1)*r.aspectRatio,n=Math.max(e.x2-i.width,0),o=Math.max(0-e.y1,0),(n>0||o>0)&&(e.x2-=o*r.aspectRatio>n?o*r.aspectRatio:n,e.y1+=o*r.aspectRatio>n?o:n/r.aspectRatio);break;case"bottom":e.x2=e.x1+(e.y2-e.y1)*r.aspectRatio,n=Math.max(e.x2-i.width,0),o=Math.max(e.y2-i.height,0),(n>0||o>0)&&(e.x2-=o*r.aspectRatio>n?o*r.aspectRatio:n,e.y2-=o*r.aspectRatio>n?o:n/r.aspectRatio);break;case"topleft":e.y1=e.y2-(e.x2-e.x1)/r.aspectRatio,n=Math.max(0-e.x1,0),o=Math.max(0-e.y1,0),(n>0||o>0)&&(e.x1+=o*r.aspectRatio>n?o*r.aspectRatio:n,e.y1+=o*r.aspectRatio>n?o:n/r.aspectRatio);break;case"topright":e.y1=e.y2-(e.x2-e.x1)/r.aspectRatio,n=Math.max(e.x2-i.width,0),o=Math.max(0-e.y1,0),(n>0||o>0)&&(e.x2-=o*r.aspectRatio>n?o*r.aspectRatio:n,e.y1+=o*r.aspectRatio>n?o:n/r.aspectRatio);break;case"right":case"bottomright":e.y2=e.y1+(e.x2-e.x1)/r.aspectRatio,n=Math.max(e.x2-i.width,0),o=Math.max(e.y2-i.height,0),(n>0||o>0)&&(e.x2-=o*r.aspectRatio>n?o*r.aspectRatio:n,e.y2-=o*r.aspectRatio>n?o:n/r.aspectRatio);break;case"left":case"bottomleft":e.y2=e.y1+(e.x2-e.x1)/r.aspectRatio,n=Math.max(0-e.x1,0),o=Math.max(e.y2-i.height,0),(n>0||o>0)&&(e.x1+=o*r.aspectRatio>n?o*r.aspectRatio:n,e.y2-=o*r.aspectRatio>n?o:n/r.aspectRatio);break;case"center":e.x2=e.x1+(e.y2-e.y1)*r.aspectRatio,e.y2=e.y1+(e.x2-e.x1)/r.aspectRatio;var a=Math.max(0-e.x1,0),s=Math.max(e.x2-i.width,0),c=Math.max(e.y2-i.height,0),h=Math.max(0-e.y1,0);(a>0||s>0||c>0||h>0)&&(e.x1+=c*r.aspectRatio>a?c*r.aspectRatio:a,e.x2-=h*r.aspectRatio>s?h*r.aspectRatio:s,e.y1+=h*r.aspectRatio>s?h:s/r.aspectRatio,e.y2-=c*r.aspectRatio>a?c:a/r.aspectRatio)}}},{key:"getClientX",value:function(t){return(t.touches&&t.touches[0]?t.touches[0].clientX:t.clientX)||0}},{key:"getClientY",value:function(t){return(t.touches&&t.touches[0]?t.touches[0].clientY:t.clientY)||0}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(a["\u0275\u0275defineInjectable"])({factory:function(){return new t},token:t,providedIn:"root"}),t}(),M=function(){var t=function(){function t(i,r,n,o,s){e(this,t),this.cropService=i,this.cropperPositionService=r,this.loadImageService=n,this.sanitizer=o,this.cd=s,this.Hammer="undefined"!=typeof window?window.Hammer:null,this.settings=new v,this.setImageMaxSizeRetries=0,this.marginLeft="0px",this.moveTypes=m,this.imageVisible=!1,this.format=this.settings.format,this.transform={},this.maintainAspectRatio=this.settings.maintainAspectRatio,this.aspectRatio=this.settings.aspectRatio,this.resizeToWidth=this.settings.resizeToWidth,this.resizeToHeight=this.settings.resizeToHeight,this.cropperMinWidth=this.settings.cropperMinWidth,this.cropperMinHeight=this.settings.cropperMinHeight,this.cropperMaxHeight=this.settings.cropperMaxHeight,this.cropperMaxWidth=this.settings.cropperMaxWidth,this.cropperStaticWidth=this.settings.cropperStaticWidth,this.cropperStaticHeight=this.settings.cropperStaticHeight,this.canvasRotation=this.settings.canvasRotation,this.initialStepSize=this.settings.initialStepSize,this.roundCropper=this.settings.roundCropper,this.onlyScaleDown=this.settings.onlyScaleDown,this.imageQuality=this.settings.imageQuality,this.autoCrop=this.settings.autoCrop,this.backgroundColor=this.settings.backgroundColor,this.containWithinAspectRatio=this.settings.containWithinAspectRatio,this.hideResizeSquares=this.settings.hideResizeSquares,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage=this.settings.alignImage,this.disabled=!1,this.imageCropped=new a.EventEmitter,this.startCropImage=new a.EventEmitter,this.imageLoaded=new a.EventEmitter,this.cropperReady=new a.EventEmitter,this.loadImageFailed=new a.EventEmitter,this.reset()}return r(t,[{key:"ngOnChanges",value:function(t){var e=this;this.onChangesUpdateSettings(t),this.onChangesInputImage(t),this.loadedImage&&this.loadedImage.original.image.complete&&(t.containWithinAspectRatio||t.canvasRotation)&&this.loadImageService.transformLoadedImage(this.loadedImage,this.settings).then((function(t){return e.setLoadedImage(t)})).catch((function(t){return e.loadImageError(t)})),(t.cropper||t.maintainAspectRatio||t.aspectRatio)&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.maintainAspectRatio&&(t.maintainAspectRatio||t.aspectRatio)?this.resetCropperPosition():t.cropper&&(this.checkCropperPosition(!1),this.doAutoCrop()),this.cd.markForCheck()),t.transform&&(this.transform=this.transform||{},this.setCssTransform(),this.doAutoCrop())}},{key:"onChangesUpdateSettings",value:function(t){this.settings.setOptionsFromChanges(t),this.settings.cropperStaticHeight&&this.settings.cropperStaticWidth&&this.settings.setOptions({hideResizeSquares:!0,cropperMinWidth:this.settings.cropperStaticWidth,cropperMinHeight:this.settings.cropperStaticHeight,cropperMaxHeight:this.settings.cropperStaticHeight,cropperMaxWidth:this.settings.cropperStaticWidth,maintainAspectRatio:!1})}},{key:"onChangesInputImage",value:function(t){(t.imageChangedEvent||t.imageURL||t.imageBase64||t.imageFile)&&this.reset(),t.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),t.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),t.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),t.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}},{key:"isValidImageChangedEvent",value:function(){return this.imageChangedEvent&&this.imageChangedEvent.target&&this.imageChangedEvent.target.files&&this.imageChangedEvent.target.files.length>0}},{key:"setCssTransform",value:function(){this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle("scaleX("+(this.transform.scale||1)*(this.transform.flipH?-1:1)+")scaleY("+(this.transform.scale||1)*(this.transform.flipV?-1:1)+")rotate("+(this.transform.rotate||0)+"deg)")}},{key:"ngOnInit",value:function(){this.settings.stepSize=this.initialStepSize,this.activatePinchGesture()}},{key:"reset",value:function(){this.imageVisible=!1,this.loadedImage=null,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}},{key:"loadImageFile",value:function(t){var e=this;this.loadImageService.loadImageFile(t,this.settings).then((function(t){return e.setLoadedImage(t)})).catch((function(t){return e.loadImageError(t)}))}},{key:"loadBase64Image",value:function(t){var e=this;this.loadImageService.loadBase64Image(t,this.settings).then((function(t){return e.setLoadedImage(t)})).catch((function(t){return e.loadImageError(t)}))}},{key:"loadImageFromURL",value:function(t){var e=this;this.loadImageService.loadImageFromURL(t,this.settings).then((function(t){return e.setLoadedImage(t)})).catch((function(t){return e.loadImageError(t)}))}},{key:"setLoadedImage",value:function(t){this.loadedImage=t,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(t.transformed.base64),this.cd.markForCheck()}},{key:"loadImageError",value:function(t){console.error(t),this.loadImageFailed.emit()}},{key:"imageLoadedInView",value:function(){var t=this;null!=this.loadedImage&&(this.imageLoaded.emit(this.loadedImage),this.setImageMaxSizeRetries=0,setTimeout((function(){return t.checkImageMaxSizeRecursively()})))}},{key:"checkImageMaxSizeRecursively",value:function(){var t=this;this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.resetCropperPosition(),this.cropperReady.emit(Object.assign({},this.maxSize)),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout((function(){return t.checkImageMaxSizeRecursively()}),50))}},{key:"sourceImageLoaded",value:function(){return this.sourceImage&&this.sourceImage.nativeElement&&this.sourceImage.nativeElement.offsetWidth>0}},{key:"onResize",value:function(){this.loadedImage&&(this.resizeCropperPosition(),this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize())}},{key:"activatePinchGesture",value:function(){if(this.Hammer){var t=new this.Hammer(this.wrapper.nativeElement);t.get("pinch").set({enable:!0}),t.on("pinchmove",this.onPinch.bind(this)),t.on("pinchend",this.pinchStop.bind(this)),t.on("pinchstart",this.startPinch.bind(this))}else Object(a.isDevMode)()&&console.warn("[NgxImageCropper] Could not find HammerJS - Pinch Gesture won't work")}},{key:"resizeCropperPosition",value:function(){var t=this.sourceImage.nativeElement;this.maxSize.width===t.offsetWidth&&this.maxSize.height===t.offsetHeight||(this.cropper.x1=this.cropper.x1*t.offsetWidth/this.maxSize.width,this.cropper.x2=this.cropper.x2*t.offsetWidth/this.maxSize.width,this.cropper.y1=this.cropper.y1*t.offsetHeight/this.maxSize.height,this.cropper.y2=this.cropper.y2*t.offsetHeight/this.maxSize.height)}},{key:"resetCropperPosition",value:function(){this.cropperPositionService.resetCropperPosition(this.sourceImage,this.cropper,this.settings),this.doAutoCrop(),this.imageVisible=!0}},{key:"keyboardAccess",value:function(t){this.changeKeyboardStepSize(t),this.keyboardMoveCropper(t)}},{key:"changeKeyboardStepSize",value:function(t){t.key>="1"&&t.key<="9"&&(this.settings.stepSize=+t.key)}},{key:"keyboardMoveCropper",value:function(t){if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key)){var e=t.shiftKey?m.Resize:m.Move,i=t.altKey?function(t){switch(t){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";default:return"right"}}(t.key):function(t){switch(t){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";default:return"left"}}(t.key),r=function(t,e){switch(t){case"ArrowUp":return{clientX:0,clientY:-1*e};case"ArrowRight":return{clientX:e,clientY:0};case"ArrowDown":return{clientX:0,clientY:e};default:return{clientX:-1*e,clientY:0}}}(t.key,this.settings.stepSize);t.preventDefault(),t.stopPropagation(),this.startMove({clientX:0,clientY:0},e,i),this.moveImg(r),this.moveStop()}}},{key:"startMove",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.moveStart&&this.moveStart.active&&this.moveStart.type===m.Pinch||(t.preventDefault&&t.preventDefault(),this.moveStart=Object.assign({active:!0,type:e,position:i,clientX:this.cropperPositionService.getClientX(t),clientY:this.cropperPositionService.getClientY(t)},this.cropper))}},{key:"startPinch",value:function(t){this.safeImgDataUrl&&(t.preventDefault&&t.preventDefault(),this.moveStart=Object.assign({active:!0,type:m.Pinch,position:"center",clientX:this.cropper.x1+(this.cropper.x2-this.cropper.x1)/2,clientY:this.cropper.y1+(this.cropper.y2-this.cropper.y1)/2},this.cropper))}},{key:"moveImg",value:function(t){this.moveStart.active&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===m.Move?(this.cropperPositionService.move(t,this.moveStart,this.cropper),this.checkCropperPosition(!0)):this.moveStart.type===m.Resize&&(this.cropperStaticWidth||this.cropperStaticHeight||this.cropperPositionService.resize(t,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1)),this.cd.detectChanges())}},{key:"onPinch",value:function(t){this.moveStart.active&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===m.Pinch&&(this.cropperPositionService.resize(t,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1)),this.cd.detectChanges())}},{key:"setMaxSize",value:function(){if(this.sourceImage){var t=this.sourceImage.nativeElement;this.maxSize.width=t.offsetWidth,this.maxSize.height=t.offsetHeight,this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}},{key:"setCropperScaledMinSize",value:function(){this.loadedImage&&this.loadedImage.transformed&&this.loadedImage.transformed.image?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.settings.cropperScaledMinWidth=20,this.settings.cropperScaledMinHeight=20)}},{key:"setCropperScaledMinWidth",value:function(){this.settings.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.loadedImage.transformed.image.width*this.maxSize.width):20}},{key:"setCropperScaledMinHeight",value:function(){this.settings.cropperScaledMinHeight=this.maintainAspectRatio?Math.max(20,this.settings.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?Math.max(20,this.cropperMinHeight/this.loadedImage.transformed.image.height*this.maxSize.height):20}},{key:"setCropperScaledMaxSize",value:function(){if(this.loadedImage&&this.loadedImage.transformed&&this.loadedImage.transformed.image){var t=this.loadedImage.transformed.size.width/this.maxSize.width;this.settings.cropperScaledMaxWidth=this.cropperMaxWidth>20?this.cropperMaxWidth/t:this.maxSize.width,this.settings.cropperScaledMaxHeight=this.cropperMaxHeight>20?this.cropperMaxHeight/t:this.maxSize.height,this.maintainAspectRatio&&(this.settings.cropperScaledMaxWidth>this.settings.cropperScaledMaxHeight*this.aspectRatio?this.settings.cropperScaledMaxWidth=this.settings.cropperScaledMaxHeight*this.aspectRatio:this.settings.cropperScaledMaxWidth<this.settings.cropperScaledMaxHeight*this.aspectRatio&&(this.settings.cropperScaledMaxHeight=this.settings.cropperScaledMaxWidth/this.aspectRatio))}else this.settings.cropperScaledMaxWidth=this.maxSize.width,this.settings.cropperScaledMaxHeight=this.maxSize.height}},{key:"checkCropperPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.cropper.x1<0&&(this.cropper.x2-=t?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=t?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=t?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=t?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}},{key:"moveStop",value:function(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}},{key:"pinchStop",value:function(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}},{key:"doAutoCrop",value:function(){this.autoCrop&&this.crop()}},{key:"crop",value:function(){if(this.sourceImage&&this.sourceImage.nativeElement&&null!=this.loadedImage.transformed.image){this.startCropImage.emit();var t=this.cropService.crop(this.sourceImage,this.loadedImage,this.cropper,this.settings);return null!=t&&this.imageCropped.emit(t),t}return null}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](f),a["\u0275\u0275directiveInject"](y),a["\u0275\u0275directiveInject"](x),a["\u0275\u0275directiveInject"](h.b),a["\u0275\u0275directiveInject"](a.ChangeDetectorRef))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["image-cropper"]],viewQuery:function(t,e){var i;(1&t&&(a["\u0275\u0275viewQuery"](p,3),a["\u0275\u0275viewQuery"](l,1)),2&t)&&(a["\u0275\u0275queryRefresh"](i=a["\u0275\u0275loadQuery"]())&&(e.wrapper=i.first),a["\u0275\u0275queryRefresh"](i=a["\u0275\u0275loadQuery"]())&&(e.sourceImage=i.first))},hostVars:4,hostBindings:function(t,e){1&t&&a["\u0275\u0275listener"]("resize",(function(){return e.onResize()}),!1,a["\u0275\u0275resolveWindow"])("mousemove",(function(t){return e.moveImg(t)}),!1,a["\u0275\u0275resolveDocument"])("touchmove",(function(t){return e.moveImg(t)}),!1,a["\u0275\u0275resolveDocument"])("mouseup",(function(){return e.moveStop()}),!1,a["\u0275\u0275resolveDocument"])("touchend",(function(){return e.moveStop()}),!1,a["\u0275\u0275resolveDocument"]),2&t&&(a["\u0275\u0275styleProp"]("text-align",e.alignImage),a["\u0275\u0275classProp"]("disabled",e.disabled))},inputs:{format:"format",transform:"transform",maintainAspectRatio:"maintainAspectRatio",aspectRatio:"aspectRatio",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",cropperMaxHeight:"cropperMaxHeight",cropperMaxWidth:"cropperMaxWidth",cropperStaticWidth:"cropperStaticWidth",cropperStaticHeight:"cropperStaticHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",autoCrop:"autoCrop",backgroundColor:"backgroundColor",containWithinAspectRatio:"containWithinAspectRatio",hideResizeSquares:"hideResizeSquares",cropper:"cropper",alignImage:"alignImage",disabled:"disabled",imageChangedEvent:"imageChangedEvent",imageURL:"imageURL",imageBase64:"imageBase64",imageFile:"imageFile"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed"},features:[a["\u0275\u0275NgOnChangesFeature"]],decls:5,vars:10,consts:[["wrapper",""],["class","source-image",3,"src","visibility","transform","load",4,"ngIf"],[1,"overlay"],["class","cropper","tabindex","0",3,"rounded","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],[1,"source-image",3,"src","load"],["sourceImage",""],["tabindex","0",1,"cropper",3,"keydown"],[1,"move",3,"mousedown","touchstart"],[4,"ngIf"],[1,"resize","topleft",3,"mousedown","touchstart"],[1,"square"],[1,"resize","top"],[1,"resize","topright",3,"mousedown","touchstart"],[1,"resize","right"],[1,"resize","bottomright",3,"mousedown","touchstart"],[1,"resize","bottom"],[1,"resize","bottomleft",3,"mousedown","touchstart"],[1,"resize","left"],[1,"resize-bar","top",3,"mousedown","touchstart"],[1,"resize-bar","right",3,"mousedown","touchstart"],[1,"resize-bar","bottom",3,"mousedown","touchstart"],[1,"resize-bar","left",3,"mousedown","touchstart"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div",null,0),a["\u0275\u0275template"](2,u,2,5,"img",1),a["\u0275\u0275element"](3,"div",2),a["\u0275\u0275template"](4,d,3,15,"div",3),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275styleProp"]("background",e.imageVisible&&e.backgroundColor),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",e.safeImgDataUrl),a["\u0275\u0275advance"](1),a["\u0275\u0275styleProp"]("width",e.maxSize.width,"px")("height",e.maxSize.height,"px")("margin-left","center"===e.alignImage?e.marginLeft:null),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.imageVisible))},directives:[c.o],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;position:relative}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color,#fff) solid 100vw;top:0;left:0}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:0 0;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color,rgba(255,255,255,.3)) solid 100vw;touch-action:none}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";top:0;bottom:0;left:0;right:0;pointer-events:none;border:1px dashed;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]:focus   .move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]{display:inline-block;background:#53535c;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw rgba(255,255,255,.3);box-shadow:0 0 0 100vw var(--cropper-outline-color,rgba(255,255,255,.3))}@media (orientation:portrait){[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]{outline-width:100vh}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh rgba(255,255,255,.3);box-shadow:0 0 0 100vh var(--cropper-outline-color,rgba(255,255,255,.3))}}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]{display:none}'],changeDetection:0}),t}(),w=function(){var t=r((function t(){e(this,t)}));return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=a["\u0275\u0275defineInjector"]({imports:[[c.c]]}),t}();function A(t){for(var e=t.split(","),i=e[0].replace("data:","").replace(";base64",""),r=atob(e[1]),n=new ArrayBuffer(r.length),o=new Uint8Array(n),a=0;a<r.length;a+=1)o[a]=r.charCodeAt(a);return new Blob([n],{type:i})}},nTPY:function(t,i,n){"use strict";n.d(i,"a",(function(){return c})),n("+RMD");var o,a=n("8Y7J"),s=n("SVse"),c=((o=r((function t(){e(this,t)}))).\u0275fac=function(t){return new(t||o)},o.\u0275mod=a["\u0275\u0275defineNgModule"]({type:o}),o.\u0275inj=a["\u0275\u0275defineInjector"]({imports:[[s.c]]}),o)}}])}();
//# sourceMappingURL=default~minga-app-src-app-landing2-Landing2-module~minga-app-src-app-overlays-student-id-overlay-stu~b71d6fb3-es5.js.map
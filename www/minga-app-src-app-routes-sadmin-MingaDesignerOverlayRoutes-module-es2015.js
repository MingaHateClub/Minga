(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{DwB7:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("mrSG"),a=n("8Y7J"),r=n("Fawd"),o=n("2Vo4"),l=n("TNy8");let s=(()=>{class e{constructor(e){this.bannerLibrary=e,this._old=!0,this.bannerCategoryStasSubject=new o.a({categoryCounts:{}}),this.bannerCategoryStats$=this.bannerCategoryStasSubject.asObservable()}markOld(){this._old=!0}refreshIfOld(){this._old&&(this._old=!1,this.refreshBannerCategoryStats())}refreshBannerCategoryStats(){return Object(i.a)(this,void 0,void 0,(function*(){const e={categoryCounts:{}},t=new r.BannerLibraryGetStatsRequest,n=(yield this.bannerLibrary.getStats(t)).getStats().getCategoryCountList();for(const i of n){const t=i.getCategory(),n=i.getCategoryCount();e.categoryCounts[t]=n}this.bannerCategoryStasSubject.next(e)}))}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275inject"](l.BannerLibrary))},e.\u0275prov=a["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},Pzyi:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("Fawd");function a(){return[{name:"Art",value:i.Banner.Category.ART},{name:"Causes",value:i.Banner.Category.CAUSES},{name:"Food",value:i.Banner.Category.FOOD},{name:"General",value:i.Banner.Category.GENERAL},{name:"School Events",value:i.Banner.Category.SCHOOL_EVENTS},{name:"Seasonal",value:i.Banner.Category.SEASONAL},{name:"Sports",value:i.Banner.Category.SPORTS}]}},gtkb:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("SVse"),a=n("8Y7J"),r=n("s7LF"),o=n("Tj54");n("qftF");let l=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({imports:[[r.m,i.c,o.b]]}),e})()},lN98:function(e,t,n){"use strict";const i=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],a=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],r=(e,t)=>{let n=e;return"string"==typeof t?n=e.toLocaleString(t):!0===t&&(n=e.toLocaleString()),n};e.exports=(e,t)=>{if(!Number.isFinite(e))throw new TypeError(`Expected a finite number, got ${typeof e}: ${e}`);const n=(t=Object.assign({bits:!1},t)).bits?a:i;if(t.signed&&0===e)return" 0 "+n[0];const o=e<0,l=o?"-":t.signed?"+":"";if(o&&(e=-e),e<1)return l+r(e,t.locale)+" "+n[0];const s=Math.min(Math.floor(Math.log10(e)/3),n.length-1);return e=Number((e/Math.pow(1e3,s)).toPrecision(3)),l+r(e,t.locale)+" "+n[s]}},"mN/7":function(e,t,n){"use strict";n.r(t),n.d(t,"MingaDesignerOverlayRoutesModule",(function(){return Ct}));var i=n("8Y7J"),a=n("iInd"),r=n("6ra5"),o=n("vCJc"),l=n("mrSG"),s=n("PLeU"),d=n("lJxs"),c=n("pLZG"),g=n("B3cG"),m=n("GFah"),u=n("UWMR"),h=n("BxgO"),p=n("SVse"),f=n("uplL"),v=n("s7LF"),S=n("o1f5"),x=n("pMoy"),C=n("4avL"),y=n("Fudl"),b=n("sj4O");function k(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"mg-overlay-nav-item",3),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onClose()})),i["\u0275\u0275text"](2," Close "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"mg-overlay-nav-item",4),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onSave()})),i["\u0275\u0275text"](4," Save "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("disabled",e.saveDisabled)}}function w(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mg-button",11),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).deletePhoto()})),i["\u0275\u0275text"](1," Delete "),i["\u0275\u0275elementStart"](2,"mg-icon"),i["\u0275\u0275text"](3,"trash-o"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function I(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div",7),i["\u0275\u0275elementStart"](2,"h2",8),i["\u0275\u0275text"](3,"Stock Photo Publish Options"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"p"),i["\u0275\u0275elementStart"](5,"mat-checkbox",9),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).archived=t}))("ngModelChange",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).onInputUpdated()})),i["\u0275\u0275text"](6,"Archived"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](7,w,4,0,"mg-button",10),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngModel",e.archived),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",e.photoId)}}function M(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"ng-form"),i["\u0275\u0275elementStart"](1,"mg-file-input-upload",5),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().imageAsset=t}))("ngModelChange",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onInputUpdated()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](2,I,8,2,"ng-container",6),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("previewSize",500)("customTitleText",e.photoId?"Upload new Photo to replace existing":"Upload Photo here")("ngModel",e.imageAsset),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.imageAsset)}}function V(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",12),i["\u0275\u0275element"](1,"mg-spinner",13),i["\u0275\u0275elementEnd"]())}let E=(()=>{class e{constructor(e,t,n,i,a,r,o){this.fileUploadManager=e,this.mingaDesigner=t,this.rootService=n,this.router=i,this.route=a,this.mingaSnack=r,this._cdr=o,this._initHappened=!1,this._saving=!1,this._metadataEdited=!1,this.imageAsset="",this.photoId="",this.initialStockPhoto=null,this.fetchingStockPhoto=!1,this.archived=!1,this.svgSize="",this.route.params.pipe(Object(d.a)(e=>e.photoId||""),Object(c.a)(e=>!!e)).subscribe(e=>Object(l.a)(this,void 0,void 0,(function*(){this.fetchingStockPhoto=!0,o.markForCheck();try{const t=yield this.mingaDesigner.getStockPhotoById(e);t&&(yield this.setupInitialValues(t))}finally{this.fetchingStockPhoto=!1,o.markForCheck()}}))),this.route.params.subscribe(e=>this.photoId=e.photoId||"")}get saveDisabled(){if(!this.imageAsset||this._saving)return!0;if(this.photoId){const e=Object.keys(this.getChangedFields()).length>0;if(!this._metadataEdited&&!e)return!0}return!1}ngAfterViewInit(){this._initHappened=!0}onOverlayClose(){return!confirm("Are you sure you want to close? Your progress will be lost")}setupInitialValues(e){return Object(l.a)(this,void 0,void 0,(function*(){this.imageAsset=e.photoUrl,this.archived=e.archived,this.initialStockPhoto=e}))}registerOnOverlayConfig(e){e({containWithinViewport:!0})}onClose(){Object(s.a)(this.router)}onInputUpdated(){this._cdr.markForCheck()}deletePhoto(){return Object(l.a)(this,void 0,void 0,(function*(){try{yield this.rootService.addLoadingPromise(this.mingaDesigner.deleteStockPhoto(this.photoId)),this.mingaSnack.open("Photo deleted!"),this.onClose()}catch(e){this.mingaSnack.open("Error occurred while deleting photo..."),console.error("Delete Stock Photo error: ",e)}}))}_onSave(){return Object(l.a)(this,void 0,void 0,(function*(){if(this.photoId){const e=this.getChangedFields();this.imageAsset&&(e.photoUrl=this.imageAsset),yield this.mingaDesigner.updateStockPhoto(this.photoId,Object.assign({},e))}else this.photoId=yield this.mingaDesigner.createStockPhoto({photoUrl:this.imageAsset,archived:this.archived});return!0}))}getChangedFields(){var e;const t={};return this.archived!==(null===(e=this.initialStockPhoto)||void 0===e?void 0:e.archived)&&(t.archived=this.archived),t}onSave(){return Object(l.a)(this,void 0,void 0,(function*(){if(!this._saving)try{this._saving=!0,this._cdr.markForCheck(),(yield this.rootService.addLoadingPromise(this._onSave()))&&(yield Object(s.a)(this.router))}finally{this._saving=!1,this._cdr.markForCheck()}}))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](g.d),i["\u0275\u0275directiveInject"](o.MingaDesignerService),i["\u0275\u0275directiveInject"](m.a),i["\u0275\u0275directiveInject"](a.g),i["\u0275\u0275directiveInject"](a.a),i["\u0275\u0275directiveInject"](u.b),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ng-component"]],decls:5,vars:4,consts:[[4,"mgOverlayStructure","mgOverlayStructureRegion"],[4,"ngIf","ngIfElse"],["fetchingStockPhotoTpl",""],["icon","close",1,"mg-align-left",3,"click"],["icon","save-o",1,"mg-align-right",3,"disabled","click"],["required","","name","image","previewAspectRatio","1:1",3,"previewSize","customTitleText","ngModel","ngModelChange"],[4,"ngIf"],[1,"padded"],[1,"mg-headline2"],["name","archived",3,"ngModel","ngModelChange"],["color","warn",3,"click",4,"ngIf"],["color","warn",3,"click"],[1,"mg-centered"],["diameter","25","thickness","4"]],template:function(e,t){if(1&e&&(i["\u0275\u0275template"](0,k,5,1,"div",0),i["\u0275\u0275elementStart"](1,"div"),i["\u0275\u0275template"](2,M,3,4,"ng-form",1),i["\u0275\u0275template"](3,V,2,0,"ng-template",null,2,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275reference"](4);i["\u0275\u0275property"]("mgOverlayStructure",!0)("mgOverlayStructureRegion","top"),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!t.fetchingStockPhoto)("ngIfElse",e)}},directives:[h.a,p.o,f.a,v.v,S.a,v.B,v.t,v.w,x.a,C.a,y.a,b.a],styles:[".padded[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px;padding-bottom:16px}"],changeDetection:0}),e})();var _=n("u9T3"),O=n("Q2Ze"),D=n("e6WT"),F=n("CO6v"),T=n("p+4T"),j=n("gtkb"),P=n("HxU+"),A=n("ls3q"),B=n("CL15"),R=n("7Tcv");let L=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[B.a,j.a,P.a,R.a,F.a,A.a,_.a,T.a,p.c,v.m,O.f,D.c,x.b]]}),e})();function $(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"mg-overlay-nav-item",3),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onClose()})),i["\u0275\u0275text"](2," Close "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"mg-overlay-nav-item",4),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onSave()})),i["\u0275\u0275text"](4," Save "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("disabled",e.saveDisabled)}}function U(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mg-button",11),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).deleteSticker()})),i["\u0275\u0275text"](1," Delete "),i["\u0275\u0275elementStart"](2,"mg-icon"),i["\u0275\u0275text"](3,"trash-o"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function z(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div",7),i["\u0275\u0275elementStart"](2,"h2",8),i["\u0275\u0275text"](3,"Stock Sticker Publish Options"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"p"),i["\u0275\u0275elementStart"](5,"mat-checkbox",9),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).archived=t}))("ngModelChange",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).onInputUpdated()})),i["\u0275\u0275text"](6,"Archived"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](7,U,4,0,"mg-button",10),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngModel",e.archived),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",e.stickerId)}}function N(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"ng-form"),i["\u0275\u0275elementStart"](1,"mg-file-input-upload",5),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().imageAsset=t}))("ngModelChange",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onInputUpdated()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](2,z,8,2,"ng-container",6),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("previewSize",500)("customTitleText",e.stickerId?"Upload new Sticker to replace existing":"Upload Sticker here")("ngModel",e.imageAsset),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.imageAsset)}}function H(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",12),i["\u0275\u0275element"](1,"mg-spinner",13),i["\u0275\u0275elementEnd"]())}let q=(()=>{class e{constructor(e,t,n,i,a,r,o){this.fileUploadManager=e,this.mingaDesigner=t,this.rootService=n,this.router=i,this.route=a,this.mingaSnack=r,this._cdr=o,this._initHappened=!1,this._saving=!1,this._metadataEdited=!1,this.imageAsset="",this.stickerId="",this.initialStockSticker=null,this.fetchingStockSticker=!1,this.archived=!1,this.svgSize="",this.route.params.pipe(Object(d.a)(e=>e.stickerId||""),Object(c.a)(e=>!!e)).subscribe(e=>Object(l.a)(this,void 0,void 0,(function*(){this.fetchingStockSticker=!0,o.markForCheck();try{const t=yield this.mingaDesigner.getStockStickerById(e);t&&(yield this.setupInitialValues(t))}finally{this.fetchingStockSticker=!1,o.markForCheck()}}))),this.route.params.subscribe(e=>this.stickerId=e.stickerId||"")}get saveDisabled(){if(!this.imageAsset||this._saving)return!0;if(this.stickerId){const e=Object.keys(this.getChangedFields()).length>0;if(!this._metadataEdited&&!e)return!0}return!1}ngAfterViewInit(){this._initHappened=!0}onOverlayClose(){return!confirm("Are you sure you want to close? Your progress will be lost")}setupInitialValues(e){return Object(l.a)(this,void 0,void 0,(function*(){this.imageAsset=e.stickerUrl,this.archived=e.archived,this.initialStockSticker=e}))}registerOnOverlayConfig(e){e({containWithinViewport:!0})}onClose(){Object(s.a)(this.router)}onInputUpdated(){this._cdr.markForCheck()}deleteSticker(){return Object(l.a)(this,void 0,void 0,(function*(){try{yield this.rootService.addLoadingPromise(this.mingaDesigner.deleteStockSticker(this.stickerId)),this.mingaSnack.open("Sticker deleted!"),this.onClose()}catch(e){this.mingaSnack.open("Error occurred while deleting sticker..."),console.error("Delete Stock Sticker error: ",e)}}))}_onSave(){return Object(l.a)(this,void 0,void 0,(function*(){if(this.stickerId){const e=this.getChangedFields();this.imageAsset&&(e.stickerUrl=this.imageAsset),yield this.mingaDesigner.updateStockSticker(this.stickerId,Object.assign({},e))}else this.stickerId=yield this.mingaDesigner.createStockSticker({stickerUrl:this.imageAsset,archived:this.archived});return!0}))}getChangedFields(){var e;const t={};return this.archived!==(null===(e=this.initialStockSticker)||void 0===e?void 0:e.archived)&&(t.archived=this.archived),t}onSave(){return Object(l.a)(this,void 0,void 0,(function*(){if(!this._saving)try{this._saving=!0,this._cdr.markForCheck(),(yield this.rootService.addLoadingPromise(this._onSave()))&&(yield Object(s.a)(this.router))}finally{this._saving=!1,this._cdr.markForCheck()}}))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](g.d),i["\u0275\u0275directiveInject"](o.MingaDesignerService),i["\u0275\u0275directiveInject"](m.a),i["\u0275\u0275directiveInject"](a.g),i["\u0275\u0275directiveInject"](a.a),i["\u0275\u0275directiveInject"](u.b),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ng-component"]],decls:5,vars:4,consts:[[4,"mgOverlayStructure","mgOverlayStructureRegion"],[4,"ngIf","ngIfElse"],["fetchingStockStickerTpl",""],["icon","close",1,"mg-align-left",3,"click"],["icon","save-o",1,"mg-align-right",3,"disabled","click"],["required","","name","image","previewAspectRatio","1:1",3,"previewSize","customTitleText","ngModel","ngModelChange"],[4,"ngIf"],[1,"padded"],[1,"mg-headline2"],["name","archived",3,"ngModel","ngModelChange"],["color","warn",3,"click",4,"ngIf"],["color","warn",3,"click"],[1,"mg-centered"],["diameter","25","thickness","4"]],template:function(e,t){if(1&e&&(i["\u0275\u0275template"](0,$,5,1,"div",0),i["\u0275\u0275elementStart"](1,"div"),i["\u0275\u0275template"](2,N,3,4,"ng-form",1),i["\u0275\u0275template"](3,H,2,0,"ng-template",null,2,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275reference"](4);i["\u0275\u0275property"]("mgOverlayStructure",!0)("mgOverlayStructureRegion","top"),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!t.fetchingStockSticker)("ngIfElse",e)}},directives:[h.a,p.o,f.a,v.v,S.a,v.B,v.t,v.w,x.a,C.a,y.a,b.a],styles:[".padded[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px;padding-bottom:16px}"],changeDetection:0}),e})();var G=n("Q3ix"),W=n("osae"),Q=n("NiVs"),Y=n("jaBy"),J=n("gO7L"),K=n("lN98"),Z=n.n(K),X=n("Cfvw"),ee=n("IzEk"),te=n("tS1D"),ne=n("vkgz"),ie=n("KNwe"),ae=n("NchO"),re=n("c1WO"),oe=n("T0RT"),le=n("i1AJ"),se=n("TAkL"),de=n("M9ds"),ce=n("8sFK"),ge=n("A7V7"),me=n("as3c"),ue=n("o4Yh");function he(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"mat-form-field",11),i["\u0275\u0275elementStart"](2,"mat-label"),i["\u0275\u0275text"](3,"Default Value"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"textarea",12),i["\u0275\u0275listener"]("blur",(function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"]().onSlotDefaultValueBlur(t)}))("focus",(function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"]().onSlotDefaultValueFocus(t)}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().$implicit.defaultValue=t}))("ngModelChange",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).triggerChange()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"mg-button",13),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275nextContext"]().$implicit,n=i["\u0275\u0275nextContext"]();return t.defaultValue={text:t.defaultValue},n.triggerChange()})),i["\u0275\u0275text"](6," Use styles "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](),t=e.index,n=e.$implicit;i["\u0275\u0275advance"](4),i["\u0275\u0275propertyInterpolate1"]("name","slot_default_value_",t,""),i["\u0275\u0275property"]("ngModel",n.defaultValue)}}function pe(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-form-field",11),i["\u0275\u0275elementStart"](1,"mat-label"),i["\u0275\u0275text"](2,"Default Value"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"textarea",12),i["\u0275\u0275listener"]("blur",(function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"]().onSlotDefaultValueBlur(t)}))("focus",(function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"]().onSlotDefaultValueFocus(t)}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().$implicit.defaultValue.text=t}))("ngModelChange",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).triggerChange()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"mg-alignment-selector",14),i["\u0275\u0275listener"]("ngModelChange",(function(t){i["\u0275\u0275restoreView"](e);const n=i["\u0275\u0275nextContext"]().$implicit,a=i["\u0275\u0275nextContext"]();return n.defaultValue.textAnchor=a.alignmentToTextAnchor(t),a.triggerChange()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"mat-form-field",11),i["\u0275\u0275elementStart"](6,"mat-label"),i["\u0275\u0275text"](7,"Default Color"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"textarea",12),i["\u0275\u0275listener"]("blur",(function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"]().onSlotDefaultValueBlur(t)}))("focus",(function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"]().onSlotDefaultValueFocus(t)}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().$implicit.defaultValue.color=t}))("ngModelChange",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).triggerChange()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"mat-form-field",11),i["\u0275\u0275elementStart"](10,"mat-label"),i["\u0275\u0275text"](11,"Default Font Size"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"textarea",12),i["\u0275\u0275listener"]("blur",(function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"]().onSlotDefaultValueBlur(t)}))("focus",(function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"]().onSlotDefaultValueFocus(t)}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().$implicit.defaultValue.fontSize=t}))("ngModelChange",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).triggerChange()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"mg-svg-font-selector",15),i["\u0275\u0275listener"]("selectedFontFamilyChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().$implicit.defaultValue.fontFamily=t}))("selectedFontFamilyChange",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).triggerChange()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"mat-checkbox",16),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().$implicit.defaultValue.italic=t}))("ngModelChange",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).triggerChange()})),i["\u0275\u0275text"](15,"Italic"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"mat-checkbox",16),i["\u0275\u0275listener"]("ngModelChange",(function(t){i["\u0275\u0275restoreView"](e);const n=i["\u0275\u0275nextContext"]().$implicit,a=i["\u0275\u0275nextContext"]();return n.defaultValue.fontWeight=t?700:400,a.triggerChange()})),i["\u0275\u0275text"](17,"Bold"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](18,"mg-button",13),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275nextContext"]().$implicit,n=i["\u0275\u0275nextContext"]();return t.defaultValue=t.defaultValue.text,n.triggerChange()})),i["\u0275\u0275text"](19," Clear styles "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](),t=e.index,n=e.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](3),i["\u0275\u0275propertyInterpolate1"]("name","slot_default_value_",t,""),i["\u0275\u0275property"]("ngModel",n.defaultValue.text),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate1"]("name","slot_text_anchor_",t,""),i["\u0275\u0275property"]("ngModel",a.textAnchorToAlignment(n.defaultValue.textAnchor)),i["\u0275\u0275advance"](4),i["\u0275\u0275propertyInterpolate1"]("name","slot_default_color_",t,""),i["\u0275\u0275property"]("ngModel",n.defaultValue.color),i["\u0275\u0275advance"](4),i["\u0275\u0275propertyInterpolate1"]("name","slot_default_font_size_",t,""),i["\u0275\u0275property"]("ngModel",n.defaultValue.fontSize),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("selectedFontFamily",n.defaultValue.fontFamily),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",n.defaultValue.italic),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngModel",700==n.defaultValue.fontWeight)}}function fe(e,t){if(1&e&&(i["\u0275\u0275template"](0,he,7,2,"ng-container",9),i["\u0275\u0275template"](1,pe,20,11,"ng-template",null,10,i["\u0275\u0275templateRefExtractor"])),2&e){const e=t.$implicit,n=i["\u0275\u0275reference"](2),a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngIf",a.isString(e.defaultValue))("ngIfElse",n)}}function ve(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"pre"),i["\u0275\u0275text"](1,"Cannot edit image slot default value"),i["\u0275\u0275elementEnd"]())}function Se(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"pre"),i["\u0275\u0275text"](1,"Cannot edit background slot default value"),i["\u0275\u0275elementEnd"]())}function xe(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}const Ce=function(e,t){return{$implicit:e,index:t}};function ye(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,xe,1,0,"ng-container",6),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](2),t=e.$implicit,n=e.index;i["\u0275\u0275nextContext"]();const a=i["\u0275\u0275reference"](1);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",a)("ngTemplateOutletContext",i["\u0275\u0275pureFunction2"](2,Ce,t,n))}}function be(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function ke(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,be,1,0,"ng-container",6),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](2),t=e.$implicit,n=e.index;i["\u0275\u0275nextContext"]();const a=i["\u0275\u0275reference"](5);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",a)("ngTemplateOutletContext",i["\u0275\u0275pureFunction2"](2,Ce,t,n))}}function we(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function Ie(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,we,1,0,"ng-container",6),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](2),t=e.$implicit,n=e.index;i["\u0275\u0275nextContext"]();const a=i["\u0275\u0275reference"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",a)("ngTemplateOutletContext",i["\u0275\u0275pureFunction2"](2,Ce,t,n))}}function Me(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,ye,2,5,"ng-container",18),i["\u0275\u0275template"](2,ke,2,5,"ng-container",18),i["\u0275\u0275template"](3,Ie,2,5,"ng-container",18),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]().$implicit,t=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.isTextSlot(e.fullId,e.defaultValue)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.isBackgroundSlot(e.fullId,e.defaultValue)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.isImageSlot(e.fullId,e.defaultValue))}}function Ve(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-form-field",11),i["\u0275\u0275elementStart"](1,"mat-label"),i["\u0275\u0275text"](2,"Default Value"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"textarea",19),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"mg-button",13),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275nextContext"]().$implicit,n=i["\u0275\u0275nextContext"]();return t.defaultValue="",n.triggerChange()})),i["\u0275\u0275text"](6," Clear Default Value "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]().$implicit,t=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"]("Too large to edit (",t.getSlotDefaultValueSize(e),")")}}function Ee(e,t){if(1&e&&(i["\u0275\u0275template"](0,Me,4,3,"ng-container",9),i["\u0275\u0275template"](1,Ve,7,1,"ng-template",null,17,i["\u0275\u0275templateRefExtractor"])),2&e){const e=t.$implicit,n=i["\u0275\u0275reference"](2),a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngIf",a.getSlotDefaultValueSize(e)<1500)("ngIfElse",n)}}const _e=function(){return{standalone:!0}};function Oe(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"mat-form-field",23),i["\u0275\u0275elementStart"](2,"mat-label"),i["\u0275\u0275text"](3,"Line Height"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"input",24),i["\u0275\u0275listener"]("blur",(function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"](3).onSlotDefaultValueBlur(t)}))("focus",(function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"](3).onSlotDefaultValueFocus(t)}))("ngModelChange",(function(e){return t.ngIf.textLineHeight=e}))("ngModelChange",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](4).triggerChange()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=t.ngIf;i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngModelOptions",i["\u0275\u0275pureFunction0"](2,_e))("ngModel",e.textLineHeight)}}function De(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function Fe(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-expansion-panel"),i["\u0275\u0275elementStart"](1,"mat-expansion-panel-header"),i["\u0275\u0275elementStart"](2,"mat-panel-title"),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"mat-panel-description"),i["\u0275\u0275text"](5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"mat-form-field",11),i["\u0275\u0275elementStart"](7,"mat-label"),i["\u0275\u0275text"](8,"Input Label"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"input",22),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.$implicit.inputLabel=e}))("ngModelChange",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).triggerChange()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](10,Oe,5,3,"ng-container",18),i["\u0275\u0275template"](11,De,1,0,"ng-container",6),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,a=i["\u0275\u0275nextContext"](2).slotTitlePrefix;i["\u0275\u0275nextContext"]();const r=i["\u0275\u0275reference"](7);i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](a+"#"+(n+1)),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](e.inputLabel),i["\u0275\u0275advance"](4),i["\u0275\u0275propertyInterpolate1"]("name","slot_label_",n,""),i["\u0275\u0275propertyInterpolate"]("placeholder",a+(n+1)),i["\u0275\u0275property"]("ngModel",e.inputLabel),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.textOptions),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",r)("ngTemplateOutletContext",i["\u0275\u0275pureFunction2"](8,Ce,e,n))}}function Te(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"ng-form"),i["\u0275\u0275elementStart"](1,"mat-accordion"),i["\u0275\u0275template"](2,Fe,12,11,"mat-expansion-panel",21),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",e)}}function je(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"p",25),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]().slotTitlePrefix;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" No ",e," Slots Available in .svg file ")}}function Pe(e,t){if(1&e&&(i["\u0275\u0275template"](0,Te,3,1,"ng-form",9),i["\u0275\u0275template"](1,je,2,1,"ng-template",null,20,i["\u0275\u0275templateRefExtractor"])),2&e){const e=t.$implicit,n=i["\u0275\u0275reference"](2);i["\u0275\u0275property"]("ngIf",e.length>0)("ngIfElse",n)}}function Ae(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function Be(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function Re(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}const Le=function(e){return{$implicit:e,slotTitlePrefix:"Text "}},$e=function(e){return{$implicit:e,slotTitlePrefix:"Background "}},Ue=function(e){return{$implicit:e,slotTitlePrefix:"Image "}};function ze(e){switch(e){case"start":return"left";case"end":return"right";case"middle":return"center"}return"left"}function Ne(e){switch(e){case"left":return"start";case"right":return"end";case"center":return"middle"}return"start"}let He=(()=>{class e{constructor(){this.prettyBytes=Z.a,this.textAnchorToAlignment=ze,this.alignmentToTextAnchor=Ne,this.isString=e=>"string"==typeof e,this.isTextSlot=se.DesignedSvgData.isText,this.isBackgroundSlot=se.DesignedSvgData.isBackground,this.isImageSlot=se.DesignedSvgData.isImage,this.designedSvgMetadata={backgroundSlots:[],imageSlots:[],textSlots:[]},this.designedSvgMetadataChange=new i.EventEmitter,this.slotDefaultValueInputFocus=new i.EventEmitter,this.slotDefaultValueInputBlur=new i.EventEmitter}onSlotDefaultValueFocus(e){this.slotDefaultValueInputFocus.emit(e)}onSlotDefaultValueBlur(e){this.slotDefaultValueInputBlur.emit(e)}triggerChange(){this.designedSvgMetadataChange.emit(this.designedSvgMetadata)}getSlotDefaultValueSize(e){if(e.defaultValue){if(se.DesignedSvgData.isText(e.fullId,e.defaultValue))return"string"==typeof e.defaultValue?e.defaultValue.length:e.defaultValue.text.length;if(se.DesignedSvgData.isImage(e.fullId,e.defaultValue))return e.defaultValue.length;if(se.DesignedSvgData.isBackground(e.fullId,e.defaultValue)){if("string"==typeof e.defaultValue)return e.defaultValue.length;if("src"in e.defaultValue)return e.defaultValue.src.length}}return 0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-designed-svg-metadata-editor"]],inputs:{designedSvgMetadata:"designedSvgMetadata"},outputs:{designedSvgMetadataChange:"designedSvgMetadataChange",slotDefaultValueInputFocus:"slotDefaultValueInputFocus",slotDefaultValueInputBlur:"slotDefaultValueInputBlur"},decls:17,vars:12,consts:[["textValueInputTpl",""],["imageInputTpl",""],["backgroundInputTpl",""],["defaultValueInputTpl",""],["tabTpl",""],["label","Text"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["label","Background"],["label","Image"],[4,"ngIf","ngIfElse"],["extraTextValues",""],["mgFormField","","mgNoHintMargin",""],["matInput","","required","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","autocomplete","off",3,"name","ngModel","blur","focus","ngModelChange"],["type","outline",1,"small",3,"click"],[3,"name","ngModel","ngModelChange"],[3,"selectedFontFamily","selectedFontFamilyChange"],[3,"ngModel","ngModelChange"],["largeDefaultTpl",""],[4,"ngIf"],["matInput","","disabled","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","autocomplete","off"],["noSlots",""],[4,"ngFor","ngForOf"],["matInput","","required","","autocomplete","off",3,"name","placeholder","ngModel","ngModelChange"],["mgFormField",""],["matInput","","type","text","autocomplete","off",3,"ngModelOptions","ngModel","blur","focus","ngModelChange"],[1,"mg-centered"]],template:function(e,t){if(1&e&&(i["\u0275\u0275template"](0,fe,3,2,"ng-template",null,0,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](2,ve,2,0,"ng-template",null,1,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](4,Se,2,0,"ng-template",null,2,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](6,Ee,3,2,"ng-template",null,3,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](8,Pe,3,2,"ng-template",null,4,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementStart"](10,"mat-tab-group"),i["\u0275\u0275elementStart"](11,"mat-tab",5),i["\u0275\u0275template"](12,Ae,1,0,"ng-container",6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"mat-tab",7),i["\u0275\u0275template"](14,Be,1,0,"ng-container",6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](15,"mat-tab",8),i["\u0275\u0275template"](16,Re,1,0,"ng-container",6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275reference"](9);i["\u0275\u0275advance"](12),i["\u0275\u0275property"]("ngTemplateOutlet",e)("ngTemplateOutletContext",i["\u0275\u0275pureFunction1"](6,Le,t.designedSvgMetadata.textSlots)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngTemplateOutlet",e)("ngTemplateOutletContext",i["\u0275\u0275pureFunction1"](8,$e,t.designedSvgMetadata.backgroundSlots)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngTemplateOutlet",e)("ngTemplateOutletContext",i["\u0275\u0275pureFunction1"](10,Ue,t.designedSvgMetadata.imageSlots))}},directives:[de.c,de.a,p.t,p.o,O.d,le.a,O.h,D.b,ce.b,v.d,v.B,v.t,v.w,C.a,ge.a,me.b,x.a,v.v,ue.a,p.n,ue.c,ue.f,ue.g,ue.e],styles:["mat-accordion[_ngcontent-%COMP%]{display:block;min-height:2048px}"],changeDetection:0}),e})();var qe=n("ZTz/"),Ge=n("UhP/");const We=["svgViewer"],Qe=["svgManipulator"];function Ye(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"mg-overlay-nav-item",3),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onClose()})),i["\u0275\u0275text"](2," Close "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"mg-overlay-nav-item",4),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onSave()})),i["\u0275\u0275text"](4," Save "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("disabled",e.saveDisabled)}}function Je(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",7),i["\u0275\u0275elementStart"](1,"mg-designed-svg-viewer",8,9),i["\u0275\u0275listener"]("designedSvgMetadata",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).onDesignedSvgMetadata(t)}))("manipulationsChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).onManipulationsChanged(t)}))("designedSvgReady",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).onSvgReady()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"mg-designed-svg-viewer",10),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275reference"](2),t=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("manipulatorToolsEnabled",e.needsMigration?t.DesignedSvgManipulatorToolsEnabled.None:t.DesignedSvgManipulatorToolsEnabled.All)("designedSvgSrc",t.designedSvgSrc)("designedSvgData",t.designedSvgPreviewData)("designedSvgManipulations",t.manipulations_)("manipulations",t.manipulations_),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("designedSvgSrc",t.designedSvgSrc)("designedSvgData",t.designedSvgPreviewData)("designedSvgManipulations",t.manipulations_)}}function Ke(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"h2",11),i["\u0275\u0275text"](1," Upload an SVG to get started "),i["\u0275\u0275elementEnd"]())}function Ze(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,Je,5,8,"div",5),i["\u0275\u0275template"](2,Ke,2,0,"ng-template",null,6,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275reference"](3),t=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.designedSvgSrc)("ngIfElse",e)}}function Xe(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",15),i["\u0275\u0275elementStart"](1,"p"),i["\u0275\u0275text"](2," The current template is using an old format that requires migration to enable new features. "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"mg-button",24),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).migrateTemplate()})),i["\u0275\u0275text"](4,"Migrate Template"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function et(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",27),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275property"]("value",e.themeId),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.title," ")}}function tt(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-select",25),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).themeId=t})),i["\u0275\u0275template"](1,et,2,2,"mat-option",26),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.ngIf,n=i["\u0275\u0275nextContext"](3);i["\u0275\u0275property"]("ngModel",n.themeId),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",e)}}function nt(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,Xe,5,0,"div",14),i["\u0275\u0275elementStart"](2,"div",15),i["\u0275\u0275elementStart"](3,"p"),i["\u0275\u0275elementStart"](4,"a",16),i["\u0275\u0275text"](5,"Download SVG file"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"div",15),i["\u0275\u0275elementStart"](7,"h2",17),i["\u0275\u0275text"](8,"SVG Publish Options"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"p"),i["\u0275\u0275elementStart"](10,"mat-checkbox",18),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).archived=t}))("ngModelChange",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).onInputUpdated()})),i["\u0275\u0275text"](11,"Archived"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"mat-form-field",19),i["\u0275\u0275elementStart"](13,"mat-label"),i["\u0275\u0275text"](14,"Featured"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](15,"input",20),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).featured=t}))("ngModelChange",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).onInputUpdated()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"mat-hint"),i["\u0275\u0275text"](17," A higher number means it shows up higher on the list "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](18,"p"),i["\u0275\u0275text"](19," SVG Size: "),i["\u0275\u0275elementStart"](20,"strong"),i["\u0275\u0275text"](21),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"mat-form-field",19),i["\u0275\u0275elementStart"](23,"mat-label"),i["\u0275\u0275text"](24,"Theme"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](25,tt,2,2,"mat-select",21),i["\u0275\u0275pipe"](26,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](27,"h2",22),i["\u0275\u0275text"](28,"SVG Slot Metadata"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](29,"mg-designed-svg-metadata-editor",23),i["\u0275\u0275listener"]("slotDefaultValueInputFocus",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).onSlotDefaultValueFocus(t)}))("slotDefaultValueInputBlur",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).onSlotDefaultValueBlur(t)}))("designedSvgMetadataChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).designedSvgMetadata=t}))("designedSvgMetadataChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).onDesignedSvgMetadataEdited(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",null==e.svgViewer?null:e.svgViewer.needsMigration),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("href",e.designedSvgSrc,i["\u0275\u0275sanitizeUrl"]),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngModel",e.archived),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngModel",e.featured),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate"](e.svgSize),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](26,7,e.themes$)),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("designedSvgMetadata",e.designedSvgMetadata)}}const it=function(){return{standalone:!0}};function at(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"ng-form"),i["\u0275\u0275elementStart"](1,"mg-file-input",12),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().designedSvgFiles=t}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onDesignedSvgFilesChanged(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](2,nt,30,9,"ng-container",13),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("multiple",!1)("customTitleText",e.designedSvgSrc?"Upload new SVG to replace existing":"Upload SVG here")("ngModelOptions",i["\u0275\u0275pureFunction0"](5,it))("ngModel",e.designedSvgFiles),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.designedSvgSrc)}}function rt(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",28),i["\u0275\u0275element"](1,"mg-spinner",29),i["\u0275\u0275elementEnd"]())}let ot=(()=>{class e{constructor(e,t,n,i,a,r,o){this.fileUploadManager=e,this.mingaDesigner=t,this.rootService=n,this.router=i,this.route=a,this.mingaSnack=r,this._cdr=o,this.DesignedSvgManipulatorToolsEnabled=W.c,this._initHappened=!1,this._saving=!1,this._fromFile=!1,this._metadataEdited=!1,this._overrideSaveDisabled=!1,this._waitingForSvgFilesReady=!1,this.templateId="",this.initialTemplate=null,this.designedSvgImages=[],this.designedSvgSrc="",this.designedSvgFiles=[],this.designedSvgMetadata={backgroundSlots:[],imageSlots:[],textSlots:[]},this.designedSvgPreviewData={},this.fetchingTemplate=!1,this.archived=!1,this.featured=0,this.themeId="",this.svgSize="",this.manipulations_={},window.test=G.c,this.route.params.pipe(Object(d.a)(e=>e.templateId||""),Object(c.a)(e=>!!e)).subscribe({next:e=>this.onTemplateIdChange(e)}),this.route.params.subscribe(e=>this.templateId=e.templateId||""),this.themes$=Object(X.a)(this.mingaDesigner.getThemes())}get saveDisabled(){if(this._overrideSaveDisabled)return!1;if(!this.designedSvgSrc||this._saving||!this.themeId)return!0;if(this.templateId){const e=Object.keys(this.getChangedFields()).length>0;if(!this._metadataEdited&&!e)return!0}return!1}onWindowKeydown(e){"Control"===e.key&&(this._overrideSaveDisabled=!0,this._cdr.markForCheck())}onWindowKeyup(e){"Control"===e.key&&(this._overrideSaveDisabled=!1,this._cdr.markForCheck())}ngAfterViewInit(){this._initHappened=!0}onOverlayClose(){return!confirm("Are you sure you want to close? Your progress will be lost")}modifySvgViewer(e){this._initHappened&&this.svgViewers&&this.svgViewers.forEach(t=>{t.isSvgContainerReady()&&e(t)})}onTemplateIdChange(e){return Object(l.a)(this,void 0,void 0,(function*(){this.fetchingTemplate=!0,this._cdr.markForCheck();try{const t=yield this.mingaDesigner.getTemplateById(e);t&&(yield this.setupInitialValues(t),this._fromFile=!1)}finally{this.fetchingTemplate=!1,this._cdr.markForCheck()}}))}setupInitialValues(e){return Object(l.a)(this,void 0,void 0,(function*(){this.designedSvgSrc=e.templateSvgUrl,this.themeId=e.themeId,this.archived=e.archived,this.featured=e.featured,this.initialTemplate=e;const t=yield fetch(this.designedSvgSrc),n=yield t.blob();this.svgSize=Z()(n.size)}))}onDesignedSvgFilesChanged(e){this.designedSvgMetadata={backgroundSlots:[],imageSlots:[],textSlots:[]},this.rootService.addLoadingPromise(this._onDesignedSvgFilesChanged(e)),this.svgViewer?this.rootService.addLoadingPromise(this.svgViewer.designedSvgReady.pipe(Object(ee.a)(1),Object(te.a)(15e3)).toPromise().catch(e=>console.error(e)).then(()=>this.onAfterSvgFilesLoaded())):this._waitingForSvgFilesReady=!0}_onDesignedSvgFilesChanged(e){return Object(l.a)(this,void 0,void 0,(function*(){if(yield new Promise(e=>setTimeout(e,100)),this.designedSvgSrc="",e.length>0){this._fromFile=!0,this._metadataEdited=!0;const t=yield(e=>new Promise((t,n)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>t(i.result),i.onerror=e=>n(e)}))(e[0]);this.designedSvgSrc=t,this._cdr.markForCheck(),yield new Promise(e=>setTimeout(e,100))}}))}onAfterSvgFilesLoaded(){return Object(l.a)(this,void 0,void 0,(function*(){const e=this.svgViewer.getSvgElementReference();this.svgViewer.removeExcessiveSlotScale(),e.dataset.mingaSvg="v2",this.modifySvgViewer(e=>{e.normalizeSlotStyles(),e.setDefaultSlotValuesFromMarkup()}),this.svgViewer&&(this.designedSvgMetadata=this.svgViewer.getSlotMetadata(),this.useDefaultPreviewData()),this._cdr.markForCheck()}))}onSvgReady(){setTimeout(()=>{var e;this._fromFile&&(null===(e=this.svgViewer)||void 0===e?void 0:e.needsMigration)&&this.migrateTemplate(),this.modifySvgViewer(e=>e.forceManipulationsUpdate()),this._waitingForSvgFilesReady&&(this._waitingForSvgFilesReady=!1,this.onAfterSvgFilesLoaded())},0)}migrateTemplate(){this.modifySvgViewer(e=>{e.migrateTemplate()}),this._metadataEdited=!0,this._cdr.markForCheck()}useDefaultPreviewData(){const e=[...this.designedSvgMetadata.backgroundSlots,...this.designedSvgMetadata.imageSlots,...this.designedSvgMetadata.textSlots];for(const t of e)this.designedSvgPreviewData[t.fullId]=t.defaultValue;this.designedSvgPreviewData=Object.assign({},this.designedSvgPreviewData)}onDesignedSvgMetadata(e){this.designedSvgMetadata=e,this.designedSvgImages=[],this.modifySvgViewer(t=>{var n;const i=t.getSvgElementReference();let a=i.outerHTML.length;const r=i.querySelectorAll("image");for(let e=0;r.length>e;++e){const t=r.item(e);this.designedSvgImages.push(t);const n=t.getAttribute("href")||t.getAttribute("xlink:href");n&&n.startsWith("data:")&&(a-=n.length)}this.svgSize=Z()(a);const o=t.computeTextSlotLineHeights();for(const l in o)for(const t of e.textSlots){if(l!==t.fullId)continue;if(null===(n=t.textOptions)||void 0===n?void 0:n.textLineHeight)continue;const e=o[l],a=i.getElementById(l);a&&e&&(a.dataset.mingaLineHeight=`${e}`,t.textOptions&&(t.textOptions.textLineHeight=e))}}),this._cdr.markForCheck()}onDesignedSvgMetadataEdited(e){this._metadataEdited=!0;const t=[].concat(e.backgroundSlots,e.imageSlots,e.textSlots),n=this.designedSvgPreviewData.additionalSlots;this.designedSvgPreviewData={},n&&(this.designedSvgPreviewData.additionalSlots=n);for(const i of t)this.designedSvgPreviewData[i.fullId]=i.defaultValue;this.modifySvgViewer(t=>{t.applyNewMetadata(e)}),this._cdr.markForCheck()}registerOnOverlayConfig(e){e({wide:!0,containWithinViewport:!0})}onClose(){Object(s.a)(this.router)}onSlotDefaultValueFocus(e){this.modifySvgViewer(t=>{t.highlightSlot(e.fullId)})}onSlotDefaultValueBlur(e){this.modifySvgViewer(t=>{t.clearHighlight(e.fullId)})}onInputUpdated(){this._cdr.markForCheck()}onManipulationsChanged(e){this.manipulations_=Object.assign({},e),this._cdr.markForCheck()}_onSave(){return Object(l.a)(this,void 0,void 0,(function*(){let e="";this.modifySvgViewer(e=>{e.clearAllHighlights()});let t=[];const n=(e,t)=>Object(l.a)(this,void 0,void 0,(function*(){const n=new J.ProcessAssetRequest;n.setAssetId(t),n.setName("svg-template"),n.setQuality(80);const i=Object(G.c)(e.ownerSVGElement).rbox(),a=Object(G.c)(e).rbox(),r=Math.min(a.width,i.width);n.setWidth(Math.round(r/i.width*1420));const o=(yield this.fileUploadManager.processAsset(n).toPromise()).getPath(),l=Object(Y.b)(o);e.removeAttribute("href"),e.removeAttribute("xlink:href"),e.setAttribute("href",l)}));for(const i of this.designedSvgImages){const e=i.getAttribute("href")||i.getAttribute("xlink:href");if(e&&e.startsWith("data:")){let a="";const r=yield fetch(e),o=yield r.blob(),l=yield this.fileUploadManager.uploadFile(o,r.type,"template-image").pipe(Object(ne.a)(e=>a=e.assetId||a)).toPromise();if(!a){let e="";switch(l.errorCode){case J.ResponseCode.ASSET_INVALID_SIZE:e=`Failed to upload embeded image. File is too large (${Z()(o.size)})`;break;case J.ResponseCode.ASSET_INVALID_TYPE:e=`Failed to upload embeded image. Image is invalid type (${r.type})`;break;default:e=`Failed to upload embeded image. Status ${l.errorCode}`}return this.mingaSnack.open(e,"OK",{panelClass:"mg-snackbar-alert"}),!1}t.push(n(i,a))}}if(yield Promise.all(t),!this.templateId||this._metadataEdited||this._overrideSaveDisabled){const t=yield this.createSvgBlob();yield this.fileUploadManager.uploadFile(t,"image/svg+xml","template.svg").pipe(Object(ne.a)(t=>e=t.assetId||e)).toPromise()}if(this.templateId){const t=this.getChangedFields();e&&(t.templateSvgUrl=e),yield this.mingaDesigner.updateTemplate(this.templateId,Object.assign({},t))}else this.templateId=yield this.mingaDesigner.createTemplate({templateSvgUrl:e,themeId:this.themeId,archived:this.archived,featured:this.featured});return!0}))}getChangedFields(){var e,t,n;const i={};return this.themeId!==(null===(e=this.initialTemplate)||void 0===e?void 0:e.themeId)&&(i.themeId=this.themeId),this.archived!==(null===(t=this.initialTemplate)||void 0===t?void 0:t.archived)&&(i.archived=this.archived),this.featured!==(null===(n=this.initialTemplate)||void 0===n?void 0:n.featured)&&(i.featured=this.featured),i}createSvgBlob(){return Object(l.a)(this,void 0,void 0,(function*(){if(!this.svgViewer)throw new Error("Cannot create svg blob without svgViewer");const e=this.svgViewer.getSvgElementReference().cloneNode(!0);e.removeAttribute("xmlns:svgjs");let t=e.querySelector("style#svg-defaults");if(!t){t=document.createElementNS("http://www.w3.org/2000/svg","style"),t.id="svg-defaults";let n=e.querySelector("defs");n||(n=document.createElementNS("http://www.w3.org/2000/svg","defs"),e.insertBefore(n,e.firstElementChild)),n.firstElementChild?n.insertBefore(t,n.firstElementChild):n.appendChild(t)}let n="";for(const a of this.designedSvgMetadata.textSlots)if("string"!=typeof a.defaultValue){const e=a.defaultValue;"fontFamily"in e&&e.fontFamily&&(n=e.fontFamily)}n&&(t.innerHTML=`text{font-family:'${n}',sans-serif}}tspan{font-family:inherit}`);const i=[...this.designedSvgMetadata.backgroundSlots,...this.designedSvgMetadata.imageSlots,...this.designedSvgMetadata.textSlots];for(const a of i){const t=e.getElementById(a.fullId);t&&(t.dataset.mingaInputLabel=a.inputLabel)}return e.querySelectorAll(".minga-svg-manipulator-tool").forEach(e=>e.remove()),new Blob([e.outerHTML],{type:"image/svg+xml"})}))}onSave(){return Object(l.a)(this,void 0,void 0,(function*(){if(!this._saving)try{this._saving=!0,this._cdr.markForCheck(),(yield this.rootService.addLoadingPromise(this._onSave()))&&(yield Object(s.a)(this.router))}finally{this._saving=!1,this._cdr.markForCheck()}}))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](g.d),i["\u0275\u0275directiveInject"](o.MingaDesignerService),i["\u0275\u0275directiveInject"](m.a),i["\u0275\u0275directiveInject"](a.g),i["\u0275\u0275directiveInject"](a.a),i["\u0275\u0275directiveInject"](u.b),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&(i["\u0275\u0275viewQuery"](We,1),i["\u0275\u0275viewQuery"](Qe,1,W.a),i["\u0275\u0275viewQuery"](Q.a,1)),2&e){let e;i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.svgViewer=e.first),i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.svgManipulator=e.first),i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.svgViewers=e)}},hostBindings:function(e,t){1&e&&i["\u0275\u0275listener"]("keydown",(function(e){return t.onWindowKeydown(e)}),!1,i["\u0275\u0275resolveWindow"])("keyup",(function(e){return t.onWindowKeyup(e)}),!1,i["\u0275\u0275resolveWindow"])},decls:5,vars:6,consts:[[4,"mgOverlayStructure","mgOverlayStructureRegion"],[4,"ngIf","ngIfElse"],["fetchingTemplateTpl",""],["icon","close",1,"mg-align-left",3,"click"],["icon","save-o",1,"mg-align-right",3,"disabled","click"],["class","preview-section",4,"ngIf","ngIfElse"],["noSvgSelected",""],[1,"preview-section"],["mgDesignedSvgManipulator","",3,"manipulatorToolsEnabled","designedSvgSrc","designedSvgData","designedSvgManipulations","manipulations","designedSvgMetadata","manipulationsChange","designedSvgReady"],["svgViewer","","svgManipulator","mgDesignedSvgManipulator"],[1,"small-viewer",3,"designedSvgSrc","designedSvgData","designedSvgManipulations"],["mgOverlayHide.split-content-small","",1,"mg-headline2","abs-center-text"],["fileDetailText","","accept","image/svg+xml",3,"multiple","customTitleText","ngModelOptions","ngModel","ngModelChange"],[4,"ngIf"],["class","padded",4,"ngIf"],[1,"padded"],[3,"href"],[1,"mg-headline2"],["name","archived",3,"ngModel","ngModelChange"],["mgFormField",""],["matInput","","type","number","min","0","name","featured",3,"ngModel","ngModelChange"],["required","","name","theme",3,"ngModel","ngModelChange",4,"ngIf"],[1,"mg-headline2","padded"],[3,"designedSvgMetadata","slotDefaultValueInputFocus","slotDefaultValueInputBlur","designedSvgMetadataChange"],[3,"click"],["required","","name","theme",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mg-centered"],["diameter","25","thickness","4"]],template:function(e,t){if(1&e&&(i["\u0275\u0275template"](0,Ye,5,1,"div",0),i["\u0275\u0275template"](1,Ze,4,2,"ng-container",0),i["\u0275\u0275template"](2,at,3,6,"ng-form",1),i["\u0275\u0275template"](3,rt,2,0,"ng-template",null,2,i["\u0275\u0275templateRefExtractor"])),2&e){const e=i["\u0275\u0275reference"](4);i["\u0275\u0275property"]("mgOverlayStructure",!0)("mgOverlayStructureRegion","top"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("mgOverlayStructure",!0)("mgOverlayStructureRegion","split-content"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.fetchingTemplate)("ngIfElse",e)}},directives:[h.a,p.o,f.a,ie.a,ae.a,re.a,v.v,oe.a,v.t,v.w,x.a,O.d,le.a,O.h,D.b,v.y,v.d,O.g,He,C.a,qe.a,v.B,p.n,Ge.m,b.a],pipes:[p.b],styles:["[_nghost-%COMP%]{min-height:200px;display:block}mg-designed-svg-viewer[_ngcontent-%COMP%]{display:block;border-radius:6px;overflow:hidden;margin:16px;box-shadow:0 6px 16px rgba(0,0,0,.3);max-width:70%}mg-designed-svg-viewer.small-viewer[_ngcontent-%COMP%]{max-width:187px}.padded[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px}.preview-section[_ngcontent-%COMP%]{overflow:hidden;text-align:center;max-height:100vh;height:100%;position:-webkit-sticky;position:sticky;top:0}.abs-center-text[_ngcontent-%COMP%]{position:absolute;text-align:center;transform:translateY(-50%);top:50%;left:0;right:0}mg-icon.done-icon[_ngcontent-%COMP%]{color:#036}mg-icon.err-icon[_ngcontent-%COMP%]{color:#de1717}.font-status[_ngcontent-%COMP%]{--mg-icon-size:16px}.font-families[_ngcontent-%COMP%]{margin:8px 0}"],changeDetection:0}),e})();var lt=n("9F0b"),st=n("YjH6"),dt=n("Qne4"),ct=n("hpfr");let gt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[P.a,dt.a,F.a,ue.b,x.b,ct.b,p.c,v.m,O.f,D.c,de.g]]}),e})(),mt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[B.a,j.a,st.b,gt,Q.b,lt.c,P.a,A.a,R.a,F.a,_.a,W.b,p.c,v.m,qe.b,O.f,D.c,x.b]]}),e})();function ut(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1,"Update Theme"),i["\u0275\u0275elementEnd"]())}function ht(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1,"Create New Theme"),i["\u0275\u0275elementEnd"]())}function pt(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"mg-overlay-nav-item",6),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onClose()})),i["\u0275\u0275text"](2," Close "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"mg-overlay-nav-item",7),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onSave()})),i["\u0275\u0275template"](4,ut,2,0,"span",8),i["\u0275\u0275template"](5,ht,2,0,"ng-template",null,9,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275reference"](6),t=i["\u0275\u0275nextContext"](),n=i["\u0275\u0275reference"](2);i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("disabled",n.invalid||t.saveDisabled),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.themeId)("ngIfElse",e)}}let ft=(()=>{class e{constructor(e,t,n,i,a,r){this.router=e,this.rootService=t,this.mingaDesigner=n,this.mingaSnack=i,this._cdr=a,this._saving=!1,this.imageAsset="",this.themeTitle="",this.themeDescription="",this.themeId="",r.params.subscribe(e=>{this.themeId=e.themeId||"",this.themeId&&this.fetchThemeFields()})}get hasChangedFields(){return!this._fetchedFields||this.imageAsset!=this._fetchedFields.featuredImageUrl||this.themeDescription!=this._fetchedFields.description||this.themeTitle}get saveDisabled(){return this._saving||!this.hasChangedFields}_onSave(){var e,t,n;return Object(l.a)(this,void 0,void 0,(function*(){if(this.themeId){const i={};this.imageAsset!=(null===(e=this._fetchedFields)||void 0===e?void 0:e.featuredImageUrl)&&(i.featuredImageUrl=this.imageAsset),this.themeDescription!=(null===(t=this._fetchedFields)||void 0===t?void 0:t.description)&&(i.description=this.themeDescription),this.themeTitle!=(null===(n=this._fetchedFields)||void 0===n?void 0:n.title)&&(i.title=this.themeTitle),0==Object.keys(i).length?this.mingaSnack.open("Nothing to update"):yield this.mingaDesigner.updateTheme(this.themeId,i)}else{const e={featuredImageUrl:this.imageAsset,title:this.themeTitle,description:this.themeDescription};this.themeId=yield this.mingaDesigner.createTheme(e),yield this.router.navigate(["edit",this.themeId],{replaceUrl:!0,skipLocationChange:!0})}this._cdr.markForCheck(),yield new Promise(e=>setTimeout(e,100)),yield Object(s.a)(this.router)}))}onSave(){return Object(l.a)(this,void 0,void 0,(function*(){try{this._saving=!0,this._cdr.markForCheck(),yield this.rootService.addLoadingPromise(this._onSave())}finally{this._saving=!1}}))}onClose(){Object(s.a)(this.router)}fetchThemeFields(){return Object(l.a)(this,void 0,void 0,(function*(){try{yield this.rootService.addLoadingPromise(this._fetchThemeFields())}catch(e){console.error(e),this.mingaSnack.open("Unable to load theme at this time. Please try again later"),yield Object(s.a)(this.router)}}))}_fetchThemeFields(){return Object(l.a)(this,void 0,void 0,(function*(){const e=yield this.mingaDesigner.getThemeById(this.themeId);this._fetchedFields=e,this.imageAsset=e.featuredImageUrl,this.themeTitle=e.title,this.themeDescription=e.description,this._cdr.markForCheck()}))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.g),i["\u0275\u0275directiveInject"](m.a),i["\u0275\u0275directiveInject"](o.MingaDesignerService),i["\u0275\u0275directiveInject"](u.b),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](a.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ng-component"]],decls:12,vars:8,consts:[[4,"mgOverlayStructure","mgOverlayStructureRegion"],["form",""],["required","","name","imageAsset","previewAspectRatio","16:9",3,"previewSize","ngModel","ngModelChange"],["mgFormField","",3,"mgNoHintMargin"],["matInput","","required","","name","themeTitle",3,"ngModel","ngModelChange"],["matInput","","name","themeDesc","maxlength","60",3,"ngModel","ngModelChange"],["icon","close",1,"mg-align-left",3,"click"],["icon","save-o",1,"mg-align-right",3,"disabled","click"],[4,"ngIf","ngIfElse"],["noThemeId",""]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,pt,7,3,"div",0),i["\u0275\u0275elementStart"](1,"form",null,1),i["\u0275\u0275elementStart"](3,"mg-file-input-upload",2),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.imageAsset=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"mat-form-field",3),i["\u0275\u0275elementStart"](5,"mat-label"),i["\u0275\u0275text"](6,"Theme Title"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"input",4),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.themeTitle=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"mat-form-field",3),i["\u0275\u0275elementStart"](9,"mat-label"),i["\u0275\u0275text"](10,"Theme Description"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"textarea",5),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.themeDescription=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("mgOverlayStructure",!0)("mgOverlayStructureRegion","top"),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("previewSize",700)("ngModel",t.imageAsset),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("mgNoHintMargin",!0),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngModel",t.themeTitle),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("mgNoHintMargin",!0),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngModel",t.themeDescription))},directives:[h.a,v.E,v.u,v.v,S.a,v.B,v.t,v.w,O.d,le.a,O.h,D.b,v.d,v.n,f.a,p.o],styles:["form[_ngcontent-%COMP%]{display:block;padding:16px}mat-form-field[_ngcontent-%COMP%]{margin:16px 0}"],changeDetection:0}),e})();var vt=n("62tx");let St=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[B.a,vt.a,T.a,P.a,v.m,a.k,p.c,D.c,O.f,_.a]]}),e})();const xt=[{path:"template/create",component:ot},{path:"template/edit/:templateId",component:ot},{path:"stock-photo/create",component:E},{path:"stock-photo/edit/:photoId",component:E},{path:"stock-sticker/create",component:q},{path:"stock-sticker/edit/:stickerId",component:q},{path:"theme/create",component:ft},{path:"theme/edit/:themeId",component:ft}];let Ct=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[{provide:o.MingaDesignerService,useExisting:r.a}],imports:[[St,mt,L,a.k.forChild(xt)]]}),e})()},qftF:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("8Y7J"),a=n("s7LF"),r=n("Tj54");const o=["pillCheckmark"],l=["*"],s={provide:a.r,useExisting:Object(i.forwardRef)(()=>d),multi:!0};let d=(()=>{class e{constructor(){this.tabindex="0",this.icon="check",this.disabled=!1,this._value=!1}get hasIcon(){return!!this.icon}get checked(){return this._value}get unchecked(){return!this._value}onClick(e){this.disabled||(this._value=!this._value,this._onChange&&this._onChange(this._value))}onKeypress(e){this.disabled||"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this._value=!this._value,this._onChange&&this._onChange(this._value))}writeValue(e){this._value=!!e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-pill-checkbox"]],viewQuery:function(e,t){if(1&e&&i["\u0275\u0275viewQuery"](o,3),2&e){let e;i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.pillCheckmark=e.first)}},hostVars:9,hostBindings:function(e,t){1&e&&i["\u0275\u0275listener"]("click",(function(e){return t.onClick(e)}))("keypress",(function(e){return t.onKeypress(e)})),2&e&&(i["\u0275\u0275attribute"]("tabindex",t.tabindex),i["\u0275\u0275classProp"]("mg-pill-checkmark-disabled",t.disabled)("mg-pill-checkmark-has-icon",t.hasIcon)("mg-pill-checkmark-checked",t.checked)("mg-pill-checkmark-unchecked",t.unchecked))},inputs:{icon:"icon",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([s])],ngContentSelectors:l,decls:7,vars:1,consts:[[1,"mg-pill-checkbox"],[1,"mg-pill-checkbox-content"],[1,"mg-pill-checkbox-checkmark"],["pillCheckmark",""]],template:function(e,t){1&e&&(i["\u0275\u0275projectionDef"](),i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275projection"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div",2,3),i["\u0275\u0275elementStart"](5,"mat-icon"),i["\u0275\u0275text"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate"](t.icon))},directives:[r.a],styles:[".mg-pill-checkbox[_ngcontent-%COMP%]{min-height:1em;min-width:1em;overflow:hidden;border-width:1px;border-style:solid;position:relative;padding:var(--mg-pillcheckbox-padding,.35em .7em);border-radius:1.35em;transition:background-color .3s ease;margin:var(--mg-pillcheckbox-margin,0);font-size:var(--mg-pillcheckbox-font-size,16px)}.mg-pill-checkbox[_ngcontent-%COMP%]   .mg-pill-checkbox-content[_ngcontent-%COMP%]{padding-right:0;transition:padding-right .3s ease}.mg-pill-checkbox[_ngcontent-%COMP%]   .mg-pill-checkbox-checkmark[_ngcontent-%COMP%]{position:absolute;right:0;top:0;bottom:0;transform:translateX(100%);opacity:0;transition:transform .3s ease,opacity .3s ease}.mg-pill-checkbox[_ngcontent-%COMP%]   .mg-pill-checkbox-checkmark[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:0 .35em;position:relative;top:50%;transform:translateY(-50%);color:currentColor;width:1em;height:1em;line-height:1em;font-size:1em}[_nghost-%COMP%]{display:inline-block;cursor:pointer;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]:focus{outline:none}.mg-pill-checkmark-checked.mg-pill-checkmark-has-icon[_nghost-%COMP%]   .mg-pill-checkbox[_ngcontent-%COMP%]   .mg-pill-checkbox-checkmark[_ngcontent-%COMP%]{transform:translateX(0);opacity:1}.mg-pill-checkmark-checked.mg-pill-checkmark-has-icon[_nghost-%COMP%]   .mg-pill-checkbox[_ngcontent-%COMP%]   .mg-pill-checkbox-content[_ngcontent-%COMP%]{padding-right:1em}.mg-pill-checkmark-disabled[_nghost-%COMP%]{pointer-events:none}.small[_nghost-%COMP%]{font-size:10px}.small[_nghost-%COMP%]   .mg-pill-checkbox[_ngcontent-%COMP%]{padding-top:.05em;padding-bottom:.05em}.large[_nghost-%COMP%]   .mg-pill-checkbox[_ngcontent-%COMP%]{padding-top:.7em;padding-bottom:.7em}.bold[_nghost-%COMP%]   .mg-pill-checkbox[_ngcontent-%COMP%]{font-weight:700;border-width:2px}"]}),e})()}}]);
//# sourceMappingURL=minga-app-src-app-routes-sadmin-MingaDesignerOverlayRoutes-module-es2015.js.map
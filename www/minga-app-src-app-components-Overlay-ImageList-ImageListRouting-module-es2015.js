(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{iWLF:function(e,t,n){"use strict";n.r(t),n.d(t,"ImageListRoutingModule",(function(){return k}));var i=n("8Y7J"),a=n("iInd"),r=n("mrSG"),o=n("LvDl"),s=n("jaBy"),c=n("SVse"),g=n("Eh7J"),l=n("SYVq"),m=n("65ez"),d=n("XC6Q"),u=n("Mjc8"),p=n("Fudl");function h(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mg-progressive-image",10),i["\u0275\u0275listener"]("loadingChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().item.loading=t}))("imageChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().item.url=t})),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]().item;i["\u0275\u0275property"]("images",e.progressiveUrls)}}function f(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",7),i["\u0275\u0275element"](1,"div",8),i["\u0275\u0275template"](2,h,1,1,"mg-progressive-image",9),i["\u0275\u0275elementEnd"]()),2&e){const e=t.item,n=i["\u0275\u0275nextContext"]();i["\u0275\u0275styleProp"]("background-image","url("+e.url+")"),i["\u0275\u0275advance"](1),i["\u0275\u0275styleProp"]("background-image","url("+e.url+")"),i["\u0275\u0275classProp"]("img-loading",e.loading),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.shouldLoadImage(e.index))}}function v(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",11),i["\u0275\u0275elementStart"](1,"mg-icon",12),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](),i["\u0275\u0275reference"](2).prev()})),i["\u0275\u0275text"](2,"left-arrow-active"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div",13),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"mg-icon",12),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](),i["\u0275\u0275reference"](2).next()})),i["\u0275\u0275text"](6,"right-arrow-active"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){i["\u0275\u0275nextContext"]();const e=i["\u0275\u0275reference"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275classProp"]("disabled",e.hasPrev()),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate2"](" ",e.activeIndex+1," of ",e.count()," "),i["\u0275\u0275advance"](1),i["\u0275\u0275classProp"]("disabled",e.hasNext())}}function y(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",14),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" This image was flagged by automatic moderation as ",e.displayTagsForCurrentImage(),"\n")}}function C(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",14),i["\u0275\u0275text"](1,"This image passed moderation."),i["\u0275\u0275elementEnd"]())}let I=(()=>{class e{constructor(e,t){this._location=e,this.reportService=t,this.displayImages=[],this.displayTags=[],this.activeImageIndex=0,this.imagesContainerWidth=0,this.imageInfoList=this.reportService.contentImageList||[]}ngOnInit(){this.imageInfoList.length?this.initImages():this.onOverlayPrevious()}cancel(){this.onOverlayPrevious()}get overlayPrevious(){return{icon:"close",text:"Close"}}hasOverlayPrevious(){return this.overlayPrevious}onOverlayPrevious(){return Object(r.a)(this,void 0,void 0,(function*(){yield this.onOverlayClose()}))}onOverlayClose(){return Object(r.a)(this,void 0,void 0,(function*(){return this._location.back(),!0}))}initImages(){return Object(r.a)(this,void 0,void 0,(function*(){if(this.displayImages=[],0!=this.imageInfoList.length)for(let e of this.imageInfoList){const t={};e.sizeMap.forEach(e=>{t[e[0]]=e[1]});const n=[],i=t.longcardbanner||t.cardbanner||t.raw;t.blurloading1&&n.push(t.blurloading1.path),n.push(i.path),this.displayImages.push({index:this.displayImages.length,progressiveUrls:n.map(e=>Object(s.b)(e)),url:Object(s.b)(i.path),width:i.width,height:i.height,loading:!1});const a=this.getModerationDetailsForImage(t.raw.path);this.displayTags.push(a)}}))}displayTagsForCurrentImage(){return this.displayTags[this.activeImageIndex]}currentImageHasTags(){return!!this.displayTags[this.activeImageIndex]}getModerationDetailsForImage(e){return this.reportService.getTagsForImageByFilePath(e)}shouldLoadImage(e){return o.inRange(e,this.activeImageIndex-2,this.activeImageIndex+2)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](c.k),i["\u0275\u0275directiveInject"](g.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-image-list-overlay"]],decls:8,vars:8,consts:[[3,"component"],[1,"images",3,"spaceBetween","containerWidth","activeIndexChange"],["swipeContainer","mgSwipeContainer"],["class","img-src",3,"background-image",4,"mgConform","mgConformMaxWidth","mgConformMaxHeight"],["class","swipe-control","fxLayout","row","fxLayoutAlign","center center",4,"ngIf"],["fxLayoutAlign","center center",4,"ngIf","ngIfElse"],["notags",""],[1,"img-src"],[1,"img-src-blurry"],["mode","sequential",3,"images","loadingChange","imageChange",4,"ngIf"],["mode","sequential",3,"images","loadingChange","imageChange"],["fxLayout","row","fxLayoutAlign","center center",1,"swipe-control"],["block","",3,"click"],["fxFlex","",1,"mg-centered"],["fxLayoutAlign","center center"]],template:function(e,t){if(1&e&&(i["\u0275\u0275element"](0,"mg-legacy-overlay-nav",0),i["\u0275\u0275elementStart"](1,"mg-swipe-container",1,2),i["\u0275\u0275listener"]("containerWidth",(function(e){return t.imagesContainerWidth=e}))("activeIndexChange",(function(e){return t.activeImageIndex=e})),i["\u0275\u0275template"](3,f,3,7,"div",3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](4,v,7,6,"div",4),i["\u0275\u0275template"](5,y,2,1,"div",5),i["\u0275\u0275template"](6,C,2,0,"ng-template",null,6,i["\u0275\u0275templateRefExtractor"])),2&e){const e=i["\u0275\u0275reference"](7);i["\u0275\u0275property"]("component",t),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("spaceBetween",20),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("mgConform",t.displayImages)("mgConformMaxWidth",t.imagesContainerWidth)("mgConformMaxHeight","75vh"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.displayImages.length>1),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.currentImageHasTags())("ngIfElse",e)}},directives:[l.a,m.a,d.a,c.o,u.a,p.a],styles:[".images[_ngcontent-%COMP%], [_nghost-%COMP%]{display:block}.images[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;background-color:#000}.images[_ngcontent-%COMP%]   .img-src[_ngcontent-%COMP%]{background-size:100%;background-repeat:no-repeat;margin:auto;position:relative;overflow:hidden}.images[_ngcontent-%COMP%]   .img-src[_ngcontent-%COMP%], .images[_ngcontent-%COMP%]   .img-src-blurry[_ngcontent-%COMP%]{background-position:50%;background-color:#fff}.images[_ngcontent-%COMP%]   .img-src-blurry[_ngcontent-%COMP%]{position:absolute;left:0;right:0;top:0;bottom:0;opacity:0;filter:blur(20px);background-size:75%;background-repeat:repeat;transform:scale(1.4);animation:imgBlurFadeOut .6s ease}.images[_ngcontent-%COMP%]   .img-src-blurry.img-loading[_ngcontent-%COMP%]{opacity:1;animation:none}.images[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{display:inline-block}"]}),e})();var x=n("ACDe"),b=n("zkd0"),w=n("mF6c"),O=n("ls3q"),P=n("CL15");let M=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[O.a,b.a,x.a,w.a,P.a,c.c]]}),e})(),k=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[M,a.k.forChild([{path:"",component:I}])]]}),e})()}}]);
//# sourceMappingURL=minga-app-src-app-components-Overlay-ImageList-ImageListRouting-module-es2015.js.map
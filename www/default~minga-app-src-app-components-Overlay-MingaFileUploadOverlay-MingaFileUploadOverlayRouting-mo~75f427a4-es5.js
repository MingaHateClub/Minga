!function(){function e(e,n){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){i&&(e=i);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return l=e.done,e},e:function(e){s=!0,a=e},f:function(){try{l||null==i.return||i.return()}finally{if(s)throw a}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */n=function(){return e};var e={},t=Object.prototype,i=t.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(E){c=function(e,t,n){return e[t]=n}}function p(e,t,n,i){var r=t&&t.prototype instanceof f?t:f,a=Object.create(r.prototype),l=new b(i||[]);return o(a,"_invoke",{value:C(e,n,l)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=p;var u={};function f(){}function g(){}function m(){}var h={};c(h,a,(function(){return this}));var v=Object.getPrototypeOf,w=v&&v(v(I([])));w&&w!==t&&i.call(w,a)&&(h=w);var y=m.prototype=f.prototype=Object.create(h);function O(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){var n;o(this,"_invoke",{value:function(o,r){function a(){return new t((function(n,a){!function n(o,r,a,l){var s=d(e[o],e,r);if("throw"!==s.type){var c=s.arg,p=c.value;return p&&"object"==typeof p&&i.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(p).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,l)}))}l(s.arg)}(o,r,n,a)}))}return n=n?n.then(a,a):a()}})}function C(e,t,n){var i="suspendedStart";return function(o,r){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw r;return F()}for(n.method=o,n.arg=r;;){var a=n.delegate;if(a){var l=P(a,n);if(l){if(l===u)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var s=d(e,t,n);if("normal"===s.type){if(i=n.done?"completed":"suspendedYield",s.arg===u)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(i="completed",n.method="throw",n.arg=s.arg)}}}function P(e,t){var n=t.method,i=e.iterator[n];if(void 0===i)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,P(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),u;var o=d(i,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,u;var r=o.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function b(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function I(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:F}}function F(){return{value:void 0,done:!0}}return g.prototype=m,o(y,"constructor",{value:m,configurable:!0}),o(m,"constructor",{value:g,configurable:!0}),g.displayName=c(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},O(x.prototype),c(x.prototype,l,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,i,o,r){void 0===r&&(r=Promise);var a=new x(p(t,n,i,o),r);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},O(y),c(y,s,"Generator"),c(y,a,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},e.values=I,b.prototype={constructor:b,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,i){return a.type="throw",a.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],a=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var l=i.call(r,"catchLoc"),s=i.call(r,"finallyLoc");if(l&&s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(l){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var o=i.arg;M(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,r=void 0,"symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"))?r:String(r)),i)}var o,r}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"/yIH":function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n("2dIi");var i,a=n("SVse"),l=n("8Y7J"),s=n("s7LF"),c=n("Q2Ze"),p=n("e6WT"),d=n("TSSN"),u=n("YcSX"),f=n("OVn1"),g=n("HxU+"),m=n("ls3q"),h=((i=o((function e(){r(this,e)}))).\u0275fac=function(e){return new(e||i)},i.\u0275mod=l["\u0275\u0275defineNgModule"]({type:i}),i.\u0275inj=l["\u0275\u0275defineInjector"]({imports:[[m.a,u.b,f.a,g.a,a.c,s.m,d.c,c.f,p.c]]}),i)},"2dIi":function(t,i,a){"use strict";a.d(i,"a",(function(){return j}));var l=a("mrSG"),s=(a("mmWe"),a("8Y7J")),c=a("s7LF"),p=a("B3cG"),d=a("Ggka"),u=a("vaSZ"),f=a("V0rs"),g=a("vvTe"),m=a("UWMR"),h=a("SVse"),v=a("ZgR8"),w=a("Q2Ze"),y=a("i1AJ"),O=a("e6WT"),x=a("Fudl"),C=a("iBVM"),P=a("TSSN"),_=["form"];function M(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"mg-file-upload",17),s["\u0275\u0275listener"]("ngModelChange",(function(e){s["\u0275\u0275restoreView"](n);var t=s["\u0275\u0275nextContext"]().index;return s["\u0275\u0275nextContext"](2).uploadedAssets[t]=e}))("status",(function(e){s["\u0275\u0275restoreView"](n);var t=s["\u0275\u0275nextContext"]().index;return s["\u0275\u0275nextContext"](2).fileUploadStatusUpdate(e,t)}))("ngModelChange",(function(e){s["\u0275\u0275restoreView"](n);var t=s["\u0275\u0275nextContext"]().index;return s["\u0275\u0275nextContext"](2).fileUploadUpdate(e,t)})),s["\u0275\u0275elementEnd"]()}if(2&e){var i=s["\u0275\u0275nextContext"](),o=i.$implicit,r=i.index,a=s["\u0275\u0275nextContext"](2);s["\u0275\u0275classProp"]("nonImage",!a.isImageFile(o))("show",a.showUploadPreview(o,r)),s["\u0275\u0275propertyInterpolate1"]("name","file_",r,""),s["\u0275\u0275property"]("file",o.file)("accept",a.getFileAccept(o))("ngModel",a.uploadedAssets[r])}}function b(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",18),s["\u0275\u0275text"](1," Rename "),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"](3);s["\u0275\u0275classProp"]("disabled",n.isUploadingFiles)}}function I(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",19),s["\u0275\u0275elementStart"](1,"span",20),s["\u0275\u0275listener"]("click",(function(e){s["\u0275\u0275restoreView"](n);var t=s["\u0275\u0275nextContext"](),i=t.$implicit,o=t.index,r=s["\u0275\u0275nextContext"](2);return r.saveFilename(r.getUploadItemKey(i),o,e)})),s["\u0275\u0275text"](2,"Save"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"mg-icon",20),s["\u0275\u0275listener"]("click",(function(e){s["\u0275\u0275restoreView"](n);var t=s["\u0275\u0275nextContext"](),i=t.$implicit,o=t.index,r=s["\u0275\u0275nextContext"](2);return r.cancelFileNameChange(r.getUploadItemKey(i),o,e)})),s["\u0275\u0275text"](4,"close-thin"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){var i=s["\u0275\u0275nextContext"]().index,o=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](1),s["\u0275\u0275classProp"]("disabled",o.isUploadingFiles||o.getInputHasError(i)),s["\u0275\u0275advance"](2),s["\u0275\u0275classProp"]("disabled",o.isUploadingFiles)}}function F(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"span"),s["\u0275\u0275text"](1),s["\u0275\u0275pipe"](2,"translate"),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](2,1,"input.fileName.error.maxlength")," "))}function E(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"span"),s["\u0275\u0275text"](1),s["\u0275\u0275pipe"](2,"translate"),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](2,1,"input.fileName.error.pattern")," "))}function k(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"span"),s["\u0275\u0275text"](1),s["\u0275\u0275pipe"](2,"translate"),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](2,1,"input.fileName.error.required")," "))}function S(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-error"),s["\u0275\u0275elementContainerStart"](1,21),s["\u0275\u0275template"](2,F,3,3,"span",22),s["\u0275\u0275template"](3,E,3,3,"span",22),s["\u0275\u0275template"](4,k,3,3,"span",23),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]().index,i=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngSwitch",i.getFileInputErrorKey(n)),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngSwitchCase","maxlength"),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngSwitchCase","pattern")}}function N(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275elementStart"](1,"div",5),s["\u0275\u0275elementStart"](2,"div",6),s["\u0275\u0275elementStart"](3,"div",7),s["\u0275\u0275template"](4,M,1,8,"mg-file-upload",8),s["\u0275\u0275element"](5,"mg-file-extension-box",9),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",10),s["\u0275\u0275elementStart"](7,"mat-form-field",11),s["\u0275\u0275template"](8,b,2,2,"div",12),s["\u0275\u0275template"](9,I,5,4,"div",13),s["\u0275\u0275elementStart"](10,"input",14),s["\u0275\u0275listener"]("keydown",(function(e){s["\u0275\u0275restoreView"](n);var i=t.index;return s["\u0275\u0275nextContext"](2).onFileNameInputKeyDown(e,i)}))("focus",(function(e){s["\u0275\u0275restoreView"](n);var i=t.$implicit,o=t.index,r=s["\u0275\u0275nextContext"](2);return r.onFileNameInputFocus(e,r.getUploadItemKey(i),o)}))("ngModelChange",(function(e){s["\u0275\u0275restoreView"](n);var i=t.index;return s["\u0275\u0275nextContext"](2).setFilename(i,e)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](11,S,5,3,"mat-error",15),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"div",16),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](n);var e=t.$implicit;return s["\u0275\u0275nextContext"](2).removeUploadedItem(e)})),s["\u0275\u0275elementStart"](13,"mg-icon"),s["\u0275\u0275text"](14,"delete"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementContainerEnd"]()}if(2&e){var i=t.$implicit,o=t.index,r=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngIf",r.canUpload(i)),s["\u0275\u0275advance"](1),s["\u0275\u0275classProp"]("hide",r.isImageFile(i)&&r.uploadedAssets[o])("inverse",r.isFileUploadingStatus(o)),s["\u0275\u0275property"]("extension",r.getFileExtension(i))("previewUrl",r.fileImagePreviews.get(i)),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngIf",!r.fileNamingEditMap.get(r.getUploadItemKey(i))),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",r.fileNamingEditMap.get(r.getUploadItemKey(i))),s["\u0275\u0275advance"](1),s["\u0275\u0275propertyInterpolate1"]("name","fileTitle_",o,""),s["\u0275\u0275property"]("disabled",r.isUploadingFiles)("pattern",r.linkTitlePattern)("ngModel",r.getFileNameByIndex(o)),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",r.getInputHasError(o)),s["\u0275\u0275advance"](1),s["\u0275\u0275classProp"]("disabled",r.isUploadingFiles)}}function U(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",3),s["\u0275\u0275template"](1,N,15,16,"ng-container",4),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",n.uploadItems)}}var j=function(){var t=function(){function t(e){r(this,t),this.snackBar=e,this.FileUploadStatus=p.e,this.uploadItems=[],this.uploadedAssets=new Map,this.uploadedStatuses=new Map,this.fileNames=new Map,this.fileNameBackups=new Map,this.fileImagePreviews=new Map,this.fileNamingEditMap=new Map,this.submitUploadStatus=p.e.PENDING,this.linkInputPattern=d.a.WebsiteUrlRegex,this.linkTitlePattern=d.a.NoSymbolsRegex,this.linkInputText="",this.linkInputFocussed=!1,this.submitting=!1,this.initialFiles=[],this.pendingFiles=new s.EventEmitter,this.isValid=new s.EventEmitter,this.filesUploaded=new s.EventEmitter,this.cancel=new s.EventEmitter}return o(t,[{key:"uploadFileAssets",set:function(e){e&&this.uploadFilesToSubmit()}},{key:"isUploadingFiles",get:function(){return this.submitUploadStatus!=p.e.PENDING&&this.submitUploadStatus!=p.e.ERROR_UNKNOWN}},{key:"spinnerDiameter",get:function(){return window.innerWidth>599?65:window.innerWidth>411?45:38}},{key:"linkInputPlaceholder",get:function(){return this.linkInputFocussed?"input.mingaLinkUrl.placeholderFocussed":"input.mingaLinkUrl.placeholderIdle"}},{key:"ngAfterViewInit",value:function(){var e=this;this.form.statusChanges.subscribe((function(t){e._checkFormValidity()})),this._checkFormValidity()}},{key:"ngOnChanges",value:function(e){e.initialFiles&&this.onFilesInput(this.initialFiles)}},{key:"previewUrlFromFile",value:function(e){return Object(l.a)(this,void 0,void 0,n().mark((function t(){var i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!g.AcceptedImageFileMimes.includes(e.type)){t.next=5;break}return t.next=3,Object(f.e)(e);case 3:i=t.sent,this.fileImagePreviews.set(e.name,i);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"getUploadItemKey",value:function(e){return e.file?e.file.name:e.link}},{key:"getFileExtension",value:function(e){return e.file?Object(g.getFileExtension)(e.file.name):"URL"}},{key:"showUploadPreview",value:function(e,t){var n=this.getFileAccept(e),i=this.form.controls["file_".concat(t)];return i&&("VALID"!=i.status||"VALID"==i.status&&n==p.a)}},{key:"isFileUploadingStatus",value:function(e){var t=this.form.controls["file_".concat(e)];return t&&"VALID"!=t.status}},{key:"_checkFormValidity",value:function(){if(this.form){for(var e=!1,t=0;t<this.uploadItems.length;t++){var n=this.getUploadItemKey(this.uploadItems[t]);if(this.fileNamingEditMap.get(n)){e=!0;break}}this.isValid.emit(!(!this.uploadItems.length||e||"VALID"!==this.form.status||this.isUploadingFiles))}else this.isValid.emit(!1)}},{key:"isImageFile",value:function(e){return!!e.file&&g.AcceptedImageFileMimes.includes(e.file.type)}},{key:"getFileImagePreview",value:function(e){return e.file&&this.fileImagePreviews.get(e.file.name)||""}},{key:"onFilesInput",value:function(t){var n,i=e(t);try{for(i.s();!(n=i.n()).done;){var o,r=n.value,a=0,l=e(this.uploadItems);try{for(l.s();!(o=l.n()).done;){var s=o.value;s.file&&r.name==s.file.name&&a++}}catch(d){l.e(d)}finally{l.f()}if(a){var c=Object(g.getFileExtension)(r.name),p=Object(g.getFileTitle)(r.name)+"("+a+")."+c;r=Object(u.a)(r,p)}this.fileNames.set(r.name,Object(g.getFileTitle)(r.name)),this.fileNamingEditMap.set(r.name,!1),this.uploadItems.push({file:r}),this.previewUrlFromFile(r)}}catch(d){i.e(d)}finally{i.f()}this._checkFormValidity(),this.pendingFiles.emit(this.uploadItems)}},{key:"onFileNameInputFocus",value:function(e,t,n){this.fileNamingEditMap.get(t)||this.toggleEditFilename(t,n)}},{key:"cancelFileNameChange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.fileNameBackups.has(e)?this.fileNames.set(e,this.fileNameBackups.get(e)):this.fileNames.set(e,Object(g.getFileTitle)(e)),this.toggleEditFilename(e,t,n)}},{key:"toggleEditFilename",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n&&(n.preventDefault(),n.stopImmediatePropagation());var i=!this.fileNamingEditMap.get(e),o=this.form.controls["fileTitle_".concat(t)];if(this.fileNamingEditMap.set(e,i),!i&&o){var r=this.fileNames.get(e);o.reset(r),o.markAsPristine()}this._checkFormValidity()}},{key:"setFilename",value:function(e,t){var n=this.getUploadItemKey(this.uploadItems[e]);this.fileNames.get(n),this.fileNames.set(n,t)}},{key:"saveFilename",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this.fileNames.get(e),o=e,r=this.uploadItems[t];if(r.file){var a=r.file.name;if(Object(g.getFileTitle)(r.file.name)!=i){r.file=Object(u.a)(r.file,i),this.fileNames.set(r.file.name,Object(g.getFileTitle)(r.file.name)),this.fileNamingEditMap.set(r.file.name,!0),this.uploadItems[t].file=r.file,this.fileNames.delete(a);var l=this.fileImagePreviews.get(a);l&&(this.fileImagePreviews.set(r.file.name,l),this.fileImagePreviews.delete(a)),o=r.file.name}}r.link&&this.fileNameBackups.set(r.link,i),this.toggleEditFilename(o,t,n),this.pendingFiles.emit(this.uploadItems)}},{key:"getFileNameByIndex",value:function(e){var t=this.getUploadItemKey(this.uploadItems[e]);return this.fileNames.get(t)}},{key:"onFileNameInputKeyDown",value:function(e,t){var n=this.getUploadItemKey(this.uploadItems[t]);this.fileNamingEditMap.get(n)||this.toggleEditFilename(n,t),"Enter"===e.key&&(e.preventDefault(),this.saveFilename(n,t))}},{key:"removeUploadedItem",value:function(e){var t=this.getUploadItemKey(e);this.fileNames.delete(t);for(var n=-1,i=0;this.uploadItems.length;i++)if(t==this.getUploadItemKey(this.uploadItems[i])){n=i;break}n>=0&&(this.uploadItems[n].file&&this.uploadedAssets.delete(t),this.uploadItems.splice(n,1)),0==this.uploadItems.length&&this.cancel.emit(!0)}},{key:"getFileAccept",value:function(e){return this.isImageFile(e)?p.a:"*/*"}},{key:"getInputHasError",value:function(e){return this._getInputErrorStatus("fileTitle_".concat(e))}},{key:"_getInputErrorStatus",value:function(e){if(!this.form||!this.form.controls[e])return!1;var t=this.form.controls[e];return t.invalid&&(t.dirty||t.touched||this.form.submitted)}},{key:"getFileInputErrorKey",value:function(e){return this._getInputErrorKey("fileTitle_".concat(e))}},{key:"_getInputErrorKey",value:function(e){if(!this.form||!this.form.controls[e])return"";var t=this.form.controls[e];return t&&t.errors?Object.keys(t.errors)[0]:""}},{key:"fileUploadStatusUpdate",value:function(e,t){this.form.controls["file_".concat(t)]&&(this.uploadedStatuses.set(this.getUploadItemKey(this.uploadItems[t]),e),this.updateUploadedFilesStatus())}},{key:"fileUploadUpdate",value:function(e,t){var n=this.form.controls["file_".concat(t)];n&&"VALID"===n.status&&(this.uploadedAssets[t]=e)}},{key:"updateUploadedFilesStatus",value:function(){var t,n=e(this.uploadedStatuses.keys());try{for(n.s();!(t=n.n()).done;){var i=t.value,o=this.uploadedStatuses.get(i);if(o==p.e.ERROR_UNKNOWN)return console.error("error occurred with uploading file: ",i),this.submitUploadStatus=p.e.ERROR_UNKNOWN,void this.snackBar.open("An error occurred while uploading file(s). Click on the error icon(s) below for more information.");if(o!=p.e.DONE)return void(this.submitUploadStatus=p.e.UPLOADING)}}catch(r){n.e(r)}finally{n.f()}this.submitUploadStatus=p.e.DONE,this.emitFileUploadOptions()}},{key:"canUpload",value:function(e){return e.file&&this.uploadedAssets.has(this.getUploadItemKey(e))}},{key:"uploadFilesToSubmit",value:function(){return Object(l.a)(this,void 0,void 0,n().mark((function e(){var t,i,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=!0,i=0;i<this.uploadItems.length;i++)this.uploadItems[i].file&&(t=!1,o=this.getUploadItemKey(this.uploadItems[i]),this.uploadedAssets.set(o,""),this.uploadedStatuses.set(o,p.e.PENDING));t&&(this.submitUploadStatus=p.e.DONE,this.emitFileUploadOptions());case 3:case"end":return e.stop()}}),e,this)})))}},{key:"emitFileUploadOptions",value:function(){for(var e=[],t=0;t<this.uploadItems.length;t++){var n=this.getUploadItemKey(this.uploadItems[t]);e.push({title:this.fileNames.get(n),assetPath:this.uploadedAssets[t]?this.uploadedAssets[t]:"",url:this.uploadItems[t].link?this.uploadItems[t].link:""})}this.filesUploaded.emit(e)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](m.b))},t.\u0275cmp=s["\u0275\u0275defineComponent"]({type:t,selectors:[["mg-bulk-file-upload"]],viewQuery:function(e,t){var n;(1&e&&s["\u0275\u0275viewQuery"](_,3,c.v),2&e)&&(s["\u0275\u0275queryRefresh"](n=s["\u0275\u0275loadQuery"]())&&(t.form=n.first))},inputs:{initialFiles:"initialFiles",uploadFileAssets:"uploadFileAssets"},outputs:{pendingFiles:"pendingFiles",isValid:"valid",filesUploaded:"filesUploaded",cancel:"cancel"},features:[s["\u0275\u0275NgOnChangesFeature"]],decls:3,vars:1,consts:[[1,"upload-group-file-form"],["form","ngForm"],["class","files-list",4,"ngIf"],[1,"files-list"],[4,"ngFor","ngForOf"],[1,"file-row","file-item"],[1,"file-item-wrapper"],[1,"file-upload-wrapper"],["required","","spinnerSize","30",3,"file","name","accept","ngModel","nonImage","show","ngModelChange","status",4,"ngIf"],[1,"fill",3,"extension","previewUrl"],[1,"input-wrapper","file-name"],["floatLabel","never","mgFormField","",1,"display-name-field","no-float-top"],["matSuffix","","class","input-actions mg-minicopy input-action",3,"disabled",4,"ngIf"],["matSuffix","","class","input-actions mg-minicopy",4,"ngIf"],["required","","matInput","","placeholder","Filename","mgFocusSelectText","","maxlength","255","minlength","1","autocomplete","off",3,"name","disabled","pattern","ngModel","keydown","focus","ngModelChange"],[4,"ngIf"],[1,"delete-icon-wrapper",3,"click"],["required","","spinnerSize","30",3,"file","name","accept","ngModel","ngModelChange","status"],["matSuffix","",1,"input-actions","mg-minicopy","input-action"],["matSuffix","",1,"input-actions","mg-minicopy"],[1,"input-action",3,"click"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"form",0,1),s["\u0275\u0275template"](2,U,2,1,"div",2),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",t.uploadItems.length))},directives:[c.E,c.u,c.v,h.o,h.n,v.a,w.d,y.a,O.b,c.d,c.B,c.n,c.o,c.z,c.t,c.w,x.a,C.a,w.j,w.c,h.q,h.r,h.s],pipes:[P.d],styles:["[_nghost-%COMP%]{display:block}.disabled[_ngcontent-%COMP%]{pointer-events:none;cursor:not-allowed}.disabled.delete-icon-wrapper[_ngcontent-%COMP%], .disabled.input-action[_ngcontent-%COMP%]{opacity:.6}.title-input[_ngcontent-%COMP%]{border-top:none;border-bottom:1px solid #ccc}.input-wrapper.link-input[_ngcontent-%COMP%]{padding:16px 20px calc(16px - .5em)}.input-wrapper.link-input[_ngcontent-%COMP%]   .input-action[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:.4em}.file-input-wrap[_ngcontent-%COMP%]{font-size:10px;position:relative;border-bottom:1px solid #ccc}.file-input-wrap[_ngcontent-%COMP%]   mg-file-input[_ngcontent-%COMP%]{font-size:inherit}.file-input-wrap[_ngcontent-%COMP%]   mg-file-input[_ngcontent-%COMP%]     .drop-area{transition:opacity .3s cubic-bezier(.55,0,.55,.2);opacity:1}.file-input-wrap[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%], .file-input-wrap[_ngcontent-%COMP%]   mg-file-input[_ngcontent-%COMP%]     .drop-area .user-content h2.text{color:#737373;font-size:1.4em;font-weight:400;text-align:center}.file-input-wrap[_ngcontent-%COMP%]   .uploading-loading-container[_ngcontent-%COMP%]{position:absolute;z-index:1;top:0;left:0;right:0;padding:18px 16px 16px}@media (orientation:landscape){.file-input-wrap[_ngcontent-%COMP%]   .uploading-loading-container[_ngcontent-%COMP%]{padding-top:1.25vh}}@media (orientation:portrait){.file-input-wrap[_ngcontent-%COMP%]   .uploading-loading-container[_ngcontent-%COMP%]{padding-top:1.25vw}}@media (orientation:landscape) and (max-height:320px){.file-input-wrap[_ngcontent-%COMP%]   .uploading-loading-container[_ngcontent-%COMP%]{padding-top:4px}}@media (orientation:portrait) and (max-width:320px){.file-input-wrap[_ngcontent-%COMP%]   .uploading-loading-container[_ngcontent-%COMP%]{padding-top:4px}}@media (min-width:1440px){.file-input-wrap[_ngcontent-%COMP%]   .uploading-loading-container[_ngcontent-%COMP%]{padding-top:18px}}.file-input-wrap.loading[_ngcontent-%COMP%]   mg-file-input[_ngcontent-%COMP%]     .drop-area{transition:opacity .3s cubic-bezier(.55,0,.55,.2);opacity:0}.file-input-wrap.loading[_ngcontent-%COMP%]   mg-file-input[_ngcontent-%COMP%]     .drop-area .user-content h2.text{opacity:0}.input-action[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px;display:inline-block;vertical-align:middle;--mg-icon-size:16px}.input-action[_ngcontent-%COMP%]:hover{cursor:pointer;color:#93f}.input-action[_ngcontent-%COMP%]:last-child{padding-right:0}.input-action-icon[_ngcontent-%COMP%]{position:relative;width:2em;height:1em;display:inline-block}.input-action-icon[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{position:absolute;left:0;top:calc(-1em - 8px);--mg-icon-size:16px}.files-list[_ngcontent-%COMP%]{padding:0}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{border-bottom:1px solid #ccc;padding:0 16px}@media (orientation:landscape){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{padding-left:4.2666666667vh}}@media (orientation:portrait){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{padding-left:4.2666666667vw}}@media (orientation:landscape) and (max-height:375px){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{padding-left:16px}}@media (orientation:portrait) and (max-width:375px){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{padding-left:16px}}@media (min-width:750px){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{padding-left:32px}}@media (orientation:landscape){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{padding-right:4.2666666667vh}}@media (orientation:portrait){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{padding-right:4.2666666667vw}}@media (orientation:landscape) and (max-height:375px){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{padding-right:16px}}@media (orientation:portrait) and (max-width:375px){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{padding-right:16px}}@media (min-width:750px){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]{padding-right:32px}}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .file-item-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:stretch}.files-list[_ngcontent-%COMP%]   .file-row.disabled[_ngcontent-%COMP%]{pointer-events:none;cursor:not-allowed}@media (min-width:600px){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]:last-child{border-bottom:none}}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .file-upload-wrapper[_ngcontent-%COMP%], .files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-wrapper.file-name[_ngcontent-%COMP%]{padding:20px 0}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .file-upload-wrapper[_ngcontent-%COMP%]{margin-right:10px;height:50px;width:50px;position:relative;flex:0 0 auto}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .file-upload-wrapper[_ngcontent-%COMP%]   mg-file-upload[_ngcontent-%COMP%]{position:absolute;bottom:20px;left:0;font-size:60%;display:none;border-radius:6px;overflow:hidden;height:50px;width:50px}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .file-upload-wrapper[_ngcontent-%COMP%]   mg-file-upload.nonImage[_ngcontent-%COMP%]{opacity:.9}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .file-upload-wrapper[_ngcontent-%COMP%]   mg-file-upload.show[_ngcontent-%COMP%]{display:block}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .file-upload-wrapper[_ngcontent-%COMP%]   mg-file-extension-box[_ngcontent-%COMP%]{width:100%}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .file-upload-wrapper[_ngcontent-%COMP%]   mg-file-extension-box.hide[_ngcontent-%COMP%]{display:none}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-action[_ngcontent-%COMP%]{padding:10px}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-action[_ngcontent-%COMP%]:hover{cursor:pointer;color:#93f}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-action[_ngcontent-%COMP%]:last-child{padding-right:0}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-wrapper.file-name[_ngcontent-%COMP%]{flex:1 0 85%;color:#737373;align-items:center;display:flex;flex-direction:column;align-items:flex-start;justify-content:space-around;max-width:197px;padding-top:10px}@media (min-width:375px) and (orientation:landscape){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-wrapper.file-name[_ngcontent-%COMP%]{max-width:68.2666666667vh}}@media (min-width:375px) and (orientation:portrait){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-wrapper.file-name[_ngcontent-%COMP%]{max-width:68.2666666667vw}}@media (min-width:375px) and (orientation:landscape) and (max-height:375px){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-wrapper.file-name[_ngcontent-%COMP%]{max-width:256px}}@media (min-width:375px) and (orientation:portrait) and (max-width:375px){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-wrapper.file-name[_ngcontent-%COMP%]{max-width:256px}}@media (min-width:375px) and (min-width:877.44140625){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-wrapper.file-name[_ngcontent-%COMP%]{max-width:599}}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-wrapper.file-name[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin-bottom:-.7em}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-wrapper.file-name[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:100%}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-wrapper.file-name[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{margin-bottom:.1em}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-wrapper.file-name[_ngcontent-%COMP%]   .file-rename[_ngcontent-%COMP%]{margin-bottom:.2em}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .input-wrapper.file-name[_ngcontent-%COMP%]   .file-rename[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .file-rename[_ngcontent-%COMP%]{color:#93f;font-size:70%}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .delete-icon-wrapper[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:20px 0 20px 20px;flex:1 0 5%;justify-content:flex-end}@media (orientation:landscape){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .delete-icon-wrapper[_ngcontent-%COMP%]{padding-left:2.5vh}}@media (orientation:portrait){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .delete-icon-wrapper[_ngcontent-%COMP%]{padding-left:2.5vw}}@media (orientation:landscape) and (max-height:320px){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .delete-icon-wrapper[_ngcontent-%COMP%]{padding-left:8px}}@media (orientation:portrait) and (max-width:320px){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .delete-icon-wrapper[_ngcontent-%COMP%]{padding-left:8px}}@media (min-width:800px){.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .delete-icon-wrapper[_ngcontent-%COMP%]{padding-left:20px}}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .delete-icon-wrapper[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{height:18px;width:18px;color:#737373}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .delete-icon-wrapper[_ngcontent-%COMP%]:hover{cursor:pointer}.files-list[_ngcontent-%COMP%]   .file-row[_ngcontent-%COMP%]   .delete-icon-wrapper[_ngcontent-%COMP%]:hover   mg-icon[_ngcontent-%COMP%]{color:#de1717}"]}),t}()},vaSZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("vvTe");function o(e,t){var n=Object(i.getFileExtension)(t),o=Object(i.getFileExtension)(e.name);n||(t=t+"."+o);var r=e.slice(0,e.size,e.type);if(window.MINGA_DEVICE_IOS)return r.name=t,r.lastModifiedDate=new Date,r;var a=new FormData;return a.set("newFile",r,t),a.get("newFile")}}}])}();
//# sourceMappingURL=default~minga-app-src-app-components-Overlay-MingaFileUploadOverlay-MingaFileUploadOverlayRouting-mo~75f427a4-es5.js.map
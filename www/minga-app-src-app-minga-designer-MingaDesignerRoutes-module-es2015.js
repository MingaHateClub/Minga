(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{r0mq:function(t,e,n){"use strict";n.r(e),n.d(e,"mingaDesignerRoute",(function(){return Ln})),n.d(e,"mingaDesignerRoutes",(function(){return Vn})),n.d(e,"MingaDesignerRoutesModule",(function(){return Fn}));var o=n("1z/I"),i=n("8Y7J"),a=n("iInd"),r=n("+lWm"),s=n("GaEU"),l=n("em/2"),c=n("+/Hu"),g=n("vCJc"),d=n("mrSG"),p=n("4doY");class m{constructor(t,e){if(!e.snapshot.data.routeData)throw new Error("MingaDesignerRouteDataResolver missing routeData. Please use the mingaDesignerRouteConfig() function when declaring your route");this._router=t,this.routeData=e.snapshot.data.routeData}getDraft(t){return Object(d.a)(this,void 0,void 0,(function*(){const e=this.routeData.studioContentInfo.templateId,n=()=>({contentHash:this.routeData.contentHash,studioContentInfo:Object.assign({},this.routeData.studioContentInfo)});let o=yield t.getDraftDefaulted(this.routeData.contentHash,n);return e&&o.studioContentInfo.templateId!==e&&(o=n(),yield t.saveDraft(o)),o}))}navigatePrevious(){return this._router.navigate(["",{outlets:{o:["studio",...this.routeData.previousPath]}}])}navigateNext(){return this._router.navigate(["",{outlets:{o:["studio",...this.routeData.nextPath]}}])}}var u=n("LvDl"),h=n("orC8");function v(t,e){var n,o,i,a,r,s,l,c,g,d,p,m;const h=u.merge(t,e);return h.studioContentInfo&&h.studioContentInfo.designedSvg&&(u.assign(h.studioContentInfo.designedSvg.svgData,(null===(o=null===(n=e.studioContentInfo)||void 0===n?void 0:n.designedSvg)||void 0===o?void 0:o.svgData)||{}),h.studioContentInfo.designedSvg.svgManipulations&&(u.assign(h.studioContentInfo.designedSvg.svgManipulations,(null===(a=null===(i=e.studioContentInfo)||void 0===i?void 0:i.designedSvg)||void 0===a?void 0:a.svgManipulations)||{}),(null===(s=null===(r=e.studioContentInfo)||void 0===r?void 0:r.designedSvg)||void 0===s?void 0:s.svgManipulations)&&u.assign(h.studioContentInfo.designedSvg.svgManipulations.additionalManipulations,e.studioContentInfo.designedSvg.svgManipulations.additionalManipulations)),(null===(g=null===(c=null===(l=e.studioContentInfo)||void 0===l?void 0:l.designedSvg)||void 0===c?void 0:c.svgData)||void 0===g?void 0:g.additionalSlots)&&u.assign(h.studioContentInfo.designedSvg.svgData.additionalSlots,(null===(m=null===(p=null===(d=e.studioContentInfo)||void 0===d?void 0:d.designedSvg)||void 0===p?void 0:p.svgData)||void 0===m?void 0:m.additionalSlots)||[])),h}let f=(()=>{class t{constructor(t){this.userStorage=t,this.pendingDraft=null}getDraft(){return Object(d.a)(this,void 0,void 0,(function*(){return(yield this.userStorage.getItem("MingaDesignerDraft"))||null}))}getDraftAssert(){return Object(d.a)(this,void 0,void 0,(function*(){const t=yield this.getDraft();if(!t)throw new Error("Expected a saved draft");return t}))}getDraftDefaulted(t,e){return Object(d.a)(this,void 0,void 0,(function*(){let n=yield this.getDraft();return n&&n.contentHash==t||(n=yield e(),yield this.storeDraft(n)),n}))}saveDraft(t){return Object(d.a)(this,void 0,void 0,(function*(){const e=Object.assign({},this.pendingDraft);this.pendingDraft=v(e,t),yield this.savePendingDraft()}))}saveDraftDelayed(t,e=1e3){const n=Object.assign({},this.pendingDraft);this.pendingDraft=v(n,t),clearTimeout(this.draftSaveTimeout),this.draftSaveTimeout=setTimeout(()=>this.savePendingDraft(),e)}clearDraft(){return Object(d.a)(this,void 0,void 0,(function*(){yield this.userStorage.setItem("MingaDesignerDraft",null)}))}savePendingDraft(){return Object(d.a)(this,void 0,void 0,(function*(){clearTimeout(this.draftSaveTimeout);const t=Object.assign({},this.pendingDraft);this.pendingDraft=null;const e=v(yield this.getDraftAssert(),t);yield this.storeDraft(e)}))}storeDraft(t){return Object(d.a)(this,void 0,void 0,(function*(){yield this.userStorage.setItem("MingaDesignerDraft",t)}))}}return t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275inject"](h.a))},t.\u0275prov=i["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var x=n("3PcW"),C=n("BxgO");const y=["*"];let S=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["mg-overlay-cover-dialog"]],ngContentSelectors:y,decls:2,vars:0,consts:[[1,"dialog-content-container"]],template:function(t,e){1&t&&(i["\u0275\u0275projectionDef"](),i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275projection"](1),i["\u0275\u0275elementEnd"]())},styles:["[_nghost-%COMP%]{display:block;background-color:#fff;border-radius:6px;box-shadow:0 4px 16px rgba(0,0,0,.16);text-align:center;overflow:hidden;position:absolute;top:50%;transform:translateY(-50%);left:var(--overlay-split-content-offset,0);right:0;margin:0 auto;max-width:400px}@media (max-width:400px){[_nghost-%COMP%]{margin:0 32px;max-width:100vw}}.dialog-content-container[_ngcontent-%COMP%]{margin:16px 32px}"],changeDetection:0}),t})();var w=n("VDRc"),b=n("4avL");function O(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275listener"]("click",(function(e){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"]().onDialogBgClick(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](2,"mg-overlay-cover-dialog",2),i["\u0275\u0275elementStart"](3,"p"),i["\u0275\u0275text"](4,"Your project will not be saved."),i["\u0275\u0275element"](5,"br"),i["\u0275\u0275text"](6,"Are you sure you want to cancel?"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"div",3),i["\u0275\u0275elementStart"](8,"mg-button",4),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"]().onCancel()})),i["\u0275\u0275text"](9," Yes "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"mg-button",4),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"]().keepGoing.emit()})),i["\u0275\u0275text"](11," No "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}let P=(()=>{class t{constructor(t){this._cdr=t,this._opened=!1,this._cancelToTemplateSelect=!1,this.cancel=new i.EventEmitter,this.keepGoing=new i.EventEmitter}get isOpen(){return this._opened}open(t){t&&(this._cancelToTemplateSelect=!!t.cancelToTemplateSelect),this._opened=!0,this._cdr.markForCheck()}close(){this._opened=!1,this._cdr.markForCheck()}onDialogBgClick(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),this.close()}onCancel(){this.cancel.emit({cancelToTemplateSelect:this._cancelToTemplateSelect})}}return t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](i.ChangeDetectorRef))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["mg-minga-designer-cancel-dialog"]],outputs:{cancel:"cancel",keepGoing:"keepGoing"},decls:1,vars:2,consts:[[4,"mgOverlayStructure","mgOverlayStructureRegion"],[1,"dialog-bg",3,"click"],[1,"dialog"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","8px",1,"actions"],["type","outline",1,"normal",3,"click"]],template:function(t,e){1&t&&i["\u0275\u0275template"](0,O,12,0,"div",0),2&t&&i["\u0275\u0275property"]("mgOverlayStructure",e.isOpen)("mgOverlayStructureRegion","cover")},directives:[C.a,S,w.e,w.d,w.f,b.a],styles:[".dialog-bg[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(#93f,#fc0,#3cf);opacity:.7}mg-overlay-cover-dialog[_ngcontent-%COMP%]   mg-button[_ngcontent-%COMP%], mg-overlay-cover-dialog[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#737373}"],changeDetection:0}),t})();var M=n("SVse"),_=n("uplL"),I=n("ura0"),D=n("Fudl"),k=n("osae"),E=n("NiVs"),T=n("TAkL"),A=n("2wMK"),R=n("KNwe"),j=n("NchO");const L=[[["","previewTop",""]],[["","previewBottom",""]]],V=["[previewTop]","[previewBottom]"];let z=(()=>{class t{constructor(t){this._cdr=t,this.designedSvgSrc="",this.designedSvgData={},this.logoAnchor=p.LogoAnchor.LA_NONE,this.manipulatorToolsEnabled=k.c.None,this.designedSvgManipulations={},this.allowSlotRemoval=!1,this.allowAdditionalSlotRemoval=!1,this.designedSvgMetadata=new i.EventEmitter,this.designedSvgManipulationsChange=new i.EventEmitter,this.slotActivated=new i.EventEmitter,this.slotDeactivated=new i.EventEmitter,this.viewerReady=new i.EventEmitter}testTextSlotValueAgainstBounds(t,e){return this.svgViewer.testTextSlotValueAgainstBounds(t,e)}onRemoveSlotRequest(t){this.svgViewer&&(this.svgViewer.removeAdditionalSlot(t)||console.error(`Unable to remove slot ${t}`))}onSlotActivated(t){const e=T.DesignedSvgData.getSlotType(t.slotId,this.designedSvgData);let n;if("img"==e){const e=T.DesignedSvgData.getSlotValue(this.designedSvgData,t.slotId);n=T.DesignedSvgData.getImageSlotType(t.slotId,e)}this.slotActivated.emit(Object.assign(Object.assign({},t),{slotType:e,imageSlotType:n}))}onSlotDeactivated(){this.slotDeactivated.emit()}}return t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](i.ChangeDetectorRef))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["mg-minga-designer-template-preview"]],viewQuery:function(t,e){if(1&t&&i["\u0275\u0275viewQuery"](E.a,3),2&t){let t;i["\u0275\u0275queryRefresh"](t=i["\u0275\u0275loadQuery"]())&&(e.svgViewer=t.first)}},inputs:{designedSvgSrc:"designedSvgSrc",designedSvgData:"designedSvgData",logoAnchor:"logoAnchor",customLogo:"customLogo",manipulatorToolsEnabled:"manipulatorToolsEnabled",designedSvgManipulations:"designedSvgManipulations",allowSlotRemoval:"allowSlotRemoval",allowAdditionalSlotRemoval:"allowAdditionalSlotRemoval"},outputs:{designedSvgMetadata:"designedSvgMetadata",designedSvgManipulationsChange:"designedSvgManipulationsChange",slotActivated:"slotActivated",slotDeactivated:"slotDeactivated",viewerReady:"viewerReady"},ngContentSelectors:V,decls:9,vars:9,consts:[["fxLayout","column",1,"preview-container"],["fxLayout","row","fxFlex","10%",1,"preview-top"],[1,"designed-svg-viewer-container"],[3,"anchor","customLogo"],["fxFlex","auto","mgDesignedSvgManipulator","",1,"preview-svg-viewer",3,"manipulations","manipulatorToolsEnabled","allowSlotRemoval","allowAdditionalSlotRemoval","designedSvgSrc","designedSvgData","designedSvgManipulations","manipulationsChange","removeSlotRequest","slotActivated","slotDeactivated","designedSvgMetadata","designedSvgReady"],["svgViewer",""],["fxLayout","row","fxFlex","10%",1,"preview-bottom"]],template:function(t,e){1&t&&(i["\u0275\u0275projectionDef"](L),i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275projection"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div",2),i["\u0275\u0275element"](4,"mg-logo-anchored",3),i["\u0275\u0275elementStart"](5,"mg-designed-svg-viewer",4,5),i["\u0275\u0275listener"]("manipulationsChange",(function(t){return e.designedSvgManipulations=t}))("manipulationsChange",(function(t){return e.designedSvgManipulationsChange.emit(t)}))("removeSlotRequest",(function(t){return e.onRemoveSlotRequest(t)}))("slotActivated",(function(t){return e.onSlotActivated(t)}))("slotDeactivated",(function(){return e.onSlotDeactivated()}))("designedSvgMetadata",(function(t){return e.designedSvgMetadata.emit(t)}))("designedSvgReady",(function(){return e.viewerReady.emit()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"div",6),i["\u0275\u0275projection"](8,1),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("anchor",e.logoAnchor)("customLogo",e.customLogo),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("manipulations",e.designedSvgManipulations)("manipulatorToolsEnabled",e.manipulatorToolsEnabled)("allowSlotRemoval",e.allowSlotRemoval)("allowAdditionalSlotRemoval",e.allowAdditionalSlotRemoval)("designedSvgSrc",e.designedSvgSrc)("designedSvgData",e.designedSvgData)("designedSvgManipulations",e.designedSvgManipulations))},directives:[w.e,w.b,A.a,R.a,j.a],styles:[".designed-svg-viewer-container[_ngcontent-%COMP%]{position:relative;display:block;margin:auto 0;border-radius:6px;overflow:hidden;box-shadow:0 2px 9px rgba(0,0,0,.3)}.preview-container[_ngcontent-%COMP%]{margin:16px auto}"],changeDetection:0}),t})();var F=n("s7LF"),H=n("cKGL"),B=n("9sQ6"),N=n("Q2Ze"),$=n("i1AJ"),G=n("e6WT"),U=n("sj4O"),q=n("w8an");function Y(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",9),i["\u0275\u0275elementStart"](1,"div",10),i["\u0275\u0275elementStart"](2,"mg-overlay-nav-item",11),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"](),i["\u0275\u0275reference"](7).open()})),i["\u0275\u0275elementStart"](3,"span"),i["\u0275\u0275text"](4,"Close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"span",12),i["\u0275\u0275element"](6,"img",13),i["\u0275\u0275text"](7," | Create Your Design "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function Q(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",14),i["\u0275\u0275elementStart"](1,"mg-overlay-nav-item",15),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"](),i["\u0275\u0275reference"](7).open()})),i["\u0275\u0275elementStart"](2,"span"),i["\u0275\u0275text"](3,"Close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"mg-overlay-nav-item",16),i["\u0275\u0275element"](5,"img",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function W(t,e){1&t&&i["\u0275\u0275elementContainer"](0)}function J(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"mg-overlay-nav-item",18),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"]().previousStep()})),i["\u0275\u0275elementStart"](2,"span"),i["\u0275\u0275text"](3,"Back"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"mg-overlay-nav-item",19),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"]().nextStep()})),i["\u0275\u0275template"](5,W,1,0,"ng-container",20),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){i["\u0275\u0275nextContext"]();const t=i["\u0275\u0275reference"](4);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngClass.lt-sm","bottom-nav-has-image"),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngTemplateOutlet",t)}}function K(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",21),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"]().nextStep()})),i["\u0275\u0275text"](1," Preview "),i["\u0275\u0275elementStart"](2,"mg-icon"),i["\u0275\u0275text"](3,"right-arrow-active"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function Z(t,e){1&t&&i["\u0275\u0275elementContainer"](0)}function X(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mg-minga-designer-template-preview",24),i["\u0275\u0275elementStart"](1,"div",25),i["\u0275\u0275template"](2,Z,1,0,"ng-container",20),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t){const t=i["\u0275\u0275nextContext"](2),e=i["\u0275\u0275reference"](4);i["\u0275\u0275property"]("logoAnchor",t.logoAnchor)("customLogo",t.customLogo)("designedSvgSrc",null==t.template?null:t.template.templateSvgUrl)("designedSvgData",t.templateData)("designedSvgManipulations",t.templateManipulations),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngTemplateOutlet",e)}}function tt(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"div",22),i["\u0275\u0275template"](1,X,3,6,"mg-minga-designer-template-preview",23),i["\u0275\u0275elementEnd"]()),2&t){const t=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.draftReady)}}function et(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-form-field",28),i["\u0275\u0275elementStart"](1,"mat-label"),i["\u0275\u0275text"](2,"Title"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"input",29),i["\u0275\u0275listener"]("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"](2).titleText=e}))("ngModelChange",(function(){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"](2).onTitleTextChange()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"mat-hint"),i["\u0275\u0275text"](5,"This will go under the image you created. It will be the title of your post."),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){const t=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("mgMultiLineHint",!0),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngModel",t.titleText)}}function nt(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"form"),i["\u0275\u0275template"](1,et,6,2,"mat-form-field",26),i["\u0275\u0275elementStart"](2,"mg-body-input",27),i["\u0275\u0275listener"]("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"]().bodyText=e}))("ngModelChange",(function(){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"]().onBodyTextChange()})),i["\u0275\u0275pipe"](3,"hasPermission"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){const t=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("hasPermission","CONTENT_POST_SET_TITLE"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",t.bodyText)("maxlength",5e3)("richContent",i["\u0275\u0275pipeBind1"](3,4,"CONTENT_HTML_INCLUDE"))}}function ot(t,e){1&t&&i["\u0275\u0275element"](0,"mg-spinner",30)}let it=(()=>{class t extends m{constructor(t,e,n,o,i){super(e,t),this.router=e,this.mingaDesignerDraft=n,this.postProto=o,this._cdr=i,this._logoAnchor=p.LogoAnchor.LA_NONE,this._customLogo="",this.templateData={},this.templateManipulations={},this.titleText="",this.bodyText="",this.draftReady=!1,this.initDraft()}get logoAnchor(){return this._logoAnchor}get customLogo(){return this._customLogo}get template(){return this.routeData.template}closeOverlay(){this.router.navigate(["",{outlets:{o:null}}])}previousStep(){return Object(d.a)(this,void 0,void 0,(function*(){yield this.navigatePrevious()}))}nextStep(){return Object(d.a)(this,void 0,void 0,(function*(){yield this.mingaDesignerDraft.saveDraft({body:this.bodyText,title:this.titleText}),yield this.navigateNext()}))}initDraft(){return Object(d.a)(this,void 0,void 0,(function*(){this.draftReady=!1;try{const t=yield this.getDraft(this.mingaDesignerDraft);this.templateData=Object.assign({},t.studioContentInfo.designedSvg.svgData),this.templateManipulations=Object.assign({},t.studioContentInfo.designedSvg.svgManipulations);const e=void 0===t.title,n=void 0===t.body;if(this.titleText=t.title||"",this.bodyText=t.body||"",this._logoAnchor=t.logoAnchor||p.LogoAnchor.LA_NONE,this._customLogo=t.customLogoAssetId||"",this.routeData.contentHash&&(e||n)){const t=yield this._getPostInfo();e&&(this.titleText=t.getTitle()),n&&(this.bodyText=t.getBody())}}finally{this.draftReady=!0,this._cdr.markForCheck()}}))}onTitleTextChange(){this.mingaDesignerDraft.saveDraftDelayed({title:this.titleText}),this._cdr.markForCheck()}onBodyTextChange(){this.mingaDesignerDraft.saveDraftDelayed({body:this.bodyText}),this._cdr.markForCheck()}_getPostInfo(){const t=new p.ContentInfoQuery;return t.setContentHash(this.routeData.contentHash),this.postProto.getInfo(t)}}return t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](a.a),i["\u0275\u0275directiveInject"](a.g),i["\u0275\u0275directiveInject"](f),i["\u0275\u0275directiveInject"](x.Post),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["ng-component"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:11,vars:10,consts:[["class","overlay-header-container",4,"mgOverlayStructure","mgOverlayStructureRegion"],["class","top-nav nav-show-lt-max-width",4,"mgOverlayStructure","mgOverlayStructureRegion"],[4,"mgOverlayStructure","mgOverlayStructureRegion"],["nextButton",""],["class","split-content-container sticky",4,"mgOverlayStructure","mgOverlayStructureRegion"],[3,"cancel","keepGoing"],["cancelDialog",""],[4,"ngIf","ngIfElse"],["draftNotReady",""],[1,"overlay-header-container"],[1,"studio-title-header"],["icon","close",1,"mg-align-left",3,"click"],[1,"header-logo-container"],["src","assets/studio/studio-logo-white.png"],[1,"top-nav","nav-show-lt-max-width"],["icon","back",1,"mg-align-left",3,"click"],[1,"mg-align-right"],["src","assets/studio/studio-logo-white.png",1,"nav-mobile-studio-logo"],["icon","back",1,"mg-align-left",3,"ngClass.lt-sm","click"],["fxHide","","fxShow.lt-sm","",1,"mg-align-right",3,"click"],[4,"ngTemplateOutlet"],["mgBubbleBtn","",1,"mg-minicopy","next-button",3,"click"],[1,"split-content-container","sticky"],[3,"logoAnchor","customLogo","designedSvgSrc","designedSvgData","designedSvgManipulations",4,"ngIf"],[3,"logoAnchor","customLogo","designedSvgSrc","designedSvgData","designedSvgManipulations"],["fxHide","","fxShow.gt-xs","","previewBottom","",1,"preview-next-button-container"],["mgFormField","","class","title-input",3,"mgMultiLineHint",4,"hasPermission"],["name","body","placeholder","Share your thoughts...",3,"ngModel","maxlength","richContent","ngModelChange"],["mgFormField","",1,"title-input",3,"mgMultiLineHint"],["matInput","","autocomplete","off","name","titleText",3,"ngModel","ngModelChange"],["diameter","50","thickness","8",1,"loading-spinner"]],template:function(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275template"](0,Y,8,0,"div",0),i["\u0275\u0275template"](1,Q,6,0,"div",1),i["\u0275\u0275template"](2,J,6,2,"div",2),i["\u0275\u0275template"](3,K,4,0,"ng-template",null,3,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](5,tt,2,1,"div",4),i["\u0275\u0275elementStart"](6,"mg-minga-designer-cancel-dialog",5,6),i["\u0275\u0275listener"]("cancel",(function(){return e.closeOverlay()}))("keepGoing",(function(){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275reference"](7).close()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](8,nt,4,6,"form",7),i["\u0275\u0275template"](9,ot,1,0,"ng-template",null,8,i["\u0275\u0275templateRefExtractor"])}if(2&t){const t=i["\u0275\u0275reference"](10);i["\u0275\u0275property"]("mgOverlayStructure",!0)("mgOverlayStructureRegion","header"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("mgOverlayStructure",!0)("mgOverlayStructureRegion","top"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("mgOverlayStructure",!0)("mgOverlayStructureRegion","bottom"),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("mgOverlayStructure",!0)("mgOverlayStructureRegion","split-content"),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",e.draftReady)("ngIfElse",t)}},directives:[C.a,P,M.o,_.a,I.a,I.b,M.t,D.a,z,F.E,F.u,F.v,H.a,B.a,F.t,F.w,F.n,N.d,$.a,N.h,G.b,F.d,N.g,U.a],pipes:[q.a],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");@media (min-width:600px){.split-content-container[_ngcontent-%COMP%]{margin:32px}}.split-content-container.sticky[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:calc(32px + var(--overlay-header-height))}.loading-spinner[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.step-text[_ngcontent-%COMP%]{font-size:22px}.step-desc-text[_ngcontent-%COMP%], .step-text[_ngcontent-%COMP%]{font-weight:700;margin:4px 8px}.step-desc-text[_ngcontent-%COMP%]{font-size:16px}.step-header[_ngcontent-%COMP%]{margin:0 16px}.step-graphic[_ngcontent-%COMP%]{height:75px;margin:16px 0;width:100px;min-width:100px;background-repeat:no-repeat;background-position:50%;background-image:url(/assets/studio/poster-icon.svg)}@media (max-width:739px){.top-nav[_ngcontent-%COMP%]{background-color:#036;color:#fff}}@media (min-width:740px){.top-nav[_ngcontent-%COMP%], .top-nav.nav-show-lt-max-width[_ngcontent-%COMP%], .top-nav[_ngcontent-%COMP%]   .nav-show-lt-max-width[_ngcontent-%COMP%]{display:none}}.studio-title-header[_ngcontent-%COMP%]{background-color:#036;padding:12px;color:#fff;display:flex;align-items:center;justify-content:center;font-size:20px;font-weight:700;position:relative;border-top-right-radius:var(--overlay-border-radius,0);border-top-left-radius:var(--overlay-border-radius,0)}.studio-title-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:44px;display:inline-block}.studio-title-header[_ngcontent-%COMP%]   .header-logo-container[_ngcontent-%COMP%]{position:absolute;display:flex;align-items:center;left:50%;text-align:center;top:50%;transform:translate(-50%,-50%);white-space:nowrap}.studio-title-header[_ngcontent-%COMP%]   mg-overlay-nav-item[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.nav-mobile-studio-logo[_ngcontent-%COMP%]{height:33px}button.next-button[_ngcontent-%COMP%]{--mg-icon-size:12px}.preview-next-button-container[_ngcontent-%COMP%]{text-align:right;margin-top:24px;width:100%}.preview-next-button-container[_ngcontent-%COMP%]   button.next-button[_ngcontent-%COMP%]{font-size:20px;padding:16px 36px;--mg-icon-size:20px}.preview-next-button-container[_ngcontent-%COMP%]   button.next-button[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{margin-left:4px}.overlay-header-container[_ngcontent-%COMP%]{display:none}@media (min-width:740px){.overlay-header-container[_ngcontent-%COMP%]{display:block}}.mg-align-right[_ngcontent-%COMP%]{text-align:right}mg-swipe-container[_ngcontent-%COMP%]{display:block;min-height:100px;--mg-swipe-area-padding-bottom:84px}.page-scrollbar-container[_ngcontent-%COMP%]{position:absolute;overflow:hidden;bottom:32px;left:40px;right:40px;border-radius:12px;background-color:#f5f5f5}.page-scrollbar-container.has-bottom-nav[_ngcontent-%COMP%]{bottom:88px}.page-scrollbar-container[_ngcontent-%COMP%]   .page-scrollbar-transform[_ngcontent-%COMP%]{width:100%}.page-scrollbar-container[_ngcontent-%COMP%]   .page-scrollbar[_ngcontent-%COMP%]{height:24px;border-radius:12px;background-color:#ccc;transition:transform .3s ease}.horizontal-layout-container[_ngcontent-%COMP%]{position:relative}.horizontal-layout-container[_ngcontent-%COMP%]   .nav-arrow[_ngcontent-%COMP%]{top:calc(50% - 42px);position:absolute;z-index:10;--mg-icon-size:24px}.horizontal-layout-container[_ngcontent-%COMP%]   .left-arrow[_ngcontent-%COMP%]{left:0;transform:translateY(-50%)}.horizontal-layout-container[_ngcontent-%COMP%]   .right-arrow[_ngcontent-%COMP%]{right:0;transform:translateY(-50%)}mat-form-field.title-input[_ngcontent-%COMP%]{font-family:Muli,sans-serif;font-weight:700;line-height:1.35}@media (orientation:landscape){mat-form-field.title-input[_ngcontent-%COMP%]{font-size:3.8647342995vh}}@media (orientation:portrait){mat-form-field.title-input[_ngcontent-%COMP%]{font-size:3.8647342995vw}}@media (orientation:landscape) and (max-height:414px){mat-form-field.title-input[_ngcontent-%COMP%]{font-size:16px}}@media (orientation:portrait) and (max-width:414px){mat-form-field.title-input[_ngcontent-%COMP%]{font-size:16px}}@media (min-width:439.875px){mat-form-field.title-input[_ngcontent-%COMP%]{font-size:17px}}mg-body-input[_ngcontent-%COMP%]{font-family:Muli,sans-serif;line-height:1.35}@media (orientation:landscape){mg-body-input[_ngcontent-%COMP%]{font-size:3.1400966184vh}}@media (orientation:portrait){mg-body-input[_ngcontent-%COMP%]{font-size:3.1400966184vw}}@media (orientation:landscape) and (max-height:414px){mg-body-input[_ngcontent-%COMP%]{font-size:13px}}@media (orientation:portrait) and (max-width:414px){mg-body-input[_ngcontent-%COMP%]{font-size:13px}}@media (min-width:445.8461538462px){mg-body-input[_ngcontent-%COMP%]{font-size:14px}}form[_ngcontent-%COMP%]{display:block;margin:16px}mg-overlay-nav-item.botton-nav-has-image[_ngcontent-%COMP%], mg-overlay-nav-item.botton-nav-has-image[_ngcontent-%COMP%] + mg-overlay-nav-item[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.top-nav[_ngcontent-%COMP%]   .mg-align-right[_ngcontent-%COMP%]{padding-right:8px}'],changeDetection:0}),t})();var at=n("u9T3"),rt=n("CO6v"),st=n("HxU+"),lt=n("ls3q"),ct=(n("ppIK"),n("CL15")),gt=(n("Vwx4"),n("7Tcv")),dt=n("3ctL");let pt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[E.b,k.b,dt.a,M.c,at.a]]}),t})(),mt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[]]}),t})(),ut=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[ct.a,rt.a,mt,M.c,at.a]]}),t})();var ht=n("F5Qo"),vt=n("DSt7"),ft=n("oFih"),xt=n("/2Sv"),Ct=n("4Zvv"),yt=n("GFah"),St=n("zc8W"),wt=n("WH00"),bt=n("G1e9"),Ot=n("o4Yh"),Pt=n("MAbt"),Mt=n("A2eb"),_t=n("2YxT");function It(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",8),i["\u0275\u0275elementStart"](1,"div",9),i["\u0275\u0275elementStart"](2,"mg-overlay-nav-item",10),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"](),i["\u0275\u0275reference"](8).open()})),i["\u0275\u0275elementStart"](3,"span"),i["\u0275\u0275text"](4,"Close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"span",11),i["\u0275\u0275element"](6,"img",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function Dt(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",13),i["\u0275\u0275elementStart"](1,"mg-overlay-nav-item",10),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"](),i["\u0275\u0275reference"](8).open()})),i["\u0275\u0275elementStart"](2,"span"),i["\u0275\u0275text"](3,"Close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"mg-overlay-nav-item",14),i["\u0275\u0275element"](5,"img",15),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function kt(t,e){1&t&&i["\u0275\u0275elementContainer"](0)}function Et(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"mg-overlay-nav-item",16),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"]().previousStep()})),i["\u0275\u0275elementStart"](2,"span"),i["\u0275\u0275text"](3,"Back"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"mg-overlay-nav-item",17),i["\u0275\u0275listener"]("click",(function(e){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"]().nextStep(e)})),i["\u0275\u0275template"](5,kt,1,0,"ng-container",18),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){i["\u0275\u0275nextContext"]();const t=i["\u0275\u0275reference"](4);i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngTemplateOutlet",t)}}function Tt(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",19),i["\u0275\u0275listener"]("click",(function(e){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"]().nextStep(e)})),i["\u0275\u0275text"](1," Publish "),i["\u0275\u0275elementStart"](2,"mg-icon"),i["\u0275\u0275text"](3,"right-arrow-active"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function At(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",20),i["\u0275\u0275elementStart"](1,"mat-expansion-panel",21),i["\u0275\u0275elementStart"](2,"mat-expansion-panel-header"),i["\u0275\u0275elementStart"](3,"mat-panel-title",22),i["\u0275\u0275text"](4," Additional Publish Settings "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"mg-content-manager-publish-info-editor",23,24),i["\u0275\u0275listener"]("publishInfoEditComponentReady",(function(e){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"]().onPublishInfoEditComponentReady(e)}))("publishInfoChange",(function(e){i["\u0275\u0275restoreView"](t);const n=i["\u0275\u0275reference"](6);return i["\u0275\u0275nextContext"]().onPublishInfoChange(e,n)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){const t=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("expanded",t.initiallyExpanded),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("publishInfoEditorComponentType",t.publishInfoEditComponentType)}}function Rt(t,e){1&t&&i["\u0275\u0275element"](0,"mg-post-short-card",29),2&t&&i["\u0275\u0275property"]("content",e.ngIf)}function jt(t,e){1&t&&i["\u0275\u0275elementContainer"](0)}function Lt(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"div",25),i["\u0275\u0275elementStart"](1,"div",26),i["\u0275\u0275template"](2,Rt,1,1,"mg-post-short-card",27),i["\u0275\u0275elementStart"](3,"div",28),i["\u0275\u0275template"](4,jt,1,0,"ng-container",18),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t){const t=i["\u0275\u0275nextContext"](),e=i["\u0275\u0275reference"](4);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.previewContent),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngTemplateOutlet",e)}}let Vt=(()=>{class t extends m{constructor(t,e,n,o,i,a,r,s,l){var c;super(n,t),this.rootService=e,this.router=n,this.mingaDesignerDraft=o,this.authInfo=i,this.postProto=a,this.contentEvents=r,this._cdr=s,this.contentModerationInterstitial=l,this._publishInfo={},this.previewContent=(new ft.ShortCardView).toObject(),this.publishDate=null,this.unpublishDate=null,this.pinned=!1,this.pinDays=1,this.endPinDate=null,this.initiallyExpanded=window.MINGA_APP_BROWSER,this.publishInfoEditComponents=[],this.publishInfoEditComponentType=null===(c=this.routeData.contentManager)||void 0===c?void 0:c.getPublishInfoEditComponent(),this.initDraft()}get template(){return this.routeData.template}ngOnInit(){setTimeout(()=>this.initPublishInfo(),0)}hasPublishInfoEditComponents(){return this.publishInfoEditComponents.length>0}setPublishInfo(t){this._publishInfo=t,this.publishInfoEditComponents.forEach(e=>e.setPublishInfo(t))}getPublishInfo(){return this.getLastPublishInfoEditComponent().getPublishInfo()}getPartialPublishInfo(){let t=0,e={};for(const n of this.publishInfoEditComponents){const o=n.getPartialPublishInfo(),i=Object.keys(o).length;i>t&&(e=o,t=i)}return e}onPublishInfoEditComponentReady(t){this.publishInfoEditComponents.push(t),t.setPublishInfo(this._publishInfo)}onPublishInfoChange(t,e){for(const n of this.publishInfoEditComponents)n!==e.publishInfoEditComponent&&n.setPublishInfo(t)}closeOverlay(){this.router.navigate(["",{outlets:{o:null}}])}previousStep(){return Object(d.a)(this,void 0,void 0,(function*(){yield this.navigatePrevious()}))}_create(){var t;return Object(d.a)(this,void 0,void 0,(function*(){const e=yield this.getDraft(this.mingaDesignerDraft),n=new vt.PostInfo;n.setBody(e.body||""),n.setTitle(e.title||""),n.setLogoAnchor(e.logoAnchor||p.LogoAnchor.LA_NONE),n.setCustomLogoAsset(e.customLogoAssetId||""),n.setStudioContentInfo(xt.StudioContentInfoMapper.fromIStudioContentInfo(e.studioContentInfo));const o=(yield this.postProto.new(n)).getContentHash(),i=this.hasPublishInfoEditComponents()?this.getPublishInfo():this.routeData.contentManager.getDefaultPublishInfo();return yield null===(t=this.routeData.contentManager)||void 0===t?void 0:t.addContent(o,i)}))}_getPostInfo(){const t=new p.ContentInfoQuery;return t.setContentHash(this.routeData.contentHash),this.postProto.getInfo(t)}_update(){return Object(d.a)(this,void 0,void 0,(function*(){const t=yield this._getPostInfo(),e=yield this.getDraft(this.mingaDesignerDraft),n=new vt.DeltaPostInfo;if(n.setContentHash(this.routeData.contentHash),void 0!==e.body&&t.getBody()!=e.body){const t=new ht.StringDelta;t.setNewString(e.body||""),n.setBody(t)}if(void 0!==e.title&&t.getTitle()!=e.title){const t=new ht.StringDelta;t.setNewString(e.title||""),n.setTitle(t)}if(void 0!==e.logoAnchor&&t.getLogoAnchor()!=e.logoAnchor){const t=new p.LogoAnchorDelta;t.setNewLogoAnchor(e.logoAnchor||0),n.setLogoAnchor(t)}if(void 0!==e.customLogoAssetId&&t.getCustomLogoAsset()!=e.customLogoAssetId){const t=new ht.StringDelta;t.setNewString(e.customLogoAssetId||""),n.setCustomLogoAsset(t)}n.setStudioContentInfo(xt.StudioContentInfoMapper.fromIStudioContentInfo(e.studioContentInfo));let o=null;if(this.hasPublishInfoEditComponents()){const t=this.getPartialPublishInfo();Object.keys(t).length>0&&(o=yield this.routeData.contentManager.moveContent(this.routeData.contentHash,t))}const i=yield this.postProto.update(n);let a;if(o)a=o;else{const t=i.hasModerationResult()?Ct.ModerationResultMapper.toIModerationResult(i.getModerationResult()):null;a={contentContextHash:i.getContentContextHash(),moderationResult:t}}return a}))}_save(){return Object(d.a)(this,void 0,void 0,(function*(){let t;return this.routeData.contentHash?(t=yield this._update(),this.contentEvents.emitPostUpdateSuccess({typeString:"post",date:this.publishDate||void 0,endDate:this.unpublishDate||void 0})):(t=yield this._create(),this.contentEvents.emitPostCreateSuccess({typeString:"post",date:this.publishDate||void 0,endDate:this.unpublishDate||void 0})),t}))}_nextStep(){return Object(d.a)(this,void 0,void 0,(function*(){const t=yield this._save();t.moderationResult&&this.contentModerationInterstitial.trigger(this.routeData.contentHash,t.contentContextHash,t.moderationResult),yield this.mingaDesignerDraft.clearDraft(),this.contentEvents.emitContentFeedsUpdate(),yield this.router.navigate(["",{outlets:{o:null}}])}))}nextStep(t){t&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()),this.rootService.addLoadingPromise(this._nextStep())}initPublishInfo(){return Object(d.a)(this,void 0,void 0,(function*(){if(this.routeData.contentHash){const t=yield this.routeData.contentManager.getPublishInfo(this.routeData.contentHash);t&&this.setPublishInfo(t),this._cdr.markForCheck()}}))}initDraft(){var t;return Object(d.a)(this,void 0,void 0,(function*(){console.log("route info",this.routeData);try{const e=yield this.getDraft(this.mingaDesignerDraft);let n;if(console.log("initdraft",e),e.customLogoAssetId&&(n={sizeMap:[["raw",{width:100,height:100,path:e.customLogoAssetId}]]}),this.previewContent=Object.assign(Object.assign({},this.previewContent),{timestamp:Date.now(),body:e.body||"",title:e.title||"",logoAnchor:e.logoAnchor,customLogoImage:n,designedSvg:xt.DesignedSvgMapper.fromIDesignedSvg(e.studioContentInfo.designedSvg).toObject()}),null===(t=this.authInfo.authInfo)||void 0===t?void 0:t.person){const t=this.authInfo.authInfo.person;this.previewContent.authorAvatarUrl=t.profileImageUrl,this.previewContent.authorDisplayName=t.displayName,this.previewContent.authorIconColor=t.badgeIconColor,this.previewContent.authorIconUrl=t.badgeIconUrl,this.previewContent.authorRoleName=t.badgeRoleName,this.previewContent.authorPersonView=Object.assign({},t)}}finally{this._cdr.markForCheck()}}))}getLastPublishInfoEditComponent(){return this.publishInfoEditComponents[this.publishInfoEditComponents.length-1]}}return t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](a.a),i["\u0275\u0275directiveInject"](yt.a),i["\u0275\u0275directiveInject"](a.g),i["\u0275\u0275directiveInject"](f),i["\u0275\u0275directiveInject"](St.a),i["\u0275\u0275directiveInject"](x.Post),i["\u0275\u0275directiveInject"](wt.a),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](bt.a))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["ng-component"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:9,vars:10,consts:[["class","overlay-header-container",4,"mgOverlayStructure","mgOverlayStructureRegion"],["class","top-nav",4,"mgOverlayStructure","mgOverlayStructureRegion"],[4,"mgOverlayStructure","mgOverlayStructureRegion"],["publishButton",""],["class","publish-controls-container",4,"mgOverlayStructure","mgOverlayStructureRegion"],["class","split-content-container sticky",4,"mgOverlayStructure","mgOverlayStructureRegion"],[3,"cancel","keepGoing"],["cancelDialog",""],[1,"overlay-header-container"],[1,"studio-title-header"],["icon","close",1,"mg-align-left",3,"click"],[1,"header-logo-container"],["src","assets/studio/studio-logo-white.png"],[1,"top-nav"],[1,"mg-align-right","nav-show-lt-max-width"],["src","assets/studio/studio-logo-white.png",1,"nav-mobile-studio-logo"],["icon","back",1,"mg-align-left",3,"click"],["fxHide","","fxShow.lt-sm","",1,"mg-align-right",3,"click"],[4,"ngTemplateOutlet"],["mgBubbleBtn","",1,"mg-minicopy","next-button",3,"click"],[1,"publish-controls-container"],["mgExpansionPanel","",3,"expanded"],[1,"mg-headline2"],[3,"publishInfoEditorComponentType","publishInfoEditComponentReady","publishInfoChange"],["publishInfoEditor",""],[1,"split-content-container","sticky"],[1,"preview-short-card-container"],[3,"content",4,"ngIf"],["fxHide","","fxShow.gt-xs","","previewBottom","",1,"preview-next-button-container"],[3,"content"]],template:function(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275template"](0,It,7,0,"div",0),i["\u0275\u0275template"](1,Dt,6,0,"div",1),i["\u0275\u0275template"](2,Et,6,1,"div",2),i["\u0275\u0275template"](3,Tt,4,0,"ng-template",null,3,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](5,At,7,2,"div",4),i["\u0275\u0275template"](6,Lt,5,2,"div",5),i["\u0275\u0275elementStart"](7,"mg-minga-designer-cancel-dialog",6,7),i["\u0275\u0275listener"]("cancel",(function(){return e.closeOverlay()}))("keepGoing",(function(){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275reference"](8).close()})),i["\u0275\u0275elementEnd"]()}2&t&&(i["\u0275\u0275property"]("mgOverlayStructure",!0)("mgOverlayStructureRegion","header"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("mgOverlayStructure",!0)("mgOverlayStructureRegion","top"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("mgOverlayStructure",!0)("mgOverlayStructureRegion","bottom"),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("mgOverlayStructure",e.publishInfoEditComponentType)("mgOverlayStructureRegion","bottom"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("mgOverlayStructure",!0)("mgOverlayStructureRegion","split-content"))},directives:[C.a,P,_.a,I.b,M.t,D.a,Ot.c,Pt.a,Ot.f,Ot.g,Mt.a,M.o,_t.a],styles:["@media (min-width:600px){.split-content-container[_ngcontent-%COMP%]{margin:32px}}.split-content-container.sticky[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:calc(32px + var(--overlay-header-height))}.loading-spinner[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.step-text[_ngcontent-%COMP%]{font-size:22px}.step-desc-text[_ngcontent-%COMP%], .step-text[_ngcontent-%COMP%]{font-weight:700;margin:4px 8px}.step-desc-text[_ngcontent-%COMP%]{font-size:16px}.step-header[_ngcontent-%COMP%]{margin:0 16px}.step-graphic[_ngcontent-%COMP%]{height:75px;margin:16px 0;width:100px;min-width:100px;background-repeat:no-repeat;background-position:50%;background-image:url(/assets/studio/poster-icon.svg)}@media (max-width:739px){.top-nav[_ngcontent-%COMP%]{background-color:#036;color:#fff}}@media (min-width:740px){.top-nav[_ngcontent-%COMP%], .top-nav.nav-show-lt-max-width[_ngcontent-%COMP%], .top-nav[_ngcontent-%COMP%]   .nav-show-lt-max-width[_ngcontent-%COMP%]{display:none}}.studio-title-header[_ngcontent-%COMP%]{background-color:#036;padding:12px;color:#fff;display:flex;align-items:center;justify-content:center;font-size:20px;font-weight:700;position:relative;border-top-right-radius:var(--overlay-border-radius,0);border-top-left-radius:var(--overlay-border-radius,0)}.studio-title-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:44px;display:inline-block}.studio-title-header[_ngcontent-%COMP%]   .header-logo-container[_ngcontent-%COMP%]{position:absolute;display:flex;align-items:center;left:50%;text-align:center;top:50%;transform:translate(-50%,-50%);white-space:nowrap}.studio-title-header[_ngcontent-%COMP%]   mg-overlay-nav-item[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.nav-mobile-studio-logo[_ngcontent-%COMP%]{height:33px}button.next-button[_ngcontent-%COMP%]{--mg-icon-size:12px}.preview-next-button-container[_ngcontent-%COMP%]{text-align:right;margin-top:24px;width:100%}.preview-next-button-container[_ngcontent-%COMP%]   button.next-button[_ngcontent-%COMP%]{font-size:20px;padding:16px 36px;--mg-icon-size:20px}.preview-next-button-container[_ngcontent-%COMP%]   button.next-button[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{margin-left:4px}.overlay-header-container[_ngcontent-%COMP%]{display:none}@media (min-width:740px){.overlay-header-container[_ngcontent-%COMP%]{display:block}}.mg-align-right[_ngcontent-%COMP%]{text-align:right}mg-swipe-container[_ngcontent-%COMP%]{display:block;min-height:100px;--mg-swipe-area-padding-bottom:84px}.page-scrollbar-container[_ngcontent-%COMP%]{position:absolute;overflow:hidden;bottom:32px;left:40px;right:40px;border-radius:12px;background-color:#f5f5f5}.page-scrollbar-container.has-bottom-nav[_ngcontent-%COMP%]{bottom:88px}.page-scrollbar-container[_ngcontent-%COMP%]   .page-scrollbar-transform[_ngcontent-%COMP%]{width:100%}.page-scrollbar-container[_ngcontent-%COMP%]   .page-scrollbar[_ngcontent-%COMP%]{height:24px;border-radius:12px;background-color:#ccc;transition:transform .3s ease}.horizontal-layout-container[_ngcontent-%COMP%]{position:relative}.horizontal-layout-container[_ngcontent-%COMP%]   .nav-arrow[_ngcontent-%COMP%]{top:calc(50% - 42px);position:absolute;z-index:10;--mg-icon-size:24px}.horizontal-layout-container[_ngcontent-%COMP%]   .left-arrow[_ngcontent-%COMP%]{left:0;transform:translateY(-50%)}.horizontal-layout-container[_ngcontent-%COMP%]   .right-arrow[_ngcontent-%COMP%]{right:0;transform:translateY(-50%)}.preview-short-card-container[_ngcontent-%COMP%]{max-width:510px;margin:auto}.publish-controls-container[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]{border-bottom:1px solid #ccc;padding:4px 24px;width:100%}mg-overlay-nav-item[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.top-nav[_ngcontent-%COMP%]   .mg-align-right[_ngcontent-%COMP%]{padding-right:8px}"],changeDetection:0}),t})();var zt=n("Ji8J"),Ft=n("fy1K"),Ht=n("cOAp"),Bt=n("zkd0"),Nt=n("17/J");let $t=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[ct.a,Nt.a,zt.a,Ft.a,Bt.a,ut,Ht.a,lt.a,M.c,a.k,Ot.b,at.a]]}),t})();var Gt=n("YjH6"),Ut=n("PLeU"),qt=n("dCoo"),Yt=n("ZTz/"),Qt=n("UhP/"),Wt=n("fJ21");const Jt=["templatePreview"],Kt=["designedSvgEditor"];function Zt(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",8),i["\u0275\u0275elementStart"](1,"div",9),i["\u0275\u0275elementStart"](2,"mg-overlay-nav-item",10),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"](),i["\u0275\u0275reference"](7).open()})),i["\u0275\u0275elementStart"](3,"span"),i["\u0275\u0275text"](4,"Close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"span",11),i["\u0275\u0275element"](6,"img",12),i["\u0275\u0275text"](7," | Create Your Design "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function Xt(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",13),i["\u0275\u0275elementStart"](1,"mg-overlay-nav-item",10),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"](),i["\u0275\u0275reference"](7).open()})),i["\u0275\u0275elementStart"](2,"span"),i["\u0275\u0275text"](3,"Close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"mg-overlay-nav-item",14),i["\u0275\u0275element"](5,"img",15),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function te(t,e){1&t&&i["\u0275\u0275elementContainer"](0)}function ee(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"mg-overlay-nav-item",16),i["\u0275\u0275listener"]("click",(function(e){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"]().onClickBack(e)})),i["\u0275\u0275elementStart"](2,"span"),i["\u0275\u0275text"](3,"Back"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"mg-overlay-nav-item",17),i["\u0275\u0275listener"]("click",(function(e){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"]().onClickNext(e)})),i["\u0275\u0275template"](5,te,1,0,"ng-container",18),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){i["\u0275\u0275nextContext"]();const t=i["\u0275\u0275reference"](4);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngClass.lt-sm","bottom-nav-has-image"),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngTemplateOutlet",t)}}function ne(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",19),i["\u0275\u0275listener"]("click",(function(e){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"]().onClickNext(e)})),i["\u0275\u0275text"](1," Next "),i["\u0275\u0275elementStart"](2,"mg-icon"),i["\u0275\u0275text"](3,"right-arrow-active"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function oe(t,e){1&t&&i["\u0275\u0275elementContainer"](0)}function ie(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mg-minga-designer-template-preview",22,23),i["\u0275\u0275listener"]("designedSvgManipulationsChange",(function(e){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"](2).onTemplateManipulationsChange(e)}))("slotActivated",(function(e){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"](2).onSlotActivated(e)}))("slotDeactivated",(function(){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"](2).onSlotDeactivated()}))("designedSvgMetadata",(function(e){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"](2).onTemplateMetadataChange(e)}))("viewerReady",(function(){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"](2).onViewerReady()})),i["\u0275\u0275elementStart"](2,"div",24),i["\u0275\u0275template"](3,oe,1,0,"ng-container",18),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){const t=i["\u0275\u0275nextContext"](2),e=i["\u0275\u0275reference"](4);i["\u0275\u0275property"]("logoAnchor",t.logoAnchor)("customLogo",t.selectedLogoAssetId)("manipulatorToolsEnabled",t.designedSvgManipulatorToolsEnabled)("allowAdditionalSlotRemoval",!0)("designedSvgSrc",null==t.template?null:t.template.templateSvgUrl)("designedSvgData",t.templateData)("designedSvgManipulations",t.templateManipulations),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngTemplateOutlet",e)}}function ae(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"div",20),i["\u0275\u0275template"](1,ie,4,8,"mg-minga-designer-template-preview",21),i["\u0275\u0275elementEnd"]()),2&t){const t=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.draftReady)}}function re(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mg-image-library-stream",31),i["\u0275\u0275listener"]("selectedAssetIdChange",(function(e){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"](2).selectedLogoAssetId=e}))("selectedAssetIdChange",(function(){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"](2).onSelectedLogoAssetIdChange()})),i["\u0275\u0275elementEnd"]()}if(2&t){const t=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("selectedAssetId",t.selectedLogoAssetId)}}function se(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"mg-designed-svg-editor",25,26),i["\u0275\u0275listener"]("designedSvgDataChange",(function(e){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"]().templateData=e}))("designedSvgDataChange",(function(e){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"]().onTemplateDataChange(e)}))("selectedStickerChange",(function(e){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"]().onSelectedStockStickerChange(e)}))("requestNewTextSlot",(function(){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"]().onRequestNewTextSlot()}))("requestNewImageSlot",(function(e){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"]().onRequestNewImageSlot(e)})),i["\u0275\u0275elementStart"](3,"mg-designed-svg-editor-logo-edit"),i["\u0275\u0275elementStart"](4,"mat-form-field",27),i["\u0275\u0275elementStart"](5,"mat-select",28),i["\u0275\u0275listener"]("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"]().logoAnchor=e})),i["\u0275\u0275elementStart"](6,"mat-option",29),i["\u0275\u0275text"](7," No Logo "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"mat-option",29),i["\u0275\u0275text"](9," Show Logo - Bottom Left "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"mat-option",29),i["\u0275\u0275text"](11," Show Logo - Bottom Right "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"mat-option",29),i["\u0275\u0275text"](13," Show Logo - Top Left "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"mat-option",29),i["\u0275\u0275text"](15," Show Logo - Top Right "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"mat-option",29),i["\u0275\u0275text"](17," Show Logo - Bottom Center "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](18,"mat-option",29),i["\u0275\u0275text"](19," Show Logo - Top Center "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](20,re,1,1,"mg-image-library-stream",30),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&t){const t=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("designedSvgMetadata",t.templateMetadata)("designedSvgData",t.templateData)("activeSlotId",t.selectedSlotId)("textValidator",t.textValidator)("defaultSlotFontSize",t.defaultSlotFontSize)("defaultSlotTextColor",t.defaultSlotTextColor)("svgViewportScale",t.svgViewportScale),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngModel",t.logoAnchor),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("value",t.LogoAnchor.LA_NONE),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("value",t.LogoAnchor.LA_BTM_LEFT),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("value",t.LogoAnchor.LA_BTM_RIGHT),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("value",t.LogoAnchor.LA_TOP_LEFT),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("value",t.LogoAnchor.LA_TOP_RIGHT),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("value",t.LogoAnchor.LA_BTM_CENTER),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("value",t.LogoAnchor.LA_TOP_CENTER),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.logoAnchor!=t.LogoAnchor.LA_NONE)}}let le=(()=>{class t extends m{constructor(t,e,n,o){super(e,t),this.router=e,this.mingaDesignerDraft=n,this._cdr=o,this._svgViewportScale=0,this.LogoAnchor=p.LogoAnchor,this.draftReady=!1,this.templateData={},this.templateManipulations={},this.templateMetadata=null,this.templateStockImageSlots=[],this.logoAnchor=p.LogoAnchor.LA_NONE,this.selectedLogoAssetId="",this.selectedSlotId="",this.defaultSlotFontSize=0,this.defaultSlotTextColor="",this.initDraft(),this.textValidator=(t,e)=>this.validateText(t,e)}get template(){return this.routeData.template}get isEditing(){return!!this.routeData.contentHash}get designedSvgManipulatorToolsEnabled(){return k.c.All}get svgViewportScale(){return this._svgViewportScale}calcSvgViewportScale(){this.templatePreview&&this.templatePreview.svgViewer&&(this._svgViewportScale=this.templatePreview.svgViewer.getSvgViewportFactor())}onViewerReady(){if(!this.templatePreview)return;const t=this.templatePreview.svgViewer.getTextSlotDefaultStyles();this.defaultSlotFontSize=t.fontSize,this.defaultSlotTextColor=t.color,this.calcSvgViewportScale(),this._cdr.markForCheck()}validateText(t,e){return{tooLong:!1,valid:!0}}initDraft(){return Object(d.a)(this,void 0,void 0,(function*(){this.draftReady=!1;try{const t=yield this.getDraft(this.mingaDesignerDraft);this.templateData=t.studioContentInfo.designedSvg.svgData,this.templateManipulations=t.studioContentInfo.designedSvg.svgManipulations||{},this.templateStockImageSlots=t.studioContentInfo.designedSvg.stockImageSlots||[],this.logoAnchor=t.logoAnchor||p.LogoAnchor.LA_NONE,this.selectedLogoAssetId=t.customLogoAssetId||""}finally{this.draftReady=!0,this._cdr.markForCheck()}}))}isTemplateDataFilledIn(){if(!this.templateMetadata)return!1;const t=[...this.templateMetadata.backgroundSlots,...this.templateMetadata.imageSlots,...this.templateMetadata.textSlots];for(const e of t)if(!this.templateData[e.fullId])return!1;return!0}saveDraft(){return Object(d.a)(this,void 0,void 0,(function*(){yield this.mingaDesignerDraft.saveDraft({logoAnchor:this.logoAnchor,customLogoAssetId:this.selectedLogoAssetId,studioContentInfo:{designedSvg:{svgData:this.templateData,svgManipulations:this.templateManipulations,stockImageSlots:this.templateStockImageSlots}}})}))}saveDraftDelayed(){this.mingaDesignerDraft.saveDraftDelayed({logoAnchor:this.logoAnchor,customLogoAssetId:this.selectedLogoAssetId,studioContentInfo:{designedSvg:{svgData:this.templateData,svgManipulations:this.templateManipulations,stockImageSlots:this.templateStockImageSlots}}})}onFinish(){return Object(d.a)(this,void 0,void 0,(function*(){yield this.saveDraft(),yield this.navigateNext()}))}backToTemplateSelect(){return Object(d.a)(this,void 0,void 0,(function*(){yield this.navigatePrevious()}))}onCancelConfirm(t){this.mingaDesignerDraft.clearDraft(),this.isEditing||!t.cancelToTemplateSelect?Object(Ut.a)(this.router):this.backToTemplateSelect()}onClickNext(t){this.svgEditor&&this.onFinish()}onClickBack(t){var e;this.svgEditor&&(null===(e=this.cancelDialog)||void 0===e||e.open({cancelToTemplateSelect:!0}))}onTemplateMetadataChange(t){if(this.templateMetadata=t,!this.routeData.contentHash){const e=[...t.textSlots,...t.backgroundSlots];for(const t of e)this.templateData[t.fullId]||(this.templateData[t.fullId]=t.defaultValue);this.templateData=Object.assign({},this.templateData)}if(0==this.templateStockImageSlots.length){let t=!1;for(const e of this.templateMetadata.imageSlots){const n=e.fullId;this.templateData[n]&&(t=!0,this.templateData[n]==e.defaultValue&&this.templateStockImageSlots.push(n))}if(!t)for(const e of this.templateMetadata.imageSlots){const t=e.fullId;this.templateStockImageSlots.push(t),this.templateData[t]=e.defaultValue}}this._cdr.markForCheck()}onTemplateManipulationsChange(t){this.templateManipulations=Object.assign({},t),this._cdr.markForCheck(),this.saveDraftDelayed()}onTemplateDataChange(t){this.templateData=t,this._cdr.markForCheck(),this.saveDraftDelayed()}onTemplateBackgroundUpdated(){}onSelectedStockStickerChange(t){var e;if(!t)return;const n=null===(e=this.templatePreview)||void 0===e?void 0:e.svgViewer;if(!n)return;let o=100,i="";const a=t;if(a)for(const[r,s]of a.sizeMap)if("raw"===r){o*=s.width/s.height,i=s.path;break}i&&(n.addAdditionalSlot("img",{src:i,width:o,height:100,type:"sticker"}),this.saveDraftDelayed())}onSelectedLogoAssetIdChange(){this.saveDraftDelayed(),this._cdr.markForCheck()}onSlotActivated(t){var e,n,o,i;switch(this.selectedSlotId=t.slotId,t.slotType){case"txt":null===(e=this.svgEditor)||void 0===e||e.gotoTextTab();break;case"bg":null===(n=this.svgEditor)||void 0===n||n.gotoBackgroundTab();break;case"img":"sticker"===t.imageSlotType?null===(o=this.svgEditor)||void 0===o||o.gotoElementsTab():null===(i=this.svgEditor)||void 0===i||i.gotoImageTab()}}onSlotDeactivated(){this.selectedSlotId="",this._cdr.markForCheck()}onRequestNewTextSlot(){var t;if(null===(t=this.templatePreview)||void 0===t?void 0:t.svgViewer){const t="Text",e=this.templatePreview.svgViewer.getDefaultTextSlotValue()||t;"string"!=typeof e&&(e.text=t),this.templatePreview.svgViewer.addAdditionalSlot("txt",e)}}onRequestNewImageSlot(t){var e,n;null===(n=null===(e=this.templatePreview)||void 0===e?void 0:e.svgViewer)||void 0===n||n.addAdditionalSlot("img",t)}}return t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](a.a),i["\u0275\u0275directiveInject"](a.g),i["\u0275\u0275directiveInject"](f),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&(i["\u0275\u0275viewQuery"](P,3),i["\u0275\u0275viewQuery"](Gt.a,1),i["\u0275\u0275viewQuery"](Jt,1),i["\u0275\u0275viewQuery"](Kt,1)),2&t){let t;i["\u0275\u0275queryRefresh"](t=i["\u0275\u0275loadQuery"]())&&(e.cancelDialog=t.first),i["\u0275\u0275queryRefresh"](t=i["\u0275\u0275loadQuery"]())&&(e.svgEditor=t.first),i["\u0275\u0275queryRefresh"](t=i["\u0275\u0275loadQuery"]())&&(e.templatePreview=t.first),i["\u0275\u0275queryRefresh"](t=i["\u0275\u0275loadQuery"]())&&(e.designedSvgEditor=t.first)}},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:9,vars:9,consts:[["class","overlay-header-container",4,"mgOverlayStructure","mgOverlayStructureRegion"],["class","top-nav",4,"mgOverlayStructure","mgOverlayStructureRegion"],[4,"mgOverlayStructure","mgOverlayStructureRegion"],["nextButton",""],["class","split-content-container sticky",4,"mgOverlayStructure","mgOverlayStructureRegion"],[3,"cancel","keepGoing"],["cancelDialog",""],[4,"ngIf"],[1,"overlay-header-container"],[1,"studio-title-header"],["icon","close",1,"mg-align-left",3,"click"],[1,"header-logo-container"],["src","assets/studio/studio-logo-white.png"],[1,"top-nav"],[1,"mg-align-right"],["src","assets/studio/studio-logo-white.png",1,"nav-mobile-studio-logo"],["icon","back",1,"mg-align-left",3,"ngClass.lt-sm","click"],["fxHide","","fxShow.lt-sm","",1,"mg-align-right",3,"click"],[4,"ngTemplateOutlet"],["mgBubbleBtn","",1,"mg-minicopy","next-button",3,"click"],[1,"split-content-container","sticky"],[3,"logoAnchor","customLogo","manipulatorToolsEnabled","allowAdditionalSlotRemoval","designedSvgSrc","designedSvgData","designedSvgManipulations","designedSvgManipulationsChange","slotActivated","slotDeactivated","designedSvgMetadata","viewerReady",4,"ngIf"],[3,"logoAnchor","customLogo","manipulatorToolsEnabled","allowAdditionalSlotRemoval","designedSvgSrc","designedSvgData","designedSvgManipulations","designedSvgManipulationsChange","slotActivated","slotDeactivated","designedSvgMetadata","viewerReady"],["templatePreview",""],["fxHide","","fxShow.gt-xs","","previewBottom","",1,"preview-next-button-container"],[3,"designedSvgMetadata","designedSvgData","activeSlotId","textValidator","defaultSlotFontSize","defaultSlotTextColor","svgViewportScale","designedSvgDataChange","selectedStickerChange","requestNewTextSlot","requestNewImageSlot"],["designedSvgEditor",""],["mgFormField",""],[3,"ngModel","ngModelChange"],[3,"value"],["tag","logo",3,"selectedAssetId","selectedAssetIdChange",4,"ngIf"],["tag","logo",3,"selectedAssetId","selectedAssetIdChange"]],template:function(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275template"](0,Zt,8,0,"div",0),i["\u0275\u0275template"](1,Xt,6,0,"div",1),i["\u0275\u0275template"](2,ee,6,2,"div",2),i["\u0275\u0275template"](3,ne,4,0,"ng-template",null,3,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](5,ae,2,1,"div",4),i["\u0275\u0275elementStart"](6,"mg-minga-designer-cancel-dialog",5,6),i["\u0275\u0275listener"]("cancel",(function(t){return e.onCancelConfirm(t)}))("keepGoing",(function(){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275reference"](7).close()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](8,se,21,16,"ng-container",7)}2&t&&(i["\u0275\u0275property"]("mgOverlayStructure",!0)("mgOverlayStructureRegion","header"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("mgOverlayStructure",!0)("mgOverlayStructureRegion","top"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("mgOverlayStructure",!0)("mgOverlayStructureRegion","bottom"),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("mgOverlayStructure",!0)("mgOverlayStructureRegion","split-content"),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",e.templateMetadata))},directives:[C.a,P,M.o,_.a,I.a,I.b,M.t,D.a,z,qt.a,qt.b,N.d,$.a,Yt.a,F.t,F.w,Qt.m,Wt.a],styles:["@media (min-width:600px){.split-content-container[_ngcontent-%COMP%]{margin:32px}}.split-content-container.sticky[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:calc(32px + var(--overlay-header-height))}.loading-spinner[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.step-text[_ngcontent-%COMP%]{font-size:22px}.step-desc-text[_ngcontent-%COMP%], .step-text[_ngcontent-%COMP%]{font-weight:700;margin:4px 8px}.step-desc-text[_ngcontent-%COMP%]{font-size:16px}.step-header[_ngcontent-%COMP%]{margin:0 16px}.step-graphic[_ngcontent-%COMP%]{height:75px;margin:16px 0;width:100px;min-width:100px;background-repeat:no-repeat;background-position:50%;background-image:url(/assets/studio/poster-icon.svg)}@media (max-width:739px){.top-nav[_ngcontent-%COMP%]{background-color:#036;color:#fff}}@media (min-width:740px){.top-nav[_ngcontent-%COMP%], .top-nav.nav-show-lt-max-width[_ngcontent-%COMP%], .top-nav[_ngcontent-%COMP%]   .nav-show-lt-max-width[_ngcontent-%COMP%]{display:none}}.studio-title-header[_ngcontent-%COMP%]{background-color:#036;padding:12px;color:#fff;display:flex;align-items:center;justify-content:center;font-size:20px;font-weight:700;position:relative;border-top-right-radius:var(--overlay-border-radius,0);border-top-left-radius:var(--overlay-border-radius,0)}.studio-title-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:44px;display:inline-block}.studio-title-header[_ngcontent-%COMP%]   .header-logo-container[_ngcontent-%COMP%]{position:absolute;display:flex;align-items:center;left:50%;text-align:center;top:50%;transform:translate(-50%,-50%);white-space:nowrap}.studio-title-header[_ngcontent-%COMP%]   mg-overlay-nav-item[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.nav-mobile-studio-logo[_ngcontent-%COMP%]{height:33px}button.next-button[_ngcontent-%COMP%]{--mg-icon-size:12px}.preview-next-button-container[_ngcontent-%COMP%]{text-align:right;margin-top:24px;width:100%}.preview-next-button-container[_ngcontent-%COMP%]   button.next-button[_ngcontent-%COMP%]{font-size:20px;padding:16px 36px;--mg-icon-size:20px}.preview-next-button-container[_ngcontent-%COMP%]   button.next-button[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{margin-left:4px}.overlay-header-container[_ngcontent-%COMP%]{display:none}@media (min-width:740px){.overlay-header-container[_ngcontent-%COMP%]{display:block}}.mg-align-right[_ngcontent-%COMP%]{text-align:right}mg-swipe-container[_ngcontent-%COMP%]{display:block;min-height:100px;--mg-swipe-area-padding-bottom:84px}.page-scrollbar-container[_ngcontent-%COMP%]{position:absolute;overflow:hidden;bottom:32px;left:40px;right:40px;border-radius:12px;background-color:#f5f5f5}.page-scrollbar-container.has-bottom-nav[_ngcontent-%COMP%]{bottom:88px}.page-scrollbar-container[_ngcontent-%COMP%]   .page-scrollbar-transform[_ngcontent-%COMP%]{width:100%}.page-scrollbar-container[_ngcontent-%COMP%]   .page-scrollbar[_ngcontent-%COMP%]{height:24px;border-radius:12px;background-color:#ccc;transition:transform .3s ease}.horizontal-layout-container[_ngcontent-%COMP%]{position:relative}.horizontal-layout-container[_ngcontent-%COMP%]   .nav-arrow[_ngcontent-%COMP%]{top:calc(50% - 42px);position:absolute;z-index:10;--mg-icon-size:24px}.horizontal-layout-container[_ngcontent-%COMP%]   .left-arrow[_ngcontent-%COMP%]{left:0;transform:translateY(-50%)}.horizontal-layout-container[_ngcontent-%COMP%]   .right-arrow[_ngcontent-%COMP%]{right:0;transform:translateY(-50%)}mg-designed-svg-editor-logo-edit[_ngcontent-%COMP%]{display:block;margin:0 16px}mg-overlay-nav-item.bottom-nav-has-image[_ngcontent-%COMP%], mg-overlay-nav-item.bottom-nav-has-image[_ngcontent-%COMP%] + mg-overlay-nav-item[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.top-nav[_ngcontent-%COMP%]   .mg-align-right[_ngcontent-%COMP%]{padding-right:8px}"],changeDetection:0}),t})();var ce=n("tpC3"),ge=n("+WSm");let de=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[Gt.b,ct.a,pt,ut,gt.a,ce.a,st.a,rt.a,lt.a,ge.a,M.c,a.k,Yt.b,F.m,N.f,at.a]]}),t})();var pe=n("ACDe"),me=n("jtHE"),ue=n("Cfvw"),he=n("1G5W"),ve=n("65ez");let fe=(()=>{class t{constructor(t){this._destroyed$=new me.a(1),this.mgOnSwipeContainerProgress=new i.EventEmitter,this._swiperProgressHandler=()=>this.onSwiperProgress(this._swiper),Object(ue.a)(t.getSwiperInstance()).pipe(Object(he.a)(this._destroyed$)).subscribe(t=>this.swiperReady(t))}swiperReady(t){this._swiper=t,this._destroyed$.subscribe(()=>this.cleanupSwiper(t)),t.on("progress",this._swiperProgressHandler)}onSwiperProgress(t){this.mgOnSwipeContainerProgress.emit(t.progress)}cleanupSwiper(t){t.off("progress",this._swiperProgressHandler)}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}}return t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](ve.a))},t.\u0275dir=i["\u0275\u0275defineDirective"]({type:t,selectors:[["mg-swipe-container","mgOnSwipeContainerProgress",""]],outputs:{mgOnSwipeContainerProgress:"mgOnSwipeContainerProgress"},exportAs:["mgOnSwipeContainerProgress"]}),t})(),xe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[pe.a]]}),t})();var Ce=n("2Vo4"),ye=n("lJxs"),Se=n("eIep"),we=n("zp1y"),be=n("/q54"),Oe=n("Hp2Z"),Pe=n("Nhcz");const Me=["splitContent"],_e=function(){return{o:null}},Ie=function(t){return{outlets:t}},De=function(t){return["",t]};function ke(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",11),i["\u0275\u0275elementStart"](1,"div",12),i["\u0275\u0275elementStart"](2,"mg-overlay-nav-item",13),i["\u0275\u0275elementStart"](3,"span"),i["\u0275\u0275text"](4,"Close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"span",14),i["\u0275\u0275element"](6,"img",15),i["\u0275\u0275text"](7," | Pick a Template "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction1"](4,De,i["\u0275\u0275pureFunction1"](2,Ie,i["\u0275\u0275pureFunction0"](1,_e)))))}function Ee(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",16),i["\u0275\u0275elementStart"](1,"mg-overlay-nav-item",13),i["\u0275\u0275elementStart"](2,"span"),i["\u0275\u0275text"](3,"Close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"mg-overlay-nav-item",17),i["\u0275\u0275elementStart"](5,"strong",18),i["\u0275\u0275text"](6,"Pick a Template"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction1"](4,De,i["\u0275\u0275pureFunction1"](2,Ie,i["\u0275\u0275pureFunction0"](1,_e)))))}const Te=function(t){return["studio",t,"theme"]},Ae=function(t){return{o:t}};function Re(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"div",19),i["\u0275\u0275elementStart"](1,"mg-overlay-nav-item",20),i["\u0275\u0275elementStart"](2,"span"),i["\u0275\u0275text"](3,"Back"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t){const t=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction1"](7,De,i["\u0275\u0275pureFunction1"](5,Ie,i["\u0275\u0275pureFunction1"](3,Ae,i["\u0275\u0275pureFunction1"](1,Te,t.parentPath)))))}}function je(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",25),i["\u0275\u0275text"](1," FEATURED "),i["\u0275\u0275elementEnd"]())}function Le(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",22),i["\u0275\u0275template"](1,je,2,0,"div",23),i["\u0275\u0275elementStart"](2,"mg-designed-svg-viewer",24),i["\u0275\u0275listener"]("click",(function(n){i["\u0275\u0275restoreView"](t);const o=e.$implicit;return i["\u0275\u0275nextContext"](2).clickTemplate(n,o)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.featured),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("designedSvgSrc",t.templateSvgUrl)}}function Ve(t,e){1&t&&i["\u0275\u0275template"](0,Le,3,2,"div",21),2&t&&i["\u0275\u0275property"]("ngForOf",e.$implicit)}function ze(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mg-button-icon",32),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"](3).clickLeftArrow()})),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275elementEnd"]()}if(2&t){const t=i["\u0275\u0275nextContext"](3);i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](1,1,t.leftArrowDisabled$))}}function Fe(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mg-button-icon",33),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"](3).clickRightArrow()})),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275elementEnd"]()}if(2&t){const t=i["\u0275\u0275nextContext"](3);i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](1,1,t.rightArrowDisabled$))}}function He(t,e){1&t&&i["\u0275\u0275elementContainer"](0)}const Be=function(t){return{$implicit:t}};function Ne(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"div",34),i["\u0275\u0275template"](1,He,1,0,"ng-container",35),i["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;i["\u0275\u0275nextContext"](3);const n=i["\u0275\u0275reference"](11);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",n)("ngTemplateOutletContext",i["\u0275\u0275pureFunction1"](2,Be,t))}}function $e(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"div",36),i["\u0275\u0275element"](1,"div",37),i["\u0275\u0275elementEnd"]()),2&t){const t=i["\u0275\u0275nextContext"]().ngIf,e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275styleProp"]("width",1/t.length*100+"%")("transform","translateX("+e.scrollProgress*(t.length-1)*100+"%)")}}function Ge(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div",26),i["\u0275\u0275template"](2,ze,2,3,"mg-button-icon",27),i["\u0275\u0275template"](3,Fe,2,3,"mg-button-icon",28),i["\u0275\u0275elementStart"](4,"mg-swipe-container",29),i["\u0275\u0275listener"]("activeIndexChange",(function(e){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"](2).activeSwipeIndex$.next(e)}))("mgOnSwipeContainerProgress",(function(e){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"](2).scrollProgress=e})),i["\u0275\u0275template"](5,Ne,2,4,"div",30),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](6,$e,2,4,"div",31),i["\u0275\u0275elementContainerEnd"]()}if(2&t){const t=e.ngIf,n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.length>1),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.length>1),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("activeIndex",n.activeSwipeIndex$.getValue())("spaceBetween",40)("mousewheel",n.swiperMouseWheelOptions),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",t),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.length>1)}}function Ue(t,e){if(1&t&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,Ge,7,7,"ng-container",8),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275elementContainerEnd"]()),2&t){const t=i["\u0275\u0275nextContext"](),e=i["\u0275\u0275reference"](17);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](2,2,t.templatePages$))("ngIfElse",e)}}function qe(t,e){1&t&&i["\u0275\u0275elementContainer"](0)}function Ye(t,e){if(1&t&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div",38),i["\u0275\u0275template"](2,qe,1,0,"ng-container",35),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()),2&t){const t=e.ngIf;i["\u0275\u0275nextContext"](2);const n=i["\u0275\u0275reference"](11);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngTemplateOutlet",n)("ngTemplateOutletContext",i["\u0275\u0275pureFunction1"](2,Be,t))}}function Qe(t,e){if(1&t&&(i["\u0275\u0275template"](0,Ye,3,4,"ng-container",8),i["\u0275\u0275pipe"](1,"async")),2&t){const t=i["\u0275\u0275nextContext"](),e=i["\u0275\u0275reference"](17);i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](1,2,t.templates$))("ngIfElse",e)}}function We(t,e){1&t&&i["\u0275\u0275element"](0,"mg-spinner",39)}let Je=(()=>{class t{constructor(t,e,n,o,i,a){this.mingaDesigner=t,this.route=e,this.router=n,this.mingaDesignerDraft=o,this.mediaObserver=i,this._cdr=a,this.activeSwipeIndex$=new Ce.a(0),this.horizontalLayout$=this.mediaObserver.asObservable().pipe(Object(ye.a)(()=>this.mediaObserver.isActive("gt-sm"))),this.swiperMouseWheelOptions={releaseOnEdges:!0},this.scrollProgress=0,this.templates$=this.route.paramMap.pipe(Object(ye.a)(t=>t.get("themeId")||""),Object(Se.a)(t=>Object(ue.a)(this.mingaDesigner.getTemplates({themeId:t})))),this.templatePages$=this.templates$.pipe(Object(ye.a)(t=>u.chunk(t,8))),this.leftArrowDisabled$=this.activeSwipeIndex$.pipe(Object(ye.a)(t=>t<=0)),this.rightArrowDisabled$=this.activeSwipeIndex$.pipe(Object(we.a)(this.templatePages$),Object(ye.a)(([t,e])=>t>=e.length-1))}get parentPath(){var t,e;return(null===(e=null===(t=this.route.snapshot.parent)||void 0===t?void 0:t.routeConfig)||void 0===e?void 0:e.path)||""}proceedWithTemplate(t){return Object(d.a)(this,void 0,void 0,(function*(){yield this.mingaDesignerDraft.clearDraft(),yield this.router.navigate(["",{outlets:{o:["studio",this.parentPath,"build",t.templateId]}}])}))}clickTemplate(t,e){this.proceedWithTemplate(e)}clickLeftArrow(){this.activeSwipeIndex$.next(this.activeSwipeIndex$.getValue()-1)}clickRightArrow(){this.activeSwipeIndex$.next(this.activeSwipeIndex$.getValue()+1)}}return t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](g.MingaDesignerService),i["\u0275\u0275directiveInject"](a.a),i["\u0275\u0275directiveInject"](a.g),i["\u0275\u0275directiveInject"](f),i["\u0275\u0275directiveInject"](be.g),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&i["\u0275\u0275viewQuery"](Me,1),2&t){let t;i["\u0275\u0275queryRefresh"](t=i["\u0275\u0275loadQuery"]())&&(e.splitContent=t.first)}},decls:18,vars:10,consts:[["class","overlay-header-container",4,"mgOverlayStructure","mgOverlayStructureRegion"],["class","top-nav",4,"mgOverlayStructure","mgOverlayStructureRegion"],["class","bottom-nav",4,"mgOverlayStructure","mgOverlayStructureRegion"],["fxLayout","row","fxLayoutAlign","center center",1,"step-header"],[1,"step-graphic"],[1,"step-text"],[1,"step-desc-text"],["templatePageTpl",""],[4,"ngIf","ngIfElse"],["verticalLayoutTpl",""],["templatesLoading",""],[1,"overlay-header-container"],[1,"studio-title-header"],["icon","close",1,"mg-align-left",3,"routerLink"],[1,"header-logo-container"],["src","assets/studio/studio-logo-white.png"],[1,"top-nav"],[1,"mg-align-right","nav-show-lt-max-width"],[1,"mg-smallcopy"],[1,"bottom-nav"],["icon","back",1,"mg-align-left",3,"routerLink"],["class","svg-template-wrap",4,"ngFor","ngForOf"],[1,"svg-template-wrap"],["class","svg-template-featured",4,"ngIf"],[1,"svg-template",3,"designedSvgSrc","click"],[1,"svg-template-featured"],[1,"horizontal-layout-container"],["class","left-arrow nav-arrow has-bottom-nav","icon","left-arrow-active",3,"disabled","click",4,"ngIf"],["class","right-arrow nav-arrow has-bottom-nav","icon","right-arrow-active",3,"disabled","click",4,"ngIf"],["swipeContainerAlign","top",3,"activeIndex","spaceBetween","mousewheel","activeIndexChange","mgOnSwipeContainerProgress"],["class","svg-templates","gdColumns","repeat(auto-fill, minmax(220px, 1fr))","gdGap","16px 16px",4,"ngFor","ngForOf"],["class","page-scrollbar-container has-bottom-nav",4,"ngIf"],["icon","left-arrow-active",1,"left-arrow","nav-arrow","has-bottom-nav",3,"disabled","click"],["icon","right-arrow-active",1,"right-arrow","nav-arrow","has-bottom-nav",3,"disabled","click"],["gdColumns","repeat(auto-fill, minmax(220px, 1fr))","gdGap","16px 16px",1,"svg-templates"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"page-scrollbar-container","has-bottom-nav"],[1,"page-scrollbar"],["gdColumns","repeat(auto-fill, minmax(220px, 1fr))","gdGap","8px 8px",1,"svg-templates"],["diameter","50","thickness","8",1,"loading-spinner"]],template:function(t,e){if(1&t&&(i["\u0275\u0275template"](0,ke,8,6,"div",0),i["\u0275\u0275template"](1,Ee,7,6,"div",1),i["\u0275\u0275template"](2,Re,4,9,"div",2),i["\u0275\u0275elementStart"](3,"div",3),i["\u0275\u0275element"](4,"div",4),i["\u0275\u0275elementStart"](5,"div"),i["\u0275\u0275elementStart"](6,"p",5),i["\u0275\u0275text"](7,"STEP 2:"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"p",6),i["\u0275\u0275text"](9,"Pick a template to start creating"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](10,Ve,1,1,"ng-template",null,7,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](12,Ue,3,4,"ng-container",8),i["\u0275\u0275pipe"](13,"async"),i["\u0275\u0275template"](14,Qe,2,4,"ng-template",null,9,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](16,We,1,0,"ng-template",null,10,i["\u0275\u0275templateRefExtractor"])),2&t){const t=i["\u0275\u0275reference"](15);i["\u0275\u0275property"]("mgOverlayStructure",!0)("mgOverlayStructureRegion","header"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("mgOverlayStructure",!0)("mgOverlayStructureRegion","top"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("mgOverlayStructure",!0)("mgOverlayStructureRegion","bottom"),i["\u0275\u0275advance"](10),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](13,8,e.horizontalLayout$))("ngIfElse",t)}},directives:[C.a,w.e,w.d,M.o,_.a,a.h,M.n,R.a,ve.a,fe,Oe.a,Pe.d,Pe.b,M.t,U.a],pipes:[M.b],styles:["@media (min-width:600px){.split-content-container[_ngcontent-%COMP%]{margin:32px}}.split-content-container.sticky[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:calc(32px + var(--overlay-header-height))}.loading-spinner[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.step-text[_ngcontent-%COMP%]{font-size:22px}.step-desc-text[_ngcontent-%COMP%], .step-text[_ngcontent-%COMP%]{font-weight:700;margin:4px 8px}.step-desc-text[_ngcontent-%COMP%]{font-size:16px}.step-header[_ngcontent-%COMP%]{margin:0 16px}.step-graphic[_ngcontent-%COMP%]{height:75px;margin:16px 0;width:100px;min-width:100px;background-repeat:no-repeat;background-position:50%;background-image:url(/assets/studio/poster-icon.svg)}@media (max-width:739px){.top-nav[_ngcontent-%COMP%]{background-color:#036;color:#fff}}@media (min-width:740px){.top-nav[_ngcontent-%COMP%], .top-nav.nav-show-lt-max-width[_ngcontent-%COMP%], .top-nav[_ngcontent-%COMP%]   .nav-show-lt-max-width[_ngcontent-%COMP%]{display:none}}.studio-title-header[_ngcontent-%COMP%]{background-color:#036;padding:12px;color:#fff;display:flex;align-items:center;justify-content:center;font-size:20px;font-weight:700;position:relative;border-top-right-radius:var(--overlay-border-radius,0);border-top-left-radius:var(--overlay-border-radius,0)}.studio-title-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:44px;display:inline-block}.studio-title-header[_ngcontent-%COMP%]   .header-logo-container[_ngcontent-%COMP%]{position:absolute;display:flex;align-items:center;left:50%;text-align:center;top:50%;transform:translate(-50%,-50%);white-space:nowrap}.studio-title-header[_ngcontent-%COMP%]   mg-overlay-nav-item[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.nav-mobile-studio-logo[_ngcontent-%COMP%]{height:33px}button.next-button[_ngcontent-%COMP%]{--mg-icon-size:12px}.preview-next-button-container[_ngcontent-%COMP%]{text-align:right;margin-top:24px;width:100%}.preview-next-button-container[_ngcontent-%COMP%]   button.next-button[_ngcontent-%COMP%]{font-size:20px;padding:16px 36px;--mg-icon-size:20px}.preview-next-button-container[_ngcontent-%COMP%]   button.next-button[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{margin-left:4px}.overlay-header-container[_ngcontent-%COMP%]{display:none}@media (min-width:740px){.overlay-header-container[_ngcontent-%COMP%]{display:block}}.mg-align-right[_ngcontent-%COMP%]{text-align:right}mg-swipe-container[_ngcontent-%COMP%]{display:block;min-height:100px;--mg-swipe-area-padding-bottom:84px}.page-scrollbar-container[_ngcontent-%COMP%]{position:absolute;overflow:hidden;bottom:32px;left:40px;right:40px;border-radius:12px;background-color:#f5f5f5}.page-scrollbar-container.has-bottom-nav[_ngcontent-%COMP%]{bottom:88px}.page-scrollbar-container[_ngcontent-%COMP%]   .page-scrollbar-transform[_ngcontent-%COMP%]{width:100%}.page-scrollbar-container[_ngcontent-%COMP%]   .page-scrollbar[_ngcontent-%COMP%]{height:24px;border-radius:12px;background-color:#ccc;transition:transform .3s ease}.horizontal-layout-container[_ngcontent-%COMP%]{position:relative}.horizontal-layout-container[_ngcontent-%COMP%]   .nav-arrow[_ngcontent-%COMP%]{top:calc(50% - 42px);position:absolute;z-index:10;--mg-icon-size:24px}.horizontal-layout-container[_ngcontent-%COMP%]   .left-arrow[_ngcontent-%COMP%]{left:0;transform:translateY(-50%)}.horizontal-layout-container[_ngcontent-%COMP%]   .right-arrow[_ngcontent-%COMP%]{right:0;transform:translateY(-50%)}mg-designed-svg-viewer[_ngcontent-%COMP%]{cursor:pointer;border-radius:6px;box-shadow:0 4px 16px rgba(0,0,0,.16);transition:transform .1s ease;transform:scale(1)}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.svg-templates[_ngcontent-%COMP%]{padding:0 40px}.svg-templates[_ngcontent-%COMP%]   .svg-template[_ngcontent-%COMP%]{display:block;overflow:hidden}.svg-templates[_ngcontent-%COMP%]   .svg-template-wrap[_ngcontent-%COMP%]{position:relative}.svg-templates[_ngcontent-%COMP%]   .svg-template-wrap[_ngcontent-%COMP%]   .svg-template-featured[_ngcontent-%COMP%]{position:absolute;z-index:1;top:0;left:0;padding:8px 16px;background-color:#93f;border-radius:6px;color:#fff;font-weight:700;font-size:12px;-webkit-user-select:none;user-select:none}mg-button-icon.disabled[_ngcontent-%COMP%]{pointer-events:none}"],changeDetection:0}),t})(),Ke=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[ct.a,E.b,pt,gt.a,rt.a,lt.a,pe.a,xe,M.c,a.k,at.a]]}),t})();var Ze=n("YnAW");const Xe=function(){return{o:null}},tn=function(t){return{outlets:t}},en=function(t){return["",t]};function nn(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",10),i["\u0275\u0275elementStart"](1,"div",11),i["\u0275\u0275elementStart"](2,"mg-overlay-nav-item",12),i["\u0275\u0275elementStart"](3,"span"),i["\u0275\u0275text"](4,"Close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"span",13),i["\u0275\u0275element"](6,"img",14),i["\u0275\u0275text"](7," | Pick a Category "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction1"](4,en,i["\u0275\u0275pureFunction1"](2,tn,i["\u0275\u0275pureFunction0"](1,Xe)))))}function on(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",15),i["\u0275\u0275elementStart"](1,"mg-overlay-nav-item",12),i["\u0275\u0275elementStart"](2,"span"),i["\u0275\u0275text"](3,"Close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"mg-overlay-nav-item",16),i["\u0275\u0275elementStart"](5,"strong",17),i["\u0275\u0275text"](6,"Pick a Category"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction1"](4,en,i["\u0275\u0275pureFunction1"](2,tn,i["\u0275\u0275pureFunction0"](1,Xe)))))}function an(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",18),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"]().clickBlankCanvas()})),i["\u0275\u0275element"](1,"mg-button-icon",19),i["\u0275\u0275elementStart"](2,"p",20),i["\u0275\u0275text"](3,"Start Fresh!"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"p",21),i["\u0275\u0275text"](5,"Start with a blank canvas"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}const rn=function(t,e){return["studio",t,"template",e]},sn=function(t){return{o:t}};function ln(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mg-minga-designer-theme-card",23),i["\u0275\u0275elementStart"](1,"p",20),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"p",21),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit,n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("imageUrl",t.featuredImageUrl)("routerLink",i["\u0275\u0275pureFunction1"](11,en,i["\u0275\u0275pureFunction1"](9,tn,i["\u0275\u0275pureFunction1"](7,sn,i["\u0275\u0275pureFunction2"](4,rn,n.parentPath,t.themeId))))),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](t.title),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](t.description||"\xa0")}}function cn(t,e){1&t&&i["\u0275\u0275template"](0,ln,5,13,"mg-minga-designer-theme-card",22),2&t&&i["\u0275\u0275property"]("ngForOf",e.$implicit)}function gn(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mg-button-icon",31),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"](3).clickLeftArrow()})),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275elementEnd"]()}if(2&t){const t=i["\u0275\u0275nextContext"](3);i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](1,1,t.leftArrowDisabled$))}}function dn(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mg-button-icon",32),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"](3).clickRightArrow()})),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275elementEnd"]()}if(2&t){const t=i["\u0275\u0275nextContext"](3);i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](1,1,t.rightArrowDisabled$))}}function pn(t,e){1&t&&i["\u0275\u0275elementContainer"](0)}function mn(t,e){if(1&t&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,pn,1,0,"ng-container",36),i["\u0275\u0275elementContainerEnd"]()),2&t){i["\u0275\u0275nextContext"](4);const t=i["\u0275\u0275reference"](10);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",t)}}function un(t,e){1&t&&i["\u0275\u0275elementContainer"](0)}const hn=function(t){return{$implicit:t}};function vn(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"div",33),i["\u0275\u0275template"](1,mn,2,1,"ng-container",34),i["\u0275\u0275template"](2,un,1,0,"ng-container",35),i["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit,n=e.index;i["\u0275\u0275nextContext"](3);const o=i["\u0275\u0275reference"](12);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",0==n),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",o)("ngTemplateOutletContext",i["\u0275\u0275pureFunction1"](3,hn,t))}}function fn(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"div",37),i["\u0275\u0275element"](1,"div",38),i["\u0275\u0275elementEnd"]()),2&t){const t=i["\u0275\u0275nextContext"](2).ngIf,e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275styleProp"]("width",1/t.length*100+"%")("transform","translateX("+e.scrollProgress*(t.length-1)*100+"%)")}}function xn(t,e){if(1&t){const t=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div",25),i["\u0275\u0275template"](2,gn,2,3,"mg-button-icon",26),i["\u0275\u0275template"](3,dn,2,3,"mg-button-icon",27),i["\u0275\u0275elementStart"](4,"mg-swipe-container",28),i["\u0275\u0275listener"]("activeIndexChange",(function(e){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"](2).activeSwipeIndex$.next(e)}))("mgOnSwipeContainerProgress",(function(e){return i["\u0275\u0275restoreView"](t),i["\u0275\u0275nextContext"](2).scrollProgress=e})),i["\u0275\u0275template"](5,vn,3,5,"div",29),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](6,fn,2,4,"div",30),i["\u0275\u0275elementContainerEnd"]()}if(2&t){const t=i["\u0275\u0275nextContext"]().ngIf,e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.length>1),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.length>1),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("activeIndex",e.activeSwipeIndex$.getValue())("spaceBetween",40)("mousewheel",e.swiperMouseWheelOptions),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",t),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.length>1)}}function Cn(t,e){1&t&&i["\u0275\u0275elementContainer"](0)}function yn(t,e){1&t&&i["\u0275\u0275elementContainer"](0)}function Sn(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"div",39),i["\u0275\u0275template"](1,Cn,1,0,"ng-container",36),i["\u0275\u0275template"](2,yn,1,0,"ng-container",35),i["\u0275\u0275pipe"](3,"async"),i["\u0275\u0275elementEnd"]()),2&t){const t=i["\u0275\u0275nextContext"](2),e=i["\u0275\u0275reference"](10),n=i["\u0275\u0275reference"](12);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",e),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",n)("ngTemplateOutletContext",i["\u0275\u0275pureFunction1"](5,hn,i["\u0275\u0275pipeBind1"](3,3,t.themes$)))}}function wn(t,e){if(1&t&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,xn,7,7,"ng-container",8),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275template"](3,Sn,4,7,"ng-template",null,24,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementContainerEnd"]()),2&t){const t=i["\u0275\u0275reference"](4),e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](2,2,e.horizontalLayout$))("ngIfElse",t)}}function bn(t,e){1&t&&i["\u0275\u0275element"](0,"mg-spinner",40)}let On=(()=>{class t{constructor(t,e,n,o){this.router=t,this.route=e,this.mingaDesigner=n,this.mediaObserver=o,this.activeSwipeIndex$=new Ce.a(0),this.horizontalLayout$=this.mediaObserver.asObservable().pipe(Object(ye.a)(()=>this.mediaObserver.isActive("gt-sm"))),this.swiperMouseWheelOptions={releaseOnEdges:!0},this.scrollProgress=0,this.themes$=Object(ue.a)(this.mingaDesigner.getThemes()),this.themePages$=this.themes$.pipe(Object(ye.a)(t=>[null,...t]),Object(ye.a)(t=>{const e=u.chunk(t,6);return e[0].splice(0,1),e})),this.leftArrowDisabled$=this.activeSwipeIndex$.pipe(Object(ye.a)(t=>t<=0)),this.rightArrowDisabled$=this.activeSwipeIndex$.pipe(Object(we.a)(this.themePages$),Object(ye.a)(([t,e])=>t>=e.length-1))}get parentPath(){var t,e;return(null===(e=null===(t=this.route.snapshot.parent)||void 0===t?void 0:t.routeConfig)||void 0===e?void 0:e.path)||""}clickLeftArrow(){this.activeSwipeIndex$.next(this.activeSwipeIndex$.getValue()-1)}clickRightArrow(){this.activeSwipeIndex$.next(this.activeSwipeIndex$.getValue()+1)}clickBlankCanvas(){return Object(d.a)(this,void 0,void 0,(function*(){yield this.router.navigate(["",{outlets:{o:["studio",this.parentPath,"build","blank"]}}])}))}}return t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](a.g),i["\u0275\u0275directiveInject"](a.a),i["\u0275\u0275directiveInject"](g.MingaDesignerService),i["\u0275\u0275directiveInject"](be.g))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["ng-component"]],decls:17,vars:8,consts:[["class","overlay-header-container",4,"mgOverlayStructure","mgOverlayStructureRegion"],["class","top-nav",4,"mgOverlayStructure","mgOverlayStructureRegion"],["fxLayout","row","fxLayoutAlign","center center",1,"step-header"],[1,"step-graphic"],[1,"step-text"],[1,"step-desc-text"],["blankCanvasTpl",""],["themesPageTpl",""],[4,"ngIf","ngIfElse"],["themesLoading",""],[1,"overlay-header-container"],[1,"studio-title-header"],["icon","close",1,"mg-align-left",3,"routerLink"],[1,"header-logo-container"],["src","assets/studio/studio-logo-white.png"],[1,"top-nav"],[1,"mg-align-right","nav-show-lt-max-width"],[1,"mg-smallcopy"],["fxLayout","column","fxLayoutAlign","center center",1,"blank-canvas-item","mg-button-hover-harbour",3,"click"],["icon","plus-o"],[1,"theme-title"],[1,"theme-description"],[3,"imageUrl","routerLink",4,"ngFor","ngForOf"],[3,"imageUrl","routerLink"],["verticalLayoutTpl",""],[1,"horizontal-layout-container"],["class","left-arrow nav-arrow","icon","left-arrow-active",3,"disabled","click",4,"ngIf"],["class","right-arrow nav-arrow","icon","right-arrow-active",3,"disabled","click",4,"ngIf"],["swipeContainerAlign","top",3,"activeIndex","spaceBetween","mousewheel","activeIndexChange","mgOnSwipeContainerProgress"],["class","grid-container","gdColumns","repeat(auto-fill, minmax(300px, 1fr))","gdGap","16px 16px",4,"ngFor","ngForOf"],["class","page-scrollbar-container",4,"ngIf"],["icon","left-arrow-active",1,"left-arrow","nav-arrow",3,"disabled","click"],["icon","right-arrow-active",1,"right-arrow","nav-arrow",3,"disabled","click"],["gdColumns","repeat(auto-fill, minmax(300px, 1fr))","gdGap","16px 16px",1,"grid-container"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngTemplateOutlet"],[1,"page-scrollbar-container"],[1,"page-scrollbar"],["gdColumns","repeat(auto-fill, minmax(220px, 1fr))","gdGap","8px 8px",1,"grid-container"],["diameter","50","thickness","8",1,"loading-spinner"]],template:function(t,e){if(1&t&&(i["\u0275\u0275template"](0,nn,8,6,"div",0),i["\u0275\u0275template"](1,on,7,6,"div",1),i["\u0275\u0275elementStart"](2,"div",2),i["\u0275\u0275element"](3,"div",3),i["\u0275\u0275elementStart"](4,"div"),i["\u0275\u0275elementStart"](5,"p",4),i["\u0275\u0275text"](6,"STEP 1:"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"p",5),i["\u0275\u0275text"](8,"Pick a category"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](9,an,6,0,"ng-template",null,6,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](11,cn,1,1,"ng-template",null,7,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](13,wn,5,4,"ng-container",8),i["\u0275\u0275pipe"](14,"async"),i["\u0275\u0275template"](15,bn,1,0,"ng-template",null,9,i["\u0275\u0275templateRefExtractor"])),2&t){const t=i["\u0275\u0275reference"](16);i["\u0275\u0275property"]("mgOverlayStructure",!0)("mgOverlayStructureRegion","header"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("mgOverlayStructure",!0)("mgOverlayStructureRegion","top"),i["\u0275\u0275advance"](12),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](14,6,e.themePages$))("ngIfElse",t)}},directives:[C.a,w.e,w.d,M.o,_.a,a.h,Oe.a,M.n,Ze.a,ve.a,fe,Pe.d,Pe.b,M.t,U.a],pipes:[M.b],styles:["@media (min-width:600px){.split-content-container[_ngcontent-%COMP%]{margin:32px}}.split-content-container.sticky[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:calc(32px + var(--overlay-header-height))}.step-text[_ngcontent-%COMP%]{font-size:22px}.step-desc-text[_ngcontent-%COMP%], .step-text[_ngcontent-%COMP%]{font-weight:700;margin:4px 8px}.step-desc-text[_ngcontent-%COMP%]{font-size:16px}.step-header[_ngcontent-%COMP%]{margin:0 16px}.step-graphic[_ngcontent-%COMP%]{height:75px;margin:16px 0;width:100px;min-width:100px;background-repeat:no-repeat;background-position:50%;background-image:url(/assets/studio/poster-icon.svg)}@media (max-width:739px){.top-nav[_ngcontent-%COMP%]{background-color:#036;color:#fff}}@media (min-width:740px){.top-nav[_ngcontent-%COMP%], .top-nav.nav-show-lt-max-width[_ngcontent-%COMP%], .top-nav[_ngcontent-%COMP%]   .nav-show-lt-max-width[_ngcontent-%COMP%]{display:none}}.studio-title-header[_ngcontent-%COMP%]{background-color:#036;padding:12px;color:#fff;display:flex;align-items:center;justify-content:center;font-size:20px;font-weight:700;position:relative;border-top-right-radius:var(--overlay-border-radius,0);border-top-left-radius:var(--overlay-border-radius,0)}.studio-title-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:44px;display:inline-block}.studio-title-header[_ngcontent-%COMP%]   .header-logo-container[_ngcontent-%COMP%]{position:absolute;display:flex;align-items:center;left:50%;text-align:center;top:50%;transform:translate(-50%,-50%);white-space:nowrap}.studio-title-header[_ngcontent-%COMP%]   mg-overlay-nav-item[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.nav-mobile-studio-logo[_ngcontent-%COMP%]{height:33px}button.next-button[_ngcontent-%COMP%]{--mg-icon-size:12px}.preview-next-button-container[_ngcontent-%COMP%]{text-align:right;margin-top:24px;width:100%}.preview-next-button-container[_ngcontent-%COMP%]   button.next-button[_ngcontent-%COMP%]{font-size:20px;padding:16px 36px;--mg-icon-size:20px}.preview-next-button-container[_ngcontent-%COMP%]   button.next-button[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{margin-left:4px}.overlay-header-container[_ngcontent-%COMP%]{display:none}@media (min-width:740px){.overlay-header-container[_ngcontent-%COMP%]{display:block}}.mg-align-right[_ngcontent-%COMP%]{text-align:right}mg-swipe-container[_ngcontent-%COMP%]{display:block;min-height:100px;--mg-swipe-area-padding-bottom:84px}.page-scrollbar-container[_ngcontent-%COMP%]{position:absolute;overflow:hidden;bottom:32px;left:40px;right:40px;border-radius:12px;background-color:#f5f5f5}.page-scrollbar-container.has-bottom-nav[_ngcontent-%COMP%]{bottom:88px}.page-scrollbar-container[_ngcontent-%COMP%]   .page-scrollbar-transform[_ngcontent-%COMP%]{width:100%}.page-scrollbar-container[_ngcontent-%COMP%]   .page-scrollbar[_ngcontent-%COMP%]{height:24px;border-radius:12px;background-color:#ccc;transition:transform .3s ease}.horizontal-layout-container[_ngcontent-%COMP%]{position:relative}.horizontal-layout-container[_ngcontent-%COMP%]   .nav-arrow[_ngcontent-%COMP%]{top:calc(50% - 42px);position:absolute;z-index:10;--mg-icon-size:24px}.horizontal-layout-container[_ngcontent-%COMP%]   .left-arrow[_ngcontent-%COMP%]{left:0;transform:translateY(-50%)}.horizontal-layout-container[_ngcontent-%COMP%]   .right-arrow[_ngcontent-%COMP%]{right:0;transform:translateY(-50%)}mg-minga-designer-theme-card[_ngcontent-%COMP%]{display:block;cursor:pointer;-webkit-user-select:none;user-select:none}.loading-spinner[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.grid-container[_ngcontent-%COMP%]{min-height:100px;padding:0 40px}.blank-canvas-item[_ngcontent-%COMP%]{padding:16px;background-color:#fff;border-radius:6px;border:1px solid #d3d3d3;cursor:pointer;--mg-icon-size:30px}.theme-title[_ngcontent-%COMP%]{color:#036;font-weight:700;font-size:20px}.theme-description[_ngcontent-%COMP%], .theme-title[_ngcontent-%COMP%]{margin:4px 0;text-align:center;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.theme-description[_ngcontent-%COMP%]{color:#ccc;font-size:11px}mg-button-icon.disabled[_ngcontent-%COMP%]{pointer-events:none}"],changeDetection:0}),t})();var Pn=n("62tx");let Mn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[ct.a,Pn.a,gt.a,pe.a,xe,rt.a,M.c,a.k,at.a]]}),t})(),_n=(()=>{class t{constructor(){this.overlayConfig={wide:!0,containWithinViewport:!0,borderRadius:"20px",background:"linear-gradient(0deg, rgba(151, 64, 250, 0.8), rgba(253, 202, 47, 0.8), rgba(63, 205, 252, 0.8))"}}registerOnOverlayConfig(t){t(this.overlayConfig)}onOverlayClose(){return!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&i["\u0275\u0275element"](0,"router-outlet")},directives:[a.l],styles:["[_nghost-%COMP%]{display:block;--overlay-border-radius:$overlayBorderRadius}@media (max-height:700px){[_nghost-%COMP%]{min-height:100vh}}"],changeDetection:0}),t})();var In=n("30/I"),Dn=n("yk58");let kn=(()=>{class t extends g.MingaDesignerContentInfoService{constructor(t){super(),this.mingaDesignerProto=t}getContentInfo(t){return Object(d.a)(this,void 0,void 0,(function*(){const e=new In.MingaDesignerGetContentInfoRequest;e.setContentHash(t);const n=(yield this.mingaDesignerProto.getContentInfo(e)).getInfo();return n?xt.StudioContentInfoMapper.toIStudioContentInfo(n):null}))}}return t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275inject"](Dn.MingaDesigner))},t.\u0275prov=i["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var En=n("/Hrl");function Tn(t){if(!t)throw new Error("Cannot get minga designer route data for non-studio content");return t}class An extends En.a{constructor(t,e,n,o){super(t,e),this.snapshot=t,this.injector=e,this.studioContentInfoService=n,this.mingaDesignerService=o,this.templateId="",this.studioContentInfo={templateId:"",designedSvg:{svgUrl:"",svgData:{}}}}getContentInfo(){return Object(d.a)(this,void 0,void 0,(function*(){yield this.studioContentInfoService.getContentInfo(this.contentHash).then(Tn).then(t=>Object(d.a)(this,void 0,void 0,(function*(){this.templateId=t.templateId,this.template=yield this.getTemplateById(t.templateId),this.studioContentInfo=t})))}))}getAdditionalRouteData(){return Object(d.a)(this,void 0,void 0,(function*(){this.templateId||(this.templateId=this.snapshot.paramMap.get("templateId")||this.snapshot.data.fallbackTemplateId||""),this.template||(this.template=yield this.getTemplateById(this.templateId)),this.studioContentInfo.templateId||(this.studioContentInfo={templateId:this.templateId,designedSvg:{svgUrl:this.template.templateSvgUrl,svgData:{}}})}))}getTemplateById(t){return Object(d.a)(this,void 0,void 0,(function*(){const e=yield this.mingaDesignerService.getTemplateById(t);if(!e)throw new Error(`Invalid template id: ${t}`);return e}))}getRouteParams(){var t;return{templateId:this.templateId,themeId:null===(t=this.template)||void 0===t?void 0:t.themeId,contextHash:this.contextHash,contentHash:this.contentHash,groupHash:this.groupHash,programHash:this.programHash}}}var Rn=n("6ra5");let jn=(()=>{class t{constructor(t,e,n){this.mingaDesignerService=t,this.studioContentInfoService=e,this.injector=n}resolve(t,e){return Object(d.a)(this,void 0,void 0,(function*(){const e=new An(t,this.injector,this.studioContentInfoService,this.mingaDesignerService);return yield e.initDataFromRoute(),console.log("got initRouteData"),e}))}}return t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275inject"](Rn.a),i["\u0275\u0275inject"](kn),i["\u0275\u0275inject"](i.Injector))},t.\u0275prov=i["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Ln(t){return{path:t.path,component:t.component,resolve:{routeData:jn},data:{nextPath:t.nextPath,previousPath:t.previousPath,contentManagerType:t.contentManager,title:t.title,fallbackTemplateId:t.fallbackTemplateId}}}function Vn(t,e){return[{path:`${t}`,component:_n,children:[{path:"theme",component:On,data:{title:"Pick a Category"}},{path:"template",component:Je,data:{title:"Pick a Template"}},{path:"template/:themeId",component:Je,data:{title:"Pick a Template"}},Ln({path:"build/blank",fallbackTemplateId:"blank",component:le,contentManager:e,previousPath:"theme",nextPath:"content/blank",title:"Build your template"}),Ln({path:"build/:templateId",component:le,contentManager:e,previousPath:"template/:themeId",nextPath:"content/:templateId",title:"Build your template"}),Ln({path:"content/:templateId",component:it,contentManager:e,previousPath:"build/:templateId",nextPath:"preview/:templateId",title:"Add content to your template"}),Ln({path:"preview/:templateId",component:Vt,contentManager:e,previousPath:"content/:templateId",title:"Preview your template"}),Ln({path:"edit/build/:contentHash",component:le,contentManager:e,previousPath:"template/:themeId",nextPath:"edit/content/:contentHash",title:"Edit Your Template"}),Ln({path:"edit/content/:contentHash",component:it,contentManager:e,previousPath:"edit/build/:contentHash",nextPath:"edit/preview/:contentHash",title:"Edit your template content"}),Ln({path:"edit/preview/:contentHash",component:Vt,contentManager:e,previousPath:"edit/content/:contentHash",nextPath:"edit/content/:contentHash",title:"Preview your changes"}),Ln({path:"edit/build/:contentHash/:contextHash",component:le,contentManager:e,previousPath:"template/:themeId",nextPath:"edit/content/:contentHash/:contextHash"}),Ln({path:"edit/content/:contentHash/:contextHash",component:it,contentManager:e,previousPath:"edit/build/:contentHash/:contextHash",nextPath:"edit/preview/:contentHash/:contextHash"}),Ln({path:"edit/preview/:contentHash/:contextHash",component:Vt,contentManager:e,previousPath:"edit/content/:contentHash/:contextHash"})]}]}const zn=[{path:"",pathMatch:"full",redirectTo:"m/theme"},...Vn("m",s.a),...Vn("g",r.a),...Vn("g/:groupHash",r.a),...Vn("p/:programHash",l.a)];let Fn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[f,{provide:g.MingaDesignerService,useExisting:Rn.a},{provide:g.MingaDesignerContentInfoService,useExisting:kn}],imports:[[Mn,Ke,de,$t,s.b,r.b,c.a,a.k.forChild(zn),o.f]]}),t})()}}]);
//# sourceMappingURL=minga-app-src-app-minga-designer-MingaDesignerRoutes-module-es2015.js.map
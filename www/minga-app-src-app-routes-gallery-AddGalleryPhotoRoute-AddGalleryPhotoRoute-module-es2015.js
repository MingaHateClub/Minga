(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{"2UAs":function(e,t,n){"use strict";n.r(t),n.d(t,"AddGalleryPhotoRouteModule",(function(){return De}));var i=n("SVse"),o=n("8Y7J"),s=n("u9T3"),a=n("iInd"),r=n("CO6v"),c=n("CL15"),l=n("Vwx4"),h=n("s7LF"),d=n("Q2Ze"),p=n("f44v"),u=n("Tj54"),g=n("1z/I"),m=n("HBJn");let f=(()=>{class e{constructor(e,t,n,i){this._service=e,this._templateRef=t,this._viewContainerRef=n,this._cdr=i,this._subscription=null,this._templatePortal=new g.g(this._templateRef,this._viewContainerRef)}ngOnInit(){this._subscription=this._service.push(this._templatePortal).subscribe(()=>this._cdr.detectChanges())}ngOnDestroy(){this._service.remove(this._templatePortal),this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](m.a),o["\u0275\u0275directiveInject"](o.TemplateRef),o["\u0275\u0275directiveInject"](o.ViewContainerRef),o["\u0275\u0275directiveInject"](o.ChangeDetectorRef))},e.\u0275dir=o["\u0275\u0275defineDirective"]({type:e,selectors:[["","globalFloatingPortal",""]]}),e})(),b=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[]]}),e})();var v=n("7Tcv"),C=n("mrSG"),_=n("XNiG"),x=n("LvDl"),y=n("LfDn"),O=n("itXk"),M=n("lJxs"),w=n("pLZG"),E=n("IzEk"),P=n("vkgz"),S=n("oW4M"),k=n("TxG7");function j(e){return e.shortCard?{contentHash:e.shortCard.contentHash,previewTitle:e.shortCard.title||e.shortCard.body}:e.shortEventCard?{contentHash:e.shortEventCard.contentHash,previewTitle:e.shortEventCard.title||e.shortEventCard.body}:null}function F(e){return j(e.item)}function I(e){return function(e){const t=e.feedItem;return t?j(t):null}(e.item)}let H=(()=>{class e{constructor(e,t){this.searchManagerProto=e,this.contentFeed=t}findContent(e){const t={};e.contentType&&(t.contentType=Array.isArray(e.contentType)?e.contentType.join(","):e.contentType,t.contentType||delete t.contentType),e.group&&(t.groupHashes=Array.isArray(e.group)?e.group.join(","):e.group);const n=Object(y.a)(this.searchManagerProto,"searchControl","search",Object.assign(Object.assign({},t),{query:e.query}));n.seekFront();const i=Object(y.a)(this.contentFeed,"streamContentFeedControl","streamContentFeed",Object.assign({},t));i.seekFront();const o=Object(O.b)(n.loading$,n.asObservable()).pipe(Object(M.a)(([e,t])=>t),Object(w.a)(e=>e.length>0||n.isDone),Object(E.a)(1),Object(M.a)(e=>e.map(I).filter(e=>!!e)),Object(M.a)(e=>e),Object(P.a)(()=>n.close())),s=Object(O.b)(i.loading$,i.asObservable()).pipe(Object(M.a)(([e,t])=>t),Object(w.a)(e=>e.length>0||i.isDone),Object(E.a)(1),Object(M.a)(e=>e.map(F).filter(e=>!!e)),Object(M.a)(e=>e),Object(P.a)(()=>i.close()));return Object(O.b)(o,s).pipe(Object(M.a)(([e,t])=>[...e,...t]),Object(M.a)(e=>x.uniqWith(e,(e,t)=>e.contentHash==t.contentHash)))}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275inject"](S.SearchManager),o["\u0275\u0275inject"](k.ContentFeed))},e.\u0275prov=o["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var T=n("YEUz"),A=n("VDRc");const D=["contentOptionsContainer"],G=["inputElement"],z=["inputMeasurePlaceholder"];function q(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",10),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](e);const n=t.$implicit,i=o["\u0275\u0275nextContext"](2);return i._selectOption(n),i.focusInput()}))("mousedown",(function(){o["\u0275\u0275restoreView"](e);const n=t.$implicit,i=o["\u0275\u0275nextContext"](2);return i._selectOption(n),i.focusInput()})),o["\u0275\u0275element"](1,"div",11),o["\u0275\u0275elementStart"](2,"div",12),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,i=o["\u0275\u0275nextContext"](2);o["\u0275\u0275classProp"]("highlighted",i._highlightedOption==n),o["\u0275\u0275advance"](1),o["\u0275\u0275styleProp"]("background-image","url("+e.imageUrl+")"),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.previewTitle)}}function R(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",7,8),o["\u0275\u0275template"](2,q,4,5,"div",9),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275styleProp"]("display",e.focused&&e._options.length>0?"":"none"),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",e._options)}}function U(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"mat-chip",13),o["\u0275\u0275listener"]("removed",(function(){o["\u0275\u0275restoreView"](e);const n=t.index;return o["\u0275\u0275nextContext"]()._removeSelected(n)})),o["\u0275\u0275text"](1),o["\u0275\u0275elementStart"](2,"mat-icon",14),o["\u0275\u0275text"](3,"cancel"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;o["\u0275\u0275property"]("removable",!0)("selectable",!0),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",e.previewTitle," ")}}const V={provide:d.e,useExisting:Object(o.forwardRef)(()=>Q)};let Q=(()=>{class e{constructor(e,t,n,i,s){this.contentFinder=e,this.cdr=t,this.fm=n,this._injector=i,this._matFormField=s,this._focused=!1,this._ngControl=null,this._options=[],this._highlightedOption=-1,this._searchText="",this.contentType=[],this.group="",this.selectedContent=[],this.allowDuplicates=!1,this.required=!1,this.placeholder="",this.disabled=!1,this.controlType="mg-content-select",this._stateChanges=new _.a,this.stateChanges=this._stateChanges.asObservable(),this.selectedContentChange=new o.EventEmitter}get id(){return""}get focused(){return this._focused}get empty(){return 0===this.selectedContent.length}get shouldLabelFloat(){return this.focused||!this.empty||this._searchText.length>0}get ngControl(){return this._ngControl}get errorState(){return!!(this.ngControl&&this.ngControl.touched&&(this.ngControl.invalid||this.required&&this.empty))}get value(){return this.selectedContent.map(e=>e.contentHash)}setDescribedByIds(e){}onContainerClick(e){}ngOnInit(){var e;this._ngControl=this._injector.get(h.s),null!=this._ngControl&&(this._ngControl.valueAccessor=this),this.fm.monitor(null===(e=this.inputElement)||void 0===e?void 0:e.nativeElement).subscribe(e=>requestAnimationFrame(()=>{this._focused=null!==e,this.cdr.markForCheck()}))}ngOnDestroy(){this._optionsSub&&(this._optionsSub.unsubscribe(),delete this._optionsSub)}focusInput(){var e;(null===(e=this.inputElement)||void 0===e?void 0:e.nativeElement)&&this.fm.focusVia(this.inputElement.nativeElement,"program")}clear(e=!0){this.selectedContent=[],e&&this.selectedContentChange.emit(this.selectedContent)}setFromStringArray(e,t=!0){return Object(C.a)(this,void 0,void 0,(function*(){}))}_onSearchTextChange(e){this._optionsSub&&(this._optionsSub.unsubscribe(),delete this._optionsSub),e&&(this._optionsSub=this.contentFinder.findContent({query:e,contentType:this.contentType,group:this.group}).subscribe(e=>{this.allowDuplicates||(e=e.filter(e=>-1===this.selectedContent.findIndex(t=>t.contentHash===e.contentHash))),this._options=e.slice(0,5),this.cdr.markForCheck(),this._repositionOptionsContainer()})),requestAnimationFrame(()=>this._resizeInputElement())}_onSearchKeypress(e){if(this._searchText)switch(e.key){case"Tab":case"Enter":e.preventDefault(),e.stopPropagation(),this._selectHighlightedOption();break;case"ArrowUp":e.preventDefault(),e.stopPropagation(),this._highlightOptionUp();break;case"ArrowDown":this._highlightOptionDown(),e.preventDefault(),e.stopPropagation()}}_highlightOptionUp(){this._highlightedOption=Math.max(0,this._highlightedOption-1),this.cdr.markForCheck()}_highlightOptionDown(){this._highlightedOption=Math.min(this._options.length-1,this._highlightedOption+1),this.cdr.markForCheck()}_selectHighlightedOption(){const e=Math.max(0,this._highlightedOption);this._options[e]&&this._selectOption(this._options[e])}_selectOption(e){this.selectedContent.push(e),this._options=[],this._highlightedOption=-1,this._searchText="",this.cdr.markForCheck(),this.selectedContentChange.emit(this.selectedContent),this._onChange&&this._onChange(this.selectedContent)}_removeSelected(e){this.selectedContent.splice(e,1),this.selectedContentChange.emit(this.selectedContent),this._onChange&&this._onChange(this.selectedContent),this.cdr.markForCheck()}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}writeValue(e){null===e?this.clear():Array.isArray(e)?this.setFromStringArray(e):(console.warn("Invalid write value to mg-mentionable-select:",e),this.clear())}_onFocus(){this.focusInput()}_onClick(){this.focusInput()}_onResize(){requestAnimationFrame(()=>this._repositionOptionsContainer())}_onScroll(){this.focused&&requestAnimationFrame(()=>this._repositionOptionsContainer())}_resizeInputElement(){var e,t;const n=null===(e=this.inputElement)||void 0===e?void 0:e.nativeElement,i=null===(t=this.inputMeasurePlaceholder)||void 0===t?void 0:t.nativeElement;if(!n||!i)return;const o=getComputedStyle(i);n.style.width=parseInt(o.width)+10+"px",requestAnimationFrame(()=>this._repositionOptionsContainer())}_repositionOptionsContainer(){var e,t;const n=null===(e=this.contentOptionsContainer)||void 0===e?void 0:e.nativeElement;if(!n)return;const i=null===(t=this.inputElement)||void 0===t?void 0:t.nativeElement;if(!i)return;const o=document.body.getBoundingClientRect(),s=i.getBoundingClientRect();n.style.transform="",n.style.left=`${s.right}px`,n.style.top=s.top-o.top+"px",n.getBoundingClientRect().right>innerWidth&&(n.style.left="100vw",n.style.transform="translateX(-100%)",n.style.top=s.bottom-o.top+"px")}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](H),o["\u0275\u0275directiveInject"](o.ChangeDetectorRef),o["\u0275\u0275directiveInject"](T.h),o["\u0275\u0275directiveInject"](o.Injector),o["\u0275\u0275directiveInject"](d.d,8))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-content-select"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](D,1),o["\u0275\u0275viewQuery"](G,3),o["\u0275\u0275viewQuery"](z,3)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.contentOptionsContainer=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.inputElement=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.inputMeasurePlaceholder=e.first)}},hostBindings:function(e,t){1&e&&o["\u0275\u0275listener"]("focus",(function(){return t._onFocus()}))("click",(function(){return t._onClick()}))("resize",(function(){return t._onResize()}),!1,o["\u0275\u0275resolveWindow"])("scroll",(function(){return t._onScroll()}),!1,o["\u0275\u0275resolveWindow"])},inputs:{contentType:"contentType",group:"group",selectedContent:"selectedContent",allowDuplicates:"allowDuplicates",required:"required",placeholder:"placeholder",disabled:"disabled"},outputs:{selectedContentChange:"selectedContentChange"},features:[o["\u0275\u0275ProvidersFeature"]([V])],decls:9,vars:3,consts:[[1,"mg-content-select-inner"],["class","content-options-container",3,"display",4,"globalFloatingPortal"],["class","mg-content-select-mat-chip",3,"removable","selectable","removed",4,"ngFor","ngForOf"],[1,"search-input","measure-placeholder"],["inputMeasurePlaceholder",""],["type","text","maxlength","32",1,"search-input",3,"ngModel","keydown","ngModelChange"],["inputElement",""],[1,"content-options-container"],["contentOptionsContainer",""],["class","content-option","fxLayout","row","fxLayoutAlign","start center",3,"highlighted","click","mousedown",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center",1,"content-option",3,"click","mousedown"],[1,"content-option-icon"],["fxFlex","auto"],[1,"mg-content-select-mat-chip",3,"removable","selectable","removed"],["matChipRemove",""]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"label",0),o["\u0275\u0275template"](1,R,3,3,"div",1),o["\u0275\u0275elementStart"](2,"mat-chip-list"),o["\u0275\u0275template"](3,U,4,3,"mat-chip",2),o["\u0275\u0275elementStart"](4,"span",3,4),o["\u0275\u0275text"](6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"input",5,6),o["\u0275\u0275listener"]("keydown",(function(e){return t._onSearchKeypress(e)}))("ngModelChange",(function(e){return t._searchText=e}))("ngModelChange",(function(e){return t._onSearchTextChange(e)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",t.selectedContent),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](t._searchText),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngModel",t._searchText))},directives:[f,p.c,i.n,h.d,h.n,h.t,h.w,A.e,A.d,A.b,p.a,u.a,p.d],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");.mg-content-select-inner[_ngcontent-%COMP%]{margin:8px 0}mat-chip.mg-content-select-mat-chip[_ngcontent-%COMP%]{min-height:25px;margin-right:4px;font-family:Muli,sans-serif;line-height:1.35}@media (orientation:landscape){mat-chip.mg-content-select-mat-chip[_ngcontent-%COMP%]{font-size:2.8985507246vh}}@media (orientation:portrait){mat-chip.mg-content-select-mat-chip[_ngcontent-%COMP%]{font-size:2.8985507246vw}}@media (orientation:landscape) and (max-height:414px){mat-chip.mg-content-select-mat-chip[_ngcontent-%COMP%]{font-size:12px}}@media (orientation:portrait) and (max-width:414px){mat-chip.mg-content-select-mat-chip[_ngcontent-%COMP%]{font-size:12px}}@media (min-width:448.5px){mat-chip.mg-content-select-mat-chip[_ngcontent-%COMP%]{font-size:13px}}.content-options-container[_ngcontent-%COMP%]{position:absolute;background:#fff 0 0 no-repeat padding-box;box-shadow:0 0 6px rgba(0,0,0,.1607843137254902);border:1px solid #ccc;border-radius:4px;padding:4px 0}.content-options-container[_ngcontent-%COMP%]   .content-option[_ngcontent-%COMP%]{white-space:nowrap;padding:4px 16px;cursor:pointer;font-family:Muli,sans-serif;line-height:1.35}@media (orientation:landscape){.content-options-container[_ngcontent-%COMP%]   .content-option[_ngcontent-%COMP%]{font-size:2.8985507246vh}}@media (orientation:portrait){.content-options-container[_ngcontent-%COMP%]   .content-option[_ngcontent-%COMP%]{font-size:2.8985507246vw}}@media (orientation:landscape) and (max-height:414px){.content-options-container[_ngcontent-%COMP%]   .content-option[_ngcontent-%COMP%]{font-size:12px}}@media (orientation:portrait) and (max-width:414px){.content-options-container[_ngcontent-%COMP%]   .content-option[_ngcontent-%COMP%]{font-size:12px}}@media (min-width:448.5px){.content-options-container[_ngcontent-%COMP%]   .content-option[_ngcontent-%COMP%]{font-size:13px}}.content-options-container[_ngcontent-%COMP%]   .content-option[_ngcontent-%COMP%]   .content-img[_ngcontent-%COMP%]{min-width:16px;max-width:16px;height:16px;border-radius:50%;margin-right:6px;background-color:#fff;background-position:50%;background-size:cover;border:1px solid #ccc;box-sizing:border-box}.content-options-container[_ngcontent-%COMP%]   .content-option.highlighted[_ngcontent-%COMP%], .content-options-container[_ngcontent-%COMP%]   .content-option[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.content-options-container[_ngcontent-%COMP%]:hover.highlighted{background-color:unset}.search-input[_ngcontent-%COMP%]{background-color:initial;display:inline-block;border:0;padding:0;margin:0;min-width:1em;min-width:1ch;outline:none}.search-input.measure-placeholder[_ngcontent-%COMP%]{position:absolute;opacity:0;-webkit-user-select:none;user-select:none;pointer-events:none}'],changeDetection:0}),e})(),L=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[b,v.a,i.c,h.m,s.a,p.e,u.b]]}),e})();var N=n("yUAh"),$=n("+/Hu"),B=n("2Vo4"),W=n("Kj3r"),J=n("UXun"),K=n("/uUt"),X=n("SxV6"),Y=n("eIep");const Z=["mentionableOptionsContainer"],ee=["inputElement"],te=["inputMeasurePlaceholder"];function ne(e,t){if(1&e&&o["\u0275\u0275element"](0,"div",13),2&e){const e=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275styleProp"]("background-image","url("+e.imageUrl+")")}}function ie(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",10),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](e);const n=t.$implicit,i=o["\u0275\u0275nextContext"](2);return i._selectOption(n),i.focusInput()}))("mousedown",(function(){o["\u0275\u0275restoreView"](e);const n=t.$implicit,i=o["\u0275\u0275nextContext"](2);return i._selectOption(n),i.focusInput()})),o["\u0275\u0275template"](1,ne,1,2,"div",11),o["\u0275\u0275elementStart"](2,"div",12),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,i=o["\u0275\u0275nextContext"](2);o["\u0275\u0275classProp"]("highlighted",i._highlightedOption==n),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.imageUrl),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.displayName)}}function oe(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",7,8),o["\u0275\u0275template"](2,ie,4,4,"div",9),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275styleProp"]("display",e.focused&&e._options.length>0?"":"none"),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",e._options)}}function se(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"mat-icon",16),o["\u0275\u0275text"](1,"cancel"),o["\u0275\u0275elementEnd"]())}function ae(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"mat-chip",14),o["\u0275\u0275listener"]("removed",(function(){o["\u0275\u0275restoreView"](e);const n=t.index;return o["\u0275\u0275nextContext"]()._removeSelected(n)})),o["\u0275\u0275text"](1),o["\u0275\u0275template"](2,se,2,0,"mat-icon",15),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("removable",!n.uneditableMentions.includes(e.hash))("selectable",!n.uneditableMentions.includes(e.hash)),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",e.displayName," "),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!n.uneditableMentions.includes(e.hash))}}const re={provide:d.e,useExisting:Object(o.forwardRef)(()=>ce)};let ce=(()=>{class e{constructor(e,t,n,i,s){this.mentionsService=e,this.cdr=t,this.fm=n,this._injector=i,this._matFormField=s,this._focused=!1,this._options=[],this._highlightedOption=-1,this._searchText="",this._searchText$=new B.a(""),this.selectedMentionables=[],this.allowDuplicates=!1,this.options={searchGroups:!0,searchPeople:!0},this._ngControl=null,this.required=!1,this.placeholder="",this.disabled=!1,this.uneditableMentions=[],this.controlType="mg-mentionable-select",this._stateChanges=new _.a,this.stateChanges=this._stateChanges.asObservable(),this.selectedMentionablesChange=new o.EventEmitter,this.searchText$=this._searchText$.asObservable(),this.searchTextDebounced$=this.searchText$.pipe(Object(W.a)(300),Object(J.a)(1),Object(K.a)())}get id(){return""}get focused(){return this._focused}get empty(){return 0===this.selectedMentionables.length}get shouldLabelFloat(){return this.focused||!this.empty||this._searchText.length>0}get ngControl(){return this._ngControl}get errorState(){return!!(this.ngControl&&this.ngControl.touched&&(this.ngControl.invalid||this.required&&this.empty))}get value(){return this.selectedMentionables.map(e=>e.hash)}setDescribedByIds(e){}onContainerClick(e){}ngOnInit(){var e;this._ngControl=this._injector.get(h.s),null!=this._ngControl&&(this._ngControl.valueAccessor=this),this.fm.monitor(null===(e=this.inputElement)||void 0===e?void 0:e.nativeElement).subscribe(e=>requestAnimationFrame(()=>{this._focused=null!==e,this.cdr.markForCheck()}))}ngOnDestroy(){this._optionsSub&&(this._optionsSub.unsubscribe(),delete this._optionsSub)}focusInput(){var e;(null===(e=this.inputElement)||void 0===e?void 0:e.nativeElement)&&this.fm.focusVia(this.inputElement.nativeElement,"program")}clear(e=!0){this.selectedMentionables=[],e&&this.selectedMentionablesChange.emit(this.selectedMentionables)}setFromStringArray(e,t=!0){return Object(C.a)(this,void 0,void 0,(function*(){this.clear();const n=[];for(const t of e){const e=yield this.mentionsService.getMentionable(t).pipe(Object(X.a)()).toPromise();e&&(n.push(e),this.selectedMentionables.push(e),this.cdr.markForCheck())}t&&this.selectedMentionablesChange.emit(this.selectedMentionables)}))}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}writeValue(e){null===e?this.clear():Array.isArray(e)?this.setFromStringArray(e):(console.warn("Invalid write value to mg-mentionable-select:",e),this.clear())}_onFocus(){this.focusInput()}_onClick(){this.focusInput()}_onResize(){requestAnimationFrame(()=>this._repositionOptionsContainer())}_onScroll(){this.focused&&requestAnimationFrame(()=>this._repositionOptionsContainer())}_resizeInputElement(){var e,t;const n=null===(e=this.inputElement)||void 0===e?void 0:e.nativeElement,i=null===(t=this.inputMeasurePlaceholder)||void 0===t?void 0:t.nativeElement;if(!n||!i)return;const o=getComputedStyle(i);n.style.width=parseInt(o.width)+10+"px",requestAnimationFrame(()=>this._repositionOptionsContainer())}_repositionOptionsContainer(){var e,t;const n=null===(e=this.mentionableOptionsContainer)||void 0===e?void 0:e.nativeElement;if(!n)return;const i=null===(t=this.inputElement)||void 0===t?void 0:t.nativeElement;if(!i)return;const o=document.body.getBoundingClientRect(),s=i.getBoundingClientRect();n.style.transform="",n.style.left=`${s.right}px`,n.style.top=s.top-o.top+"px",n.getBoundingClientRect().right>innerWidth&&(n.style.left="100vw",n.style.transform="translateX(-100%)",n.style.top=s.bottom-o.top+"px")}_removeSelected(e){this.selectedMentionables.splice(e,1),this.selectedMentionablesChange.emit(this.selectedMentionables),this._onChange&&this._onChange(this.selectedMentionables),this.cdr.markForCheck()}_onSearchTextChange(e){this._searchText$.next(e),this._optionsSub||(this._optionsSub=this.searchTextDebounced$.pipe(Object(Y.a)(e=>this.mentionsService.findMentionables(e,this.options))).subscribe(e=>{this.allowDuplicates||(e=e.filter(e=>-1===this.selectedMentionables.findIndex(t=>t.hash===e.hash))),this._options=e.slice(0,5),this.cdr.markForCheck(),requestAnimationFrame(()=>this._repositionOptionsContainer())})),e||(this._optionsSub&&(this._optionsSub.unsubscribe(),delete this._optionsSub),this._options=[],this._highlightedOption=-1,this.cdr.markForCheck()),requestAnimationFrame(()=>this._resizeInputElement())}_onSearchKeypress(e){if(this._searchText)switch(e.key){case"Tab":case"Enter":e.preventDefault(),e.stopPropagation(),this._selectHighlightedOption();break;case"ArrowUp":e.preventDefault(),e.stopPropagation(),this._highlightOptionUp();break;case"ArrowDown":this._highlightOptionDown(),e.preventDefault(),e.stopPropagation()}}_highlightOptionUp(){this._highlightedOption=Math.max(0,this._highlightedOption-1),this.cdr.markForCheck()}_highlightOptionDown(){this._highlightedOption=Math.min(this._options.length-1,this._highlightedOption+1),this.cdr.markForCheck()}_selectHighlightedOption(){const e=Math.max(0,this._highlightedOption);this._options[e]&&this._selectOption(this._options[e])}_selectOption(e){this.selectedMentionables.push(e),this._options=[],this._highlightedOption=-1,this._searchText="",this.cdr.markForCheck(),this.selectedMentionablesChange.emit(this.selectedMentionables),this._onChange&&this._onChange(this.selectedMentionables)}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"]($.b),o["\u0275\u0275directiveInject"](o.ChangeDetectorRef),o["\u0275\u0275directiveInject"](T.h),o["\u0275\u0275directiveInject"](o.Injector),o["\u0275\u0275directiveInject"](d.d,8))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-mentionable-select"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](Z,1),o["\u0275\u0275viewQuery"](ee,3),o["\u0275\u0275viewQuery"](te,3)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.mentionableOptionsContainer=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.inputElement=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.inputMeasurePlaceholder=e.first)}},hostBindings:function(e,t){1&e&&o["\u0275\u0275listener"]("focus",(function(){return t._onFocus()}))("click",(function(){return t._onClick()}))("resize",(function(){return t._onResize()}),!1,o["\u0275\u0275resolveWindow"])("scroll",(function(){return t._onScroll()}),!1,o["\u0275\u0275resolveWindow"])},inputs:{selectedMentionables:"selectedMentionables",allowDuplicates:"allowDuplicates",options:"options",required:"required",placeholder:"placeholder",disabled:"disabled",uneditableMentions:"uneditableMentions"},outputs:{selectedMentionablesChange:"selectedMentionablesChange"},features:[o["\u0275\u0275ProvidersFeature"]([re])],decls:9,vars:3,consts:[[1,"mg-mentionable-select-inner"],["class","mentionable-options-container",3,"display",4,"globalFloatingPortal"],["class","mg-mentionable-select-mat-chip",3,"removable","selectable","removed",4,"ngFor","ngForOf"],[1,"search-input","measure-placeholder"],["inputMeasurePlaceholder",""],["type","text","maxlength","32",1,"search-input",3,"ngModel","keydown","ngModelChange"],["inputElement",""],[1,"mentionable-options-container"],["mentionableOptionsContainer",""],["class","mentionable-option","fxLayout","row","fxLayoutAlign","start center",3,"highlighted","click","mousedown",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center",1,"mentionable-option",3,"click","mousedown"],["class","mentionable-img",3,"background-image",4,"ngIf"],["fxFlex","auto"],[1,"mentionable-img"],[1,"mg-mentionable-select-mat-chip",3,"removable","selectable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"label",0),o["\u0275\u0275template"](1,oe,3,3,"div",1),o["\u0275\u0275elementStart"](2,"mat-chip-list"),o["\u0275\u0275template"](3,ae,3,4,"mat-chip",2),o["\u0275\u0275elementStart"](4,"span",3,4),o["\u0275\u0275text"](6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"input",5,6),o["\u0275\u0275listener"]("keydown",(function(e){return t._onSearchKeypress(e)}))("ngModelChange",(function(e){return t._searchText=e}))("ngModelChange",(function(e){return t._onSearchTextChange(e)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",t.selectedMentionables),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](t._searchText),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngModel",t._searchText))},directives:[f,p.c,i.n,h.d,h.n,h.t,h.w,A.e,A.d,i.o,A.b,p.a,u.a,p.d],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");.mg-mentionable-select-inner[_ngcontent-%COMP%]{margin:8px 0}mat-chip.mg-mentionable-select-mat-chip[_ngcontent-%COMP%]{min-height:25px;margin-right:4px;font-family:Muli,sans-serif;line-height:1.35}@media (orientation:landscape){mat-chip.mg-mentionable-select-mat-chip[_ngcontent-%COMP%]{font-size:2.8985507246vh}}@media (orientation:portrait){mat-chip.mg-mentionable-select-mat-chip[_ngcontent-%COMP%]{font-size:2.8985507246vw}}@media (orientation:landscape) and (max-height:414px){mat-chip.mg-mentionable-select-mat-chip[_ngcontent-%COMP%]{font-size:12px}}@media (orientation:portrait) and (max-width:414px){mat-chip.mg-mentionable-select-mat-chip[_ngcontent-%COMP%]{font-size:12px}}@media (min-width:448.5px){mat-chip.mg-mentionable-select-mat-chip[_ngcontent-%COMP%]{font-size:13px}}.mentionable-options-container[_ngcontent-%COMP%]{position:absolute;background:#fff 0 0 no-repeat padding-box;box-shadow:0 0 6px rgba(0,0,0,.1607843137254902);border:1px solid #ccc;border-radius:4px;padding:4px 0}.mentionable-options-container[_ngcontent-%COMP%]   .mentionable-option[_ngcontent-%COMP%]{white-space:nowrap;padding:4px 16px;cursor:pointer;font-family:Muli,sans-serif;line-height:1.35}@media (orientation:landscape){.mentionable-options-container[_ngcontent-%COMP%]   .mentionable-option[_ngcontent-%COMP%]{font-size:2.8985507246vh}}@media (orientation:portrait){.mentionable-options-container[_ngcontent-%COMP%]   .mentionable-option[_ngcontent-%COMP%]{font-size:2.8985507246vw}}@media (orientation:landscape) and (max-height:414px){.mentionable-options-container[_ngcontent-%COMP%]   .mentionable-option[_ngcontent-%COMP%]{font-size:12px}}@media (orientation:portrait) and (max-width:414px){.mentionable-options-container[_ngcontent-%COMP%]   .mentionable-option[_ngcontent-%COMP%]{font-size:12px}}@media (min-width:448.5px){.mentionable-options-container[_ngcontent-%COMP%]   .mentionable-option[_ngcontent-%COMP%]{font-size:13px}}.mentionable-options-container[_ngcontent-%COMP%]   .mentionable-option[_ngcontent-%COMP%]   .mentionable-img[_ngcontent-%COMP%]{min-width:16px;max-width:16px;height:16px;border-radius:50%;margin-right:6px;background-color:#fff;background-position:50%;background-size:cover;border:1px solid #ccc;box-sizing:border-box}.mentionable-options-container[_ngcontent-%COMP%]   .mentionable-option.highlighted[_ngcontent-%COMP%], .mentionable-options-container[_ngcontent-%COMP%]   .mentionable-option[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.mentionable-options-container[_ngcontent-%COMP%]:hover.highlighted{background-color:unset}.search-input[_ngcontent-%COMP%]{background-color:initial;display:inline-block;border:0;padding:0;margin:0;min-width:1em;min-width:1ch;outline:none}.search-input.measure-placeholder[_ngcontent-%COMP%]{position:absolute;opacity:0;-webkit-user-select:none;user-select:none;pointer-events:none}'],changeDetection:0}),e})(),le=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[$.a,b,i.c,h.m,p.e,u.b,s.a]]}),e})();var he=n("EBcp"),de=n("HxU+"),pe=n("ls3q"),ue=n("jaBy"),ge=n("JVed"),me=n("HSxi"),fe=n("cEQe"),be=n("i1AJ"),ve=n("8p1t");const Ce=["form"],_e=function(){return{searchPeople:!0}},xe=function(){return{searchGroups:!0}},ye=function(){return{searchEvents:!0}},Oe=["*"];let Me=(()=>{class e{constructor(e,t,n){this.eventsFacade=e,this.groupsFacade=t,this.cdr=n,this._data={imageAssets:[],description:"",taggedGroups:[],taggedPeople:[],taggedContent:[]},this.uneditableEventContentHashes=[],this.uneditableGroupHashes=[],this.showSingleImage=!1,this.statusChanges=new o.EventEmitter,this.taggedMentionableHashes=[],this.taggedGroupHashes=[],this.taggedContentHashes=[],this.dataChanges=new o.EventEmitter}get data(){return this._data}get valid(){var e;return(null===(e=this.form)||void 0===e?void 0:e.valid)||!1}get invalid(){return!this.valid}set _preselectedEventContextHashses(e){this._applyPreselectedEventContextHashes(e)}set _preselectedGroupHashes(e){this._applyPreselectedGroupHashes(e)}_applyPreselectedEventContextHashes(e){return Object(C.a)(this,void 0,void 0,(function*(){if(e.length){yield this.eventsFacade.fetchEventCollectionIfNeeded();const t=[];for(const i of e){const e=yield this.eventsFacade.getEventByContextHash(i).pipe(Object(X.a)()).toPromise();e&&t.push(e.hash)}const n=x.union(this._data.taggedContent,t);this._data.taggedContent=n,this.taggedContentHashes=n,this.uneditableEventContentHashes=t,this.dataChanges.emit(this._data),this.cdr.markForCheck()}}))}_applyPreselectedGroupHashes(e){return Object(C.a)(this,void 0,void 0,(function*(){if(e.length){this.groupsFacade.dispatchLoadAll();const t=e.map(e=>e.hash),n=e.filter(e=>e.immutable).map(e=>e.hash),i=x.union(this._data.taggedGroups,t);this._data.taggedGroups=i,this.taggedGroupHashes=i,this.uneditableGroupHashes=n,this.dataChanges.emit(this._data),this.cdr.markForCheck()}}))}onTaggedMentionablesChange(e){this._data.taggedPeople=e.map(e=>e.hash),this.dataChanges.emit(this._data)}onTaggedGroupsChange(e){this._data.taggedGroups=e.map(e=>e.hash),this.dataChanges.emit(this._data)}onTaggedContentChange(e){this._data.taggedContent=e.map(e=>e.hash),this.dataChanges.emit(this._data)}setData(e){this._data=Object.assign({},e)}ngOnInit(){return Object(C.a)(this,void 0,void 0,(function*(){this.form&&this.form.statusChanges&&this.form.statusChanges.subscribe(e=>{this.statusChanges.next(e)}),yield this.eventsFacade.fetchEventCollectionIfNeeded()}))}getSingleImagePreviewUrl(){if(this.data.imageAssets.length>0){const e=this.data.imageAssets[0];return Object(ue.b)(e)}return""}onImageAssetsChange(e){}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](ge.a),o["\u0275\u0275directiveInject"](me.b),o["\u0275\u0275directiveInject"](o.ChangeDetectorRef))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-add-gallery-photo-form"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](Ce,3),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.form=e.first)}},inputs:{_preselectedEventContextHashses:["preselectedEventContextHashses","_preselectedEventContextHashses"],_preselectedGroupHashes:["preselectedGroupHashes","_preselectedGroupHashes"]},outputs:{statusChanges:"statusChanges",dataChanges:"dataChanges"},ngContentSelectors:Oe,decls:35,vars:17,consts:[["form","ngForm"],[1,"file-input-upload-many-wrap"],["name","imageAssets",3,"required","ngModel","ngModelChange","mgModelStatusChanges"],["uploadMany",""],[1,"section"],["mgFormField",""],["name","description","maxlength","512",3,"ngModel","ngModelChange"],["align","end"],["name","taggedMentionables",3,"options","ngModel","selectedMentionablesChange","ngModelChange"],["name","taggedGroups",3,"options","uneditableMentions","ngModel","selectedMentionablesChange","ngModelChange"],["name","taggedContent",3,"options","uneditableMentions","ngModel","selectedMentionablesChange","ngModelChange"]],template:function(e,t){if(1&e&&(o["\u0275\u0275projectionDef"](),o["\u0275\u0275elementStart"](0,"form",null,0),o["\u0275\u0275elementStart"](2,"div",1),o["\u0275\u0275elementStart"](3,"mg-file-input-upload-many",2,3),o["\u0275\u0275listener"]("ngModelChange",(function(e){return t._data.imageAssets=e}))("ngModelChange",(function(e){return t.onImageAssetsChange(e)}))("mgModelStatusChanges",(function(){return t.onImageAssetsChange(t._data.imageAssets)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",4),o["\u0275\u0275elementStart"](6,"mat-form-field",5),o["\u0275\u0275elementStart"](7,"mat-label"),o["\u0275\u0275text"](8,"Description"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"mg-textarea",6),o["\u0275\u0275listener"]("ngModelChange",(function(e){return t._data.description=e})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"mat-hint",7),o["\u0275\u0275text"](11),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"div",4),o["\u0275\u0275elementStart"](13,"mat-form-field",5),o["\u0275\u0275elementStart"](14,"mat-label"),o["\u0275\u0275text"](15,"Tag People"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"mg-mentionable-select",8),o["\u0275\u0275listener"]("selectedMentionablesChange",(function(e){return t.onTaggedMentionablesChange(e)}))("ngModelChange",(function(e){return t.taggedMentionableHashes=e})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](17,"mat-hint"),o["\u0275\u0275text"](18,"Type any name"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](19,"div",4),o["\u0275\u0275elementStart"](20,"mat-form-field",5),o["\u0275\u0275elementStart"](21,"mat-label"),o["\u0275\u0275text"](22,"Tag Group(s)"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](23,"mg-mentionable-select",9),o["\u0275\u0275listener"]("selectedMentionablesChange",(function(e){return t.onTaggedGroupsChange(e)}))("ngModelChange",(function(e){return t.taggedGroupHashes=e})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](24,"mat-hint"),o["\u0275\u0275text"](25,"Type any group"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](26,"div",4),o["\u0275\u0275elementStart"](27,"mat-form-field",5),o["\u0275\u0275elementStart"](28,"mat-label"),o["\u0275\u0275text"](29,"Tag Event(s)"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](30,"mg-mentionable-select",10),o["\u0275\u0275listener"]("selectedMentionablesChange",(function(e){return t.onTaggedContentChange(e)}))("ngModelChange",(function(e){return t.taggedContentHashes=e})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](31,"mat-hint"),o["\u0275\u0275text"](32,"Type any event"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](33,"div",4),o["\u0275\u0275projection"](34),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275reference"](4);o["\u0275\u0275advance"](2),o["\u0275\u0275classProp"]("no-images",!(null!=e&&e.files.length)),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("required",!0)("ngModel",t._data.imageAssets),o["\u0275\u0275advance"](6),o["\u0275\u0275property"]("ngModel",t._data.description),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("",t._data.description.length," / 512"),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("options",o["\u0275\u0275pureFunction0"](14,_e))("ngModel",t.taggedMentionableHashes),o["\u0275\u0275advance"](7),o["\u0275\u0275property"]("options",o["\u0275\u0275pureFunction0"](15,xe))("uneditableMentions",t.uneditableGroupHashes)("ngModel",t.taggedGroupHashes),o["\u0275\u0275advance"](7),o["\u0275\u0275property"]("options",o["\u0275\u0275pureFunction0"](16,ye))("uneditableMentions",t.uneditableEventContentHashes)("ngModel",t.taggedContentHashes)}},directives:[h.E,h.u,h.v,fe.a,h.B,h.t,h.w,d.d,be.a,d.h,ve.a,h.n,d.g,ce],styles:["[_nghost-%COMP%]{display:block}.section[_ngcontent-%COMP%]{margin:16px}.file-input-upload-many-wrap.no-images[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:6px;margin:16px 16px 0}"],changeDetection:0}),e})(),we=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[N.a,l.b,he.a,pe.a,de.a,le,L,i.c,h.m,d.f]]}),e})();var Ee=n("PLeU"),Pe=n("txl0"),Se=n("jNxq"),ke=n("GFah"),je=n("SYVq"),Fe=n("4avL");const Ie=["form"],He=function(e){return[e]};let Te=(()=>{class e{constructor(e,t,n,i,o,s,a,r){this.router=e,this.galleryService=t,this.streamManager=n,this.rootService=i,this.route=o,this.cdr=s,this._location=a,this.groupsFacade=r,this.immutableEventContextHash="",this.immutableGroupHash="",this.groupHashes=[],this.route.params.subscribe(e=>{e.eventContextHash&&(this.immutableEventContextHash=e.eventContextHash,this.cdr.markForCheck()),e.groupHash&&(this.groupHashes.push({hash:e.groupHash,immutable:!0}),this.cdr.markForCheck())})}ngOnInit(){this._checkDistrictEnabled()}_checkDistrictEnabled(){return Object(C.a)(this,void 0,void 0,(function*(){let e=yield this.groupsFacade.getParentGroupHashes();if(1===this.groupHashes.length){const t=yield this.groupsFacade.getGroup(this.groupHashes[0].hash).pipe(Object(X.a)()).toPromise();(null==t?void 0:t.parentGroupHash)?e=[t.parentGroupHash]:(null==t?void 0:t.isParent)&&(e=[])}if(e){const t=[...this.groupHashes],n=t.map(e=>e.hash);e.forEach(e=>{n.includes(e)||t.push({hash:e,immutable:!1})}),this.groupHashes=t}}))}_submit(e){return Object(C.a)(this,void 0,void 0,(function*(){yield this.galleryService.addPhoto(e),yield this.streamManager.restartStreamIfAvailable("GalleryFeed");let t=["/gallery"];this.immutableEventContextHash?(t.push("event"),t.push(this.immutableEventContextHash)):this.immutableGroupHash&&(t.push("group"),t.push(this.immutableGroupHash)),yield this.router.navigate(t),yield Object(Ee.a)(this.router)}))}submit(e){return Object(C.a)(this,void 0,void 0,(function*(){yield this.rootService.addLoadingPromise(this._submit(e))}))}cancel(){return Object(C.a)(this,void 0,void 0,(function*(){this.immutableEventContextHash?this._location.back():yield Object(Ee.a)(this.router)}))}onFormStatusChanges(e){this.updateOverlayNext()}updateOverlayNext(){this._onOverlayNextUpdate&&this._onOverlayNextUpdate(this.hasOverlayNext())}updateOverlayPrevious(){this._onOverlayPreviousUpdate&&this._onOverlayPreviousUpdate(this.hasOverlayPrevious())}onOverlayNext(){var e;return Object(C.a)(this,void 0,void 0,(function*(){(null===(e=this.form)||void 0===e?void 0:e.data)&&(yield this.submit(this.form.data))}))}onOverlayPrevious(){return Object(C.a)(this,void 0,void 0,(function*(){yield this.cancel()}))}hasOverlayNext(){return{icon:"publish-o",text:"Publish",disabled:!this.form||this.form.invalid}}hasOverlayPrevious(){return{icon:"back",text:"Cancel"}}registerOnOverlayConfig(e){e({})}registerOnOverlayPreviousUpdate(e){this._onOverlayPreviousUpdate=e}registerOnOverlayNextUpdate(e){this._onOverlayNextUpdate=e}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](a.g),o["\u0275\u0275directiveInject"](Pe.a),o["\u0275\u0275directiveInject"](Se.a),o["\u0275\u0275directiveInject"](ke.a),o["\u0275\u0275directiveInject"](a.a),o["\u0275\u0275directiveInject"](o.ChangeDetectorRef),o["\u0275\u0275directiveInject"](i.k),o["\u0275\u0275directiveInject"](me.b))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](Ie,3),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.form=e.first)}},decls:9,vars:6,consts:[[3,"component"],[3,"preselectedEventContextHashses","preselectedGroupHashes","statusChanges"],["form",""],["fxLayout","row","fxLayoutGap","8px"],["fxFlex","auto"],["type","text",1,"normal",3,"click"],["type","outline",1,"normal",3,"disabled","click"]],template:function(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275element"](0,"mg-legacy-overlay-nav",0),o["\u0275\u0275elementStart"](1,"mg-add-gallery-photo-form",1,2),o["\u0275\u0275listener"]("statusChanges",(function(e){return t.onFormStatusChanges(e)})),o["\u0275\u0275elementStart"](3,"div",3),o["\u0275\u0275element"](4,"div",4),o["\u0275\u0275elementStart"](5,"mg-button",5),o["\u0275\u0275listener"]("click",(function(){return t.cancel()})),o["\u0275\u0275text"](6,"Cancel"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"mg-button",6),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](e);const n=o["\u0275\u0275reference"](2);return t.submit(n.data)})),o["\u0275\u0275text"](8,"Publish"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275reference"](2);o["\u0275\u0275property"]("component",t),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("preselectedEventContextHashses",o["\u0275\u0275pureFunction1"](4,He,t.immutableEventContextHash))("preselectedGroupHashes",t.groupHashes),o["\u0275\u0275advance"](6),o["\u0275\u0275property"]("disabled",e.invalid)}},directives:[je.a,Me,A.e,A.f,A.b,Fe.a],styles:[""],changeDetection:0}),e})();const Ae=[{path:"add",component:Te},{path:"add/event/:eventContextHash",component:Te},{path:"add/group/:groupHash",component:Te}];let De=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[we,r.a,l.b,c.a,i.c,a.k,s.a,a.k.forChild(Ae)]]}),e})()}}]);
//# sourceMappingURL=minga-app-src-app-routes-gallery-AddGalleryPhotoRoute-AddGalleryPhotoRoute-module-es2015.js.map
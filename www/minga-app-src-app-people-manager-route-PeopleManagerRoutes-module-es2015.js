(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{"R/dt":function(e,t,n){"use strict";n.r(t),n.d(t,"PeopleManagerRoutesModule",(function(){return bi}));var i=n("8Y7J"),r=n("iInd"),o=n("mrSG"),a=n("7bNT"),l=n("2Vo4"),s=n("jtHE"),d=n("1G5W"),c=n("Kj3r"),m=n("lJxs"),p=function(e){return e.REGISTERED="Registered",e.TOTAL="Total",e.DAILY="daily",e.WEEKLY="weekly",e.MONTHLY="monthly",e.SADMIN="Super Admin",e.UNREGISTERED="Unregistered",e}({}),g=n("PYFZ");const u=(e,t,n)=>{let i=0,r=t;for(let o=0;e.length>o;o++){const r=e[o];let a=r.getStatTitle();const l={title:a,countText:"--",total:r.getStatTotal()||r.getStatCount(),primary:n,daily:r.getDaily(),weekly:r.getWeekly(),monthly:r.getMonthly(),registered:r.getRegistered(),statColor:r.getStatColor()};if(a!==p.REGISTERED&&a!==p.TOTAL||(l.filterActive=!0,i=o),r.hasStatPercent()?l.countText=(100*r.getStatPercent()).toFixed(0)+"%":r.hasStatCount()&&(l.countText=""+r.getStatCount()),r.hasStatSearchFilter()){const e=r.getStatSearchFilter().getKeyValuesMap();l.searchFilter={},e.forEach((e,t)=>{let n;switch(e.getValuesCase()){case g.StreamFilterType.ValuesCase.BOOL_VALUE:n=e.getBoolValue();break;case g.StreamFilterType.ValuesCase.FLOAT_VALUE:n=e.getFloatValue();break;case g.StreamFilterType.ValuesCase.DOUBLE_VALUE:n=e.getDoubleValue();break;case g.StreamFilterType.ValuesCase.UINT32_VALUE:n=e.getUint32Value();break;case g.StreamFilterType.ValuesCase.INT32_VALUE:n=e.getInt32Value();break;case g.StreamFilterType.ValuesCase.STRING_VALUE:n=e.getStringValue();break;case g.StreamFilterType.ValuesCase.OP:n=e.getOp();break;default:return}l.searchFilter[t]=n})}t.push(l)}if(!n&&i<r.length-1){const e=r.splice(i)[0];r.push(e)}return r};var f=n("vAI6"),h=n("vJwY"),S=n("dmN4"),x=n("pgOG"),E=n("Cnb3"),v=n("FoY8"),C=function(e){return e[e.TOTAL_PEOPLE=1]="TOTAL_PEOPLE",e[e.REGISTERED=2]="REGISTERED",e[e.UNREGISTERED=3]="UNREGISTERED",e}({}),y=n("lkjj"),O=n("Vwx4"),M=n("QWb5"),_=n("GFah"),T=n("/q54"),I=n("EyMp"),b=n("tfHx"),w=n("M4qg"),P=n("VDRc"),R=n("SVse"),A=n("Q2Ze"),F=n("i1AJ"),L=n("e6WT"),D=n("s7LF"),N=n("ZTz/"),k=n("UhP/"),G=n("kCL4"),U=n("2nPA"),V=n("HQAS"),j=n("0cKA"),q=n("05dM"),z=n("1nQu"),B=n("4YA2"),H=n("sj4O"),$=n("Tj54"),K=n("Fudl"),Y=n("HHVM");const W=e=>e?{hash:e.personHash,photo:e.profileImageUrl,firstName:e.firstName,lastName:e.lastName,studentId:e.studentId,role:e.roleType,grade:e.grade,lastLogin:Q(e.lastLogin),email:e.email,badgeImg:e.badgeIconUrl}:{hash:"",photo:"",firstName:"",lastName:"",studentId:"",role:"",grade:"0",lastLogin:"",email:"",badgeImg:""},Q=e=>{if(!e)return"--";const t=new Date;t.setUTCHours(0),t.setUTCMinutes(0),t.setUTCSeconds(0),t.setUTCMilliseconds(0);const n=new Date(Date.UTC(e.year,e.month-1,e.day)),i=t.getTime()-n.getTime();return i<864e5?"today":Y.day.duration(-i).humanize(!0)};var J=n("fbKg");let X=(()=>{class e{constructor(){}convertPersonMessage(e){return Object(o.a)(this,void 0,void 0,(function*(){return J.ISearchPersonDetailsProtoMapper.fromProto(e)}))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Z=n("cXmD");function ee(e,t){1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div",5),i["\u0275\u0275element"](2,"mg-spinner",6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()),2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("diameter",25)("thickness",4))}function te(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function ne(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,te,1,0,"ng-container",10),i["\u0275\u0275elementContainerEnd"]()),2&e){i["\u0275\u0275nextContext"](2);const e=i["\u0275\u0275reference"](7);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",e)}}function ie(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function re(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,ie,1,0,"ng-container",10),i["\u0275\u0275elementContainerEnd"]()),2&e){i["\u0275\u0275nextContext"](2);const e=i["\u0275\u0275reference"](5);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",e)}}function oe(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0,7),i["\u0275\u0275template"](1,ne,2,1,"ng-container",8),i["\u0275\u0275template"](2,re,2,1,"ng-container",9),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngSwitch",e.showMobileTemplates&&"mobileView"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase","mobileView")}}const ae=function(e){return["people","update",e]},le=function(e){return{o:e}},se=function(e){return{outlets:e}},de=function(e){return["",e]};function ce(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",11),i["\u0275\u0275elementStart"](1,"div",12),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().gotoProfile()})),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div",12),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().gotoProfile()})),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"div",13),i["\u0275\u0275text"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"div",14),i["\u0275\u0275elementStart"](8,"span",15),i["\u0275\u0275text"](9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"div",14),i["\u0275\u0275element"](11,"span",16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"div",17),i["\u0275\u0275elementStart"](13,"a",18),i["\u0275\u0275text"](14),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](15,"div",19),i["\u0275\u0275element"](16,"mg-generic-button",20),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",e.personDetails.firstName," "),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",e.personDetails.lastName," "),i["\u0275\u0275advance"](1),i["\u0275\u0275classProp"]("not-available",!e.personDetails.studentId),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.personDetails.studentId||"N/A"," "),i["\u0275\u0275advance"](2),i["\u0275\u0275classProp"]("not-available",!e.personDetails.grade),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.personDetails.grade||"N/A"," "),i["\u0275\u0275advance"](2),i["\u0275\u0275styleProp"]("background-image","url("+e.personDetails.badgeImg+")"),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("href","mailto:"+e.personDetails.email,i["\u0275\u0275sanitizeUrl"]),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.personDetails.email," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("hasRipples",!1)("isRounded",!1)("routerLink",i["\u0275\u0275pureFunction1"](21,de,i["\u0275\u0275pureFunction1"](19,se,i["\u0275\u0275pureFunction1"](17,le,i["\u0275\u0275pureFunction1"](15,ae,e.personDetails.hash)))))}}function me(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",21),i["\u0275\u0275elementStart"](1,"div",22),i["\u0275\u0275elementStart"](2,"div",23),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().gotoProfile()})),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"div",19),i["\u0275\u0275elementStart"](5,"mg-button-clear",24),i["\u0275\u0275elementStart"](6,"mg-icon"),i["\u0275\u0275text"](7,"edit-o"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"div",25),i["\u0275\u0275elementStart"](9,"div",26),i["\u0275\u0275element"](10,"span",16),i["\u0275\u0275elementStart"](11,"span",15),i["\u0275\u0275text"](12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"div",27),i["\u0275\u0275elementStart"](14,"div",28),i["\u0275\u0275elementStart"](15,"a",18),i["\u0275\u0275text"](16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](17,"div",29),i["\u0275\u0275text"](18),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate2"](" ",e.personDetails.firstName," ",e.personDetails.lastName," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction1"](19,de,i["\u0275\u0275pureFunction1"](17,se,i["\u0275\u0275pureFunction1"](15,le,i["\u0275\u0275pureFunction1"](13,ae,e.personDetails.hash))))),i["\u0275\u0275advance"](5),i["\u0275\u0275styleProp"]("background-image","url("+e.personDetails.badgeImg+")"),i["\u0275\u0275advance"](1),i["\u0275\u0275classProp"]("not-available",!e.personDetails.grade),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.personDetails.grade||"N/A"," "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("href","mailto:"+e.personDetails.email,i["\u0275\u0275sanitizeUrl"]),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.personDetails.email," "),i["\u0275\u0275advance"](1),i["\u0275\u0275classProp"]("not-available",!e.personDetails.studentId),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.personDetails.studentId||"N/A"," ")}}let pe=(()=>{class e{constructor(e,t,n,i){this.media=e,this._cdr=t,this.router=n,this.personDetailsService=i,this.mobileBreakpoints=S.a,this.showMobileTemplates=!1,this.mqAliasSubscription=e.asObservable().subscribe(e=>{this.showMobileTemplates=!!this.mobileBreakpoints.includes(e[0].mqAlias),this._cdr.markForCheck()})}set person(e){this._handleStudentIdResponse(e)}get personDetails(){return this._personDetails}get loading(){return!this._personDetails}gotoProfile(){this.personDetails&&this.router.navigate(["",{outlets:{o:null}}]).then(()=>Object(o.a)(this,void 0,void 0,(function*(){var e;yield this.router.navigate(["/profile",null===(e=this.personDetails)||void 0===e?void 0:e.hash])})))}_handleStudentIdResponse(e){return Object(o.a)(this,void 0,void 0,(function*(){if(e instanceof x.MingaPeopleSearchResult.Item){const t=yield this.personDetailsService.convertPersonMessage(e);this._personDetails=W(t)}else this._personDetails=W(e);this._cdr.markForCheck()}))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](T.g),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](r.g),i["\u0275\u0275directiveInject"](X))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-person-details-row"]],inputs:{person:"person"},decls:8,vars:2,consts:[[1,"person-details"],[4,"ngIf","ngIfElse"],["showPersonDetails",""],["desktopView",""],["mobileView",""],["fxLayout","row","fxLayoutAlign","center center",1,"person-details-row"],[3,"diameter","thickness"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngTemplateOutlet"],["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","10px",1,"person-details-row"],["fxFlex","16",1,"person-details-col-name",3,"click"],["fxFlex","14",1,"person-details-col-id"],["fxFlex","10",1,"person-details-col-role"],[1,"grade"],[1,"badge-img"],["fxFlex","25",1,"person-details-col-email"],[3,"href"],["fxFlex","nogrow",1,"person-details-col-edit"],["colorTheme","navy","iconLeft","edit-o","size","large","paddingSize","none","variant","clear",3,"hasRipples","isRounded","routerLink"],["fxLayout","column","fxLayoutAlign","start center",1,"person-details-row"],["fxLayout","row","fxLayoutGap","15px",1,"full-width"],["fxFlex","",1,"person-details-col-name",3,"click"],[3,"routerLink"],["fxLayout","row","fxLayoutGap","15px","fxLayoutAlign","start stretch",1,"mobile-row-subsection"],["fxFlex","20",1,"person-details-col-role"],["fxFlex","","fxLayout","column","fxLayoutAlign","center center"],["fxFlex","nogrow",1,"person-details-col-email"],[1,"person-details-col-id"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,ee,3,2,"ng-container",1),i["\u0275\u0275template"](2,oe,3,2,"ng-template",null,2,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](4,ce,17,23,"ng-template",null,3,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](6,me,19,21,"ng-template",null,4,i["\u0275\u0275templateRefExtractor"])),2&e){const e=i["\u0275\u0275reference"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.loading)("ngIfElse",e)}},directives:[R.o,P.e,P.d,H.a,R.q,R.r,R.s,R.t,P.f,P.b,G.a,r.h,Z.a,K.a],styles:[".person-details[_ngcontent-%COMP%]{display:block;font-weight:700;background-color:#fff;padding:5px 20px 5px 40px;border:1px solid #ccc;border-radius:5px;box-shadow:0 0 6px rgba(0,0,0,.15)}@media (max-width:1023px){.person-details[_ngcontent-%COMP%]{padding:5px 20px}}.person-details-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{text-align:left;font-size:14px}@media (max-width:1023px){.person-details-col-name[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:20px}}.person-details-col-email[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{word-break:break-all;text-decoration:none;color:#036}.person-details-col-email[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (max-width:1023px){.person-details-col-email[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{font-size:16px}}.person-details-col-id.not-available[_ngcontent-%COMP%]{color:#ececec}@media (max-width:1023px){.person-details-col-id[_ngcontent-%COMP%]{font-size:16px}}@media (max-width:1023px){.person-details-col-role[_ngcontent-%COMP%]{text-align:center}}.person-details-col-role[_ngcontent-%COMP%]   .badge-img[_ngcontent-%COMP%]{display:inline-block;width:30px;height:30px;margin-top:5px;-webkit-mask-size:contain;mask-size:contain;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;text-align:center}.person-details-col-role[_ngcontent-%COMP%]   .grade[_ngcontent-%COMP%]{display:block;text-align:center}.person-details-col-role[_ngcontent-%COMP%]   .grade.not-available[_ngcontent-%COMP%]{color:#ececec}.mobile-row-subsection[_ngcontent-%COMP%]{width:100%;border-top:1px solid rgba(0,0,0,.05);padding-top:10px;margin-top:10px}.full-width[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),e})();function ge(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div",32),i["\u0275\u0275elementStart"](2,"mg-count-tile",33),i["\u0275\u0275listener"]("tileClicked",(function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275nextContext"](2);return t.setFilter(t.selectedFilterOptions.TOTAL_PEOPLE)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"mg-count-tile",33),i["\u0275\u0275listener"]("tileClicked",(function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275nextContext"](2);return t.setFilter(t.selectedFilterOptions.REGISTERED)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"mg-count-tile",33),i["\u0275\u0275listener"]("tileClicked",(function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275nextContext"](2);return t.setFilter(t.selectedFilterOptions.UNREGISTERED)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("count",e.displayStats.totalPeople)("label","Total People")("isActive",e.selectedFilter===e.selectedFilterOptions.TOTAL_PEOPLE)("color","#99BAAD")("icon","checkin-6"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("count",e.displayStats.registered)("label","Registered")("isActive",e.selectedFilter===e.selectedFilterOptions.REGISTERED)("color","#254AB1")("icon","checkin-6"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("count",e.displayStats.unregistered)("label","Unregistered")("isActive",e.selectedFilter===e.selectedFilterOptions.UNREGISTERED)("color","#DA6578")("icon","checkin-6")}}function ue(e,t){1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275element"](1,"mg-spinner"),i["\u0275\u0275elementContainerEnd"]())}function fe(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",28),i["\u0275\u0275elementContainerStart"](1,29),i["\u0275\u0275template"](2,ge,5,15,"ng-container",30),i["\u0275\u0275template"](3,ue,2,0,"ng-container",31),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitch",e.loadedCounts&&"showStatusFilters"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase","showStatusFilters")}}function he(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-icon",34),i["\u0275\u0275text"](1," search "),i["\u0275\u0275elementEnd"]())}function Se(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mg-icon",35),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().clearSearch()})),i["\u0275\u0275text"](1," close-thin "),i["\u0275\u0275elementEnd"]()}}function xe(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",37),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275property"]("value",e.roleType),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.name," ")}}const Ee=function(){return{standalone:!0}};function ve(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-form-field",6),i["\u0275\u0275elementStart"](1,"mat-label"),i["\u0275\u0275text"](2,"Filter by Role"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"mat-select",36),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().roleTypeFilter=t})),i["\u0275\u0275elementStart"](4,"mat-option"),i["\u0275\u0275text"](5,"None"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](6,xe,2,2,"mat-option",14),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.ngIf,n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("mgHideOptionalMarker",!0)("mgNoHintMargin",!0),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngModelOptions",i["\u0275\u0275pureFunction0"](5,Ee))("ngModel",n.roleTypeFilter),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngForOf",e)}}function Ce(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",37),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275property"]("value",e),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e," ")}}function ye(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"mg-generic-button",38),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().launchImportPeopleByListDialog()})),i["\u0275\u0275text"](2," Import List "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function Oe(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",39),i["\u0275\u0275elementStart"](1,"mg-generic-button",40),i["\u0275\u0275listener"]("onClick",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().openPeopleSelector()})),i["\u0275\u0275text"](2," Archive "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div",41),i["\u0275\u0275elementStart"](4,"mg-generic-button",42),i["\u0275\u0275listener"]("onClick",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().export()})),i["\u0275\u0275text"](5," Export List "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("hasRipples",!1)("isRounded",!1),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("hasRipples",!1)("isRounded",!1))}function Me(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",43),i["\u0275\u0275elementStart"](1,"div",44),i["\u0275\u0275elementStart"](2,"div",45),i["\u0275\u0275text"](3,"First Name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"div",45),i["\u0275\u0275text"](5,"Last Name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"div",46),i["\u0275\u0275text"](7,"ID Number"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"div",47),i["\u0275\u0275text"](9," Grade "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"div",48),i["\u0275\u0275text"](11,"Role"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"div",49),i["\u0275\u0275text"](13,"Email"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"div",50),i["\u0275\u0275element"](15,"div",51),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}function _e(e,t){1&e&&i["\u0275\u0275element"](0,"mg-person-details-row",52),2&e&&i["\u0275\u0275property"]("person",t.$implicit)}const Te=function(){return["people","add"]},Ie=function(e){return{o:e}},be=function(e){return{outlets:e}},we=function(e){return["",e]};let Pe=(()=>{class e{constructor(e,t,n,i,r,o,p,g,u,h,x,E){this._cdr=e,this.rolesService=t,this.permissions=n,this.gradesService=i,this.rootService=r,this.media=o,this.peopleManager=p,this.peopleAdminManager=g,this.mingaPeopleManager=u,this.actions$=h,this._modalOverlay=x,this._peopleSelector=E,this._searchText$=new l.a(""),this.loadedCounts=!0,this._destroyed$=new s.a(1),this._streamControl=null,this.searchText="",this.searchTextDebounced="",this.selectedFilter=C.TOTAL_PEOPLE,this.selectedFilterOptions=C,this.roleTypeFilter="",this.gradeFilter="",this.currentGroup=null,this.selectedGroup=null,this.loading=!0,this.stats={primary:[],secondary:[]},this.displayStats={totalPeople:0,registered:0,unregistered:0},this.mobileBreakpoints=S.a,this.isOnMobile=!1,this._searchText$.pipe(Object(d.a)(this._destroyed$),Object(c.a)(500)).subscribe(e=>{this.searchTextDebounced=e,this._cdr.markForCheck()}),this.availableFilterRoles$=this.rolesService.availableCommentPermitableRoles$.pipe(Object(m.a)(e=>e.map(e=>({name:e.name,roleType:e.roleType})))),this._mqAliasSubscription=o.asObservable().subscribe(e=>{this.isOnMobile=!!this.mobileBreakpoints.includes(e[0].mqAlias),this._cdr.markForCheck()}),this.availableGradeOptions$=i.grades$,this._initManagePeople(),this.initRoles(),this.actions$.pipe(Object(d.a)(this._destroyed$),Object(a.e)(f.a.TypeEnum.PeopleUpdated)).subscribe(()=>{this._clearStats(),this._initManagePeople()})}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}openPeopleSelector(){this._peopleSelector.open("Archive","add",{})}get streamFilter(){const e={query:"","searchData.archived":!1};return this.selectedFilter!==C.REGISTERED&&this.selectedFilter!==C.UNREGISTERED||(e["searchData.registered"]=this.selectedFilter===C.REGISTERED),this.roleTypeFilter&&(e["searchData.roleType"]=this.roleTypeFilter),this.gradeFilter&&(e["searchData.grade"]=this.gradeFilter),e.query=this.searchTextDebounced,e}get searchResultsCount(){return this._streamControl?this._streamControl.length:0}setStats(e,t){this.displayStats[e]=t,this._cdr.markForCheck()}setFilter(e){e||(this.selectedFilter=C.TOTAL_PEOPLE),this.selectedFilter=this.selectedFilter!==e?e:C.TOTAL_PEOPLE,this._cdr.markForCheck()}onSearchTextChange(e){this._searchText$.next(e)}clearSearch(){this.searchText="",this.searchTextDebounced="",this._cdr.markForCheck()}_initManagePeople(){var e;return Object(o.a)(this,void 0,void 0,(function*(){const t=new x.MingaPeopleInfoRequest,n=this.permissions.hasPermission(E.MingaPermission.GROUP_ALLOW_ANY_PARENT_GROUP);(null===(e=this.currentGroup)||void 0===e?void 0:e.isParent)&&!n?t.setParentGroupHash(this.currentGroup.hash):this.selectedGroup&&t.setParentGroupHash(this.selectedGroup.hash);const i=yield this.mingaPeopleManager.getInfo(t);this.stats.primary=u(i.getPrimaryStatFilterList(),this.stats.primary,!0),this.stats.secondary=u(i.getSecondaryStatFilterList(),this.stats.secondary,!1),this.setStats("registered",(e=>{if(!e.length)return 0;const t=e.find(e=>e.title===p.REGISTERED);return null==t?void 0:t.total})(this.stats.primary)),this.setStats("unregistered",(e=>{if(!e.length)return 0;const t=e.find(e=>e.title===p.UNREGISTERED);return null==t?void 0:t.total})(this.stats.primary)),this.setStats("totalPeople",this.displayStats.registered+this.displayStats.unregistered),yield this._initGradeOptions(),this._cdr.markForCheck()}))}_clearStats(){this.stats.primary=[],this.stats.secondary=[]}_initGradeOptions(){return Object(o.a)(this,void 0,void 0,(function*(){yield this.gradesService.fetchIfNeeded()}))}onStreamControlCreated(e){this._streamControl=e}export(){return Object(o.a)(this,void 0,void 0,(function*(){return this.rootService.addLoadingPromise(this._doExport())}))}_doExport(){return Object(o.a)(this,void 0,void 0,(function*(){const e=new x.ExportPeopleRequest;e.setRegistered(!0===this.streamFilter["searchData.registered"]?x.ExportPeopleRequest.FilterRegistered.REGISTERED:!1===this.streamFilter["searchData.registered"]?x.ExportPeopleRequest.FilterRegistered.NOT_REGISTERED:x.ExportPeopleRequest.FilterRegistered.NOT_SELECTED),this.streamFilter["searchData.roleType"]&&e.addRoleTypeFilter(this.streamFilter["searchData.roleType"]),this.streamFilter["searchData.grade"]&&e.addGradeFilter(this.streamFilter["searchData.grade"]);const t=this.mingaPeopleManager.exportPeople(e);let n="",i=new Uint8Array(0);yield new Promise((e,r)=>{t.subscribe(e=>{if(e.hasChunk()){const t=e.getChunk_asU8(),n=new Uint8Array(i.length+t.length);n.set(i),n.set(t,i.length),i=n}else e.hasFilename()&&(n=e.getFilename())},r,e)}),Object(h.a)(i,n)}))}initRoles(){return Object(o.a)(this,void 0,void 0,(function*(){yield this.rolesService.fetchIfNeeded()}))}launchImportPeopleByListDialog(){this._modalOverlay.open(v.a,{disposeOnNavigation:!1})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](y.a),i["\u0275\u0275directiveInject"](O.c),i["\u0275\u0275directiveInject"](M.b),i["\u0275\u0275directiveInject"](_.a),i["\u0275\u0275directiveInject"](T.g),i["\u0275\u0275directiveInject"](I.PeopleManager),i["\u0275\u0275directiveInject"](I.PeopleAdminManager),i["\u0275\u0275directiveInject"](I.MingaPeopleManager),i["\u0275\u0275directiveInject"](a.a),i["\u0275\u0275directiveInject"](b.e),i["\u0275\u0275directiveInject"](w.PeopleSelectorService))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-manage-people"]],decls:40,vars:35,consts:[[1,"manager-overlay-subpage-header"],["fxLayout","column",1,"manage-people-container"],[1,"filters-container"],["class","filters-status",4,"ngIf"],[1,"filters-inputs"],[1,"filters-inputs-search"],["mgFormField","","appearance","outline",3,"mgHideOptionalMarker","mgNoHintMargin"],["type","text","matInput","","name","searchInput",3,"ngModel","ngModelOptions","ngModelChange"],["matSuffix","","class","navsearch-maticon",4,"ngIf"],["matSuffix","","class","navsearch-close-icon",3,"click",4,"ngIf"],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign","center center","fxLayoutGap","15px",1,"filters-inputs-dropdowns"],["fxFlex","50","fxFlex.lt-sm","auto"],["mgFormField","","appearance","outline",3,"mgHideOptionalMarker","mgNoHintMargin",4,"ngIf"],["name","grade",3,"ngModelOptions","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"divider"],["fxLayoutAlign","end","fxLayoutGap","15px"],["fxLayoutAlign.xs","center center"],["colorTheme","navy",3,"routerLink"],[4,"ngIf"],["fxLayout","column","fxLayoutGap","15px",1,"manager-overlay-subpage-content","white-bg"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","25px",4,"ngIf"],["class","people-list-header",4,"ngIf"],["fxFlex","grow",1,"people-list"],["mgStreamControl","AdminPeopleFeed","rpcStream","searchPeople","rpcControl","searchPeopleControl",3,"service","bufferAmount","filter","streamControlCreated"],["streamScroller",""],["mgStreamItem",""],["mg-stream-empty","",3,"title","subtitle"],[1,"filters-status"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["count-tile-container",""],[3,"count","label","isActive","color","icon","tileClicked"],["matSuffix","",1,"navsearch-maticon"],["matSuffix","",1,"navsearch-close-icon",3,"click"],["name","roleType",3,"ngModelOptions","ngModel","ngModelChange"],[3,"value"],["colorTheme","blue","variant","secondary",3,"click"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","25px"],["colorTheme","red","size","small","paddingSize","none","variant","clear",3,"hasRipples","isRounded","onClick"],["fxLayoutAlign","end"],["colorTheme","navy","size","small","paddingSize","none","variant","clear","iconLeft","download-o",3,"hasRipples","isRounded","onClick"],[1,"people-list-header"],["fxLayout","row","fxLayoutGap","10px"],["fxFlex","16"],["fxFlex","14"],["fxFlex","10","fxLayoutAlign","center center"],["fxFlex","10"],["fxFlex","25"],["fxFlex","nogrow"],[1,"people-list-header-edit-button"],[3,"person"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"div",2),i["\u0275\u0275template"](3,fe,4,2,"div",3),i["\u0275\u0275elementStart"](4,"div",4),i["\u0275\u0275elementStart"](5,"div",5),i["\u0275\u0275elementStart"](6,"mat-form-field",6),i["\u0275\u0275elementStart"](7,"mat-label"),i["\u0275\u0275text"](8,"Search by Name or ID"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"input",7),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.searchText=e}))("ngModelChange",(function(e){return t.onSearchTextChange(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](10,he,2,0,"mat-icon",8),i["\u0275\u0275template"](11,Se,2,0,"mg-icon",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"div",10),i["\u0275\u0275elementStart"](13,"div",11),i["\u0275\u0275elementStart"](14,"div"),i["\u0275\u0275template"](15,ve,7,6,"mat-form-field",12),i["\u0275\u0275pipe"](16,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](17,"div"),i["\u0275\u0275elementStart"](18,"mat-form-field",6),i["\u0275\u0275elementStart"](19,"mat-label"),i["\u0275\u0275text"](20,"Filter by Grade"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](21,"mat-select",13),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.gradeFilter=e})),i["\u0275\u0275elementStart"](22,"mat-option"),i["\u0275\u0275text"](23,"None"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](24,Ce,2,2,"mat-option",14),i["\u0275\u0275pipe"](25,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](26,"div",15),i["\u0275\u0275elementStart"](27,"div",16),i["\u0275\u0275elementStart"](28,"div",17),i["\u0275\u0275elementStart"](29,"mg-generic-button",18),i["\u0275\u0275text"](30," Add Person "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](31,ye,3,0,"div",19),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](32,"div",20),i["\u0275\u0275template"](33,Oe,6,4,"div",21),i["\u0275\u0275template"](34,Me,16,0,"div",22),i["\u0275\u0275elementStart"](35,"div",23),i["\u0275\u0275elementStart"](36,"mg-stream-scroller",24,25),i["\u0275\u0275listener"]("streamControlCreated",(function(e){return t.onStreamControlCreated(e)})),i["\u0275\u0275template"](38,_e,1,1,"ng-template",26),i["\u0275\u0275element"](39,"mg-empty-state",27),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",!t.isOnMobile),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("mgHideOptionalMarker",!0)("mgNoHintMargin",!0),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngModel",t.searchText)("ngModelOptions",i["\u0275\u0275pureFunction0"](26,Ee)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.searchText.length),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.searchText.length),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](16,22,t.availableFilterRoles$)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("mgHideOptionalMarker",!0)("mgNoHintMargin",!0),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngModelOptions",i["\u0275\u0275pureFunction0"](27,Ee))("ngModel",t.gradeFilter),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](25,24,t.availableGradeOptions$)),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction1"](33,we,i["\u0275\u0275pureFunction1"](31,be,i["\u0275\u0275pureFunction1"](29,Ie,i["\u0275\u0275pureFunction0"](28,Te))))),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!t.isOnMobile),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!t.isOnMobile),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.isOnMobile),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("service",t.mingaPeopleManager)("bufferAmount",10)("filter",t.streamFilter),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("title","No Results")("subtitle","Try changing your search or filtering and try again."))},directives:[P.e,R.o,A.d,F.a,A.h,L.b,D.d,D.t,D.w,P.d,P.f,P.b,N.a,k.m,R.n,G.a,r.h,U.a,V.a,j.a,q.a,R.q,R.r,R.s,z.a,B.a,H.a,$.a,A.j,K.a,pe],pipes:[R.b],styles:['[_nghost-%COMP%]{display:flex;flex-direction:column;position:relative}.manager-overlay-subpage[_ngcontent-%COMP%]{margin-bottom:3.5294117647rem}.manager-overlay-subpage-header[_ngcontent-%COMP%]{background:#f4f4f4;padding:1.1764705882rem 20%;box-sizing:border-box;margin:-20px -20% 0;width:calc(140%)}.manager-overlay-subpage-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{display:inline-block;font-size:1.2941176471rem;font-weight:800;color:#036;padding:0;margin:0}@media print,screen and (max-width:37.49875em){.manager-overlay-subpage-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;display:block}}.manager-overlay-subpage-content[_ngcontent-%COMP%]{flex:1;padding:1.1764705882rem 0;box-sizing:border-box}.manager-overlay-subpage-content.white-bg[_ngcontent-%COMP%]{background-color:#fff}.quick-action-container[_ngcontent-%COMP%]{margin-bottom:1.1764705882rem}.quick-action-container[_ngcontent-%COMP%]:empty{display:none}.quick-action-btn[_ngcontent-%COMP%]{-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;-webkit-appearance:none;border-radius:0;text-align:inherit;box-shadow:none;color:inherit;font:inherit;padding:0;margin:0;background:none;border:none;outline:none;box-sizing:border-box;cursor:pointer;font-size:.8823529412rem;color:#036;display:inline-flex;align-items:center;justify-content:center;--mg-icon-size:20px}.quick-action-btn[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{margin-right:.2941176471rem}.quick-action-btn[_ngcontent-%COMP%]:hover{opacity:.7}@media print,screen and (max-width:37.49875em){.quick-action-btn[_ngcontent-%COMP%]{display:none}}.manager-layout-loading-container[_ngcontent-%COMP%]{padding:2.9411764706rem 0}.header-title[_ngcontent-%COMP%]{display:inline-block;font-size:1.2941176471rem;font-weight:800;color:#036;padding:0;margin:0}@media print,screen and (max-width:37.49875em){.header-title[_ngcontent-%COMP%]{text-align:center;display:block}}.manage-people-container[_ngcontent-%COMP%], [_nghost-%COMP%]{height:100%}.filters-container[_ngcontent-%COMP%]{display:flex}.filters-status[_ngcontent-%COMP%]{flex:1 auto}.filters-inputs[_ngcontent-%COMP%]{--mg-form-input-background-color:#fff;--mg-form-input-outline-color:#609fc9}@media (max-width:1023px){.filters-inputs[_ngcontent-%COMP%]{flex:1 auto}}.filters-inputs-dropdowns[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%}.filters-inputs-search[_ngcontent-%COMP%]{margin-bottom:10px}.filters-results[_ngcontent-%COMP%]{list-style:none;list-style-type:none;padding:0;margin:15px 0;display:flex;align-items:center}.filters-results[_ngcontent-%COMP%]   *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-left:10px}.filters-results[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block}.filters-results[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#818181}.filters-results[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:after{display:inline-block;content:"|";color:#818181;margin-left:10px}.filters-results[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{margin-left:auto}.filters-results[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child:after{display:none}.people-list-header[_ngcontent-%COMP%]{font-size:.8823529412rem;font-weight:700;color:#b2b2b2;padding:0 20px 0 40px}.people-list-header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{text-align:left}.people-list-header-edit-button[_ngcontent-%COMP%]{width:50px}mg-icon[_ngcontent-%COMP%]{height:19px;width:19px;margin-right:5px}mg-stream-scroller[_ngcontent-%COMP%]{--feed-item-margin-side:0px}mg-stream-scroller[_ngcontent-%COMP%]     .total-padding{padding-bottom:20px}.divider[_ngcontent-%COMP%]{margin:15px 0;border-top:1px solid #707070}'],changeDetection:0}),e})();var Re=n("u9T3"),Ae=n("OLhe"),Fe=n("IkgF"),Le=n("CO6v"),De=n("NG9B"),Ne=n("m9yI"),ke=n("HxU+"),Ge=n("ls3q"),Ue=n("OaSA"),Ve=n("p+4T"),je=n("ugqS"),qe=n("Ogcz"),ze=n("7Tcv");let Be=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[Ge.a,ke.a,qe.b,je.a,Le.a,Ge.a,Ve.a,ze.a,Ae.a,R.c,D.m,A.f,L.c,Ue.l,N.b,Re.a,r.k]]}),e})();var He=function(e){return e.HEADER_TITLE="People Manager",e}({}),$e=n("O2jg"),Ke=n("809K");let Ye=(()=>{class e{constructor(e,t){this.router=e,this.permissions=t,this._originPath=""}returnFromPeopleManager(){this.router.navigateByUrl(this._originPath==this.router.url?"/":this._originPath||"/")}hasTabRoutePermissions(e){return this.permissions.hasTabRoutePermissions(e)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](r.g),i["\u0275\u0275inject"](Ke.a))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var We=n("tOtK");function Qe(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mg-icon"),i["\u0275\u0275text"](1,"person"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](2)),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("\xa0 ",e.MESSAGES.HEADER_TITLE," ")}}let Je=(()=>{class e{constructor(e,t,n,i,r){this.media=e,this.routeService=t,this.router=n,this.url=i,this.MESSAGES=He,this.openedSideNav=!1,this.mqAlias="",this.colorTheme=$e.a.PEOPLE_MANAGER,this.tabs=[],this.tabLabels=[],this.tabIndex=0,this.lastUrlSegment="",e.asObservable().subscribe(e=>{this.mqAlias=e[0].mqAlias}),r.data.subscribe(e=>{this._handleRouteTabs(e.tabs)}),r.url.subscribe(e=>{const t=this.url.path().split("/");t.length&&(this.lastUrlSegment=t[t.length-1],this._syncUrlWithTab())})}onOverlayClose(){return Object(o.a)(this,void 0,void 0,(function*(){this.routeService.returnFromPeopleManager()}))}onTabIndexChange(e){this.tabs[e]&&this.router.navigate(["/admin/people-manager/"+this.tabs[e].path,{outlets:{o:null}}])}goToRoute(e){e&&this.router.navigateByUrl(e)}_handleRouteTabs(e){for(let t of e)this.routeService.hasTabRoutePermissions(t.permissions)&&(this.tabs.push(t),this.tabLabels.push(t.title));this.tabs.length&&this._syncUrlWithTab()}onSideNav(e){this.openedSideNav=!this.openedSideNav}_syncUrlWithTab(){if(this.tabs.length&&this.lastUrlSegment)for(let e=0;e<this.tabs.length;e++)this.tabs[e].path==this.lastUrlSegment&&(this.tabIndex=e)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](T.g),i["\u0275\u0275directiveInject"](Ye),i["\u0275\u0275directiveInject"](r.g),i["\u0275\u0275directiveInject"](R.l),i["\u0275\u0275directiveInject"](r.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-people-manager-page"]],decls:4,vars:1,consts:[[3,"colorTheme","overlayClose"],["overlayTitle",""]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mg-manager-overlay",0),i["\u0275\u0275listener"]("overlayClose",(function(){return t.onOverlayClose()})),i["\u0275\u0275template"](1,Qe,3,1,"ng-template",null,1,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275element"](3,"router-outlet"),i["\u0275\u0275elementEnd"]()),2&e&&i["\u0275\u0275property"]("colorTheme",t.colorTheme)},directives:[We.a,r.l,K.a],styles:[".nav-icon[_ngcontent-%COMP%]{--mg-icon-size:42px;cursor:pointer;padding:10px 20px;color:#fff}.minga-logo[_ngcontent-%COMP%]{height:32px;margin-right:15px;color:#fff}@media (orientation:landscape){.minga-logo[_ngcontent-%COMP%]{height:8vh}}@media (orientation:portrait){.minga-logo[_ngcontent-%COMP%]{height:8vw}}@media (orientation:landscape) and (max-height:375px){.minga-logo[_ngcontent-%COMP%]{height:30px}}@media (orientation:portrait) and (max-width:375px){.minga-logo[_ngcontent-%COMP%]{height:30px}}@media (min-width:400px){.minga-logo[_ngcontent-%COMP%]{height:32px}}@media (max-width:530px){.minga-logo[_ngcontent-%COMP%]{display:none}}.content[_ngcontent-%COMP%]{height:100%;width:76.5%;padding:25px 0;box-sizing:border-box;display:block;margin:auto}@media (max-width:599px){.content[_ngcontent-%COMP%]{padding:25px 18px;width:100%}}.header-logo-container[_ngcontent-%COMP%]{text-align:center}.header-menu[_ngcontent-%COMP%]{text-align:right}.header-menu-list[_ngcontent-%COMP%]{list-style:none;list-style-type:none;padding:0;margin:0}.header-menu-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]{margin-left:10px}.header-menu-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;border-radius:25px}.header-menu-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{--mg-icon-size:18px;color:#1c2f59;text-decoration:none;display:inline-flex;align-items:center;padding:5px 13px}.header-menu-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#e9d68f}.header-menu-list[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%], .header-menu-list[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:hover{background:#fff}.text-icon-wrap[_ngcontent-%COMP%]{font-size:17px;display:inline-flex;align-items:center;color:#fff}"],changeDetection:0}),e})();var Xe=n("rJgo");let Ze=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[Ge.a,$e.b,R.c,Re.a,r.k,Xe.c]]}),e})(),et=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[Be,Ze,Ne.b,Le.a,Ge.a,ke.a,ze.a,De.a,O.b,Fe.a,Ae.a,R.c,Re.a,D.m,A.f,L.c,N.b,$.b,r.k]]}),e})();var tt=n("LvDl"),nt=n("qAL8"),it=n("PLeU"),rt=function(e){return e.HEADER_TITLE="Rostering",e.PAGE_SUBTITLE="Settings",e.METHOD_SELECT_TITLE="Rostering Method",e.STATE_SELECT_MSG="Enable Automatic Rostering",e.ROSTERING_DISABLE_MSG="Are you sure you want to disable the current rostering method?",e.ONE_ROSTER_CHANGE_TITLE="OneRoster History",e.SFTP_CHANGE_TITLE="SFTP History",e.NON_ACCOUNT_MANAGE_MSG="You must be an owner in order to manage rostering",e}({});const ot=[{label:"OneRoster API",value:nt.RosteringMethod.ONE_ROSTER},{label:"SFTP",value:nt.RosteringMethod.SFTP}];var at=n("gEWx"),lt=n("5H0S"),st=n("iELJ"),dt=n("k/kw");let ct=(()=>{class e{constructor(e,t){this._dialog=e,this._mingaManager=t,this.MESSAGES=rt,this._rosteringFormGroup=new D.k({rosteringMethod:new D.h(nt.RosteringMethod.ONE_ROSTER,[D.D.required]),methodStatus:new D.h(!1)}),this._destroyed$=new s.a(1),this._rosteringSisValues=new l.a({[nt.RosteringMethod.ONE_ROSTER]:void 0,[nt.RosteringMethod.SFTP]:void 0,[nt.RosteringMethod.SIS_API]:void 0}),this.rosteringSisValuesObs=this._rosteringSisValues.asObservable(),this.hasSavedSftpBefore=!1,this.rosteringFormGroup.controls.methodStatus.valueChanges.pipe(Object(d.a)(this._destroyed$)).subscribe(e=>Object(o.a)(this,void 0,void 0,(function*(){e?yield this._activateSelectedRosteringMethod():yield this._launchDeactivateRosteringPrompt()}))),this.initRosteringSisValues()}get rosteringFormGroup(){return this._rosteringFormGroup}get oneRosterSisValuesObs(){return this.rosteringSisValuesObs.pipe(Object(m.a)(e=>e.ONE_ROSTER))}get sftpSisValuesObs(){return this.rosteringSisValuesObs.pipe(Object(m.a)(e=>e.SFTP))}ngOnDestroy(){this._destroyed$.next(),this._destroyed$.complete()}initRosteringSisValues(){return Object(o.a)(this,void 0,void 0,(function*(){this._sisMethods=yield this._mingaManager.getSIS();for(const e of this._sisMethods){const t=Object(at.$enum)(nt.RosteringMethod).asValueOrThrow(e.getRosteringMethod());t===nt.RosteringMethod.SFTP&&(this.hasSavedSftpBefore=!0),this._rosteringSisValues.value[t]=e;const n=this._rosteringFormGroup.controls;n.rosteringMethod.setValue(t),e.getActive()&&n.methodStatus.setValue(!0)}}))}deleteSFTPRostering(){return Object(o.a)(this,void 0,void 0,(function*(){yield this._mingaManager.deleteSIS(nt.RosteringMethod.SFTP),yield this._mingaManager.deactivateAllRosteringMethods(),this.hasSavedSftpBefore=!1}))}_launchDeactivateRosteringPrompt(){return Object(o.a)(this,void 0,void 0,(function*(){this._dialog.open(lt.a,{data:{text:{description:this.MESSAGES.ROSTERING_DISABLE_MSG,deleteBtn:"Disable"}}}).afterClosed().subscribe(e=>Object(o.a)(this,void 0,void 0,(function*(){e.confirmed?yield this._mingaManager.deactivateAllRosteringMethods():this._rosteringFormGroup.controls.methodStatus.setValue(!0)})))}))}_activateSelectedRosteringMethod(){return Object(o.a)(this,void 0,void 0,(function*(){const e=this._rosteringFormGroup.controls.rosteringMethod.value;yield this._mingaManager.activateRosteringMethod(e)}))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](st.b),i["\u0275\u0275inject"](dt.a))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})();var mt=n("UWMR");function pt(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div"),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div"),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](e.id),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](e.name)}}function gt(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div",4),i["\u0275\u0275elementStart"](2,"div",5),i["\u0275\u0275text"](3,"ID"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"div",5),i["\u0275\u0275text"](5,"School Name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](6,pt,5,2,"ng-container",6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngForOf",e.schoolInfos)}}function ut(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div",7),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("Test Response: ",e.rawOutput,"")}}let ft=(()=>{class e{constructor(e,t,n){this.data=e,this.dialogRef=t,this.dialog=n,this.EMPTY_STATE="Test Info Not Available",this.heading="",this.rawOutput="",this.tip="",e.schoolInfos.length&&(this.schoolInfos=e.schoolInfos),e.error?this.parseErrorResponse(e.error):e.rawOutput&&this.parseRegResponse(e.rawOutput)}parseRegResponse(e){const t=e.split("\n");let n=t[1].match(/\d\d\d/gm);this.heading=n&&Number(n[0])>=200?"SUCCESS":"ERROR GETTING DATA",n=t[2].match(/"users":\[\]/gm),n&&(this.heading="NO USERS FOUND IN SIS",this.tip="Try changing your SIS settings."),this.rawOutput=e}parseErrorResponse(e){this.heading="ERROR GETTING AUTHENTICATION TOKEN";const t=e.match(/<h2>(\d\d\d.*)<\/h2>/);t?(this.tip="Try changing your SIS settings.",this.rawOutput=t[1]):this.rawOutput=e}close(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](st.a),i["\u0275\u0275directiveInject"](st.g),i["\u0275\u0275directiveInject"](st.b))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-sis-test-info-confirm-dialog"]],decls:10,vars:4,consts:[[1,"floating-icon-container","mg-bodycopy"],[1,"floating-icon","left",3,"click"],[1,"heading"],[4,"ngIf"],[1,"info-grid"],[1,"info-grid-header"],[4,"ngFor","ngForOf"],[1,"output"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275listener"]("click",(function(){return t.close()})),i["\u0275\u0275elementStart"](2,"mg-icon"),i["\u0275\u0275text"](3,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"div",2),i["\u0275\u0275text"](5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"div"),i["\u0275\u0275text"](7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](8,gt,7,1,"ng-container",3),i["\u0275\u0275template"](9,ut,3,1,"ng-container",3)),2&e&&(i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](t.heading),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](t.tip),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.schoolInfos),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.rawOutput))},directives:[K.a,R.o,R.n],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");[_nghost-%COMP%]{position:relative}.floating-icon-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;position:absolute;top:-30px;left:-35px;right:0;color:#036}.floating-icon-container[_ngcontent-%COMP%] > .floating-icon[_ngcontent-%COMP%]{display:inline-flex;align-items:center;cursor:pointer;-webkit-user-select:none;user-select:none;padding:16px 22px}@media (orientation:landscape){.floating-icon-container[_ngcontent-%COMP%] > .floating-icon[_ngcontent-%COMP%]{line-height:5vh}}@media (orientation:portrait){.floating-icon-container[_ngcontent-%COMP%] > .floating-icon[_ngcontent-%COMP%]{line-height:5vw}}@media (orientation:landscape) and (max-height:320px){.floating-icon-container[_ngcontent-%COMP%] > .floating-icon[_ngcontent-%COMP%]{line-height:16px}}@media (orientation:portrait) and (max-width:320px){.floating-icon-container[_ngcontent-%COMP%] > .floating-icon[_ngcontent-%COMP%]{line-height:16px}}@media (min-width:480px){.floating-icon-container[_ngcontent-%COMP%] > .floating-icon[_ngcontent-%COMP%]{line-height:24px}}.floating-icon-container[_ngcontent-%COMP%] > .floating-icon.disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed;pointer-events:none}.floating-icon-container[_ngcontent-%COMP%] > .floating-icon[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{display:inline-block;width:35px;height:35px}.heading[_ngcontent-%COMP%]{font-weight:700;padding-top:40px;margin-bottom:30px;text-align:center}@media (orientation:landscape){.heading[_ngcontent-%COMP%]{font-size:4.5333333333vh}}@media (orientation:portrait){.heading[_ngcontent-%COMP%]{font-size:4.5333333333vw}}@media (orientation:landscape) and (max-height:375px){.heading[_ngcontent-%COMP%]{font-size:17px}}@media (orientation:portrait) and (max-width:375px){.heading[_ngcontent-%COMP%]{font-size:17px}}@media (min-width:419.1176470588px){.heading[_ngcontent-%COMP%]{font-size:19px}}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:100px 800px;grid-auto-rows:60px}.info-grid-header[_ngcontent-%COMP%]{font-weight:700}@media (orientation:landscape){.info-grid-header[_ngcontent-%COMP%]{font-size:3.7333333333vh}}@media (orientation:portrait){.info-grid-header[_ngcontent-%COMP%]{font-size:3.7333333333vw}}@media (orientation:landscape) and (max-height:375px){.info-grid-header[_ngcontent-%COMP%]{font-size:14px}}@media (orientation:portrait) and (max-width:375px){.info-grid-header[_ngcontent-%COMP%]{font-size:14px}}@media (min-width:401.7857142857px){.info-grid-header[_ngcontent-%COMP%]{font-size:15px}}@media (max-width:599px){.info-grid[_ngcontent-%COMP%]{grid-template-columns:80px 330px}}.output[_ngcontent-%COMP%]{white-space:pre-wrap}'],changeDetection:0}),e})();var ht=n("Ioxw");let St=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[Le.a,Ge.a,ht.a,R.c,D.m]]}),e})(),xt=(()=>{class e{constructor(e){this.matDialog=e}open(e){return this.matDialog.open(ft,Object.assign(Object.assign({},e),{height:"70vh",minWidth:"410px",panelClass:[]}))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](st.b))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Et=n("944/"),vt=n("dpBe"),Ct=n("+dib");const yt=["type","updatedAt","numUpdated","numCreated","numIgnored","numArchived","numErrors","fileLink"],Ot=["Type","Updated At","Updated","Created","Ignored","Archived","Errors","Files"];var Mt=n("5lxJ");function _t(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"th",10),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]().index,t=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",t.displayColumnTitles[e]," ")}}function Tt(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]().$implicit,t=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e[t].title," ")}}function It(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"div",13),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275nextContext"]().$implicit,n=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"](2).signalLink(t[n].title)})),i["\u0275\u0275text"](2," Link "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function bt(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",11),i["\u0275\u0275template"](1,Tt,2,1,"div",12),i["\u0275\u0275template"](2,It,3,0,"div",12),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!e[n].link),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e[n].link)}}function wt(e,t){1&e&&(i["\u0275\u0275elementContainerStart"](0,7),i["\u0275\u0275template"](1,_t,2,1,"th",8),i["\u0275\u0275template"](2,bt,3,2,"td",9),i["\u0275\u0275elementContainerEnd"]()),2&e&&i["\u0275\u0275propertyInterpolate"]("matColumnDef",t.$implicit)}function Pt(e,t){1&e&&i["\u0275\u0275element"](0,"tr",14)}function Rt(e,t){1&e&&i["\u0275\u0275element"](0,"tr",15)}function At(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"table",3),i["\u0275\u0275template"](1,wt,3,1,"ng-container",4),i["\u0275\u0275template"](2,Pt,1,0,"tr",5),i["\u0275\u0275template"](3,Rt,1,0,"tr",6),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("dataSource",e.data),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",e.displayColumnAccessors),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("matHeaderRowDef",e.displayColumnAccessors)("matHeaderRowDefSticky",!0),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("matRowDefColumns",e.displayColumnAccessors)}}function Ft(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",16),i["\u0275\u0275element"](1,"mg-spinner",17),i["\u0275\u0275elementEnd"]())}function Lt(e,t){1&e&&i["\u0275\u0275element"](0,"mg-empty-state",18),2&e&&i["\u0275\u0275property"]("title","Nothing here")("subtitle","Try again!")}let Dt=(()=>{class e{constructor(){this.isLoading=!1,this.displayColumnAccessors=[],this.displayColumnTitles=[],this.data=[],this.handleLink=new i.EventEmitter}get shouldShowTable(){return!(this.isLoading||!this.data)&&0!=this.data.length}ngOnInit(){}ngOnChanges(e){}signalLink(e){this.handleLink.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-generic-data-table"]],inputs:{isLoading:"isLoading",displayColumnAccessors:"displayColumnAccessors",displayColumnTitles:"displayColumnTitles",data:"data"},outputs:{handleLink:"handleLink"},features:[i["\u0275\u0275NgOnChangesFeature"]],decls:5,vars:3,consts:[["mat-table","","matSort","",3,"dataSource",4,"ngIf","ngIfElse"],["class","loading-container",4,"ngIf"],["noResults",""],["mat-table","","matSort","",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],["mat-cell",""],[4,"ngIf"],[1,"link",3,"click"],["mat-header-row",""],["mat-row",""],[1,"loading-container"],["diameter","40","thickness","3"],["mg-stream-empty","",3,"title","subtitle"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275template"](1,At,4,5,"table",0),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](2,Ft,2,0,"div",1),i["\u0275\u0275template"](3,Lt,1,2,"ng-template",null,2,i["\u0275\u0275templateRefExtractor"])),2&e){const e=i["\u0275\u0275reference"](4);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.shouldShowTable)("ngIfElse",e),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.isLoading)}},directives:[R.o,Ue.j,R.n,Ue.g,Ue.i,Ue.c,Ue.e,Ue.b,Ue.d,Ue.a,Ue.f,Ue.h,H.a,q.a],styles:["table[_ngcontent-%COMP%]{width:100%;box-shadow:none;background:none;text-align:center;display:table}table[_ngcontent-%COMP%]  thead tr{background:#fff}table[_ngcontent-%COMP%]  thead tr th{border-bottom:none;text-align:center;color:#b2b2b2;font-size:16px;padding:0 5px}table[_ngcontent-%COMP%]  tbody tr td{border-bottom:none;font-size:16px;color:#036;padding-top:10px;padding-bottom:10px}table[_ngcontent-%COMP%]  tbody tr td.user-name{text-align:center}table[_ngcontent-%COMP%]  tbody tr:nth-child(odd){background:#fff}table[_ngcontent-%COMP%]  tbody tr:nth-child(2n){background:#f4f4f4}.no-results[_ngcontent-%COMP%]{padding:20px;border-radius:5px;text-align:center;border:1px solid rgba(0,0,0,.15);margin:15px 0 0;font-style:italic}.no-results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0;margin:0}mg-empty-state[_ngcontent-%COMP%]{margin-top:15px;margin-right:0;margin-left:0;width:100%}.link[_ngcontent-%COMP%]{text-decoration:underline;color:#00f}.link[_ngcontent-%COMP%]:hover{color:#8a2be2;cursor:pointer}"],changeDetection:0}),e})(),Nt=(()=>{class e{constructor(e,t,n,i){this.mingaManager=e,this.snackBar=t,this.cdr=n,this.appConfig=i,this.data=[],this.loading=!0,this.columnAccessors=yt,this.columnTitles=Ot,this.loadData()}ngOnInit(){return Object(o.a)(this,void 0,void 0,(function*(){}))}loadData(){return Object(o.a)(this,void 0,void 0,(function*(){let e=yield this.mingaManager.getSISSync();this.data=e.map(e=>{const t=e.getUpdatedat(),n=Object(Ct.f)(t);return{type:{title:e.getType(),link:!1},updatedAt:{title:n.toLocaleString(),link:!1},numUpdated:{title:e.getNumupdated()||0,link:!1},numCreated:{title:e.getNumcreated()||0,link:!1},numIgnored:{title:e.getNumignored()||0,link:!1},numArchived:{title:e.getNumarchived()||0,link:!1},numErrors:{title:e.getNumerrors()||0,link:!1},fileLink:{title:e.getFilelink(),link:!0}}}),this.loading=!1,this.cdr.markForCheck()}))}getDownload(e){return Object(o.a)(this,void 0,void 0,(function*(){const t=yield this.appConfig.getIdBucket(),n=vt.a.app().storage("gs://"+t).ref().child(e),i=yield n.getDownloadURL();window.open(i,"_blank")}))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](dt.a),i["\u0275\u0275directiveInject"](mt.b),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](Mt.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-sis-stats"]],decls:1,vars:4,consts:[[3,"displayColumnAccessors","displayColumnTitles","data","isLoading","handleLink"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mg-generic-data-table",0),i["\u0275\u0275listener"]("handleLink",(function(e){return t.getDownload(e)})),i["\u0275\u0275elementEnd"]()),2&e&&i["\u0275\u0275property"]("displayColumnAccessors",t.columnAccessors)("displayColumnTitles",t.columnTitles)("data",t.data)("isLoading",t.loading)},directives:[Dt],styles:[""],changeDetection:0}),e})();var kt=n("yWQT"),Gt=n("2ip7"),Ut=n("jMqV"),Vt=n("tdMc"),jt=n("R2kZ"),qt=n("+IlC"),zt=n("y++Y"),Bt=n("Ggka"),Ht=function(e){return e.SFTP_INFO_TITLE="ABOUT SFTP",e.SFTP_KB_URL="https://support.minga.io/knowledge/setting-up-sftp-for-rostering",e.SFTP_CREDENTIALS_MSG="IMPORTANT: make sure to save these credentials. They will not be shown again, and you will have to delete your settings to regenerate your sftp account to get new credentials",e.SFTP_DETAILS_MSG="When using SFTP you must configure your Student Information System to send student and staff roster files to Minga (using the information below).",e.SFTP_HELP_MSG="IMPORTANT: Refer to the following SFTP Knowledge article to ensure these files are setup correctly.",e.SFTP_DELETE_MSG="Are you sure you want to delete the configuration details and disable SFTP rostering?",e}({}),$t=function(e){return e.HOST="SFTP Host",e.USERNAME="SFTP Username",e.PASSWORD="SFTP Password",e}({});const Kt=[{label:"Skip",value:!1},{label:"Update",value:!0}],Yt=[{label:"Skip",value:!1},{label:"Archive",value:!0}],Wt=[{label:zt.SisIdFieldKey.IDENTIFIER,value:zt.SisIdFieldKey.IDENTIFIER},{label:zt.SisIdFieldKey.SOURCE_ID,value:zt.SisIdFieldKey.SOURCE_ID},{label:zt.SisIdFieldKey.USERNAME,value:zt.SisIdFieldKey.USERNAME}];var Qt=function(e){return e.ONE_ROSTER_INFO_TITLE="ABOUT OneRoster 1.1",e.ONE_ROSTER_DETAILS_MSG="When using OneRoster, your Student Information System must be setup to allow Minga to connect using the OneRoster API. Each evening Minga will request new roster information from your Student Information System and update Minga rosters. ",e.ONE_ROSTER_HELP_MSG="Please refer to the following Knowledge Base Article to ensure OneRoster is setup properly for your SIS.",e.ONE_ROSTER_DELETE_MSG="Are you sure you want to delete the configuration details and disable One Roster?",e.ONE_ROSTER_KB_LINK="https://support.minga.io/knowledge/setting-up-automatic-rostering-with-your-sis",e.TOOLTIP_SYNC_STATUS="Toggle this to make syncs active or inactive",e.TOOLTIP_UPDATE_USERS="If existing Minga users have changes in your SIS sync, selecting this will automatically update them",e.TOOLTIP_ARCHIVE_USERS="Remove student, student leaders, and teacher roles when they do not appear in the data returned from SIS",e.TOOLTIP_UPDATE_STUDENTS="Update student data via SIS",e.TOOLTIP_UPDATE_ADMIN="Update teacher/staff data via SIS",e.TOOLTIP_SYNC_PARENTS="Sync parent contact information via SIS",e.TOOLTIP_ADD_EMAIL_LIST="Send email notification about rostering status to email addresses listed",e.EMAIL_LIST_LABEL="Send Rostering Results Email",e.EMAIL_LIST_PLACEHOLDER="Email address list",e.EMAIL_LIST_ADD_LABEL="Add email",e.BUTTON_RESET="Reset",e.BUTTON_SAVE="Save",e.BUTTON_DELETE="Delete",e.BUTTON_TEST="Test Your Information",e.BUTTON_RUN_DAILY="Manually Run Daily Sync",e.BUTTON_RUN_WEEKLY="Manually Run Weekly Sync",e}({});const Jt=[{label:qt.SisType.AERIES.valueOf(),value:qt.SisType.AERIES},{label:qt.SisType.Q.valueOf(),value:qt.SisType.Q},{label:qt.SisType.CLEVER.valueOf(),value:qt.SisType.CLEVER},{label:qt.SisType.CLASSLINK.valueOf(),value:qt.SisType.CLASSLINK},{label:qt.SisType.INFINITE_CAMPUS.valueOf(),value:qt.SisType.INFINITE_CAMPUS},{label:qt.SisType.OTHER.valueOf(),value:qt.SisType.OTHER}];var Xt=n("MZjr"),Zt=n("WaMM"),en=n("FlXp"),tn=n("cKGL");const nn=["form"];function rn(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function on(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,rn,1,0,"ng-container",35),i["\u0275\u0275elementContainerEnd"]()),2&e){i["\u0275\u0275nextContext"]();const e=i["\u0275\u0275reference"](65);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",e)}}function an(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function ln(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,an,1,0,"ng-container",35),i["\u0275\u0275elementContainerEnd"]()),2&e){i["\u0275\u0275nextContext"]();const e=i["\u0275\u0275reference"](69);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",e)}}function sn(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function dn(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,sn,1,0,"ng-container",35),i["\u0275\u0275elementContainerEnd"]()),2&e){i["\u0275\u0275nextContext"]();const e=i["\u0275\u0275reference"](73);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",e)}}function cn(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function mn(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,cn,1,0,"ng-container",35),i["\u0275\u0275elementContainerEnd"]()),2&e){i["\u0275\u0275nextContext"]();const e=i["\u0275\u0275reference"](71);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",e)}}function pn(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function gn(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,pn,1,0,"ng-container",35),i["\u0275\u0275elementContainerEnd"]()),2&e){i["\u0275\u0275nextContext"]();const e=i["\u0275\u0275reference"](67);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",e)}}function un(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function fn(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,un,1,0,"ng-container",35),i["\u0275\u0275elementContainerEnd"]()),2&e){i["\u0275\u0275nextContext"]();const e=i["\u0275\u0275reference"](75);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",e)}}function hn(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",36),i["\u0275\u0275elementStart"](1,"mat-form-field",37),i["\u0275\u0275elementStart"](2,"mat-label"),i["\u0275\u0275text"](3,"SA Test URL"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"input",38,39),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().superAdminURL=t})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("placeholder","SA Test URL")("ngModel",e.superAdminURL)}}function Sn(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"mat-slide-toggle",40),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().fields.syncParent=t}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().updateSyncParent(t)})),i["\u0275\u0275text"](2," Include Primary Parent Contact Info "),i["\u0275\u0275element"](3,"mg-tooltip",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",e.fields.syncParent),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("label",e.MESSAGES.TOOLTIP_SYNC_PARENTS)}}function xn(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mg-form-select",41),i["\u0275\u0275listener"]("selectionChanged",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().changeNotificationEmailsType(t)})),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("placeholder",e.MESSAGES.EMAIL_LIST_PLACEHOLDER)("multiple",!0)("addTag",e.addNew)("addTagText",e.MESSAGES.EMAIL_LIST_ADD_LABEL)("searchable",!0)("value",e.fields.notificationEmails)("options",e.EMAIL_OPTIONS)("hideSelected",!1)}}function En(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",42),i["\u0275\u0275elementStart"](1,"mg-generic-button",43),i["\u0275\u0275listener"]("onClick",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().runDailySyncClicked()})),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"mg-generic-button",43),i["\u0275\u0275listener"]("onClick",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().runWeeklySyncClicked()})),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"div",14),i["\u0275\u0275elementStart"](6,"div",15),i["\u0275\u0275text"](7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"mg-form-select",5),i["\u0275\u0275listener"]("selectionChanged",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().updateIdNumberFieldName(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("hasRipples",!1)("isRounded",!1),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.MESSAGES.BUTTON_RUN_DAILY," "),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("hasRipples",!1)("isRounded",!1),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.MESSAGES.BUTTON_RUN_WEEKLY," "),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ","ID Number field Key"," "),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("multiple",!1)("searchable",!1)("isClearable",!1)("options",e.SIS_FIELD_KEYS_OPTIONS)("value",e.fields.idNumberFieldName)}}function vn(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mg-generic-button",44),i["\u0275\u0275listener"]("onClick",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().updateSIS(t)})),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](),t=i["\u0275\u0275reference"](3);i["\u0275\u0275property"]("isDisabled",t.form.invalid),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.MESSAGES.BUTTON_SAVE," ")}}function Cn(e,t){1&e&&i["\u0275\u0275element"](0,"mg-spinner",45),2&e&&i["\u0275\u0275property"]("diameter",40)}function yn(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",46),i["\u0275\u0275elementStart"](1,"mat-form-field",47),i["\u0275\u0275elementStart"](2,"mat-label"),i["\u0275\u0275text"](3,"URL"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"input",48,39),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().fields.url=t}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().updateURL(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"div",49),i["\u0275\u0275elementStart"](7,"mat-form-field",47),i["\u0275\u0275elementStart"](8,"mat-label"),i["\u0275\u0275text"](9,"Client ID"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"input",50,39),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().fields.clientId=t}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().updateClientID(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"div",51),i["\u0275\u0275elementStart"](13,"mat-form-field",47),i["\u0275\u0275elementStart"](14,"mat-label"),i["\u0275\u0275text"](15,"Client Secret"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"input",52,39),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().fields.clientSecret=t}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().updateClientSecret(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](18,"div",53),i["\u0275\u0275elementStart"](19,"mat-form-field",47),i["\u0275\u0275elementStart"](20,"mat-label"),i["\u0275\u0275text"](21,"Token URL"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"input",54,39),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().fields.authUrl=t}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().updateAuthUrl(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](24,"div",55),i["\u0275\u0275elementStart"](25,"mat-form-field",47),i["\u0275\u0275elementStart"](26,"mat-label"),i["\u0275\u0275text"](27,"School ID"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](28,"input",56,39),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().fields.schoolId=t}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().updateSchoolID(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](30,"div",46),i["\u0275\u0275elementStart"](31,"mat-form-field",47),i["\u0275\u0275elementStart"](32,"mat-label"),i["\u0275\u0275text"](33,"Student request URL"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](34,"input",57,39),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().fields.studentUrl=t}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().updateStudentRequestURL(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](36,"div",46),i["\u0275\u0275elementStart"](37,"mat-form-field",47),i["\u0275\u0275elementStart"](38,"mat-label"),i["\u0275\u0275text"](39,"Teacher request URL"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](40,"input",58,39),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().fields.teacherUrl=t}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().updateTeacherRequestURL(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](),t=i["\u0275\u0275reference"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("formGroup",t.form),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("placeholder","URL")("ngModel",e.fields.url)("required",!0),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("formGroup",t.form),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("type","password")("placeholder","Client ID")("ngModel",e.fields.clientId)("required",!0),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("formGroup",t.form),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("type","password")("placeholder","Client Secret")("ngModel",e.fields.clientSecret)("required",!0),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("formGroup",t.form),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("placeholder","Token Url")("ngModel",e.fields.authUrl)("required",!0),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("formGroup",t.form),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("placeholder","School ID")("ngModel",e.fields.schoolId)("required",!0),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("formGroup",t.form),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("placeholder","Student request URL")("ngModel",e.fields.studentUrl),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("formGroup",t.form),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("placeholder","Teacher request URL")("ngModel",e.fields.teacherUrl)}}function On(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",49),i["\u0275\u0275elementStart"](1,"mat-form-field",47),i["\u0275\u0275elementStart"](2,"mat-label"),i["\u0275\u0275text"](3,"Application ID"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"input",59,39),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().fields.applicationId=t}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().updateApplicationId(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"div",51),i["\u0275\u0275elementStart"](7,"mat-form-field",47),i["\u0275\u0275elementStart"](8,"mat-label"),i["\u0275\u0275text"](9,"Access Token"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"input",60,39),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().fields.accessToken=t}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().updateAccessToken(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"div",55),i["\u0275\u0275elementStart"](13,"mat-form-field",47),i["\u0275\u0275elementStart"](14,"mat-label"),i["\u0275\u0275text"](15,"School ID"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"input",56,39),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().fields.schoolId=t}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().updateSchoolID(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](),t=i["\u0275\u0275reference"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("formGroup",t.form),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("type","password")("placeholder","Application ID")("ngModel",e.fields.applicationId)("required",!0),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("formGroup",t.form),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("type","password")("placeholder","Access Token")("ngModel",e.fields.accessToken)("required",!0),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("formGroup",t.form),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("placeholder","School ID")("ngModel",e.fields.schoolId)("required",!0)}}function Mn(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",46),i["\u0275\u0275elementStart"](1,"mat-form-field",47),i["\u0275\u0275elementStart"](2,"mat-label"),i["\u0275\u0275text"](3,"URL"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"input",48,39),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().fields.url=t}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().updateURL(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"div",49),i["\u0275\u0275elementStart"](7,"mat-form-field",47),i["\u0275\u0275elementStart"](8,"mat-label"),i["\u0275\u0275text"](9,"Client ID"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"input",50,39),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().fields.clientId=t}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().updateClientID(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"div",51),i["\u0275\u0275elementStart"](13,"mat-form-field",47),i["\u0275\u0275elementStart"](14,"mat-label"),i["\u0275\u0275text"](15,"Client Secret"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"input",52,39),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().fields.clientSecret=t}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().updateClientSecret(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](18,"div",55),i["\u0275\u0275elementStart"](19,"mat-form-field",47),i["\u0275\u0275elementStart"](20,"mat-label"),i["\u0275\u0275text"](21,"School ID"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"input",56,39),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().fields.schoolId=t}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().updateSchoolID(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](),t=i["\u0275\u0275reference"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("formGroup",t.form),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("placeholder","URL")("ngModel",e.fields.url)("required",!0),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("formGroup",t.form),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("type","password")("placeholder","Client ID")("ngModel",e.fields.clientId)("required",!0),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("formGroup",t.form),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("type","password")("placeholder","Client Secret")("ngModel",e.fields.clientSecret)("required",!0),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("formGroup",t.form),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("placeholder","School ID")("ngModel",e.fields.schoolId)("required",!0)}}function _n(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",46),i["\u0275\u0275elementStart"](1,"mat-form-field",47),i["\u0275\u0275elementStart"](2,"mat-label"),i["\u0275\u0275text"](3,"URL"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"input",48,39),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().fields.url=t}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().updateURL(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"div",49),i["\u0275\u0275elementStart"](7,"mat-form-field",47),i["\u0275\u0275elementStart"](8,"mat-label"),i["\u0275\u0275text"](9,"Client ID"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"input",50,39),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().fields.clientId=t}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().updateClientID(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"div",51),i["\u0275\u0275elementStart"](13,"mat-form-field",47),i["\u0275\u0275elementStart"](14,"mat-label"),i["\u0275\u0275text"](15,"Client Secret"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"input",52,39),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().fields.clientSecret=t}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().updateClientSecret(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](18,"div",49),i["\u0275\u0275elementStart"](19,"mat-form-field",47),i["\u0275\u0275elementStart"](20,"mat-label"),i["\u0275\u0275text"](21,"App Name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"input",59,39),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().fields.applicationId=t}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().updateApplicationId(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](24,"div",55),i["\u0275\u0275elementStart"](25,"mat-form-field",47),i["\u0275\u0275elementStart"](26,"mat-label"),i["\u0275\u0275text"](27,"School ID"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](28,"input",56,39),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().fields.schoolId=t}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().updateSchoolID(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](),t=i["\u0275\u0275reference"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("formGroup",t.form),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("placeholder","URL")("ngModel",e.fields.url)("required",!0),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("formGroup",t.form),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("type","password")("placeholder","Client ID")("ngModel",e.fields.clientId)("required",!0),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("formGroup",t.form),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("type","password")("placeholder","Client Secret")("ngModel",e.fields.clientSecret)("required",!0),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("formGroup",t.form),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("type","password")("placeholder","App Name")("ngModel",e.fields.applicationId)("required",!0),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("formGroup",t.form),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("placeholder","School ID")("ngModel",e.fields.schoolId)("required",!0)}}function Tn(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",46),i["\u0275\u0275elementStart"](1,"mat-form-field",47),i["\u0275\u0275elementStart"](2,"mat-label"),i["\u0275\u0275text"](3,"URL"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"input",48,39),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().fields.url=t}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().updateURL(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"div",49),i["\u0275\u0275elementStart"](7,"mat-form-field",47),i["\u0275\u0275elementStart"](8,"mat-label"),i["\u0275\u0275text"](9,"Client ID"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"input",50,39),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().fields.clientId=t}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().updateClientID(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"div",51),i["\u0275\u0275elementStart"](13,"mat-form-field",47),i["\u0275\u0275elementStart"](14,"mat-label"),i["\u0275\u0275text"](15,"Client Secret"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"input",52,39),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().fields.clientSecret=t}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().updateClientSecret(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](18,"div",55),i["\u0275\u0275elementStart"](19,"mat-form-field",47),i["\u0275\u0275elementStart"](20,"mat-label"),i["\u0275\u0275text"](21,"School ID"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"input",56,39),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().fields.schoolId=t}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().updateSchoolID(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](),t=i["\u0275\u0275reference"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("formGroup",t.form),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("placeholder","URL")("ngModel",e.fields.url)("required",!0),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("formGroup",t.form),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("type","password")("placeholder","Client ID")("ngModel",e.fields.clientId)("required",!0),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("formGroup",t.form),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("type","password")("placeholder","Client Secret")("ngModel",e.fields.clientSecret)("required",!0),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("formGroup",t.form),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("placeholder","School ID")("ngModel",e.fields.schoolId)("required",!0)}}function In(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",49),i["\u0275\u0275elementStart"](1,"mat-form-field",47),i["\u0275\u0275elementStart"](2,"mat-label"),i["\u0275\u0275text"](3,"District ID"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"input",61,39),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().fields.clientId=t}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().updateClientID(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"div",55),i["\u0275\u0275elementStart"](7,"mat-form-field",47),i["\u0275\u0275elementStart"](8,"mat-label"),i["\u0275\u0275text"](9,"School ID"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"input",56,39),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().fields.schoolId=t}))("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().updateSchoolID(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](),t=i["\u0275\u0275reference"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("formGroup",t.form),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("placeholder","District ID")("ngModel",e.fields.clientId)("required",!0),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("formGroup",t.form),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("placeholder","School ID")("ngModel",e.fields.schoolId)("required",!0)}}const bn=["*"];let wn=(()=>{class e{constructor(e,t,n,r,o,a,s,d){this._mingaManager=e,this._snackBar=t,this._cdr=n,this._permissions=r,this._publisherProto=o,this._dialog=a,this._mrService=s,this._userpilotService=d,this.MESSAGES=Qt,this.SIS_TYPE_OPTIONS=Jt,this.SFTP_EXISTING_USERS_OPTIONS=Kt,this.SFTP_MISSING_USERS_OPTIONS=Yt,this.SIS_FIELD_KEYS_OPTIONS=Wt,this.testInfo=new i.EventEmitter,this.newFields=new Vt.sisFields,this.fields={url:"",clientId:"",clientSecret:"",schoolId:"",archiveMissing:!1,updateExisting:!1,active:!1,authUrl:"",studentUrl:"",teacherUrl:"",lastModified:!1,rosteringMethod:nt.RosteringMethod.ONE_ROSTER,sisType:null,studentRostering:!1,staffRostering:!1,syncParent:!1,notificationEmails:[],idNumberFieldName:zt.SisIdFieldKey.IDENTIFIER},this.superAdminURL="",this.sisTypeEnum=qt.SisType,this.notificationEmailsToggle=!1,this.isUpdating$=new l.a(!1),this.rosteringStatusChange=new i.EventEmitter,this.newFields.setRosteringMethod(nt.RosteringMethod.ONE_ROSTER),this.isSuperAdmin$=this._permissions.observePermission(E.MingaPermission.SUPERADMIN)}set sisFieldValues(e){e&&e.toArray().length&&this.loadFields(e)}ngOnInit(){return Object(o.a)(this,void 0,void 0,(function*(){if(!this.form||!this.form.statusChanges)throw new Error("form unset");this.form.form.addControl("url",new D.h("")),this.form.form.addControl("clientID",new D.h("")),this.form.form.addControl("clientSecret",new D.h("")),this.form.form.addControl("authUrl",new D.h("")),this.form.form.addControl("schoolId",new D.h("")),this.form.form.addControl("studentRequestUrl",new D.h("")),this.form.form.addControl("teacherRequestUrl",new D.h("")),this.form.form.addControl("applicationID",new D.h("")),this.form.form.addControl("accessToken",new D.h("")),this.form.form.addControl("schoolId",new D.h("")),this.form.form.addControl("notificationEmails",new D.h([],Bt.a.allValuesAsEmailsValidator))}))}loadFields(e){return Object(o.a)(this,void 0,void 0,(function*(){this.newFields=e,this.fields=Object.assign(Object.assign({},this.newFields.toObject()),{notificationEmails:this.newFields.getNotificationEmailsList()}),this.EMAIL_OPTIONS=[],this.newFields.getNotificationEmailsList().forEach(e=>{this.EMAIL_OPTIONS.push({value:e,label:e})}),this.EMAIL_OPTIONS.length>0&&(this.notificationEmailsToggle=!0),this._cdr.markForCheck()}))}updateSisType(e){this.fields.sisType=e,this.form.reset(),this.newFields.setSisType(e)}updateURL(e){this.newFields.setUrl(e)}updateClientID(e){this.newFields.setClientId(e)}updateClientSecret(e){this.newFields.setClientSecret(e)}updateAccessToken(e){this.newFields.setAccessToken(e)}updateApplicationId(e){this.newFields.setApplicationId(e)}updateAuthUrl(e){this.newFields.setAuthUrl(e)}updateSchoolID(e){this.newFields.setSchoolId(e)}updateStudentRequestURL(e){this.newFields.setStudentUrl(e)}updateTeacherRequestURL(e){this.newFields.setTeacherUrl(e)}updateArchiveMissing(e){this.newFields.setArchiveMissing(e)}updateUpdateExisting(e){this.newFields.setUpdateExisting(e)}updateLastModified(e){this.newFields.setLastModified(e)}updateStudentRostering(e){this.newFields.setStudentRostering(e)}updateNotificationEmailsToggle(e){this.notificationEmailsToggle=e}updateStaffRostering(e){this.newFields.setStaffRostering(e)}updateSyncParent(e){this.newFields.setSyncParent(e)}updateIdNumberFieldName(e){this.newFields.setIdNumberFieldName(e)}runDailySyncClicked(){return Object(o.a)(this,void 0,void 0,(function*(){const e=new jt.RepublishRequest;e.setHash("sis_sync"),yield this._publisherProto.republish(e),this._snackBar.open("Triggered Daily sync")}))}runWeeklySyncClicked(){return Object(o.a)(this,void 0,void 0,(function*(){const e=new jt.RepublishRequest;e.setHash("sis_sync"),yield this._publisherProto.republish(e),this._snackBar.open("Triggered weekly sync!")}))}updateSIS(e=null){return Object(o.a)(this,void 0,void 0,(function*(){if(!this.form.form.invalid){if(this.isUpdating$.next(!0),e&&this._preventEventBehaviors(e),!this.newFields.getSisType())return this._snackBar.open("Sis Type is required!"),void this.isUpdating$.next(!1);yield this._setActiveFlag();try{yield this._mingaManager.updateSIS(this.newFields),this._snackBar.open("Your SIS settings were successfully updated!"),yield this._userpilotService.identify({sisUsersExisting:this.newFields.getUpdateExisting(),sisUsersMissing:this.newFields.getArchiveMissing()})}catch(t){console.error("updateSIS() error: ",t),this._snackBar.open("An error saving your settings occurred! Please try again later.")}finally{this.isUpdating$.next(!1)}}}))}resetSISFields(){this.form.reset(),this.fields.notificationEmails=[]}onDeleteSFTPRostering(){this._launchDeleteRosteringMethodPrompt()}changeNotificationEmailsType(e){return Object(o.a)(this,void 0,void 0,(function*(){this.newFields.setNotificationEmailsList(e),this.form.form.get("notificationEmails").setValue(e)}))}addNew(e){return{label:e,value:e}}_setActiveFlag(){return Object(o.a)(this,void 0,void 0,(function*(){const e=this._mrService.rosteringFormGroup.controls.methodStatus.value;this.newFields.setActive(e),e&&(yield this._mingaManager.deactivateAllRosteringMethods())}))}_preventEventBehaviors(e){e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation()}_launchDeleteRosteringMethodPrompt(){this._dialog.open(lt.a,{data:{text:{description:this.MESSAGES.ONE_ROSTER_DELETE_MSG,deleteBtn:"Delete"}}}).afterClosed().subscribe(e=>Object(o.a)(this,void 0,void 0,(function*(){e.confirmed&&(yield this._deleteSFTPRostering())})))}_deleteSFTPRostering(){return Object(o.a)(this,void 0,void 0,(function*(){yield this._mingaManager.deleteSIS(nt.RosteringMethod.ONE_ROSTER),yield this._mingaManager.deactivateAllRosteringMethods(),this.rosteringStatusChange.emit(!1),this.resetSISFields()}))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](dt.a),i["\u0275\u0275directiveInject"](mt.b),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](O.c),i["\u0275\u0275directiveInject"](Xt.Publisher),i["\u0275\u0275directiveInject"](st.b),i["\u0275\u0275directiveInject"](ct),i["\u0275\u0275directiveInject"](Zt.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-sis-inputs"]],viewQuery:function(e,t){if(1&e&&i["\u0275\u0275viewQuery"](nn,3),2&e){let e;i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.form=e.first)}},inputs:{sisFieldValues:"sisFieldValues"},outputs:{testInfo:"testInfo",rosteringStatusChange:"rosteringStatusChange"},ngContentSelectors:bn,decls:76,vars:52,consts:[["fxLayout.gt-sm","row","fxLayoutGap.gt-sm","10rem"],[1,"column-wrapper"],["form","ngForm"],[1,"form-row"],[1,"form-row-title"],["outputValueOnly","","appearance","primary",3,"multiple","searchable","isClearable","options","value","selectionChanged"],[4,"ngIf"],["class","superAdminTest",4,"ngIf"],["fxLayoutAlign","end center"],["colorTheme","blue","variant","clear","size","xsmall",3,"onClick"],["fxLayout","column",1,"automatic-rostering"],["name","updateStudentRostering",3,"ngModel","ngModelChange"],[3,"label"],["name","updateStaffRostering",3,"ngModel","ngModelChange"],[1,"row-setting"],[1,"row-setting-select"],["name","updateNotificationEmailsToggle",3,"ngModel","ngModelChange"],["class","email-list","outputValueOnly","","appearance","primary",3,"placeholder","multiple","addTag","addTagText","searchable","value","options","hideSelected","selectionChanged",4,"ngIf"],["fxLayout","column","fxLayoutAlign","start start","fxLayoutGap","15px",4,"hasPermission"],["fxLayout","row","fxLayoutAlign","space-between center"],["colorTheme","red","variant","secondary","size","medium",3,"onClick"],["colorTheme","navy","variant","clear","size","small",3,"onClick"],["colorTheme","blue","variant","secondary",3,"isDisabled","onClick",4,"ngIf","ngIfElse"],["updatingTpl",""],["fxLayout","column","fxLayoutAlign","center start",1,"rostering-info-container"],[1,"rostering-info-title"],[1,"rostering-info-msg"],[1,"rostering-info-kb"],["target","_blank",3,"href"],["genericOneRosterTemplate",""],["classlinkTemplate",""],["aeriesTemplate",""],["infiniteCampusTemplate",""],["qTemplate",""],["cleverTemplate",""],[4,"ngTemplateOutlet"],[1,"superAdminTest"],["mgFormField",""],["matInput","","type","text","mgFocusSelectText","","maxlength","255","minlength","1","autocomplete","new-password","name","testURL",3,"placeholder","ngModel","ngModelChange"],["textInput",""],["name","updateSyncParent",3,"ngModel","ngModelChange"],["outputValueOnly","","appearance","primary",1,"email-list",3,"placeholder","multiple","addTag","addTagText","searchable","value","options","hideSelected","selectionChanged"],["fxLayout","column","fxLayoutAlign","start start","fxLayoutGap","15px"],["colorTheme","blue","variant","clear","size","xsmall","paddingSize","none",3,"hasRipples","isRounded","onClick"],["colorTheme","blue","variant","secondary",3,"isDisabled","onClick"],[3,"diameter"],[1,"url"],["mgFormField","",3,"formGroup"],["matInput","","type","text","mgFocusSelectText","","maxlength","255","minlength","1","autocomplete","off","name","url","formControlName","url",3,"placeholder","ngModel","required","ngModelChange"],[1,"clientID"],["matInput","","mgFocusSelectText","","maxlength","255","minlength","1","autocomplete","off","name","clientID","formControlName","clientID",3,"type","placeholder","ngModel","required","ngModelChange"],[1,"clientSecret"],["matInput","","mgFocusSelectText","","maxlength","255","minlength","1","autocomplete","new-password","name","clientSecret","formControlName","clientSecret",3,"type","placeholder","ngModel","required","ngModelChange"],[1,"authUrl"],["matInput","","mgFocusSelectText","","maxlength","255","minlength","1","autocomplete","new-password","name","authUrl","formControlName","authUrl",3,"placeholder","ngModel","required","ngModelChange"],[1,"schoolId"],["matInput","","type","text","mgFocusSelectText","","maxlength","255","minlength","1","autocomplete","new-password","name","schoolId","formControlName","schoolId",3,"placeholder","ngModel","required","ngModelChange"],["matInput","","type","text","mgFocusSelectText","","maxlength","255","minlength","1","autocomplete","off","name","studentRequestUrl","formControlName","studentRequestUrl",3,"placeholder","ngModel","ngModelChange"],["matInput","","type","text","mgFocusSelectText","","maxlength","255","minlength","1","autocomplete","off","name","teacherRequestUrl","formControlName","teacherRequestUrl",3,"placeholder","ngModel","ngModelChange"],["matInput","","mgFocusSelectText","","maxlength","255","minlength","1","autocomplete","off","name","applicationID","formControlName","applicationID",3,"type","placeholder","ngModel","required","ngModelChange"],["matInput","","mgFocusSelectText","","maxlength","255","minlength","1","autocomplete","new-password","name","accessToken","formControlName","accessToken",3,"type","placeholder","ngModel","required","ngModelChange"],["matInput","","type","text","mgFocusSelectText","","maxlength","255","minlength","1","autocomplete","off","name","clientID","formControlName","clientID",3,"placeholder","ngModel","required","ngModelChange"]],template:function(e,t){if(1&e&&(i["\u0275\u0275projectionDef"](),i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"form",null,2),i["\u0275\u0275projection"](4),i["\u0275\u0275elementStart"](5,"div",3),i["\u0275\u0275elementStart"](6,"div",4),i["\u0275\u0275text"](7,"SIS"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"mg-form-select",5),i["\u0275\u0275listener"]("selectionChanged",(function(e){return t.updateSisType(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](9,on,2,1,"ng-container",6),i["\u0275\u0275template"](10,ln,2,1,"ng-container",6),i["\u0275\u0275template"](11,dn,2,1,"ng-container",6),i["\u0275\u0275template"](12,mn,2,1,"ng-container",6),i["\u0275\u0275template"](13,gn,2,1,"ng-container",6),i["\u0275\u0275template"](14,fn,2,1,"ng-container",6),i["\u0275\u0275template"](15,hn,6,2,"div",7),i["\u0275\u0275pipe"](16,"async"),i["\u0275\u0275elementStart"](17,"div",8),i["\u0275\u0275elementStart"](18,"mg-generic-button",9),i["\u0275\u0275listener"]("onClick",(function(){return t.testInfo.emit(t.superAdminURL)})),i["\u0275\u0275text"](19),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](20,"div",10),i["\u0275\u0275elementStart"](21,"mat-slide-toggle",11),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.fields.studentRostering=e}))("ngModelChange",(function(e){return t.updateStudentRostering(e)})),i["\u0275\u0275text"](22," Roster Students "),i["\u0275\u0275element"](23,"mg-tooltip",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](24,Sn,4,2,"ng-container",6),i["\u0275\u0275elementStart"](25,"mat-slide-toggle",13),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.fields.staffRostering=e}))("ngModelChange",(function(e){return t.updateStaffRostering(e)})),i["\u0275\u0275text"](26," Roster Staff "),i["\u0275\u0275element"](27,"mg-tooltip",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](28,"div",14),i["\u0275\u0275elementStart"](29,"div",15),i["\u0275\u0275text"](30),i["\u0275\u0275element"](31,"mg-tooltip",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](32,"mg-form-select",5),i["\u0275\u0275listener"]("selectionChanged",(function(e){return t.updateUpdateExisting(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](33,"div",14),i["\u0275\u0275elementStart"](34,"div",15),i["\u0275\u0275text"](35),i["\u0275\u0275element"](36,"mg-tooltip",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](37,"mg-form-select",5),i["\u0275\u0275listener"]("selectionChanged",(function(e){return t.updateArchiveMissing(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](38,"mat-slide-toggle",16),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.notificationEmailsToggle=e}))("ngModelChange",(function(e){return t.updateNotificationEmailsToggle(e)})),i["\u0275\u0275text"](39," Send Rostering Results Email "),i["\u0275\u0275element"](40,"mg-tooltip",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](41,xn,1,8,"mg-form-select",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](42,En,9,12,"div",18),i["\u0275\u0275elementStart"](43,"div",19),i["\u0275\u0275elementStart"](44,"mg-generic-button",20),i["\u0275\u0275listener"]("onClick",(function(){return t.onDeleteSFTPRostering()})),i["\u0275\u0275text"](45),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](46,"div"),i["\u0275\u0275elementStart"](47,"mg-generic-button",21),i["\u0275\u0275listener"]("onClick",(function(){return t.resetSISFields()})),i["\u0275\u0275text"](48),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](49,vn,2,2,"mg-generic-button",22),i["\u0275\u0275pipe"](50,"async"),i["\u0275\u0275template"](51,Cn,1,1,"ng-template",null,23,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](53,"div",1),i["\u0275\u0275elementStart"](54,"div",24),i["\u0275\u0275elementStart"](55,"div",25),i["\u0275\u0275text"](56),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](57,"div",26),i["\u0275\u0275text"](58),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](59,"div",26),i["\u0275\u0275text"](60),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](61,"div",27),i["\u0275\u0275elementStart"](62,"a",28),i["\u0275\u0275text"](63," How to set up Automatic Rostering "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](64,yn,42,28,"ng-template",null,29,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](66,On,18,14,"ng-template",null,30,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](68,Mn,24,18,"ng-template",null,31,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](70,_n,30,23,"ng-template",null,32,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](72,Tn,24,18,"ng-template",null,33,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](74,In,12,8,"ng-template",null,34,i["\u0275\u0275templateRefExtractor"])),2&e){const e=i["\u0275\u0275reference"](52);i["\u0275\u0275advance"](8),i["\u0275\u0275property"]("multiple",!1)("searchable",!1)("isClearable",!1)("options",t.SIS_TYPE_OPTIONS)("value",t.fields.sisType),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.fields.sisType==t.sisTypeEnum.OTHER),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.fields.sisType==t.sisTypeEnum.AERIES),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.fields.sisType==t.sisTypeEnum.Q),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.fields.sisType==t.sisTypeEnum.INFINITE_CAMPUS),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.fields.sisType==t.sisTypeEnum.CLASSLINK),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.fields.sisType==t.sisTypeEnum.CLEVER),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](16,48,t.isSuperAdmin$)),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"](" ",t.MESSAGES.BUTTON_TEST," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngModel",t.fields.studentRostering),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("label",t.MESSAGES.TOOLTIP_UPDATE_STUDENTS),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.fields.studentRostering),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",t.fields.staffRostering),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("label",t.MESSAGES.TOOLTIP_UPDATE_ADMIN),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ","Existing People"," "),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("label",t.MESSAGES.TOOLTIP_UPDATE_USERS),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("multiple",!1)("searchable",!1)("isClearable",!1)("options",t.SFTP_EXISTING_USERS_OPTIONS)("value",t.fields.updateExisting),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ","Missing People"," "),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("label",t.MESSAGES.TOOLTIP_ARCHIVE_USERS),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("multiple",!1)("searchable",!1)("isClearable",!1)("options",t.SFTP_MISSING_USERS_OPTIONS)("value",t.fields.archiveMissing),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",t.notificationEmailsToggle),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("label",t.MESSAGES.TOOLTIP_ADD_EMAIL_LIST),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.notificationEmailsToggle),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("hasPermission","SUPERADMIN"),i["\u0275\u0275advance"](1),i["\u0275\u0275styleProp"]("margin-top",2,"rem"),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",t.MESSAGES.BUTTON_DELETE," "),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",t.MESSAGES.BUTTON_RESET," "),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!1===i["\u0275\u0275pipeBind1"](50,50,t.isUpdating$))("ngIfElse",e),i["\u0275\u0275advance"](7),i["\u0275\u0275textInterpolate1"](" ",t.MESSAGES.ONE_ROSTER_INFO_TITLE," "),i["\u0275\u0275advance"](1),i["\u0275\u0275styleProp"]("margin-bottom",2,"rem"),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",t.MESSAGES.ONE_ROSTER_DETAILS_MSG," "),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",t.MESSAGES.ONE_ROSTER_HELP_MSG," "),i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("href",t.MESSAGES.ONE_ROSTER_KB_LINK,i["\u0275\u0275sanitizeUrl"])}},directives:[P.e,P.f,D.E,D.u,D.v,kt.a,Gt.a,R.o,P.d,G.a,Ut.a,D.t,D.w,en.a,tn.a,R.t,A.d,F.a,A.h,L.b,D.d,D.n,D.o,H.a,D.l,D.j,D.B],pipes:[R.b],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");@media print,screen and (min-width:60em){.column-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;width:50%;margin-bottom:1.7647058824rem}}.row-setting[_ngcontent-%COMP%]{width:100%;height:2.9411764706rem;display:flex;justify-content:space-between;align-items:center;margin:.2941176471rem auto}.row-setting-title[_ngcontent-%COMP%]{width:100%;font-size:.8823529412rem}@media print,screen and (min-width:60em){.indent[_ngcontent-%COMP%]     .row-setting-title{margin-left:2.3529411765rem}}.rostering-info-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:left;margin:1.1764705882rem auto;line-height:1.4705882353rem}.rostering-info-title[_ngcontent-%COMP%]{font-size:1.1764705882rem;margin-bottom:.5882352941rem}.rostering-info-msg[_ngcontent-%COMP%]{font-size:.8823529412rem}.rostering-info-kb[_ngcontent-%COMP%]{font-weight:700}form[_ngcontent-%COMP%]{width:100%}.form-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.7647058824rem}.form-row-title[_ngcontent-%COMP%]{font-weight:600}.form-row[_ngcontent-%COMP%]   mg-form-select[_ngcontent-%COMP%]{min-width:10rem}mat-slide-toggle[_ngcontent-%COMP%]{margin-bottom:.5882352941rem}.automatic-rostering[_ngcontent-%COMP%]{gap:.2352941176rem}.email-list[_ngcontent-%COMP%]{margin-bottom:.4705882353rem}'],changeDetection:0}),e})();var Pn=n("q1Ec");const Rn=function(e,t){return{title:"Roster Staff",control:e,tooltip:t}};function An(e,t){if(1&e&&i["\u0275\u0275elementContainer"](0,18),2&e){const e=i["\u0275\u0275nextContext"]().ngIf,t=i["\u0275\u0275nextContext"](),n=i["\u0275\u0275reference"](27);i["\u0275\u0275property"]("ngTemplateOutlet",n)("ngTemplateOutletContext",i["\u0275\u0275pureFunction2"](2,Rn,e.staffRostering,t.TOOLTIP_MESSAGES.TOOLTIP_UPDATE_ADMIN))}}function Fn(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"mg-form-select",20),i["\u0275\u0275listener"]("selectionChanged",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).changeNotificationEmailsList(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]().ngIf,t=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("placeholder","Email address list")("multiple",!0)("addTag",t.addNew)("addTagText","Add email")("searchable",!0)("value",e.notificationEmails.value)("options",t.EMAIL_OPTIONS)("hideSelected",!1)}}const Ln=function(e,t){return{title:"Roster Students",control:e,tooltip:t}},Dn=function(e,t,n,i){return{title:"Existing People",options:e,value:t,control:n,tooltip:i}},Nn=function(e,t,n,i){return{title:"Missing People",options:e,value:t,tooltip:n,control:i}},kn=function(e,t){return{title:"Send Rostering Results Email",control:e,tooltip:t}};function Gn(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",2),i["\u0275\u0275projection"](1),i["\u0275\u0275elementStart"](2,"div",17),i["\u0275\u0275elementContainer"](3,18),i["\u0275\u0275template"](4,An,1,5,"ng-container",19),i["\u0275\u0275elementContainer"](5,18),i["\u0275\u0275elementContainer"](6,18),i["\u0275\u0275elementContainer"](7,18),i["\u0275\u0275template"](8,Fn,2,8,"ng-container",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=t.ngIf,n=i["\u0275\u0275nextContext"](),r=i["\u0275\u0275reference"](27),o=i["\u0275\u0275reference"](25);i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngTemplateOutlet",r)("ngTemplateOutletContext",i["\u0275\u0275pureFunction2"](10,Ln,e.studentRostering,n.TOOLTIP_MESSAGES.TOOLTIP_UPDATE_STUDENTS)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.studentRostering.value),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",o)("ngTemplateOutletContext",i["\u0275\u0275pureFunction4"](13,Dn,n.SFTP_EXISTING_USERS_OPTIONS,e.updateExisting.value,e.updateExisting,n.TOOLTIP_MESSAGES.TOOLTIP_UPDATE_USERS)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",o)("ngTemplateOutletContext",i["\u0275\u0275pureFunction4"](18,Nn,n.SFTP_MISSING_USERS_OPTIONS,e.archiveMissing.value,n.TOOLTIP_MESSAGES.TOOLTIP_ARCHIVE_USERS,e.archiveMissing)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",r)("ngTemplateOutletContext",i["\u0275\u0275pureFunction2"](23,kn,e.sendNotificationEmails,n.TOOLTIP_MESSAGES.TOOLTIP_ADD_EMAIL_LIST)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.sendNotificationEmails.value)}}function Un(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div",24),i["\u0275\u0275elementStart"](2,"div",25),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"div",26),i["\u0275\u0275text"](5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](e.name),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](e.credential)}}function Vn(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div",21),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div",22),i["\u0275\u0275template"](4,Un,6,2,"ng-container",23),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",e.MESSAGES.SFTP_CREDENTIALS_MSG," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",e.sftpCredentials)}}function jn(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mg-generic-button",27),i["\u0275\u0275listener"]("onClick",(function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275nextContext"]();return t.isUpdatingSubj.next(!0),t.onSubmit()})),i["\u0275\u0275text"](1," Save "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("isDisabled",e.sftpFormGroup.invalid)}}function qn(e,t){1&e&&i["\u0275\u0275element"](0,"mg-spinner",28),2&e&&i["\u0275\u0275property"]("diameter",40)}function zn(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275element"](1,"mg-tooltip",32),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]().tooltip;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("label",e)}}function Bn(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",29),i["\u0275\u0275elementStart"](1,"div",30),i["\u0275\u0275text"](2),i["\u0275\u0275template"](3,zn,2,1,"ng-container",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"mg-form-select",31),i["\u0275\u0275listener"]("selectionChanged",(function(e){return t.control.setValue(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=t.title,n=t.options,r=t.value,o=t.tooltip;i["\u0275\u0275classProp"]("is-disabled",t.disabled),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",e," "),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",o),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("multiple",!1)("searchable",!1)("isClearable",!1)("options",n)("value",r)}}function Hn(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275element"](1,"mg-tooltip",32),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]().tooltip;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("label",e)}}function $n(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",29),i["\u0275\u0275elementStart"](1,"div",30),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](3,Hn,2,1,"ng-container",8),i["\u0275\u0275element"](4,"mat-slide-toggle",33),i["\u0275\u0275elementEnd"]()),2&e){const e=t.title,n=t.tooltip,r=t.control;i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](e),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("formControl",r)}}function Kn(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",29),i["\u0275\u0275elementStart"](1,"div",30),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](3,"mg-form-text-input",34),i["\u0275\u0275elementEnd"]()),2&e){const e=t.title,n=t.placeholder,r=t.control;i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](e),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("placeholder",n)("control",r)}}const Yn=["*"];let Wn=(()=>{class e{constructor(e,t,n,r,o){this._mrService=e,this._snackbar=t,this._mingaManager=n,this._cdr=r,this._dialog=o,this.MESSAGES=Ht,this.TOOLTIP_MESSAGES=Qt,this.SFTP_EXISTING_USERS_OPTIONS=Kt,this.SFTP_MISSING_USERS_OPTIONS=Yt,this.sftpFormGroup=new D.k({studentRostering:new D.h(!1,[D.D.required]),staffRostering:new D.h(!1,[D.D.required]),updateExisting:new D.h(!1,[D.D.required]),archiveMissing:new D.h(!1,[D.D.required]),sendNotificationEmails:new D.h(!1,[D.D.required]),notificationEmails:new D.h([],[Bt.a.allValuesAsEmailsValidator])}),this.sftpCredentials=[],this.isUpdatingSubj=new l.a(!1),this.sftpRosteringExistsSubj=new l.a(!1),this.hasSavedBefore=!1,this.rosteringStatusChange=new i.EventEmitter,this.EMAIL_OPTIONS=[]}set sftpValues(e){e&&(this.sftpFormGroup.reset(),this._initFormGroup(e))}onSubmit(){return Object(o.a)(this,void 0,void 0,(function*(){if(yield this._submit(),this._mrService.rosteringFormGroup.controls.methodStatus.value){if(!this.hasSavedBefore){try{yield this._generateCredentials(),this.hasSavedBefore=!0}catch(e){this._snackbar.open("Error contacting SFTP server:",e)}this.sftpRosteringExistsSubj.next(!0)}this.isUpdatingSubj.next(!1)}else this.isUpdatingSubj.next(!1)}))}onResetFields(){this.sftpFormGroup.reset();const e=this.sftpFormGroup.controls;e.studentRostering.setValue(!1),e.staffRostering.setValue(!1),e.updateExisting.setValue(!1),e.archiveMissing.setValue(!1),e.sendNotificationEmails.setValue(!1),e.notificationEmails.setValue([])}onDeleteSFTPRostering(){this._launchDeleteRosteringMethodPrompt()}changeNotificationEmailsList(e){return Object(o.a)(this,void 0,void 0,(function*(){this.sftpFormGroup.get("notificationEmails").setValue(e)}))}addNew(e){return{label:e,value:e}}_initFormGroup(e){const t=this.sftpFormGroup.controls;"boolean"==typeof e.getStudentRostering()&&t.studentRostering.setValue(e.getStudentRostering()),"boolean"==typeof e.getStaffRostering()&&t.staffRostering.setValue(e.getStaffRostering()),"boolean"==typeof e.getUpdateExisting()&&t.updateExisting.setValue(e.getUpdateExisting()),"boolean"==typeof e.getArchiveMissing()&&t.archiveMissing.setValue(e.getArchiveMissing()),"object"==typeof e.getNotificationEmailsList()&&(t.notificationEmails.setValue(e.getNotificationEmailsList()),this.EMAIL_OPTIONS=[],e.getNotificationEmailsList().forEach(e=>{this.EMAIL_OPTIONS.push({value:e,label:e})})),this.EMAIL_OPTIONS.length>0&&t.sendNotificationEmails.setValue(!0),Object(at.$enum)(nt.RosteringMethod).asKeyOrThrow(e.getRosteringMethod()),this._mrService.hasSavedSftpBefore&&(this.sftpRosteringExistsSubj.next(!0),this.hasSavedBefore=!0),this._cdr.markForCheck()}_submit(){return Object(o.a)(this,void 0,void 0,(function*(){if(this.sftpFormGroup.invalid)return;const e=this.sftpFormGroup.controls,t=new Vt.sisFields;t.setRosteringMethod(nt.RosteringMethod.SFTP),t.setStudentRostering(e.studentRostering.value),t.setStaffRostering(e.staffRostering.value),t.setUpdateExisting(e.updateExisting.value),t.setArchiveMissing(e.archiveMissing.value),t.setNotificationEmailsList(e.notificationEmails.value),this._setActiveFlag(t);try{yield this._mingaManager.updateSIS(t)}catch(n){this._snackbar.open("failed to update SIS: ",n),this.isUpdatingSubj.next(!1)}}))}_setActiveFlag(e){return Object(o.a)(this,void 0,void 0,(function*(){const t=this._mrService.rosteringFormGroup.controls.methodStatus.value;e.setActive(t),t&&(yield this._mingaManager.deactivateAllRosteringMethods())}))}_generateCredentials(){return Object(o.a)(this,void 0,void 0,(function*(){const e=yield this._mingaManager.generateMingaSFTPCredentials();this.sftpCredentials=[{name:$t.HOST,credential:e.host},{name:$t.USERNAME,credential:e.username},{name:$t.PASSWORD,credential:e.password}],this._cdr.markForCheck()}))}_launchDeleteRosteringMethodPrompt(){this._dialog.open(lt.a,{data:{text:{description:this.MESSAGES.SFTP_DELETE_MSG,deleteBtn:"Delete"}}}).afterClosed().subscribe(e=>Object(o.a)(this,void 0,void 0,(function*(){e.confirmed&&(yield this._deleteSFTPRostering(),this.hasSavedBefore=!1)})))}_deleteSFTPRostering(){return Object(o.a)(this,void 0,void 0,(function*(){yield this._mrService.deleteSFTPRostering(),this.rosteringStatusChange.emit(!1),this.onResetFields()}))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](ct),i["\u0275\u0275directiveInject"](mt.b),i["\u0275\u0275directiveInject"](dt.a),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](st.b))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-sftp-inputs"]],inputs:{sftpValues:"sftpValues"},outputs:{rosteringStatusChange:"rosteringStatusChange"},ngContentSelectors:Yn,decls:30,vars:11,consts:[["fxLayout.gt-sm","row","fxLayoutGap.gt-sm","10rem"],["class","column-wrapper",4,"ngIf"],[1,"column-wrapper"],["fxLayout","column","fxLayoutAlign","center start",1,"rostering-info-container"],[1,"rostering-info-title"],[1,"rostering-info-msg"],[1,"rostering-info-kb"],["target","_blank",3,"href"],[4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between center",1,"column-wrapper"],["colorTheme","red","variant","secondary","size","medium",3,"isDisabled","onClick"],["colorTheme","navy","variant","clear","size","small",3,"onClick"],["colorTheme","blue","variant","secondary","size","medium",3,"isDisabled","onClick",4,"ngIf","ngIfElse"],["updatingTpl",""],["rowSelect",""],["rowToggle",""],["rowInput",""],[1,"indent"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],["outputValueOnly","","appearance","primary",3,"placeholder","multiple","addTag","addTagText","searchable","value","options","hideSelected","selectionChanged"],[1,"rostering-info-container"],[1,"credentials-list"],[4,"ngFor","ngForOf"],[1,"credentials-list-row"],[1,"credentials-list-title"],[1,"credentials-list-value"],["colorTheme","blue","variant","secondary","size","medium",3,"isDisabled","onClick"],[3,"diameter"],[1,"row-setting"],[1,"row-setting-title"],["outputValueOnly","","appearance","primary",3,"multiple","searchable","isClearable","options","value","selectionChanged"],[3,"label"],[3,"formControl"],[3,"placeholder","control"]],template:function(e,t){if(1&e&&(i["\u0275\u0275projectionDef"](),i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,Gn,9,26,"div",1),i["\u0275\u0275elementStart"](2,"div",2),i["\u0275\u0275elementStart"](3,"div",3),i["\u0275\u0275elementStart"](4,"div",4),i["\u0275\u0275text"](5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"div",5),i["\u0275\u0275text"](7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"div",5),i["\u0275\u0275text"](9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"div",6),i["\u0275\u0275elementStart"](11,"a",7),i["\u0275\u0275text"](12," How to set up Automatic Rostering "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](13,Vn,5,2,"ng-container",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"div",9),i["\u0275\u0275elementStart"](15,"mg-generic-button",10),i["\u0275\u0275listener"]("onClick",(function(){return t.onDeleteSFTPRostering()})),i["\u0275\u0275text"](16," Delete "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](17,"div"),i["\u0275\u0275elementStart"](18,"mg-generic-button",11),i["\u0275\u0275listener"]("onClick",(function(){return t.onResetFields()})),i["\u0275\u0275text"](19," Reset "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](20,jn,2,1,"mg-generic-button",12),i["\u0275\u0275pipe"](21,"async"),i["\u0275\u0275template"](22,qn,1,1,"ng-template",null,13,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](24,Bn,5,9,"ng-template",null,14,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](26,$n,5,3,"ng-template",null,15,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](28,Kn,4,3,"ng-template",null,16,i["\u0275\u0275templateRefExtractor"])),2&e){const e=i["\u0275\u0275reference"](23);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.sftpFormGroup.controls),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"](" ",t.MESSAGES.SFTP_INFO_TITLE," "),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",t.MESSAGES.SFTP_DETAILS_MSG," "),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",t.MESSAGES.SFTP_HELP_MSG," "),i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("href",t.MESSAGES.SFTP_KB_URL,i["\u0275\u0275sanitizeUrl"]),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.sftpCredentials.length),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("isDisabled",!t.sftpRosteringExistsSubj.value),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",!1===i["\u0275\u0275pipeBind1"](21,9,t.isUpdatingSubj))("ngIfElse",e)}},directives:[P.e,P.f,R.o,P.d,G.a,R.t,kt.a,Gt.a,R.n,H.a,en.a,Ut.a,D.t,D.i,Pn.a],pipes:[R.b],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");@media print,screen and (min-width:60em){.column-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;width:50%;margin-bottom:1.7647058824rem}}.row-setting[_ngcontent-%COMP%]{width:100%;height:2.9411764706rem;display:flex;justify-content:space-between;align-items:center;margin:.2941176471rem auto}.row-setting-title[_ngcontent-%COMP%]{width:100%;font-size:.8823529412rem}@media print,screen and (min-width:60em){.indent[_ngcontent-%COMP%]     .row-setting-title{margin-left:2.3529411765rem}}.rostering-info-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:left;margin:1.1764705882rem auto;line-height:1.4705882353rem}.rostering-info-title[_ngcontent-%COMP%]{font-size:1.1764705882rem;margin-bottom:.5882352941rem}.rostering-info-msg[_ngcontent-%COMP%]{font-size:.8823529412rem}.rostering-info-kb[_ngcontent-%COMP%]{font-weight:700}.credentials-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;width:100%}.credentials-list-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:.8823529412rem;margin:.4705882353rem 0}.credentials-list-title[_ngcontent-%COMP%]{padding:.4705882353rem .4705882353rem .4705882353rem 0;margin-right:.5882352941rem}.credentials-list-value[_ngcontent-%COMP%]{width:20.5882352941rem;text-align:end;background-color:#e2e2e2;border-color:#737373;font-weight:700;padding:.4705882353rem}mg-form-text-input[_ngcontent-%COMP%]{width:100%}']}),e})();var Qn=n("D4bV"),Jn=n("w8an");function Xn(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"h2",8),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](e.MESSAGES.HEADER_TITLE)}}function Zn(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function ei(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,Zn,1,0,"ng-container",9),i["\u0275\u0275elementContainerEnd"]()),2&e){i["\u0275\u0275nextContext"]();const e=i["\u0275\u0275reference"](6);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",e)}}const ti=function(e){return{$implicit:e}};function ni(e,t){if(1&e&&i["\u0275\u0275elementContainer"](0,16),2&e){const e=i["\u0275\u0275nextContext"]().ngIf;i["\u0275\u0275nextContext"](2);const t=i["\u0275\u0275reference"](10);i["\u0275\u0275property"]("ngTemplateOutlet",t)("ngTemplateOutletContext",i["\u0275\u0275pureFunction1"](2,ti,e.methodStatus))}}function ii(e,t){if(1&e&&i["\u0275\u0275elementContainer"](0,16),2&e){const e=i["\u0275\u0275nextContext"]().ngIf;i["\u0275\u0275nextContext"](2);const t=i["\u0275\u0275reference"](12);i["\u0275\u0275property"]("ngTemplateOutlet",t)("ngTemplateOutletContext",i["\u0275\u0275pureFunction1"](2,ti,e.methodStatus))}}function ri(e,t){if(1&e&&i["\u0275\u0275elementContainer"](0,17),2&e){i["\u0275\u0275nextContext"](3);const e=i["\u0275\u0275reference"](14);i["\u0275\u0275property"]("ngTemplateOutlet",e)}}function oi(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",18),i["\u0275\u0275element"](1,"mg-sis-stats"),i["\u0275\u0275elementEnd"]())}function ai(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementContainerStart"](1,12),i["\u0275\u0275template"](2,ni,1,4,"ng-container",13),i["\u0275\u0275template"](3,ii,1,4,"ng-container",13),i["\u0275\u0275template"](4,ri,1,1,"ng-container",14),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275template"](5,oi,2,0,"div",15),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.ngIf,n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitch",e.rosteringMethod.value),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",n.ROSTERING_METHODS.ONE_ROSTER),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",n.ROSTERING_METHODS.SFTP),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",n.ROSTERING_METHODS.SIS_API),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.methodStatus.value)}}function li(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",10),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](2,ai,6,5,"ng-container",11)),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](e.MESSAGES.PAGE_SUBTITLE),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.mrService.rosteringFormGroup.controls)}}function si(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",19),i["\u0275\u0275elementStart"](1,"div",20),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](3,"mat-slide-toggle",23),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]().ngIf,t=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](t.MESSAGES.STATE_SELECT_MSG),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("formControl",e.methodStatus)}}function di(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"div",19),i["\u0275\u0275elementStart"](2,"div",20),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"mg-form-select",21),i["\u0275\u0275listener"]("selectionChanged",(function(e){return t.ngIf.rosteringMethod.setValue(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](5,si,4,2,"div",22),i["\u0275\u0275elementEnd"]()),2&e){const e=t.ngIf,n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275classProp"]("is-disabled",e.methodStatus.value),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](n.MESSAGES.METHOD_SELECT_TITLE),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("multiple",!1)("searchable",!1)("isClearable",!1)("options",n.ROSTERING_OPTIONS)("value",e.rosteringMethod.value),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.rosteringMethod.value!==n.ROSTERING_METHODS.SIS_API)}}function ci(e,t){if(1&e&&i["\u0275\u0275template"](0,di,6,9,"div",11),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngIf",e.mrService.rosteringFormGroup.controls)}}function mi(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function pi(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mg-sis-inputs",24),i["\u0275\u0275listener"]("rosteringStatusChange",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onResetRosteringForm()}))("testInfo",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().testIntegration(t)})),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275template"](2,mi,1,0,"ng-container",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div",10),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](),t=i["\u0275\u0275reference"](8);i["\u0275\u0275property"]("sisFieldValues",i["\u0275\u0275pipeBind1"](1,3,e.mrService.oneRosterSisValuesObs)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngTemplateOutlet",t),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](e.MESSAGES.ONE_ROSTER_CHANGE_TITLE)}}function gi(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function ui(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mg-sftp-inputs",25),i["\u0275\u0275listener"]("rosteringStatusChange",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onResetRosteringForm()})),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275template"](2,gi,1,0,"ng-container",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div",10),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](),t=i["\u0275\u0275reference"](8);i["\u0275\u0275property"]("sftpValues",i["\u0275\u0275pipeBind1"](1,3,e.mrService.sftpSisValuesObs)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngTemplateOutlet",t),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](e.MESSAGES.SFTP_CHANGE_TITLE)}}function fi(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function hi(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",26),i["\u0275\u0275template"](1,fi,1,0,"ng-container",9),i["\u0275\u0275elementEnd"]()),2&e){i["\u0275\u0275nextContext"]();const e=i["\u0275\u0275reference"](8);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",e)}}function Si(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mg-text",27),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.MESSAGES.NON_ACCOUNT_MANAGE_MSG," ")}}let xi=(()=>{class e{constructor(e,t,n,i,r,o){this.mrService=e,this._snackbar=t,this._mingaManager=n,this._router=i,this._sisTestDialog=r,this._cdr=o,this.MESSAGES=rt,this.ROSTERING_OPTIONS=ot,this.ROSTERING_METHODS=nt.RosteringMethod,this.SAoutput=""}testIntegration(e){return Object(o.a)(this,void 0,void 0,(function*(){const{error:t,infos:n,rawOutput:i}=yield this._mingaManager.testSISIntegration(e);let r=[];n&&Object(tt.isArray)(n)&&(r=n.map(e=>({id:e.id,name:e.name}))),this.launchTestInfoDialog(r,i,t)}))}launchTestInfoDialog(e,t,n){return Object(o.a)(this,void 0,void 0,(function*(){this._sisTestDialog.open({data:{schoolInfos:e,rawOutput:t,error:n}})}))}onClose(){Object(it.a)(this._router)}onResetRosteringForm(){return Object(o.a)(this,void 0,void 0,(function*(){const e=this.mrService.rosteringFormGroup.controls;e.rosteringMethod.setValue(nt.RosteringMethod.ONE_ROSTER),e.methodStatus.setValue(!1,{emitEvent:!1}),yield this.mrService.initRosteringSisValues()}))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](ct),i["\u0275\u0275directiveInject"](mt.b),i["\u0275\u0275directiveInject"](dt.a),i["\u0275\u0275directiveInject"](r.g),i["\u0275\u0275directiveInject"](xt),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["mg-manage-rostering"]],features:[i["\u0275\u0275ProvidersFeature"]([ct])],decls:17,vars:4,consts:[["headerLeft",""],[4,"ngIf","ngIfElse"],["mainContentTemplate",""],["methodSelectTemplate",""],["oneRosterTemplate",""],["sftpTemplate",""],["sisApiTemplate",""],["nonAccountManageTemplate",""],[1,"header-title"],[4,"ngTemplateOutlet"],[1,"subheading"],[4,"ngIf"],[3,"ngSwitch"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngSwitchCase"],[3,"ngTemplateOutlet",4,"ngSwitchCase"],["class","stats-container",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngTemplateOutlet"],[1,"stats-container"],[1,"row-setting"],[1,"row-setting-title"],["outputValueOnly","","appearance","primary",1,"row-setting-select",3,"multiple","searchable","isClearable","options","value","selectionChanged"],["class","row-setting",4,"ngIf"],[3,"formControl"],[3,"sisFieldValues","rosteringStatusChange","testInfo"],[3,"sftpValues","rosteringStatusChange"],[1,"column-wrap"],["variant","header-lg","fontWeight","400","spacing","4"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mg-manager-overlay-subpage"),i["\u0275\u0275template"](1,Xn,2,1,"ng-template",null,0,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](3,ei,2,1,"ng-container",1),i["\u0275\u0275pipe"](4,"hasPermission"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](5,li,3,2,"ng-template",null,2,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](7,ci,1,1,"ng-template",null,3,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](9,pi,5,5,"ng-template",null,4,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](11,ui,5,5,"ng-template",null,5,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](13,hi,2,1,"ng-template",null,6,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](15,Si,2,1,"ng-template",null,7,i["\u0275\u0275templateRefExtractor"])),2&e){const e=i["\u0275\u0275reference"](16);i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](4,2,"MINGA_ACCOUNT_MANAGE"))("ngIfElse",e)}},directives:[Et.a,R.o,R.t,R.q,R.r,Nt,kt.a,Gt.a,Ut.a,D.t,D.i,wn,Wn,Qn.a],pipes:[Jn.a,R.b],styles:['@import url("https://fonts.googleapis.com/css?family=Muli:400,700,900");@media print,screen and (min-width:60em){.column-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;width:50%;margin-bottom:1.7647058824rem}}.row-setting[_ngcontent-%COMP%]{width:100%;height:2.9411764706rem;display:flex;justify-content:space-between;align-items:center;margin:.2941176471rem auto}.row-setting-title[_ngcontent-%COMP%]{width:100%;font-size:.8823529412rem}@media print,screen and (min-width:60em){.indent[_ngcontent-%COMP%]     .row-setting-title{margin-left:2.3529411765rem}}.rostering-info-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:left;margin:1.1764705882rem auto;line-height:1.4705882353rem}.rostering-info-title[_ngcontent-%COMP%]{font-size:1.1764705882rem;margin-bottom:.5882352941rem}.rostering-info-msg[_ngcontent-%COMP%]{font-size:.8823529412rem}.rostering-info-kb[_ngcontent-%COMP%]{font-weight:700}[_nghost-%COMP%]{display:flex;flex-direction:column;position:relative}.manager-overlay-subpage[_ngcontent-%COMP%]{margin-bottom:3.5294117647rem}.manager-overlay-subpage-header[_ngcontent-%COMP%]{background:#f4f4f4;padding:1.1764705882rem 20%;box-sizing:border-box;margin:-20px -20% 0;width:calc(140%)}.manager-overlay-subpage-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{display:inline-block;font-size:1.2941176471rem;font-weight:800;color:#036;padding:0;margin:0}@media print,screen and (max-width:37.49875em){.manager-overlay-subpage-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;display:block}}.manager-overlay-subpage-content[_ngcontent-%COMP%]{flex:1;padding:1.1764705882rem 0;box-sizing:border-box}.manager-overlay-subpage-content.white-bg[_ngcontent-%COMP%]{background-color:#fff}.quick-action-container[_ngcontent-%COMP%]{margin-bottom:1.1764705882rem}.quick-action-container[_ngcontent-%COMP%]:empty{display:none}.quick-action-btn[_ngcontent-%COMP%]{-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;-webkit-appearance:none;border-radius:0;text-align:inherit;box-shadow:none;color:inherit;font:inherit;padding:0;margin:0;background:none;border:none;outline:none;box-sizing:border-box;cursor:pointer;font-size:.8823529412rem;color:#036;display:inline-flex;align-items:center;justify-content:center;--mg-icon-size:20px}.quick-action-btn[_ngcontent-%COMP%]   mg-icon[_ngcontent-%COMP%]{margin-right:.2941176471rem}.quick-action-btn[_ngcontent-%COMP%]:hover{opacity:.7}@media print,screen and (max-width:37.49875em){.quick-action-btn[_ngcontent-%COMP%]{display:none}}.manager-layout-loading-container[_ngcontent-%COMP%]{padding:2.9411764706rem 0}.header-title[_ngcontent-%COMP%]{display:inline-block;font-size:1.2941176471rem;font-weight:800;color:#036;padding:0;margin:0}@media print,screen and (max-width:37.49875em){.header-title[_ngcontent-%COMP%]{text-align:center;display:block}}.subheading[_ngcontent-%COMP%]{font-size:1.1764705882rem;font-weight:800}.subheading[_ngcontent-%COMP%]:not(:first-child){margin-top:1.4705882353rem}.is-disabled[_ngcontent-%COMP%]{pointer-events:none}.is-disabled[_ngcontent-%COMP%]     .ng-select-container.ng-has-value{color:#d3d3d3}.stats-container[_ngcontent-%COMP%]{display:block;max-height:300px;overflow:scroll}.SA-output[_ngcontent-%COMP%]{overflow:scroll;white-space:pre-line}.row-setting-title[_ngcontent-%COMP%]{font-weight:600}.row-setting-select[_ngcontent-%COMP%]{min-width:11rem}.column-wrap[_ngcontent-%COMP%]{width:50%}']}),e})();var Ei=n("pMoy");let vi=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[Le.a,ze.a,Ge.a,De.a,R.c,Re.a,Ue.l]]}),e})();var Ci=n("Ruz7"),yi=n("1uLP"),Oi=n("wrPN"),Mi=n("37Vl");let _i=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[ke.a,Ci.a,Ge.a,ht.a,St,$e.b,yi.a,Ae.a,vi,ze.a,O.b,Mi.a,Oi.a,R.c,D.m,Ut.b,D.A,Re.a,Ei.b,L.c]]}),e})();var Ti=function(e){return e.ROOT="people-manager",e.MANAGE="manage",e.ROSTER="roster",e}({});const Ii=[{path:"",pathMatch:"full",redirectTo:"manage"},{path:"",component:Je,data:{defaultRootPath:Ti.ROOT,tabs:[{title:"Manage People",path:Ti.MANAGE,permissions:{atLeastOne:[E.MingaPermission.MINGA_PEOPLE_MANAGE]}},{title:"Rostering",path:Ti.ROSTER,permissions:{atLeastOne:[E.MingaPermission.MINGA_ACCOUNT_MANAGE]}}]},children:[{path:Ti.MANAGE,component:Pe,data:{title:"Manage People"}},{path:Ti.ROSTER,component:xi,data:{title:"Rostering"}}]}];let bi=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[et,_i,r.k.forChild(Ii)],r.k]}),e})()},VD70:function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.SisIdFieldKey=void 0,(i=t.SisIdFieldKey||(t.SisIdFieldKey={})).IDENTIFIER="identifier",i.SOURCE_ID="sourcedId",i.USERNAME="username"},"y++Y":function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n("VD70"),t)}}]);
//# sourceMappingURL=minga-app-src-app-people-manager-route-PeopleManagerRoutes-module-es2015.js.map